{"version":3,"sources":["lds.tsx","Authentication.tsx","SecurityList.ts","utils/logger.ts","utils/notifications.ts","hooks/useColorScheme.ts","components/SvgExpo.web.tsx","images.tsx","constants/Colors.ts","style.ts","utils/hooks.tsx","components/LabeledField.tsx","components/PrimaryButton.tsx","components/SecondaryButton.tsx","components/ButtonField.tsx","components/TextField.tsx","utils/validators.ts","components/ScrollWithButtons.tsx","utils/misc.tsx","screens/create_account/shared.ts","components/Link.tsx","screens/create_account/AccountInfoSection.tsx","components/Headers.tsx","components/Section.tsx","components/Picker.tsx","components/Slider.tsx","components/AddButton.tsx","components/KeyboardAvoidingInput.tsx","screens/create_account/InvestmentInterestSection.tsx","components/IconfiyIcon.tsx","utils/third-party/twitter.ts","utils/third-party/youtube.ts","utils/third-party/shared.ts","components/YourContentComponent.tsx","components/ProfileButton.tsx","components/NoDataPanel.tsx","components/List.tsx","components/WatchlistPicker.tsx","components/Themed.tsx","screens/create_account/AnalystStartSection.tsx","components/Table.tsx","components/LinkBrokerageComponent.tsx","components/ToolTip.tsx","components/SwitchField.tsx","screens/SubscriptionScreen.tsx","components/HtmlView.web.tsx","screens/CreateAccountScreen.tsx","screens/create_account/BasicInfoSection.tsx","screens/create_account/PickWatchlistSection.tsx","screens/create_account/LinkBrokerageSection.tsx","screens/create_account/YourContentSection.tsx","screens/create_account/SubscrpitionCostSection.tsx","screens/create_account/ProfileIconSection.tsx","screens/create_account/TermsScreen.tsx","screens/create_account/PrivacyScreen.tsx","navigation/LinkingConfiguration.ts","screens/NotFoundScreen.tsx","components/ProfileBanner.tsx","components/ProfileBar.tsx","components/PrimaryChip.tsx","components/IconButton.tsx","components/AsyncPressable.tsx","components/ShareButton.tsx","components/PostView.tsx","components/PostList.tsx","components/MultiTermFeed.tsx","components/WatchlistItemRenderItem.tsx","screens/WatchlistViewerScreen.tsx","components/WatchlistSection.tsx","components/PlusContentButton.tsx","screens/FeedScreen.tsx","charts-js/animated-path.js","charts-js/chart/chart.js","charts-js/area-chart.js","charts-js/stacked-area-chart.js","charts-js/bar-chart/bar-chart.js","charts-js/bar-chart/bar-chart-grouped.js","charts-js/stacked-bar-chart/stacked-bar-chart.js","charts-js/stacked-bar-chart/stacked-bar-grouped.js","charts-js/line-chart/line-chart.js","charts-js/chart/chart-grouped.js","charts-js/line-chart/line-chart-grouped.js","charts-js/line-chart/index.js","charts-js/progress-circle.js","charts-js/x-axis.js","charts-js/y-axis.js","charts-js/chart-decorators/horizontal-line.js","charts-js/chart-decorators/point.js","charts-js/chart-decorators/tooltip.js","charts-js/grid.js","components/InteractiveGraph.tsx","components/ButtonGroup.tsx","components/HoldingRenderItem.tsx","components/TradeRenderItem.tsx","screens/ProfileScreen.tsx","components/LoginButtons.tsx","screens/WelcomeScreen.tsx","components/SideMenu.tsx","screens/NotificationScreen.tsx","screens/BlockListModalScreen.tsx","screens/PortfolioScreen.tsx","components/SearchBar.tsx","navigation/BottomTabNavigator.tsx","screens/SearchScreen.tsx","navigation/DrawerNavigator.tsx","screens/AccountSettingsScreen.tsx","screens/AccountInfoScreen.tsx","screens/AuthScreen.tsx","screens/ChangePasswordScreen.tsx","screens/CompanyScreen.tsx","screens/ImagePicker.tsx","screens/NotificationTradeScreen.tsx","screens/PostEditorScreen.tsx","components/CommentView.tsx","components/CommentList.tsx","screens/PostScreen.tsx","screens/TableModalScreen.tsx","screens/VerificationScreen.tsx","components/VirtualListWithButtons.tsx","screens/WatchlistEditorScreen.tsx","screens/WatchlistScreen.tsx","screens/AppInformationScreen.tsx","screens/BrokeragePickerScreen.tsx","screens/IbkrInfoScreen.tsx","screens/RobinhoodLoginScreen.tsx","navigation/RootNavigator.tsx","navigation/index.tsx","App.tsx","index.js","hooks/useCachedResources.ts","assets/@iconify/keyboard-close.js","assets/post-feed/bookmark-active.svg","assets/post-feed/bookmark-active-blue.svg","assets/side-menu/Information.svg","assets/logo.svg","assets/logo-no-bg.svg","assets/nav-bar/notification-active.png","assets/nav-bar/notification.png","assets/store-front-logo2-alt.svg","assets/store-front.svg","assets/app-title.svg","assets/splash-welcome.svg","assets/ClimbingMountain.svg","assets/Debate.svg","assets/Studying.svg","assets/analyze.svg","assets/bank.svg","assets/IBKR.svg","assets/robinhood_logo.svg","assets/robinhood_logo_long.svg","assets/misc/plus.svg","assets/post-feed/upvote.svg","assets/post-feed/comment.svg","assets/post-feed/bookmark.svg","assets/post-feed/ei_retweet.svg","assets/post-feed/PremiumStar.svg","assets/post-feed/SendIcon.svg","assets/side-menu/Account.svg","assets/side-menu/Competition.svg","assets/side-menu/Feedback.svg","assets/side-menu/Help.svg","assets/side-menu/Learn.svg","assets/side-menu/Log Out.svg","assets/side-menu/Profile.svg","assets/side-menu/Watchlist.svg","assets/bank-link-icon.svg","assets/@iconify/youtube-icon.js","assets/@iconify/spotify-icon.js","assets/@iconify/twitter.js","assets/@iconify/linkedin-icon.js","assets/@iconify/substack.js","assets/analyze2.svg","assets/analytics.svg","assets/@iconify/user.js","assets/@iconify/share.js","assets/@iconify/plus-circle.js","assets/fonts/SpaceMono-Regular.ttf","assets/fonts/K2D-Regular.ttf","assets/rnui/chevronDown.png","assets/rnui/add.png","assets/rnui/plus.png","assets/nav-bar/has-notification-active.png","assets/nav-bar/has-notification.png","assets/nav-bar/portfolio-active.png","assets/nav-bar/portfolio.png","assets/nav-bar/feed-active.png","assets/nav-bar/feed.png","assets/nav-bar/search-active.png","assets/nav-bar/search.png","assets/nav-bar/bookmark-active.png","assets/nav-bar/bookmark.png","assets/nav-bar/menu.png","assets/post-feed/flatgrad.png"],"names":["lds","isCachedMap","authToken","hasAuthed","isExplirable","securities","duration","useData","key","expireCheck","cachedAt","Date","now","setValue","undefined","useState","value","_setValue","useEffect","sub","EventRegister","addEventListener","data","removeEventListener","useCallback","v","cachedLds","Object","keys","forEach","k","AsyncStorage","setItem","JSON","stringify","emit","initLds","result","getItem","parse","securityListTask","useAppUser","tracker","_appUser","setAppUser","_loginResult","setLoginResult","setAuthToken","nav","useNavigation","createLoginState","currentUser","loginResult","updated","appUser","user_id","token","setupStatus","needsSettings","settings","length","needsAnalystSettings","Boolean","analyst","analyst_profile","loginState","setLoginState","console","log","forceTrigger","updateState","signIn","email","pass","Authentication","signOut","Auth","navigate","login","User","get","enableVerbose","error","err","tryCatch","action","ex","Log","enabled","verbose","msg","registerDeviceForNotifications","Device","existingStatus","Notifications","status","finalStatus","Api","Notification","extensions","registerUserDevice","provider","Platform","OS","deviceId","timezone","Localization","name","importance","MAX","vibrationPattern","lightColor","fetchSecurities","list","Security","byId","bySymbol","r","id","symbol","getSecurityList","useSecuritiesList","setErr","setSecurities","localValue","setLocalValue","then","catch","useColorScheme","_useColorScheme","SvgExpo","props","url","children","type","lastRef","useRef","onReadyRef","onReady","current","divRef","svgData","setSvgData","fetch","ok","statusText","text","setTimeout","View","style","ref","height","width","justifyContent","alignContent","alignItems","display","dangerouslySetInnerHTML","__html","sideMenu","Account","Competition","Feedback","Information","Help","Learn","LogOut","Profile","Watchlist","Bank_Link","BookmarkActive","_BookmarkActive","BookmarkInactive","_BookmarkInactive","BookmarkActiveBlue","_BookmarkActiveBlue","makeExpoSvg","Svg","AppTitle","_AppTitle","SplashWelcome","_SplashWelcome","ClimbingMountain","_ClimbingMountain","Debate","_Debate","Studying","_Studying","Analyze","_Analyze","Bank","_Bank","IBKR","_IBKR","RobinhoodLogo","_RobinhoodLogo","Retweet","_RobinhoodLogoLong","_IconBg","_IconNoBg","_PlusIcon","_Retweet","UpvoteIcon","_UpvoteIcon","CommentIcon","_CommentIcon","SendIcon","_SendIcon","InfoIcon","PremiumStar","_PremiumStar","NavIconTypeOverride","require","no","active","inactive","has","navIcons","BookmarkIcons","social","TwitterLogo","LinkedInLogo","YouTubeLogo","SubstackLogo","SpotifyLogo","light","background","tint","tabIconDefault","tabIconSelected","dark","AppColors","flex","row","flexDirection","shadow","elevation","shadowOffset","shadowColor","shadowOpacity","shadowRadius","noMargin","marginTop","marginRight","marginBottom","marginLeft","fonts","xSmall","small","medium","large","xLarge","font","size","color","isBold","fontSize","fontWeight","sizes","paddView","padding","backgroundColor","elevated","marginHorizontal","paddingVertical","borderColor","borderWidth","borderRadius","bannerText","textAlign","margin","lineHeight","thinBannerText","marginVertical","textInputWiz","useOpacityAnim","opacityAnim","Animated","Value","timing","delay","toValue","useNativeDriver","start","useMemo","BannerText","Text","opacity","AppearView","styleProp","Symbol","iterator","unshift","useReadonlyEntity","seedValue","setData","hasChanged","setHasChanged","resetData","d","update","updates","_entity","bindTextInput","entity","converter","onChangeText","bindTextInputBase","valueKey","onChangeTextKey","bindKeys","output","fromType","toType","bindPicker","onSelect","item","useIsKeyboardVisible","isKeyboardVisible","setIsKeyboardVisible","useLayoutEffect","showSubscription","Keyboard","addListener","hideSubscription","remove","LabeledField","sz","compact","leftElement","label","PrimaryButton","AltPrimaryButton","SecondaryButton","AltSecondaryButton","ButtonField","_isActive","setIsActive","buttonLabel","disabled","disabledText","activeText","inactiveText","isActive","bProps","onPress","ev","a","secondary","TextField","rnuRef","caption","setCaption","valueTracker","setValueTracker","validate","textInputRef","errorMessage","field","numberOfLines","spellCheck","autoCorrect","editable","accessoryLeft","accessoryRight","onSubmitEditing","textProps","markRequired","t","validateOnChange","newCaption","category","secureTextEntry","returnKeyType","placeholder","isValidEmail","test","isRequired","replace","ScrollWithButtons","ScrollView","nestedScrollEnabled","contentContainerStyle","fillHeight","maxHeight","buttons","ButtonPanel","viewProps","borderTopColor","borderTopWidth","paddingTop","paddingBottom","zIndex","left","locked","right","TBI","warn","toPercent","number","numeral","format","toPercent2","toNumber1","toFormatedDateTime","dateTimeString","m","getMonth","getDate","y","getFullYear","h","getHours","min","getMinutes","ampm","String","toDollars","toDollarsAndCents","split","sideMargin","Link","Pressable","AccountBasicInfo","refs","isAuthed","agreeToTerms","setAgreeToTerms","agreeToPrivacy","setAgreeToPrivacy","linkTo","useLinkTo","loginEntity","confirm","c","password","checked","onChange","Header","Subheader","Section","title","useSubHeading","alt","button","Subsection","ElevatedSection","paddingHorizontal","Picker","Array","items","map","filter","join","find","selectedIndex","multiSelect","i","idx","_item","IndexPath","findIndex","Image","source","uri","iconUrl","Slider","MultiSlider","AddButton","fill","EditButton","SettingsButton","DeleteButton","ExitButton","FavButton","isSelected","KeyboardAvoidingInput","KeyboardAvoidingView","behavior","multiline","numLines","nextValue","paddingLeft","displayButton","clicked","onClick","item_id","rightIcon","investmentStrats","questionStyle","gicsAC","sort","IconifyIcon","DEBUG","icon","xml","currentColor","body","svg","svgProps","pressableProps","redirectUriText","getCallBackUrl","URL","platform","AppOwnership","Expo","Constants","appOwnership","manifest","hostUri","makeRedirectUrl","YourContentComponent","toast","useToast","inputMessage","setInputMessage","inputPlatform","setInputPlatform","inputValue","setInputValue","getTwitterToken","state","uuid","v4","intervalHandler","openAuth","removeItem","_challenge","Math","random","toString","substring","authUrl","searchParams","append","openBrowserAsync","code","Promise","res","rej","clearInterval","setInterval","linkSocialAccount","callbackUrl","challenge","useTwitterAuth","getGoogleToken","googleUrl","encodeURIComponent","useGoogleAuth","userClaims","claims","handle","twitterHandle","setTwitterHandle","substackUsername","spotifyShow","youtubeChannel","setYoutubeChannel","iconPadd","socialStyling","s","platform_idenifier","show","HandleButton","fontStyle","ProfileButton","userId","alignSelf","overflow","profileUrl","NoDataPanel","message","List","internalData","setInternalData","preloadOffset","datasetKey","currentPage","setCurrentPage","pagesDone","setPagesDone","isLoadingRef","maxItem","setMaxItem","setTriggerHack","sizeCache","datasetKeyRef","maxPage","hack","nextPage","originalLength","newData","vp","viewabilityConfig","itemVisiblePercentThreshold","onViewableItemsChanged","max","viewableItems","vi","index","curMax","needsSplice","maxDisaplyCount","FlatList","listKey","horizontal","getItemLayout","b","numColumns","ListHeaderComponent","ListFooterComponent","maxDisaplyText","stickyHeaderIndices","loadingItem","slice","keyExtractor","renderItem","viewabilityConfigCallbackPairs","noDataMessage","loadingMessage","cellStyle","flexGrow","aspectRatio","flexBasis","empty","useWatchlistPicker","selectedItems","setSelectedItems","selectionConverter","onSelectedItemschanged","symbolConverter","WatchlistPicker","searchText","setSearchText","setDatasetKey","securitiesLoaded","_selectedItems","_symbols","_s","delayRef","clearTimeout","RegExp","security_name","aStartsWith","bStartsWith","localeCompare","gap","from","push","isSec","onPressed","selectedClone","SecurityCell","innerSelected","setInnerSelected","shape","logo_url","resizeMode","position","bottom","top","useThemeColor","colorName","theme","colorFromProps","Colors","darkColor","otherProps","Table","columns","rowPressed","columnStyle","headerStyle","headerAlias","columnDynamicStyle","columnsToString","align","Theme","alias","dynamicStyle","hideHeader","info","elevatedView","colStyle","FieldElem","evaluatedStyle","evaluatedValue","renderAuxItem","alert","description","options","extra","window","confirmOption","cancelOption","Alert","LinkBrokerageComponent","accounts","setAccounts","intervalRef","needsRefresh","brokerLink","setLink","removeAccount","generateBrokerageLink","link","getBrokerageAccounts","accountId","brokerage","Brokerage","scheduleForDeletion","useFocusEffect","React","buttonProps","acc","broker_name","TooltipComponent","visible","setVisible","anchor","appearance","minHeight","minWidth","translateY","translateX","backdropStyle","placement","onBackdropPress","SwitchField","viewStyle","toggleStyle","toolTipText","textStyle","SubscriptionScreen","setIndex","mySubscriptionsCall","Subscriber","getBySubscriber","mySubscribersCall","getByOwner","subscriptions","setSubscriptions","subscribers","setSubscribers","buttonClick","setButtonClick","subtionTask","suberTask","all","p","navigation","indicatorStyle","subscription","user","profile_url","cost","toLocaleDateString","approved","flexShrink","removeSubscription","subscriptionId","subscription_id","SubscriptionSettingsScreen","SubscriptionSettingsView","call","Subscription","getByUserId","submit","insert","goBack","submitRef","pow","approve_new","HtmlView","scrolling","src","isUrl","srcDoc","screens","lockButtons","setLockButtons","setAgrreeToPrivacy","first","last","username","buttonConfig","canGoBack","screen","errors","val","toastMessage","Error","createLogin","json","policy","setFirstTime","createUser","first_name","last_name","converterRef","WatchlistApi","push_notifications","mentions","upvotes","watchlist_changes","portfolio_display","performance","holdings","trades","anaylistProfile","investment_strategy","portfolio_concentration","benchmark","interests","bio","setBio","sliderWidth","setSliderWidth","acText","setAcText","acValues","g","addIfMissing","int","toLowerCase","benches","is_benchmark","onLayout","nativeEvent","layout","containerStyle","step","sliderLength","values","onValuesChange","newInterest","splice","screenKeys","subScreen","userState","display_name","tags","route","params","resolvedIndex","caProps","insets","useSafeAreaInsets","swipeEnabled","tabBarStyle","shouldLoadComponent","Screen","ConfigOverride","path","linking","prefixes","Linking","config","Root","Create","Dash","PostScreen","AccountInformation","VerifyAccount","ResetPassword","NotificationTrade","WatchlistViewer","Modal","NotFound","getStateFromPath","routes","$replace","getActionFromState","NotFoundScreen","styles","container","TouchableOpacity","linkText","StyleSheet","create","profileImageSize","profileImageSmall","actionPanelSize","profileImageStyle","profileImageSmallStyle","bannerAspectRatio","ProfileBanner","profilePic","collapse","extraMarginTop","maxWidth","transform","subscriberCount","platforms","ProfilePic","editMode","navigator","onProfilePicked","SocialBar","logoName","logo","UserLogo","ProfileBar","openProfile","PrimaryChip","isAlt","IconButton","iconSource","AsyncPressable","isDisabled","setIsDisabled","ShareButton","Share","share","ShareIcon","postTotalVerticalMargin","postTotalHorizontalMargin","postSidePad","spaceOnSide","postInnerHeight","itm","windowWidth","_source","postType","resolvePostContent","postUrl","content","htmlBody","matches","exec","PostView","post","ext","is_bookmarked","isBookmarked","setIsBookmarked","is_upvoted","isUpvoted","setIsUpvoted","upvoteCount","setUpvoteCount","showStatus","setShowStatus","postTotalBorder","borderBottomColor","borderBottomWidth","showsHorizontalScrollIndicator","chip","resp","Post","setBookmarked","_id","includes","paddingRight","evaProps","setUpvoted","count","parseHtmlEnteties","str","match","numStr","num","parseInt","fromCharCode","PostContentView","useWindowDimensions","availWidth","scale","openURL","socialStyle","fontFamily","parsedText","platformCreatedAt","SubstackView","subscription_level","tradingpostCreatedAt","PostList","offset","posts","MultiTermFeedPart","allItems","page","multitermfeed","terms","newItems","WatchlistItemRenderItem","secId","intradayChange","price","open","securityId","shownMap","watchlist","note","onChangeNote","canEdit","hideEmptyNote","ticker","watchlistId","useNoteField","setShownMap","column","SecPressable","useWatchlistItemColumns","getIdValue","useMakeSecurityFields","iconField","secField","change","WatchlistViewerScreen","setWatchlist","isSaved","setIsFav","watchlistTickers","setWatchlistTickers","translateHeaderY","scrollRef","w","is_saved","toUpperCase","saveWatchlist","f","onScroll","event","contentOffset","NoteEditor","isEdit","setIsEdit","setNote","WatchlistSection","setFocus","fields","shared","hideNoteOnEmpty","showAddButton","watchlists","PlusContentButton","plusCircle","FeedPart","bookmarkedOnly","feed","AnimatedPath","this","newD","animate","oldD","interpolator","interpolate","_animate","cancelAnimationFrame","animation","_clearInteraction","requestAnimationFrame","timestamp","InteractionManager","createInteractionHandle","delta","animationDuration","component","setNativeProps","setState","clearInteractionHandle","Component","propTypes","PropTypes","bool","renderPlaceholder","func","Path","defaultProps","Chart","xAccessor","yAccessor","yScale","xScale","numberOfTicks","contentInset","gridMax","gridMin","clampX","clampY","mappedData","x","yValues","xValues","yExtent","array","xExtent","yMin","yMax","xMin","xMax","domain","range","clamp","paths","createPaths","ticks","extraProps","_onLayout","Children","child","belowChart","cloneElement","PureComponent","oneOfType","arrayOf","object","any","curve","AreaChart","area","y0","y1","defined","line","AreaStack","colors","order","svgs","series","areas","serie","_","string","showGrid","strokeWidth","BarChart","spacingInner","spacingOuter","paddingInner","paddingOuter","bar","_index","bandwidth","x0","x1","obj","extent","calcExtent","indexes","calcIndexes","xDomain","yDomain","calcXScale","calcYScale","calcAreas","barSvg","GroupedBarChart","_data","barWidth","collectionIndex","valueIndex","dataExtent","keyIndex","entry","entryIndex","isNaN","valueAccessor","getSeries","showZeroAxis","StackedBarGrouped","coordinatesToPathCommands","showTopBorder","showBottomBorder","commands","marker","topLeft1","topLeft2","bottomLeft1","bottomLeft2","bottomRight1","bottomRight2","topRight1","topRight2","commandsToSvgPath","command","trim","initialBorderRadius","innerBarSpace","stack","stackIndex","leftMargin","barHeight","mergedValues","stacks","indexStack","areaIndex","indexArea","LineChart","ChartGrouped","dataArray","pathSvg","LineChartGrouped","lines","LineChartGate","hasOwnProperty","ProgressCircle","progressColor","startAngle","endAngle","animateDuration","cornerRadius","progress","outerDiameter","isFinite","arcs","outerRadius","innerRadius","PI","XAxis","d3Scale","formatLabel","_getX","valueSvg","textAnchor","originX","alignmentBaseline","YAxis","getY","longestValue","reduce","prev","curr","originY","HorizontalLine","other","x2","y2","stroke","Point","radius","cx","cy","Tooltip","pointStroke","rx","ry","Horizontal","tick","Vertical","Both","dataPoints","Direction","VERTICAL","HORIZONTAL","BOTH","Grid","direction","oneOf","InteractiveChart","apx","Dimensions","date","return","dateList","priceList","positionX","setPositionX","panResponder","PanResponder","onStartShouldSetPanResponder","evt","gestureState","onStartShouldSetPanResponderCapture","onMoveShouldSetPanResponder","onMoveShouldSetPanResponderCapture","onPanResponderTerminationRequest","onPanResponderGrant","updatePosition","locationX","onPanResponderMove","onPanResponderRelease","YAxisWidth","chartWidth","xN","xDistance","Number","toFixed","verticalContentInset","panHandlers","stopColor","stopOpacity","strokeDasharray","period","dateString","toDateString","toDateMonthYear","rotation","ButtonGroup","arr","unselectedStyle","onValueChange","HoldingRenderItem","security_id","optionInfo","strike_price","expiration","isOwner","cost_basis","pnl","TradeRenderItem","quantity","amount","getUTCHours","tabBarMargin","periods","ProfileScreen","setUser","setWatchlists","setSummary","setHoldings","returns","setReturns","twReturns","settwReturns","portPeriod","setPortPeriod","dim","bannerHeight","headerHeight","ButtonMargin","clampMax","minViewHeight","collapsed","setCollapsed","isMaxed","setIsMaxed","translation","inputRange","outputRange","extrapolate","manager","abs","removeAllListeners","tab","setTab","getHoldings","getWatchlists","holdingsP","today","summary","getPortfolio","getReturns","startDate","setDate","endDate","twr","day","toUTCString","displayHoldings","is_subscribed","displayTrades","displayPerformance","ProfilePage","currentIndex","$page","newArr","getTrades","$limit","onMomentumScrollEnd","scrollToOffset","animated","bannerPic","is_pending","insertWithNotification","start_date","LoginButtons","createAccountProps","loginProps","cleanUp","setSelectedIndex","useInitialRoute","userRef","passRef","setUsername","setPassword","isLoggingIn","setIsLoggingIn","HTMLDivElement","stonks","n","querySelector","lastItem","lastItem2","floor","index2","forgotPassword","hideAll","WTF_View","padSmall","SideMenu","DrawerContentScrollView","MenuItem","isLast","versionCode","SvgElement","DrawerItem","closeDrawer","labelStyle","seen","NotificationTab","NewTradeNotification","dt","response","dateTime","dtFmt","getDay","flexWrap","UserInteractionNotification","SubscriptionNotification","approval","setApproval","subscriber_id","updateNotification","e","DefaultNotification","LimitedBlockList","listProps","BlockListModalScreen","stateLabel","stateValue","SearchBar","tfRef","Search","scaleX","clear","onTextChange","clearButtonMode","BottomTab","createBottomTabNavigator","DashComponents","Portfolio","quickWatchlist","setQuickWatchlist","portfolio","setPortfolio","focus","getAllWatchlists","lists","quick","saved_by_count","cummReturn","beta","sharpe","exposure","long","short","gross","net","created","saved","Feed","searchType","people","setPeople","searchSecurities","setSearchSecurities","debounceRef","search","term","modSearch","regex","company_name","notifs","setNotifs","timer","ids","seenNotifications","notificationIds","run","borderStyle","notifications","listAlerts","newNotifications","BottomTabNavigator","hasNotifications","setHasNotifications","notificationCount","unseenCount","interval","Navigator","initialRouteName","screenOptions","headerShown","unmountOnBlur","tabBarShowLabel","lazy","tabBarIcon","focused","activeType","navIcon","ImageBackground","initialParams","Drawer","createDrawerNavigator","HeaderTp","DrawerPart","useLegacyImplementation","drawerContent","headerTitleAlign","headerTitle","headerRight","routeName","getFocusedRouteNameFromRoute","useNavigationState","dismiss","KeyboardClose","isMarked","AccountSettingsScreen","mentionCheck","setMentionCheck","upvotesCheck","setUpvotesCheck","watchlistChangeCheck","setWatchlistChangeCheck","performanceCheck","setPerformanceCheck","holdingsCheck","setHoldingsCheck","tradesCheck","setTradesCheck","analystCheck","setAnalystCheck","openLink","isAnalystChecked","isPerformanceChecked","isHoldingsChecked","isTradesChecked","isMentionChecked","isUpvoteChecked","isWatchlistChangeChecked","AccountInfoScreen","definedOrValue","is_deleted","accountUpdates","setAccountUpdates","clone","setUpdates","AccountInfoContent","_updates","AdvancedTabContent","toolTipStyle","AuthScreen","ChangePasswordScreen","oldPass","setOldPass","newPass","setNewPass","setConfirm","hasToken","resetPassword","CompanyScreen","security","setSecurity","securityPrices","setSecurityPrices","isFav","setDescription","isOnQuickWatch","getPrices","includeIntraday","includeHistorical","prices","historical","close","pxChange","quickadd","add","week_52_high","week_52_low","ImagePickerScreen","imageUri","setImageUri","editorVisible","setEditorVisible","imageData","setImageData","selectPhoto","ImagePicker","granted","pickerResult","base64","cancelled","launchEditor","Button","uploadProfilePic","image","onCloseEditor","fixedCropAspectRatio","lockAspectRatio","minimumCropDimensions","onEditingComplete","resizeResult","manipulateAsync","resize","SaveFormat","JPEG","mode","NotificationTradeScreen","listTrades","newTrades","toTwoDecimals","ss","charAt","parseFloat","PostEditorScreen","subLevel","setSubLevel","postEntity","photos","setLocked","editorRef","contentFocused","setContentFocused","onTouchEnd","focusContentEditor","onFocus","onBlur","initialContentHTML","editor","CommentView","comment","commentTotalBorder","created_at","CommentsList","comments","setPost","postId","postCommments","setPostComments","newComment","setNewComment","commentAdded","setCommentAdded","Comment","postList","valueOf","related_type","related_id","TableModalScreen","tableProps","VerificationScreen","verificationToken","imVerified","setImVerified","verified","validateUser","sendEmailValidation","VirtualListWithButtons","listChildren","WatchlistEditorScreen","pickerProps","setName","setWatchlistType","setMagic","watchlistData","date_added","WatchlistScreen","AppInformationScreen","sliderState","setSliderState","paragraphSize","pageIndex","scrollEventThrottle","pagingEnabled","indexOfNextScreen","setSliderPage","BrokeragePickerScreen","IbkrInfoScreen","submittedText","setSubmittedText","accountIds","instructions","createIbkrAccounts","account_ids","emailBody","RobhinhoodLoginScreen","multifactor","setMultifactor","challengeResponseId","setChallengeResponseId","counter","hoodPing","requestId","challengeStatus","sleep","robinhoodLogin","mfaCode","initialLogin","mfa","mfaLogin","handleNotification","shouldShowAlert","shouldPlaySound","shouldSetBadge","Stack","createNativeStackNavigator","initialRoute","RootNavigator","headerBackVisible","WelcomeScreen","CreateAccountScreen","Group","headerTintColor","headerBackground","contentStyle","useRoute","useLinkBuilder","buildLink","Navigation","colorScheme","NavigationContainer","LinkingConfiguration","DarkTheme","DefaultTheme","configApi","apiBaseUrl","registerRootComponent","isLoadingComplete","setLoadingComplete","SplashScreen","Font","FontAwesome","results","useCachedResources","useURL","eva","icons","EvaIconsPack","StatusBar","exports","__esModule","default","module"],"mappings":"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","file":"static/js/app.0a9a7a64.chunk.js","sourcesContent":["import {useCallback, useEffect, useState} from 'react';\r\nimport {EventRegister} from 'react-native-event-listeners'\r\nimport {LoginResult} from \"@tradingpost/common/api/entities/static/AuthApi\";\r\nimport {IUserGet, ISecurityList} from \"@tradingpost/common/api/entities/interfaces\";\r\nimport AsyncStorage, {useAsyncStorage} from '@react-native-async-storage/async-storage'\r\n\r\n//current_user\r\n//token \r\nexport interface LDS {\r\n    currentUser: IUserGet | undefined,\r\n    loginResult: LoginResult | undefined\r\n    authToken: string | undefined,\r\n    hasAuthed: boolean | undefined,\r\n    firstTime: boolean | undefined,\r\n    securities: {\r\n        list: ISecurityList[],\r\n        byId: Record<number, ISecurityList>,\r\n        bySymbol: Record<string, ISecurityList>\r\n    } | undefined,\r\n}\r\n\r\n\r\nlet lds: Partial<Record<keyof LDS, any>> = {}\r\nlet isCachedMap: Partial<Record<keyof LDS, true>> = {\r\n    authToken: true,\r\n    hasAuthed: true\r\n}\r\n\r\nlet isExplirable: Partial<Record<keyof LDS, { duration: number, cachedAt?: number }>> = {\r\n    securities: {\r\n        duration: 4/*hours*/ * 60 * 60 * 1000\r\n    }\r\n}\r\n\r\n\r\nconst LDS_CACHE_KEY = \"lds\"\r\nconst ldsChangedEvenName = \"lds_changed\";\r\n\r\nexport const useData = <T extends keyof LDS>(key: T) => {\r\n    const expireCheck = isExplirable[key]\r\n    if (expireCheck?.cachedAt && expireCheck.duration <= (Date.now() - expireCheck.cachedAt)) {\r\n        setValue(key, undefined);\r\n    }\r\n\r\n    const [value, _setValue] = useState<LDS[T]>(lds[key]);\r\n\r\n    useEffect(() => {\r\n        const sub = EventRegister.addEventListener(ldsChangedEvenName, (data) => {\r\n\r\n            if (data.key === key) {\r\n                _setValue(lds[key])\r\n            }\r\n\r\n        });\r\n        return () => {\r\n            EventRegister.removeEventListener(sub as string)\r\n        };\r\n    }, [key])\r\n    return {\r\n        value,\r\n        setValue: useCallback(async (v: typeof value) => {\r\n            await setValue(key, v)\r\n        }, [key])\r\n    }\r\n\r\n}\r\n\r\nexport const setValue = async <T extends keyof LDS>(key: T, v: LDS[T]) => {\r\n    lds[key] = v;\r\n    if (isCachedMap[key]) {\r\n        const cachedLds: Partial<LDS> = {...lds}\r\n        Object.keys(lds).forEach((k) => {\r\n            if (!isCachedMap[k as keyof LDS]) {\r\n                //console.log(\"DELETING KEY:\" + k);\r\n                delete cachedLds[k as keyof LDS]\r\n            } else {\r\n                //console.log(\"CACHING KEY\" + k)\r\n            }\r\n        })\r\n        await AsyncStorage.setItem(LDS_CACHE_KEY, JSON.stringify(cachedLds));\r\n    }\r\n    EventRegister.emit(ldsChangedEvenName, {key})\r\n}\r\n\r\nexport const initLds = async () => {\r\n    //load all cached values\r\n    //console.log(\"Initing LDS\");\r\n    const result = await AsyncStorage.getItem(LDS_CACHE_KEY);\r\n    if (result) {\r\n        //console.log(\"Results\" + result);\r\n        lds = JSON.parse(result);\r\n        Object.keys(lds).forEach((k) =>\r\n            EventRegister.emit(ldsChangedEvenName, {k}));\r\n    }\r\n    return lds;\r\n};","import Auth from '@tradingpost/common/api/entities/static/AuthApi';\r\nimport { useCallback, useEffect } from \"react\";\r\nimport User from '@tradingpost/common/api/entities/apis/UserApi';\r\nimport { useData } from \"./lds\";\r\nimport { useState } from 'react';\r\nimport { EventRegister } from 'react-native-event-listeners';\r\nimport { Log } from './utils/logger';\r\nimport { useNavigation } from '@react-navigation/native';\r\n\r\n\r\n// if (email !== '') {\r\n//     try {\r\n//         await registerDeviceForNotifications();\r\n//     }\r\n//     catch (ex) {\r\n//         console.error(ex);\r\n//     }\r\n// }\r\n\r\n\r\nconst loginStateChangedEventName = \"LOGIN_STATE_CAHNGED\";\r\n\r\n\r\n\r\nexport const useAppUser = (tracker?: string) => {\r\n\r\n    const { value: _appUser, setValue: setAppUser } = useData(\"currentUser\");\r\n    const { value: _loginResult, setValue: setLoginResult } = useData(\"loginResult\");\r\n    const { value: _authToken, setValue: setAuthToken } = useData(\"authToken\");\r\n    const [toggleRefresh, setToggleRefresh] = useState(true);\r\n    const nav = useNavigation();\r\n    type LoginState = {\r\n        appUser: typeof _appUser,\r\n        loginResult: typeof _loginResult,\r\n        authToken: typeof _authToken,\r\n        //TODO: stop gap... but we should make this resolved on the server probably \r\n        setupStatus?: {\r\n            needsSettings: boolean,\r\n            needsAnalystSettings: boolean\r\n        },\r\n        updated: Date\r\n    };\r\n\r\n    const createLoginState = (currentUser: typeof _appUser, loginResult: typeof _loginResult): LoginState => {\r\n        return {\r\n            updated: new Date(),\r\n            appUser: currentUser,\r\n            authToken: loginResult?.user_id ? loginResult.token : undefined,\r\n            loginResult: loginResult,\r\n            setupStatus: currentUser ? {\r\n                needsSettings: !currentUser.settings || !Object.keys(currentUser.settings).length,\r\n                needsAnalystSettings: Boolean(currentUser.settings?.analyst) && !currentUser.analyst_profile\r\n            } : undefined\r\n        }\r\n    }\r\n\r\n    const [loginState, setLoginState] = useState(_appUser || _loginResult ? createLoginState(_appUser, _loginResult) : undefined)\r\n\r\n    useEffect(() => {\r\n        if (tracker)\r\n            console.log(\"CREATING WITH A TRACKER OF \" + tracker);\r\n        const sub = EventRegister.addEventListener(loginStateChangedEventName, (data) => {\r\n            if (tracker)\r\n                console.log(\"TRIGGERED TRACKER OF \" + tracker);\r\n            setLoginState(data);\r\n        });\r\n        return () => {\r\n            EventRegister.removeEventListener(sub as string)\r\n        };\r\n    }, [tracker])\r\n\r\n    return {\r\n        loginState,\r\n        forceTrigger: () => {\r\n            if (_loginResult) {\r\n                setLoginResult({ ..._loginResult });\r\n            }\r\n        },\r\n        updateState: () => {\r\n            if (_loginResult) {\r\n                setLoginResult({ ..._loginResult });\r\n            }\r\n            if (loginState) {\r\n                setLoginState({ ...loginState, updated: new Date() })\r\n            }\r\n        },\r\n        signIn: useCallback(async (email: string, pass: string) => {\r\n            setLoginState(undefined);\r\n            const value = await Authentication.signIn(email, pass)\r\n            setLoginResult(value.loginResult);\r\n            setAppUser(value.currentUser);\r\n            if (value.loginResult.user_id)\r\n                setAuthToken(value.loginResult.token);\r\n\r\n            EventRegister.emit(loginStateChangedEventName, createLoginState(value.currentUser, value.loginResult))\r\n\r\n        }, []),\r\n        signOut: useCallback(() => {\r\n            Auth.signOut();\r\n            setAuthToken(undefined);\r\n            setLoginResult(undefined);\r\n            setAppUser(undefined);\r\n            setLoginState(undefined);\r\n            EventRegister.emit(loginStateChangedEventName, undefined);\r\n            nav.navigate('Root');\r\n        }, [])\r\n    }\r\n}\r\n\r\nexport const Authentication = {\r\n    signIn: async (email: string, pass: string) => {\r\n        const result = await Auth.login(email, pass);\r\n        return {\r\n            loginResult: result,\r\n            currentUser: result.user_id ? await User.get(result.user_id) : undefined\r\n        }\r\n    }\r\n}\r\n\r\n","import { Api } from \"@tradingpost/common/api\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useData } from \"./lds\";\r\n\r\nconst fetchSecurities = async () => {\r\n    console.log(\"I'm getting securities\");\r\n    const list = await Api.Security.extensions.list(),\r\n        byId: Record<number, typeof list[0]> = {},\r\n        bySymbol: Record<string, typeof list[0]> = {}\r\n    list.forEach((r) => {\r\n        byId[r.id] = r;\r\n        bySymbol[r.symbol] = r;\r\n    })\r\n    return {\r\n        list,\r\n        byId,\r\n        bySymbol\r\n    }\r\n}\r\nlet securityListTask: ReturnType<typeof fetchSecurities>\r\nexport const getSecurityList = () => securityListTask || (securityListTask = fetchSecurities())\r\n\r\n\r\nexport const useSecuritiesList = () => {\r\n\r\n    const [err, setErr] = useState<any>()\r\n    const { value: securities, setValue: setSecurities } = useData(\"securities\");\r\n    const [localValue, setLocalValue] = useState(securities)\r\n\r\n\r\n    useEffect(() => {\r\n        if (!securities)\r\n            getSecurityList()\r\n                .then((r) => {\r\n                    setSecurities(r)\r\n                    setLocalValue(r);\r\n                }).catch(ex => setErr(ex));\r\n    }, [securities])\r\n\r\n    return {\r\n        err,\r\n        securities: localValue || {\r\n            byId: {},\r\n            bySymbol: {},\r\n            list: []\r\n        }\r\n    }\r\n}\r\n","//Should change this to a process.env\r\nlet enableVerbose = true;\r\n\r\nconst verbose = (msg: string) => {\r\n    if (enableVerbose) {\r\n        console.log(msg);\r\n    }\r\n}\r\nconst error = (err: string | Error | unknown) => {\r\n    console.error(err);\r\n}\r\nconst tryCatch = async <T>(action: () => T) => {\r\n    try {\r\n        return await action();\r\n    } catch (ex) {\r\n        error(ex)\r\n    }\r\n}\r\n\r\nexport const Log = {\r\n    enableVerbose: (enabled: boolean) => {\r\n        enableVerbose = enabled\r\n    },\r\n    verbose,\r\n    error,\r\n    tryCatch\r\n}\r\n","// Render message if can send notifications\r\n// Pass along user device id to database and platform\r\n// Should be done in Settings / Login / Sign Up(After a user creates their email / password) & its accepted\r\nimport * as Notifications from 'expo-notifications';\r\nimport * as Device from 'expo-device';\r\nimport { Platform } from 'react-native';\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport * as Localization from 'expo-localization';\r\nimport { Log } from './logger';\r\n\r\nexport const registerDeviceForNotifications = async () => {\r\n    return await Log.tryCatch(async () => {\r\n        let token;\r\n        if (Device.isDevice) {\r\n            const { status: existingStatus } = await Notifications.getPermissionsAsync();\r\n            let finalStatus = existingStatus;\r\n            if (existingStatus === 'undetermined') {\r\n                const { status } = await Notifications.requestPermissionsAsync();\r\n                finalStatus = status;\r\n            }\r\n\r\n            if (finalStatus !== 'granted') {\r\n                return;\r\n            }\r\n            token = await (await Notifications.getDevicePushTokenAsync()).data;\r\n            await Api.Notification.extensions.registerUserDevice({\r\n                provider: Platform.OS,\r\n                deviceId: token,\r\n                timezone: Localization.timezone\r\n            });\r\n        }\r\n\r\n        if (Platform.OS === 'android') {\r\n            await Notifications.setNotificationChannelAsync('default', {\r\n                name: 'default',\r\n                importance: Notifications.AndroidImportance.MAX,\r\n                vibrationPattern: [0, 250, 250, 250],\r\n                lightColor: '#282869',\r\n            });\r\n        }\r\n        return token;\r\n    })\r\n}","import { ColorSchemeName, useColorScheme as _useColorScheme } from 'react-native';\r\n\r\n// The useColorScheme value is always either light or dark, but the built-in\r\n// type suggests that it can be null. This will not happen in practice, so this\r\n// makes it a bit easier to work with.\r\nexport default function useColorScheme(): NonNullable<ColorSchemeName> {\r\n  return _useColorScheme() as NonNullable<ColorSchemeName>;\r\n}\r\n","import React, { PropsWithChildren, useEffect, useRef, useState } from \"react\";\r\nimport { View, Image } from \"react-native\";\r\nimport { SvgProps } from \"react-native-svg\";\r\n\r\n\r\nexport const SvgExpo = (props: SvgProps & { onReady?: (parent: any) => void }) => {\r\n    const url = (props.children as any).type;\r\n    const lastRef = useRef(\"\");;\r\n    const onReadyRef = useRef(props.onReady);\r\n    onReadyRef.current = props.onReady;\r\n    const divRef = useRef<HTMLDivElement>(null);\r\n\r\n    const [svgData, setSvgData] = useState(\"\");\r\n    useEffect(() => {\r\n\r\n\r\n        lastRef.current = url;\r\n        fetch(url, {}).then((data) => {\r\n            if (data.ok) {\r\n                data.text().then((result) => {\r\n                    if (lastRef.current === url)\r\n                        setSvgData(result);\r\n                    // //hacky right now ... will fix later \r\n\r\n                    setTimeout(() => {\r\n                        if (onReadyRef.current)\r\n                            onReadyRef.current(divRef.current)\r\n                    }, 222)\r\n                });\r\n            }\r\n            else throw data.statusText;\r\n        }).catch(ex => console.log(ex));\r\n\r\n\r\n    }), [url]\r\n\r\n\r\n\r\n    //hacky but gotta convert \r\n    return <View style={props.style}>\r\n        <div ref={divRef} style={{ height: \"100%\", width: \"100%\", justifyContent: \"center\", alignContent: \"center\", alignItems: \"center\", display:\"flex\" }} dangerouslySetInnerHTML={{ __html: svgData }} />\r\n    </View>\r\n}","import _IconNoBg from './assets/store-front-logo2-alt.svg'\r\nimport _IconBg from './assets/store-front.svg'\r\nimport _AppTitle from './assets/app-title.svg'\r\nimport _SplashWelcome from './assets/splash-welcome.svg'\r\nimport _ClimbingMountain from './assets/ClimbingMountain.svg'\r\nimport _Debate from './assets/Debate.svg'\r\nimport _Studying from './assets/Studying.svg'\r\nimport _Analyze from './assets/analyze.svg'\r\nimport _Bank from './assets/bank.svg'\r\nimport _IBKR from './assets/IBKR.svg'\r\nimport _RobinhoodLogo from './assets/robinhood_logo.svg'\r\nimport _RobinhoodLogoLong from './assets/robinhood_logo_long.svg'\r\n\r\n\r\n\r\nimport Logo from './assets/logo.svg'\r\nimport LogoNoBg from './assets/logo-no-bg.svg'\r\n\r\n// import MenuIcon from './assets/side-menu/menu-icon.svg';\r\nimport _PlusIcon from './assets/misc/plus.svg';\r\nimport _UpvoteIcon from './assets/post-feed/upvote.svg'\r\nimport _CommentIcon from './assets/post-feed/comment.svg'\r\nimport _BookmarkActive from './assets/post-feed/bookmark-active.svg'\r\nimport _BookmarkActiveBlue from './assets/post-feed/bookmark-active-blue.svg'\r\nimport _BookmarkInactive from './assets/post-feed/bookmark.svg'\r\nimport _Retweet from './assets/post-feed/ei_retweet.svg'\r\nimport _PremiumStar from './assets/post-feed/PremiumStar.svg'\r\nimport _SendIcon from './assets/post-feed/SendIcon.svg'\r\n\r\n// /** Side Menu Icons */\r\nimport Account from './assets/side-menu/Account.svg'\r\nimport Competition from './assets/side-menu/Competition.svg'\r\nimport Feedback from './assets/side-menu/Feedback.svg'\r\nimport Help from './assets/side-menu/Help.svg'\r\nimport Information from './assets/side-menu/Information.svg'\r\nimport Learn from './assets/side-menu/Learn.svg'\r\nimport LogOut from './assets/side-menu/Log Out.svg'\r\nimport Profile from './assets/side-menu/Profile.svg'\r\nimport Watchlist from './assets/side-menu/Watchlist.svg'\r\nimport Bank_Link from './assets/bank-link-icon.svg'\r\n\r\nimport YouTubeLogo from './assets/@iconify/youtube-icon'\r\nimport SpotifyLogo from './assets/@iconify/spotify-icon'\r\n\r\nimport TwitterLogo from './assets/@iconify/twitter'\r\n\r\nimport LinkedInLogo from './assets/@iconify/linkedin-icon'\r\n\r\nimport SubstackLogo from './assets/@iconify/substack'\r\n\r\nimport React, { Component } from 'react'\r\nimport { SvgExpo } from './components/SvgExpo'\r\nimport { SvgProps } from 'react-native-svg'\r\n\r\nexport const sideMenu = {\r\n    Account,\r\n    Competition,\r\n    Feedback,\r\n    Information,\r\n    Help,\r\n    Learn,\r\n    LogOut,\r\n    Profile,\r\n    Watchlist,\r\n    Bank_Link,\r\n    BookmarkActive: _BookmarkActive,\r\n    BookmarkInactive: _BookmarkInactive,\r\n    BookmarkActiveBlue: _BookmarkActiveBlue\r\n}\r\n\r\nfunction makeExpoSvg(Svg: React.FC<SvgProps>) {\r\n    return (props: SvgProps & { onReady?: (parent: any) => void }) => <SvgExpo {...props}><Svg /></SvgExpo>\r\n}\r\n\r\nexport const AppTitle = makeExpoSvg(_AppTitle)\r\nexport const SplashWelcome = makeExpoSvg(_SplashWelcome)\r\n\r\nexport const ClimbingMountain = makeExpoSvg(_ClimbingMountain)\r\nexport const Debate = makeExpoSvg(_Debate)\r\nexport const Studying = makeExpoSvg(_Studying)\r\nexport const Analyze = makeExpoSvg(_Analyze);\r\nexport const Bank = makeExpoSvg(_Bank);\r\nexport const IBKR = makeExpoSvg(_IBKR);\r\nexport const RobinhoodLogo = makeExpoSvg(_RobinhoodLogo);\r\nexport const RobinhoodLogoLong = makeExpoSvg(_RobinhoodLogoLong);\r\n//export const Bank_Link = makeExpoSvg(_Bank_Link);\r\n\r\nexport const IconBg = makeExpoSvg(_IconBg)\r\nexport const IconNoBg = makeExpoSvg(_IconNoBg)\r\nexport const PlusIcon = makeExpoSvg(_PlusIcon)\r\n\r\nexport const Retweet = makeExpoSvg(_Retweet);\r\n\r\n\r\n// IconBg,\r\n// IconNoBg,\r\n// MenuIcon,\r\n// PlusIcon,\r\nexport const UpvoteIcon = makeExpoSvg(_UpvoteIcon);\r\nexport const CommentIcon = makeExpoSvg(_CommentIcon);\r\nexport const SendIcon = makeExpoSvg(_SendIcon);\r\nexport const InfoIcon = makeExpoSvg(Information);\r\nexport const BookmarkActive = makeExpoSvg(_BookmarkActive);\r\nexport const BookmarkActiveBlue = makeExpoSvg(_BookmarkActiveBlue);\r\nexport const PremiumStar = makeExpoSvg(_PremiumStar);\r\n\r\n\r\nexport { Logo, LogoNoBg };\r\n\r\n\r\nexport const rnui = {\r\n    chevronDown: require('./assets/rnui/chevronDown.png'),\r\n    add: require('./assets/rnui/add.png'),\r\n    plus: require('./assets/rnui/plus.png')\r\n}\r\nexport type NavIconKeys = \"Portfolio\" | \"Search\" | \"Feed\" | \"Notification\"; //| \"Bookmark\";\r\n\r\nexport const NavIconTypeOverride: Partial<Record<NavIconKeys, any>> = {\r\n    Notification: {\r\n        no: {\r\n            active: require('./assets/nav-bar/notification-active.png'),\r\n            inactive: require('./assets/nav-bar/notification.png'),\r\n        },\r\n        has: {\r\n            active: require('./assets/nav-bar/has-notification-active.png'),\r\n            inactive: require('./assets/nav-bar/has-notification.png')\r\n        }\r\n    }\r\n}\r\n\r\nexport const navIcons: Record<NavIconKeys, { active: number, inactive: number }> = {\r\n    \"Portfolio\": {\r\n        active: require(\"./assets/nav-bar/portfolio-active.png\"),\r\n        inactive: require(\"./assets/nav-bar/portfolio.png\")\r\n    },\r\n    \"Feed\": {\r\n        active: require(\"./assets/nav-bar/feed-active.png\"),\r\n        inactive: require(\"./assets/nav-bar/feed.png\")\r\n    },\r\n    \"Search\": {\r\n        active: require(\"./assets/nav-bar/search-active.png\"),\r\n        inactive: require(\"./assets/nav-bar/search.png\")\r\n    },\r\n    // \"Bookmark\": {\r\n    //     active: require(\"./assets/nav-bar/bookmark-active.png\"),\r\n    //     inactive: require(\"./assets/nav-bar/bookmark.png\")\r\n    // },\r\n    \"Notification\": {\r\n        active: require(\"./assets/nav-bar/notification-active.png\"),\r\n        inactive: require(\"./assets/nav-bar/notification.png\")\r\n    },\r\n}\r\n\r\nexport const BookmarkIcons = {\r\n    active: require(\"./assets/nav-bar/bookmark-active.png\"),\r\n    inactive: require(\"./assets/nav-bar/bookmark.png\")\r\n}\r\n\r\n\r\nexport const topBarIcons = {\r\n    menu: require('./assets/nav-bar/menu.png')\r\n}\r\n\r\nexport const social = {\r\n    TwitterLogo,\r\n    LinkedInLogo,\r\n    YouTubeLogo,\r\n    SubstackLogo,\r\n    SpotifyLogo,\r\n}\r\n\r\n\r\nexport const postBg = require(\"./assets/post-feed/flatgrad.png\");","const tintColorLight = '#2f95dc';\r\nconst tintColorDark = '#fff';\r\n\r\nexport default {\r\n  light: {\r\n    text: '#000',\r\n    background: '#fff',\r\n    tint: tintColorLight,\r\n    tabIconDefault: '#ccc',\r\n    tabIconSelected: tintColorLight,\r\n  },\r\n  dark: {\r\n    text: '#fff',\r\n    background: '#000',\r\n    tint: tintColorDark,\r\n    tabIconDefault: '#ccc',\r\n    tabIconSelected: tintColorDark,\r\n  },\r\n};\r\n\r\nexport const AppColors  = {\r\n  primary : \"#11146F\",\r\n  secondary:\"#35A265\",\r\n  background :\"#F7f8f8\"\r\n}\r\n\r\n\r\n","import { FlexStyle, TextStyle, ViewStyle } from \"react-native\";\r\nimport { AppColors } from \"./constants/Colors\";\r\n\r\nexport const flex = { flex: 1 } as ViewStyle\r\nexport const row: ViewStyle = { flexDirection: \"row\" }\r\nexport const shadow: ViewStyle = {\r\n    elevation: 4,\r\n    shadowOffset: { height: 2, width: 2 },\r\n    shadowColor: \"black\",\r\n    shadowOpacity: 0.125,\r\n    shadowRadius: 0.25,\r\n}\r\n\r\nexport const noMargin = {\r\n    marginTop: 0,\r\n    marginRight: 0,\r\n    marginBottom: 0,\r\n    marginLeft: 0,\r\n}\r\n\r\nexport function rounded(size: number) {\r\n    return {\r\n        height: size,\r\n        width: size,\r\n        borderRadius: size / 2\r\n    }\r\n}\r\n\r\nexport const fonts = {\r\n    xSmall: 12,\r\n    small: 16,\r\n    medium: 20,\r\n    large: 24,\r\n    xLarge: 32\r\n}\r\n\r\nexport function font(size: keyof typeof fonts, color: string = \"black\", isBold: boolean = false) {\r\n    return {\r\n        fontSize: fonts[size],\r\n        fontWeight: isBold ? \"bold\" : undefined,\r\n        color: color\r\n    } as TextStyle\r\n}\r\n\r\n\r\nexport const sizes = {\r\n    rem0_5: 8,\r\n    rem1: 16,\r\n    rem1_5: 24,\r\n    rem2: 32,\r\n    rem4: 64,\r\n    rem6: 96,\r\n    rem7: 112,\r\n    rem8: 128,\r\n    rem9: 144,\r\n    rem10: 160,\r\n    rem12: 192,\r\n    rem16: 256,\r\n    borderRadius: 2\r\n}\r\n\r\n\r\n\r\nexport const paddView = [flex, { padding: sizes.rem1, backgroundColor: AppColors.background }]\r\nexport const paddViewWhite = [...paddView, { backgroundColor: \"white\" }]\r\n\r\nexport const elevated =\r\n{\r\n    marginHorizontal: 2,\r\n    paddingVertical: 8,\r\n    backgroundColor: \"white\",\r\n    borderColor: \"#ccc\",\r\n    borderWidth: 1,\r\n    borderRadius: 4,\r\n    marginBottom: 16,\r\n    ...shadow\r\n}\r\n\r\n\r\nexport const chartColors = [\r\n    '#2dadf4',\r\n    '#f5523b',\r\n    '#66a1fa',\r\n    '#ff4a6b',\r\n    '#9891f4',\r\n    '#f95399',\r\n    '#c37de1',\r\n    '#e567c1']\r\n\r\n\r\nexport const social = {\r\n    substackColor: '#ff7731'\r\n}\r\n\r\nexport const bannerText = {\r\n    textAlign: \"center\", margin: sizes.rem2, fontSize: fonts.large, lineHeight: fonts.large * 1.5,\r\n} as TextStyle\r\nexport const thinBannerText = [bannerText, {\r\n    marginHorizontal: 0, marginVertical: sizes.rem0_5\r\n} as TextStyle]\r\n\r\n\r\n\r\nexport const textInputWiz = {\r\n    marginVertical: sizes.rem0_5\r\n} as ViewStyle","import { getActionFromState, getStateFromPath, LinkingContext, NavigationContainerRefContext, useLinkTo } from \"@react-navigation/native\";\r\nimport { To } from \"@react-navigation/native/lib/typescript/src/useLinkTo\";\r\nimport { IndexPath } from \"@ui-kitten/components\";\r\nimport React from \"react\";\r\nimport { useCallback, useEffect, useLayoutEffect, useMemo, useRef, useState } from \"react\";\r\nimport { Animated, Keyboard, TextProps, ViewProps } from \"react-native\";\r\nimport { PickerProps } from \"../components/Picker\";\r\n\r\nimport { bannerText } from \"../style\";\r\n\r\n\r\nexport interface IEntity<T> {\r\n    data: Readonly<T>,\r\n    update(updates: Partial<T>): void,\r\n    hasChanged: boolean,\r\n    resetData(newData: T): void\r\n}\r\n\r\n\r\nconst ensureIterable = (value: any): value is Iterable<any> => {\r\n    return Symbol.iterator in Object(value);\r\n}\r\n\r\n\r\nexport const useOpacityAnim = () => {\r\n    const opacityAnim = useRef(new Animated.Value(0)).current\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n    return useMemo(() => ({\r\n        opacityAnim,\r\n        BannerText: (props: Omit<TextProps, \"style\">) => {\r\n            return <Animated.Text\r\n                style={[bannerText, { opacity: opacityAnim }]}\r\n                {...props}\r\n            />\r\n        },\r\n        AppearView: (props: Animated.AnimatedProps<ViewProps>) => {\r\n            const styleProp = [{ opacity: opacityAnim } as Animated.AnimatedProps<ViewProps>[\"style\"]]\r\n            if (props.style) {\r\n                if (ensureIterable(props.style))\r\n                    styleProp.unshift(...props.style as any)\r\n                else\r\n                    styleProp.unshift(props.style)\r\n            }\r\n\r\n            return <Animated.View {...props} style={[styleProp]} />\r\n        }\r\n    }), [opacityAnim])\r\n}\r\n\r\nexport function useReadonlyEntity<T>(seedValue: T): IEntity<T> {\r\n    const [data, setData] = useState<Readonly<T>>(seedValue)\r\n    const [hasChanged, setHasChanged] = useState(false);\r\n    return {\r\n        data,\r\n        hasChanged,\r\n        resetData: useCallback(function (d) {\r\n            setHasChanged(false);\r\n            setData(d);\r\n        }, []),\r\n        update: useCallback((updates: Partial<T>) => {\r\n            setHasChanged(true);\r\n            setData((_entity) => ({\r\n                ..._entity,\r\n                ...updates\r\n            }))\r\n        }, [])\r\n    }\r\n}\r\n\r\ntype EnsureTypeFrom<T, U extends keyof T, S> = T[U] extends (S) ? (((v: S) => S) | undefined | null) : (v: S) => T[U]\r\ntype EnsureTypeTo<T, U extends keyof T, S> = T[U] extends (S) ? (((v: S) => S) | undefined | null) : (v: T[U]) => S\r\n\r\ntype ConvertType<T, U extends keyof T, S> = {\r\n    toType: EnsureTypeTo<T, U, S>\r\n    fromType: EnsureTypeFrom<T, U, S>\r\n}\r\n\r\ntype EnsureConverter<T, U extends keyof T, S> = T[U] extends (S) ? (ConvertType<T, U, S> | undefined | null) : ConvertType<T, U, S>\r\n\r\nexport function bindTextInput<T, U extends keyof T>(entity: IEntity<T>, key: U, converter: EnsureConverter<T, U, string | undefined>, onChangeText?: (text: string) => void) {\r\n    return bindTextInputBase(entity, key, converter, {\r\n        valueKey: \"value\",\r\n        onChangeTextKey: \"onChangeText\"\r\n    }, onChangeText)\r\n}\r\n\r\nexport function bindTextInputBase<T, U extends keyof T>(entity: IEntity<T>, key: U, converter: EnsureConverter<T, U, string | undefined>, bindKeys: { valueKey?: string, onChangeTextKey: string }, onChangeText?: (text: string) => void) {\r\n    const output = {\r\n        [bindKeys.onChangeTextKey]: (v: string) => {\r\n            const update: Partial<T> = {};\r\n            entity.update({\r\n                [key]: converter?.fromType ? converter.fromType(v) : v\r\n            } as any)\r\n            if (onChangeText) {\r\n                onChangeText(v);\r\n            }\r\n        }\r\n    };\r\n    if (bindKeys.valueKey)\r\n        output[bindKeys.valueKey] = converter?.toType ? converter.toType(entity.data[key] as any) : (entity.data[key] as any)\r\n    return output;\r\n}\r\n\r\nexport function bindPicker<T, U extends keyof T>(entity: IEntity<T>, key: U, converter: EnsureConverter<T, U, IndexPath | undefined>, onSelect?: (item: IndexPath) => void) {\r\n\r\n    return {\r\n        //value: converter?.toType ? converter.toType(entity.data[key] as any) : (entity.data[key] as any),\r\n        onSelect: (item) => {\r\n            const update: Partial<T> = {};\r\n            //console.log(item);\r\n            entity.update({\r\n                [key]: converter?.fromType ? converter.fromType(item) : item\r\n            } as any)\r\n\r\n            if (onSelect)\r\n                onSelect(item)\r\n        },\r\n        // onChangeText: (v: string) => {\r\n        //     const update: Partial<T> = {};\r\n        //     entity.update({\r\n        //         [key]: converter?.fromString ? converter.fromString(v) : v\r\n        //     } as any)\r\n        //     if (onChangeText) {\r\n        //         onChangeText(v);\r\n        //     }\r\n        // }\r\n    } as Partial<PickerProps<false>>\r\n}\r\n// export function bindMultiPicker<T, U extends keyof T>(entity: IEntity<T>, key: U, converter: EnsureConverter<T, U, (number | string)[] | undefined>, onChange?: (item: (string | number)[]) => void) {\r\n//     return {\r\n//         value: converter?.toType ? converter.toType(entity.data[key] as any) : (entity.data[key] as any),\r\n//         onChange: (item) => {\r\n//             //const update: Partial<T> = {};\r\n//             //console.log(item);\r\n//             entity.update({\r\n//                 [key]: converter?.fromType ? converter.fromType(item) : item\r\n//             } as any)\r\n\r\n//             if (onChange)\r\n//                 onChange(item)\r\n//         },\r\n//         // onChangeText: (v: string) => {\r\n//         //     const update: Partial<T> = {};\r\n//         //     entity.update({\r\n//         //         [key]: converter?.fromString ? converter.fromString(v) : v\r\n//         //     } as any)\r\n//         // if (onChangeText) {\r\n//         //     onChangeText(v);\r\n//         // }\r\n//         //  }\r\n//     } as Partial<PickerProps<true>>\r\n// }\r\n\r\n// export function bindSwitch<T, U extends keyof T>(entity: IEntity<T>, key: U, converter: EnsureConverter<T, U, boolean | undefined>, invert?: boolean, onChange?: (item: boolean) => void) {\r\n//     let calcedValue = converter?.toType ? converter.toType(entity.data[key] as any) : (entity.data[key] as any);\r\n//     if (invert)\r\n//         calcedValue = !calcedValue;\r\n\r\n//     return {\r\n//         value: calcedValue,\r\n//         onValueChange: (item) => {\r\n//             let itemCalced = converter?.fromType ? converter.fromType(item) : item;\r\n//             if (invert)\r\n//                 itemCalced = !itemCalced;\r\n\r\n//             const update: Partial<T> = {};\r\n//             entity.update({\r\n//                 [key]: itemCalced\r\n//             } as any)\r\n\r\n//             if (onChange)\r\n//                 onChange(item)\r\n//         },\r\n\r\n//     } as SwitchProps\r\n// }\r\n\r\n\r\nexport function useIsKeyboardVisible() {\r\n    const [isKeyboardVisible, setIsKeyboardVisible] = useState(false);\r\n\r\n    useLayoutEffect(() => {\r\n        const showSubscription = Keyboard.addListener(\"keyboardDidShow\", () => {\r\n            setIsKeyboardVisible(true);\r\n        });\r\n        const hideSubscription = Keyboard.addListener(\"keyboardDidHide\", () => {\r\n            setIsKeyboardVisible(false)\r\n        });\r\n\r\n        return () => {\r\n            showSubscription.remove();\r\n            hideSubscription.remove();\r\n        };\r\n    }, []);\r\n    return {\r\n        isKeyboardVisible\r\n    }\r\n}\r\n\r\nexport default function useLinkToExt<\r\n    ParamList extends ReactNavigation.RootParamList\r\n>() {\r\n    const navigation = React.useContext(NavigationContainerRefContext);\r\n    const linking = React.useContext(LinkingContext);\r\n    const _linkTo = useLinkTo();\r\n    const linkTo = useCallback((to: To<ParamList>, replace?: boolean) => {\r\n\r\n        if (navigation === undefined) {\r\n            throw new Error(\r\n                \"Couldn't find a navigation object. Is your component inside NavigationContainer?\"\r\n            );\r\n        }\r\n\r\n        if (typeof to !== 'string') {\r\n            // @ts-expect-error: This is fine\r\n            navigation.navigate(to.screen, to.params);\r\n            return;\r\n        }\r\n\r\n        if (!to.startsWith('/')) {\r\n            throw new Error(`The path must start with '/' (${to}).`);\r\n        }\r\n\r\n        const { options } = linking;\r\n\r\n        const state = options?.getStateFromPath\r\n            ? options.getStateFromPath(to, options.config)\r\n            : getStateFromPath(to, options?.config);\r\n\r\n        if (state) {\r\n            const action = getActionFromState(state, options?.config);\r\n            if (action !== undefined) {\r\n                navigation.dispatch(action);\r\n            } else {\r\n                navigation.reset(state);\r\n            }\r\n        } else {\r\n            throw new Error('Failed to parse the path to a navigation state.');\r\n        }\r\n\r\n    }, [linking, navigation])\r\n\r\n\r\n    return linkTo;\r\n}\r\n","import React, { ReactElement, useLayoutEffect, useState } from \"react\";\r\nimport { flex, fonts, row, sizes } from \"../style\";\r\nimport { AltPrimaryButton, PrimaryButton } from \"./PrimaryButton\";\r\nimport { Text } from '@ui-kitten/components'\r\nimport { View } from 'react-native'\r\nexport function LabeledField(props: { compact?: boolean, children?: ReactElement, label?: string, leftElement?: (props: { width: number, height: number }) => ReactElement }) {\r\n\r\n    const sz = props.compact ? sizes.rem1 : sizes.rem2\r\n    return <View style={[row, { alignItems: \"center\", marginBottom: sz }]}>\r\n        {props.leftElement && props.leftElement({ height: sz, width: sz })}\r\n        <Text style={[flex, { fontSize: props.compact ? fonts.small : fonts.medium }]}>{props.label}</Text>\r\n        {props.children}\r\n    </View>\r\n\r\n}\r\n\r\n","import React from 'react'\r\n//import { ButtonProps } from \"react-native-ui-lib\";\r\nimport { Button, ButtonProps } from '@ui-kitten/components'\r\nimport { AppColors } from '../constants/Colors'\r\n//import Button from \"react-native-ui-lib/button\";\r\n\r\nexport function PrimaryButton(props: ButtonProps) {\r\n    return <Button\r\n        //backgroundColor={Colors.primary} \r\n        {...props} />\r\n}\r\n\r\nexport function AltPrimaryButton(props: ButtonProps) {\r\n    return <Button\r\n        //backgroundColor={Colors.white} \r\n        //color={AppColors.primary}\r\n        // outlineColor={AppColors.primary}\r\n        {...props} />\r\n}","import { Button, ButtonProps } from '@ui-kitten/components';\r\nimport React from 'react'\r\n//import { ButtonProps } from \"react-native\";\r\n//import Button from \"react-native-ui-lib/button\";\r\n//import { Colors } from 'react-native-ui-lib'\r\nimport { PressableButton } from './PressableButton';\r\n\r\n\r\nexport function SecondaryButton(props: ButtonProps) {\r\n    return <Button\r\n        status={'success'} {...props} />\r\n}\r\nexport function AltSecondaryButton(props: ButtonProps) {\r\n    return <Button status={'success'} {...props} />\r\n}","import React, { ReactElement, ReactNode, useLayoutEffect, useState } from \"react\";\r\nimport { Button, ButtonProps, Text } from \"@ui-kitten/components\";\r\nimport { flex, fonts, row, sizes } from \"../style\";\r\nimport { LabeledField } from \"./LabeledField\";\r\nimport { AltPrimaryButton, PrimaryButton } from \"./PrimaryButton\";\r\nimport { AltSecondaryButton, SecondaryButton } from \"./SecondaryButton\";\r\n//import { PlaidLink, PlaidLinkComponentProps } from 'react-native-plaid-link-sdk'\r\n\r\nexport function ButtonField(props: {\r\n    compact?: boolean, secondary?: boolean, label?: string, activeText?: string, disabledText?: string, inactiveText?: string, isActive?: boolean, leftElement?: (props: { width: number, height: number }) => ReactElement\r\n}\r\n    & Pick<ButtonProps, \"onPress\" | \"disabled\">) {\r\n    const [_isActive, setIsActive] = useState(false)\r\n    const buttonLabel =\r\n        (props.disabled && props.disabledText) ?\r\n            props.disabledText :\r\n            (_isActive ?\r\n                (props.activeText || \"Active\") :\r\n                (props.inactiveText || \"Inactive\"))\r\n\r\n    useLayoutEffect(() => {\r\n        setIsActive(props.isActive || false)\r\n    }, [props.isActive])\r\n    const bProps: ButtonProps = {\r\n        style:\r\n        {\r\n            width: sizes.rem9,\r\n            height: sizes.rem2,\r\n            padding: 0,\r\n\r\n        },\r\n        // labelStyle:\r\n        // {\r\n        //     height: sizes.rem1_5,\r\n        //     top: 0\r\n        // },\r\n        children: buttonLabel,\r\n        onPress(ev) {\r\n            setIsActive((a) => props.isActive === undefined ? !a : props.isActive)\r\n            if (props.onPress) {\r\n                props.onPress(ev)\r\n            }\r\n        }\r\n    };\r\n    return <LabeledField compact={props.compact} label={props.label} leftElement={props.leftElement}>\r\n        {_isActive ?\r\n            (!props.secondary ? <PrimaryButton {...bProps} /> : <SecondaryButton {...bProps} />) :\r\n            (!props.secondary ? <AltPrimaryButton {...bProps} /> : <AltSecondaryButton {...bProps} />)}\r\n    </LabeledField>\r\n\r\n}\r\nexport function PlaidButtonField(props: {\r\n    plaidProps: {},// Omit<PlaidLinkComponentProps, \"children\">,\r\n    compact?: boolean, secondary?: boolean, label?: string, activeText?: string, disabledText?: string, inactiveText?: string, isActive?: boolean, leftElement?: (props: { width: number, height: number }) => ReactElement\r\n}\r\n    & Pick<ButtonProps, \"onPress\" | \"disabled\">) {\r\n    const [_isActive, setIsActive] = useState(false)\r\n    const buttonLabel =\r\n        (props.disabled && props.disabledText) ?\r\n            props.disabledText :\r\n            (_isActive ?\r\n                (props.activeText || \"Active\") :\r\n                (props.inactiveText || \"Inactive\"))\r\n\r\n    useLayoutEffect(() => {\r\n        setIsActive(props.isActive || false)\r\n    }, [props.isActive])\r\n    const bProps: ButtonProps = {\r\n        style:\r\n        {\r\n            width: sizes.rem9,\r\n            height: sizes.rem2,\r\n            padding: 0,\r\n        },\r\n        // labelStyle:\r\n        // {\r\n        //     height: sizes.rem1_5,\r\n        //     top: 0\r\n\r\n        // },\r\n        children: buttonLabel,\r\n        onPress(ev) {\r\n            setIsActive((a) => props.isActive === undefined ? !a : props.isActive)\r\n            if (props.onPress) {\r\n                props.onPress(ev)\r\n            }\r\n        }\r\n    };\r\n    return <LabeledField compact={props.compact} label={props.label} leftElement={props.leftElement}>\r\n        <Text>BROKEN</Text>\r\n        {/* <PlaidLink {...props.plaidProps}>\r\n        <View pointerEvents=\"none\">\r\n            {_isActive ?\r\n                (!props.secondary ? <PrimaryButton {...bProps} /> : <SecondaryButton {...bProps} />) :\r\n                (!props.secondary ? <AltPrimaryButton {...bProps} /> : <AltSecondaryButton {...bProps} />)}\r\n        </View>\r\n    </PlaidLink> */}\r\n    </LabeledField >\r\n\r\n}\r\n\r\n\r\n\r\n","import React, { MutableRefObject, RefObject, useEffect, useRef, useState } from 'react';\r\nimport { ViewStyle, TextInputProps } from 'react-native';\r\n//import { Colors } from 'react-native-ui-lib';\r\nimport { Text, Input, InputProps } from '@ui-kitten/components'\r\n\r\n\r\n// interface IRnField {\r\n//     focus(): void,\r\n//     clear(): void\r\n// }\r\nexport interface ITextField {\r\n    field: RefObject<Input>,\r\n    errorMessage?: string\r\n    validate: () => boolean\r\n}\r\nexport function TextField(props: {\r\n    label?: string,\r\n    textInputRef?: MutableRefObject<ITextField | null>\r\n    disabled?: boolean\r\n    validate?: (value: string | undefined) => boolean,\r\n    validateOnChange?: boolean\r\n    errorMessage?: string,\r\n    //defaulted this to false... which is the right way to to a positive assetion...  \r\n    spellCheck?: boolean,\r\n    //defaulted this to false... which is the right way to to a positive assetion...  \r\n    autoCorrect?: boolean,\r\n    markRequired?: boolean\r\n    //caption?: InputProps[\"caption\"],\r\n\r\n} & TextInputProps & Pick<InputProps, \"caption\" | \"accessoryLeft\" | \"accessoryRight\">) {\r\n    const rnuRef = useRef<Input>(null);\r\n    const [caption, setCaption] = useState<InputProps[\"caption\"]>();\r\n    const [valueTracker, setValueTracker] = useState<string>();\r\n\r\n    useEffect(() => {\r\n        setCaption(props.caption);\r\n    }, [props.caption])\r\n    useEffect(() => {\r\n        setValueTracker(props.value);\r\n    }, [props.value])\r\n    const { validate } = props;\r\n    if (props.textInputRef) {\r\n        props.textInputRef.current = {\r\n            errorMessage: /* props.errorMessage instanceof Array ? props.errorMessage.join(\",\") :*/ props.errorMessage,\r\n            validate: () => validate ? validate(valueTracker) : true,\r\n            field: rnuRef\r\n        }\r\n    }\r\n\r\n    //const tt = { spellCheck: true, autoCorrect:false } as TextInputProps\r\n\r\n    return <Input\r\n        ref={rnuRef}\r\n\r\n        numberOfLines={props.numberOfLines}\r\n        spellCheck={props.spellCheck || false}\r\n        autoCorrect={props.autoCorrect || false}\r\n        editable={!props.disabled}\r\n        //disabledColor={props.disabledColor || Colors.grey20}\r\n        //placeholder=\"Enter Email...\"\r\n        //validateOnChange={props.validateOnChange}\r\n        caption={caption}\r\n        accessoryLeft={props.accessoryLeft}\r\n        accessoryRight={props.accessoryRight}\r\n        //validate={props.validate}\r\n        //errorMessage={props.errorMessage}\r\n        value={props.value}\r\n        //markRequired={props.markRequired}\r\n        //ref={props.textInputRef?.current?.field}\r\n        onSubmitEditing={props.onSubmitEditing}\r\n        label={(textProps) => {\r\n            return props.label ? <Text {...textProps}>{props.label}{<Text {...textProps} style={[\r\n                textProps?.style,\r\n                {\r\n                    color: \"red\"\r\n                }]}  >{props.markRequired ? \"*\" : \"\"}</Text>}</Text> :\r\n                <Text></Text>\r\n        }}\r\n        onChangeText={(t) => {\r\n            setValueTracker(t);\r\n            if (validate && props.validateOnChange) {\r\n                let errorMessage: string | undefined = undefined;\r\n                let newCaption: InputProps[\"caption\"] = undefined;\r\n                if (!validate(t)) {\r\n                    errorMessage = props.errorMessage;\r\n                    newCaption = () => <Text category={\"c1\"} style={{ color: \"red\" }}>{errorMessage}</Text>;\r\n                }\r\n\r\n                if (props.textInputRef?.current) {\r\n                    props.textInputRef.current.errorMessage = errorMessage;\r\n                    //props.textInputRef.current.validate = () => validate(t);\r\n                }\r\n                setCaption(() => newCaption);\r\n            }\r\n\r\n            if (props.onChangeText)\r\n                props.onChangeText(t);\r\n        }}\r\n        secureTextEntry={props.secureTextEntry}\r\n        returnKeyType={props.returnKeyType}\r\n        placeholder={props.placeholder}\r\n        //error={props.error}\r\n        style={props.style}\r\n    //hideUnderline={props.disabled}\r\n    //containerStyle={props.containerStyle}\r\n    />\r\n}\r\n","export function isValidEmail(email: string | undefined) {\r\n    return /^[-!#$%&'*+\\/0-9=?A-Z^_a-z`{|}~](\\.?[-!#$%&'*+\\/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-*\\.?[a-zA-Z0-9])*\\.[a-zA-Z](-?[a-zA-Z0-9])+$/.test(email || \"\")\r\n}\r\n\r\nexport function isRequired(value: string | undefined) {\r\n    return (value || \"\").replace(/ /gi, '').length > 0;\r\n}\r\n\r\nexport function isAlphaNumeric(value: string | undefined) {\r\n    return /^[a-z0-9\\_]+$/i.test(value||\"\")\r\n}","import React, { ReactNode } from \"react\";\r\nimport { View, ScrollView, ViewProps, ViewComponent, ViewStyle, StyleProp } from \"react-native\";\r\nimport { AppColors } from \"../constants/Colors\";\r\n\r\nimport { flex } from \"../style\";\r\nimport { useIsKeyboardVisible } from \"../utils/hooks\";\r\nimport { PrimaryButton } from \"./PrimaryButton\";\r\nimport { SecondaryButton } from \"./SecondaryButton\";\r\n\r\nexport function ScrollWithButtons(props: { children?: ReactNode, buttons?: ButtonPanelProps, fillHeight?: boolean }) {\r\n    const { isKeyboardVisible } = useIsKeyboardVisible();\r\n    return <View style={[flex,]} >\r\n        <View style={[flex, { backgroundColor: AppColors.background }]} >\r\n            <ScrollView nestedScrollEnabled contentContainerStyle={props.fillHeight ? { maxHeight: \"100%\", height: \"100%\"} : {}}>\r\n                {/* This is here to force layout of the content. Seems like a but with enxted scrollview content */}\r\n                {!isKeyboardVisible && <View style={{ height: 0 }} ></View>}\r\n                {props.children}\r\n            </ScrollView>\r\n        </View>\r\n        {props.buttons && <ButtonPanel {...props.buttons} />}\r\n    </View>\r\n}\r\n\r\nexport type ButtonPanelProps = {\r\n    locked?: boolean,\r\n    left?: {\r\n        text: string,\r\n        onPress: () => void\r\n    },\r\n    right: {\r\n        text: string,\r\n        onPress: () => void\r\n    }\r\n    viewProps?: StyleProp<ViewStyle> \r\n}\r\nexport function ButtonPanel(props: ButtonPanelProps) {\r\n    return <View style={ props.viewProps && Object.keys(props.viewProps).length ? props.viewProps : { borderTopColor: \"#ccc\", borderTopWidth: 1, flexDirection: \"row\", \r\n    paddingTop: 8,\r\n     paddingBottom: 8, \r\n     \r\n     justifyContent: \"space-evenly\", zIndex: 1000 }}>\r\n        {props.left && <SecondaryButton style={{ width: \"48%\" }} onPress={props.left.onPress} disabled={props.locked} >{props.left.text}</SecondaryButton>}\r\n        <PrimaryButton style={{ width: props.left ? \"48%\" : \"96%\" }} onPress={props.right.onPress} disabled={props.locked} >{props.right.text}</PrimaryButton>\r\n    </View>\r\n}\r\n","import React from 'react';\r\nimport { Alert } from \"react-native\";\r\nimport numeral, {} from 'numeral'\r\n//import { AmiraError } from '../AmiraError';\r\n\r\nexport type AwaitedReturn<T extends (...args: any[]) => Promise<any>> = Awaited<ReturnType<T>>\r\n\r\nexport function TBI() {\r\n    return console.warn(\"Method has not been implemented\");\r\n}\r\n\r\nexport function randomPrice() {\r\n    return Math.round(Math.random() * 100 * 100) / 100;\r\n}\r\n\r\n\r\nexport function random(maxExclusive: number) {\r\n    return Math.floor(Math.random() * maxExclusive);\r\n}\r\n\r\n\r\nexport function randomArray(maxExclusive: number) {\r\n    return Array.from(new Array(random(maxExclusive) + 1))\r\n}\r\nexport function randomName() {\r\n    return [\"JoshL\", \"LJames\", \"JodyH\"][random(3)]\r\n}\r\n\r\nexport function randomText() {\r\n    const texts = [\"gaping\",\r\n        \"woebegone\",\r\n        \"sticky\",\r\n        \"friendly\",\r\n        \"fine\",\r\n        \"free\",\r\n        \"accessible\",\r\n        \"subsequent\",\r\n        \"labored\",\r\n        \"tan\",\r\n        \"curious\",\r\n        \"brash\",\r\n        \"cautious\",\r\n        \"sassy\",\r\n        \"mushy\",\r\n        \"foreign\",\r\n        \"rightful\",\r\n        \"bad\",\r\n        \"psychological\",\r\n        \"talented\",\r\n        \"grieving\",\r\n        \"scrawny\",\r\n        \"familiar\",\r\n        \"thoughtless\",\r\n        \"daily\",\r\n        \"ritzy\",\r\n        \"elite\",\r\n        \"cool\",\r\n        \"shrill\",\r\n        \"skinny\",\r\n        \"living\",\r\n        \"opposite\",\r\n        \"right\",\r\n        \"red\",\r\n        \"slippery\",\r\n        \"mammoth\",\r\n        \"great\",\r\n        \"spooky\",\r\n        \"polite\",\r\n        \"spotted\",\r\n        \"educated\",\r\n        \"private\",\r\n        \"six\",\r\n        \"belligerent\",\r\n        \"amuck\",\r\n        \"successful\",\r\n        \"exotic\",\r\n        \"guilty\",\r\n        \"prickly\",\r\n        \"shiny\",\r\n    ]\r\n    return texts[random(texts.length)]\r\n}\r\n\r\nexport function randomDateString(pastDate?: boolean) {\r\n    return new Date(new Date().valueOf() + (pastDate ? -1 : 1) * random(31536000)).toUTCString()\r\n}\r\n\r\n\r\nexport function DEV_ONLY(code: () => void) {\r\n    if (!__DEV__)\r\n        throw new Error(\"DEVELOPMENT CODE IS RUNNING IN PRODUCTION\");\r\n    //throw new AmiraError(-1,\"DEVELOPMENT CODE IS RUNNING IN PRODUCTION\");\r\n    else\r\n        code();\r\n}\r\n\r\ntype All<T> = {\r\n    [K in keyof T]-?: T[K]\r\n}\r\n\r\nexport type Undefinable<T> = {\r\n    [K in keyof All<T>]: (T[K] | undefined)\r\n}\r\n\r\nexport function badDate() {\r\n    return toAmiraDate(new Date())\r\n}\r\n\r\n//const pctFormatter = numeral()\r\n\r\n//NumberFormat('en-US', {\r\n  //  style: 'percent',\r\n//})\r\n/**** All of these should be moved to a formatter file */\r\n\r\nexport function toAmiraDate(date: Date) {\r\n    return date.toISOString().replace(/Z/gi, '');\r\n}\r\nexport function fromAmiraDate(date: string) {\r\n    return new Date(date + 'Z');\r\n}\r\n\r\n// const pct2Formatter = NumberFormat('en-US', {\r\n//     style: 'percent',\r\n//     minimumFractionDigits: 2\r\n// })\r\n\r\nexport function toPercent(number: number) {\r\n    return (number === undefined || number === null) ? \"\" : numeral(number).format('0%')\r\n}\r\nexport function toPercent1(number: number) {\r\n    return (number === undefined || number === null) ? \"\" : numeral(number).format('0.0%')\r\n}\r\nexport function toPercent2(number: number) {\r\n    return (number === undefined || number === null) ? \"\" : numeral(number).format('0.00%')\r\n}\r\n// const thousandFormatter = NumberFormat('en-US', {\r\n//     maximumSignificantDigits: 3\r\n// })\r\nexport function toThousands(number: number) {\r\n    return    numeral(number).format('0,0');\r\n}\r\nexport function toNumber1(number: number) {\r\n    return (number === undefined || number === null) ? \"\" : numeral(number).format('0.0')\r\n}\r\nexport function toNumber2(number: number) {\r\n    return (number === undefined || number === null) ? \"\" : numeral(number).format('0.00')\r\n}\r\n// const currencyFormatter = NumberFormat('en-US', {\r\n//     style: 'currency',\r\n//     currency: \"USD\",\r\n// })\r\n\r\nexport function isoToDate(dateString: string) {\r\n    return dateString.split(\"T\")[0];\r\n}\r\nexport function toFormatedDateTime(dateTimeString: string) {\r\n    const m = new Date(dateTimeString).getMonth() + 1;\r\n    const d = new Date(dateTimeString).getDate();\r\n    const y = new Date(dateTimeString).getFullYear() % 100;\r\n    let h = new Date(dateTimeString).getHours();\r\n    let min: string | number = new Date(dateTimeString).getMinutes();\r\n    let ampm = 'am'\r\n    if ( h >= 12 ) {\r\n        ampm = 'pm';\r\n        h = h === 12 ? h : h - 12;\r\n    }\r\n    if ( h === 0 ) {\r\n        h = 12\r\n    }\r\n    if ( min < 10 ) {\r\n        min = String(`0${min}`)\r\n    }\r\n    return `${h}:${min} ${ampm} ${m}/${d}/${y}`\r\n}\r\nexport function toDateMonthYear(dateString: string) {\r\n    const m = (new Date(dateString).toDateString().slice(4,7));\r\n    const y = String((new Date(dateString).getFullYear())).slice(2);\r\n    return `${m}-${y}`;\r\n}\r\nexport function toDateDayMonth(dateString: string) {\r\n    const d = (new Date(dateString).toDateString().slice(8,11));\r\n    const m = (new Date(dateString).toDateString().slice(4,7));\r\n    return `${d} ${m}`;\r\n}\r\nexport function toDollars(number: number) {\r\n    return toDollarsAndCents(number).split(\".\")[0];\r\n}\r\nexport function toDollarsAndCents(number: number | undefined | null) {\r\n    return  (number === undefined || number === null) ? \"\" : numeral(number).format('$0,0.00') //currencyFormatter.format(number);\r\n}\r\n","import { NavigationProp } from \"@react-navigation/native\";\r\nimport { IUserGet } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport { Dispatch, SetStateAction, useState, useEffect } from \"react\";\r\nimport { sizes } from \"../../style\";\r\nimport { IEntity } from \"../../utils/hooks\";\r\n\r\nexport const sideMargin = sizes.rem1_5;\r\n\r\nexport type CreateAccountProps = {\r\n    user: IEntity<IUserGet>,\r\n    toastMessage: (msg: string, delay?: number | undefined) => void\r\n};\r\n\r\n","import React from \"react\";\r\nimport { Pressable, PressableProps, Text, TextProps } from \"react-native\";\r\nimport { AppColors } from \"../constants/Colors\";\r\n//import { Colors, Text, TextProps, TouchableOpacity, TouchableOpacityProps } from 'react-native-ui-lib'\r\n\r\nexport function Link(props: Pick<PressableProps, \"onPress\"> & Pick<TextProps, \"style\" | \"children\">) {\r\n    return <Pressable onPress={props.onPress}>\r\n        <Text style={[{ color: AppColors.primary }, props.style]}>{props.children}</Text>\r\n    </Pressable>\r\n}","import React, { useRef, useEffect, RefObject, useMemo, useState } from \"react\";\r\nimport { Image, View, Animated } from \"react-native\";\r\nimport { CheckBox, Text } from \"@ui-kitten/components\";\r\nimport { ButtonField } from \"../../components/ButtonField\";\r\nimport { TextField, ITextField } from \"../../components/TextField\";\r\nimport { bannerText, flex, sizes, textInputWiz } from \"../../style\";\r\nimport { bindTextInput, IEntity, useReadonlyEntity } from \"../../utils/hooks\";\r\nimport { isRequired, isValidEmail } from \"../../utils/validators\";\r\n\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\";\r\n\r\nimport { TBI } from \"../../utils/misc\";\r\nimport { AppColors } from \"../../constants/Colors\";\r\nimport Auth from '@tradingpost/common/api/entities/static/AuthApi'\r\nimport { useAppUser } from \"../../Authentication\";\r\nimport { useData } from \"../../lds\";\r\nimport { useLinkTo, useNavigation } from \"@react-navigation/native\";\r\nimport { CreateAccountProps, sideMargin } from \"./shared\";\r\nimport { Link } from \"../../components/Link\";\r\n\r\n\r\ntype FieldRefs = {\r\n    first: RefObject<ITextField>,\r\n    last: RefObject<ITextField>,\r\n    email: RefObject<ITextField>,\r\n    username: RefObject<ITextField>,\r\n    pass: RefObject<ITextField>,\r\n    confirm: RefObject<ITextField>\r\n}\r\ntype LoginInfo = { email?: string, password?: string };\r\n\r\nexport function AccountInfoSection(props: CreateAccountProps) {\r\n\r\n\r\n    const\r\n        [lockButtons, setLockButtons] = useState(false),\r\n        { setValue: setLoginResult } = useData(\"loginResult\"),\r\n        loginEntity = useReadonlyEntity<LoginInfo>({}),\r\n        linkTo = useLinkTo<any>(),\r\n        nav = useNavigation(),\r\n        [agreeToTerms, setAgreeToTerms] = useState(false),\r\n        [agreeToPrivacy, setAgrreeToPrivacy] = useState(false),\r\n        refs: FieldRefs = {\r\n            first: useRef<ITextField>(null),\r\n            last: useRef<ITextField>(null),\r\n            email: useRef<ITextField>(null),\r\n            username: useRef<ITextField>(null),\r\n            pass: useRef<ITextField>(null),\r\n            confirm: useRef<ITextField>(null),\r\n        },\r\n        buttonConfig = {\r\n            locked: lockButtons,\r\n            left: ({\r\n                text: \"Cancel\",\r\n                onPress: () => {\r\n                    if (nav.canGoBack()) {\r\n                        nav.goBack()\r\n                    } else {\r\n                        linkTo({\r\n                            screen: \"/login\"\r\n                        });\r\n                    }\r\n                }\r\n            }),\r\n            right: {\r\n                text: \"Create\",\r\n                onPress: async () => {\r\n                    setLockButtons(true);\r\n                    const errors: string[] = [];\r\n                    try {\r\n                        for (const k in refs) {\r\n                            const val = refs[k as keyof typeof refs];\r\n                            if (val.current && !val.current.validate()) {\r\n                                errors.push(val.current.errorMessage || \"\");\r\n                            }\r\n                        }\r\n                        if (!agreeToPrivacy || !agreeToTerms) {\r\n                            errors.push(\"You must agree to terms and privacy policy\");\r\n                        }\r\n\r\n                        if (errors.length) {\r\n                            errors.unshift(\"Please fix the following issues:\");\r\n                            props.toastMessage(errors.join(\"\\r\\n\"));\r\n                            setLockButtons(false);\r\n                        } else if (!false) {  //create new user\r\n                            if (loginEntity.data.email && loginEntity.data.password) {\r\n                                const login = await Auth.createLogin(loginEntity.data.email, loginEntity.data.password);\r\n                                await setLoginResult(login);\r\n                                linkTo('/create/basicinfo')\r\n                            } else {\r\n                                throw new Error(\"Something is very wrong.\" + JSON.stringify(loginEntity.data))\r\n                            }\r\n                            setLockButtons(false);\r\n                        } else { //patch authed user\r\n\r\n                            //await UpdateUserProfile(props.user.data);\r\n                            TBI();\r\n                            props.user.resetData(props.user.data);\r\n                            linkTo('/create/basicinfo')\r\n                        }\r\n                    } catch (ex: any) {\r\n                        if (ex.json) {\r\n                            props.toastMessage(`${ex.json.name}:\\r\\n${ex.json.policy || ex.json.description}`);\r\n                        } else if (typeof ex.message === \"string\") {\r\n                            props.toastMessage(ex.message);\r\n                        } else props.toastMessage(JSON.stringify(ex.message));\r\n                        setLockButtons(false);\r\n                    }\r\n\r\n                }\r\n            }\r\n        }\r\n\r\n    return <ScrollWithButtons\r\n        buttons={buttonConfig}>\r\n        {\r\n            <AccountBasicInfo agreeToPrivacy={agreeToPrivacy} setAgreeToPrivacy={setAgrreeToPrivacy} agreeToTerms={agreeToTerms} setAgreeToTerms={setAgreeToTerms} refs={refs} isAuthed={false} loginEntity={loginEntity} {...props} />\r\n        }\r\n    </ScrollWithButtons>\r\n}\r\n\r\nfunction AccountBasicInfo(props: CreateAccountProps & { refs: FieldRefs, isAuthed: boolean, loginEntity: IEntity<LoginInfo>, agreeToTerms: boolean, setAgreeToTerms: (a: boolean) => void, agreeToPrivacy: boolean, setAgreeToPrivacy: (a: boolean) => void }) {\r\n    const { refs, isAuthed } = props,\r\n        opacityAnim = useRef(new Animated.Value(0)).current,\r\n        { agreeToTerms, setAgreeToTerms, agreeToPrivacy, setAgreeToPrivacy } = props,\r\n        linkTo = useLinkTo<any>();\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n\r\n    return <View>\r\n        <View style={[flex, { margin: sideMargin }]}>\r\n            <Animated.Text\r\n                style={[bannerText, { opacity: opacityAnim }]}>\r\n                Let's start with some login information\r\n            </Animated.Text>\r\n            {/* <Section title={'Personal Information'}>\r\n                <TextField label='Name'\r\n                    validate={isRequired}\r\n                    errorMessage={\"`Name` is required\"}\r\n                    textInputRef={refs.first}\r\n                    validateOnChange placeholder='First Name' returnKeyType=\"none\" {...bindTextInput(props.user, \"first_name\", null)} />\r\n                <TextField\r\n                    label='Last'\r\n                    errorMessage={\"`Last Name` is required\"}\r\n                    textInputRef={refs.last}\r\n                    validate={isRequired}\r\n                    validateOnChange placeholder='Last Name' returnKeyType=\"none\"  {...bindTextInput(props.user, \"last_name\", null)} />\r\n            </Section> */}  \r\n            {/* <Section title={'Login Information'} > */}\r\n            <TextField\r\n                //label='Email'\r\n                style={textInputWiz}\r\n                textInputRef={refs.email}\r\n                errorMessage={\"`Email Address` is invalid\"}\r\n                disabled={isAuthed}\r\n                validate={isValidEmail}\r\n                validateOnChange placeholder='Email Address'\r\n                returnKeyType=\"none\" {...bindTextInput(props.loginEntity, \"email\", null)}\r\n            />\r\n\r\n            {\r\n                isAuthed ?\r\n                    <ButtonField\r\n                        compact\r\n                        isActive\r\n                        label='Password'\r\n                        activeText='Change'\r\n                    />\r\n                    : <>\r\n                        <TextField\r\n                            //label='Password'\r\n                            style={textInputWiz}\r\n                            textInputRef={refs.pass}\r\n                            validate={isRequired}\r\n                            validateOnChange\r\n                            errorMessage={\"`Password` is required.\"}\r\n                            placeholder='Account Password' returnKeyType=\"none\" secureTextEntry\r\n                            {...bindTextInput(props.loginEntity, \"password\", null)} />\r\n                        <TextField\r\n                            //label='Confirm'\r\n                            style={textInputWiz}\r\n                            textInputRef={refs.confirm}\r\n                            placeholder='Confirm Password'\r\n                            returnKeyType=\"none\"\r\n                            errorMessage={\"'Confirm' does not match.\"}\r\n                            validateOnChange\r\n                            validate={(c) => Boolean(c) && c === props.loginEntity.data.password}\r\n                            secureTextEntry\r\n                        />\r\n                        <View\r\n                            style={[textInputWiz, { flexDirection: \"row\" }]}\r\n                        >\r\n                            <CheckBox checked={agreeToTerms} onChange={setAgreeToTerms} style={{marginRight: 10}}/>\r\n                            <Text>Agree To </Text>\r\n                            <Link onPress={() => {\r\n                                linkTo('/create/terms')\r\n                            }} >Terms Of Use</Link>\r\n                        </View>\r\n                        <View\r\n                            style={[textInputWiz, { flexDirection: \"row\" }]}\r\n                        >\r\n                            <CheckBox checked={agreeToPrivacy} onChange={setAgreeToPrivacy} style={{marginRight: 10}} />\r\n                            <Text>Agree To </Text>\r\n                            <Link onPress={() => {\r\n                                linkTo('/create/privacy')\r\n                            }}>Privacy Policy</Link>\r\n                        </View>\r\n                    </>\r\n            }\r\n            {/* </Section> */}\r\n        </View>\r\n    </View>\r\n}\r\n","import React from 'react'\r\nimport { TextStyle, ViewStyle } from 'react-native';\r\nimport { Text } from \"@ui-kitten/components\";\r\nimport { fonts, sizes } from '../style';\r\nimport { AppColors } from '../constants/Colors';\r\n\r\nexport function Header(props: { text: string, style?: TextStyle }) {\r\n    return <Text\r\n        style={[{ color: AppColors.primary, fontSize: fonts.large, marginBottom: sizes.rem0_5 }, props.style]}\r\n    >{props.text}{ }</Text>\r\n}\r\n\r\n\r\nexport function Subheader(props: { text: string, style?: TextStyle }) {\r\n    return <Text\r\n        //color={Colors.primary}\r\n        style={[{ color:AppColors.secondary, fontSize: fonts.small, marginBottom: sizes.rem0_5 }, props.style]}\r\n    >{props.text}{ }</Text>\r\n}","import React, { ReactElement, ReactNode } from 'react'\r\nimport { View, ViewProps, ViewStyle } from 'react-native';\r\n\r\nimport { elevated, sizes } from '../style';\r\nimport { Header, Subheader } from './Headers'\r\n\r\ninterface SecitonProps {\r\n    title: string,\r\n    useSubHeading?: boolean,\r\n    children?: ReactNode,\r\n    button?: (props: { height: number, width: number }) => ReactElement,\r\n    alt?: boolean\r\n    style?: ViewProps[\"style\"],\r\n    \r\n}\r\n\r\nexport function Section(props: SecitonProps) {\r\n    const { title, children, useSubHeading} = props;\r\n    return (\r\n        <View  style={[{ backgroundColor: \"white\", marginBottom: sizes.rem1 }, props.style]}>\r\n            <View style={{ flexDirection: \"row\", justifyContent: \"space-between\" }}>\r\n                {Boolean(title) && (useSubHeading ? <Subheader text={title} style={{ color: props.alt ? \"#434343\" : undefined }} /> : <Header text={title} />)}\r\n                {props.button && props.button({ height: sizes.rem1_5, width: sizes.rem1_5 })}\r\n            </View>\r\n            {children}\r\n        </View>\r\n    )\r\n}\r\n\r\nexport function Subsection(props: Omit<SecitonProps, 'useSubHeading'>) {\r\n    return <Section useSubHeading {...props} />\r\n}\r\n\r\nexport const ElevatedSection = (props: Parameters<typeof Section>[0]) => {\r\n    const style = [[elevated, { paddingHorizontal: sizes.rem1 }], props.style]\r\n    return <Section {...props} style={style} />\r\n}","import React, { useLayoutEffect, useState } from 'react'\r\n\r\n//import { rnui } from '../images'\r\nimport { Text, Image } from 'react-native'\r\nimport { IndexPath, Select, SelectItem, SelectProps } from '@ui-kitten/components'\r\n\r\nexport type PickerProps<T extends boolean> = Omit<SelectProps, \"children\" | \"mode\" | \"onSelect\" | \"value\" | \"migrate\" | \"spellCheck\" | \"selectedIndex\"> & {\r\n    selectionLimit?: number, multiSelect?: T,\r\n    // selectedIndex?: (T extends false ? (IndexPath) : (IndexPath)[]),\r\n    items: { label: string, value: string | number, iconUrl?: string }[],\r\n    value?: T extends false ? (string | number) : (string | number)[]\r\n    onSelect?: (item: (T extends false ? IndexPath : IndexPath[])) => void\r\n}\r\n\r\nexport function Picker<T extends boolean = false>(props: PickerProps<T>) {\r\n\r\n    //const [_value, setValues] = useState<PickerProps<T>[\"value\"]>(props.value);\r\n\r\n    // useLayoutEffect(() => {\r\n    //     setValues();\r\n    // }, [props.value])\r\n\r\n    return <Select\r\n        //rightIconSource={rnui.chevronDown}\r\n        //spellCheck={false} \r\n        //migrate \r\n        //selectionLimit={props.selectionLimit}\r\n        //multiSelect={props.multiSelect}\r\n        //mode={props.multiSelect ? \"MULTI\" : \"SINGLE\"}\r\n        {...props}\r\n        //value={(p) => <Text {...p}></Text>}\r\n        value={props.value instanceof Array ? props.items.map((item) => \"TEST\").filter(v => v).join(\",\") : props.items.find((v) => v.value === props.value)?.label || props.placeholder}\r\n\r\n        onSelect={(v) => {\r\n            // if (v instanceof Array) {\r\n            //     setValues(v.map((v) => props.items[v.row].value) as any);\r\n            // }\r\n            // else {\r\n            //     // console.log(\"TESTTTTT::::::\" + props.items[v.row].value as any);\r\n            //     setValues(props.items[v.row].value as any);\r\n            // }\r\n\r\n            if (props.onSelect)\r\n                props.onSelect(v as any);\r\n        }}\r\n        selectedIndex={\r\n            props.multiSelect ? props.items.map((i, idx) =>\r\n                Boolean((props.value as any[]).find(_item => _item.value === i.value)) ?\r\n                    new IndexPath(idx) : null).filter(v => v) as IndexPath[] :\r\n                new IndexPath(props.items.findIndex((i, idx) => i.value === props.value))\r\n        }>\r\n        {props.items.map(i => <SelectItem accessoryLeft={(props) => <Image {...props} source={{ uri: i.iconUrl }} />} title={i.label} key={i.value} />)}\r\n    </Select >\r\n}","import React from 'react';\r\nimport MultiSlider, { MultiSliderProps } from '@ptomasroos/react-native-multi-slider';\r\n\r\nexport function Slider(props: MultiSliderProps) {\r\n    return <MultiSlider\r\n\r\n        //thumbTintColor={Colors.primary}\r\n        //maximumTrackTintColor={Colors.grey50}\r\n        //minimumTrackTintColor={Colors.grey50} \r\n        {...props} />\r\n}","import { Icon } from \"@ui-kitten/components\";\r\nimport React from \"react\";\r\nimport { Pressable, PressableProps, StyleProp, ViewStyle } from \"react-native\";\r\nimport { AppColors } from \"../constants/Colors\";\r\n\r\nexport const AddButton = (props: Pick<PressableProps, \"onPress\"> & Pick<ViewStyle, \"height\" | \"width\">) => {\r\n    return <Pressable onPress={props.onPress} style={{ justifyContent: \"center\" }} ><Icon\r\n        //fill={AppColors.secondary}\r\n        fill={AppColors.secondary}\r\n        height={props.height}\r\n        width={props.width}\r\n        name=\"plus-square\" style={{\r\n            height: props.height,\r\n            width: props.width\r\n        }} /></Pressable>\r\n}\r\n\r\nexport const EditButton = (props: Pick<PressableProps, \"onPress\"> & Pick<ViewStyle, \"height\" | \"width\"> & { style?: ViewStyle }) => {\r\n    return <Pressable onPress={props.onPress} style={[{ justifyContent: \"center\" }, props.style]}><Icon\r\n        //fill={AppColors.secondary}\r\n        fill={\"#708090\"}\r\n        name=\"edit-outline\" style={{\r\n            height: props.height,\r\n            width: props.width\r\n        }} /></Pressable>\r\n}\r\n\r\nexport const SettingsButton = (props: Pick<PressableProps, \"onPress\"> & Pick<ViewStyle, \"height\" | \"width\"> & { style?: ViewStyle }) => {\r\n    return <Pressable onPress={props.onPress} style={[{ justifyContent: \"center\" }, props.style]}><Icon\r\n        //fill={AppColors.secondary}\r\n        fill={\"#708090\"}\r\n        name=\"settings-2-outline\" style={{\r\n            height: props.height,\r\n            width: props.width\r\n        }} /></Pressable>\r\n}\r\nexport const DeleteButton = (props: Pick<PressableProps, \"onPress\"> & Pick<ViewStyle, \"height\" | \"width\" > & { style?: ViewStyle, color?: string }) => {\r\n    return <Pressable onPress={props.onPress} style={[{ justifyContent: \"center\" }, props.style]}><Icon\r\n        //fill={AppColors.secondary}\r\n        fill={props.color ? props.color : \"#708090\"}\r\n        name=\"close-circle-outline\" style={{\r\n            height: props.height,\r\n            width: props.width\r\n            \r\n        }} /></Pressable>\r\n}\r\nexport const ExitButton = (props: Pick<PressableProps, \"onPress\"> & Pick<ViewStyle, \"height\" | \"width\" > & { style?: ViewStyle, color?: string }) => {\r\n    return <Pressable onPress={props.onPress} style={[{ justifyContent: \"center\" }, props.style]}><Icon\r\n        //fill={AppColors.secondary}\r\n        fill={props.color ? props.color : \"#708090\"}\r\n        name=\"close-circle-outline\" style={{\r\n            height: props.height,\r\n            width: props.width\r\n            \r\n        }} /></Pressable>\r\n}\r\nexport const FavButton = (props: Pick<PressableProps, \"onPress\"> & Pick<ViewStyle, \"height\" | \"width\"> & { isSelected?: boolean }) => {\r\n    return <Pressable onPress={props.onPress} style={{ justifyContent: \"center\", alignItems: 'center' }}><Icon\r\n        //fill={AppColors.secondary}\r\n        fill={props.isSelected ? \"#F6BE00\" : \"#708090\"}\r\n        name={props.isSelected ? \"star\" : \"star-outline\"} style={{\r\n            height: props.height,\r\n            width: props.width\r\n        }} /></Pressable>\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { View, KeyboardAvoidingView, Platform } from \"react-native\";\r\nimport { Input } from \"@ui-kitten/components\";\r\nimport { Button, Icon } from '@ui-kitten/components'\r\nimport { sizes } from \"../style\";\r\n\r\nexport function KeyboardAvoidingInput(props: any) {\r\n    return (\r\n    <KeyboardAvoidingView\r\n        behavior={Platform.OS === \"ios\" ? \"padding\" : \"height\"}\r\n        style={{display: \"flex\", flexDirection: \"column\", alignContent: \"flex-end\"}}\r\n        >\r\n        <View style={{display: \"flex\", flexDirection: \"row\", alignItems: 'center'}}>\r\n        <Input \r\n            placeholder={props.placeholder}\r\n            value={props.value}\r\n            multiline={true}\r\n            numberOfLines={props.numLines}\r\n            style={{flex: 1,\r\n                    borderColor: '#ccc',\r\n                    //paddingVertical: sizes.rem0_5, paddingLeft: sizes.rem0_5,\r\n                    padding: sizes.rem0_5\r\n                }}\r\n            onChangeText={nextValue => props.setValue(nextValue)}\r\n        />\r\n        <Button \r\n            style={{backgroundColor: 'transparent',\r\n                    borderColor: 'transparent',\r\n                    padding: sizes.rem0_5,\r\n                    paddingLeft: 0,\r\n                    display: props.displayButton ? 'flex' : 'none'}}\r\n            onPress={() => {\r\n                if (props.clicked) {\r\n                    props.clicked[1](props.clicked[0] + 1)\r\n                }\r\n                props.onClick(props.value, props.setValue, props.item_id)\r\n            }}            \r\n            //onPress={props.onClick(props.value, props.setValue, props.item_id)}\r\n            accessoryRight={props.rightIcon}\r\n                        />\r\n        \r\n        </View>\r\n    </KeyboardAvoidingView>);\r\n}","import React, { useEffect, useMemo, useState } from \"react\"\r\nimport { Autocomplete, AutocompleteItem, Button, Icon, IndexPath, Text, Layout } from \"@ui-kitten/components\"\r\n//import { referenceData } from \"../../apis/ReferenceData\"\r\nimport { ElevatedSection, Section } from \"../../components/Section\"\r\nimport { PlusIcon } from \"../../images\"\r\nimport { bannerText, flex, noMargin, paddView, sizes, thinBannerText } from \"../../style\"\r\nimport { Picker } from '../../components/Picker'\r\nimport {\r\n    CreateAccountProps,\r\n    sideMargin\r\n} from \"./shared\"\r\n\r\nimport {\r\n    //bindMultiPicker,\r\n    bindPicker,\r\n    useOpacityAnim,\r\n    useReadonlyEntity\r\n} from \"../../utils/hooks\"\r\nimport { useSecuritiesList } from '../../SecurityList'\r\n//import { UpdateUserProfile } from \"../../apis/Authentication\"\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\"\r\nimport { Alert, Pressable, TextStyle, View } from \"react-native\"\r\nimport { Slider } from \"../../components/Slider\"\r\nimport { AppColors } from \"../../constants/Colors\"\r\nimport { Api } from \"@tradingpost/common/api\"\r\nimport { AddButton } from \"../../components/AddButton\"\r\nimport { useLinkTo } from \"@react-navigation/native\";\r\nimport { KeyboardAvoidingInput } from \"../../components/KeyboardAvoidingInput\"\r\n\r\n//import { AppConfig } from \"../../apis/ApplicationApi\"\r\n\r\n\r\nexport const investmentStrats = [\r\n    'Buy & Hold',\r\n    'Growth-Focused',\r\n    'Swing Trading',\r\n    'Momentum',\r\n    'Day Trading',\r\n    'Index Investing',\r\n    'Value-Focused',\r\n    'Long/Short',\r\n    'Opportunistic ',\r\n    'Concetrated',\r\n    'Diversified'\r\n];\r\nexport const questionStyle = { fontSize: 16, marginBottom: sizes.rem1, marginTop: sizes.rem1_5 } as TextStyle;\r\n\r\nexport const gicsAC = ['SaaS',\r\n    'Biotech',\r\n    'AdTech',\r\n    'Tech',\r\n    'Fintech',\r\n    'Specialty Finance',\r\n    'Aero/Defense',\r\n    'Industrial',\r\n    'Medtech',\r\n    'Cloud',\r\n    'Consumer',\r\n    'Banks',\r\n    'Industrials',\r\n    'Healthcare',\r\n    'Housing',\r\n    'Electric Vehicles',\r\n    'Renewable Energy',\r\n    'Oil and Gas',\r\n    'Metals and Mining',\r\n    'Semiconductors',\r\n    'Cybersecurity',\r\n    'Metaverse',\r\n    'Crypto',\r\n    'Transportation',\r\n    'Airlines',\r\n    'Auto',\r\n    'Healthcare',\r\n    'Retail',\r\n    'E-commerce',\r\n    'Insurance',\r\n    'Gambling',\r\n    'Quality',\r\n    'Deep Dives',\r\n    'General Market',\r\n    'Valuation',\r\n    'Technicals',\r\n    'Investment Process',\r\n    'Small Caps',\r\n    'Macro',\r\n    'News',\r\n    'Venture Capital',\r\n    'Emerging Markets',\r\n    'Portfolio Management',\r\n    'Data Driven',\r\n    'Industry Expert',\r\n    'Financial Coach',\r\n    'Businesses',\r\n    'Special Situations',\r\n    'Activist'].sort()\r\n\r\n\r\nexport function InvestmentInterestSection(props: CreateAccountProps) {\r\n    const { AppearView } = useOpacityAnim();\r\n    const anaylistProfile = useReadonlyEntity(props.user.data.analyst_profile || {\r\n        investment_strategy: \"\",\r\n        portfolio_concentration: 50,\r\n        benchmark: \"\",\r\n        interests: []\r\n    });\r\n    //props.user.data.investment_interests || { interestLevel: 50 }\r\n    const { securities: { list: securities } } = useSecuritiesList(),\r\n        [lockButtons, setLockButtons] = useState(false),\r\n        [bio, setBio] = useState(''),\r\n        [sliderWidth, setSliderWidth] = useState(100),\r\n        linkTo = useLinkTo<any>(),\r\n        [acText, setAcText] = useState(\"\");\r\n    const acValues = useMemo(() => {\r\n        const r = new RegExp(acText, \"i\");\r\n        return acText ? gicsAC.filter((g, i) => r.test(g)) : [];\r\n    }, [acText])\r\n    const addIfMissing = (value: string) => {\r\n        if (value && !anaylistProfile.data.interests.find((int) => int.toLowerCase() === value.toLowerCase())) {\r\n            anaylistProfile.update({\r\n                \"interests\": [...anaylistProfile.data.interests, value]\r\n            })\r\n        }\r\n        setAcText(\"\");\r\n    }\r\n    const benches = securities.filter(s => s.is_benchmark).sort((a, b) => a.symbol.localeCompare(b.symbol)).map((value) => ({\r\n        label: `[${value.symbol}] ${value.security_name}`,\r\n        value: value.symbol,\r\n        iconUrl: value.logo_url\r\n    }))\r\n    return <ScrollWithButtons\r\n        buttons={\r\n            {\r\n                locked: lockButtons,\r\n                left: {\r\n                    text: \"Nevermind\",\r\n                    onPress: async () => {\r\n                        const defaultSettings = {\r\n                            analyst: false,\r\n                            push_notifications: {\r\n                                mentions: true,\r\n                                upvotes: true,\r\n                                watchlist_changes: true,\r\n                            },\r\n                            portfolio_display: {\r\n                                performance: false,\r\n                                holdings: false,\r\n                                trades: false\r\n                            }\r\n                        }\r\n                        await Api.User.update(props.user.data.id, {\r\n                            settings: defaultSettings\r\n                        })\r\n                        linkTo('/create/profilepicture')\r\n                    }\r\n                },\r\n                right: {\r\n                    text: \"Continue\",\r\n                    onPress: async () => {\r\n                        setLockButtons(true);\r\n                        try {\r\n                            await Api.User.update(props.user.data.id, {\r\n                                bio: bio,\r\n                                analyst_profile: anaylistProfile.data\r\n                            });\r\n                            anaylistProfile.resetData(anaylistProfile.data);\r\n                            props.user.resetData(props.user.data);\r\n\r\n\r\n                            linkTo('/create/linkbrokerage')\r\n                        } catch (ex: any) {\r\n                            console.error(ex);\r\n                            props.toastMessage(\"Unable to update profile\");\r\n                            setLockButtons(false);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }>\r\n        <View style={[paddView, { paddingBottom: 0 }]}>\r\n            <ElevatedSection title=\"\" style={{ paddingVertical: 4 }}>\r\n                <AppearView onLayout={(ev) => {\r\n                    setSliderWidth(ev.nativeEvent.layout.width)\r\n                }} style={[flex]}>\r\n                    <Text style={[thinBannerText, { marginHorizontal: 0, marginTop: sizes.rem0_5 }]}>Welcome Analyst! Tell us a bit about yourself</Text>\r\n                    <Text style={[questionStyle, { marginTop: sizes.rem0_5 }]}>Bio</Text>\r\n                    <KeyboardAvoidingInput\r\n                        value={bio}\r\n                        displayButton={false}\r\n                        numLines={3}\r\n                        placeholder={'Tell people about yourself'}\r\n                        //rightIcon=\r\n                        setValue={setBio}\r\n                    //item_id={props.route.params.post._source.id}\r\n                    //clicked={[commentAdded, setCommentAdded]}\r\n                    //onClick={() => {}}\r\n                    />\r\n                    <Text style={questionStyle}>What is your investment strategy?</Text>\r\n                    <Picker\r\n                        placeholder='Select Strategy'\r\n                        value={anaylistProfile.data.investment_strategy}\r\n                        items={investmentStrats.map((value) => ({\r\n                            label: value,\r\n                            value\r\n                        }))}\r\n                        {...bindPicker(anaylistProfile, \"investment_strategy\", {\r\n                            fromType: (v) => {\r\n                                if (v) {\r\n                                    return investmentStrats[v.row]\r\n                                }\r\n                                return \"\";\r\n                            },\r\n                            toType: (v) => {\r\n                                return new IndexPath(investmentStrats.findIndex(v => v === v));\r\n                            }\r\n                        })}\r\n                    />\r\n                    <Text style={questionStyle}>How concentrated is your portfolio?</Text>\r\n                    <Slider\r\n                        containerStyle={{\r\n                            marginLeft: sliderWidth * 0.05\r\n                        }}\r\n                        min={0}\r\n                        max={100}\r\n                        step={25}\r\n                        sliderLength={sliderWidth * 0.9}\r\n                        values={[anaylistProfile.data.portfolio_concentration || 50]}\r\n                        onValuesChange={(v) => {\r\n                            anaylistProfile.update({\r\n                                portfolio_concentration: v[0]\r\n                            })\r\n                        }\r\n                        }\r\n                    />\r\n                    <View style={{ flexDirection: \"row\", justifyContent: \"space-between\", marginBottom: 16 }}>\r\n                        <Text>Highly Diversified</Text>\r\n                        <Text>Very Concentrated</Text>\r\n                    </View>\r\n                    <Text style={questionStyle}>What benchmark do you follow?</Text>\r\n                    <Picker\r\n                        value={anaylistProfile.data.benchmark}\r\n                        placeholder='Select Benchmark'\r\n                        items={benches}\r\n                        {...bindPicker(anaylistProfile, \"benchmark\", {\r\n                            fromType: (v) => {\r\n                                if (v) {\r\n                                    return benches[v.row].value\r\n                                }\r\n                                return \"\";\r\n                            },\r\n                            toType: (v) => {\r\n                                return new IndexPath(benches.findIndex(v => v === v));\r\n                            }\r\n                        })}\r\n                    />\r\n                    <Text style={questionStyle}>Pick a few interest and specialties</Text>\r\n                    <View>\r\n                        <Autocomplete\r\n                            value={acText || \"\"}\r\n                            onChangeText={setAcText}\r\n                            placeholder=\"Interest &amp; Specialties\"\r\n                            placement=\"bottom\"\r\n                            accessoryRight={\r\n                                (props) => <AddButton\r\n                                    onPress={() => addIfMissing(acText)}\r\n                                    height={(props?.style as any)?.height}\r\n                                    width={(props?.style as any)?.width}\r\n\r\n                                />\r\n                            }\r\n                            onSelect={(idx) => addIfMissing(acValues[idx])}>{\r\n                                acValues.map((v, i) => <AutocompleteItem key={i} title={v} />)\r\n                            }\r\n                        </Autocomplete>\r\n                    </View>\r\n                    {\r\n                        anaylistProfile.data.interests.map((v, i) => <View style={{ padding: sizes.rem0_5, flexDirection: \"row\" }}>\r\n                            <Text style={{ textAlign: \"left\", flex: 1 }}>{v}</Text><Pressable onPress={() => {\r\n                                const newInterest = [...anaylistProfile.data.interests];\r\n                                newInterest.splice(i, 1);\r\n                                anaylistProfile.update({\r\n                                    interests: newInterest\r\n                                })\r\n                            }}><Icon name=\"close-outline\" style={{ height: 24, aspectRatio: 1 }} /></Pressable>\r\n                        </View>)\r\n                    }\r\n                </AppearView>\r\n            </ElevatedSection>\r\n        </View>\r\n    </ScrollWithButtons>\r\n}\r\n\r\n","import React, {useEffect} from 'react'\r\nimport {Text, View, Pressable, PressableProps, ViewStyle, Platform} from 'react-native'\r\nimport {SvgProps, SvgXml} from 'react-native-svg'\r\n\r\n// think about just making an image source converter \r\nexport interface IIconifyIcon {\r\n    body: string;\r\n    left?: number;\r\n    top?: number;\r\n    width?: number;\r\n    height?: number;\r\n    rotate?: number;\r\n    hFlip?: boolean;\r\n    vFlip?: boolean;\r\n}\r\n\r\nexport interface IconProps {\r\n    icon: IIconifyIcon,\r\n    style?: ViewStyle,\r\n    svgProps?: SvgProps,\r\n    DEBUG?: boolean,\r\n    // Hack for right now... shoudl htink about this...    \r\n    currentColor?: string\r\n    pressableProps?: Omit<PressableProps, \"style\">\r\n}\r\n\r\nexport function IconifyIcon(props: IconProps) {\r\n    useEffect(() => {\r\n        if (props.DEBUG) {\r\n            console.log(JSON.stringify(props.icon));\r\n        }\r\n    }, [props.icon, props.DEBUG])\r\n\r\n    const xml = `<svg fill=\"black\" ${Platform.OS === \"web\" ? 'style=\"height:100%;width:100%;\"' : \"\"} width=\"${props.icon.width || 0}\" height=\"${props.icon.height || 0}\" viewBox=\"0 0 ${props.icon.width || 0} ${props.icon.height || 0}\">${props.currentColor ? props.icon.body.replace(/\"currentColor\"/gi, `\"${props.currentColor}\"`) : props.icon.body}</svg>`;\r\n    const svg =\r\n        Platform.OS === \"web\" ? <View style={props.svgProps?.style}>\r\n                <div style={{height: \"100%\", width: \"100%\"}} dangerouslySetInnerHTML={{__html: xml}}/>\r\n            </View> :\r\n            <SvgXml height={\"100%\"} width={\"100%\"} xml={xml}  {...props.svgProps} />\r\n\r\n    return props.pressableProps ?\r\n        <Pressable style={props.style} {...props.pressableProps}>{svg}</Pressable> :\r\n        <View style={props.style}>{svg}</View>\r\n}","import AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { getCallBackUrl } from \"@tradingpost/common/api/entities/static/EntityApiBase\";\r\nimport { openBrowserAsync, WebBrowserResultType } from \"expo-web-browser\";\r\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { Linking } from \"react-native\";\r\nimport { EventRegister } from \"react-native-event-listeners\";\r\nimport uuid from 'react-native-uuid';\r\nimport { initLds } from \"../../lds\";\r\n//TODO: SHould put this all in the app later as a generate link \r\nconst clientId = \"cm9mUHBhbVUxZzcyVGJNX0xrc2E6MTpjaQ\";\r\nconst platform = \"twitter\",\r\n    redirectUriText = `${getCallBackUrl()}/auth/${platform}`,\r\n    redirectUri = new URL(redirectUriText),\r\n    authUrlText = \"https://twitter.com/i/oauth2/authorize\"\r\n//state = `amira_${platform}`;\r\n\r\nexport interface ITokenResponse {\r\n    \"token_type\": \"bearer\",\r\n    \"expires_in\": number,\r\n    \"access_token\": string,\r\n    \"scope\": string\r\n}\r\n\r\nexport interface TwitterMe {\r\n    id: string,\r\n    name: string\r\n    username: string\r\n}\r\n\r\nexport function useTwitterAuth() {\r\n    const state = useRef<string>(uuid.v4() as string);\r\n    let intervalHandler = useRef<any>()\r\n    \r\n    const openAuth = useCallback(async () => {\r\n        await AsyncStorage.removeItem(\"auth-twitter-code\");\r\n        const _challenge = Math.random().toString().substring(2, 10);\r\n        const authUrl = new URL(authUrlText);\r\n        authUrl.searchParams.append(\"response_type\", \"code\");\r\n        authUrl.searchParams.append(\"client_id\", clientId);\r\n        authUrl.searchParams.append(\"redirect_uri\", redirectUriText);\r\n        authUrl.searchParams.append(\"state\", state.current);\r\n        authUrl.searchParams.append(\"scope\", \"users.read tweet.read offline.access\");\r\n        authUrl.searchParams.append(\"code_challenge\", _challenge);\r\n        authUrl.searchParams.append(\"code_challenge_method\", \"plain\");\r\n        console.log(\"OPENING BRWOSER\")\r\n        const openResult = await openBrowserAsync(authUrl.toString());\r\n        \r\n        const code = await new Promise<string>((res,rej)=>{\r\n        //HACK: will look for a better solution later \r\n            //TODO: Also need to check state here just in case no matter what ... \r\n            clearInterval(intervalHandler.current);       \r\n            intervalHandler.current =setInterval(async ()=>{\r\n                const code = await AsyncStorage.getItem(\"auth-twitter-code\");\r\n                console.log(\"########## LOOKING FOR THE CODE ##########\");\r\n                if(code){{\r\n                    res(code);\r\n                    console.log(\"########## I FOUND THE CODE ##########\");\r\n                }\r\n                clearInterval(intervalHandler.current);\r\n                }\r\n            },1000);\r\n        })\r\n        \r\n        // let respTest = await resp.text();\r\n        // if (!resp.ok)\r\n        //     throw new Error(respTest)\r\n        // else {\r\n        //     //respTest = await resp.text();\r\n        //     console.log(respTest);\r\n        // }\r\n        //const auth    //: ITokenResponse =  JSON.parse(respTest);  //await resp.json();\r\n        return  await Api.User.extensions.linkSocialAccount({ callbackUrl: getCallBackUrl(), platform,code, challenge:_challenge}) ;        \r\n    }, []);\r\n\r\n    //Clean up interval if its dangling \r\n    useEffect(()=>{\r\n        return ()=> clearInterval(intervalHandler.current)\r\n    },[])\r\n\r\n    return openAuth\r\n}\r\n\r\n// export const getToken = async (info: {\r\n//     code: string\r\n// }) => {\r\n//     try {\r\n        \r\n//         // const meResp = await fetch(\"https://api.twitter.com/2/users/me\", {\r\n//         //     method: \"GET\",\r\n//         //     headers: {\r\n//         //         Authorization: `Bearer ${auth.access_token}`\r\n//         //     }\r\n//         // });\r\n\r\n//         // if (!meResp.ok)\r\n//         //     throw new Error(await meResp.text())\r\n\r\n//         // const meData: {\r\n//         //     data: TwitterMe\r\n\r\n//         // } = await meResp.json();\r\n\r\n\r\n//     })\r\n\r\n// }","import AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { getCallBackUrl } from \"@tradingpost/common/api/entities/static/EntityApiBase\";\r\nimport { openBrowserAsync, WebBrowserResultType } from \"expo-web-browser\";\r\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { Linking } from \"react-native\";\r\nimport { EventRegister } from \"react-native-event-listeners\";\r\nimport uuid from 'react-native-uuid';\r\nimport { makeRedirectUrl } from \"./shared\";\r\n\r\n//TODO: SHould put this all in the app later as a generate link \r\nconst clientId = \"408632420955-7gsbtielmra10pj4sdccgml20tphfujk.apps.googleusercontent.com\";\r\nconst platform = \"youtube\",\r\n    redirectUriText = makeRedirectUrl(platform),// `http://localhost:19006/auth/${platform}`,\r\n    redirectUri = new URL(redirectUriText),\r\n    authUrlText = \"https://accounts.google.com/o/oauth2/v2/auth\"\r\n//state = `amira_${platform}`;\r\n\r\nexport interface ITokenResponse {\r\n    \"token_type\": \"bearer\",\r\n    \"expires_in\": number,\r\n    \"access_token\": string,\r\n    \"scope\": string\r\n}\r\n\r\nexport interface TwitterMe {\r\n    id: string,\r\n    name: string\r\n    username: string\r\n}\r\n\r\nexport function useGoogleAuth() {\r\n    const state = useRef<string>(uuid.v4() as string);\r\n    let intervalHandler = useRef<any>()\r\n    \r\n    const openAuth = useCallback(async () => {\r\n        await AsyncStorage.removeItem(\"auth-youtube-code\");\r\n        const _challenge = Math.random().toString().substring(2, 10);\r\n        //const authUrl = new URL(authUrlText);\r\n        // authUrl.searchParams.append(\"response_type\", \"code\");\r\n        // authUrl.searchParams.append(\"client_id\", clientId);\r\n        // authUrl.searchParams.append(\"redirect_uri\", redirectUriText);\r\n        // authUrl.searchParams.append(\"state\", state.current);\r\n        // authUrl.searchParams.append(\"scope\", \"https://www.googleapis.com/auth/youtube\");\r\n        // authUrl.searchParams.append(\"code_challenge\", _challenge);\r\n        // authUrl.searchParams.append(\"code_challenge_method\", \"plain\");\r\n    //https://www.googleapis.com/auth/youtubepartner-channel-audit\r\n        const googleUrl = `https://accounts.google.com/o/oauth2/v2/auth?`+\r\n        `scope=https%3A//www.googleapis.com/auth/youtube%20https%3A//www.googleapis.com/auth/youtubepartner-channel-audit&`+\r\n        `include_granted_scopes=true&`+\r\n        `response_type=code&`+\r\n        `state=state_parameter_passthrough_value&`+\r\n        `redirect_uri=${encodeURIComponent(redirectUriText)}&`+\r\n        `client_id=${clientId}`;\r\n\r\n        const openResult = await openBrowserAsync(googleUrl);\r\n        \r\n        const code = await new Promise<string>((res,rej)=>{\r\n        //HACK: will look for a better solution later \r\n            //TODO: Also need to check state here just in case no matter what ... \r\n            clearInterval(intervalHandler.current);       \r\n            intervalHandler.current =setInterval(async ()=>{\r\n                const code = await AsyncStorage.getItem(\"auth-youtube-code\");\r\n                if(code){\r\n                    res(code);\r\n                clearInterval(intervalHandler.current);\r\n                }\r\n            },1000);\r\n        })\r\n        \r\n        // let respTest = await resp.text();\r\n        // if (!resp.ok)\r\n        //     throw new Error(respTest)\r\n        // else {\r\n        //     //respTest = await resp.text();\r\n        //     console.log(respTest);\r\n        // }\r\n        //const auth    //: ITokenResponse =  JSON.parse(respTest);  //await resp.json();\r\n        return await Api.User.extensions.linkSocialAccount({platform,code, challenge:_challenge, callbackUrl:getCallBackUrl()});\r\n    }, []);\r\n\r\n    //Clean up interval if its dangling \r\n    useEffect(()=>{\r\n        return ()=> clearInterval(intervalHandler.current)\r\n    },[])\r\n\r\n    return openAuth\r\n}\r\n\r\n// export const getToken = async (info: {\r\n//     code: string\r\n// }) => {\r\n//     try {\r\n        \r\n//         // const meResp = await fetch(\"https://api.twitter.com/2/users/me\", {\r\n//         //     method: \"GET\",\r\n//         //     headers: {\r\n//         //         Authorization: `Bearer ${auth.access_token}`\r\n//         //     }\r\n//         // });\r\n\r\n//         // if (!meResp.ok)\r\n//         //     throw new Error(await meResp.text())\r\n\r\n//         // const meData: {\r\n//         //     data: TwitterMe\r\n\r\n//         // } = await meResp.json();\r\n\r\n\r\n//     })\r\n\r\n// }","\r\nimport { getCallBackUrl } from '@tradingpost/common/api/entities/static/EntityApiBase';\r\nimport Constants, { AppOwnership } from 'expo-constants'\r\n\r\nexport const makeRedirectUrl = (platform: string) => {\r\n    let baseUrl = AppOwnership.Expo === Constants.appOwnership ? Constants.manifest?.hostUri : \"\";\r\n    return `${getCallBackUrl()}/auth/${platform}`\r\n}","import React, { useEffect, useState, useMemo, useRef } from \"react\"\r\nimport { IconifyIcon, IIconifyIcon } from \"./IconfiyIcon\"\r\nimport { ElevatedSection, Section, Subsection } from \"./Section\"\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { View, Animated, Pressable, PressableProps } from \"react-native\"\r\nimport { useLinkTo } from \"@react-navigation/native\"\r\nimport { Autocomplete, AutocompleteItem, Icon, IndexPath, Text, TabView, Tab } from \"@ui-kitten/components\";\r\nimport { bannerText, elevated, flex, paddView, paddViewWhite, sizes, thinBannerText, social as socialStyling, fonts } from \"../style\";\r\nimport { useAppUser } from \"../Authentication\"\r\nimport { KeyboardAvoidingInput } from \"./KeyboardAvoidingInput\";\r\nimport { useTwitterAuth } from \"../utils/third-party/twitter\";\r\nimport { social } from \"../images\";\r\nimport { AppColors } from \"../constants/Colors\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { useGoogleAuth } from \"../utils/third-party/youtube\";\r\nimport { getCallBackUrl } from \"@tradingpost/common/api/entities/static/EntityApiBase\";\r\n\r\n\r\nexport function YourContentComponent() {\r\n    const { loginState, signIn } = useAppUser(),\r\n        toast = useToast(),\r\n        [inputMessage, setInputMessage] = useState(''),\r\n        [inputPlatform, setInputPlatform] = useState(''),\r\n        [inputValue, setInputValue] = useState('');\r\n\r\n    const appUser = loginState?.appUser;\r\n    const authToken = loginState?.authToken\r\n    const getTwitterToken = useTwitterAuth();\r\n    const getGoogleToken = useGoogleAuth();\r\n\r\n    let userClaims = appUser?.claims;\r\n\r\n    let [twitterHandle, setTwitterHandle] = useState(userClaims ? userClaims.find(c => c.platform === \"twitter\")?.claims?.handle : '')\r\n    let [substackUsername, setsubstackUsername] = useState(userClaims ? userClaims.find(c => c.platform === \"substack\")?.claims?.handle : '')\r\n    let [spotifyShow, setSpotifyShow] = useState(userClaims ? userClaims.find(c => c.platform === \"spotify\")?.claims?.handle : '')\r\n    let [youtubeChannel, setYoutubeChannel] = useState(userClaims ? userClaims.find(c => c.platform === \"youtube\")?.claims?.handle : '')\r\n\r\n\r\n    return (\r\n        <ElevatedSection title=\"\" style={{ padding: 5 }}>\r\n            <Text style={[thinBannerText, { fontSize: fonts.medium, lineHeight: fonts.medium * 1.5 }]}>TradingPost aggregates content across several social platforms.</Text>\r\n            <View style={{ flexDirection: \"row\", marginHorizontal: sizes.rem2, marginBottom: sizes.rem1 }}>\r\n                <HandleButton\r\n                    title={twitterHandle}\r\n                    icon={social.TwitterLogo}\r\n                    onPress={() => {\r\n                        getTwitterToken().then((handle) => {\r\n                            setTwitterHandle(handle)\r\n                        })\r\n                    }}\r\n                    iconPadd={sizes.rem1}\r\n                />\r\n                <HandleButton title={youtubeChannel} icon={social.YouTubeLogo}\r\n                    iconPadd={sizes.rem1}\r\n                    onPress={() => {\r\n                        getGoogleToken().then((handle) => {\r\n                            setYoutubeChannel(handle)\r\n                        })\r\n                        setInputPlatform('youtube')\r\n                        //await Api.User.extensions.linkSocialAccount({platform: 'substack', platform_idenifier: ''}) ;  \r\n                    }}\r\n                />\r\n            </View>\r\n            <View style={{ flexDirection: \"row\", marginHorizontal: sizes.rem2, marginBottom: sizes.rem1 }}>\r\n                <HandleButton title={substackUsername} icon={social.SubstackLogo}\r\n                    iconPadd={sizes.rem1}\r\n                    currentColor={socialStyling.substackColor}\r\n                    onPress={() => {\r\n                        setInputMessage('Please enter your Substack username as it appears in your profile URL');\r\n                        setInputPlatform('substack')\r\n                        //await Api.User.extensions.linkSocialAccount({platform: 'substack', platform_idenifier: ''}) ;  \r\n                    }}\r\n                />\r\n                <HandleButton title={spotifyShow} icon={social.SpotifyLogo}\r\n                    iconPadd={sizes.rem0_5}\r\n                    onPress={() => {\r\n                        setInputMessage(\"Please enter your Spotify Podcast's Profile URL.\\nIn the Spotify App, this can be found by going to your Podcasts's Profile Page, clicking the 'Share' Icon and clicking 'Copy Link'.\");\r\n                        setInputPlatform('spotify')\r\n                        //await Api.User.extensions.linkSocialAccount({platform: 'substack', platform_idenifier: ''}) ;  \r\n                    }}\r\n                />\r\n            </View>\r\n            <Text style={[thinBannerText, { fontSize: fonts.medium, lineHeight: fonts.medium * 1.5 }]}>Sign in to your account(s) above to claim or add your content.</Text>\r\n            <View style={inputPlatform === '' ? { display: 'none' } : { display: 'flex' }}>\r\n                <Text>\r\n                    {inputMessage}\r\n                </Text>\r\n                <KeyboardAvoidingInput\r\n                    placeholder={'Enter here'}\r\n                    value={inputValue}\r\n                    setValue={setInputValue}\r\n                    displayButton={true}\r\n                    numLines={2}\r\n                    rightIcon={(props: any) => <Icon\r\n                        fill={AppColors.secondary}\r\n                        name=\"plus-square\" height={35} width={35} style={{ height: 35, width: 35, padding: 0, alignContent: 'center' }} />}\r\n\r\n                    onClick={async (r: any, s: any, t: any) => {\r\n                        const result = await Api.User.extensions.linkSocialAccount({ callbackUrl: getCallBackUrl(), platform: inputPlatform, platform_idenifier: r });\r\n                        if (result === '') {\r\n                            toast.show(`${inputPlatform} Account Link Failed. Please try again or email contact@tradingpostapp.com for assistance.`)\r\n                        }\r\n                        s('')\r\n                        authToken ? await signIn(\"\", authToken) : {};\r\n                    }}\r\n                />\r\n            </View>\r\n        </ElevatedSection>)\r\n\r\n}\r\n\r\nexport const HandleButton = (props: { title: string | undefined, icon: IIconifyIcon, currentColor?: string, iconPadd?: number } & Pick<PressableProps, \"onPress\">) => {\r\n    return <Pressable onPress={props.onPress} style={{ flex: 1, height: sizes.rem8, opacity: props.title ? 1 : 0.25 }}>\r\n        <IconifyIcon icon={props.icon} style={{ width: \"100%\", flex: 1, justifyContent: \"space-around\" }} svgProps={{ style: { paddingVertical: props.iconPadd, height: \"100%\" } }} currentColor={props.currentColor} />\r\n        <Text numberOfLines={1} style={{ fontStyle: !props.title ? \"italic\" : undefined, color: \"black\", textAlign: \"center\" }}>{props.title || \"Unclaimed\"}</Text>\r\n    </Pressable>\r\n}","\r\nimport { NavigationProp, useNavigation } from \"@react-navigation/native\"\r\nimport { Icon } from \"@ui-kitten/components\"\r\nimport React from \"react\"\r\nimport { Pressable, Image } from \"react-native\"\r\nimport { AppColors } from \"../constants/Colors\"\r\nimport { sizes } from \"../style\"\r\n\r\nexport const ProfileButton = (props: { userId: string, profileUrl: string, size: number, editable?: boolean }) => {\r\n    const nav = useNavigation<NavigationProp<any>>();\r\n\r\n    return <Pressable\r\n        onPress={props.editable ? async () => {\r\n            nav.navigate(\"ImagePicker\");\r\n        } : () => {\r\n            if (props.userId)\r\n                nav.navigate(\"Profile\", {\r\n                    userId: props.userId\r\n                });\r\n        }}\r\n        style={{\r\n            backgroundColor: \"gray\",\r\n            width: props.size,\r\n            height: props.size,\r\n            borderRadius: props.size / 2,\r\n            alignSelf: \"center\",\r\n            borderWidth: props.size / 32,\r\n            borderColor: \"#ccc\",\r\n            overflow: \"hidden\"\r\n        }}>\r\n        {props.profileUrl ? <Image style={{ height: \"100%\", width: \"100%\" }} source={{ uri: props.profileUrl }} /> : <Icon height={\"100%\"} width={\"100%\"} name=\"person\" />}\r\n    </Pressable>\r\n}","import React from \"react\";\r\nimport { Text } from \"@ui-kitten/components\";\r\nimport { View } from 'react-native'\r\nimport { flex, fonts, sizes } from \"../style\";\r\n\r\nexport function NoDataPanel(props: { message?: string }) {\r\n    return <View style={[{ justifyContent: \"center\", alignContent: \"center\", margin: sizes.rem1 }]}>\r\n        <Text style={{ fontSize: fonts.large, color: \"lightgray\", textAlign: \"center\" }}>\r\n            {props.message || \"No Items\"}\r\n        </Text>\r\n    </View>\r\n}","import React, { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { Text, FlatList, FlatListProps, ListRenderItem, ScrollView, View, ViewToken } from \"react-native\";\r\nimport { flex } from \"../style\";\r\nimport { TBI } from \"../utils/misc\";\r\nimport { Link } from \"./Link\";\r\nimport { NoDataPanel } from \"./NoDataPanel\";\r\n\r\n\r\nexport type DataOrQuery<T> = T[] | ((data: T[] | undefined, page: number, sizeCache: SizeParts[]) => Promise<T[]>);\r\nexport type ListProps<T> = {\r\n    data?: DataOrQuery<T>,\r\n    noDataMessage?: string,\r\n    loadingMessage?: string,\r\n    maxDisaplyCount?: number,\r\n    maxDisaplyText?: string\r\n    datasetKey?: string | number,\r\n    keyExtractor?: FlatListProps<T>[\"keyExtractor\"]\r\n}\r\ntype HasU<T, U> = U extends undefined | null ? T : (T | U);\r\nexport type SizeParts = { index: number, length: number, offset: number };\r\nexport function List<T, U>(props: {\r\n    //    data: ReadonlyArray<T> | null | undefined\r\n    maxPage?: number,\r\n    listKey?: string,\r\n    renderItem: ListRenderItem<HasU<T, U>> | null | undefined\r\n    nestedScrollEnabled?: boolean,\r\n    preloadOffset?: number,\r\n    loadingItem: U,\r\n    getItemLayout?: ((\r\n        data: Array<HasU<T, U>> | null | undefined,\r\n        index: number,\r\n        sizeCache: SizeParts[]\r\n    ) => { length: number; offset: number; index: number }) | undefined;\r\n} & ListProps<T> & Pick<FlatListProps<HasU<T, U>>, \"style\" | \"contentContainerStyle\" | \"numColumns\" | \"ListHeaderComponent\" | \"StickyHeaderComponent\" | \"keyExtractor\" | \"horizontal\">) {\r\n\r\n    const [internalData, setInternalData] = useState<T[]>(),\r\n        { data, preloadOffset, datasetKey } = props,\r\n        [currentPage, setCurrentPage] = useState(0),\r\n        [pagesDone, setPagesDone] = useState(false),\r\n        isLoadingRef = useRef(true),\r\n        [maxItem, setMaxItem] = useState(-1),\r\n        [triggertHack, setTriggerHack] = useState(false),\r\n        sizeCache = useRef<SizeParts[]>([]).current,\r\n        datasetKeyRef = useRef(props.datasetKey);\r\n\r\n    datasetKeyRef.current = props.datasetKey;\r\n\r\n    useEffect(() => {\r\n        setPagesDone(false);\r\n\r\n        (async () => {\r\n            if (typeof data == \"function\") {\r\n                const result = await data(undefined, 0, sizeCache);\r\n\r\n                if (!result.length || props.maxPage === 0) {\r\n                    setPagesDone(true);\r\n                }\r\n\r\n                if (datasetKey === datasetKeyRef.current) {\r\n                    isLoadingRef.current = false;\r\n                    setInternalData(result);\r\n                }\r\n\r\n\r\n            }\r\n            else {\r\n                isLoadingRef.current = false;\r\n                setInternalData(data);\r\n                setPagesDone(true);\r\n            }\r\n        })()\r\n    }, [datasetKey, Boolean(data), props.maxPage])\r\n\r\n    useEffect(() => {\r\n        if (!pagesDone && typeof data === 'function' && internalData) {\r\n            if (!isLoadingRef.current) {\r\n                const remaining = (internalData.length - 1) - maxItem;\r\n                if (remaining <= (preloadOffset || 1)) {\r\n                    isLoadingRef.current = true;\r\n                    setTriggerHack((hack) => !hack);\r\n                    const nextPage = currentPage + 1;\r\n                    const originalLength = internalData.length\r\n\r\n                    if (datasetKey === datasetKeyRef.current) {\r\n                        data(internalData, nextPage, sizeCache).then((newData) => {\r\n                            if (newData.length === originalLength || props.maxPage === nextPage) {\r\n                                isLoadingRef.current = false;\r\n                                setPagesDone(true);\r\n                            }\r\n                            else {\r\n                                setInternalData(newData);\r\n                                setCurrentPage(nextPage);\r\n                                isLoadingRef.current = false;\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n                else {\r\n                    //console.log(\"NOPE\");\r\n                }\r\n            }\r\n            else {\r\n                //console.log(\"WHAT UP\");\r\n            }\r\n        }\r\n\r\n    }, [maxItem, datasetKey, internalData, preloadOffset, currentPage, props.maxPage])\r\n\r\n    const vp = useMemo(() => [\r\n        {\r\n            viewabilityConfig: {\r\n                itemVisiblePercentThreshold: 20\r\n            },\r\n            onViewableItemsChanged: (ev: { viewableItems: Array<ViewToken>; changed: Array<ViewToken> }) => {\r\n                let max = 0;\r\n                ev.viewableItems.forEach((vi) => {\r\n                    max = Math.max(max, vi.index || 0);\r\n                });\r\n                setMaxItem((curMax) =>\r\n                    Math.max(max, curMax));\r\n            },\r\n        },\r\n    ], []);\r\n    const needsSplice = internalData && props.maxDisaplyCount && internalData.length > props.maxDisaplyCount;\r\n\r\n    return !internalData?.length ? <NoDataPanel message={internalData ? props.noDataMessage : (props.loadingMessage || \"Loading...\")} /> :\r\n        <FlatList\r\n            listKey={props.listKey}\r\n            horizontal={props.horizontal}\r\n            style={[{\r\n                //    height: \"100%\" \r\n            }, props.style]}\r\n            // contentContainerStyle={[{ height: \"100%\" }, props.contentContainerStyle]}\r\n            getItemLayout={props.getItemLayout ? (a, b) => (props.getItemLayout as any)(a, b, sizeCache) : undefined}\r\n            numColumns={props.numColumns}\r\n            ListHeaderComponent={props.ListHeaderComponent}\r\n            ListFooterComponent={needsSplice ? () => {\r\n                return <Link onPress={TBI} style={{ marginLeft: \"auto\" }}>{props.maxDisaplyText || \"View All\"}</Link>\r\n            } : undefined}\r\n            stickyHeaderIndices={props.ListHeaderComponent ? [0] : undefined}\r\n            data={(isLoadingRef.current ? [...internalData, props.loadingItem] : (needsSplice ? internalData.slice(0, props.maxDisaplyCount) : internalData)) as HasU<T, U>[]}\r\n            keyExtractor={props.keyExtractor}\r\n            renderItem={props.renderItem}\r\n            nestedScrollEnabled={props.nestedScrollEnabled}\r\n            viewabilityConfigCallbackPairs={vp}\r\n        />\r\n\r\n    // return <ScrollView nestedScrollEnabled>\r\n    //     <View\r\n    //         style={{ backgroundColor: \"purple\", height: 1000, borderColor: \"yellow\", borderWidth: 2 }}\r\n    //     ></View>\r\n    // </ScrollView>\r\n}","import React, { MutableRefObject, useEffect, useRef, useState } from \"react\";\r\nimport { Pressable, View, ViewStyle, Text } from \"react-native\";\r\nimport { useSecuritiesList } from '../SecurityList'\r\nimport { SearchBar } from \"./SearchBar\";\r\nimport { Interface } from \"@tradingpost/common/api\"\r\nimport { ISecurityList } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport { Avatar, Icon } from \"@ui-kitten/components\";\r\nimport { List } from \"./List\";\r\nimport { flex } from \"../style\";\r\nimport { KeyboardAvoidingInput } from \"./KeyboardAvoidingInput\";\r\nimport { useIsKeyboardVisible } from \"../utils/hooks\";\r\n\r\nconst cellStyle = { flexGrow: 1, aspectRatio: 1, justifyContent: \"center\", marginVertical: 4, alignItems: \"center\", flexBasis: 20 } as ViewStyle;\r\nconst numItemsPerRow = 4;\r\n//TODO: Need to optimize security load\r\nconst empty = {};\r\ntype SecOrEmpty = ISecurityList | {};\r\n\r\nexport type SelectionConverterRef = MutableRefObject<((selectedItems: Record<number, true>) => ISecurityList[]) | null>;\r\n//helper until i  lean this up\r\nexport const useWatchlistPicker = () => {\r\n    const [selectedItems, setSelectedItems] = useState<Record<number, true>>({})\r\n    return {\r\n        selectionConverter: useRef<(selectedItems: Record<number, true>) => ISecurityList[]>(null),\r\n        selectedItems,\r\n        onSelectedItemschanged: setSelectedItems,\r\n        symbolConverter: useRef<(symbols: string[]) => Record<number, true>>(null),\r\n    }\r\n}\r\nexport const WatchlistPicker = (props: { selectedItems: Record<number, true>, securitiesLoaded?: () => void, onSelectedItemschanged: (selectedItems: Record<number, true>) => void, selectionConverter: SelectionConverterRef, symbolConverter: MutableRefObject<((symbols: string[]) => Record<number, true>) | null> }) => {\r\n\r\n    const [searchText, setSearchText] = useState(\"\"),\r\n        { selectedItems } = props,\r\n        [data, setData] = useState<(Interface.ISecurityList | {})[]>([]),\r\n        [datasetKey, setDatasetKey] = useState(\"\"),\r\n        { securities: {\r\n            list: securities\r\n        } } = useSecuritiesList()\r\n\r\n    //    if (props.selectionConverter) {\r\n\r\n\r\n    //This is a all part of just getting done quickly.. need ot clean this up \r\n    useEffect(() => {\r\n        if (securities.length && props.securitiesLoaded) {\r\n            props.securitiesLoaded()\r\n        }\r\n\r\n    }, [securities.length, Boolean(props.securitiesLoaded)])\r\n    props.selectionConverter.current = securities.length ? (_selectedItems) => securities.filter((s) => _selectedItems[s.id]) : null;\r\n    props.symbolConverter.current = securities.length ? (_symbols) => {\r\n        const output: Record<number, true> = {}\r\n        securities.forEach((s) => {\r\n            if (_symbols.find((_s) => _s === s.symbol))\r\n                output[s.id] = true;\r\n        })\r\n        return output;\r\n    } : null\r\n    //}\r\n    //  else if (props.selectionConverter)\r\n    const delayRef = useRef(0);\r\n\r\n    const selectedItemCount = Object.keys(selectedItems).length;\r\n    useEffect(() => {\r\n        if (delayRef.current)\r\n            clearTimeout(delayRef.current);\r\n\r\n        delayRef.current = setTimeout(() => {\r\n\r\n            const items: (ISecurityList | {})[] = securities.filter((s, i) =>\r\n                (!searchText && (i < 25 || selectedItems[s.id])) ||\r\n                ((searchText.length >= 3 && new RegExp(searchText, \"gi\").test(s.security_name))) ||\r\n                (searchText.length && (new RegExp(searchText, \"gi\")).test(s.symbol))\r\n            ).sort((a, b) => {\r\n                if (selectedItems[a.id] && !selectedItems[b.id])\r\n                    return -1\r\n                else if (selectedItems[b.id] && !selectedItems[a.id])\r\n                    return 1\r\n                else {\r\n                    return (() => {\r\n\r\n                        if (searchText) {\r\n                            if (searchText.length <= 3) {\r\n                                const aStartsWith = new RegExp(\"^\" + searchText, \"gi\").test(a.symbol);\r\n                                const bStartsWith = new RegExp(\"^\" + searchText, \"gi\").test(b.symbol);\r\n\r\n                                if (aStartsWith && !bStartsWith)\r\n                                    return -1\r\n                                else if (!aStartsWith && bStartsWith)\r\n                                    return 1\r\n                                else\r\n                                    return a.symbol.localeCompare(b.symbol)\r\n\r\n                            }\r\n                            else\r\n                                return a.symbol.localeCompare(b.symbol)\r\n                        }\r\n                        else\r\n                            return 0\r\n                    })()\r\n\r\n\r\n\r\n                }\r\n\r\n\r\n                //? a.symbol.localeCompare(b.symbol) : \r\n                //                (selectedItems[a.id] ? -1 : -1)\r\n            });\r\n\r\n            const gap = Array.from({ length: numItemsPerRow - (items.length % numItemsPerRow) }, () => empty);\r\n            if (gap.length !== 4)\r\n                items.push(...gap);\r\n\r\n            setData(items)\r\n            setDatasetKey(searchText);\r\n        }, 333) as any;\r\n    }, [searchText, securities, selectedItems])\r\n\r\n\r\n\r\n    return <View\r\n        style={flex}\r\n    >\r\n        <View style={{ padding: 8 }}>\r\n            <KeyboardAvoidingInput\r\n                value={searchText}\r\n                displayButton={false}\r\n                numLines={1}\r\n                placeholder={'Searching...'}\r\n                setValue={setSearchText}\r\n            />\r\n        </View>\r\n        <View style={flex}>\r\n            <List\r\n                numColumns={numItemsPerRow}\r\n                data={data}\r\n                datasetKey={datasetKey ? datasetKey : data.filter(d => d !== empty).length}\r\n                renderItem={(i) => {\r\n                    return <SecurityCell\r\n                        item={i.item}\r\n                        isSelected={isSec(i.item) ? (selectedItems[i.item.id] || false) : false}\r\n                        onPressed={(isSelected) => {\r\n                            if (isSec(i.item)) {\r\n                                const selectedClone = { ...selectedItems };\r\n                                if (isSelected)\r\n                                    selectedClone[i.item.id] = true;\r\n                                else\r\n                                    delete selectedClone[i.item.id];\r\n\r\n\r\n                                props.onSelectedItemschanged(selectedClone)\r\n                                //setSelectedItems(selectedClone);\r\n                                return true\r\n                            }\r\n                            return false;\r\n                        }} />\r\n\r\n                }}\r\n                loadingItem={undefined} />\r\n        </View>\r\n    </View >\r\n}\r\n\r\n\r\nconst isSec = (item: SecOrEmpty): item is ISecurityList => {\r\n    return item !== empty;\r\n}\r\n\r\nconst SecurityCell = (props: { item: ISecurityList | {}, isSelected: boolean, onPressed: (isSelected: boolean) => boolean }) => {\r\n    const { item, onPressed, isSelected } = props;\r\n    const [innerSelected, setInnerSelected] = useState(isSelected)\r\n\r\n    return <Pressable\r\n        onPress={() => {\r\n            if (onPressed(!innerSelected)) {\r\n                setInnerSelected(!innerSelected);\r\n            }\r\n        }}\r\n        style={cellStyle}>\r\n        {isSec(item) ? <><View>\r\n            <Avatar shape='square' source={{ uri: item.logo_url }} size=\"large\" style={{ }} resizeMode={'contain'} />\r\n            {innerSelected && <View style={{ position: \"absolute\", width: \"40%\", aspectRatio: 1, zIndex: 50000, right: \"-10%\", bottom: \"-10%\" } as ViewStyle}>\r\n                <View style={{ backgroundColor: \"white\", position: \"absolute\", left: \"25%\", top: \"25%\", height: \"50%\", width: \"50%\" }} />\r\n                <Icon name=\"checkmark-circle-2\" fill=\"green\" style={{ height: \"100%\", width: \"100%\" }} />\r\n            </View>}\r\n        </View>\r\n            <Text>{item.symbol}</Text>\r\n        </> : null\r\n        }\r\n    </Pressable>\r\n}","/**\r\n * Learn more about Light and Dark modes:\r\n * https://docs.expo.io/guides/color-schemes/\r\n */\r\n\r\nimport { Text as DefaultText, View as DefaultView } from 'react-native';\r\n\r\nimport Colors from '../constants/Colors';\r\nimport useColorScheme from '../hooks/useColorScheme';\r\n\r\nexport function useThemeColor(\r\n  props: { light?: string; dark?: string },\r\n  colorName: keyof typeof Colors.light & keyof typeof Colors.dark\r\n) {\r\n  const theme = useColorScheme();\r\n  const colorFromProps = props[theme];\r\n\r\n  if (colorFromProps) {\r\n    return colorFromProps;\r\n  } else {\r\n    return Colors[theme][colorName];\r\n  }\r\n}\r\n\r\ntype ThemeProps = {\r\n  lightColor?: string;\r\n  darkColor?: string;\r\n};\r\n\r\nexport type TextProps = ThemeProps & DefaultText['props'];\r\nexport type ViewProps = ThemeProps & DefaultView['props'];\r\n\r\nexport function Text(props: TextProps) {\r\n  const { style, lightColor, darkColor, ...otherProps } = props;\r\n  const color = useThemeColor({ light: lightColor, dark: darkColor }, 'text');\r\n\r\n  return <DefaultText style={[{ color }, style]} {...otherProps} />;\r\n}\r\n\r\nexport function View(props: ViewProps) {\r\n  const { style, lightColor, darkColor, ...otherProps } = props;\r\n  const backgroundColor = useThemeColor({ light: lightColor, dark: darkColor }, 'background');\r\n\r\n  return <DefaultView style={[{ backgroundColor }, style]} {...otherProps} />;\r\n}\r\n","import { Icon, Text } from \"@ui-kitten/components\";\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\"\r\nimport { AppColors } from \"../../constants/Colors\";\r\nimport { bannerText, flex, fonts, paddView, sizes, thinBannerText } from \"../../style\";\r\nimport Analytics from '../../assets/analytics.svg'\r\nimport { SvgExpo } from \"../../components/SvgExpo\";\r\nimport { useEffect, useRef } from \"react\";\r\nimport { Animated } from \"react-native\";\r\nimport { View } from \"../../components/Themed\";\r\nimport { ElevatedSection } from \"../../components/Section\";\r\nimport { useLinkTo } from \"@react-navigation/native\";\r\nimport { CreateAccountProps } from \"./shared\";\r\nimport { Api } from \"@tradingpost/common/api\"\r\nimport React from \"react\";\r\n\r\n\r\nexport const AnalystStartSection = (props: CreateAccountProps) => {\r\n\r\n    const opacityAnim = useRef(new Animated.Value(0)).current,\r\n        linkTo = useLinkTo<any>();\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n\r\n    return <ScrollWithButtons\r\n        fillHeight\r\n        buttons={{\r\n            right: {\r\n                text: \"I'm An Analyst\",\r\n                onPress: async () => {\r\n                    const defaultSettings = {\r\n                        analyst: true,\r\n                        push_notifications: {\r\n                            mentions: true,\r\n                            upvotes: true,\r\n                            watchlist_changes: true,\r\n                        },\r\n                        portfolio_display: {\r\n                            performance: true,\r\n                            holdings: true,\r\n                            trades: true\r\n                        }\r\n                    }\r\n                    await Api.User.update(props.user.data.id, {\r\n                        settings: defaultSettings\r\n                    })\r\n                    linkTo(\"/create/analystinterest\");\r\n                }\r\n            },\r\n            left: {\r\n                text: \"Not Now\",\r\n                onPress: async () => {\r\n                    const defaultSettings = {\r\n                        analyst: false,\r\n                        push_notifications: {\r\n                            mentions: true,\r\n                            upvotes: true,\r\n                            watchlist_changes: true,\r\n                        },\r\n                        portfolio_display: {\r\n                            performance: false,\r\n                            holdings: false,\r\n                            trades: false\r\n                        }\r\n                    }\r\n                    await Api.User.update(props.user.data.id, {\r\n                        settings: defaultSettings\r\n                    })\r\n                    linkTo(\"/create/profilepicture\");\r\n                }\r\n            }\r\n        }}\r\n    >\r\n        <View style={[paddView, { justifyContent: \"center\" }]}>\r\n            <ElevatedSection title=\"\">\r\n                <Animated.View style={[{ opacity: opacityAnim }]}>\r\n                    <Text style={[thinBannerText]}>Are you a Market Analyst?</Text>\r\n                    <View style={{ padding: sizes.rem1 }}>\r\n                        <SvgExpo style={{ width:\"100%\", aspectRatio:1.5}}>\r\n                            <Analytics />\r\n                        </SvgExpo>\r\n                    </View>\r\n                    <Text style={[thinBannerText, { fontSize: fonts.medium }]}>Select Analyst if you actively post fundamental or technical research related to stocks, commodities, crypto, etc. and would like to bolster your content.</Text>\r\n                </Animated.View>\r\n            </ElevatedSection>\r\n        </View>\r\n    </ScrollWithButtons>\r\n}","import React, { ReactComponentElement, ReactElement, useEffect, useState } from \"react\";\r\nimport { Text, Pressable, TextStyle, View, ListRenderItem } from \"react-native\";\r\n// import { LinearGradient, SvgFromXml } from \"react-native-svg\";\r\nimport { AppColors } from \"../constants/Colors\";\r\n//import { Colors, Fader, Text, View } from \"react-native-ui-lib\";\r\nimport { fonts, row, sizes, elevated as elevatedView } from \"../style\";\r\nimport { List, ListProps } from \"./List\";\r\nimport { NoDataPanel } from \"./NoDataPanel\";\r\nimport Theme from '../theme-light.json'\r\n//TODO: needs to be re-named... itsm misleading\r\ntype RowFunction<T, R> = (value: any, key: (keyof T) | undefined, item: T, index: number) => R\r\n\r\ntype EntireRowFunction<T, R> = (item: T, index: number) => R\r\n\r\n\r\ninterface TableColumnProps {\r\n    alias?: string,\r\n    width?: number | string,\r\n    align?: \"left\" | \"right\" | undefined\r\n}\r\n//This about if yo ucan infer this in the future\r\ntype FieldElement<T> = (props: {\r\n    item: T,\r\n    index: number\r\n    style?: (TextStyle | undefined)[]\r\n} & TableColumnProps) => ReactElement;\r\n\r\n\r\n\r\nexport type ITableColumn<T> = {\r\n    field?: (keyof T) | FieldElement<T>,\r\n    style?: TextStyle\r\n    headerStyle?: TextStyle\r\n    dynamicStyle?: RowFunction<T, TextStyle>,\r\n    stringify?: RowFunction<T, string>\r\n} & TableColumnProps\r\n\r\nfunction ensureString<T>(item?: (keyof T) | FieldElement<T>): item is (keyof T) | undefined {\r\n    return typeof item === \"string\" || !item;\r\n}\r\n\r\n// //helper to create strongly typed table column definitions\r\n// export class TableColumn<T, K extends keyof T> implements ITableColumn<T>{\r\n//     field: K;\r\n//     width?: number;\r\n//     style?: TextStyle;\r\n//     toString?: ((value: any, key: keyof T, item: T, index: number) => string);\r\n//     constructor(field: K, props: Omit<ITableColumn<T>, \"field\" | \"toString\"> & { toString: (value: T[K], key: K, item: T, index: number) => string }) {\r\n//         this.field = field\r\n//         this.style = props.style;\r\n//         this.width = props.width;\r\n//         this.toString = props.toString\r\n//     }\r\n\r\n// }\r\n\r\n// export function makeTableColumn<T>(field: keyof T, props: //Pick<ITableColumn<T>, \"width\" | \"style\"|\"toString\"> &\r\n//     { toString?(value: T[typeof field], key: typeof field, item: T, index: number): string }\r\n\r\n// ): ITableColumn<T> {\r\n//     return {\r\n//         field,\r\n//         //width: props.width,\r\n//         //style: props.style,\r\n//         toString: props.toString as ((value: any, key: keyof T, item: T, index: number) => string)\r\n//     }\r\n// }\r\n\r\nexport const stringyDate = (dts?: string) => {\r\n    const v = dts ? new Date(dts) : new Date();\r\n    return `${v?.getMonth() + 1}/${v?.getDate()}/${v?.getFullYear().toString().substring(2, 4)}`\r\n}\r\n\r\n\r\nexport type TableProps<T> = {\r\n    maxPage?: number,\r\n    listKey?: string,\r\n    columns: ITableColumn<T>[],\r\n    elevated?: boolean,\r\n    nestedScrollEnabled?: boolean,\r\n    rowPressed?: EntireRowFunction<T, void>,\r\n    hideHeader?: boolean,\r\n    renderAuxItem?: ListRenderItem<T> | null | undefined\r\n} & ListProps<T>\r\n\r\nexport function Table<T>(\r\n    props: TableProps<T>) {\r\n\r\n    const\r\n        { data, columns, nestedScrollEnabled, elevated, rowPressed } = props,\r\n        columnStyle: Partial<Record<number, (TextStyle | undefined)[]>> = {},\r\n        headerStyle: Partial<Record<number, (TextStyle | undefined)[]>> = {},\r\n        headerAlias: Partial<Record<number, string>> = {},\r\n        columnDynamicStyle: Partial<Record<number, RowFunction<T, TextStyle>>> = {},\r\n        columnsToString: Partial<Record<number, RowFunction<T, string>>> = {};\r\n\r\n    columns.forEach((c, i) => {\r\n        columnStyle[i] = [{\r\n            fontSize: fonts.xSmall,\r\n            lineHeight: fonts.medium,\r\n            width: c.width,\r\n            flex: c.width === undefined ? 1 : undefined,\r\n            textAlign: c.align || \"center\",\r\n            marginLeft: c.align === \"left\" ? 0 : undefined\r\n\r\n        }, c.style,];\r\n\r\n        headerStyle[i] = [{\r\n            fontSize: fonts.small,\r\n            width: c.width,\r\n            flex: c.width === undefined ? 1 : undefined,\r\n            textAlign: c.align || \"center\",\r\n            color: Theme[\"color-info-800\"],\r\n            //paddingBottom: 16\r\n        }, c.headerStyle]\r\n\r\n        if (c.alias)\r\n            headerAlias[i] = c.alias;\r\n\r\n        if (c.dynamicStyle)\r\n            columnDynamicStyle[i] = c.dynamicStyle;\r\n\r\n        if (c.stringify)\r\n            columnsToString[i] = c.stringify;\r\n\r\n    })\r\n\r\n    return <List\r\n        maxPage={props.maxPage}\r\n        maxDisaplyCount={props.maxDisaplyCount}\r\n        maxDisaplyText={props.maxDisaplyText}\r\n        keyExtractor={props.keyExtractor}\r\n        listKey={props.listKey}\r\n        ListHeaderComponent={props.hideHeader ? undefined : () => {\r\n            return <View key={\"table_header\"} style={{ alignItems: \"stretch\" }}>\r\n                <View style={[row, { backgroundColor: \"white\" }]}>\r\n                    {columns.map((c, i) => {\r\n                        return <Text key={`header_${i}`} numberOfLines={1} style={headerStyle[i]} >{headerAlias[i] || c.field?.toString()}</Text>\r\n                    })}\r\n                </View>\r\n                {/**Was just for testing... **/}\r\n                <View style={{ height: 16 }}>\r\n                    {/* <Fader size={16} position={Fader.position.TOP} /> */}\r\n                </View>\r\n            </View>\r\n        }}\r\n        nestedScrollEnabled={nestedScrollEnabled}\r\n        data={data}\r\n        datasetKey={props.datasetKey}\r\n        noDataMessage={props.noDataMessage}\r\n        loadingItem={null}\r\n        renderItem={(info) => {\r\n            //return <View><Text>{JSON.stringify(info.item)}</Text></View>\r\n            return info.item ?\r\n                <Pressable\r\n                    onPress={rowPressed ? () => {\r\n                        rowPressed(info.item, info.index)\r\n                    } : undefined}\r\n                    key={`row_${info.index}`}\r\n                    style={[props.elevated ? elevatedView : { paddingVertical: 8, marginHorizontal: 4, overflow: 'visible' }]}>\r\n                    <View style={row}>\r\n                        {\r\n                            props.columns.map((c, i) => {\r\n                                const key = `column_${i}`,\r\n                                    colStyle = columnStyle[i];\r\n\r\n                                if (ensureString(c.field)) {\r\n                                    const toString = columnsToString[i],\r\n                                        dynamicStyle = columnDynamicStyle[i],\r\n                                        evaluatedStyle = dynamicStyle ? [...[colStyle || []], dynamicStyle(c.field ? info.item[c.field] : undefined, c.field, info.item, info.index)] : colStyle,\r\n                                        evaluatedValue = toString ? toString(c.field ? info.item?.[c.field] : undefined, c.field, info.item, info.index) : (c.field ? info.item?.[c.field] : undefined)\r\n                                    return <Text key={key} numberOfLines={1} style={evaluatedStyle} >{evaluatedValue}</Text>\r\n                                }\r\n                                else {\r\n                                    const FieldElem = c.field;\r\n                                    return <FieldElem key={key} item={info.item} index={info.index} width={c.width} alias={c.alias} style={colStyle} />\r\n                                }\r\n                            })\r\n                        }\r\n                    </View>\r\n                    {props.renderAuxItem && props.renderAuxItem(info)}\r\n                </Pressable> :\r\n                <Text>Loading...</Text>\r\n        }} />\r\n}","import {flex, sizes} from \"../style\";\r\n\r\nimport React, {useEffect, useRef, useState} from \"react\";\r\nimport {Animated, Pressable, Text, Alert, Platform} from \"react-native\";\r\nimport {Icon} from \"@ui-kitten/components\";\r\n\r\nimport {Api} from \"@tradingpost/common/api\";\r\nimport {Section} from \"./Section\";\r\nimport {Table} from \"./Table\";\r\nimport {AddButton, EditButton} from \"./AddButton\";\r\nimport {openBrowserAsync} from 'expo-web-browser';\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport {useFocusEffect, useNavigation} from \"@react-navigation/native\";\r\nimport {DirectBrokeragesType} from \"@tradingpost/common/brokerage/interfaces\";\r\n\r\n//@ts-ignore\r\nconst alertPolyfill = (title, description, options, extra) => {\r\n    const result = window.confirm([title, description].filter(Boolean).join('\\n'))\r\n\r\n    if (result) {\r\n        //@ts-ignore\r\n        const confirmOption = options.find(({style}) => style !== 'cancel')\r\n        confirmOption && confirmOption.onPress()\r\n    } else {\r\n        //@ts-ignore\r\n        const cancelOption = options.find(({style}) => style === 'cancel')\r\n        cancelOption && cancelOption.onPress()\r\n    }\r\n}\r\n\r\nconst alert = Platform.OS === 'web' ? alertPolyfill : Alert.alert;\r\nexport const LinkBrokerageComponent = () => {\r\n    const nav = useNavigation();\r\n    const opacityAnim = useRef(new Animated.Value(0)).current;\r\n    const [accounts, setAccounts] = useState<Awaited<ReturnType<typeof Api.User.extensions.getBrokerageAccounts> | null>>()\r\n    const intervalRef = useRef<any>();\r\n    const [needsRefresh, setNeedsRefresh] = useState<{}>();\r\n    const [brokerLink, setLink] = useState(\"\");\r\n\r\n    const openLink = async () => {\r\n        await Api.User.extensions.generateBrokerageLink(undefined).then(({link}) => {\r\n            setLink(link)\r\n        })\r\n        const browserName = \"finicity_auth\";\r\n        await openBrowserAsync(brokerLink, {\"windowName\": browserName});\r\n        clearInterval(intervalRef.current);\r\n\r\n        intervalRef.current = setInterval(async () => {\r\n            console.log(\"WTF\");\r\n            if (await AsyncStorage.getItem(\"auth-finicity-code\")) {\r\n                console.log(\"CODE HAS BEEN FOUND\");\r\n                setAccounts(await Api.User.extensions.getBrokerageAccounts())\r\n            }\r\n        }, 5000)\r\n    }\r\n\r\n    const removeAccount = async (accountId: number, brokerage: DirectBrokeragesType) => {\r\n        await Api.Brokerage.extensions.scheduleForDeletion({brokerage, accountId});\r\n        if (!accounts) return\r\n        setAccounts(accounts.filter(a => a.id !== accountId));\r\n    }\r\n\r\n    //cleanup\r\n    useEffect(() => {\r\n        AsyncStorage.removeItem(\"auth-finicity-code\");\r\n        return () => {\r\n            clearInterval(intervalRef.current);\r\n            AsyncStorage.removeItem(\"auth-finicity-code\");\r\n        }\r\n    }, [])\r\n\r\n\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n    }, [needsRefresh])\r\n\r\n    useFocusEffect(\r\n        React.useCallback(() => {\r\n            setAccounts(null);\r\n            Api.User.extensions.getBrokerageAccounts().then((r) => {\r\n                setAccounts(r);\r\n            });\r\n        }, [])\r\n    );\r\n\r\n    return (\r\n        <Section style={flex} title=\"Link Brokerage Account\" button={(buttonProps) => accounts?.length ? <EditButton\r\n            onPress={() => {\r\n                nav.navigate(\"BrokeragePicker\")\r\n            }}\r\n            height={buttonProps.height}\r\n            width={buttonProps.width}\r\n        /> : <AddButton\r\n            onPress={() => nav.navigate(\"BrokeragePicker\")}\r\n            height={buttonProps.height}\r\n            width={buttonProps.width}\r\n        />}>\r\n            <Table datasetKey={accounts?.map(a => a.id).join(\",\") || \"none\"}\r\n                   columns={[\r\n                       {alias: \"Brokerage\", field: \"broker_name\"},\r\n                       {alias: \"Account #\", field: \"account_number\"},\r\n                       {alias: \" \", field: \"remove\", width: '10%', align: 'left'}\r\n                   ]}\r\n                   data={accounts?.map(acc => {\r\n                       return {\r\n                           ...acc,\r\n                           remove: <Pressable\r\n                               onPress={() => {\r\n                                   return alert(\r\n                                       `Removing ${acc.broker_name} Account?`,\r\n                                       `Are you sure you want to remove this brokerage account?`,\r\n                                       [\r\n                                           {\r\n                                               text: \"Yes\",\r\n                                               onPress: async () => {\r\n                                                   await removeAccount(acc.id, acc.broker_name as DirectBrokeragesType)\r\n                                               }\r\n                                           },\r\n                                           {\r\n                                               text: \"No\"\r\n                                           }\r\n                                       ]\r\n                                   )\r\n\r\n                               }}>\r\n                               <Icon\r\n                                   fill={\"#E74C3C\"}\r\n                                   name={\"trash-outline\"}\r\n                                   style={{\r\n                                       height: sizes.rem1,\r\n                                       width: sizes.rem1,\r\n                                   }}\r\n                               />\r\n                           </Pressable>\r\n                       }\r\n                   })}\r\n                   noDataMessage=\"You have no linked accounts\"\r\n            />\r\n        </Section>)\r\n}","import React, { useState } from 'react';\r\nimport { Pressable, View } from 'react-native';\r\nimport { Button, Layout, Tooltip, Text } from '@ui-kitten/components';\r\nimport { InfoIcon } from '../images';\r\n\r\nexport const TooltipComponent = (props: {text: string}) => {\r\n\r\n  const [visible, setVisible] = useState(false);\r\n\r\n  const renderToggleButton = () => {\r\n    return (\r\n        <Button \r\n            appearance='ghost'\r\n            accessoryLeft={<InfoIcon height={24} width={24}  style={{ marginHorizontal: 0 }} />}\r\n            style={{paddingHorizontal: 0, paddingVertical: 0, minHeight: 0, minWidth: 0}}\r\n            onPress={() => setVisible(true)}>\r\n            {''}\r\n        </Button>\r\n\r\n  ) as React.ReactElement};\r\n  return (\r\n    <View style={{justifyContent: 'center',\r\n                    alignItems: 'flex-start',\r\n                    flex: 1\r\n                    }}>\r\n        <Tooltip\r\n            anchor={renderToggleButton}\r\n            style={{ translateY: 37,  translateX: -15, width: '70%', height: '130%'}}\r\n            backdropStyle={{backgroundColor: 'rgba(0, 0, 0, 0.5)'}}\r\n            placement={'right'}\r\n            visible={visible}\r\n            onBackdropPress={() => setVisible(false)}\r\n            >\r\n            <Text>{props.text}</Text>\r\n        </Tooltip>\r\n    </View>\r\n  );\r\n};","import React, { ReactElement } from \"react\";\r\nimport { Toggle } from \"@ui-kitten/components\";\r\nimport { Icon, Text } from \"@ui-kitten/components\";\r\nimport { View, Animated } from \"react-native\"\r\nimport { TooltipComponent } from \"./ToolTip\";\r\nimport { sizes } from \"../style\";\r\n\r\n\r\nexport function SwitchField(props: any) {\r\n    return <View style={props.viewStyle}>\r\n        <Toggle\r\n            style={props.toggleStyle}\r\n            checked={props.checked}\r\n            onChange={props.onChange} />\r\n        <View style={[props.toolTipText ? {display: 'flex'} : {display: 'none'}, {justifyContent: 'center', flex: 1}]}>\r\n            <TooltipComponent text={props.toolTipText}/>\r\n        </View>\r\n        <Text style={props.textStyle}>\r\n            {props.label}\r\n        </Text>\r\n    </View> \r\n    \r\n\r\n}\r\n\r\n","import { NavigationProp } from \"@react-navigation/native\";\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { ISubscriberList, IUserGet } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport { Text, Tab, TabView, Avatar } from \"@ui-kitten/components\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { View } from \"react-native\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { useAppUser } from \"../Authentication\";\r\nimport { DeleteButton, EditButton, SettingsButton } from \"../components/AddButton\";\r\nimport { Picker } from \"../components/Picker\";\r\nimport { PrimaryButton } from \"../components/PrimaryButton\";\r\nimport { ProfileButton } from \"../components/ProfileButton\";\r\nimport { SecondaryButton } from \"../components/SecondaryButton\";\r\nimport { ElevatedSection } from \"../components/Section\";\r\nimport { SwitchField } from \"../components/SwitchField\";\r\nimport { Table } from \"../components/Table\";\r\nimport { RootStackScreenProps } from \"../navigation/pages\";\r\nimport { paddView, sizes } from \"../style\";\r\nimport { useReadonlyEntity } from \"../utils/hooks\";\r\nimport { AwaitedReturn } from \"../utils/misc\";\r\n\r\nexport const SubscriptionScreen = (props: RootStackScreenProps<\"Subscription\">) => {\r\n    const [index, setIndex] = useState(0);\r\n    //const [] = useState<  >()\r\n    //  useEffect(()=>{},[])\r\n    const mySubscriptionsCall = Api.Subscriber.extensions.getBySubscriber,\r\n        mySubscribersCall = Api.Subscriber.extensions.getByOwner,\r\n        [subscriptions, setSubscriptions] = useState<AwaitedReturn<typeof mySubscriptionsCall>>(),\r\n        [subscribers, setSubscribers] = useState<AwaitedReturn<typeof mySubscribersCall>>(),\r\n        [buttonClick, setButtonClick] = useState(false);\r\n    const { loginState } = useAppUser();\r\n    const appUser = loginState?.appUser;\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                const subtionTask = mySubscriptionsCall();\r\n                const suberTask = mySubscribersCall();\r\n                const [subscriptions, subscribers] = await Promise.all([subtionTask, suberTask])\r\n                setSubscriptions(subscriptions);\r\n                setSubscribers(subscribers);\r\n            }\r\n            catch (ex) {\r\n                console.error(ex);\r\n            }\r\n        })()\r\n\r\n    }, [])\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                const subtionTask = mySubscriptionsCall();\r\n                const suberTask = mySubscribersCall();\r\n                const [subscriptions, subscribers] = await Promise.all([subtionTask, suberTask])\r\n                setSubscriptions(subscriptions);\r\n                setSubscribers(subscribers);\r\n            }\r\n            catch (ex) {\r\n                console.error(ex);\r\n            }\r\n        })()\r\n\r\n    }, [buttonClick])\r\n\r\n    return <View style={paddView}><ElevatedSection title=\"Manage Subscriptions\"\r\n        button={(p) => <SettingsButton onPress={() => {\r\n            if (appUser?.settings?.analyst) {\r\n                props.navigation.navigate(\"SubscriptionSettings\");\r\n            }\r\n        }} {...p} />}\r\n    ><TabView\r\n        indicatorStyle={{\r\n            marginTop: 26\r\n        }} style={{ marginVertical: sizes.rem0_5 }} selectedIndex={index} onSelect={appUser?.settings?.analyst ? setIndex : undefined}>\r\n            <Tab title=\"Subscriptions\">\r\n                <Table\r\n                    rowPressed={(r) => {\r\n                        props.navigation.navigate(\"Profile\", {\r\n                            userId: r.subscription?.[0].user_id\r\n                        })\r\n                    }}\r\n                    data={subscriptions}\r\n                    columns={\r\n                        [\r\n                            {\r\n                                headerStyle: {\r\n                                    height: 20,\r\n                                    width: 20,\r\n                                    flex: 0,\r\n                                    flexBasis: 22\r\n                                },\r\n                                alias: \" \",\r\n                                field: (item) => {\r\n                                    const user = item.item.subscription[0].user[0];\r\n                                    return <ProfileButton userId={user.id} size={20} profileUrl={user.profile_url || \"\"} />\r\n                                }\r\n                            },\r\n                            {\r\n                                alias: \"Analyst\",\r\n                                align: \"left\",\r\n                                field: \"subscription\",\r\n                                style: {\r\n                                    paddingLeft: 4\r\n                                },\r\n                                stringify: (k: ISubscriberList[\"subscription\"]) => {\r\n                                    return '@' + k[0].user[0].handle\r\n                                }\r\n                            },\r\n                            {\r\n                                alias: \"Cost\",\r\n                                align: \"left\",\r\n                                field: \"subscription\",\r\n                                headerStyle: {\r\n                                    textAlign: 'center'\r\n                                },\r\n                                style: {\r\n                                    textAlign: 'center',\r\n                                    //paddingLeft: 6\r\n                                },\r\n                                stringify: (k: ISubscriberList[\"subscription\"]) => {\r\n                                    return String(String(k[0].cost) === '$0.00' ? 'Free' : k[0].cost)\r\n                                }\r\n                            },\r\n                            {\r\n                                alias: \"Since\",\r\n                                field: \"start_date\",\r\n                                stringify: (k: ISubscriberList[\"start_date\"]) => {\r\n                                    return new Date(k).toLocaleDateString();\r\n                                }\r\n                            }\r\n                        ]\r\n                    }\r\n                />\r\n            </Tab>\r\n            <Tab title=\"Subscribers\">\r\n                <Table\r\n                    rowPressed={(r) => {\r\n                        props.navigation.navigate(\"Profile\", {\r\n                            userId: r.subscription?.[0].user_id\r\n                        })\r\n                    }}\r\n                    data={subscribers}\r\n                    columns={\r\n                        [\r\n                            {\r\n                                headerStyle: {\r\n                                    height: 20,\r\n                                    width: 20,\r\n                                    flex: 0,\r\n                                    flexBasis: 22\r\n                                },\r\n                                alias: \" \",\r\n                                field: (item) => {\r\n                                    const user = item.item.user[0];\r\n                                    return <ProfileButton userId={user.id} size={20} profileUrl={user.profile_url || \"\"} />\r\n                                }\r\n                            },\r\n                            {\r\n                                alias: \"Subscriber\",\r\n                                align: \"left\",\r\n                                field: \"user\",\r\n                                style: {\r\n                                    paddingLeft: 4\r\n                                },\r\n                                stringify: (k: ISubscriberList[\"user\"]) => {\r\n                                    return '@' + k[0].handle\r\n                                }\r\n                            },\r\n                            {\r\n                                alias: \"Status\",\r\n                                field: (item) => {\r\n                                    if (item.item.approved) {\r\n                                        return <Text>Approved</Text>;\r\n                                    }\r\n                                    else {\r\n                                        return <SecondaryButton\r\n                                            children={'Approve'}\r\n                                            style={{\r\n                                                backgroundColor: \"#35A265\", borderColor: \"#35A265\",\r\n                                                minHeight: 26,\r\n                                                height: 26,\r\n                                                minWidth: 70,\r\n                                                width: 70\r\n                                            }}\r\n                                            onPress={async () => {\r\n                                                item.item.approved = true;\r\n                                                await Api.Subscriber.update(item.item.id, {\r\n                                                    approved: true\r\n                                                })\r\n                                                setButtonClick(!buttonClick);\r\n                                            }}\r\n                                        />\r\n                                    }\r\n                                },\r\n                                style: { color: '#35A265' }\r\n                                /*\r\n                                stringify: (k: ISubscriberList[\"approved\"]) => {\r\n                                    if (k) {\r\n                                        return 'Approved'\r\n                                    }\r\n                                    else {\r\n\r\n                                        return ''\r\n                                    }\r\n                                }\r\n                                */\r\n                            },\r\n                            {\r\n                                alias: \"Since\",\r\n                                field: \"start_date\",\r\n                                stringify: (k: ISubscriberList[\"start_date\"]) => {\r\n                                    return new Date(k).toLocaleDateString();\r\n                                }\r\n                            },\r\n                            {\r\n                                headerStyle: {\r\n                                    flexGrow: 0,\r\n                                    flexShrink: 0,\r\n                                    flexBasis: '9%'\r\n\r\n                                },\r\n                                alias: ' ',\r\n                                field: (item) => {\r\n                                    return <DeleteButton\r\n                                        onPress={async () => {\r\n                                            await Api.Subscriber.extensions.removeSubscription({\r\n                                                userId: item.item.user_id,\r\n                                                subscriptionId: item.item.subscription_id\r\n                                            })\r\n                                            setButtonClick(!buttonClick);\r\n                                        }}\r\n                                        width={26}\r\n                                        //height={'auto'}\r\n                                        color={'#EC5328'}\r\n                                    />\r\n                                },\r\n                                style: { marginLeft: -10 }\r\n                            }\r\n                        ]\r\n                    }\r\n                />\r\n\r\n            </Tab>\r\n        </TabView>\r\n    </ElevatedSection>\r\n    </View>\r\n}\r\n\r\nexport const SubscriptionSettingsScreen = (props: RootStackScreenProps<\"SubscriptionSettings\">) => {\r\n\r\n\r\n    return <View style={paddView}>\r\n        <SubscriptionSettingsView navigation={props.navigation} />\r\n    </View>\r\n}\r\n\r\nexport const SubscriptionSettingsView = (props: { navigation?: NavigationProp<any>, submitRef?: React.MutableRefObject<{ submit: () => Promise<void> }> }) => {\r\n\r\n    const call = Api.Subscription.extensions.getByUserId;\r\n    const subscription = useReadonlyEntity<AwaitedReturn<typeof call>>(null)\r\n    const toast = useToast();\r\n    //const [approveSubs, setApproveSubs] = useState(subscription.data?.settings.approve_new === undefined ? false : subscription.data?.settings.approve_new);\r\n\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                subscription.resetData(await call());\r\n            }\r\n            catch (ex: any) {\r\n                toast.show(ex.message)\r\n            }\r\n        })()\r\n    }, [])\r\n\r\n    const submit = async () => {\r\n        if (subscription.data?.id) {\r\n            await Api.Subscription.update(subscription.data.id, {\r\n                cost: subscription?.data?.cost || 0,\r\n                settings: subscription.data.settings\r\n            })\r\n        }\r\n        else {\r\n            await Api.Subscription.insert({\r\n                name: \"Basic Subscription\",\r\n                cost: subscription?.data?.cost || 0,\r\n                settings: subscription?.data?.settings || false,\r\n                user_id: ''\r\n            })\r\n        }\r\n        props.navigation?.goBack();\r\n    };\r\n    if (props.submitRef)\r\n        props.submitRef.current.submit = submit;\r\n\r\n    return <ElevatedSection title=\"Primary Subscription\">\r\n        <Text style={{ marginVertical: sizes.rem1 }}>\r\n            Set a cost associated with subscribing to your account.\r\n        </Text>\r\n        <Picker\r\n            style={{ marginBottom: sizes.rem1 }}\r\n            value={subscription?.data?.cost || 0}\r\n            onSelect={(item) => {\r\n                subscription.update({\r\n                    cost: item.row ? Math.pow(5, item.row) : 0\r\n                })\r\n            }}\r\n            items={[...Array.from({ length: 1 }).map((v, i) => {\r\n                const cost = i ? Math.pow(5, i) : 0;\r\n                return {\r\n                    label: cost ? `${cost}/month` : \"Free\",\r\n                    value: cost\r\n                }\r\n            })]}\r\n        />\r\n        <SwitchField label='Approve New Subscribers?'\r\n            checked={subscription.data?.settings.approve_new}\r\n            onChange={() => { subscription.update({ settings: { approve_new: !subscription.data?.settings.approve_new } }) }}\r\n            viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', padding: 4, paddingVertical: 30 }}\r\n            toggleStyle={{}}\r\n            textStyle={{ fontSize: 16, fontWeight: '500', alignSelf: 'center' }} />\r\n        {/* Codes will go here   */}\r\n        {!props.submitRef?.current && <PrimaryButton disabled={!subscription.hasChanged} onPress={submit} >Apply</PrimaryButton>}\r\n    </ElevatedSection>\r\n}","import React from \"react\"\r\nimport { View, Text } from \"react-native\"\r\nimport { HtmlViewProps } from \"./HtmlView.interface\"\r\n\r\nexport const HtmlView = (props: HtmlViewProps) => {\r\n    return <View style={props.style}><iframe\r\n        //marginwidth=\"0\"\r\n        //marginheight=\"0\"\r\n        //hspace=\"0\"\r\n        //vspace=\"0\"\r\n        //frameborder=\"0\"\r\n        name=\"_MYFIRAME\" scrolling=\"no\"\r\n        src={props.isUrl ? props.children : undefined}\r\n        srcDoc={!props.isUrl ? props.children : undefined}\r\n        style={{ position: \"absolute\", top: 0, bottom: 0, height: \"100%\", width: \"100%\", borderWidth: 0 }} />\r\n    </View>\r\n}","import React, { useLayoutEffect, useState } from 'react';\r\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\r\nimport { Tab, TabView } from '@ui-kitten/components';\r\nimport { useReadonlyEntity } from '../utils/hooks'\r\nimport { AccountInfoSection } from './create_account/AccountInfoSection';\r\nimport { InvestmentInterestSection } from './create_account/InvestmentInterestSection';\r\nimport { YourContent } from './create_account/YourContentSection';\r\nimport { useData } from '../lds';\r\nimport { IUserGet } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport { useToast, } from 'react-native-toast-notifications'\r\nimport { BasicInfoSection } from './create_account/BasicInfoSection';\r\nimport { ProfileIconSection } from './create_account/ProfileIconSection';\r\nimport { PickWatchlistSection } from './create_account/PickWatchlistSection';\r\nimport { useAppUser } from '../Authentication';\r\nimport { AnalystStartSection } from './create_account/AnalystStartSection';\r\nimport { LinkBrokerageSection } from './create_account/LinkBrokerageSection';\r\nimport { AppColors } from '../constants/Colors';\r\nimport { SubscriptionCostSection } from './create_account/SubscrpitionCostSection';\r\nimport { Log } from '../utils/logger';\r\nimport { PrivacyScreen } from './create_account/PrivacyScreen';\r\nimport { TermsScreen } from './create_account/TermsScreen';\r\n\r\nexport const screens = {\r\n    'LoginInfo': AccountInfoSection,\r\n    'BasicInfo': BasicInfoSection,\r\n    'Watchlist': PickWatchlistSection,\r\n    'AnalystStart': AnalystStartSection,\r\n    'AnalystInterest': InvestmentInterestSection,\r\n    'LinkBrokerage': LinkBrokerageSection,\r\n    'AddClaims': YourContent,\r\n    'SubscriptionCost': SubscriptionCostSection,\r\n    'ProfilePicture': ProfileIconSection,\r\n    'Terms': TermsScreen,\r\n    'Privacy':PrivacyScreen\r\n}\r\n\r\n\r\nconst screenKeys = Object.keys(screens);\r\n\r\n\r\n\r\nexport default (props: any) => {\r\n    /**\r\n     * State & hooks\r\n     */\r\n    const { loginState } = useAppUser(\"CREATE_ACCOUNT_SCREEN\"),\r\n        appUser = loginState?.appUser, userState = loginState?.setupStatus,\r\n        user = useReadonlyEntity<IUserGet>(appUser || {\r\n            profile_url: \"\",\r\n            first_name: \"\",\r\n            last_name: \"\",\r\n            handle: \"\",\r\n            email: \"\",\r\n            bio: \"\",\r\n            claims: [],\r\n            display_name: \"\",\r\n            id: \"\",\r\n            tags: [],\r\n            subscription: null as any,\r\n        }),\r\n        toast = useToast()\r\n\r\n    /** Updates user data is the current user changes **/\r\n    useLayoutEffect(() => {\r\n        if (appUser)\r\n            user.resetData(appUser);\r\n    }, [appUser]);\r\n\r\n    /**\r\n     * Sub Screen resolution based on parameters \r\n     */\r\n    let subScreen: keyof typeof screens;\r\n\r\n\r\n    if (props?.route?.params?.params?.screen)\r\n        subScreen = props?.route?.params?.params?.screen\r\n\r\n    else if (userState?.needsSettings)\r\n        subScreen = \"AnalystStart\"\r\n    else if (userState?.needsAnalystSettings)\r\n        subScreen = \"AnalystInterest\"\r\n    else if (loginState?.loginResult)\r\n        subScreen = \"BasicInfo\"\r\n    else subScreen = \"LoginInfo\"\r\n\r\n    let resolvedIndex = screenKeys.findIndex((k) => k === subScreen);\r\n    if (resolvedIndex < 0) {\r\n        resolvedIndex = 0;\r\n        Log.error(new Error(`Invalid create subscreen key :'${subScreen}'. Defaulting to index 0`));\r\n    }\r\n\r\n\r\n\r\n\r\n    const caProps = {\r\n        user,\r\n        toastMessage: (msg: string, delay: number | undefined) => {\r\n            toast.show(msg, {\r\n                duration: delay,\r\n                placement: \"top\"\r\n            });\r\n        }\r\n    }\r\n\r\n    const insets = useSafeAreaInsets();\r\n\r\n    return <TabView\r\n        style={{\r\n            paddingTop: insets.top / 2,\r\n            backgroundColor: AppColors.background,\r\n            flexGrow: 1,\r\n            maxHeight: \"100%\",\r\n        }}\r\n        swipeEnabled={false}\r\n        selectedIndex={resolvedIndex}\r\n        indicatorStyle={{\r\n            height: 0\r\n        }}\r\n        tabBarStyle={{\r\n            height: 0,\r\n            padding: 0,\r\n            paddingBottom: 0,\r\n            paddingTop: 0\r\n        }}\r\n        shouldLoadComponent={(index) => index === resolvedIndex}\r\n    >\r\n        {screenKeys.map((v, i) => {\r\n            const Screen = screens[screenKeys[i] as keyof typeof screens];\r\n            return <Tab key={\"TAB_\" + i}>\r\n                <Screen {...caProps} />\r\n            </Tab>\r\n        })}\r\n    </TabView>\r\n\r\n\r\n}\r\n\r\n","import React, { useState, useRef, useEffect, RefObject, useMemo } from \"react\";\r\nimport { Alert, TouchableOpacity, Image, ImageStyle, ViewStyle, View, Animated } from \"react-native\";\r\n//import { Navigation } from \"react-native-navigation\";\r\n//import { Nav } from '@react-navigation/native'\r\nimport { CheckBox, Input, Text, } from \"@ui-kitten/components\";\r\n//import { signOut, getStoredCreds, CreateAuth0User, UpdateUserProfile, signInStoredCreds } from \"../../apis/Authentication\";\r\nimport { ButtonField } from \"../../components/ButtonField\";\r\nimport { IconifyIcon } from \"../../components/IconfiyIcon\";\r\nimport { Section } from \"../../components/Section\";\r\nimport { TextField, ITextField } from \"../../components/TextField\";\r\nimport { bannerText, flex, sizes, textInputWiz } from \"../../style\";\r\nimport { bindTextInput, IEntity, useReadonlyEntity } from \"../../utils/hooks\";\r\nimport { isRequired, isValidEmail, isAlphaNumeric } from \"../../utils/validators\";\r\nimport { CreateAccountProps, sideMargin } from \"./shared\";\r\n\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\";\r\nimport { useData } from \"../../lds\";\r\nimport { Label } from \"../../components/Label\";\r\nimport { TBI } from \"../../utils/misc\";\r\nimport { AppColors } from \"../../constants/Colors\";\r\nimport Auth from '@tradingpost/common/api/entities/static/AuthApi'\r\nimport UserApi from '@tradingpost/common/api/entities/apis/UserApi'\r\nimport { IUserGet } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport { useAppUser } from \"../../Authentication\";\r\nimport { useLinkTo, useNavigation } from \"@react-navigation/native\";\r\nimport { registerDeviceForNotifications } from \"../../utils/notifications\";\r\nimport { Link } from \"../../components/Link\";\r\n\r\n\r\ntype FieldRefs = {\r\n    first: RefObject<ITextField>,\r\n    last: RefObject<ITextField>,\r\n    username: RefObject<ITextField>\r\n}\r\n\r\nexport function BasicInfoSection(props: CreateAccountProps) {\r\n    const\r\n        nav = useNavigation(),\r\n        [lockButtons, setLockButtons] = useState(false),\r\n        opacityAnim = useRef(new Animated.Value(0)).current,\r\n        { signIn, loginState } = useAppUser(),\r\n        appUser = loginState?.appUser,\r\n        [agreeToTerms, setAgreeToTerms] = useState(false),\r\n        [agreeToPrivacy, setAgrreeToPrivacy] = useState(false),\r\n        refs: FieldRefs = {\r\n            first: useRef<ITextField>(null),\r\n            last: useRef<ITextField>(null),\r\n            username: useRef<ITextField>(null),\r\n        },\r\n        linkTo = useLinkTo<any>(),\r\n        { value: firstTime, setValue: setFirstTime } = useData('firstTime'),\r\n        buttonConfig = {\r\n            locked: lockButtons,\r\n            left: {\r\n                text: \"Sign Out\",\r\n                onPress: async () => {\r\n                    Auth.signOut();\r\n                    nav.goBack();\r\n                }\r\n            }\r\n            // : (props.saveOnly ? undefined : {\r\n            //     text: \"Cancel\",\r\n            //     onPress: () => props.navigation.goBack()//Navigation.pop(props.componentId)\r\n            // })\r\n            ,\r\n            right: {\r\n                text: \"Next\",\r\n                onPress: async () => {\r\n                    setLockButtons(true);\r\n                    const errors: string[] = [];\r\n                    try {\r\n                        for (const k in refs) {\r\n                            const val = refs[k as keyof typeof refs];\r\n                            if (val.current && !val.current.validate()) {\r\n                                errors.push(val.current.errorMessage || \"\");\r\n                            }\r\n                        }\r\n                        if (errors.length) {\r\n\r\n                            errors.unshift(\"Please fix the following issues:\");\r\n                            props.toastMessage(errors.join(\"\\r\\n\"));\r\n\r\n                            setLockButtons(false);\r\n                        } else {\r\n                            setFirstTime(true);\r\n                            const { token } = await Auth.createUser(props.user.data.first_name, props.user.data.last_name, props.user.data.handle);\r\n                            await signIn(\"\", token);\r\n                            await registerDeviceForNotifications();\r\n                            linkTo('/create/watchlist')\r\n                            //props.next();                            \r\n                            //props.navigation.navigate(\"Root\");\r\n                            //setLockButtons(false);\r\n                        }\r\n\r\n                    } catch (ex: any) {\r\n                        if (ex.json) {\r\n                            props.toastMessage(`${ex.json.name}:\\r\\n${ex.json.policy || ex.json.description}`);\r\n                        } else if (typeof ex.message === \"string\") {\r\n                            props.toastMessage(ex.message);\r\n                        } else props.toastMessage(JSON.stringify(ex.message));\r\n                        setLockButtons(false);\r\n                    }\r\n\r\n                }\r\n            }\r\n        }\r\n\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n\r\n\r\n    return <ScrollWithButtons\r\n        buttons={buttonConfig}>\r\n        <View>\r\n            <View style={[flex, { margin: sideMargin }]}>\r\n                <Animated.Text\r\n                    style={[bannerText, { opacity: opacityAnim }]}>\r\n                    Let's keep setting up your account\r\n                </Animated.Text>\r\n                <TextField\r\n                    style={textInputWiz}\r\n                    textInputRef={refs.first}\r\n                    errorMessage={\"`First Name` is required\"}\r\n                    validate={isRequired}\r\n                    validateOnChange placeholder='First Name'\r\n                    returnKeyType=\"none\" {...bindTextInput(props.user, \"first_name\", null)}\r\n                />\r\n                <TextField\r\n                    style={textInputWiz}\r\n                    textInputRef={refs.last}\r\n                    errorMessage={\"`Last Name` is required\"}\r\n                    validate={isRequired}\r\n                    validateOnChange placeholder='Last Name'\r\n                    returnKeyType=\"none\" {...bindTextInput(props.user, \"last_name\", null)}\r\n                />\r\n                <TextField\r\n                    style={textInputWiz}\r\n                    textInputRef={refs.username}\r\n                    errorMessage={\"`Username` is required\"}\r\n                    validate={isRequired}\r\n                    validateOnChange placeholder='Username'\r\n                    returnKeyType=\"none\" {...bindTextInput(props.user, \"handle\", null)}\r\n                />\r\n            </View>\r\n        </View>\r\n    </ScrollWithButtons>\r\n}\r\n","import React, { useRef, useEffect, RefObject, useState } from \"react\";\r\nimport { View, Animated, Pressable } from \"react-native\";\r\n//import { Navigation } from \"react-native-navigation\";\r\n//import { Nav } from '@react-navigation/native'\r\nimport { Avatar, Icon, Input, Text, } from \"@ui-kitten/components\";\r\n//import { signOut, getStoredCreds, CreateAuth0User, UpdateUserProfile, signInStoredCreds } from \"../../apis/Authentication\";\r\nimport { TextField, ITextField } from \"../../components/TextField\";\r\nimport { bannerText, flex, noMargin, paddView, sizes, textInputWiz, thinBannerText } from \"../../style\";\r\nimport { CreateAccountProps, sideMargin } from \"./shared\";\r\n\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\";\r\n\r\nimport WatchlistApi from '@tradingpost/common/api/entities/apis/WatchlistApi'\r\nimport { SvgExpo } from \"../../components/SvgExpo\";\r\nimport AnalyzeImage from '../../assets/analyze2.svg'\r\nimport { useWatchlistPicker, WatchlistPicker } from \"../../components/WatchlistPicker\";\r\nimport { ElevatedSection } from \"../../components/Section\";\r\nimport { useLinkTo, useNavigation } from \"@react-navigation/native\";\r\nimport { RootStackScreenProps } from \"../../navigation/pages\";\r\n\r\ntype FieldRefs = {\r\n    first: RefObject<ITextField>,\r\n    last: RefObject<ITextField>,\r\n    username: RefObject<ITextField>\r\n}\r\n\r\n\r\nexport function PickWatchlistSection(props: CreateAccountProps) {\r\n    const nav = useNavigation<RootStackScreenProps<\"Create\">[\"navigation\"]>();\r\n    const\r\n        [lockButtons, setLockButtons] = useState(false),\r\n        opacityAnim = useRef(new Animated.Value(0)).current,\r\n        { selectionConverter: converterRef, selectedItems, onSelectedItemschanged: setSelectedItems, symbolConverter } = useWatchlistPicker(),\r\n        linkTo = useLinkTo<any>(),\r\n        buttonConfig = {\r\n            locked: lockButtons,\r\n            left: {\r\n                text: \"Not Now\",\r\n                onPress: () => {\r\n                    linkTo('/create/analyststart');\r\n\r\n                }\r\n            },\r\n            right: {\r\n                text: \"Apply\",\r\n                onPress: async () => {\r\n                    if (!Object.keys(selectedItems).length) {\r\n                        props.toastMessage(\"Please select at least one security of interest\");\r\n                    }\r\n                    else {\r\n                        setLockButtons(true);\r\n                        try {\r\n                            await WatchlistApi.insert({\r\n                                items: (converterRef.current ? converterRef.current(selectedItems) : []).map((s) => ({\r\n                                    symbol: s.symbol\r\n                                })),\r\n                                name: \"Primary Watchlist\",\r\n                                type: \"primary\" //primary | private | public \r\n                            })\r\n                            linkTo('/create/analyststart');\r\n                        }\r\n                        catch (ex: any) {\r\n                            props.toastMessage(ex.message);\r\n                            setLockButtons(false);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 1500,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n\r\n\r\n    return <ScrollWithButtons\r\n        fillHeight\r\n        buttons={buttonConfig}\r\n\r\n    >\r\n        <View style={paddView}>\r\n            <ElevatedSection title=\"\" style={[flex, noMargin]}>\r\n                <Animated.View style={{ opacity: opacityAnim }}>\r\n                    <Pressable onPress={() => {\r\n                        nav.navigate(\"OverlayModal\");\r\n                    }}><Text\r\n                        style={[thinBannerText, { marginVertical: sizes.rem0_5 }]}>\r\n                            Help us get to know you.\r\n                        </Text>\r\n                    </Pressable>\r\n                    <SvgExpo style={{ width: \"100%\", aspectRatio: 1.5 }}>\r\n                        <AnalyzeImage />\r\n                    </SvgExpo>\r\n                    <Text\r\n                        style={[bannerText, { marginHorizontal: 0, marginVertical: sizes.rem0_5 }]}>\r\n                        Pick a few companies to help us tailor to your interests\r\n                    </Text>\r\n                </Animated.View>\r\n\r\n                <WatchlistPicker\r\n                    selectionConverter={converterRef}\r\n                    selectedItems={selectedItems}\r\n                    symbolConverter={symbolConverter}\r\n                    onSelectedItemschanged={(_selectedItems) => {\r\n                        setSelectedItems(_selectedItems)\r\n                        //TODO:::: need to put this logic back in \r\n                        // if (selectedItemCount === 5 && isSelected) {\r\n                        //     props.toastMessage(\"You can only select up to 5 companies\");\r\n                        //     return false;\r\n                        // }\r\n                        // else \r\n                        // return false;\r\n                    }}\r\n                />\r\n            </ElevatedSection>\r\n        </View>\r\n    </ScrollWithButtons>\r\n}\r\n\r\n","import { Icon, Text } from \"@ui-kitten/components\";\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\"\r\nimport { AppColors } from \"../../constants/Colors\";\r\nimport { bannerText, flex, paddView, paddViewWhite, sizes, thinBannerText } from \"../../style\";\r\nimport { CreateAccountProps } from \"./shared\"\r\nimport { Bank } from '../../images'\r\nimport { SvgExpo } from \"../../components/SvgExpo\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { Animated, Pressable } from \"react-native\";\r\nimport { View } from \"../../components/Themed\";\r\nimport { ElevatedSection, Section } from \"../../components/Section\";\r\nimport { useLinkTo } from \"@react-navigation/native\";\r\nimport { LinkBrokerageComponent } from '../../components/LinkBrokerageComponent';\r\n\r\nexport const LinkBrokerageSection = (props: CreateAccountProps) => {\r\n\r\n    const opacityAnim = useRef(new Animated.Value(0)).current;\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n\r\n    const linkTo = useLinkTo<any>()\r\n    return <ScrollWithButtons\r\n        fillHeight\r\n        buttons={{\r\n            right: {\r\n                text: \"I'm Done Linking Accounts\",\r\n                onPress: () => {\r\n                    linkTo('/create/addclaims')\r\n                }\r\n            }\r\n        }}\r\n    >\r\n        <Animated.View style={[paddView, { opacity: opacityAnim }]}>\r\n            <ElevatedSection title={\"\"} style={flex}>\r\n                <Text style={[thinBannerText]}>Link Your Brokerage Accounts.</Text>\r\n                <View style={[{ padding: sizes.rem1 }, flex]}>\r\n                    <Bank />\r\n                </View>\r\n                <Text style={{ marginVertical: sizes.rem1 }}>TradingPost links directly with your bank accounts to ....</Text>\r\n                <View style={flex}> \r\n                    <LinkBrokerageComponent />\r\n                </View>\r\n                \r\n            </ElevatedSection>\r\n        </Animated.View>\r\n    </ScrollWithButtons >\r\n}","import { useLinkTo } from \"@react-navigation/native\";\r\nimport React from \"react\";\r\nimport { View } from \"react-native\";\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\";\r\nimport { YourContentComponent } from \"../../components/YourContentComponent\";\r\nimport { AppColors } from \"../../constants/Colors\";\r\n\r\n//import { claimPlatform, createPlatform, Platform } from \"../../apis/UserApi\"\r\n//import { AmiraError } from \"../../AmiraError\"\r\n\r\nexport function YourContent() {\r\n    const linkTo = useLinkTo<any>()\r\n    return (\r\n        <ScrollWithButtons\r\n            fillHeight\r\n            buttons={{\r\n                right: {\r\n                    text: \"I'm Done Linking Accounts\",\r\n                    onPress: () => {\r\n                        linkTo('/create/subscriptioncost')\r\n                    }\r\n                }\r\n            }}\r\n        >\r\n        <YourContentComponent />\r\n    </ScrollWithButtons>\r\n    )\r\n}\r\n\r\n","import { Icon, Text } from \"@ui-kitten/components\";\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\"\r\nimport { AppColors } from \"../../constants/Colors\";\r\nimport { bannerText, flex, paddView, paddViewWhite, sizes, thinBannerText } from \"../../style\";\r\nimport { CreateAccountProps } from \"./shared\"\r\nimport Bank from '../../assets/bank.svg'\r\nimport { SvgExpo } from \"../../components/SvgExpo\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { Animated, Pressable } from \"react-native\";\r\nimport { View } from \"../../components/Themed\";\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { ElevatedSection, Section } from \"../../components/Section\";\r\nimport { Table } from \"../../components/Table\";\r\nimport { AddButton, EditButton } from \"../../components/AddButton\";\r\nimport { openBrowserAsync } from 'expo-web-browser';\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useLinkTo } from \"@react-navigation/native\";\r\nimport { SubscriptionSettingsScreen, SubscriptionSettingsView } from \"../SubscriptionScreen\";\r\n\r\nexport const SubscriptionCostSection = (props: CreateAccountProps) => {\r\n    // useEffect(() => {\r\n    //     Animated.timing(\r\n    //         opacityAnim,\r\n    //         {\r\n    //             delay: 0.75,\r\n    //             toValue: 1,\r\n    //             duration: 2000,  \r\n    //             useNativeDriver: true\r\n    //         }).start();\r\n    // }, [])\r\n    const submitRef = useRef<{ submit: () => Promise<void> }>({ submit: async () => { } });\r\n    const linkTo = useLinkTo();\r\n    return <ScrollWithButtons\r\n        fillHeight\r\n        buttons={{\r\n            right: {\r\n                text: \"Apply Subscription\",\r\n                onPress: async () => {\r\n                    await submitRef.current.submit();\r\n                    linkTo('/create/profilepicture')\r\n                }\r\n            }\r\n        }}\r\n    >\r\n        <View style={[paddView,{alignItems:\"center\", alignContent:\"center\"}]}>\r\n            <SubscriptionSettingsView submitRef={submitRef} />\r\n        </View>\r\n    </ScrollWithButtons >\r\n}","import { Icon, Text } from \"@ui-kitten/components\";\r\nimport { useEffect, useRef } from \"react\";\r\nimport { Animated, Pressable, View } from \"react-native\";\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\"\r\nimport { AppColors } from \"../../constants/Colors\";\r\nimport { bannerText, sizes, thinBannerText } from \"../../style\";\r\nimport { CreateAccountProps, sideMargin } from \"./shared\"\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { ProfileButton } from \"../../components/ProfileButton\";\r\nimport { ElevatedSection } from \"../../components/Section\";\r\nimport { useData } from \"../../lds\";\r\nimport { useLinkTo, useNavigation } from \"@react-navigation/native\";\r\nimport React from \"react\";\r\nimport { useAppUser } from \"../../Authentication\";\r\nexport const ProfileIconSection = (props: CreateAccountProps) => {\r\n    const opacityAnim = useRef(new Animated.Value(0)).current;\r\n    const { value: hasAuthed, setValue } = useData(\"hasAuthed\");\r\n    const { loginState } = useAppUser();\r\n    const nav = useNavigation();\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n\r\n    return <ScrollWithButtons\r\n        buttons={{\r\n            right: {\r\n                text: \"Go To Trading Post!\",\r\n                onPress: () => {\r\n                    setValue(true);\r\n                    nav.navigate(\"AppInformation\");\r\n\r\n                    //linkTo('/dash/feed')\r\n                }\r\n            },\r\n\r\n        }}\r\n    >\r\n        <Animated.View style={{ opacity: opacityAnim, padding: sideMargin }} >\r\n            <ElevatedSection title=\"\">\r\n                <Text style={[thinBannerText]}>Tap to Modify Profile Picture</Text>\r\n                <ProfileButton userId={props.user.data.id} profileUrl={loginState?.appUser?.profile_url || \"\"} size={sizes.rem16} editable />\r\n                <Text style={[thinBannerText]}>Tip: Profile pictures will help others quickly identify you when on the platform.</Text>\r\n            </ElevatedSection>\r\n        </Animated.View>\r\n    </ScrollWithButtons>\r\n}","import React, { useState, useRef, useEffect, RefObject, useMemo } from \"react\";\r\nimport { Alert, TouchableOpacity, Image, ImageStyle, ViewStyle, View, Animated } from \"react-native\";\r\n//import { Navigation } from \"react-native-navigation\";\r\n//import { Nav } from '@react-navigation/native'\r\nimport { Input, Text, } from \"@ui-kitten/components\";\r\n//import { signOut, getStoredCreds, CreateAuth0User, UpdateUserProfile, signInStoredCreds } from \"../../apis/Authentication\";\r\nimport { ButtonField } from \"../../components/ButtonField\";\r\nimport { IconifyIcon } from \"../../components/IconfiyIcon\";\r\nimport { Section } from \"../../components/Section\";\r\nimport { TextField, ITextField } from \"../../components/TextField\";\r\nimport { bannerText, flex, sizes, textInputWiz } from \"../../style\";\r\nimport { bindTextInput, IEntity, useReadonlyEntity } from \"../../utils/hooks\";\r\nimport { isRequired, isValidEmail, isAlphaNumeric } from \"../../utils/validators\";\r\nimport { CreateAccountProps, sideMargin } from \"./shared\";\r\n\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\";\r\nimport { useData } from \"../../lds\";\r\nimport { Label } from \"../../components/Label\";\r\nimport { TBI } from \"../../utils/misc\";\r\nimport { AppColors } from \"../../constants/Colors\";\r\nimport Auth from '@tradingpost/common/api/entities/static/AuthApi'\r\nimport UserApi from '@tradingpost/common/api/entities/apis/UserApi'\r\nimport { IUserGet } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport { useAppUser } from \"../../Authentication\";\r\nimport { useLinkTo, useNavigation } from \"@react-navigation/native\";\r\nimport { registerDeviceForNotifications } from \"../../utils/notifications\";\r\nimport { HtmlView } from \"../../components/HtmlView\";\r\n\r\n\r\n\r\n\r\nexport function TermsScreen(props: CreateAccountProps) {\r\n    const\r\n        nav = useNavigation(),\r\n        [lockButtons, setLockButtons] = useState(false),\r\n        opacityAnim = useRef(new Animated.Value(0)).current,\r\n        linkTo = useLinkTo(),\r\n        buttonConfig = {\r\n            locked: lockButtons,\r\n            right: {\r\n                text: \"Go Back\",\r\n                onPress: async () => {\r\n                    linkTo(\"/create/logininfo\")\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n\r\n\r\n    return <ScrollWithButtons\r\n        fillHeight\r\n        buttons={buttonConfig}>\r\n        <HtmlView\r\n            style={{ flex: 1 }}\r\n            isUrl\r\n        >{\"https://tradingpostapp.com/terms-of-service\"}</HtmlView>\r\n    </ScrollWithButtons>\r\n}\r\n","import React, { useState, useRef, useEffect, RefObject, useMemo } from \"react\";\r\nimport { Alert, TouchableOpacity, Image, ImageStyle, ViewStyle, View, Animated } from \"react-native\";\r\n//import { Navigation } from \"react-native-navigation\";\r\n//import { Nav } from '@react-navigation/native'\r\nimport { Input, Text, } from \"@ui-kitten/components\";\r\n//import { signOut, getStoredCreds, CreateAuth0User, UpdateUserProfile, signInStoredCreds } from \"../../apis/Authentication\";\r\nimport { ButtonField } from \"../../components/ButtonField\";\r\nimport { IconifyIcon } from \"../../components/IconfiyIcon\";\r\nimport { Section } from \"../../components/Section\";\r\nimport { TextField, ITextField } from \"../../components/TextField\";\r\nimport { bannerText, flex, sizes, textInputWiz } from \"../../style\";\r\nimport { bindTextInput, IEntity, useReadonlyEntity } from \"../../utils/hooks\";\r\nimport { isRequired, isValidEmail, isAlphaNumeric } from \"../../utils/validators\";\r\nimport { CreateAccountProps, sideMargin } from \"./shared\";\r\n\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\";\r\nimport { useData } from \"../../lds\";\r\nimport { Label } from \"../../components/Label\";\r\nimport { TBI } from \"../../utils/misc\";\r\nimport { AppColors } from \"../../constants/Colors\";\r\nimport Auth from '@tradingpost/common/api/entities/static/AuthApi'\r\nimport UserApi from '@tradingpost/common/api/entities/apis/UserApi'\r\nimport { IUserGet } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport { useAppUser } from \"../../Authentication\";\r\nimport { useLinkTo, useNavigation } from \"@react-navigation/native\";\r\nimport { registerDeviceForNotifications } from \"../../utils/notifications\";\r\nimport { HtmlView } from \"../../components/HtmlView\";\r\n\r\n\r\n\r\n\r\nexport function PrivacyScreen(props: CreateAccountProps) {\r\n    const\r\n        nav = useNavigation(),\r\n        [lockButtons, setLockButtons] = useState(false),\r\n        opacityAnim = useRef(new Animated.Value(0)).current,\r\n        linkTo = useLinkTo(),\r\n        buttonConfig = {\r\n            locked: lockButtons,\r\n            right: {\r\n                text: \"Go Back\",\r\n                onPress: async () => {\r\n                    linkTo(\"/create/logininfo\")\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n\r\n\r\n    return <ScrollWithButtons\r\n        fillHeight\r\n        buttons={buttonConfig}>\r\n        <HtmlView\r\n            style={{ flex: 1 }}\r\n            isUrl\r\n        >{\"https://tradingpostapp.com/privacy-policy\"}</HtmlView>\r\n    </ScrollWithButtons>\r\n}\r\n","/**\r\n * Learn more about deep linking with React Navigation\r\n * https://reactnavigation.org/docs/deep-linking\r\n * https://reactnavigation.org/docs/configuring-links\r\n */\r\n\r\nimport { getActionFromState, getStateFromPath, LinkingOptions } from '@react-navigation/native';\r\nimport * as Linking from 'expo-linking';\r\nimport { NavIconKeys, navIcons } from '../images';\r\nimport { screens } from '../screens/CreateAccountScreen';\r\n\r\nconst ConfigOverride: Partial<Record<NavIconKeys, any>> = {\r\n    Notification: {\r\n        path: \"dash/notification\",\r\n    }\r\n};\r\n\r\nconst linking: LinkingOptions<any> = {\r\n    prefixes: [Linking.createURL('/'), \"https://m.tradingpostapp.com\"],\r\n    config: {\r\n        screens: {\r\n            Root: \"login\",\r\n            Create: {\r\n                screens: {\r\n                    Root: {\r\n                        screens: (() => {\r\n                            const output: Record<string, string> = {}\r\n                            Object.keys(screens).map((k) => {\r\n                                output[k] = \"create/\" + k.toLowerCase();\r\n                            })\r\n                            return output;\r\n                        })()\r\n                    }\r\n                }\r\n            },\r\n            Dash: {\r\n                screens: {\r\n                    Root: {\r\n                        screens: (() => {\r\n                            const output: Record<string, string> = {}\r\n                            Object.keys(navIcons).map((k) => {\r\n                                output[k] = ConfigOverride[k as NavIconKeys] || \"dash/\" + k.toLowerCase();\r\n                            })\r\n                            return output;\r\n                        })()\r\n                    }\r\n                }\r\n            },\r\n            Profile: \"profile\",\r\n            PostScreen: \"post\",\r\n            AccountInformation: \"account\",\r\n            VerifyAccount: \"verifyaccount\",\r\n            ResetPassword: \"resetpassword\",\r\n            NotificationTrade: \"dash/notification/trade\",\r\n            Auth: \"auth/:platform\",\r\n            WatchlistViewer: \"WatchlistViewer/:watchlistId\",\r\n            Modal: 'modal',\r\n            NotFound: '*',\r\n        },\r\n    },\r\n    getStateFromPath: (path, options) => {\r\n        const state = getStateFromPath(path, options);\r\n        // Replaces the current screen if $replace is in the parameter\r\n        // ...not sure if this will work properly in all navigation situations\r\n        // maybe need to make this only work if the navigator is a dash? or look for the last dash navigator\r\n        if (state && (state.routes?.[state.routes.length - 1]?.params as any)?.$replace && state.routes.length > 1) {\r\n            console.log(\"Running a replace ....\");\r\n            delete (state.routes?.[state.routes.length - 1]?.params as any).$replace;\r\n            state.routes.splice(state.routes.length - 2, 1);\r\n        }\r\n\r\n        return state;\r\n\r\n    },\r\n    getActionFromState: (state, options) => {\r\n        const action = getActionFromState(state, options);\r\n        return action;\r\n    }\r\n};\r\n\r\nexport default linking;\r\n","import { StyleSheet, TouchableOpacity } from 'react-native';\r\n\r\nimport { Text, View } from '../components/Themed';\r\nimport { RootStackScreenProps } from '../types';\r\n\r\nexport default function NotFoundScreen({ navigation }: RootStackScreenProps<'NotFound'>) {\r\n  return (\r\n    <View style={styles.container}>\r\n      <Text style={styles.title}>This screen doesn't exist.</Text>\r\n      <TouchableOpacity onPress={() => navigation.replace('Root')} style={styles.link}>\r\n        <Text style={styles.linkText}>Go to home screen!</Text>\r\n      </TouchableOpacity>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    padding: 20,\r\n  },\r\n  title: {\r\n    fontSize: 20,\r\n    fontWeight: 'bold',\r\n  },\r\n  link: {\r\n    marginTop: 15,\r\n    paddingVertical: 15,\r\n  },\r\n  linkText: {\r\n    fontSize: 14,\r\n    color: '#2e78b7',\r\n  },\r\n});\r\n","import { View, Animated, ImageStyle, Pressable, ViewStyle } from \"react-native\";\r\nimport React, { useEffect, useRef } from \"react\";\r\nimport { Text, Image } from \"react-native\";\r\nimport { IconifyIcon } from \"./IconfiyIcon\";\r\nimport UserLogo from '../assets/@iconify/user'\r\n\r\nimport { flex, row, sizes } from \"../style\";\r\nimport { useWindowDimensions } from \"react-native\";\r\nimport { social } from \"../images\";\r\n//import { ImageResultCallback, openImagePicker } from \"../screens/ImagePickerScreen\";\r\nimport ProfileBg from '../assets/profile/profileBg.png'\r\nimport { NavigationProp } from \"@react-navigation/native\";\r\nimport { AppColors } from \"../constants/Colors\";\r\nimport { Interface } from \"@tradingpost/common/api\";\r\n\r\n\r\n\r\nexport const profileImageSize = sizes.rem6;\r\nexport const profileImageSmall = sizes.rem4;\r\nexport const actionPanelSize = sizes.rem2;\r\nconst profileImageStyle = {\r\n    height: profileImageSize,\r\n    width: profileImageSize,\r\n    position: \"absolute\",\r\n    borderRadius: profileImageSize / 2,\r\n    backgroundColor: \"darkgray\",\r\n    bottom: 0\r\n}\r\n\r\nconst profileImageSmallStyle = {\r\n    height: profileImageSmall,\r\n    width: profileImageSmall,\r\n    borderRadius: profileImageSmall / 2,\r\n    backgroundColor: \"darkgray\",\r\n    position: \"absolute\",\r\n    left: sizes.rem1,\r\n    bottom: 0\r\n}\r\n\r\n\r\nexport function useProfileBannerSize() {\r\n    const dim = useWindowDimensions();\r\n    return dim.width / bannerAspectRatio + actionPanelSize;\r\n}\r\n\r\nconst bannerAspectRatio = 21 / 9;//16 / 9;\r\nconst viewStyle: ViewStyle = {\r\n    backgroundColor: \"lightgray\",\r\n    aspectRatio: bannerAspectRatio,\r\n    width: \"100%\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"flex-end\"\r\n};\r\n\r\ntype ImageResultCallback = (a: any, b: any) => void;\r\n\r\nexport function ProfileBanner<T extends boolean>(props: { subscriberCount: number | undefined, profilePic: string | undefined, bannerPic: string | undefined, editMode?: T, collapse?: boolean, extraMarginTop?: number, navigator: NavigationProp<any>, platforms: string[] } &\r\n    (T extends true ? {\r\n        onBannerPicked: ImageResultCallback,\r\n        onProfilePicked: ImageResultCallback\r\n\r\n    } : { onBannerPicked?: ImageResultCallback, onProfilePicked?: ImageResultCallback })\r\n) {\r\n    const { profilePic, collapse } = props;\r\n\r\n    return <View style={{ alignItems: \"center\", width: \"100%\" }}>\r\n        <Pressable\r\n            key=\"imagepart\"\r\n\r\n            style={[viewStyle, { backgroundColor: AppColors.primary }, collapse ? { marginTop: actionPanelSize / 2 + (props.extraMarginTop || 0) } : undefined]}\r\n        >\r\n            {/* <Image style={{ width: \"100%\", height: \"100%\", position: \"absolute\" }} source={ProfileBg} /> */}\r\n            {\r\n                /*</> :\r\n                <View style={[row, { backgroundColor: \"blue\", width: \"100%\" }]}>\r\n                    <ProfilePic profilePic={profilePic} collapse={collapse} editMode={props.editMode} />\r\n                </View>\r\n                */\r\n            }\r\n        </Pressable>\r\n        {!collapse && <View key=\"uncollapseFoot\" style={[row, {\r\n            width: \"100%\",\r\n            alignSelf: \"stretch\",\r\n            height: actionPanelSize,\r\n            backgroundColor: \"white\",\r\n            alignContent: \"center\",\r\n            alignItems: \"center\"\r\n        }]}>\r\n            <Text style={[flex, {\r\n                maxWidth: '48%', // some weird ness here where the  social bar/ this container is weider than the screen so creating a horizontial scroll bar\r\n                textAlign: \"center\", transform: [{\r\n                    translateX: -profileImageSize / 4,\r\n                }]\r\n            }]}>Subscribers {props.subscriberCount || \"-\"}</Text>\r\n            <View style={[row, flex, {\r\n                justifyContent: \"center\",\r\n                height: sizes.rem1_5,\r\n                maxWidth: '50%',\r\n                transform: [{\r\n                    translateX: profileImageSize / 4\r\n                }]\r\n            }]}>\r\n                <SocialBar claims={props.platforms} />\r\n            </View>\r\n        </View>}\r\n        {collapse && <View key=\"collapseFoot\" style={[{\r\n            width: \"100%\",\r\n            alignSelf: \"stretch\",\r\n            height: actionPanelSize,\r\n            backgroundColor: \"white\",\r\n            alignContent: \"center\",\r\n            alignItems: \"center\"\r\n        }]}>\r\n            <View style={[row, { height: \"100%\", alignSelf: \"flex-end\", marginRight: sizes.rem1 }]}>\r\n                <SocialBar claims={props.platforms} />\r\n            </View>\r\n        </View>}\r\n        <ProfilePic profilePic={profilePic} collapse={collapse} editMode={props.editMode} navigator={props.navigator}\r\n            onProfilePicked={props.onProfilePicked} />\r\n    </View>\r\n}\r\n\r\nconst SocialBar = (props: { claims: string[] }) => {\r\n    //{social.TwitterLogo, social.LinkedInLogo, social.YouTubeLogo}\r\n    return <>\r\n        {[\"Twitter\", \"YouTube\", \"Spotify\"].map((logoName, i) => {\r\n            //social.TwitterLogo, social.LinkedInLogo, social.YouTubeLogo\r\n            //social.TwitterLogo, social.LinkedInLogo, social.YouTubeLogo\r\n            const logo = social[logoName + \"Logo\" as keyof typeof social];\r\n            return props.claims.find((c) => c.toLowerCase() === logoName.toLowerCase()) ?\r\n                <View key={`socialV_${i}`} style={{ height: \"100%\", aspectRatio: 1 }}>\r\n                    <IconifyIcon key={`social_${i}`} icon={logo} svgProps={{ height: \"75%\" }}\r\n                        style={{ height: \"75%\", margin: \"12.5%\", aspectRatio: 1 }} />\r\n                </View> : undefined\r\n        })}\r\n    </>\r\n}\r\n\r\nfunction ProfilePic(props: { profilePic: string | undefined, collapse: boolean | undefined, editMode: boolean | undefined, navigator: NavigationProp<any>, onProfilePicked?: ImageResultCallback }) {\r\n    const { profilePic, collapse, editMode } = props;\r\n    const style = collapse ? profileImageSmallStyle : profileImageStyle\r\n    return <Pressable disabled={!editMode} style={style as ViewStyle}\r\n    // onPress={() =>\r\n    //     openImagePicker(props.componentId, {\r\n    //     onImagePicked: props.onProfilePicked,\r\n    //     cropSettings: {\r\n    //         height: 256 * 4,\r\n    //         width: 256 * 4\r\n    //     }\r\n    // })}\r\n\r\n    >\r\n        {profilePic ? <Image source={{ uri: profilePic }} style={[style as ImageStyle, { left: 0 }]} /> :\r\n            <IconifyIcon\r\n                style={{ height: \"120%\", width: \"120%\", left: \"-10%\" }}\r\n                icon={UserLogo}\r\n                currentColor='black'\r\n            />}\r\n    </Pressable>\r\n}","import {NavigationProp, useNavigation} from \"@react-navigation/native\"\r\nimport {Interface} from \"@tradingpost/common/api\"\r\nimport {Avatar, Text} from \"@ui-kitten/components\"\r\nimport React from \"react\"\r\nimport {Pressable, View, ViewStyle} from \"react-native\"\r\nimport {flex, sizes} from \"../style\"\r\nimport {ProfileButton} from \"./ProfileButton\"\r\n\r\nexport const ProfileBar = (props: {\r\n    user?: Interface.IUserList,\r\n    style?: ViewStyle\r\n}) => {\r\n    const nav = useNavigation<NavigationProp<any>>();\r\n    const openProfile = () => {\r\n        if (props.user?.id) {\r\n            nav.navigate(\"Profile\", {\r\n                userId: props.user.id\r\n            });\r\n        }\r\n    }\r\n\r\n    return <View style={props.style}><View style={{flexDirection: \"row\", width: \"100%\", marginBottom: sizes.rem0_5}}>\r\n        <ProfileButton userId={props.user?.id || \"\"} profileUrl={props.user?.profile_url || \"\"} size={sizes.rem6 / 2}/>\r\n        <View style={[flex, {marginLeft: sizes.rem0_5, justifyContent: 'center', alignItems: 'flex-start'}]}>\r\n            <Pressable style={props.user?.display_name.length && props.user?.display_name.length > 1 ? {display: 'flex'} : {display: 'none'}} onPress={openProfile}><Text category={\"s1\"}>{props.user?.display_name}</Text></Pressable>\r\n            <Pressable onPress={openProfile}><Text category={\"s2\"}>{\"@\" + props.user?.handle}</Text></Pressable>\r\n        </View>\r\n    </View>\r\n    </View>\r\n}","import React from \"react\";\r\nimport { Button } from \"@ui-kitten/components\";\r\nimport { AppColors } from \"../constants/Colors\";\r\nimport { sizes } from \"../style\";\r\nimport { Text, ViewStyle } from 'react-native'\r\nexport function PrimaryChip(props: { label: string, isAlt?: boolean, style?: ViewStyle }) {\r\n    const color = props.isAlt ? AppColors.secondary : AppColors.primary\r\n    return <Button\r\n        key={props.label}\r\n        size={'tiny'}\r\n        style={[{ borderRadius: 16, backgroundColor: color, borderColor: color, marginRight: sizes.rem1 / 4, height: sizes.rem2, minHeight: sizes.rem2 }, props.style]}\r\n    //label={props.label}\r\n    ><Text numberOfLines={1} style={{ color: \"white\" }}>{props.label}</Text></Button>\r\n}","import React from \"react\";\r\nimport { Image, ImageBackground, ImageStyle } from \"react-native\";\r\nimport { sizes } from \"../style\";\r\n\r\nexport function IconButton(props: { iconSource: number, style?: ImageStyle }) {\r\n    return <Image source={props.iconSource} resizeMode=\"contain\" style={[ {height:24}, props.style]}/>\r\n} ","import React, { ReactNode, useState } from \"react\";\r\nimport { Pressable } from \"react-native\";\r\n\r\nexport const AsyncPressable = (props: { children: ReactNode, onPress?: () => Promise<void> }) => {\r\n    const [isDisabled, setIsDisabled] = useState(false);\r\n    const { onPress, children } = props;\r\n    return <Pressable disabled={isDisabled} onPress={async () => {\r\n        setIsDisabled(true);\r\n\r\n        if (onPress)\r\n            await onPress();\r\n\r\n        setIsDisabled(false);\r\n\r\n    }}>{children}</Pressable>\r\n}","import React from \"react\"\r\nimport { Share, Pressable, ViewStyle } from \"react-native\"\r\nimport ShareIcon from '../assets/@iconify/share'\r\nimport { IconifyIcon } from \"./IconfiyIcon\"\r\n\r\nexport const ShareButton = (props: { style?: ViewStyle, title: string, url: string, color?: string }) => {\r\n    return <Pressable onPress={() => {\r\n        Share.share({\r\n            title: props.url,\r\n            url: props.url,\r\n            message: props.title\r\n\r\n        }, {\r\n\r\n        })\r\n\r\n    }}>\r\n        <IconifyIcon icon={ShareIcon} style={props.style} currentColor={props.color || \"black\"} />\r\n    </Pressable>\r\n}","import React, { useEffect, useState } from 'react'\r\nimport {\r\n    Alert,\r\n    Image,\r\n    ImageBackground,\r\n    Linking,\r\n    PixelRatio,\r\n    Platform,\r\n    Pressable,\r\n    ScrollView,\r\n    StyleSheet,\r\n    Text,\r\n    TouchableOpacity,\r\n    View\r\n} from 'react-native'\r\nimport { Button, Icon } from '@ui-kitten/components'\r\n\r\nimport { flex, fonts, row, shadow, sizes } from '../style'\r\n\r\nimport { IconifyIcon } from './IconfiyIcon'\r\nimport { Header, Subheader } from './Headers'\r\nimport { PrimaryChip } from './PrimaryChip'\r\nimport { BookmarkActive, BookmarkIcons, CommentIcon, navIcons, postBg, social, UpvoteIcon, Retweet, PremiumStar } from '../images'\r\nimport { social as socialStyle } from '../style'\r\nimport { IconButton } from './IconButton'\r\n//import { IPostList } from '../api/entities/interfaces'\r\nimport { LogoImage } from './LogoImage'\r\n//import { ensureCurrentUser } from '../apis/Authentication'\r\n//import { WebView } from 'react-native-webview';\r\nimport { color } from 'react-native-reanimated'\r\n//import { screens } from '../navigationComponents'\r\n//import { fullDashOptions } from '../layouts/DashboardLayout'\r\nimport { toFormatedDateTime } from '../utils/misc'\r\nimport { AsyncPressable } from './AsyncPressable'\r\nimport { AppColors } from '../constants/Colors'\r\nimport { Api, Interface } from '@tradingpost/common/api'\r\nimport { HtmlView } from './HtmlView'\r\nimport { useWindowDimensions } from 'react-native'\r\nimport { ProfileButton } from './ProfileButton'\r\nimport { useToast } from 'react-native-toast-notifications'\r\nimport { NavigationProp, useNavigation } from \"@react-navigation/native\"\r\nimport { RootStackParamList } from '../navigation/pages'\r\n\r\n//import { setBookmarked } from '../apis/PostApi'\r\n//import { openProfileScreen } from '../screens/ProfileScreen'\r\nimport { WebView } from \"react-native-webview\";\r\nimport { ShareButton } from './ShareButton'\r\n\r\n\r\nconst postTotalVerticalMargin = sizes.rem1;\r\nconst postTotalHorizontalMargin = sizes.rem2;\r\nconst postSidePad = sizes.rem2;\r\nconst postTotalBorder = 2//4;\r\nexport const spaceOnSide = postTotalHorizontalMargin + postTotalBorder + postSidePad\r\n\r\nexport const postInnerHeight = (itm: Interface.IElasticPost | undefined, windowWidth: number) => {\r\n    const size = (itm as Interface.IElasticPost | undefined)?._source.size\r\n    if (itm?._source.postType === \"substack\") {\r\n        return 200;\r\n    } else if (itm?._source.postType === \"tradingpost\" && size) {\r\n        return (windowWidth / size.aspectRatio) * (fonts.small / fonts.xSmall) + fonts.medium\r\n    } else if (size) {\r\n        return windowWidth / size.aspectRatio + (itm?._source.postType === \"tweet\" ? 20 * windowWidth / itm._source.size.maxWidth : 0);\r\n    } else if (itm?._source.postType === \"youtube\") {\r\n        return windowWidth / (390 / 230);\r\n    } else if (itm?._source.postType === \"spotify\") {\r\n        return windowWidth / (360 / 162);\r\n    } else {\r\n        return 200;\r\n    }\r\n}\r\nexport const resolvePostContent = (itm: Interface.IElasticPost | undefined, windowWidth: number) => {\r\n    switch (itm?._source.postType) {\r\n        case \"youtube\":\r\n            return \"https:\" + itm._source.postUrl.replace(\"https://www.youtube.com/watch?v=\", \"//www.youtube.com/embed/\");\r\n        case 'tweet':\r\n            return `<html><head>\r\n            <style>\r\n            .blink_me {\r\n                animation: blinker 1s linear infinite;\r\n              }\r\n              \r\n              @keyframes blinker {\r\n                50% {\r\n                  opacity: 0;\r\n                }\r\n              }\r\n            </style>\r\n            <script>                \r\n                const tracker = setInterval(()=>{\r\n                    if(document.querySelector(\".twitter-tweet-rendered\")){\r\n                        clearInterval(tracker);  \r\n                        document.getElementById(\"wrapper\").style.opacity=1;\r\n                        document.getElementById(\"loader\").style.opacity=0.99;\r\n                        setTimeout(()=>{\r\n                            document.getElementById(\"loader\").style.display=\"none\";\r\n                        },2000)\r\n                    }\r\n                },333)    \r\n\r\n            </script><meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0\"></meta></head>\r\n            <body style=\"margin:0; padding:0;width:${itm._source.size.maxWidth}px;transform: scale(${windowWidth / itm._source.size.maxWidth});transform-origin: top left;\">\r\n            <div id=\"loader\" style=\"background-color:white; position:absolute; height:100%; width:100%\">\r\n             <img class=\"blink_me\" style=\"position:absolute; margin:auto; left:0; right:0; top:0; bottom:0; height:40px; width:40px\" src=\"data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e %3csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' viewBox='0 0 248 204'%3e%3cpath fill='%231d9bf0' d='M221.95 51.29c.15 2.17.15 4.34.15 6.53 0 66.73-50.8 143.69-143.69 143.69v-.04c-27.44.04-54.31-7.82-77.41-22.64 3.99.48 8 .72 12.02.73 22.74.02 44.83-7.61 62.72-21.66-21.61-.41-40.56-14.5-47.18-35.07 7.57 1.46 15.37 1.16 22.8-.87-23.56-4.76-40.51-25.46-40.51-49.5v-.64c7.02 3.91 14.88 6.08 22.92 6.32C11.58 63.31 4.74 33.79 18.14 10.71c25.64 31.55 63.47 50.73 104.08 52.76-4.07-17.54 1.49-35.92 14.61-48.25 20.34-19.12 52.33-18.14 71.45 2.19 11.31-2.23 22.15-6.38 32.07-12.26-3.77 11.69-11.66 21.62-22.2 27.93 10.01-1.18 19.79-3.86 29-7.95-6.78 10.16-15.32 19.01-25.2 26.16z'/%3e%3c/svg%3e\" />\r\n            </div>\r\n            <div id=\"wrapper\" style=\"opacity:0; min-height:${itm._source.size.maxWidth / itm._source.size.aspectRatio}px\">\r\n            ${itm._source.content.htmlBody}\r\n            </div>\r\n            </body></html>`\r\n        case 'spotify':\r\n            const matches = /src=\"(.*)\"/.exec(itm._source.content.body);\r\n            return matches?.[1] || \"\";\r\n        case 'tradingpost':\r\n            return `\r\n                <html><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n                    <body>\r\n                        <div style=\"font-size: ${fonts.medium}px; font-weight: 600px; line-height: ${fonts.medium * 1}px; margin-bottom: 10px\">${itm._source.content.title}</div>\r\n                        <div style=\"font-size: ${fonts.small}px; margin: 0px 3px 0px\">${itm._source.content.body}</div>\r\n                    </body>    \r\n                </html>\r\n                `\r\n        case 'substack':\r\n        //return SubstackView({post: itm});\r\n        \r\n        /*\r\n        return `<html><head><meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0\"></meta></head>\r\n        <body style=\"margin:0; padding:0;width:${itm?._source.size.maxWidth}px;transform: scale(${windowWidth / itm._source.size.maxWidth});transform-origin: top left;\">\r\n        <h1>${itm?._source.content.title}</h1>\r\n        <p>${itm?._source.content.body}</p>\r\n        </body></html>`\r\n        */\r\n\r\n        \r\n        default:\r\n            return itm?._source.content.htmlBody || \"\";\r\n    }\r\n}\r\n\r\nexport function PostView(props: { post: Interface.IElasticPostExt }) {\r\n    const { post } = props\r\n    const nav = useNavigation<NavigationProp<RootStackParamList>>();\r\n\r\n    const [isBookmarked, setIsBookmarked] = useState(Boolean(post.ext.is_bookmarked));\r\n    const [isUpvoted, setIsUpvoted] = useState(Boolean(post.ext.is_upvoted));\r\n    const [upvoteCount, setUpvoteCount] = useState(post.ext.upvoteCount || 0);\r\n    // useEffect(() => {\r\n    //     Api.Post.extensions.getUpvotes({id: props.post._source.id, count: 0})\r\n    //         .then((r) => {\r\n    //             setUpvoteCount(r.count);\r\n    //         })\r\n    // }, [])\r\n    const [showStatus, setShowStatus] = useState(false);\r\n    return <View style={{ marginHorizontal: postTotalHorizontalMargin / 2, marginVertical: postTotalVerticalMargin / 2 }}>\r\n        <View\r\n            style={[shadow, {\r\n                backgroundColor: \"white\",\r\n                borderRadius: sizes.borderRadius * 4,\r\n                borderColor: \"#ccc\",\r\n                borderWidth: postTotalBorder / 2\r\n            }]}>\r\n            <Pressable\r\n                onPress={() => {\r\n                    //openProfileScreen(props.parentComponentId, props.post.creator.id_creator);\r\n                }} style={[row, {\r\n                    alignItems: \"center\",\r\n                    overflow: \"hidden\",\r\n                    borderBottomColor: \"#ccc\",\r\n                    borderBottomWidth: 1,\r\n                    padding: sizes.rem1 / 2\r\n                }]}>\r\n                {\r\n                    <ProfileButton userId={props.post._source.user.id}\r\n                        profileUrl={props.post.ext.user?.profile_url || \"\"} size={48} />\r\n                }\r\n                <View style={[flex, { marginLeft: sizes.rem1 }]}>\r\n                    <Pressable onPress={() => {\r\n                        if (props.post._source.user.id)\r\n                            nav.navigate(\"Profile\", {\r\n                                userId: props.post._source.user.id\r\n                            } as any);\r\n                    }}\r\n                    >\r\n                        <Subheader text={\"@\" + (props.post.ext.user?.handle || \"NoUserAttached\")}\r\n                            style={{ color: \"black\", fontWeight: \"bold\" }} />\r\n                    </Pressable>\r\n                    <View style={{ marginRight: 10 }}>\r\n                        <ScrollView nestedScrollEnabled horizontal showsHorizontalScrollIndicator={false}>\r\n                            <View style={[row, props.post.ext.user?.tags ? { display: 'flex' } : { display: 'none' }]}>\r\n                                {props.post.ext.user?.tags && (props.post.ext.user?.tags).map((chip, i) =>\r\n                                    <PrimaryChip isAlt key={i} label={chip} />)}\r\n                            </View>\r\n                        </ScrollView>\r\n                    </View>\r\n                </View>\r\n                <AsyncPressable\r\n                    onPress={async () => {\r\n                        try {\r\n                            const resp = await Api.Post.extensions.setBookmarked({\r\n                                id: props.post._id,\r\n                                is_bookmarked: !isBookmarked\r\n                            });\r\n                            setIsBookmarked(Boolean(resp.is_bookmarked));\r\n                        } catch (ex) {\r\n                            console.error(ex);\r\n                        }\r\n                    }}>\r\n                    {!isBookmarked && <IconButton iconSource={BookmarkIcons.inactive}\r\n                        style={{ height: 28, width: 28, marginLeft: \"auto\" }} />}\r\n                    {isBookmarked && <BookmarkActive\r\n                        style={{ height: 28, width: 28, marginLeft: \"auto\", marginRight: sizes.rem0_5 / 2 }} />}\r\n                </AsyncPressable>\r\n            </Pressable>\r\n            {\r\n                [\"substack\", \"tradingpost\"].includes(post._source.postType) ?\r\n                    <Pressable onPress={() => {\r\n                        nav.navigate(\"PostScreen\", {\r\n                            post,\r\n                            id: post._id\r\n                        })\r\n\r\n                    }} style={{ paddingHorizontal: postSidePad / 2 }}>\r\n                        <PostContentView post={post} />\r\n                    </Pressable> :\r\n                    <View style={{ paddingHorizontal: postSidePad / 2 }}>\r\n                        <PostContentView post={post} />\r\n                    </View>\r\n            }\r\n\r\n            {(props.post._source.postType !== \"tweet\") &&\r\n                <View\r\n                    style={[row, { alignItems: \"center\", marginTop: \"auto\", borderTopColor: \"#ccc\", borderTopWidth: 1 }]}>\r\n                    {showStatus && <View style={{\r\n                        position: \"absolute\",\r\n                        backgroundColor: \"black\",\r\n                        //   opacity: 0.6,\r\n                        width: 100,\r\n                        margin: \"auto\",\r\n                        top: 12,\r\n                        left: 0,\r\n                        borderRadius: 8,\r\n                        right: 0,\r\n                        padding: 4\r\n                    }}><Text style={{ width: \"100%\", textAlign: \"center\", color: \"white\" }}>Upvoted!</Text></View>}\r\n                    <Button\r\n                        style={{ marginLeft: \"auto\", paddingLeft: 10, paddingRight: 0 }}\r\n                        appearance={'ghost'}\r\n                        accessoryLeft={(props: any) =>\r\n                            <CommentIcon height={24} width={24} style={{ height: 24, width: 24, }} />\r\n                        }\r\n                        onPress={() => {\r\n                            nav.navigate(\"PostScreen\", {\r\n                                post, id: post._id\r\n                            })\r\n                        }}\r\n                    >\r\n                        {evaProps => <Text {...evaProps}\r\n                            style={{\r\n                                fontWeight: 'normal',\r\n                                paddingLeft: sizes.rem1,\r\n                                paddingRight: sizes.rem0_5,\r\n                                color: '#9D9D9D'\r\n                            }}>\r\n                            {'-'}\r\n                        </Text>}\r\n                    </Button>\r\n                    {<Button\r\n                        style={{ paddingLeft: 10, paddingRight: 0 }}\r\n                        onPress={() => {\r\n                            if (!isUpvoted)\r\n                                setShowStatus(true);\r\n                            Api.Post.extensions.setUpvoted({\r\n                                id: post._id,\r\n                                is_upvoted: !isUpvoted,\r\n                                count: upvoteCount // return number of upvotes. \r\n                            }).then((r) => {\r\n                                if (r.is_upvoted)\r\n                                    setTimeout(() => {\r\n                                        setShowStatus(false)\r\n                                    }, 1333);\r\n                                setUpvoteCount(r.count);\r\n                                setIsUpvoted(r.is_upvoted);\r\n                            });\r\n                        }}\r\n                        accessoryLeft={(props: any) => <UpvoteIcon height={24} width={24} style={{\r\n                            height: 24,\r\n                            width: 24,\r\n                            // opacity: isUpvoted ? 1 : 0.25\r\n                        }} />} appearance={\"ghost\"}>\r\n                        {evaProps => <Text {...evaProps} style={{\r\n                            fontWeight: 'normal',\r\n                            paddingHorizontal: sizes.rem1,\r\n                            color: '#9D9D9D'\r\n                        }}>{upvoteCount}</Text>}\r\n                    </Button>}\r\n                    <ShareButton url={\"https://m.tradingpostapp.com/post?id=\" + props.post._id} title={\"https://m.tradingpostapp.com/post?id=\" + props.post._id} style={{\r\n                        height: 24,\r\n                        width: 24, marginRight: 10\r\n                    }} />\r\n                </View>}\r\n        </View>\r\n    </View>\r\n}\r\n\r\nconst SubstackView = (props: { post: Interface.IElasticPost }) => {\r\n    const { post } = props;\r\n    return <View style={{ marginVertical: sizes.rem1 / 2, marginHorizontal: sizes.rem0_5 }}>\r\n        <View key=\"profile\">\r\n            {/* <Image style={{ aspectRatio: 0.9, marginRight: sizes.rem1 / 2 }} source={{ uri: post.platform_profile_url }} /> */}\r\n            <Pressable onPress={() => {\r\n                Linking.openURL(post._source.postUrl)\r\n            }}\r\n                style={{\r\n                    marginBottom: sizes.rem0_5,\r\n                    display: \"flex\",\r\n                    flexDirection: \"row\",\r\n                    alignItems: 'center'\r\n                }}>\r\n                <IconifyIcon style={{ width: 30, height: 30, marginTop: 2, marginRight: sizes.rem1 / 1.5 }}\r\n                    svgProps={{ style: { margin: \"auto\" } }} icon={social.SubstackLogo}\r\n                    currentColor={socialStyle.substackColor} />\r\n                {<Subheader text={post._source.content.title || \"\"} style={{\r\n                    marginBottom: 0,\r\n                    display: \"flex\",\r\n                    color: \"black\",\r\n                    fontSize: fonts.medium,\r\n                    fontWeight: \"600\",\r\n                    fontFamily: \"K2D\",\r\n                    maxWidth: \"85%\"\r\n                }}></Subheader>}\r\n            </Pressable>\r\n        </View>\r\n        {<Text key=\"content\" style={{ fontSize: fonts.small }}>\r\n            {(() => {\r\n                const parsedText = parseHtmlEnteties(post._source.content.description);\r\n                return parsedText?.length > 300 ?\r\n                    `${parsedText.substring(0, 300)}...` :\r\n                    parsedText\r\n            })()}\r\n        </Text>}\r\n        {<Text key=\"date\" style={{\r\n            fontSize: fonts.xSmall,\r\n            fontFamily: \"K2D\",\r\n            paddingVertical: 5\r\n        }}>{toFormatedDateTime(post._source.platformCreatedAt)}</Text>}\r\n    </View>\r\n}\r\n\r\nconst TradingPostView = (props: { post: Interface.IElasticPost }) => {\r\n    const { post } = props;\r\n    return <View style={{ marginVertical: sizes.rem1 / 2, marginHorizontal: sizes.rem0_5 }}>\r\n        <View key=\"profile\">\r\n            {/* <Image style={{ aspectRatio: 0.9, marginRight: sizes.rem1 / 2 }} source={{ uri: post.platform_profile_url }} /> */}\r\n\r\n            <Subheader text={post._source.content.title || \"\"} style={{\r\n                marginBottom: 0,\r\n                display: \"flex\",\r\n                color: \"black\",\r\n                fontSize: fonts.medium,\r\n                fontWeight: \"600\",\r\n                fontFamily: \"K2D\",\r\n                maxWidth: \"85%\"\r\n            }}></Subheader>\r\n\r\n        </View>\r\n        <HtmlView key=\"content\" isUrl={false} style={{ height: props.post._source.size.aspectRatio }}>\r\n            {`<html><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n                <body style=\"font-size: ${fonts.small}px\">${post._source.content.body}</body></html>`}\r\n            {/*(() => {\r\n                const parsedText = parseHtmlEnteties(post._source.content.body);\r\n                return parsedText?.length > 300 ?\r\n                    `${parsedText.substring(0, 300)}...` :\r\n                    parsedText\r\n            })()*/}\r\n        </HtmlView>\r\n        {<Text key=\"date\" style={{\r\n            fontSize: fonts.xSmall,\r\n            fontFamily: \"K2D\",\r\n            paddingVertical: 5\r\n        }}>{new Date(Date.parse(post._source.platformCreatedAt)).toLocaleString('en-US', {\r\n            dateStyle: 'medium',\r\n            timeStyle: 'short'\r\n        })}</Text>}\r\n    </View>\r\n}\r\nconst parseHtmlEnteties = (str: string) => {\r\n    return str?.replace(/&#([0-9]{1,4});/gi, function (match, numStr) {\r\n        var num = parseInt(numStr, 10); // read num as normal number\r\n        return String.fromCharCode(num);\r\n    });\r\n}\r\n\r\nconst PostContentView = (props: { post: Interface.IElasticPost }) => {\r\n    const { width: windowWidth, scale } = useWindowDimensions(),\r\n        availWidth = windowWidth - spaceOnSide\r\n\r\n    if (props.post._source.postType === 'substack') {\r\n        return SubstackView(props)\r\n    }\r\n\r\n    return <View>\r\n        <View style={{\r\n            display: (props.post._source.postType === 'tweet' && props.post._source.content.body.slice(0, 2) === 'RT') ? 'flex' : 'none',\r\n            flexDirection: 'row',\r\n            alignItems: 'center',\r\n            marginTop: 2,\r\n            marginBottom: -5\r\n        }}>\r\n            <Retweet width={30} height={30} style={{ width: 30, height: 30 }} />\r\n            <Text style={{\r\n                fontWeight: '500',\r\n                marginLeft: 2\r\n            }}>\r\n                {'Retweet'}\r\n            </Text>\r\n        </View>\r\n        <View>\r\n            {props.post._source.subscription_level === 'premium' && <PremiumStar style={{ height: 24, width: 24, marginBottom: 5, marginTop: 10 }} />}\r\n        </View>\r\n        <View style={{\r\n            height: postInnerHeight(props.post, availWidth),\r\n            paddingVertical: ['spotify', 'youtube'].includes(props.post._source.postType) ? sizes.rem0_5 : 0\r\n            //height: postInnerHeight(props.post, availWidth),\r\n            //justifyContent: ['spotify', 'youtube'].includes(props.post._source.postType) ? 'center' : undefined\r\n        }}>\r\n            <HtmlView style={{\r\n                height: ['spotify', 'youtube'].includes(props.post._source.postType) ? postInnerHeight(props.post, availWidth) : postInnerHeight(props.post, availWidth),\r\n                //height: postInnerHeight(props.post, availWidth)\r\n                //marginTop: ['spotify', 'youtube'].includes(props.post._source.postType) ? 8 : 0,\r\n                //marginBottom: ['youtube', 'spotify'].includes(props.post._source.postType) ? 8 : 0\r\n            }}\r\n                isUrl={props.post._source.postType === \"youtube\" || props.post._source.postType === \"spotify\"}>\r\n                {resolvePostContent(props.post, availWidth)}\r\n            </HtmlView>\r\n        </View>\r\n        <View>\r\n            {props.post._source.postType === 'tradingpost' &&\r\n                <Text style={{ fontSize: fonts.xSmall, marginVertical: 10, marginLeft: 10 }}>\r\n                    {toFormatedDateTime(props.post._source.tradingpostCreatedAt)}\r\n                </Text>}\r\n\r\n        </View>\r\n    </View>\r\n\r\n}\r\n","import { Interface } from \"@tradingpost/common/api\";\r\nimport { IElasticPost } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport React, { useRef, useState } from \"react\";\r\nimport { ScrollView, Text } from \"react-native\";\r\n\r\n//import { Bookmark, getPosts } from \"../apis/PostApi\";\r\n//import { FeedType, IPost, IPostWithHtmlAndBk } from \"../interfaces/IPost\";\r\nimport { fonts } from \"../style\";\r\n//import { toAmiraDate, fromAmiraDate } from \"../utils/misc\";\r\nimport { DataOrQuery, List } from \"./List\";\r\nimport { PostView } from \"./PostView\";\r\nimport { View } from \"./Themed\";\r\n\r\n\r\n\r\nexport function PostList(props: { posts?: DataOrQuery<Interface.IElasticPostExt>, datasetKey?: string }) {\r\n    return <List\r\n        //style={{ borderColor: \"orange\", borderWidth: 5 }}\r\n        // contentContainerStyle={{ height:\"auto\", borderColor: \"blue\", borderWidth: 5 }}\r\n        listKey={props.datasetKey || 'STATIC'}\r\n        getItemLayout={(items, index, sizeCache) => {\r\n            const curItem = items?.[index];\r\n            const output = typeof curItem === \"object\" ? sizeCache[index] : { index, offset: sizeCache[index - 1].offset + sizeCache[index - 1].length, length: 40 };\r\n            return output;\r\n        }}\r\n        data={props.posts}\r\n        keyExtractor={(item, index) => typeof item === \"string\" ? \"loadingtext\" : (index + \"_\" + item._id)}\r\n        preloadOffset={2}\r\n        datasetKey={props.datasetKey}\r\n        renderItem={(item) => {\r\n            if (typeof item.item === \"string\") {\r\n                return <Text style={{ textAlign: \"center\", fontSize: fonts.large }}>Loading More...</Text>\r\n            }\r\n            else {\r\n                return <PostView key={item.index + \"_\" + item.item._id} post={item.item} />\r\n            }\r\n        }}\r\n        noDataMessage={\"No Posts Available\"}\r\n        loadingItem={\"  \"}\r\n    />\r\n\r\n}\r\n\r\n\r\n//Keeping this commented to emphasise how ridiculous it was lol!!!!!!!!!!!\r\n// export function usePostLoader(pageSize: number, bookmarks: Bookmark[] | undefined, isBookMarked?: boolean, creatorId?: string, errorHandler?: (message: string) => void) {\r\n//     const feedTypeRef = useRef<{\r\n//         response: FeedType,\r\n//         subscriber_min_time?: number\r\n//         disco_min_time?: number,\r\n//         creator_min_time?: number\r\n//     }>({\r\n//         response: creatorId ? \"creator\" : \"subscriber\"\r\n//     })\r\n//     console.log(\"FEED TYPE BASE:\" + feedTypeRef.current.response);\r\n\r\n//     return bookmarks ? async (existingData: IPostWithHtmlAndBk[] | undefined, currentPage: number) => {\r\n//         const output: IPostWithHtmlAndBk[] = [];\r\n\r\n//         try {\r\n//             if (existingData)\r\n//                 output.push(...existingData);\r\n//             let newPosts: IPostWithHtmlAndBk[] = [];\r\n\r\n//             const bod: FeedRequestBody = {\r\n//                 feed_type: feedTypeRef.current.response,\r\n//                 //discovery_feed_last_loaded_post_id: existingData?.length ? existingData[existingData.length - 1]?.id : undefined\r\n//                 creator_id: creatorId,\r\n//                 subscriber_feed_last_loaded_date: feedTypeRef.current.subscriber_min_time ? toAmiraDate(new Date(feedTypeRef.current.subscriber_min_time)) : undefined,\r\n//                 discovery_feed_last_loaded_date: feedTypeRef.current.disco_min_time ? toAmiraDate(new Date(feedTypeRef.current.disco_min_time)) : undefined,\r\n//                 creator_feed_last_loaded_date: feedTypeRef.current.creator_min_time ? toAmiraDate(new Date(feedTypeRef.current.creator_min_time)) : undefined\r\n//             };\r\n\r\n//             if (!isBookMarked) {\r\n//                 const resp = (await getFeed(String(pageSize), bod));\r\n\r\n//                 let curLastMin: number | undefined;\r\n//                 let output: number[] = [];\r\n\r\n//                 resp.posts.forEach((p) => {\r\n//                     const val = fromAmiraDate(p.created_at as string).valueOf();\r\n//                     output.push(val)\r\n//                     if (!curLastMin) {\r\n//                         curLastMin = val;\r\n//                     }\r\n//                     else {\r\n//                         curLastMin = Math.min(val, curLastMin);\r\n//                     }\r\n//                 });\r\n\r\n//                 feedTypeRef.current.response = resp.feed_type;\r\n\r\n//                 if (feedTypeRef.current.response === \"subscriber\")\r\n//                     feedTypeRef.current.subscriber_min_time = curLastMin;\r\n//                 else if (feedTypeRef.current.response === \"discovery\")\r\n//                     feedTypeRef.current.disco_min_time = curLastMin;\r\n//                 else if (feedTypeRef.current.response === \"creator\") {\r\n//                     feedTypeRef.current.creator_min_time = curLastMin;\r\n//                 }\r\n//                 console.log(\"FEED TYPE:\" + JSON.stringify(feedTypeRef.current));\r\n//                 newPosts = resp.posts;\r\n//             }\r\n//             else if (currentPage === 0)\r\n//                 newPosts = await getPosts(bookmarks.map((b) => b.post_id) || []);\r\n\r\n//             // newPosts.forEach((p) => {\r\n//             //     p.bookmarkId = bookmarks.find(b => b.post_id === p.id)?.id;\r\n//             // });\r\n\r\n//             if (newPosts.length)\r\n//                 console.log(`${newPosts[0].id}->${newPosts[newPosts.length - 1].id}`);\r\n\r\n//             output.push(...newPosts);\r\n//         } catch (ex) {\r\n//             if (errorHandler) {\r\n//                 errorHandler(\"Something went wrong.\")\r\n//             }\r\n//         }\r\n//         return output;\r\n\r\n\r\n//     } : undefined\r\n// }","import { NavigationProp } from \"@react-navigation/native\";\r\nimport { Api, Interface } from \"@tradingpost/common/api\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useWindowDimensions } from \"react-native\";\r\nimport { View, Text } from \"react-native\";\r\nimport { SizeParts }  from './List'\r\nimport { PlusContentButton } from \"../components/PlusContentButton\";\r\nimport { PostList } from \"../components/PostList\";\r\nimport { spaceOnSide, postInnerHeight, PostView } from \"../components/PostView\";\r\nimport  {DashTabScreenProps}  from \"../navigation/pages\";\r\n\r\nexport const MultiTermFeedPart = (props: { searchText?: string[]}) => {\r\n    const { width: windowWidth, height: windowHeight } = useWindowDimensions();\r\n    const { searchText } = props\r\n    return <PostList\r\n        key={\"STATIC\"}\r\n        datasetKey={ \"____________\"}\r\n        \r\n        posts={async (allItems, page, sizeCache) => {\r\n            console.log(page)\r\n            const posts = (await Api.Post.extensions.multitermfeed({\r\n                page,\r\n                data: searchText ? {\r\n                    terms: searchText\r\n                        } : undefined\r\n            }));\r\n            \r\n            const newItems = [...(allItems || []), ...posts]\r\n            newItems.forEach((itm, index) => {\r\n                if (!sizeCache[index]) {\r\n                    sizeCache[index] = {\r\n                        index,\r\n                        offset: index ? sizeCache[index - 1].offset + sizeCache[index - 1].length : 0,\r\n                        length: postInnerHeight(itm, windowWidth - spaceOnSide)\r\n                    }\r\n                }\r\n            })\r\n            return newItems;\r\n        }}\r\n    />\r\n}\r\n/*\r\nexport const CreateMultiTermQuery = (searchTerms: string | string[]) => {\r\n    if (typeof searchTerms === 'string' ) searchTerms = [searchTerms];\r\n    let multiMatchQueryPart= [];\r\n    for (let d of searchTerms) {\r\n        const queryPart = {\r\n            \"multi_match\": {\r\n                \"fields\": [\"content.body\", \"content.title\"],\r\n                \"query\": `${d}`,\r\n                \"analyzer\": \"synonym_analyzer\",\r\n                \"boost\": 1\r\n            }\r\n        }\r\n        multiMatchQueryPart.push(queryPart)\r\n    }\r\n    let query ={\"bool\": {\r\n        \"should\": [\r\n        {\r\n            \"function_score\": {\r\n                \"query\": { \r\n                \"bool\": {\r\n                    \"must\": [\r\n                        {\r\n                        \"bool\": {\r\n                            \"should\": `${multiMatchQueryPart}`,\r\n                                \"minimum_should_match\": 1,\r\n                                \"boost\": 1\r\n                            }\r\n                            }\r\n                        ,\r\n                        {\r\n                            \"match\": {\r\n                            \"postType\": \"youtube\"\r\n                        }}\r\n                        ]\r\n                }\r\n                },\r\n                \"functions\": [\r\n                    {\r\n                    \"exp\": {\r\n                        \"platformCreatedAt\": {\r\n                        \"origin\": \"now\",\r\n                        \"scale\": \"7d\"\r\n                        }\r\n                    },\r\n                    \"weight\": 1.2\r\n                    }\r\n                ],\r\n                \"boost_mode\": \"replace\"\r\n            }\r\n        },\r\n        {\r\n            \"function_score\": {\r\n                \"query\": { \r\n                \"bool\": {\r\n                    \"must\": [\r\n                        {\r\n                        \"bool\": {\r\n                            \"should\": `${multiMatchQueryPart}`,\r\n                                \"minimum_should_match\": 1,\r\n                                \"boost\": 1\r\n                            }\r\n                            }\r\n                        ,\r\n                        {\r\n                            \"match\": {\r\n                            \"postType\": \"tweet\"\r\n                        }}\r\n                        ]\r\n                }},\r\n                \"functions\": [\r\n                    {\r\n                    \"exp\": {\r\n                        \"platformCreatedAt\": {\r\n                        \"origin\": \"now\",\r\n                        \"scale\": \"12h\"\r\n                        }\r\n                    },\r\n                    \"weight\": 1\r\n                    }\r\n                ],\r\n                \"boost_mode\": \"replace\"\r\n            }\r\n        },\r\n        {\r\n            \"function_score\": {\r\n                \"query\": { \r\n                \"bool\": {\r\n                    \"must\": [\r\n                        {\r\n                        \"bool\": {\r\n                            \"should\": `${multiMatchQueryPart}`,\r\n                                \"minimum_should_match\": 1,\r\n                                \"boost\": 1\r\n                            }\r\n                            }\r\n                        ,\r\n                        {\r\n                            \"match\": {\r\n                            \"postType\": \"substack\"\r\n                        }}\r\n                        ]\r\n                }},\r\n                \"functions\": [\r\n                    {\r\n                    \"exp\": {\r\n                        \"platformCreatedAt\": {\r\n                        \"origin\": \"now\",\r\n                        \"scale\": \"7d\"\r\n                        }\r\n                    },\r\n                    \"weight\": 1.2\r\n                    }\r\n                ],\r\n                \"boost_mode\": \"replace\"\r\n            }\r\n        },\r\n        {\r\n            \"function_score\": {\r\n                \"query\": { \r\n                \"bool\": {\r\n                    \"must\": [\r\n                        {\r\n                        \"bool\": {\r\n                            \"should\": `${multiMatchQueryPart}`,\r\n                                \"minimum_should_match\": 1,\r\n                                \"boost\": 1\r\n                            }\r\n                            }\r\n                        ,\r\n                        {\r\n                            \"match\": {\r\n                            \"postType\": \"spotify\"\r\n                        }}\r\n                        ]\r\n                }},\r\n                \"functions\": [\r\n                    {\r\n                    \"exp\": {\r\n                        \"platformCreatedAt\": {\r\n                        \"origin\": \"now\",\r\n                        \"scale\": \"7d\"\r\n                        }\r\n                    },\r\n                    \"weight\": 1.2\r\n                    }\r\n                ],\r\n                \"boost_mode\": \"replace\"\r\n            }\r\n        }\r\n        ],\r\n        \"minimum_should_match\": 1,\r\n        \"boost\": 1\r\n    }\r\n    }\r\n    return query;\r\n    \r\n} \r\n*/","import React, { PropsWithChildren, useEffect, useRef, useState, Component } from \"react\"\r\nimport { NavigationProp, useNavigation } from \"@react-navigation/native\"\r\nimport { Avatar, Icon } from \"@ui-kitten/components\"\r\nimport { View, Text, Pressable, ScrollView, useWindowDimensions, Animated, FlatList, NativeSyntheticEvent, NativeScrollEvent } from \"react-native\"\r\nimport { ElevatedSection, Section, Subsection } from \"./Section\"\r\nimport { NoteEditor, SecPressable } from \"../screens/WatchlistViewerScreen\"\r\nimport { fonts, sizes } from \"../style\"\r\nimport { AppColors } from \"../constants/Colors\"\r\nimport { toDollarsAndCents } from \"../utils/misc\"\r\n\r\nexport const WatchlistItemRenderItem = (props: {item: any, bySymbol: any, byId: any, hideEmptyNote: boolean, setShownMap: any, shownMap: any, watchlist: any}) => {\r\n    const symbol = props.item.item.symbol;\r\n    const secId = props.bySymbol[symbol] ? props.bySymbol[symbol].id : 0;\r\n    const intradayChange = props.item.item.price ? props.item.item.price.price - props.item.item.price.open : 0\r\n    //const hideEmptyNote = watchlist?.user[0].id !== appUser?.id\r\n    return (\r\n        <ElevatedSection title=\"\" style={{flex: 1, marginBottom: sizes.rem1_5 / 2, marginHorizontal: sizes.rem1_5 / 4, paddingHorizontal: sizes.rem0_5, paddingVertical: sizes.rem0_5}}>\r\n            <View style={{flex: 1, flexDirection: 'row', justifyContent: 'center'}}>\r\n                \r\n                <SecPressable securityId={secId}>                                        \r\n                    <Avatar\r\n                        style={{borderWidth: 1, borderColor: '#ccc'}}\r\n                        resizeMode={'contain'}\r\n                        size=\"medium\"\r\n                        shape=\"rounded\"\r\n                        source={\r\n                            (() => {\r\n                                let output: { uri: string } | undefined;\r\n                                \r\n                                output = props.bySymbol[symbol] ? { uri: props.bySymbol[symbol].logo_url  } : undefined\r\n                                return output;\r\n                            })()}\r\n                        />\r\n                </SecPressable>\r\n                <View style={{flex: 1, alignItems: 'center'}}>\r\n                    <View style={{flex: 1, flexDirection: 'row', alignItems: 'center'}}>\r\n                        <Text style={{ fontWeight: '900', color: '#454545'}}>\r\n                                    {props.byId[secId] ? (props.byId[secId].symbol === 'USD:CUR' ? 'Cash' : props.byId[secId].symbol) : ''}\r\n                        </Text>\r\n                        {/*<Pressable onPress={() => {\r\n                            if (props.item.item.note || !props.hideEmptyNote) {\r\n                                props.setShownMap({\r\n                                    ...props.shownMap,\r\n                                    [props.item.index]: !props.shownMap[props.item.index]\r\n                                })\r\n                            }\r\n                            }}\r\n                            style={{marginLeft: 10, justifyContent: 'flex-end'}}\r\n                            >\r\n                            <Icon style={{ opacity: (props.item.item.note || !props.hideEmptyNote) ? (props.item.item.note ? 1 : 0.5) : 0, height: 16 , width: 22 , }} \r\n                                name={!props.shownMap[props.item.index] ? \"file-text-outline\" : \"close-outline\"}\r\n                                fill={AppColors.primary}\r\n                                />\r\n                        </Pressable>\r\n                        */}\r\n                    </View>\r\n                    <View style={{flex: 1, flexDirection: 'row', alignItems: 'center'}}>\r\n                        <Text style={[{ color: '#606060', fontSize: fonts.xSmall, marginRight: 4}, intradayChange >= 0 ? (!intradayChange ? {color: 'black'} : {color: 'green'}) : {color: 'red'}]}>\r\n                            {`${toDollarsAndCents(intradayChange)}`}\r\n                        </Text>\r\n                        <Text style={{ color: '#606060', fontSize: fonts.xSmall}}>\r\n                            {`${toDollarsAndCents(props.item.item.price?.price)}`}\r\n                        </Text>\r\n\r\n\r\n                    </View>\r\n\r\n                </View>\r\n                \r\n            \r\n            </View>\r\n            <View>\r\n                {props.shownMap[props.item.index] && props.watchlist ?\r\n                    <NoteEditor note={props.item.item.note} \r\n                                onChangeNote={(note) => {\r\n                                    props.item.item.note = note;\r\n                                }} \r\n                                canEdit={!props.hideEmptyNote} \r\n                                ticker={props.item.item.symbol} \r\n                                watchlistId={props.watchlist.id} /> \r\n                                : null\r\n                                }\r\n            </View>\r\n        </ElevatedSection>\r\n    )\r\n}","import { NavigationProp, useFocusEffect, useNavigation } from \"@react-navigation/native\"\r\nimport { Api, Interface } from \"@tradingpost/common/api\"\r\nimport WatchlistApi from \"@tradingpost/common/api/entities/apis/WatchlistApi\"\r\nimport { IWatchlistGetExt } from \"@tradingpost/common/api/entities/extensions/Watchlist\"\r\nimport { ISecurityList } from \"@tradingpost/common/api/entities/interfaces\"\r\nimport { Avatar, Icon } from \"@ui-kitten/components\"\r\nimport React, { PropsWithChildren, useEffect, useRef, useState, Component, useCallback } from \"react\"\r\nimport { Header, Subheader } from \"../components/Headers\";\r\nimport { View, Text, Pressable, ScrollView, useWindowDimensions, Animated, FlatList, NativeSyntheticEvent, NativeScrollEvent } from \"react-native\"\r\nimport { useToast } from \"react-native-toast-notifications\"\r\nimport { useAppUser } from \"../Authentication\"\r\nimport { DeleteButton, EditButton, FavButton } from \"../components/AddButton\"\r\nimport { ProfileBar } from \"../components/ProfileBar\"\r\nimport { ElevatedSection, Section, Subsection } from \"../components/Section\"\r\nimport { ITableColumn, Table } from \"../components/Table\"\r\nimport { TextField } from \"../components/TextField\"\r\nimport { AppColors } from \"../constants/Colors\"\r\nimport { elevated, flex, fonts, paddView, paddViewWhite, row, sizes } from \"../style\"\r\nimport { useSecuritiesList } from '../SecurityList'\r\nimport { toDollarsAndCents, toNumber1, toPercent, toPercent1, toPercent2 } from \"../utils/misc\"\r\nimport { MultiTermFeedPart } from \"../components/MultiTermFeed\"\r\nimport { List } from \"../components/List\"\r\nimport { WatchlistItemRenderItem } from \"../components/WatchlistItemRenderItem\"\r\nimport { PrimaryChip } from \"../components/PrimaryChip\"\r\nimport { sleep } from \"@tradingpost/common/utils/sleep\"\r\n\r\n\r\nexport const useNoteField = (hideEmptyNote?: boolean) => {\r\n    const [shownMap, setShownMap] = useState<Record<string, boolean>>({})\r\n    return {\r\n        shownMap,\r\n        column: {\r\n            field: (info: { index: number, item: { note?: string } }) => {\r\n                return <Pressable onPress={() => {\r\n                    if (info.item.note || !hideEmptyNote) {\r\n                        setShownMap({\r\n                            ...shownMap,\r\n                            [info.index]: !shownMap[info.index]\r\n                        })\r\n                    }\r\n                }}>\r\n                    <Icon style={{ opacity: (info.item.note || !hideEmptyNote) ? (info.item.note ? 1 : 0.25) : 0, height: 16, width: 22 }} name={!shownMap[info.index] ? \"file-text-outline\" : \"close-outline\"}\r\n                        fill={AppColors.primary}\r\n                    /></Pressable>\r\n            }, alias: \" \", width: 32\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport const SecPressable = (props: PropsWithChildren<{ securityId: number }>) => {\r\n    const nav = useNavigation<NavigationProp<AllPages>>();\r\n    return <Pressable onPress={() => {\r\n        if (props.securityId !== -1) {\r\n        nav.navigate(\"Company\", {\r\n            securityId: props.securityId\r\n        })\r\n        }\r\n    }}>{props.children}</Pressable>\r\n}\r\n\r\nexport const useMakeSecurityFields = (getIdValue: (itm: any) => string | number) => {\r\n    const { securities: { bySymbol, byId } } = useSecuritiesList();\r\n    return [{\r\n        field: (a: any) => {\r\n            const value = getIdValue(a.item);\r\n            return (\r\n                <View style={{ overflow: 'visible' }}>\r\n                    <SecPressable securityId={\r\n                        (() => {\r\n                            if (typeof value === \"string\")\r\n                                return bySymbol[value]?.id || -1\r\n                            else\r\n                                return byId[value]?.id || -1\r\n                        })()\r\n                    }>\r\n                        <Avatar style={{ marginRight: sizes.rem0_5 }}\r\n                                resizeMode={'contain'}\r\n                                source={\r\n                                    (() => {\r\n                                        let output: { uri: string } | undefined;\r\n                                        if (typeof value === \"string\")\r\n                                            output = bySymbol[value] ? { uri: bySymbol[value].logo_url } : undefined\r\n                                        else\r\n                                            output = byId[value] ? { uri: byId[value].logo_url  } : undefined\r\n                                        return output;\r\n                                    })()}\r\n                                size=\"tiny\"\r\n                        />\r\n\r\n                    </SecPressable>\r\n                </View>\r\n            )\r\n        },\r\n        headerStyle: {\r\n            width: sizes.rem10 / 2,\r\n            //marginRight: sizes.rem0_5,\r\n            overflow: \"visible\" as \"visible\"\r\n        },\r\n        alias: \"Ticker\",\r\n        align: \"left\" as \"left\",\r\n        width: sizes.rem2\r\n    },\r\n    {\r\n        alias: \"\",\r\n        width: sizes.rem6 / 2,\r\n        align: \"left\" as \"left\",\r\n        style: { lineHeight: sizes.rem1_5 },\r\n        headerStyle: {\r\n            width: 0,\r\n        },\r\n        stringify: (value: any, key: any, item: any) => {\r\n            const v = getIdValue(item);\r\n            if (typeof v === \"string\")\r\n                return bySymbol[v]?.symbol === 'USD:CUR' ? 'Cash' : bySymbol[v]?.symbol || \"\"\r\n            else\r\n                return byId[v]?.symbol === 'USD:CUR' ? 'Cash' : byId[v]?.symbol || \"\"\r\n        }\r\n    }\r\n    ]\r\n}\r\n\r\nexport const useWatchlistItemColumns = (hideEmptyNote?: boolean) => {\r\n\r\n    const [iconField, secField] = useMakeSecurityFields((item) => item.symbol);\r\n    const { column, shownMap } = useNoteField(hideEmptyNote);\r\n    return {\r\n        shownMap,\r\n        columns: [\r\n            iconField,\r\n            secField,\r\n            {\r\n                alias: \"Price\",\r\n                field: (a) => {\r\n                    const change = a.item.price?.price || a.item.price?.open ? (a.item.price?.price - a.item.price?.open) / a.item.price?.open : 0\r\n                    return (\r\n                        <View style={{ justifyContent: 'center', flexDirection: 'row', flex: 1 }}>\r\n                            <Text style={[change ? change >= 0 ? { color: 'green' } : { color: 'red' } : {}, { marginRight: sizes.rem0_5 }]}>{`(${toPercent2(change)})`}</Text>\r\n                            <Text>{toDollarsAndCents(a.item.price?.price)}</Text>\r\n                        </View>\r\n                    )\r\n                },\r\n                //align: 'left' as 'left',\r\n                //width: sizes.rem6\r\n                /*\r\n                stringify: (a, b, c) => {\r\n                    if (c.price?.price) {\r\n                        return toDollarsAndCents(c.price.price);\r\n                    }\r\n                    else\r\n                        return \"-\"\r\n                }\r\n                */\r\n            }/*,\r\n            {\r\n                alias: \"Date Added\",\r\n                stringify: (a, b, c) => {\r\n                    if (c.price?.time) {\r\n                        return (new Date(c.date_added)).toLocaleDateString() || \"-\"\r\n                    }\r\n                    else {\r\n                        return \"-\";\r\n                    }\r\n                }\r\n            }*/,\r\n            column\r\n            //        { field: \"symbol\", align: \"left\", style: { lineHeight: sizes.rem1_5 } },\r\n        ] as ITableColumn<IWatchlistGetExt[\"items\"][number]>[]\r\n    }\r\n}\r\n\r\n\r\nexport const WatchlistViewerScreen = (props: TabScreenProps<{ watchlistId: number }>) => {\r\n    const [watchlist, setWatchlist] = useState<IWatchlistGetExt>()\r\n    const watchlistId = props.route?.params?.watchlistId;\r\n    const [isSaved, setIsFav] = useState(false)\r\n    const [watchlistTickers, setWatchlistTickers] = useState<string[]>();\r\n    const { loginState } = useAppUser();\r\n    const appUser = loginState?.appUser;\r\n    const { width: windowWidth, height: windowHeight } = useWindowDimensions();\r\n    const translateHeaderY = useRef(new Animated.Value(0)).current;\r\n    const scrollRef = useRef<FlatList>(null);\r\n\r\n    const toast = useToast();\r\n    useFocusEffect(useCallback(() => {\r\n        (async () => {\r\n            try {\r\n                if (watchlistId) {\r\n                    const w = await WatchlistApi.get(watchlistId)\r\n                    setIsFav(w.is_saved)\r\n                    setWatchlist(w as IWatchlistGetExt);\r\n                }\r\n                if (watchlist) {\r\n                    setWatchlistTickers(watchlist.items.map(a => `$${a.symbol}`))\r\n                }\r\n            } catch (err) {\r\n                console.error(err);\r\n            }\r\n        })()\r\n    }, []))\r\n    useFocusEffect(useCallback(() => {\r\n        (async () => {\r\n            try {\r\n                if (watchlist) {\r\n                    setWatchlistTickers(watchlist.items.map(a => `$${a.symbol}`))\r\n                }\r\n            } catch (err) {\r\n                console.error(err);\r\n            }\r\n        })()\r\n    }, [watchlist]))\r\n\r\n    useFocusEffect(useCallback(() => {\r\n        (async () => {\r\n            try {\r\n                if (watchlistId) {\r\n                    const w = await WatchlistApi.get(watchlistId)\r\n                    setIsFav(w.is_saved)\r\n                    setWatchlist(w as IWatchlistGetExt);\r\n                }\r\n                if (watchlist) {\r\n                    setWatchlistTickers(watchlist.items.map(a => `$${a.symbol}`))\r\n                }\r\n            } catch (err) {\r\n                console.error(err);\r\n            }\r\n        })()\r\n    }, [watchlistId]))\r\n\r\n    const { securities: { bySymbol, byId } } = useSecuritiesList();\r\n    const [shownMap, setShownMap] = useState<Record<string, boolean>>({})\r\n    return <View style={[flex]}>\r\n        <Animated.FlatList\r\n            data={[\r\n                <View\r\n                    style={{\r\n                        paddingTop: sizes.rem0_5, backgroundColor: AppColors.background,\r\n                        alignItems: \"stretch\", width: \"100%\"\r\n                    }}\r\n                >\r\n                    <View style={[\r\n                        //collapsed ? {display: 'none'} : {display: 'flex'},\r\n                        { paddingHorizontal: sizes.rem1, backgroundColor: AppColors.background }]}>\r\n                        <Header text={watchlist?.name || \"\"} />\r\n                        <ElevatedSection title={\"\"}>\r\n                            <View style={{flex: 1, flexDirection: 'row', alignContent: 'center'}}>\r\n                                <ProfileBar style={{flex: 1}} user={watchlist?.user[0]} />\r\n                                <View style={{flex: 1, alignContent: 'center', justifyContent: 'center'}}>\r\n                                    <PrimaryChip style={{width: '50%'}} isAlt key={watchlist?.id} label={watchlist?.type ? watchlist.type.slice(0,1).toUpperCase() + watchlist.type.slice(1) : ''} />\r\n                                </View>\r\n                                {watchlist?.user[0].id === appUser?.id ? \r\n                                    <EditButton\r\n                                        height={24}\r\n                                        width={24} \r\n                                        onPress={() => {\r\n                                            props.navigation.navigate(\"WatchlistEditor\", {\r\n                                                watchlistId: watchlistId\r\n                                            })\r\n                                        }} /> : \r\n                                    <FavButton\r\n                                        height={24}\r\n                                        width={24}\r\n                                        isSelected={isSaved}\r\n                                        onPress={() => {\r\n                                            try {\r\n                                                if (watchlistId) {\r\n                                                    Api.Watchlist.extensions.saveWatchlist({\r\n                                                        id: watchlistId,\r\n                                                        is_saved: !isSaved\r\n                                                    })\r\n                                                    setIsFav(f => !f);\r\n                                                    toast.show(\"Watchlist Added\")\r\n                                                }\r\n                                            } catch (err) {\r\n                                                console.error(err);\r\n                                            }\r\n                                        }}\r\n                                    />}\r\n                            </View>\r\n                            \r\n                            <Text style={[{ marginVertical: sizes.rem0_5 }, !watchlist?.note ? { color: \"#ccc\", fontStyle: \"italic\" } : undefined]}>\r\n                                {watchlist?.note || \"No Notes\"}\r\n                            </Text>\r\n                            \r\n                        </ElevatedSection>\r\n                    </View>\r\n                    <View style={[\r\n                        //collapsed ? {display: 'none'} : {display: 'flex'},\r\n                        { paddingHorizontal: sizes.rem1, backgroundColor: AppColors.background }]}>\r\n                        <Section title=\"Stocks\"\r\n                                 style={{backgroundColor: AppColors.background}}>\r\n                                 \r\n                            <List   \r\n                                listKey={`watchlist_id}`}\r\n                                datasetKey={`watchlist_id_${watchlist?.items.length}`}\r\n                                data={watchlist?.items}\r\n                                loadingMessage={\" \"}\r\n                                noDataMessage={\" \"}\r\n                                loadingItem={undefined}\r\n                                numColumns={2}\r\n                                renderItem={(item)=> {\r\n                                    const symbol = item.item.symbol;\r\n                                    const secId = bySymbol[symbol] ? bySymbol[symbol].id : 0;\r\n                                    const intradayChange = item.item.price ? item.item.price.price - item.item.price.open : 0\r\n                                    const hideEmptyNote = watchlist?.user[0].id !== appUser?.id\r\n                                    return (\r\n                                        <WatchlistItemRenderItem \r\n                                            item={item}\r\n                                            bySymbol={bySymbol}\r\n                                            byId={byId}\r\n                                            hideEmptyNote={hideEmptyNote}\r\n                                            setShownMap={setShownMap}\r\n                                            shownMap={shownMap}\r\n                                            watchlist={watchlist}/>\r\n                                    )\r\n                                }}\r\n                                />\r\n                        </Section>\r\n                    </View>\r\n                    <View style={[{ paddingHorizontal: sizes.rem1, backgroundColor: AppColors.background }]}>\r\n                        <Header text=\"Watchlist Posts\" />\r\n                    </View>\r\n                </View>,\r\n                <View style={[{ paddingHorizontal: 0 }]}\r\n                >\r\n                    {watchlistTickers && <MultiTermFeedPart key={watchlistTickers ? watchlistTickers.join() : \"___\"} searchText={watchlistTickers} />}\r\n                </View>\r\n            ]}\r\n            renderItem={(info) => {\r\n                return info.item;\r\n            }}\r\n            ref={scrollRef} contentContainerStyle={[{ paddingTop: 0 }]} nestedScrollEnabled\r\n            onScroll={Animated.event<NativeSyntheticEvent<NativeScrollEvent>>([\r\n                { nativeEvent: { contentOffset: { y: translateHeaderY } } }\r\n            ], { useNativeDriver: true })}>\r\n        </Animated.FlatList>\r\n    </View>\r\n}\r\n\r\nexport const NoteEditor = (props: { canEdit: boolean, note: string | undefined, ticker: string, watchlistId: number, onChangeNote: (note: string) => void }) => {\r\n    const [isEdit, setIsEdit] = useState(!props.note && props.canEdit);\r\n    const [note, setNote] = useState(props.note)\r\n\r\n    return (!props.canEdit || (!isEdit && note)) ?\r\n        <View style={{ flexDirection: \"row\", alignItems: \"center\" }}><Text><Text style={{ fontWeight: \"bold\" }}>Note:</Text>{note}</Text>\r\n            {props.canEdit && <EditButton\r\n                style={{ marginLeft: \"auto\" }}\r\n                height={24} width={24} onPress={() => {\r\n                    setIsEdit(true);\r\n                }}\r\n            />}\r\n\r\n        </View> :\r\n        <View style={[row, { alignItems: \"center\" }]}><TextField placeholder=\"Add a note\" style={flex} value={note} onChangeText={(t) => {\r\n            setNote(t);\r\n        }} /><Pressable onPress={() => {\r\n            props.onChangeNote(note || \"\");\r\n            setIsEdit(false)\r\n        }\r\n        }><Icon name=\"checkmark-outline\" fill={AppColors.primary} style={{\r\n            height: 24,\r\n            width: 24\r\n        }} />\r\n            </Pressable>\r\n        </View>\r\n\r\n}\r\n/*\r\nclass WrappedView extends Component<finishedLoadingProp> {\r\n    finishedLoading: boolean;\r\n    constructor(props: finishedLoadingProp) {\r\n        super(props)\r\n        this.finishedLoading = props.finishedLoading\r\n    }\r\n    shouldComponentUpdate(nextProps: Readonly<ViewProps>, nextState: Readonly<{}>, nextContext: any): boolean {\r\n        if (this.finishedLoading){\r\n            return false;\r\n        }\r\n        else {\r\n            return true\r\n        }\r\n    }\r\n    render(): React.ReactNode {\r\n        let {style, children} = this.props\r\n        return (\r\n            <View style={style}>\r\n                {children}\r\n            </View>\r\n        )\r\n    }\r\n}\r\nexport interface finishedLoadingProp extends ViewProps {\r\n    finishedLoading: boolean\r\n}\r\n\r\n\r\nclass WrappedAnimatedView extends Component<finishedLoadingProp> {\r\n    finishedLoading: boolean;\r\n    constructor(props: finishedLoadingProp) {\r\n        super(props)\r\n        this.finishedLoading = props.finishedLoading\r\n    }\r\n    shouldComponentUpdate(nextProps: Readonly<ViewProps>, nextState: Readonly<{}>, nextContext: any): boolean {\r\n        if (this.finishedLoading){\r\n            return false;\r\n        }\r\n        else {\r\n            return true\r\n        }\r\n    }\r\n    render(): React.ReactNode {\r\n        let {style, children} = this.props\r\n        return (\r\n            <Animated.View style={style}>\r\n                {children}\r\n            </Animated.View>\r\n        )\r\n    }\r\n}\r\n*/","import { useFocusEffect, useNavigation } from \"@react-navigation/native\"\r\nimport { Interface } from \"@tradingpost/common/api\"\r\nimport { IWatchlistList } from \"@tradingpost/common/api/entities/interfaces\"\r\nimport React, { useCallback, useEffect, useState } from \"react\"\r\nimport { Pressable, Text, View } from \"react-native\"\r\nimport { AppColors } from \"../constants/Colors\"\r\nimport { PlusIcon } from \"../images\"\r\nimport { useNoteField } from \"../screens/WatchlistViewerScreen\"\r\nimport { fonts, row, sizes } from \"../style\"\r\nimport { AddButton } from \"./AddButton\"\r\nimport { List } from \"./List\"\r\nimport { ElevatedSection, Section } from \"./Section\"\r\nimport { ITableColumn, Table } from \"./Table\"\r\n\r\n\r\nexport function WatchlistSection(props: { title: string, watchlists: Interface.IWatchlistList[] | undefined, showAddButton?: boolean, shared?: boolean, hideNoteOnEmpty?: boolean, datasetKey?: string }) {\r\n    const nav = useNavigation<any>();\r\n    const [focus, setFocus] = useState(false);\r\n    useFocusEffect(useCallback(()=> {\r\n        setFocus((f) => !f)\r\n    },[]))\r\n    const fields: ITableColumn<IWatchlistList>[] = !props.shared ?\r\n        [{ field: \"name\", alias: \"Name\", align: \"left\" },\r\n        { field: \"item_count\", alias: \"Items\" },\r\n        { field: \"saved_by_count\", alias: \"Saves\" },\r\n        { field: \"type\", alias: \"Type\" }] :\r\n\r\n        [{ field: \"name\", alias: \"Name\", align: \"left\" },\r\n        {field: \"user\", align: \"left\", alias: \"Analyst\", stringify: (user: IWatchlistList[\"user\"], key, item) => {return user[0].handle}}]\r\n    const { column, shownMap } = useNoteField(props.hideNoteOnEmpty);\r\n    return <Section title={props.title} style={{backgroundColor: AppColors.background}} button={props.showAddButton ? (p) => <AddButton height={p.height} width={p.width} onPress={() => {\r\n        nav.navigate(\"WatchlistEditor\")\r\n    }} /> : undefined}>\r\n        <List \r\n            datasetKey={`${props.datasetKey ? props.datasetKey : props.watchlists?.length}`}\r\n            listKey={props.title}\r\n            loadingMessage={\" \"}\r\n            noDataMessage={\" \"}\r\n            loadingItem={undefined}\r\n            numColumns={1}\r\n            data={props.watchlists}\r\n            ListHeaderComponent={() => {\r\n                return <View key={\"table_header\"} style={{marginHorizontal: sizes.rem1_5 / 4, paddingHorizontal: sizes.rem0_5, marginBottom: sizes.rem1 / 2}}>\r\n                <View style={[row]}>\r\n                    {fields.map((c, i) => {\r\n                        return <Text key={`header_${i}`} numberOfLines={1} style={{flex: 1, textAlign: 'center', fontSize: fonts.small, color: '#9D9D9D'}} >{c.alias}</Text>\r\n                    })}\r\n                </View>\r\n            </View>\r\n            }}\r\n            renderItem={(item)=> {\r\n                return (\r\n                    <ElevatedSection title=\"\" style={{flex: 1, marginBottom: sizes.rem1_5 / 2, marginHorizontal: sizes.rem1_5 / 4, paddingHorizontal: sizes.rem0_5, paddingVertical: sizes.rem0_5}}>\r\n                        <Pressable\r\n                            onPress={() => {\r\n                                nav.navigate(\"WatchlistViewer\", {\r\n                                    watchlistId: item.item.id\r\n                                })\r\n                        }}>\r\n                            <View style={{flex: 1, flexDirection: 'row', justifyContent: 'space-around'}}>\r\n                                {\r\n                                fields.map((c, i) => { \r\n                                    return (\r\n                                        <Text style={{flex: 1, textAlign: 'center'}}> \r\n                                            {c.field ? \r\n                                                (c.field === 'user' ? item.item[c.field][0].handle : \r\n                                                    (c.field === 'type' ? item.item[c.field].slice(0,1).toUpperCase() + item.item[c.field].slice(1) : item.item[c.field])) : \r\n                                                ''} \r\n                                        </Text>\r\n                                        )\r\n                                        }\r\n                                    )\r\n                                }\r\n                            </View>\r\n                        </Pressable>\r\n                    </ElevatedSection>\r\n\r\n                )\r\n            }}\r\n        \r\n        />\r\n        {/*<Table\r\n            listKey={props.title}\r\n            datasetKey={`${focus}`}\r\n            noDataMessage={props.shared ? \"No Shared Watchlists\" : \"No Watchlists\"}\r\n            columns={[\r\n                ...fields,\r\n                column\r\n            ]}\r\n            rowPressed={(item, idx) => {\r\n                nav.navigate(\"WatchlistViewer\", {\r\n                    watchlistId: item.id\r\n                })\r\n            }}\r\n            renderAuxItem={(info) => shownMap[info.index] ? <Text><Text style={{ fontWeight: \"bold\" }}>Details: </Text>{info.item.note}</Text> : null}\r\n            data={props.watchlists}\r\n        />*/}\r\n    </Section>\r\n}\r\n","import React from \"react\"\r\nimport { Pressable } from \"react-native\"\r\nimport { shadow } from \"../style\"\r\nimport { IconifyIcon } from \"./IconfiyIcon\"\r\nimport plusCircle from '../assets/@iconify/plus-circle'\r\nimport { AppColors } from \"../constants/Colors\"\r\n\r\n/**\r\n * This component assumes it will be placed in the bottom right corner of its parent.\r\n * @param props \r\n * @returns \r\n */\r\nexport const PlusContentButton = (props: {\r\n    onPress: () => void\r\n}) => {\r\n\r\n    return <Pressable style={[shadow, {\r\n        position: \"absolute\",\r\n        bottom: 10,\r\n        right: 10,\r\n        backgroundColor: \"blue\",\r\n        height: 62, aspectRatio: 1,\r\n        borderRadius: 34,\r\n        overflow: \"hidden\"\r\n    }]} onPress={props.onPress}>\r\n        <IconifyIcon icon={plusCircle} currentColor=\"green\" style={{ height: 64 * 1.2, width: 64 * 1.2, aspectRatio: 1, margin: 0, padding: 0, backgroundColor: \"white\" }} svgProps={{\r\n            style: {\r\n                height: 64 * 1.2,\r\n                width: 64 * 1.2,\r\n                marginTop: \"-10%\",\r\n                marginLeft: \"-10%\"\r\n            }\r\n        }} />\r\n    </Pressable>\r\n}","import {NavigationProp, useNavigation} from \"@react-navigation/native\";\r\nimport {Api, Interface} from \"@tradingpost/common/api\";\r\nimport React, {useEffect, useState} from \"react\";\r\nimport {useWindowDimensions} from \"react-native\";\r\nimport {View, Text} from \"react-native\";\r\nimport {PlusContentButton} from \"../components/PlusContentButton\";\r\nimport {PostList} from \"../components/PostList\";\r\nimport {spaceOnSide, postInnerHeight, PostView} from \"../components/PostView\";\r\nimport {DashTabScreenProps} from \"../navigation/pages\";\r\n\r\nexport const FeedScreen = (props: DashTabScreenProps<'Feed'>) => {\r\n    const [searchText, setSearchText] = useState(\"\")\r\n    const nav = useNavigation();\r\n\r\n    //useEffect(()=>{\r\n    //props.navigation.setOptions({\r\n    //headerRight:\r\n    //  })\r\n    // return <Pressable onPress={() => {\r\n    //     navigation.setParams({\r\n    //       bookmarkedOnly: true\r\n    //     })\r\n    //   }}>\r\n    //     <IconButton iconSource={BookmarkIcons.inactive} style={{ height: 24, width: 24 }} />\r\n    //   </Pressable>\r\n    //},[])\r\n\r\n    return (\r\n        <View style={{flex: 1, backgroundColor: \"#F7f8f8\"}}>\r\n            <FeedPart bookmarkedOnly={props.route.params.bookmarkedOnly === \"true\"} searchText={searchText}/>\r\n            <PlusContentButton onPress={() => {\r\n                nav.navigate(\"PostEditor\")\r\n            }}/>\r\n        </View>\r\n    );\r\n}\r\n\r\n\r\nexport const FeedPart = (props: {\r\n    bookmarkedOnly?: boolean,\r\n    searchText?: string,\r\n    userId?: string\r\n}) => {\r\n    const {width: windowWidth} = useWindowDimensions();\r\n    const {searchText, bookmarkedOnly, userId} = props\r\n    return <PostList\r\n        key={bookmarkedOnly ? String(Date.now()) : \"STATIC\"}\r\n        datasetKey={searchText ? searchText : \"____________\"}\r\n        posts={async (allItems, page, sizeCache) => {\r\n            console.log(\"PAGE: \", page)\r\n            const posts = (await Api.Post.extensions.feed({\r\n                page,\r\n                bookmarkedOnly: bookmarkedOnly,\r\n                userId,\r\n                data: searchText ? {\r\n                    terms: (() => {\r\n                        if (searchText[0] === '$') {\r\n                            console.log('lowercasing')\r\n                            return searchText.toLowerCase()\r\n                        } else {\r\n                            return searchText\r\n                        }\r\n                    })()\r\n                } : undefined\r\n            }));\r\n\r\n            const newItems = [...(allItems || []), ...posts]\r\n            newItems.forEach((itm, index) => {\r\n                if (!sizeCache[index]) {\r\n                    sizeCache[index] = {\r\n                        index,\r\n                        offset: index ? sizeCache[index - 1].offset + sizeCache[index - 1].length : 0,\r\n                        length: postInnerHeight(itm, windowWidth - spaceOnSide)\r\n                    }\r\n                }\r\n            })\r\n            return newItems;\r\n        }}\r\n    />\r\n}","import React, { Component } from 'react'\r\nimport { InteractionManager } from 'react-native'\r\nimport PropTypes from 'prop-types'\r\nimport { Path } from 'react-native-svg'\r\nimport * as interpolate from 'd3-interpolate-path'\r\n\r\nclass AnimatedPath extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = { d: props.d }\r\n    }\r\n\r\n    componentDidUpdate(props) {\r\n        const { d: newD, animate } = this.props\r\n        const { d: oldD } = props\r\n\r\n        this.newD = newD\r\n\r\n        if (newD === oldD) {\r\n            return\r\n        }\r\n\r\n        if (!animate || newD === null || oldD === null) {\r\n            return\r\n        }\r\n\r\n        this.newD = newD\r\n        this.interpolator = interpolate.interpolatePath(oldD, newD)\r\n\r\n        this._animate()\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        cancelAnimationFrame(this.animation)\r\n        this._clearInteraction()\r\n    }\r\n\r\n    _animate(start) {\r\n        cancelAnimationFrame(this.animation)\r\n        this.animation = requestAnimationFrame((timestamp) => {\r\n            if (!start) {\r\n                this._clearInteraction()\r\n                this.handle = InteractionManager.createInteractionHandle()\r\n\r\n                start = timestamp\r\n            }\r\n\r\n            // Get the delta on how far long in our animation we are.\r\n            const delta = (timestamp - start) / this.props.animationDuration\r\n\r\n            // If we're above 1 then our animation should be complete.\r\n            if (delta > 1) {\r\n                // Just to be safe set our final value to the new graph path.\r\n                this.component.setNativeProps({ d: this.newD })\r\n                // Stop our animation loop.\r\n                this._clearInteraction()\r\n                return\r\n            }\r\n\r\n            const d = this.interpolator(delta)\r\n            this.component.setNativeProps({ d })\r\n            // console.log(this.interpolator)\r\n            // this.tween && console.log(this.tween.tween(delta))\r\n            // Tween the SVG path value according to what delta we're currently at.\r\n\r\n            // Update our state with the new tween value and then jump back into\r\n            // this loop.\r\n            this.setState(this.state, () => {\r\n                this._animate(start)\r\n            })\r\n        })\r\n    }\r\n\r\n    _clearInteraction() {\r\n        if (this.handle) {\r\n            InteractionManager.clearInteractionHandle(this.handle)\r\n            this.handle = null\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Path\r\n                ref={(ref) => (this.component = ref)}\r\n                {...this.props}\r\n                d={this.props.animate ? this.state.d : this.props.d}\r\n            />\r\n        )\r\n    }\r\n}\r\n\r\nAnimatedPath.propTypes = {\r\n    animate: PropTypes.bool,\r\n    animationDuration: PropTypes.number,\r\n    renderPlaceholder: PropTypes.func,\r\n    ...Path.propTypes,\r\n}\r\n\r\nAnimatedPath.defaultProps = {\r\n    animate: false,\r\n    animationDuration: 300,\r\n    renderPlaceholder: () => null,\r\n}\r\n\r\nexport default AnimatedPath\r\n","import * as array from 'd3-array'\r\nimport * as scale from 'd3-scale'\r\nimport * as shape from 'd3-shape'\r\nimport PropTypes from 'prop-types'\r\nimport React, { PureComponent } from 'react'\r\nimport { View } from 'react-native'\r\nimport Svg from 'react-native-svg'\r\nimport Path from '../animated-path'\r\n\r\nclass Chart extends PureComponent {\r\n    state = {\r\n        width: 0,\r\n        height: 0,\r\n    }\r\n\r\n    _onLayout(event) {\r\n        const {\r\n            nativeEvent: {\r\n                layout: { height, width },\r\n            },\r\n        } = event\r\n        this.setState({ height, width })\r\n    }\r\n\r\n    createPaths() {\r\n        throw 'Extending \"Chart\" requires you to override \"createPaths'\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            data,\r\n            xAccessor,\r\n            yAccessor,\r\n            yScale,\r\n            xScale,\r\n            style,\r\n            animate,\r\n            animationDuration,\r\n            numberOfTicks,\r\n            contentInset: { top = 0, bottom = 0, left = 0, right = 0 },\r\n            gridMax,\r\n            gridMin,\r\n            clampX,\r\n            clampY,\r\n            svg,\r\n            children,\r\n        } = this.props\r\n\r\n        const { width, height } = this.state\r\n\r\n        if (data.length === 0) {\r\n            return <View style={style} />\r\n        }\r\n\r\n        const mappedData = data.map((item, index) => ({\r\n            y: yAccessor({ item, index }),\r\n            x: xAccessor({ item, index }),\r\n        }))\r\n\r\n        const yValues = mappedData.map((item) => item.y)\r\n        const xValues = mappedData.map((item) => item.x)\r\n\r\n        const yExtent = array.extent([...yValues, gridMin, gridMax])\r\n        const xExtent = array.extent([...xValues])\r\n\r\n        const { yMin = yExtent[0], yMax = yExtent[1], xMin = xExtent[0], xMax = xExtent[1] } = this.props\r\n\r\n        //invert range to support svg coordinate system\r\n        const y = yScale()\r\n            .domain([yMin, yMax])\r\n            .range([height - bottom, top])\r\n            .clamp(clampY)\r\n\r\n        const x = xScale()\r\n            .domain([xMin, xMax])\r\n            .range([left, width - right])\r\n            .clamp(clampX)\r\n\r\n        const paths = this.createPaths({\r\n            data: mappedData,\r\n            x,\r\n            y,\r\n        })\r\n\r\n        const ticks = y.ticks(numberOfTicks)\r\n\r\n        const extraProps = {\r\n            x,\r\n            y,\r\n            data,\r\n            ticks,\r\n            width,\r\n            height,\r\n            ...paths,\r\n        }\r\n\r\n        return (\r\n            <View style={style}>\r\n                <View style={{ flex: 1 }} onLayout={(event) => this._onLayout(event)}>\r\n                    {height > 0 && width > 0 && (\r\n                        <Svg style={{ height, width }}>\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                            <Path\r\n                                fill={'none'}\r\n                                {...svg}\r\n                                d={paths.path}\r\n                                animate={animate}\r\n                                animationDuration={animationDuration}\r\n                            />\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && !child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                        </Svg>\r\n                    )}\r\n                </View>\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nChart.propTypes = {\r\n    data: PropTypes.oneOfType([\r\n        PropTypes.arrayOf(PropTypes.object),\r\n        PropTypes.arrayOf(PropTypes.number),\r\n        PropTypes.arrayOf(PropTypes.array),\r\n    ]).isRequired,\r\n    svg: PropTypes.object,\r\n\r\n    style: PropTypes.any,\r\n\r\n    animate: PropTypes.bool,\r\n    animationDuration: PropTypes.number,\r\n\r\n    curve: PropTypes.func,\r\n    contentInset: PropTypes.shape({\r\n        top: PropTypes.number,\r\n        left: PropTypes.number,\r\n        right: PropTypes.number,\r\n        bottom: PropTypes.number,\r\n    }),\r\n    numberOfTicks: PropTypes.number,\r\n\r\n    gridMin: PropTypes.number,\r\n    gridMax: PropTypes.number,\r\n\r\n    yMin: PropTypes.any,\r\n    yMax: PropTypes.any,\r\n    xMin: PropTypes.any,\r\n    xMax: PropTypes.any,\r\n    clampX: PropTypes.bool,\r\n    clampY: PropTypes.bool,\r\n\r\n    xScale: PropTypes.func,\r\n    yScale: PropTypes.func,\r\n\r\n    xAccessor: PropTypes.func,\r\n    yAccessor: PropTypes.func,\r\n}\r\n\r\nChart.defaultProps = {\r\n    svg: {},\r\n    width: 100,\r\n    height: 100,\r\n    curve: shape.curveLinear,\r\n    contentInset: {},\r\n    numberOfTicks: 10,\r\n    xScale: scale.scaleLinear,\r\n    yScale: scale.scaleLinear,\r\n    xAccessor: ({ index }) => index,\r\n    yAccessor: ({ item }) => item,\r\n}\r\n\r\nexport default Chart\r\n","import * as shape from 'd3-shape'\r\nimport PropTypes from 'prop-types'\r\nimport Chart from './chart/chart'\r\n\r\nclass AreaChart extends Chart {\r\n    createPaths({ data, x, y }) {\r\n        const { curve, start } = this.props\r\n\r\n        const area = shape\r\n            .area()\r\n            .x((d) => x(d.x))\r\n            .y0(y(start))\r\n            .y1((d) => y(d.y))\r\n            .defined((item) => typeof item.y === 'number')\r\n            .curve(curve)(data)\r\n\r\n        const line = shape\r\n            .line()\r\n            .x((d) => x(d.x))\r\n            .y((d) => y(d.y))\r\n            .defined((item) => typeof item.y === 'number')\r\n            .curve(curve)(data)\r\n\r\n        return {\r\n            path: area,\r\n            area,\r\n            line,\r\n        }\r\n    }\r\n}\r\n\r\nAreaChart.propTypes = {\r\n    ...Chart.propTypes,\r\n    start: PropTypes.number,\r\n}\r\n\r\nAreaChart.defaultProps = {\r\n    ...Chart.defaultProps,\r\n    start: 0,\r\n}\r\n\r\nexport default AreaChart\r\n","import PropTypes from 'prop-types'\r\nimport * as array from 'd3-array'\r\nimport * as scale from 'd3-scale'\r\nimport * as shape from 'd3-shape'\r\nimport React, { PureComponent } from 'react'\r\nimport { View } from 'react-native'\r\nimport { Svg } from 'react-native-svg'\r\nimport Path from './animated-path'\r\n\r\nclass AreaStack extends PureComponent {\r\n    static extractDataPoints(data, keys, order = shape.stackOrderNone, offset = shape.stackOffsetNone) {\r\n        const series = shape\r\n            .stack()\r\n            .keys(keys)\r\n            .order(order)\r\n            .offset(offset)(data)\r\n\r\n        //double merge arrays to extract just the values\r\n        return array.merge(array.merge(series))\r\n    }\r\n\r\n    state = {\r\n        height: 0,\r\n        width: 0,\r\n    }\r\n\r\n    _onLayout(event) {\r\n        const {\r\n            nativeEvent: {\r\n                layout: { height, width },\r\n            },\r\n        } = event\r\n        this.setState({ height, width })\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            data,\r\n            keys,\r\n            colors,\r\n            animate,\r\n            animationDuration,\r\n            style,\r\n            curve,\r\n            numberOfTicks,\r\n            contentInset: { top = 0, bottom = 0, left = 0, right = 0 },\r\n            gridMin,\r\n            gridMax,\r\n            children,\r\n            offset,\r\n            order,\r\n            svgs,\r\n            xAccessor,\r\n            xScale,\r\n            clampY,\r\n            clampX,\r\n        } = this.props\r\n\r\n        const { height, width } = this.state\r\n\r\n        if (data.length === 0) {\r\n            return <View style={style} />\r\n        }\r\n\r\n        const series = shape\r\n            .stack()\r\n            .keys(keys)\r\n            .order(order)\r\n            .offset(offset)(data)\r\n\r\n        //double merge arrays to extract just the yValues\r\n        const yValues = array.merge(array.merge(series))\r\n        const xValues = data.map((item, index) => xAccessor({ item, index }))\r\n\r\n        const yExtent = array.extent([...yValues, gridMin, gridMax])\r\n        const xExtent = array.extent(xValues)\r\n\r\n        const { yMin = yExtent[0], yMax = yExtent[1], xMin = xExtent[0], xMax = xExtent[1] } = this.props\r\n\r\n        //invert range to support svg coordinate system\r\n        const y = scale\r\n            .scaleLinear()\r\n            .domain([yMin, yMax])\r\n            .range([height - bottom, top])\r\n            .clamp(clampY)\r\n\r\n        const x = xScale()\r\n            .domain([xMin, xMax])\r\n            .range([left, width - right])\r\n            .clamp(clampX)\r\n\r\n        const ticks = y.ticks(numberOfTicks)\r\n\r\n        const areas = series.map((serie, index) => {\r\n            const path = shape\r\n                .area()\r\n                .x((d, index) => x(xAccessor({ item: d.data, index })))\r\n                .y0((d) => y(d[0]))\r\n                .y1((d) => y(d[1]))\r\n                .curve(curve)(data.map((_, index) => serie[index]))\r\n\r\n            return {\r\n                path,\r\n                key: keys[index],\r\n                color: colors[index],\r\n            }\r\n        })\r\n\r\n        const extraProps = {\r\n            x,\r\n            y,\r\n            width,\r\n            height,\r\n            ticks,\r\n            areas,\r\n        }\r\n\r\n        return (\r\n            <View style={style}>\r\n                <View style={{ flex: 1 }} onLayout={(event) => this._onLayout(event)}>\r\n                    {height > 0 && width > 0 && (\r\n                        <Svg style={{ height, width }}>\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                            {areas.map((area, index) => (\r\n                                <Path\r\n                                    key={area.key}\r\n                                    fill={area.color}\r\n                                    {...svgs[index]}\r\n                                    animate={animate}\r\n                                    animationDuration={animationDuration}\r\n                                    d={area.path}\r\n                                />\r\n                            ))}\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && !child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                        </Svg>\r\n                    )}\r\n                </View>\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nAreaStack.propTypes = {\r\n    data: PropTypes.arrayOf(PropTypes.object).isRequired,\r\n    keys: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n    colors: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n    svgs: PropTypes.arrayOf(PropTypes.object),\r\n    offset: PropTypes.func,\r\n    order: PropTypes.func,\r\n    style: PropTypes.any,\r\n    animate: PropTypes.bool,\r\n    animationDuration: PropTypes.number,\r\n    contentInset: PropTypes.shape({\r\n        top: PropTypes.number,\r\n        left: PropTypes.number,\r\n        right: PropTypes.number,\r\n        bottom: PropTypes.number,\r\n    }),\r\n    numberOfTicks: PropTypes.number,\r\n    showGrid: PropTypes.bool,\r\n    xScale: PropTypes.func,\r\n    xAccessor: PropTypes.func,\r\n\r\n    yMin: PropTypes.any,\r\n    yMax: PropTypes.any,\r\n    xMin: PropTypes.any,\r\n    xMax: PropTypes.any,\r\n    clampX: PropTypes.bool,\r\n    clampY: PropTypes.bool,\r\n}\r\n\r\nAreaStack.defaultProps = {\r\n    curve: shape.curveLinear,\r\n    offset: shape.stackOffsetNone,\r\n    order: shape.stackOrderNone,\r\n    svgs: [],\r\n    strokeWidth: 2,\r\n    contentInset: {},\r\n    numberOfTicks: 10,\r\n    showGrid: true,\r\n    xScale: scale.scaleLinear,\r\n    xAccessor: ({ index }) => index,\r\n}\r\n\r\nexport default AreaStack\r\n","import * as array from 'd3-array'\r\nimport * as scale from 'd3-scale'\r\nimport * as shape from 'd3-shape'\r\nimport PropTypes from 'prop-types'\r\nimport React, { PureComponent } from 'react'\r\nimport { View } from 'react-native'\r\nimport Svg from 'react-native-svg'\r\nimport Path from '../animated-path'\r\n\r\nclass BarChart extends PureComponent {\r\n    state = {\r\n        width: 0,\r\n        height: 0,\r\n    }\r\n\r\n    _onLayout(event) {\r\n        const {\r\n            nativeEvent: {\r\n                layout: { height, width },\r\n            },\r\n        } = event\r\n        this.setState({ height, width })\r\n    }\r\n\r\n    calcXScale(domain) {\r\n        const {\r\n            horizontal,\r\n            contentInset: { left = 0, right = 0 },\r\n            spacingInner,\r\n            spacingOuter,\r\n            clamp,\r\n        } = this.props\r\n\r\n        const { width } = this.state\r\n\r\n        if (horizontal) {\r\n            return scale\r\n                .scaleLinear()\r\n                .domain(domain)\r\n                .range([left, width - right])\r\n                .clamp(clamp)\r\n        }\r\n\r\n        return scale\r\n            .scaleBand()\r\n            .domain(domain)\r\n            .range([left, width - right])\r\n            .paddingInner([spacingInner])\r\n            .paddingOuter([spacingOuter])\r\n    }\r\n\r\n    calcYScale(domain) {\r\n        const {\r\n            horizontal,\r\n            contentInset: { top = 0, bottom = 0 },\r\n            spacingInner,\r\n            spacingOuter,\r\n            clamp,\r\n        } = this.props\r\n\r\n        const { height } = this.state\r\n\r\n        if (horizontal) {\r\n            return scale\r\n                .scaleBand()\r\n                .domain(domain)\r\n                .range([top, height - bottom])\r\n                .paddingInner([spacingInner])\r\n                .paddingOuter([spacingOuter])\r\n        }\r\n\r\n        return scale\r\n            .scaleLinear()\r\n            .domain(domain)\r\n            .range([height - bottom, top])\r\n            .clamp(clamp)\r\n    }\r\n\r\n    calcAreas(x, y) {\r\n        const { horizontal, data, yAccessor } = this.props\r\n\r\n        const values = data.map((item) => yAccessor({ item }))\r\n\r\n        if (horizontal) {\r\n            return data.map((bar, index) => ({\r\n                bar,\r\n                path: shape\r\n                    .area()\r\n                    .y((value, _index) => (_index === 0 ? y(index) : y(index) + y.bandwidth()))\r\n                    .x0(x(0))\r\n                    .x1((value) => x(value))\r\n                    .defined((value) => typeof value === 'number')([values[index], values[index]]),\r\n            }))\r\n        }\r\n\r\n        return data.map((bar, index) => ({\r\n            bar,\r\n            path: shape\r\n                .area()\r\n                .y0(y(0))\r\n                .y1((value) => y(value))\r\n                .x((value, _index) => (_index === 0 ? x(index) : x(index) + x.bandwidth()))\r\n                .defined((value) => typeof value === 'number')([values[index], values[index]]),\r\n        }))\r\n    }\r\n\r\n    calcExtent() {\r\n        const { data, gridMin, gridMax, yAccessor } = this.props\r\n        const values = data.map((obj) => yAccessor({ item: obj }))\r\n\r\n        const extent = array.extent([...values, gridMax, gridMin])\r\n\r\n        const { yMin = extent[0], yMax = extent[1] } = this.props\r\n\r\n        return [yMin, yMax]\r\n    }\r\n\r\n    calcIndexes() {\r\n        const { data } = this.props\r\n        return data.map((_, index) => index)\r\n    }\r\n\r\n    render() {\r\n        const { data, animate, animationDuration, style, numberOfTicks, svg, horizontal, children } = this.props\r\n\r\n        const { height, width } = this.state\r\n\r\n        if (data.length === 0) {\r\n            return <View style={style} />\r\n        }\r\n\r\n        const extent = this.calcExtent()\r\n        const indexes = this.calcIndexes()\r\n        const ticks = array.ticks(extent[0], extent[1], numberOfTicks)\r\n\r\n        const xDomain = horizontal ? extent : indexes\r\n        const yDomain = horizontal ? indexes : extent\r\n\r\n        const x = this.calcXScale(xDomain)\r\n        const y = this.calcYScale(yDomain)\r\n\r\n        const bandwidth = horizontal ? y.bandwidth() : x.bandwidth()\r\n\r\n        const areas = this.calcAreas(x, y).filter(\r\n            (area) => area.bar !== null && area.bar !== undefined && area.path !== null\r\n        )\r\n\r\n        const extraProps = {\r\n            x,\r\n            y,\r\n            width,\r\n            height,\r\n            bandwidth,\r\n            ticks,\r\n            data,\r\n        }\r\n\r\n        return (\r\n            <View style={style}>\r\n                <View style={{ flex: 1 }} onLayout={(event) => this._onLayout(event)}>\r\n                    {height > 0 && width > 0 && (\r\n                        <Svg style={{ height, width }}>\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                            })}\r\n                            {areas.map((area, index) => {\r\n                                const {\r\n                                    bar: { svg: barSvg = {} },\r\n                                    path,\r\n                                } = area\r\n\r\n                                return (\r\n                                    <Path\r\n                                        key={index}\r\n                                        {...svg}\r\n                                        {...barSvg}\r\n                                        d={path}\r\n                                        animate={animate}\r\n                                        animationDuration={animationDuration}\r\n                                    />\r\n                                )\r\n                            })}\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && !child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                            })}\r\n                        </Svg>\r\n                    )}\r\n                </View>\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nBarChart.propTypes = {\r\n    data: PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.number, PropTypes.object])).isRequired,\r\n    style: PropTypes.any,\r\n    spacingInner: PropTypes.number,\r\n    spacingOuter: PropTypes.number,\r\n    animate: PropTypes.bool,\r\n    animationDuration: PropTypes.number,\r\n    contentInset: PropTypes.shape({\r\n        top: PropTypes.number,\r\n        left: PropTypes.number,\r\n        right: PropTypes.number,\r\n        bottom: PropTypes.number,\r\n    }),\r\n    numberOfTicks: PropTypes.number,\r\n    gridMin: PropTypes.number,\r\n    gridMax: PropTypes.number,\r\n    svg: PropTypes.object,\r\n\r\n    yMin: PropTypes.any,\r\n    yMax: PropTypes.any,\r\n    clamp: PropTypes.bool,\r\n}\r\n\r\nBarChart.defaultProps = {\r\n    spacingInner: 0.05,\r\n    spacingOuter: 0.05,\r\n    contentInset: {},\r\n    numberOfTicks: 10,\r\n    svg: {},\r\n    yAccessor: ({ item }) => item,\r\n}\r\n\r\nexport default BarChart\r\n","import PropTypes from 'prop-types'\r\nimport * as array from 'd3-array'\r\nimport * as scale from 'd3-scale'\r\nimport * as shape from 'd3-shape'\r\nimport BarChart from './bar-chart'\r\n\r\nclass GroupedBarChart extends BarChart {\r\n    calcXScale(domain) {\r\n        const {\r\n            horizontal,\r\n            contentInset: { left = 0, right = 0 },\r\n            spacingInner,\r\n            spacingOuter,\r\n            clamp,\r\n        } = this.props\r\n\r\n        const { width } = this.state\r\n\r\n        if (horizontal) {\r\n            return scale\r\n                .scaleLinear()\r\n                .domain(domain)\r\n                .range([left, width - right])\r\n                .clamp(clamp)\r\n        }\r\n\r\n        return scale\r\n            .scaleBand()\r\n            .domain(domain)\r\n            .range([left, width - right])\r\n            .paddingInner([spacingInner])\r\n            .paddingOuter([spacingOuter])\r\n    }\r\n\r\n    calcYScale(domain) {\r\n        const {\r\n            horizontal,\r\n            spacingInner,\r\n            spacingOuter,\r\n            contentInset: { top = 0, bottom = 0 },\r\n            clamp,\r\n        } = this.props\r\n\r\n        const { height } = this.state\r\n\r\n        if (horizontal) {\r\n            return scale\r\n                .scaleBand()\r\n                .domain(domain)\r\n                .range([top, height - bottom])\r\n                .paddingInner([spacingInner])\r\n                .paddingOuter([spacingOuter])\r\n        }\r\n\r\n        return scale\r\n            .scaleLinear()\r\n            .domain(domain)\r\n            .range([height - bottom, top])\r\n            .clamp(clamp)\r\n    }\r\n\r\n    calcAreas(x, y) {\r\n        const { horizontal, data, yAccessor } = this.props\r\n\r\n        const _data = data.map((obj) => {\r\n            const { svg = {} } = obj\r\n            return {\r\n                ...obj,\r\n                data: obj.data.map((item) => {\r\n                    if (typeof item === 'number') {\r\n                        return {\r\n                            value: item,\r\n                            svg,\r\n                        }\r\n                    }\r\n\r\n                    return {\r\n                        ...item,\r\n                        svg: {\r\n                            ...svg,\r\n                            ...item.svg,\r\n                        },\r\n                        value: yAccessor({ item }),\r\n                    }\r\n                }),\r\n            }\r\n        })\r\n\r\n        const areas = []\r\n\r\n        if (horizontal) {\r\n            const barWidth = y.bandwidth() / data.length\r\n\r\n            _data.forEach((obj, collectionIndex) => {\r\n                obj.data.forEach((item, valueIndex) => {\r\n                    areas.push({\r\n                        bar: item,\r\n                        path: shape\r\n                            .area()\r\n                            .y((value, _index) =>\r\n                                _index === 0\r\n                                    ? y(valueIndex) + barWidth * collectionIndex\r\n                                    : y(valueIndex) + barWidth + barWidth * collectionIndex\r\n                            )\r\n                            .x0(x(0))\r\n                            .x1((value) => x(value))\r\n                            .defined((value) => typeof value === 'number')([item.value, item.value]),\r\n                    })\r\n                })\r\n            })\r\n        } else {\r\n            const barWidth = x.bandwidth() / data.length\r\n\r\n            _data.forEach((obj, collectionIndex) => {\r\n                obj.data.forEach((item, valueIndex) => {\r\n                    areas.push({\r\n                        bar: item,\r\n                        path: shape\r\n                            .area()\r\n                            .x((value, _index) =>\r\n                                _index === 0\r\n                                    ? x(valueIndex) + barWidth * collectionIndex\r\n                                    : x(valueIndex) + barWidth + barWidth * collectionIndex\r\n                            )\r\n                            .y0(y(0))\r\n                            .y1((value) => y(value))\r\n                            .defined((value) => typeof value === 'number')([item.value, item.value]),\r\n                    })\r\n                })\r\n            })\r\n        }\r\n\r\n        return areas\r\n    }\r\n\r\n    calcExtent() {\r\n        const { data, yAccessor, gridMin, gridMax } = this.props\r\n        const dataExtent = array.merge(data.map((obj) => obj.data.map((item) => yAccessor({ item }))))\r\n\r\n        const extent = array.extent([...dataExtent, gridMax, gridMin])\r\n\r\n        const { yMin = extent[0], yMax = extent[1] } = this.props\r\n\r\n        return [yMin, yMax]\r\n    }\r\n\r\n    calcIndexes() {\r\n        const { data } = this.props\r\n        return data[0].data.map((_, index) => index)\r\n    }\r\n}\r\n\r\nGroupedBarChart.propTypes = {\r\n    ...BarChart.propTypes,\r\n    data: PropTypes.arrayOf(\r\n        PropTypes.shape({\r\n            data: PropTypes.array.isRequired,\r\n            svg: PropTypes.object,\r\n        })\r\n    ).isRequired,\r\n}\r\n\r\nexport default GroupedBarChart\r\n","import * as array from 'd3-array'\r\nimport * as scale from 'd3-scale'\r\nimport * as shape from 'd3-shape'\r\nimport PropTypes from 'prop-types'\r\nimport React, { PureComponent } from 'react'\r\nimport { View } from 'react-native'\r\nimport Svg from 'react-native-svg'\r\nimport Path from '../animated-path'\r\n\r\nclass BarChart extends PureComponent {\r\n    static extractDataPoints(data, keys, order = shape.stackOrderNone, offset = shape.stackOffsetNone) {\r\n        const series = shape\r\n            .stack()\r\n            .keys(keys)\r\n            .order(order)\r\n            .offset(offset)(data)\r\n\r\n        //double merge arrays to extract just the values\r\n        return array.merge(array.merge(series))\r\n    }\r\n\r\n    state = {\r\n        width: 0,\r\n        height: 0,\r\n    }\r\n\r\n    _onLayout(event) {\r\n        const {\r\n            nativeEvent: {\r\n                layout: { height, width },\r\n            },\r\n        } = event\r\n        this.setState({ height, width })\r\n    }\r\n\r\n    calcXScale(domain) {\r\n        const { data } = this.props\r\n\r\n        const {\r\n            horizontal,\r\n            contentInset: { left = 0, right = 0 },\r\n            spacingInner,\r\n            spacingOuter,\r\n        } = this.props\r\n\r\n        const { width } = this.state\r\n\r\n        if (horizontal) {\r\n            return scale\r\n                .scaleLinear()\r\n                .domain(domain)\r\n                .range([left, width - right])\r\n        }\r\n\r\n        // use index as domain identifier instead of value since\r\n        // domain must be same length as number of bars\r\n        // same value can occur at several places in data\r\n        return scale\r\n            .scaleBand()\r\n            .domain(data.map((_, index) => index))\r\n            .range([left, width - right])\r\n            .paddingInner([spacingInner])\r\n            .paddingOuter([spacingOuter])\r\n    }\r\n\r\n    calcYScale(domain) {\r\n        const { data } = this.props\r\n\r\n        const {\r\n            horizontal,\r\n            contentInset: { top = 0, bottom = 0 },\r\n            spacingInner,\r\n            spacingOuter,\r\n        } = this.props\r\n\r\n        const { height } = this.state\r\n\r\n        if (horizontal) {\r\n            return scale\r\n                .scaleBand()\r\n                .domain(data.map((_, index) => index))\r\n                .range([top, height - bottom])\r\n                .paddingInner([spacingInner])\r\n                .paddingOuter([spacingOuter])\r\n        }\r\n\r\n        return scale\r\n            .scaleLinear()\r\n            .domain(domain)\r\n            .range([height - bottom, top])\r\n    }\r\n\r\n    calcAreas(x, y, series) {\r\n        const { horizontal, colors, keys } = this.props\r\n\r\n        if (horizontal) {\r\n            return array.merge(\r\n                series.map((serie, keyIndex) => {\r\n                    return serie.map((entry, entryIndex) => {\r\n                        const path = shape\r\n                            .area()\r\n                            .x0((d) => x(d[0]))\r\n                            .x1((d) => x(d[1]))\r\n                            .y((d, _index) => (_index === 0 ? y(entryIndex) : y(entryIndex) + y.bandwidth()))\r\n                            .defined((d) => !isNaN(d[0]) && !isNaN(d[1]))([entry, entry])\r\n\r\n                        return {\r\n                            path,\r\n                            color: colors[keyIndex],\r\n                            key: keys[keyIndex],\r\n                        }\r\n                    })\r\n                })\r\n            )\r\n        }\r\n\r\n        return array.merge(\r\n            series.map((serie, keyIndex) => {\r\n                return serie.map((entry, entryIndex) => {\r\n                    const path = shape\r\n                        .area()\r\n                        .y0((d) => y(d[0]))\r\n                        .y1((d) => y(d[1]))\r\n                        .x((d, _index) => (_index === 0 ? x(entryIndex) : x(entryIndex) + x.bandwidth()))\r\n                        .defined((d) => !isNaN(d[0]) && !isNaN(d[1]))([entry, entry])\r\n\r\n                    return {\r\n                        path,\r\n                        color: colors[keyIndex],\r\n                        key: keys[keyIndex],\r\n                    }\r\n                })\r\n            })\r\n        )\r\n    }\r\n\r\n    calcExtent(values) {\r\n        const { gridMax, gridMin } = this.props\r\n\r\n        return array.extent([...values, gridMin, gridMax])\r\n    }\r\n\r\n    calcIndexes(values) {\r\n        return values.map((_, index) => index)\r\n    }\r\n\r\n    getSeries() {\r\n        const { data, keys, offset, order, valueAccessor } = this.props\r\n\r\n        return shape\r\n            .stack()\r\n            .keys(keys)\r\n            .value((item, key) => valueAccessor({ item, key }))\r\n            .order(order)\r\n            .offset(offset)(data)\r\n    }\r\n\r\n    render() {\r\n        const { data, animate, animationDuration, style, numberOfTicks, children, horizontal } = this.props\r\n\r\n        const { height, width } = this.state\r\n\r\n        if (data.length === 0) {\r\n            return <View style={style} />\r\n        }\r\n\r\n        const series = this.getSeries()\r\n\r\n        //double merge arrays to extract just the values\r\n        const values = array.merge(array.merge(series))\r\n        const indexes = this.calcIndexes(values)\r\n\r\n        const extent = this.calcExtent(values)\r\n        const ticks = array.ticks(extent[0], extent[1], numberOfTicks)\r\n\r\n        const xDomain = horizontal ? extent : indexes\r\n        const yDomain = horizontal ? indexes : extent\r\n\r\n        const x = this.calcXScale(xDomain)\r\n        const y = this.calcYScale(yDomain)\r\n\r\n        const bandwidth = horizontal ? y.bandwidth() : x.bandwidth()\r\n\r\n        const areas = this.calcAreas(x, y, series)\r\n\r\n        const extraProps = {\r\n            x,\r\n            y,\r\n            width,\r\n            height,\r\n            ticks,\r\n            data,\r\n            bandwidth,\r\n        }\r\n\r\n        return (\r\n            <View style={style}>\r\n                <View style={{ flex: 1 }} onLayout={(event) => this._onLayout(event)}>\r\n                    {height > 0 && width > 0 && (\r\n                        <Svg style={{ height, width }}>\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                            {areas.map((bar, index) => {\r\n                                const keyIndex = index % data.length\r\n                                const key = `${keyIndex}-${bar.key}`\r\n                                const { svg } = data[keyIndex][bar.key]\r\n\r\n                                return (\r\n                                    <Path\r\n                                        key={key}\r\n                                        fill={bar.color}\r\n                                        {...svg}\r\n                                        d={bar.path}\r\n                                        animate={animate}\r\n                                        animationDuration={animationDuration}\r\n                                    />\r\n                                )\r\n                            })}\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && !child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                        </Svg>\r\n                    )}\r\n                </View>\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nBarChart.propTypes = {\r\n    data: PropTypes.arrayOf(PropTypes.object),\r\n    keys: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n    colors: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n    offset: PropTypes.func,\r\n    order: PropTypes.func,\r\n    style: PropTypes.any,\r\n    spacingInner: PropTypes.number,\r\n    spacingOuter: PropTypes.number,\r\n    animate: PropTypes.bool,\r\n    animationDuration: PropTypes.number,\r\n    contentInset: PropTypes.shape({\r\n        top: PropTypes.number,\r\n        left: PropTypes.number,\r\n        right: PropTypes.number,\r\n        bottom: PropTypes.number,\r\n    }),\r\n    gridMin: PropTypes.number,\r\n    gridMax: PropTypes.number,\r\n    valueAccessor: PropTypes.func,\r\n}\r\n\r\nBarChart.defaultProps = {\r\n    spacingInner: 0.05,\r\n    spacingOuter: 0.05,\r\n    offset: shape.stackOffsetNone,\r\n    order: shape.stackOrderNone,\r\n    width: 100,\r\n    height: 100,\r\n    showZeroAxis: true,\r\n    contentInset: {},\r\n    numberOfTicks: 10,\r\n    showGrid: true,\r\n    valueAccessor: ({ item, key }) => item[key],\r\n}\r\n\r\nexport default BarChart\r\n","import React, { PureComponent } from 'react'\r\nimport { View } from 'react-native'\r\nimport PropTypes from 'prop-types'\r\nimport Svg from 'react-native-svg'\r\nimport * as array from 'd3-array'\r\nimport * as scale from 'd3-scale'\r\nimport * as shape from 'd3-shape'\r\nimport Path from '../animated-path'\r\n\r\nclass StackedBarGrouped extends PureComponent {\r\n    state = {\r\n        width: 0,\r\n        height: 0,\r\n    }\r\n\r\n    _onLayout(event) {\r\n        const {\r\n            nativeEvent: {\r\n                layout: { height, width },\r\n            },\r\n        } = event\r\n        this.setState({ height, width })\r\n    }\r\n\r\n    calcXScale(domain) {\r\n        const {\r\n            horizontal,\r\n            contentInset: { left = 0, right = 0 },\r\n            spacingInner,\r\n            spacingOuter,\r\n        } = this.props\r\n\r\n        const { width } = this.state\r\n\r\n        if (horizontal) {\r\n            return scale\r\n                .scaleLinear()\r\n                .domain(domain)\r\n                .range([left, width - right])\r\n        }\r\n\r\n        return scale\r\n            .scaleBand()\r\n            .domain(domain)\r\n            .range([left, width - right])\r\n            .paddingInner([spacingInner])\r\n            .paddingOuter([spacingOuter])\r\n    }\r\n\r\n    calcYScale(domain) {\r\n        const {\r\n            horizontal,\r\n            contentInset: { top = 0, bottom = 0 },\r\n            spacingInner,\r\n            spacingOuter,\r\n        } = this.props\r\n\r\n        const { height } = this.state\r\n\r\n        if (horizontal) {\r\n            return scale\r\n                .scaleBand()\r\n                .domain(domain)\r\n                .range([top, height - bottom])\r\n                .paddingInner([spacingInner])\r\n                .paddingOuter([spacingOuter])\r\n        }\r\n\r\n        return scale\r\n            .scaleLinear()\r\n            .domain(domain)\r\n            .range([height - bottom, top])\r\n    }\r\n\r\n    calcAreas(x, y, series) {\r\n        const { horizontal, colors, keys, data, borderRadius: initialBorderRadius, innerBarSpace } = this.props\r\n        let areas\r\n        let barWidth\r\n\r\n        if (horizontal) {\r\n            barWidth = y.bandwidth() / data.length\r\n\r\n            areas = series.map((stack, stackIndex) => {\r\n                return stack.map((serie, keyIndex) => {\r\n                    return serie.map((entry, entryIndex) => {\r\n                        const leftMargin = series.length > 1 ? innerBarSpace / 2 : 0\r\n\r\n                        const path = shape\r\n                            .area()\r\n                            .x0((d) => x(d[0]))\r\n                            .x1((d) => x(d[1]))\r\n                            .y(\r\n                                (d, _index) =>\r\n                                    (_index === 0\r\n                                        ? y(entryIndex) + barWidth * stackIndex + leftMargin\r\n                                        : y(entryIndex) + barWidth + barWidth * stackIndex) - leftMargin\r\n                            )\r\n                            .defined((d) => !isNaN(d[0]) && !isNaN(d[1]))([entry, entry])\r\n\r\n                        return {\r\n                            path,\r\n                            color: colors[stackIndex][keyIndex],\r\n                            key: keys[stackIndex][keyIndex],\r\n                        }\r\n                    })\r\n                })\r\n            })\r\n        } else {\r\n            barWidth = x.bandwidth() / data.length\r\n\r\n            areas = series.map((stack, stackIndex) => {\r\n                return stack.map((serie, keyIndex) => {\r\n                    return serie.map((entry, entryIndex) => {\r\n                        const leftMargin = series.length > 1 ? innerBarSpace / 2 : 0\r\n                        const x0 = x(entryIndex) + barWidth * stackIndex + leftMargin\r\n                        const x1 = x(entryIndex) + barWidth + barWidth * stackIndex - leftMargin\r\n                        const y0 = y(entry[1])\r\n                        const y1 = y(entry[0])\r\n                        const barHeight = y1 - y0\r\n                        const borderRadius = initialBorderRadius * 2 > barHeight ? barHeight / 2 : initialBorderRadius\r\n                        const showTopBorder = keyIndex === stack.length - 1\r\n                        const showBottomBorder = keyIndex === 0\r\n                        const commands = this.coordinatesToPathCommands(\r\n                            x0,\r\n                            y0,\r\n                            x1,\r\n                            y1,\r\n                            borderRadius,\r\n                            showTopBorder,\r\n                            showBottomBorder\r\n                        )\r\n\r\n                        return {\r\n                            path: this.commandsToSvgPath(commands),\r\n                            color: colors[stackIndex][keyIndex],\r\n                            key: keys[stackIndex][keyIndex],\r\n                        }\r\n                    })\r\n                })\r\n            })\r\n        }\r\n\r\n        return array.merge(areas)\r\n    }\r\n\r\n    coordinatesToPathCommands = (x0, y0, x1, y1, borderRadius, showTopBorder, showBottomBorder) => {\r\n        const commands = []\r\n        commands.push({ marker: 'M', values: [x0, y0] })\r\n\r\n        if (showTopBorder) {\r\n            const topLeft1 = [x0 + borderRadius, y0]\r\n            const topLeft2 = [x0, y0 + borderRadius]\r\n            commands.push({ marker: 'L', values: topLeft1 })\r\n            commands.push({\r\n                marker: 'C',\r\n                values: [...topLeft1, x0, y0, ...topLeft2],\r\n            })\r\n            commands.push({ marker: 'L', values: topLeft2 })\r\n        } else {\r\n            commands.push({ marker: 'L', values: [x0, y0] })\r\n        }\r\n\r\n        if (showBottomBorder) {\r\n            const bottomLeft1 = [x0, y1 - borderRadius]\r\n            const bottomLeft2 = [x0 + borderRadius, y1]\r\n            commands.push({ marker: 'L', values: bottomLeft1 })\r\n            commands.push({\r\n                marker: 'C',\r\n                values: [...bottomLeft1, x0, y1, ...bottomLeft2],\r\n            })\r\n            commands.push({ marker: 'L', values: bottomLeft2 })\r\n            const bottomRight1 = [x1 - borderRadius, y1]\r\n            const bottomRight2 = [x1, y1 - borderRadius]\r\n            commands.push({ marker: 'L', values: bottomRight1 })\r\n            commands.push({\r\n                marker: 'C',\r\n                values: [...bottomRight1, x1, y1, ...bottomRight2],\r\n            })\r\n            commands.push({ marker: 'L', values: bottomRight2 })\r\n        } else {\r\n            commands.push({ marker: 'L', values: [x0, y1] })\r\n            commands.push({ marker: 'L', values: [x1, y1] })\r\n        }\r\n\r\n        if (showTopBorder) {\r\n            const topRight1 = [x1, y0 + borderRadius]\r\n            const topRight2 = [x1 - borderRadius, y0]\r\n\r\n            commands.push({ marker: 'L', values: topRight1 })\r\n            commands.push({\r\n                marker: 'C',\r\n                values: [...topRight1, x1, y0, ...topRight2],\r\n            })\r\n            commands.push({ marker: 'L', values: topRight2 })\r\n        } else {\r\n            commands.push({ marker: 'L', values: [x1, y0] })\r\n        }\r\n\r\n        commands.push({ marker: 'Z', values: [] })\r\n\r\n        return commands\r\n    }\r\n\r\n    commandsToSvgPath = (commands) =>\r\n        commands\r\n            .map((command) => `${command.marker} ${command.values.join(',')}`)\r\n            .join(' ')\r\n            .trim()\r\n\r\n    calcExtent(values) {\r\n        const { gridMax, gridMin } = this.props\r\n\r\n        // One more merge for stacked groups\r\n        const mergedValues = array.merge(values)\r\n\r\n        return array.extent([...mergedValues, gridMin, gridMax])\r\n    }\r\n\r\n    calcIndexes() {\r\n        const { data } = this.props\r\n\r\n        // Must return an array with indexes for the number of groups to be shown\r\n        return data[0].data.map((_, index) => index)\r\n    }\r\n\r\n    getSeries() {\r\n        const { data, keys, offset, order, valueAccessor } = this.props\r\n\r\n        return data.map((obj, index) =>\r\n            shape\r\n                .stack()\r\n                .keys(keys[index])\r\n                .value((item, key) => valueAccessor({ item, key }))\r\n                .order(order)\r\n                .offset(offset)(obj.data)\r\n        )\r\n    }\r\n\r\n    render() {\r\n        const { data, animate, animationDuration, style, numberOfTicks, children, horizontal } = this.props\r\n\r\n        const { height, width } = this.state\r\n\r\n        if (data.length === 0) {\r\n            return <View style={style} />\r\n        }\r\n\r\n        const series = this.getSeries()\r\n\r\n        //double merge arrays to extract just the values\r\n        const values = array.merge(array.merge(series))\r\n        const indexes = this.calcIndexes(values)\r\n\r\n        const extent = this.calcExtent(values)\r\n        const ticks = array.ticks(extent[0], extent[1], numberOfTicks)\r\n\r\n        const xDomain = horizontal ? extent : indexes\r\n        const yDomain = horizontal ? indexes : extent\r\n\r\n        const x = this.calcXScale(xDomain)\r\n        const y = this.calcYScale(yDomain)\r\n\r\n        const bandwidth = horizontal ? y.bandwidth() : x.bandwidth()\r\n\r\n        const stacks = this.calcAreas(x, y, series)\r\n\r\n        const extraProps = {\r\n            x,\r\n            y,\r\n            width,\r\n            height,\r\n            ticks,\r\n            data,\r\n            bandwidth,\r\n        }\r\n\r\n        return (\r\n            <View style={style}>\r\n                <View style={{ flex: 1 }} onLayout={(event) => this._onLayout(event)}>\r\n                    {height > 0 && width > 0 && (\r\n                        <Svg style={{ height, width }}>\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                            {stacks.map((areas, indexStack) => {\r\n                                const areaIndex = indexStack % data.length\r\n\r\n                                return areas.map((bar, indexArea) => {\r\n                                    const keyIndex = indexArea % data[areaIndex].data.length\r\n                                    const key = `${areaIndex}-${keyIndex}-${bar.key}`\r\n\r\n                                    const { svg } = data[areaIndex].data[keyIndex][bar.key]\r\n\r\n                                    return (\r\n                                        <Path\r\n                                            key={key}\r\n                                            fill={bar.color}\r\n                                            {...svg}\r\n                                            d={bar.path}\r\n                                            animate={animate}\r\n                                            animationDuration={animationDuration}\r\n                                        />\r\n                                    )\r\n                                })\r\n                            })}\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && !child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                        </Svg>\r\n                    )}\r\n                </View>\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nStackedBarGrouped.propTypes = {\r\n    data: PropTypes.arrayOf(PropTypes.object),\r\n    keys: PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.string)).isRequired,\r\n    colors: PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.string)).isRequired,\r\n    offset: PropTypes.func,\r\n    order: PropTypes.func,\r\n    style: PropTypes.any,\r\n    spacingInner: PropTypes.number,\r\n    spacingOuter: PropTypes.number,\r\n    animate: PropTypes.bool,\r\n    animationDuration: PropTypes.number,\r\n    contentInset: PropTypes.shape({\r\n        top: PropTypes.number,\r\n        left: PropTypes.number,\r\n        right: PropTypes.number,\r\n        bottom: PropTypes.number,\r\n    }),\r\n    gridMin: PropTypes.number,\r\n    gridMax: PropTypes.number,\r\n    valueAccessor: PropTypes.func,\r\n    borderRadius: PropTypes.number,\r\n    innerBarSpace: PropTypes.number,\r\n}\r\n\r\nStackedBarGrouped.defaultProps = {\r\n    spacingInner: 0.05,\r\n    spacingOuter: 0.05,\r\n    offset: shape.stackOffsetNone,\r\n    order: shape.stackOrderNone,\r\n    width: 100,\r\n    height: 100,\r\n    showZeroAxis: true,\r\n    contentInset: {},\r\n    numberOfTicks: 10,\r\n    showGrid: true,\r\n    valueAccessor: ({ item, key }) => item[key],\r\n    borderRadius: 0,\r\n    innerBarSpace: 0,\r\n}\r\n\r\nexport default StackedBarGrouped\r\n","import * as shape from 'd3-shape'\r\nimport Chart from '../chart/chart'\r\n\r\nclass LineChart extends Chart {\r\n    createPaths({ data, x, y }) {\r\n        const { curve } = this.props\r\n\r\n        const line = shape\r\n            .line()\r\n            .x((d) => x(d.x))\r\n            .y((d) => y(d.y))\r\n            .defined((item) => typeof item.y === 'number')\r\n            .curve(curve)(data)\r\n\r\n        return {\r\n            path: line,\r\n            line,\r\n        }\r\n    }\r\n}\r\n\r\nLineChart.propTypes = {\r\n    ...Chart.propTypes,\r\n}\r\n\r\nLineChart.defaultProps = {\r\n    ...Chart.defaultProps,\r\n}\r\n\r\nexport default LineChart\r\n","import * as array from 'd3-array'\r\nimport PropTypes from 'prop-types'\r\nimport React, { PureComponent } from 'react'\r\nimport { View } from 'react-native'\r\nimport Svg from 'react-native-svg'\r\nimport Path from '../animated-path'\r\nimport Chart from './chart'\r\n\r\nclass ChartGrouped extends PureComponent {\r\n    state = {\r\n        width: 0,\r\n        height: 0,\r\n    }\r\n\r\n    _onLayout(event) {\r\n        const {\r\n            nativeEvent: {\r\n                layout: { height, width },\r\n            },\r\n        } = event\r\n        this.setState({ height, width })\r\n    }\r\n\r\n    createPaths() {\r\n        throw 'Extending \"ChartGrouped\" requires you to override \"createPaths'\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            data,\r\n            xAccessor,\r\n            yAccessor,\r\n            yScale,\r\n            xScale,\r\n            style,\r\n            animate,\r\n            animationDuration,\r\n            numberOfTicks,\r\n            contentInset: { top = 0, bottom = 0, left = 0, right = 0 },\r\n            gridMax,\r\n            gridMin,\r\n            clampX,\r\n            clampY,\r\n            svg,\r\n            children,\r\n        } = this.props\r\n\r\n        const { width, height } = this.state\r\n\r\n        if (data.length === 0) {\r\n            return <View style={style} />\r\n        }\r\n\r\n        const mappedData = data.map((dataArray) =>\r\n            dataArray.data.map((item, index) => ({\r\n                y: yAccessor({ item, index }),\r\n                x: xAccessor({ item, index }),\r\n            }))\r\n        )\r\n\r\n        const yValues = array.merge(mappedData).map((item) => item.y)\r\n        const xValues = array.merge(mappedData).map((item) => item.x)\r\n\r\n        const yExtent = array.extent([...yValues, gridMin, gridMax])\r\n        const xExtent = array.extent([...xValues])\r\n\r\n        const { yMin = yExtent[0], yMax = yExtent[1], xMin = xExtent[0], xMax = xExtent[1] } = this.props\r\n\r\n        //invert range to support svg coordinate system\r\n        const y = yScale()\r\n            .domain([yMin, yMax])\r\n            .range([height - bottom, top])\r\n            .clamp(clampY)\r\n\r\n        const x = xScale()\r\n            .domain([xMin, xMax])\r\n            .range([left, width - right])\r\n            .clamp(clampX)\r\n\r\n        const paths = this.createPaths({\r\n            data: mappedData,\r\n            x,\r\n            y,\r\n        })\r\n\r\n        const ticks = y.ticks(numberOfTicks)\r\n\r\n        const extraProps = {\r\n            x,\r\n            y,\r\n            data,\r\n            ticks,\r\n            width,\r\n            height,\r\n            ...paths,\r\n        }\r\n\r\n        return (\r\n            <View style={style}>\r\n                <View style={{ flex: 1 }} onLayout={(event) => this._onLayout(event)}>\r\n                    {height > 0 && width > 0 && (\r\n                        <Svg style={{ height, width }}>\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                            {paths.path.map((path, index) => {\r\n                                const { svg: pathSvg } = data[index]\r\n                                const key = path + '-' + index\r\n                                return (\r\n                                    <Path\r\n                                        key={key}\r\n                                        fill={'none'}\r\n                                        {...svg}\r\n                                        {...pathSvg}\r\n                                        d={path}\r\n                                        animate={animate}\r\n                                        animationDuration={animationDuration}\r\n                                    />\r\n                                )\r\n                            })}\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && !child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                        </Svg>\r\n                    )}\r\n                </View>\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nChartGrouped.propTypes = {\r\n    ...Chart.propTypes,\r\n    data: PropTypes.arrayOf(\r\n        PropTypes.shape({\r\n            data: PropTypes.oneOfType([\r\n                PropTypes.arrayOf(PropTypes.object),\r\n                PropTypes.arrayOf(PropTypes.number),\r\n                PropTypes.arrayOf(PropTypes.array),\r\n            ]),\r\n            svg: PropTypes.object,\r\n        })\r\n    ).isRequired,\r\n}\r\n\r\nChartGrouped.defaultProps = {\r\n    ...Chart.defaultProps,\r\n}\r\n\r\nexport default ChartGrouped\r\n","import * as shape from 'd3-shape'\r\nimport ChartGrouped from '../chart/chart-grouped'\r\n\r\nclass LineChartGrouped extends ChartGrouped {\r\n    createPaths({ data, x, y }) {\r\n        const { curve } = this.props\r\n\r\n        const lines = data.map((line) =>\r\n            shape\r\n                .line()\r\n                .x((d) => x(d.x))\r\n                .y((d) => y(d.y))\r\n                .defined((item) => typeof item.y === 'number')\r\n                .curve(curve)(line)\r\n        )\r\n\r\n        return {\r\n            path: lines,\r\n            lines,\r\n        }\r\n    }\r\n}\r\n\r\nLineChartGrouped.propTypes = {\r\n    ...ChartGrouped.propTypes,\r\n}\r\n\r\nLineChartGrouped.defaultProps = {\r\n    ...ChartGrouped.defaultProps,\r\n}\r\n\r\nexport default LineChartGrouped\r\n","import React from 'react'\r\nimport LineChart from './line-chart'\r\nimport LineChartGrouped from './line-chart-grouped'\r\n\r\nconst LineChartGate = (props) => {\r\n    const { data } = props\r\n\r\n    if (data[0] && data[0].hasOwnProperty('data')) {\r\n        return <LineChartGrouped {...props} />\r\n    }\r\n\r\n    return <LineChart {...props} />\r\n}\r\n\r\nexport default LineChartGate\r\n","import React, { PureComponent } from 'react'\r\nimport { View } from 'react-native'\r\nimport PropTypes from 'prop-types'\r\nimport * as shape from 'd3-shape'\r\nimport Path from './animated-path'\r\nimport Svg, { G } from 'react-native-svg'\r\n\r\nclass ProgressCircle extends PureComponent {\r\n    state = {\r\n        height: 0,\r\n        width: 0,\r\n    }\r\n\r\n    _onLayout(event) {\r\n        const {\r\n            nativeEvent: {\r\n                layout: { height, width },\r\n            },\r\n        } = event\r\n        this.setState({ height, width })\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            style,\r\n            progressColor,\r\n            backgroundColor,\r\n            strokeWidth,\r\n            startAngle,\r\n            endAngle,\r\n            animate,\r\n            animateDuration,\r\n            children,\r\n            cornerRadius,\r\n        } = this.props\r\n\r\n        let { progress } = this.props\r\n\r\n        const { height, width } = this.state\r\n\r\n        const outerDiameter = Math.min(width, height)\r\n\r\n        if (!isFinite(progress) || isNaN(progress)) {\r\n            progress = 0\r\n        }\r\n\r\n        // important order to have progress render over \"rest\"\r\n        const data = [\r\n            {\r\n                key: 'rest',\r\n                value: 1 - progress,\r\n                color: backgroundColor,\r\n            },\r\n            {\r\n                key: 'progress',\r\n                value: progress,\r\n                color: progressColor,\r\n            },\r\n        ]\r\n\r\n        const pieSlices = shape\r\n            .pie()\r\n            .value((d) => d.value)\r\n            .sort((a) => (a.key === 'rest' ? 1 : -1))\r\n            .startAngle(startAngle)\r\n            .endAngle(endAngle)(data)\r\n\r\n        const arcs = pieSlices.map((slice, index) => ({\r\n            ...data[index],\r\n            ...slice,\r\n            path: shape\r\n                .arc()\r\n                .outerRadius(outerDiameter / 2) // Radius of the pie\r\n                .innerRadius(outerDiameter / 2 - strokeWidth) // Inner radius: to create a donut or pie\r\n                .startAngle(index === 0 ? startAngle : slice.startAngle)\r\n                .endAngle(index === 0 ? endAngle : slice.endAngle)\r\n                .cornerRadius(cornerRadius)(),\r\n        }))\r\n\r\n        const extraProps = {\r\n            width,\r\n            height,\r\n        }\r\n\r\n        return (\r\n            <View style={style} onLayout={(event) => this._onLayout(event)}>\r\n                {height > 0 && width > 0 && (\r\n                    <Svg style={{ height, width }}>\r\n                        {/* center the progress circle*/}\r\n                        <G x={width / 2} y={height / 2}>\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                            {arcs.map((shape, index) => {\r\n                                return (\r\n                                    <Path\r\n                                        key={index}\r\n                                        fill={shape.color}\r\n                                        d={shape.path}\r\n                                        animate={animate}\r\n                                        animationDuration={animateDuration}\r\n                                    />\r\n                                )\r\n                            })}\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && !child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                        </G>\r\n                    </Svg>\r\n                )}\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nProgressCircle.propTypes = {\r\n    progress: PropTypes.number.isRequired,\r\n    style: PropTypes.any,\r\n    progressColor: PropTypes.any,\r\n    backgroundColor: PropTypes.any,\r\n    strokeWidth: PropTypes.number,\r\n    startAngle: PropTypes.number,\r\n    endAngle: PropTypes.number,\r\n    animate: PropTypes.bool,\r\n    cornerRadius: PropTypes.number,\r\n    animateDuration: PropTypes.number,\r\n}\r\n\r\nProgressCircle.defaultProps = {\r\n    progressColor: 'black',\r\n    backgroundColor: '#ECECEC',\r\n    strokeWidth: 5,\r\n    startAngle: 0,\r\n    endAngle: Math.PI * 2,\r\n    cornerRadius: 45,\r\n}\r\n\r\nexport default ProgressCircle\r\n","import React, { PureComponent } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Text, View } from 'react-native'\r\nimport * as d3Scale from 'd3-scale'\r\nimport * as array from 'd3-array'\r\nimport Svg, { G, Text as SVGText } from 'react-native-svg'\r\n\r\nclass XAxis extends PureComponent {\r\n    state = {\r\n        width: 0,\r\n        height: 0,\r\n    }\r\n\r\n    _onLayout(event) {\r\n        const {\r\n            nativeEvent: {\r\n                layout: { width, height },\r\n            },\r\n        } = event\r\n\r\n        if (width !== this.state.width) {\r\n            this.setState({ width, height })\r\n        }\r\n    }\r\n\r\n    _getX(domain) {\r\n        const {\r\n            scale,\r\n            spacingInner,\r\n            spacingOuter,\r\n            contentInset: { left = 0, right = 0 },\r\n        } = this.props\r\n\r\n        const { width } = this.state\r\n\r\n        const x = scale()\r\n            .domain(domain)\r\n            .range([left, width - right])\r\n\r\n        if (scale === d3Scale.scaleBand) {\r\n            x.paddingInner([spacingInner]).paddingOuter([spacingOuter])\r\n\r\n            //add half a bar to center label\r\n            return (value) => x(value) + x.bandwidth() / 2\r\n        }\r\n\r\n        return x\r\n    }\r\n\r\n    render() {\r\n        const { style, scale, data, xAccessor, formatLabel, numberOfTicks, svg, children, min, max } = this.props\r\n\r\n        const { height, width } = this.state\r\n\r\n        if (data.length === 0) {\r\n            return <View style={style} />\r\n        }\r\n\r\n        const values = data.map((item, index) => xAccessor({ item, index }))\r\n        const extent = array.extent(values)\r\n        const domain = scale === d3Scale.scaleBand ? values : [min || extent[0], max || extent[1]]\r\n\r\n        const x = this._getX(domain)\r\n        const ticks = numberOfTicks ? x.ticks(numberOfTicks) : values\r\n\r\n        const extraProps = {\r\n            x,\r\n            ticks,\r\n            width,\r\n            height,\r\n            formatLabel,\r\n        }\r\n\r\n        return (\r\n            <View style={style}>\r\n                <View style={{ flexGrow: 1 }} onLayout={(event) => this._onLayout(event)}>\r\n                    {/*invisible text to allow for parent resizing*/}\r\n                    <Text\r\n                        style={{\r\n                            opacity: 0,\r\n                            fontSize: svg.fontSize,\r\n                            fontFamily: svg.fontFamily,\r\n                            fontWeight: svg.fontWeight,\r\n                        }}\r\n                    >\r\n                        {formatLabel(ticks[0], 0)}\r\n                    </Text>\r\n                    {height > 0 && width > 0 && (\r\n                        <Svg\r\n                            style={{\r\n                                position: 'absolute',\r\n                                top: 0,\r\n                                left: 0,\r\n                                height: height,\r\n                                width: width,\r\n                            }}\r\n                        >\r\n                            <G>\r\n                                {React.Children.map(children, (child) => {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                })}\r\n                                {// don't render labels if width isn't measured yet,\r\n                                // causes rendering issues\r\n                                width > 0 &&\r\n                                    ticks.map((value, index) => {\r\n                                        const { svg: valueSvg = {} } = data[index] || {}\r\n\r\n                                        return (\r\n                                            <SVGText\r\n                                                textAnchor={'middle'}\r\n                                                originX={x(value)}\r\n                                                alignmentBaseline={'hanging'}\r\n                                                {...svg}\r\n                                                {...valueSvg}\r\n                                                key={index}\r\n                                                y={0}\r\n                                                x={x(value)}\r\n                                                \r\n                                            >\r\n                                                {formatLabel(value, index)}\r\n                                            </SVGText>\r\n                                        )\r\n                                    })}\r\n                            </G>\r\n                        </Svg>\r\n                    )}\r\n                </View>\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nXAxis.propTypes = {\r\n    data: PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.number, PropTypes.object])).isRequired,\r\n    spacingInner: PropTypes.number,\r\n    spacingOuter: PropTypes.number,\r\n    formatLabel: PropTypes.func,\r\n    contentInset: PropTypes.shape({\r\n        left: PropTypes.number,\r\n        right: PropTypes.number,\r\n    }),\r\n    scale: PropTypes.func,\r\n    numberOfTicks: PropTypes.number,\r\n    xAccessor: PropTypes.func,\r\n    svg: PropTypes.object,\r\n    min: PropTypes.any,\r\n    max: PropTypes.any,\r\n}\r\n\r\nXAxis.defaultProps = {\r\n    spacingInner: 0.05,\r\n    spacingOuter: 0.05,\r\n    contentInset: {},\r\n    svg: {},\r\n    xAccessor: ({ index }) => index,\r\n    scale: d3Scale.scaleLinear,\r\n    formatLabel: (value) => value,\r\n}\r\n\r\nexport default XAxis\r\n","import React, { PureComponent } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Text, View } from 'react-native'\r\nimport { Svg, G, Text as SVGText } from 'react-native-svg'\r\nimport * as d3Scale from 'd3-scale'\r\nimport * as array from 'd3-array'\r\n\r\nclass YAxis extends PureComponent {\r\n    state = {\r\n        height: 0,\r\n        width: 0,\r\n    }\r\n\r\n    _onLayout(event) {\r\n        const {\r\n            nativeEvent: {\r\n                layout: { height, width },\r\n            },\r\n        } = event\r\n        this.setState({ height, width })\r\n    }\r\n\r\n    getY(domain) {\r\n        const {\r\n            scale,\r\n            spacingInner,\r\n            spacingOuter,\r\n            contentInset: { top = 0, bottom = 0 },\r\n        } = this.props\r\n\r\n        const { height } = this.state\r\n\r\n        const y = scale()\r\n            .domain(domain)\r\n            .range([height - bottom, top])\r\n\r\n        if (scale === d3Scale.scaleBand) {\r\n            // use index as domain identifier instead of value since\r\n            // same value can occur at several places in dataPoints\r\n            y\r\n                // set range top to bottom - we are not sorting on values in scaleBand\r\n                .range([top, height - bottom])\r\n                .paddingInner([spacingInner])\r\n                .paddingOuter([spacingOuter])\r\n\r\n            //add half a bar to center label\r\n            return (value) => y(value) + y.bandwidth() / 2\r\n        }\r\n\r\n        return y\r\n    }\r\n\r\n    render() {\r\n        const { style, data, scale, yAccessor, numberOfTicks, formatLabel, svg, children } = this.props\r\n\r\n        const { height, width } = this.state\r\n\r\n        if (data.length === 0) {\r\n            return <View style={style} />\r\n        }\r\n\r\n        const values = data.map((item, index) => yAccessor({ item, index }))\r\n\r\n        const extent = array.extent(values)\r\n\r\n        const { min = extent[0], max = extent[1] } = this.props\r\n\r\n        const domain = scale === d3Scale.scaleBand ? values : [min, max]\r\n\r\n        //invert range to support svg coordinate system\r\n        const y = this.getY(domain)\r\n\r\n        const ticks = scale === d3Scale.scaleBand ? values : y.ticks(numberOfTicks)\r\n\r\n        const longestValue = ticks\r\n            .map((value, index) => formatLabel(value, index))\r\n            .reduce((prev, curr) => (prev.toString().length > curr.toString().length ? prev : curr), 0)\r\n\r\n        const extraProps = {\r\n            y,\r\n            ticks,\r\n            width,\r\n            height,\r\n            formatLabel,\r\n        }\r\n\r\n        return (\r\n            <View style={[style]}>\r\n                <View style={{ flexGrow: 1 }} onLayout={(event) => this._onLayout(event)}>\r\n                    {/*invisible text to allow for parent resizing*/}\r\n                    <Text\r\n                        style={{\r\n                            opacity: 0,\r\n                            fontSize: svg.fontSize,\r\n                            fontFamily: svg.fontFamily,\r\n                            fontWeight: svg.fontWeight,\r\n                        }}\r\n                    >\r\n                        {longestValue}\r\n                    </Text>\r\n                    {height > 0 && width > 0 && (\r\n                        <Svg\r\n                            style={{\r\n                                position: 'absolute',\r\n                                top:0,\r\n                                left: 0,\r\n                                height: height,\r\n                                width: width,\r\n                            }}\r\n                        >\r\n                            <G>\r\n                                {React.Children.map(children, (child) => {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                })}\r\n                                {// don't render labels if width isn't measured yet,\r\n                                // causes rendering issues\r\n                                height > 0 &&\r\n                                    ticks.map((value, index) => {\r\n                                        return (\r\n                                            <SVGText\r\n                                                originY={y(value)}\r\n                                                textAnchor={'middle'}\r\n                                                x={'50%'}\r\n                                                alignmentBaseline={'middle'}\r\n                                                {...svg}\r\n                                                key={y(value)}\r\n                                                y={y(value)}\r\n                                                //opacity={index % 2 ? 0 : 1}\r\n                                            >\r\n                                                {formatLabel(value, index, ticks.length)}\r\n                                            </SVGText>\r\n                                        )\r\n                                    })}\r\n                            </G>\r\n                        </Svg>\r\n                    )}\r\n                </View>\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nYAxis.propTypes = {\r\n    data: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.object), PropTypes.arrayOf(PropTypes.number)]).isRequired,\r\n    svg: PropTypes.object,\r\n    style: PropTypes.any,\r\n    numberOfTicks: PropTypes.number,\r\n    formatLabel: PropTypes.func,\r\n    contentInset: PropTypes.shape({\r\n        top: PropTypes.number,\r\n        bottom: PropTypes.number,\r\n    }),\r\n    min: PropTypes.number,\r\n    max: PropTypes.number,\r\n    yAccessor: PropTypes.func,\r\n    scale: PropTypes.func,\r\n    spacingInner: PropTypes.number,\r\n    spacingOuter: PropTypes.number,\r\n}\r\n\r\nYAxis.defaultProps = {\r\n    numberOfTicks: 8,\r\n    spacingInner: 0.05,\r\n    spacingOuter: 0.05,\r\n    contentInset: {},\r\n    svg: {},\r\n    scale: d3Scale.scaleLinear,\r\n    formatLabel: (value) => value && value.toString(),\r\n    yAccessor: ({ item }) => item,\r\n}\r\n\r\nexport default YAxis\r\n","import React from 'react'\r\nimport { Line } from 'react-native-svg'\r\n\r\nclass HorizontalLine extends React.Component {\r\n    render() {\r\n        const { y, value, ...other } = this.props\r\n        return <Line x1={'0%'} x2={'100%'} y1={y(value)} y2={y(value)} {...other} />\r\n    }\r\n}\r\n\r\nHorizontalLine.defaultProps = {\r\n    stroke: 'black',\r\n}\r\n\r\nexport default HorizontalLine\r\n","import PropTypes from 'prop-types'\r\nimport React from 'react'\r\nimport { Circle } from 'react-native-svg'\r\n\r\nconst Point = ({ x, y, value, index, radius, color }) => {\r\n    if (isNaN(value)) {\r\n        return <Circle />\r\n    }\r\n\r\n    return <Circle cx={x(index)} cy={y(value)} r={radius} stroke={color} fill={'white'} />\r\n}\r\n\r\nPoint.propTypes = {\r\n    x: PropTypes.func.isRequired,\r\n    y: PropTypes.func.isRequired,\r\n    value: PropTypes.number,\r\n    radius: PropTypes.number,\r\n    index: PropTypes.number,\r\n    color: PropTypes.string,\r\n}\r\n\r\nPoint.defaultProps = {\r\n    radius: 4,\r\n    color: 'black',\r\n}\r\n\r\nexport default Point\r\n","import PropTypes from 'prop-types'\r\nimport React from 'react'\r\nimport { Circle, G, Line, Rect, Text } from 'react-native-svg'\r\n\r\nconst Tooltip = ({ x, y, value, index, height, text, stroke, pointStroke }) => {\r\n    return (\r\n        <G>\r\n            <Line x1={x(index)} y1={height} x2={x(index)} y2={20} stroke={stroke} />\r\n            <Circle cx={x(index)} cy={y(value)} r={4} stroke={pointStroke} strokeWidth={2} fill={'white'} />\r\n            <G x={x(index) < 40 ? 40 : x(index)} y={10}>\r\n                <Rect x={-40} y={1} width={80} height={20} fill={'rgba(0, 0, 0, 0.2)'} rx={2} ry={2} />\r\n                <Rect x={-40} y={0} width={80} height={20} fill={'white'} rx={2} ry={2} />\r\n                <Text fontSize='12' textAnchor='middle'>\r\n                    {text}\r\n                </Text>\r\n            </G>\r\n        </G>\r\n    )\r\n}\r\n\r\nTooltip.propTypes = {\r\n    x: PropTypes.func.isRequired,\r\n    y: PropTypes.func.isRequired,\r\n    value: PropTypes.number,\r\n    index: PropTypes.number,\r\n    height: PropTypes.number,\r\n    stroke: PropTypes.string,\r\n    pointStroke: PropTypes.string,\r\n    text: PropTypes.string,\r\n}\r\n\r\nexport default Tooltip\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { G, Line } from 'react-native-svg'\r\n \r\nconst Horizontal = ({ ticks = [], y, svg }) => {\r\n    return (\r\n        <G>\r\n            {ticks.map((tick) => (\r\n                <Line\r\n                    key={tick}\r\n                    x1={'0%'}\r\n                    x2={'100%'}\r\n                    y1={y(tick)}\r\n                    y2={y(tick)}\r\n                    strokeWidth={1}\r\n                    stroke={'rgba(0,0,0,0.2)'}\r\n                    {...svg}\r\n                />\r\n            ))}\r\n        </G>\r\n    )\r\n}\r\n\r\nconst Vertical = ({ ticks = [], x, svg }) => {\r\n    return (\r\n        <G>\r\n            {ticks.map((tick, index) => (\r\n                <Line\r\n                    key={index}\r\n                    y1={'0%'}\r\n                    y2={'100%'}\r\n                    x1={x(tick)}\r\n                    x2={x(tick)}\r\n                    strokeWidth={1}\r\n                    stroke={'rgba(0,0,0,0.2)'}\r\n                    {...svg}\r\n                />\r\n            ))}\r\n        </G>\r\n    )\r\n}\r\n\r\nconst Both = (props) => {\r\n    return (\r\n        <G>\r\n            <Horizontal {...props} />\r\n            <Vertical {...props} />\r\n        </G>\r\n    )\r\n}\r\n\r\nVertical.propTypes = {\r\n    x: PropTypes.func,\r\n    dataPoints: PropTypes.array,\r\n    svg: PropTypes.object,\r\n}\r\n\r\nHorizontal.propTypes = {\r\n    y: PropTypes.func,\r\n    ticks: PropTypes.array,\r\n}\r\n\r\nBoth.propTypes = {\r\n    ...Vertical.propTypes,\r\n    ...Horizontal.propTypes,\r\n}\r\n\r\nconst Direction = {\r\n    VERTICAL: 'VERTICAL',\r\n    HORIZONTAL: 'HORIZONTAL',\r\n    BOTH: 'BOTH',\r\n}\r\n\r\nconst Grid = ({ direction, ...props }) => {\r\n    if (direction === Direction.VERTICAL) {\r\n        return <Vertical {...props} />\r\n    } else if (direction === Direction.HORIZONTAL) {\r\n        return <Horizontal {...props} />\r\n    } else if (direction === Direction.BOTH) {\r\n        return <Both {...props} />\r\n    }\r\n\r\n    return null\r\n}\r\n\r\nGrid.Direction = Direction\r\n\r\nGrid.propTypes = {\r\n    direction: PropTypes.oneOf(Object.values(Direction)),\r\n    belowChart: PropTypes.bool,\r\n    svg: PropTypes.object,\r\n}\r\n\r\nGrid.defaultProps = {\r\n    direction: Direction.HORIZONTAL,\r\n    belowChart: true,\r\n}\r\n\r\nexport default Grid\r\n","import React, { useEffect, useRef, useState } from 'react';\r\n// import * as React from 'react'\r\n\r\nimport { chartColors, row, sizes } from \"../style\";\r\nimport {\r\n    PanResponder,\r\n    Dimensions,\r\n    Text,\r\n    TouchableOpacity,\r\n    View,\r\n} from 'react-native';\r\nimport { LineChart, XAxis, YAxis } from '../charts-js/';\r\nimport {\r\n    Circle,\r\n    Defs,\r\n    G,\r\n    Line,\r\n    LinearGradient,\r\n    Path,\r\n    Rect,\r\n    Stop,\r\n    Text as SvgText,\r\n} from 'react-native-svg';\r\nimport * as shape from 'd3-shape';\r\nimport { toDollarsAndCents, toDateMonthYear, toDateDayMonth } from '../utils/misc';\r\n\r\n\r\nexport default InteractiveChart;\r\n\r\nfunction InteractiveChart(props: any) {\r\n    const apx = (size = 0) => {\r\n        let width = Dimensions.get('window').width; //useDimensions\r\n        return (width / 750) * size;\r\n    };\r\n    \r\n    if (!props.data) {\r\n        props = {data: [{date: String(new Date()), return: 2}, {date: String(new Date(\"9/1/2022\")) , return: 1}]}\r\n    }\r\n    //console.log(props.data.map((a: any) => a.date));\r\n    const dateList = props.data.map((a: any) => a.x);\r\n    //const [dateList, setDateList] = useState([]);\r\n\r\n\r\n    const priceList = props.data.map((a: any) => a.y)\r\n    //const [priceList, setPriceList] = useState([]);\r\n    \r\n    const size = useRef(dateList.length);\r\n    size.current = dateList.length;\r\n    \r\n    \r\n    const [positionX, setPositionX] = useState(-1);// The currently selected X coordinate position\r\n\r\n    const panResponder = useRef(\r\n        PanResponder.create({\r\n            // 要求成为响应者：\r\n            onStartShouldSetPanResponder: (evt, gestureState) => true,\r\n            onStartShouldSetPanResponderCapture: (evt, gestureState) => true,\r\n            onMoveShouldSetPanResponder: (evt, gestureState) => true,\r\n            onMoveShouldSetPanResponderCapture: (evt, gestureState) => true,\r\n            onPanResponderTerminationRequest: (evt, gestureState) => true,\r\n\r\n            onPanResponderGrant: (evt, gestureState) => {\r\n                updatePosition(evt.nativeEvent.locationX);\r\n                return true;\r\n            },\r\n            onPanResponderMove: (evt, gestureState) => {\r\n                updatePosition(evt.nativeEvent.locationX);\r\n                return true;\r\n            },\r\n            onPanResponderRelease: () => {\r\n                setPositionX(-1);\r\n            },\r\n        })\r\n    );\r\n\r\n    const updatePosition = (x: any) => {\r\n        const YAxisWidth = apx(130);\r\n        const x0 = apx(0);// x0 position\r\n        const chartWidth = apx(750) - YAxisWidth - x0;\r\n        const xN = x0 + chartWidth;//xN position\r\n        const xDistance = chartWidth / size.current;// The width of each coordinate point\r\n\r\n        \r\n        if (x <= x0) {\r\n            x = x0;\r\n        }\r\n        if (x >= xN) {\r\n            x = xN;\r\n        }\r\n\r\n        // console.log((x - x0) )\r\n\r\n        // The selected coordinate x :\r\n        // (x - x0)/ xDistance = value\r\n        let value = Number(((x - x0) / xDistance).toFixed(0));\r\n        if (value >= size.current - 1) {\r\n            value = size.current - 1; // Out of chart range, automatic correction\r\n        }\r\n\r\n        setPositionX(Number(value));\r\n    };\r\n\r\n    const CustomGrid = ( props: {x: any, y: any, ticks: any, performance: Boolean} ) => (\r\n\r\n        <G>\r\n            {\r\n                // Horizontal grid\r\n                props.ticks.map((tick: any) => (\r\n                    \r\n                    <Line\r\n                        key={tick}\r\n                        x1=\"0%\"\r\n                        x2=\"100%\"\r\n                        y1={props.y(1)}\r\n                        y2={props.y(1)}\r\n                        strokeWidth={props.performance ? 0.5 : 0}\r\n                        stroke=\"#35A265\"\r\n                        \r\n                    />\r\n                ))\r\n            }\r\n            {\r\n                // Vertical grid\r\n                /*\r\n                priceList.map((_, index) => (\r\n                    <Line\r\n                        key={index.toString()}\r\n                        y1=\"0%\"\r\n                        y2=\"0%\"\r\n                        x1={props.x(index)}\r\n                        x2={props.x(index)}\r\n                        stroke=\"#EEF3F6\"\r\n                    />\r\n                ))\r\n                */\r\n            }\r\n        </G>\r\n    );\r\n\r\n    const CustomLine = ( line: any ) => (\r\n        <Path\r\n            key=\"line\"\r\n            d={line}\r\n            stroke=\"#FEBE18\"\r\n            strokeWidth={apx(6)}\r\n            fill=\"none\"\r\n        />\r\n    );\r\n\r\n    const CustomGradient = () => (\r\n        <Defs key=\"gradient\">\r\n            <LinearGradient id=\"gradient\" x1=\"0\" x2=\"0%\" y2=\"100%\">\r\n                {/* <Stop offset=\"0%\" stopColor=\"rgb(134, 65, 244)\" /> */}\r\n                {/* <Stop offset=\"100%\" stopColor=\"rgb(66, 194, 244)\" /> */}\r\n\r\n                <Stop offset=\"0%\" stopColor=\"#FEBE18\" stopOpacity={0.25} />\r\n                <Stop offset=\"100%\" stopColor=\"#FEBE18\" stopOpacity={0} />\r\n            </LinearGradient>\r\n        </Defs>\r\n    );\r\n\r\n    const Tooltip = ( props: {x: any, y: any, ticks: any} ) => {\r\n        if (positionX < 0) {\r\n            return null;\r\n        }\r\n        const date = dateList[positionX];\r\n\r\n        return (\r\n            <G x={props.x(positionX)} key=\"tooltip\">\r\n                <G\r\n                    x={positionX > size.current / 2 ? -apx(300 + 10) : apx(10)}\r\n                    y={props.y(priceList[positionX]) - apx(10)}>\r\n                    <Rect\r\n                        y={-apx(24 + 24 + 20) / 2}\r\n                        rx={apx(12)} // borderRadius\r\n                        ry={apx(12)} // borderRadius\r\n                        width={apx(300)}\r\n                        height={apx(96)}\r\n                        stroke=\"rgba(254, 190, 24, 0.27)\"\r\n                        fill=\"rgba(255, 255, 255, 0.8)\"\r\n                    />\r\n\r\n                    <SvgText x={apx(20)} fill=\"#617485\" opacity={0.65} fontSize={apx(24)}>\r\n                        {(new Date(date)).toLocaleDateString()}\r\n                    </SvgText>\r\n                    <SvgText\r\n                        x={apx(20)}\r\n                        y={apx(24 + 20)}\r\n                        fontSize={apx(24)}\r\n                        fontWeight=\"bold\"\r\n                        fill=\"rgba(224, 188, 136, 1)\">\r\n                        {toDollarsAndCents(priceList[positionX])}\r\n                    </SvgText>\r\n                </G>\r\n\r\n                <G x={props.x}>\r\n                    <Line\r\n                        y1={props.ticks[0]}\r\n                        y2={props.ticks[Number(props.ticks.length)]}\r\n                        stroke=\"#FEBE18\"\r\n                        strokeWidth={apx(4)}\r\n                        strokeDasharray={[6, 3]}\r\n                    />\r\n\r\n                    <Circle\r\n                        cy={props.y(priceList[positionX])}\r\n                        r={apx(20 / 2)}\r\n                        stroke=\"#fff\"\r\n                        strokeWidth={apx(2)}\r\n                        fill=\"#FEBE18\"\r\n                    />\r\n                </G>\r\n            </G>\r\n        );\r\n    };\r\n\r\n    const verticalContentInset = { top: 10, bottom: 10 };\r\n\r\n    return (\r\n        <View\r\n            style={{\r\n                backgroundColor: '#fff',\r\n                alignItems: 'stretch',\r\n                borderWidth: 1, \r\n                borderRadius: sizes.rem0_5 / 2,\r\n                borderColor: \"#ccc\",\r\n                padding: sizes.rem0_5,\r\n                //aspectRatio: 16 / 9,\r\n            }}>\r\n            <View\r\n                style={{\r\n                    flexDirection: 'row',\r\n                    width: \"100%\",\r\n                    //height: apx(570),\r\n                    aspectRatio: 16 / 9,\r\n                    alignSelf: 'stretch',\r\n                    \r\n                }}>\r\n                <View style={{ flex: 1 }} {...panResponder.current.panHandlers}>\r\n                    <LineChart\r\n                        style={{ flex: 1 }}\r\n                        data={priceList}\r\n                        //curve={shape.curveNatural}\r\n                        curve={shape.curveMonotoneX}\r\n                        contentInset={{ ...verticalContentInset }}\r\n                        svg={{ stroke: \"#11146F\" }}>\r\n                        {/*<CustomLine />*/}\r\n                        <CustomGrid x={undefined} y={undefined} ticks={undefined} performance={props.performance} />\r\n                        <CustomGradient />\r\n                        <Tooltip x={undefined} y={undefined} ticks={undefined} />\r\n                    </LineChart>\r\n                </View>\r\n\r\n                <YAxis\r\n                    style={{ width: \"12%\" }}\r\n                    data={priceList}\r\n                    contentInset={verticalContentInset}\r\n                    svg={{ fontSize: apx(18), fill: '#617485',\r\n                }}\r\n                    numberOfTicks={5}\r\n                    \r\n                    formatLabel={(value: any, index: any) => `$${String(value).split('.')[0].length > 2 ? value.toFixed(1) : value.toFixed(2)}`}\r\n                />\r\n            </View>\r\n            <XAxis\r\n                style={{\r\n                    alignSelf: 'stretch',\r\n                    // marginTop: apx(57),\r\n                    width: \"100%\",\r\n                    height: apx(70),\r\n                }}\r\n                numberOfTicks={props.period === '1D' ? 1 : 5}\r\n                data={priceList}\r\n                formatLabel={(value: any, index: any) => ['1D', '1W', '1M'].includes(props.period) ? toDateDayMonth(dateList[value]) : toDateMonthYear(dateList[value])}\r\n                contentInset={{\r\n                    left: apx(46),\r\n                    right: apx(100),\r\n                }}\r\n                svg={{\r\n                    fontSize: apx(18),\r\n                    fill: '#617485',\r\n                    y: apx(20),\r\n                    rotation: 30,\r\n                    textAnchor:'start'\r\n                    // originY: 30,\r\n                }}\r\n            />\r\n        </View>\r\n    );\r\n}","import { Button, ButtonGroup as UI_ButtonGroup, ButtonGroupProps, ButtonProps, Text } from \"@ui-kitten/components\"\r\nimport React, { useState } from \"react\"\r\nimport { sizes } from \"../style\"\r\n\r\nexport const ButtonGroup = <T extends string>(props: {\r\n    value: T | undefined,\r\n    onValueChange: (value: T) => void\r\n    items: { label: string, value: T }[],\r\n    unselectedStyle?: ButtonProps[\"style\"],\r\n    style?: ButtonGroupProps[\"style\"]\r\n}) => {\r\n    return <UI_ButtonGroup style={[{ width: \"100%\", marginBottom: sizes.rem1 }, props.style]}>\r\n        {\r\n            props.items.map((v, idx, arr) => {\r\n                const isSelected = props.value === v.value;\r\n                const opacity = isSelected ? 1 : 0.5;\r\n                //console.log(`Button at idx ${idx} isSelected: ${isSelected} with opacity of ${opacity}`);\r\n\r\n                return <Button key={'button_' + idx + \"_\" + isSelected}\r\n                    style={[\r\n                        {\r\n                            backgroundColor: isSelected ? \"green\" : \"#777\",\r\n                            width: 100 / arr.length + \"%\",\r\n                            minWidth: 100 / arr.length + \"%\",\r\n                            opacity\r\n                        }, isSelected ? props.unselectedStyle : undefined]\r\n                    }\r\n                    onPress={() => props.onValueChange(v.value)}>\r\n                        {evaProps => \r\n                            <Text {...evaProps} style={{ color: 'white', fontSize: 14 }}>\r\n                                {v.label}\r\n                            </Text>}\r\n                    </Button>\r\n            })\r\n        }\r\n    </UI_ButtonGroup>\r\n\r\n}\r\n\r\n\r\n","import React, { PropsWithChildren, useEffect, useRef, useState, Component } from \"react\"\r\nimport { NavigationProp, useNavigation } from \"@react-navigation/native\"\r\nimport { Avatar, Icon } from \"@ui-kitten/components\"\r\nimport { View, Text, Pressable, ScrollView, useWindowDimensions, Animated, FlatList, NativeSyntheticEvent, NativeScrollEvent } from \"react-native\"\r\nimport { ElevatedSection, Section, Subsection } from \"./Section\"\r\nimport { NoteEditor, SecPressable } from \"../screens/WatchlistViewerScreen\"\r\nimport { fonts, sizes } from \"../style\"\r\nimport { AppColors } from \"../constants/Colors\"\r\nimport { toDollars, toDollarsAndCents, toNumber1, toPercent1 } from \"../utils/misc\"\r\n\r\nexport const HoldingRenderItem = (props: {item: any, byId: any, isOwner: boolean}) => {\r\n    const { item, byId } = props\r\n    const secId = item.item.security_id;\r\n    //const intradayChange = item.item.price ? item.item.price.price - item.item.price.open : 0\r\n    //const hideEmptyNote = watchlist?.user[0].id !== appUser?.id\r\n    return (\r\n        <ElevatedSection title=\"\" style={{flex: 1, marginBottom: sizes.rem1_5 / 2, marginHorizontal: sizes.rem1_5 / 4, paddingHorizontal: sizes.rem0_5, paddingVertical: sizes.rem0_5}}>\r\n        <View style={{flexDirection: 'row', justifyContent: 'center'}}>\r\n            <SecPressable securityId={byId[secId] ? (byId[secId].symbol === 'USD:CUR' ? -1 : secId) : -1}>                                        \r\n                <Avatar\r\n                    style={{borderWidth: 1, borderColor: '#ccc'}}\r\n                    resizeMode={'contain'}\r\n                    size=\"large\"\r\n                    shape=\"rounded\"\r\n                    source={\r\n                        (() => {\r\n                            let output: { uri: string } | undefined;\r\n                            output = byId[secId] ? { uri: byId[secId].logo_url  } : undefined\r\n                            return output;\r\n                        })()}\r\n                    />\r\n            </SecPressable>\r\n            <View style={{flex: 1, alignItems: 'center'}}>\r\n                <Text style={{flex: 1, fontWeight: '900', color: '#454545'}}>\r\n                            {byId[secId] ? (byId[secId].symbol === 'USD:CUR' ? 'Cash' : byId[secId].symbol) : ''}\r\n                </Text>\r\n                <Text style={[item.item.optionInfo ? {display: 'flex'} : {display: 'none'}, {fontSize: fonts.xSmall}]}>\r\n                        {item.item.optionInfo && `${String(item.item.optionInfo[0].type).toLowerCase() === 'call' ? 'C' : 'P'}${toNumber1(item.item.optionInfo[0].strike_price)} ${new Date(item.item.optionInfo[0].expiration).toLocaleDateString()}`}\r\n                    </Text>\r\n                <Text style={[{flex: 1, color: '#606060'}, byId[secId] ? (byId[secId].symbol === 'USD:CUR' ? {display: 'none'} : {display: 'flex'}) : {display: 'none'}]}>\r\n                    {toDollarsAndCents(item.item.price)}\r\n                </Text>\r\n            </View>\r\n\r\n        </View>\r\n        <View style={{flex: 1, alignContent: 'space-between', marginTop: sizes.rem0_5, flexDirection: 'row'}}>\r\n            <View style={{flex: 1, alignItems: 'center', flexDirection: 'row'}}>\r\n                <View style={{flex: 1, alignItems: 'center'}}>\r\n                    <Text style={{fontSize: fonts.medium / 2, color: '#9D9D9D'}}>\r\n                        {props.isOwner ? 'Market Value' : '% Portfolio'}\r\n                    </Text>\r\n                    <Text style={{fontSize: fonts.small, color: '#606060'}}>\r\n                        {props.isOwner ? `${toDollars(item.item.value)}` : `${toPercent1(item.item.value)}`}\r\n                    </Text>\r\n                </View>\r\n                <View style={[{flex: 1, alignItems: 'center'}, byId[secId] ? (byId[secId].symbol === 'USD:CUR' ? {display: 'none'} : {display: 'flex'}) : {display: 'none'}]}>\r\n                    <Text style={{fontSize: fonts.medium / 2, color: '#9D9D9D'}}>\r\n                        {'Cost'}\r\n                    </Text>\r\n                    <Text style={{fontSize: fonts.small, color: '#606060'}}>\r\n                        {`${toDollarsAndCents(item.item.cost_basis)}`}\r\n                    </Text>                                                    \r\n                </View>\r\n            </View>\r\n        </View>\r\n        <View style={[{flex: 1, flexDirection: 'row'}, props.isOwner ? {display: 'flex'} : {display: 'none'}]}>\r\n            <View style={[{flex: 1, alignItems: 'center'}, byId[secId] ? (byId[secId].symbol === 'USD:CUR' ? {display: 'none'} : {display: 'flex'}) : {display: 'none'}]}>\r\n                <Text style={{fontSize: fonts.medium / 2, color: '#9D9D9D'}}>\r\n                    {'Profit/Loss'}\r\n                </Text>\r\n                <Text style={[{fontSize: fonts.small}, \r\n                               item.item.pnl >= 0 ? (item.item.pnl === 0 ? {color: 'black'} : {color: 'green'}) : {color: 'red'}]}>\r\n                    {`${toDollars(item.item.pnl)}`}\r\n                </Text>\r\n            </View>\r\n\r\n        </View>\r\n    </ElevatedSection>\r\n    )\r\n}","import React, { PropsWithChildren, useEffect, useRef, useState, Component } from \"react\"\r\nimport { NavigationProp, useNavigation } from \"@react-navigation/native\"\r\nimport { Avatar, Icon } from \"@ui-kitten/components\"\r\nimport { View, Text, Pressable, ScrollView, useWindowDimensions, Animated, FlatList, NativeSyntheticEvent, NativeScrollEvent } from \"react-native\"\r\nimport { ElevatedSection, Section, Subsection } from \"./Section\"\r\nimport { NoteEditor, SecPressable } from \"../screens/WatchlistViewerScreen\"\r\nimport { fonts, sizes } from \"../style\"\r\nimport { AppColors } from \"../constants/Colors\"\r\nimport { toDollars, toDollarsAndCents, toFormatedDateTime, toNumber1 } from \"../utils/misc\"\r\n\r\nexport const TradeRenderItem = (props: {item: any, byId: any, isOwner: boolean}) => {\r\n    const { item, byId } = props\r\n    const secId = item.item.security_id || item.item.securityId;\r\n    //const intradayChange = item.item.price ? item.item.price.price - item.item.price.open : 0\r\n    //const hideEmptyNote = watchlist?.user[0].id !== appUser?.id\r\n    return (\r\n        <ElevatedSection title=\"\" style={{flex: 1, marginBottom: sizes.rem1_5 / 2, marginHorizontal: sizes.rem1_5 / 4, paddingHorizontal: sizes.rem0_5, paddingVertical: sizes.rem0_5}}>\r\n            <View style={{flexDirection: 'row', justifyContent: 'center'}}>\r\n                <SecPressable securityId={secId}>                                        \r\n                    <Avatar\r\n                        style={{borderWidth: 1, borderColor: '#ccc'}}\r\n                        resizeMode={'contain'}\r\n                        size=\"large\"\r\n                        shape=\"rounded\"\r\n                        source={\r\n                            (() => {\r\n                                let output: { uri: string } | undefined;\r\n                                output = byId[secId] ? { uri: byId[secId].logo_url  } : undefined\r\n                                return output;\r\n                            })()}\r\n                        />\r\n                </SecPressable>\r\n                <View style={{flex: 1, alignItems: 'center'}}>\r\n                    <Text style={{flex: 1, fontWeight: '900', color: '#454545'}}>\r\n                                {byId[secId] ? (byId[secId].symbol === 'USD:CUR' ? 'Cash' : `${item.item.type.slice(0,1).toUpperCase() + item.item.type.slice(1) } ${byId[secId].symbol}`) : ''}\r\n                    </Text>\r\n                    <Text style={[item.item.optionInfo ? {display: 'flex'} : {display: 'none'}, {fontSize: fonts.xSmall}]}>\r\n                        {item.item.optionInfo && `${String(item.item.optionInfo[0].type).toLowerCase() === 'call' ? 'C' : 'P'}${toNumber1(item.item.optionInfo[0].strike_price)} ${new Date(item.item.optionInfo[0].expiration).toLocaleDateString()}`}\r\n                    </Text>\r\n                    <Text style={{flex: 1, color: '#606060'}}>\r\n                        {`@ ${toDollarsAndCents(item.item.price)}`}\r\n                    </Text>\r\n                </View>\r\n            </View>\r\n            <View style={{flex: 1, alignContent: 'space-between', marginTop: sizes.rem0_5, flexDirection: 'row'}}>\r\n                <View style={[{flex: 1, alignItems: 'center', flexDirection: 'row'}, props.isOwner ? {display: 'flex'} : {display: 'none'}]}>\r\n                    <View style={{flex: 1, alignItems: 'center'}}>\r\n                        <Text style={{fontSize: fonts.medium / 2, color: '#9D9D9D'}}>\r\n                            {'Quantity'}\r\n                        </Text>\r\n                        <Text style={{fontSize: fonts.small, color: '#606060'}}>\r\n                            {`${item.item.quantity}`}\r\n                        </Text>\r\n                    </View>\r\n                    <View style={{flex: 1, alignItems: 'center'}}>\r\n                        <Text style={{fontSize: fonts.medium / 2, color: '#9D9D9D'}}>\r\n                            {'Market Value'}\r\n                        </Text>\r\n                        <Text style={{fontSize: fonts.small, color: '#606060'}}>\r\n                            {`${toDollars(item.item.amount)}`}\r\n                        </Text>                                                    \r\n                    </View>\r\n                </View>\r\n            </View>\r\n            <View style={{flex: 1, flexDirection: 'row'}}>\r\n            <View style={{flex: 1, alignItems: 'center'}}>\r\n                <Text style={{fontSize: fonts.medium / 2, color: '#9D9D9D'}}>\r\n                    {'Trade Date'}\r\n                </Text>\r\n                <Text style={[{fontSize: fonts.xSmall}]}>\r\n                    {`${(new Date(item.item.date)).getUTCHours() !== 12 ? toFormatedDateTime(String(item.item.date)) : (new Date(item.item.date)).toLocaleDateString()}`}\r\n                </Text>\r\n            </View>\r\n        </View>\r\n        </ElevatedSection>\r\n    )\r\n}","import React, {ReactElement, ReactNode, useEffect, useRef, useState} from \"react\";\r\nimport {Api} from '@tradingpost/common/api'\r\nimport {Tab, TabBar, TabView, Text} from \"@ui-kitten/components\";\r\n//import { ensureCurrentUser } from \"../apis/Authentication\";\r\nimport {ProfileBanner, profileImageSize, profileImageSmall, useProfileBannerSize} from \"../components/ProfileBanner\";\r\n//import { IAmiraUser } from \"../interfaces/IUser\";\r\n//import { DashboardScreen, DashProps, fullDashOptions, IDashboard } from \"../layouts/DashboardLayout\";\r\n//import { } from 'react-native-linear-gradient'\r\nimport {flex, fonts, paddView, row, sizes} from \"../style\";\r\nimport {\r\n    Animated,\r\n    View,\r\n    ScrollView,\r\n    NativeScrollEvent,\r\n    NativeSyntheticEvent,\r\n    useWindowDimensions,\r\n    Alert,\r\n    FlatList,\r\n    ViewStyle\r\n} from \"react-native\";\r\nimport {AwaitedReturn, DEV_ONLY, toPercent2, toDollarsAndCents, toThousands} from \"../utils/misc\";\r\nimport {SecondaryButton} from \"../components/SecondaryButton\";\r\nimport {ElevatedSection, Section, Subsection} from \"../components/Section\";\r\n//import { PostList, usePostLoader } from \"../components/PostList\";\r\n//import { getCompetitionsPast } from \"../apis/CompetitionApi\";\r\nimport {stringyDate, Table} from \"../components/Table\";\r\n//import { ChipPicker } from \"../components/ChipBar\";\r\nimport {PieHolder} from \"../components/PieHolder\";\r\nimport {WatchlistSection} from \"../components/WatchlistSection\";\r\n//import { TabScreenProps } from \"../navigation\";\r\nimport {IUserGet} from \"@tradingpost/common/api/entities/interfaces\";\r\nimport {useToast} from \"react-native-toast-notifications\";\r\nimport {FeedPart} from \"./FeedScreen\";\r\nimport {AppColors} from \"../constants/Colors\";\r\nimport {useMakeSecurityFields} from \"./WatchlistViewerScreen\";\r\nimport {PrimaryChip} from \"../components/PrimaryChip\";\r\nimport {useAppUser} from \"../Authentication\";\r\nimport InteractiveChart from \"../components/InteractiveGraph\";\r\nimport {ButtonGroup} from \"../components/ButtonGroup\";\r\nimport {RootStackScreenProps} from \"../navigation/pages\";\r\nimport { List } from \"../components/List\";\r\nimport { HoldingRenderItem } from \"../components/HoldingRenderItem\";\r\nimport { useSecuritiesList } from \"../SecurityList\";\r\nimport { TradeRenderItem } from \"../components/TradeRenderItem\";\r\n//import { screens } from \"../navigationComponents\";\r\n//import { getUser } from \"../apis/UserApi\";\r\n\r\n//May need to be changed for ios\r\nconst TabPanelSize = 48;\r\nconst StatusBarsize = 20;\r\nconst ButtonMargin = 8;\r\nconst ButtonBarsize = 43;\r\nconst titles = 27 + 17;\r\nconst tabBarMargin = sizes.rem1;\r\nconst clampBuffer = 4;\r\n\r\nconst collapseShift = 2 * ButtonMargin;\r\n\r\nconst periods: { [key: string]: number } = {\r\n    \"1D\": 1,\r\n    \"1W\": 5,\r\n    \"1M\": 20,\r\n    \"3M\": 60,\r\n    \"1Y\": 252,\r\n    \"2Y\": 504,\r\n    \"Max\": 1000\r\n}\r\n\r\nexport function ProfileScreen(props: RootStackScreenProps<'Profile'>) {\r\n    const userId = props.route?.params?.userId;\r\n\r\n    const [user, setUser] = useState<IUserGet>(),\r\n        [watchlists, setWatchlists] = useState<AwaitedReturn<typeof Api.User.extensions.getWatchlists>>(),\r\n        [summary, setSummary] = useState<AwaitedReturn<typeof Api.User.extensions.getPortfolio>>(),\r\n        [holdings, setHoldings] = useState<AwaitedReturn<typeof Api.User.extensions.getHoldings>>(),\r\n        [returns, setReturns] = useState<AwaitedReturn<typeof Api.User.extensions.getReturns>>(),\r\n        [twReturns, settwReturns] = useState<{ x: string, y: number }[]>(),\r\n        [portPeriod, setPortPeriod] = useState(\"1Y\"),\r\n        translateHeaderY = useRef(new Animated.Value(0)).current;\r\n\r\n    const dim = useWindowDimensions();\r\n    const scrollRef = useRef<FlatList>(null);\r\n    const bannerHeight = useProfileBannerSize(),\r\n        headerHeight = bannerHeight + TabPanelSize + ButtonBarsize + ButtonMargin * 2 + titles + tabBarMargin;\r\n\r\n    const clampMax = bannerHeight - profileImageSmall;\r\n    const minViewHeightCollapsed = dim.height - clampMax - StatusBarsize - headerHeight + bannerHeight + 2 * titles;\r\n    const minViewHeight = dim.height - headerHeight;\r\n    const [collapsed, setCollapsed] = useState(false);\r\n    const [isMaxed, setIsMaxed] = useState(false);\r\n    const translation = translateHeaderY.interpolate({\r\n        inputRange: [0, clampMax],\r\n        outputRange: [0, -clampMax],\r\n        extrapolate: 'clamp',\r\n    });\r\n    const manager = useRef<boolean[]>([]).current;\r\n    const {loginState} = useAppUser(),\r\n        appUser = loginState?.appUser\r\n\r\n\r\n    useEffect(() => {\r\n        translation.addListener((v: { value: number }) => {\r\n            const c = Math.abs(v.value + clampMax) < profileImageSize - profileImageSmall + 8;\r\n            const isMaxed = -v.value === clampMax;\r\n            setCollapsed(c);\r\n            setIsMaxed(isMaxed);\r\n        });\r\n        return () => translation.removeAllListeners();\r\n    }, [translation, clampMax]);\r\n\r\n    const [tab, setTab] = useState(0);\r\n    //const dashRef = useRef<any>()\r\n    const toast = useToast();\r\n\r\n    useEffect(() => {\r\n\r\n        if (userId && !user) {\r\n            (async () => {\r\n                try {\r\n                    const [user, holdingsP, watchlists] = await Promise.all([\r\n                        Api.User.get(userId),\r\n                        Api.User.extensions.getHoldings({userId: userId as string}),\r\n                        Api.User.extensions.getWatchlists({userId: userId as string})\r\n                    ]);\r\n                    setWatchlists(watchlists);\r\n                    setHoldings(holdingsP);\r\n                    setUser(user);\r\n                    let today = new Date();\r\n                    const summary = await Api.User.extensions.getPortfolio({userId: userId as string});\r\n                    setSummary(summary);\r\n                    const returns = await Api.User.extensions.getReturns({\r\n                        userId: userId as string,\r\n                        startDate: new Date(today.setDate(today.getDate() - 1001)),\r\n                        endDate: new Date()\r\n                    })\r\n                    setReturns(returns);\r\n                    if (returns.length) {\r\n                        let twr: { x: string, y: number }[] = [];\r\n                        const day = new Date(String(returns.slice(returns.length - periods[portPeriod])[0].date))\r\n                        twr.push({x: (new Date(day.setDate(day.getDate() - 1))).toUTCString(), y: 1})\r\n\r\n                        returns.slice(returns.length - periods[portPeriod]).forEach((r, i) => {\r\n                            twr.push({x: new Date(String(r.date)).toUTCString(), y: twr[i].y * (1 + r.return)})\r\n                        })\r\n                        settwReturns(twr);\r\n                    }\r\n                } catch (ex: any) {\r\n                    toast.show(ex.message);\r\n                }\r\n            })()\r\n        }\r\n    }, [userId, user])\r\n\r\n    useEffect(() => {\r\n        if (returns?.length) {\r\n            let twr: { x: string, y: number }[] = [];\r\n            const day = new Date(String(returns.slice(returns.length - periods[portPeriod])[0].date))\r\n            twr.push({x: (new Date(day.setDate(day.getDate() - 1))).toUTCString(), y: 1})\r\n\r\n            returns?.slice(returns.length - periods[portPeriod]).forEach((r, i) => {\r\n                twr.push({x: new Date(String(r.date)).toUTCString(), y: twr[i].y * (1 + r.return)})\r\n            })\r\n            settwReturns(twr);\r\n        }\r\n    }, [portPeriod])\r\n    const { securities: { bySymbol, byId } } = useSecuritiesList();\r\n    const displayHoldings = appUser?.id === user?.id || (user?.settings?.portfolio_display.holdings && user.subscription.is_subscribed)\r\n    const displayTrades = appUser?.id === user?.id || (user?.settings?.portfolio_display.trades && user.subscription.is_subscribed)\r\n    const displayPerformance = appUser?.id === user?.id || (user?.settings?.portfolio_display.performance && user.subscription.is_subscribed)\r\n    return <View style={[flex]}>\r\n        <Animated.FlatList\r\n            data={[\r\n                <ProfilePage key={'top_level_user_feed'} style={{paddingHorizontal: 0}} index={0}\r\n                             minViewHeight={minViewHeight} manager={manager} currentIndex={tab}>\r\n                    <FeedPart\r\n                        key={'user_feed'}\r\n                        userId={userId}\r\n                    />\r\n                </ProfilePage>,\r\n                <ProfilePage key={'top_level_performance_holdings'} index={1} minViewHeight={minViewHeight}\r\n                             manager={manager} currentIndex={tab}>\r\n                    <ElevatedSection title=\"Performance\">\r\n                        <View style={(appUser?.id === user?.id && !twReturns) ? {display: 'none'} : {display: 'flex'}}>\r\n                            <View style={displayPerformance ? {display: 'none'} : {\r\n                                justifyContent: \"center\",\r\n                                alignItems: 'center'\r\n                            }}>\r\n                                <Text style={{fontSize: fonts.medium, fontWeight: '500', color: '#ccc'}}>\r\n                                    {`@${user?.handle} does not display their investment performance.`}\r\n                                </Text>\r\n                            </View>\r\n                            <View style={displayPerformance ? {\r\n                                display: 'flex',\r\n                                marginBottom: sizes.rem1\r\n                            } : {display: 'none'}}>\r\n                                <View style={{marginBottom: sizes.rem1}}>\r\n                                    <InteractiveChart data={twReturns} period={portPeriod} performance={true}/>\r\n                                </View>\r\n                                <ButtonGroup key={\"period\"}\r\n                                             items={[\"1D\", \"1W\", \"1M\", \"3M\", \"1Y\", \"2Y\", \"Max\"].map(v => ({\r\n                                                 label: v,\r\n                                                 value: v\r\n                                             }))} onValueChange={(v) => setPortPeriod(v)} value={portPeriod}/>\r\n                            </View>\r\n                        </View>\r\n                        <Text\r\n                            style={[!(appUser?.id === user?.id && !twReturns) ? {display: 'none'} : {display: 'flex'}, {\r\n                                fontSize: fonts.medium,\r\n                                fontWeight: '500',\r\n                                color: '#ccc'\r\n                            }]}>\r\n                            {\"You haven't linked a brokerage to TradingPost. Go to your Account page in the Side Menu and Link one today!\"}\r\n                        </Text>\r\n                    </ElevatedSection>\r\n                    <Section title=\"Holdings\" style={{backgroundColor: AppColors.background}}>\r\n                        <View style={(appUser?.id === user?.id && !twReturns) ? {display: 'none'} : {display: 'flex'}}>\r\n                            <View style={displayHoldings ? {display: 'none'} : {\r\n                                justifyContent: \"center\",\r\n                                alignItems: 'center'\r\n                            }}>\r\n                                <Text style={{fontSize: fonts.medium, fontWeight: '500', color: '#ccc'}}>\r\n                                    {`@${user?.handle} does not display their investment holdings.`}\r\n                                </Text>\r\n                            </View>\r\n                            <View style={displayHoldings ? {\r\n                                display: 'flex',\r\n                                marginBottom: sizes.rem1\r\n                            } : {display: 'none'}}>\r\n                                <List\r\n                                    listKey=\"holdingsList\"\r\n                                    datasetKey={`holdings_id_${holdings?.length}`}\r\n                                    data={holdings}\r\n                                    loadingMessage={\" \"}\r\n                                    noDataMessage={\" \"}\r\n                                    loadingItem={undefined}\r\n                                    numColumns={2}\r\n                                    renderItem={(item) => {\r\n                                        return (\r\n                                            <HoldingRenderItem \r\n                                                item={item}\r\n                                                byId={byId}\r\n                                                isOwner={appUser?.id === user?.id}\r\n                                                />\r\n                                        )\r\n                                    }}\r\n                                />\r\n                            </View>\r\n                        </View>\r\n                        <Text\r\n                            style={[!(appUser?.id === user?.id && !twReturns) ? {display: 'none'} : {display: 'flex'}, {\r\n                                fontSize: fonts.medium,\r\n                                fontWeight: '500',\r\n                                color: '#ccc'\r\n                            }]}>\r\n                            {\"You haven't linked a brokerage to TradingPost. Go to your Account page in the Side Menu and Link one today!\"}\r\n                        </Text>\r\n                    </Section>\r\n                    <WatchlistSection title=\"Watchlists\" watchlists={watchlists}/>\r\n                </ProfilePage>,\r\n                <ProfilePage key={'top_level_trades'} index={2} minViewHeight={minViewHeight} manager={manager}\r\n                             currentIndex={tab}>\r\n                    <View style={displayTrades ? {display: 'none'} : {\r\n                        display: 'flex',\r\n                        height: '100%',\r\n                        justifyContent: \"center\",\r\n                        alignItems: 'center'\r\n                    }}>\r\n                        <Text style={{fontSize: fonts.medium, fontWeight: '500', color: '#ccc'}}>\r\n                            {`@${user?.handle} does not display their trades.`}\r\n                        </Text>\r\n                    </View>\r\n                    <Section title=\"\" style={[displayTrades ? {display: 'flex'} : {display: 'none'}, {backgroundColor: AppColors.background}]}>\r\n                        <List\r\n                            listKey={'trades_table'}\r\n                            loadingMessage={\" \"}\r\n                            noDataMessage={\" \"}\r\n                            loadingItem={undefined}\r\n                            numColumns={2}\r\n                            keyExtractor={(item, idx) => {\r\n                                return item ? \"trade_\" + idx : \"empty\";\r\n                            }}\r\n                            data={(async (a, $page) => {\r\n                                const newArr = a || [];\r\n                                newArr.push(...(await Api.User.extensions.getTrades({\r\n                                    $page,\r\n                                    $limit: 10,\r\n                                    settings: {userId: userId as string}\r\n                                })));\r\n                                //console.log(JSON.stringify(newArr))\r\n                                return newArr;\r\n                            })}\r\n                            renderItem={(item)=> {\r\n\r\n                                return (<TradeRenderItem \r\n                                    item={item}\r\n                                    byId={byId}\r\n                                    isOwner={appUser?.id === user?.id }\r\n                                />)\r\n                            }}\r\n                        />\r\n                    </Section>\r\n                </ProfilePage>,\r\n                <ProfilePage key={'top_level_about'} index={3} minViewHeight={minViewHeight} manager={manager}\r\n                             currentIndex={tab}>\r\n                    <ElevatedSection title=\"General\">\r\n                        <Subsection title=\"Biography\" alt={true}>\r\n                            <Text>{user?.bio}</Text>\r\n                        </Subsection>\r\n                        <View style={row}>\r\n                            <Subsection title=\"Strategy\" alt={true} style={flex}>\r\n                                <Text>{user?.analyst_profile?.investment_strategy}</Text>\r\n                            </Subsection>\r\n                            <Subsection title=\"Benchmark\" alt={true} style={flex}>\r\n                                <Text>{user?.analyst_profile?.benchmark}</Text>\r\n                            </Subsection>\r\n                        </View>\r\n                        <Subsection title=\"Interest &amp; Specialities\" alt={true} style={flex}>\r\n                            <View style={{flexDirection: \"row\"}}>\r\n                                {(user?.analyst_profile?.interests || [\"No\", \"Tags\", \"Here\"]).map((chip, i) =>\r\n                                    <PrimaryChip isAlt key={i} label={chip} style={{flex: 1}}/>)}\r\n                            </View>\r\n                        </Subsection>\r\n                    </ElevatedSection>\r\n                    <ElevatedSection title=\"Social Analytics\">\r\n                        <Text>\r\n                            Coming soon!\r\n                        </Text>\r\n                    </ElevatedSection>\r\n                </ProfilePage>\r\n            ]}\r\n            renderItem={(info) => {\r\n                return info.item;\r\n            }}\r\n            ref={scrollRef} contentContainerStyle={[{paddingTop: headerHeight}]} nestedScrollEnabled\r\n            onMomentumScrollEnd={(ev) => {\r\n                if (collapsed && !isMaxed) {\r\n                    scrollRef.current?.scrollToOffset({offset: clampMax, animated: true});\r\n                    setIsMaxed(true);\r\n                }\r\n            }}\r\n            onScroll={Animated.event<NativeSyntheticEvent<NativeScrollEvent>>([\r\n                {nativeEvent: {contentOffset: {y: translateHeaderY}}}\r\n            ], {useNativeDriver: true})}>\r\n        </Animated.FlatList>\r\n        <Animated.View style={{\r\n            position: \"absolute\",\r\n            top: 0,\r\n            backgroundColor: AppColors.background,\r\n            transform: [{translateY: translation}],\r\n            alignItems: \"stretch\",\r\n            width: \"100%\"\r\n        }}>\r\n            <ProfileBanner\r\n                subscriberCount={user?.subscription?.count}\r\n                navigator={props.navigation}\r\n                profilePic={user?.profile_url}\r\n                collapse={collapsed}\r\n                bannerPic={\"\"}\r\n                extraMarginTop={collapseShift}\r\n                platforms={user?.claims ? user?.claims.map(c => c.platform) : []}\r\n\r\n            />\r\n            <View style={[collapsed ? row : undefined, {width: \"100%\", alignItems: \"center\"}]}>\r\n                <View style={{marginHorizontal: collapsed ? sizes.rem1 : 0}}>\r\n                    <Text style={{\r\n                        color: \"black\",\r\n                        textAlign: !collapsed ? \"center\" : \"left\",\r\n                        fontSize: fonts.small\r\n                    }}>@{user?.handle || \"\"}</Text>\r\n                    <Text style={{\r\n                        color: \"black\",\r\n                        textAlign: !collapsed ? \"center\" : \"left\",\r\n                        fontSize: fonts.medium\r\n                    }}>{user?.display_name}</Text>\r\n                </View>\r\n                {appUser && user && <SecondaryButton\r\n                    {...(() => {\r\n                        let children: string;\r\n                        let onPress: () => void;\r\n                        let style;\r\n                        if (appUser && user && user?.id !== appUser?.id) {\r\n                            if (!user.subscription?.is_subscribed && !user.subscription?.is_pending) {\r\n                                children = `Subscribe ${(user.subscription?.cost as any) !== \"$0.00\" ? `${user.subscription.cost}/mo.` : \"(Free)\"}`\r\n                                onPress = async () => {\r\n                                    await Api.Subscriber.extensions.insertWithNotification({\r\n                                        subscription_id: user.subscription.id,\r\n                                        //TODO: this should be moved to the server side \r\n                                        start_date: new Date(),\r\n                                        user_id: user.id,\r\n                                        approved: !user.subscription.settings.approve_new\r\n                                    });\r\n                                    setUser(undefined);\r\n                                }\r\n                                style = {backgroundColor: \"#35A265\", borderColor: \"#35A265\"}\r\n                            } else {\r\n                                children = user.subscription.is_pending ? 'Pending' : 'Subscribed',\r\n                                    onPress = async () => {\r\n                                        await Api.Subscriber.extensions.removeSubscription({\r\n                                            subscriptionId: user.subscription?.id\r\n                                        });\r\n                                        setUser(undefined);\r\n                                    }\r\n                                style = user.subscription.is_pending ? {\r\n                                    backgroundColor: \"#FFCE31\",\r\n                                    borderColor: \"#FFCE31\"\r\n                                } : {backgroundColor: \"#EC5328\", borderColor: \"#EC5328\"}\r\n                            }\r\n                        } else {\r\n                            if (user?.subscription?.id) {\r\n                                children = 'Manage Subscriptions'\r\n                                onPress = () => props.navigation.navigate(\"Subscription\")\r\n                            } else {\r\n                                children = 'Become An Analyst'\r\n                                onPress = () => props.navigation.navigate(\"SubscriptionSettings\")\r\n                            }\r\n                        }\r\n                        return {\r\n                            children,\r\n                            onPress,\r\n                            style\r\n                        }\r\n                    })()}\r\n                />}\r\n            </View>\r\n            <ElevatedSection title=\"\" style={{marginHorizontal: sizes.rem1, marginTop: tabBarMargin}}>\r\n                <TabBar\r\n                    indicatorStyle={{\r\n                        marginTop: 26,\r\n                        marginHorizontal: 0\r\n                    }}\r\n                    style={{width: \"100%\", marginHorizontal: 0}}\r\n                    key={\"tabbar\"}\r\n                    selectedIndex={tab}\r\n                    onSelect={t => {\r\n                        if (collapsed)\r\n                            scrollRef.current?.scrollToOffset({offset: clampMax, animated: false});\r\n\r\n                        setTab(t);\r\n                    }}>\r\n                    {[\"Posts\", \"Portfolio\", \"Trades\", \"About\"].map(t => <Tab style={{marginTop: -4}} title={t}/>)}\r\n                </TabBar>\r\n            </ElevatedSection>\r\n        </Animated.View>\r\n    </View>\r\n}\r\n\r\nfunction ProfilePage(props: { manager: boolean[], index: number, currentIndex: number, minViewHeight: number, children?: ReactNode, style?: ViewStyle }) {\r\n    props.manager[props.currentIndex] = true;\r\n    return (props.index === props.currentIndex || props.manager[props.index]) ?\r\n        <View style={[paddView, {\r\n            minHeight: props.minViewHeight,\r\n            display: props.currentIndex === props.index ? \"flex\" : \"none\",\r\n\r\n        }, props.style]}>\r\n            {props.children}\r\n        </View> : null\r\n}","import { ButtonProps } from \"@ui-kitten/components\";\r\nimport React from \"react\";\r\nimport { Alert, View } from \"react-native\";\r\nimport Animated from \"react-native-reanimated\";\r\n//import { ButtonProps, View } from \"react-native-ui-lib\";\r\n//import AuthApi from \"../api/entities/apis/AuthApi\";\r\n\r\n//import { screens } from \"../layouts/BaseLayout\";\r\n//import CreateAccountScreen from \"../screens/CreateAccountScreen\";\r\nimport { PrimaryButton } from \"./PrimaryButton\";\r\nimport { SecondaryButton } from \"./SecondaryButton\";\r\n\r\nexport const LoginButtons = (props: { createAccountProps: Partial<ButtonProps>, loginProps: Partial<ButtonProps> }) => {\r\n    return <View style={{ flexDirection: \"row\", justifyContent: \"space-between\" }}>\r\n        <SecondaryButton style={{ alignSelf: \"center\", width: \"48%\" }} \r\n            {...props.createAccountProps}\r\n        //onPress={() => {\r\n        //  screens.push(componentId, \"CreateAccount\")\r\n\r\n        //}}\r\n        //disabled={loggingIn}\r\n        >Create Account</SecondaryButton>\r\n        <PrimaryButton\r\n         \r\n            //disabled={loggingIn}\r\n            // onPress={async () => {\r\n\r\n            //   //  setLoggingIn(true);\r\n            //     // try {\r\n            //     //     const val = userRef.current?.field.current?.validate();\r\n            //     //     const passVal = passRef.current?.field.current?.validate();\r\n            //     //     if (val && passVal) {\r\n            //     //         const user = await AuthApi.login(username, password);// signInWithPassword(username, password);\r\n\r\n            //     //         if (user.verified)\r\n            //     //             Alert.alert(\"VERIFIED\")\r\n            //     //         //SetDashboardLayout();\r\n            //     //         else\r\n            //     //             screens.push(componentId, \"CreateAccount\")\r\n\r\n\r\n\r\n\r\n            //     //         // Navigation.push(props.componentId, {\r\n            //     //         //     component: screens.getComponent(\"App\")\r\n            //     //         // });\r\n            //     //     }\r\n            //     //     else\r\n            //     //         throw new Error(userRef.current?.errorMessage)\r\n            //     // }\r\n            //     // catch (ex: any) {\r\n            //     //     passRef.current?.field.current?.clear();\r\n            //     //     dashboardRef.current?.toastMessage(ex.message);\r\n            //     // }\r\n            //     // finally {\r\n            //     //     setLoggingIn(false);\r\n            //     // }\r\n\r\n            // }}\r\n            style={{ alignSelf: \"center\", width: \"48%\" }}\r\n            {...props.loginProps}\r\n        >Sign In</PrimaryButton>\r\n    </View>\r\n}","import React, { Children, ReactElement, useEffect, useRef } from \"react\";\r\nimport { AppTitle, SplashWelcome } from \"../images\";\r\nimport { bannerText, fonts, paddView, sizes } from '../style'\r\nimport { G, GProps, Path, SvgProps } from \"react-native-svg\";\r\nimport { Link } from \"../components/Link\";\r\nimport { Animated, Platform, View, StyleSheet, Alert, Pressable } from \"react-native\";\r\nimport { LoginButtons } from \"../components/LoginButtons\";\r\nimport { useLinkTo } from \"@react-navigation/native\";\r\nimport { Text, TabView, Tab } from \"@ui-kitten/components\";\r\nimport { useState } from \"react\";\r\nimport { ITextField, TextField } from \"../components/TextField\";\r\nimport { Section } from \"../components/Section\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { useAppUser } from \"../Authentication\";\r\nimport { PrimaryButton } from \"../components/PrimaryButton\";\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { RootStackScreenProps } from \"../navigation/pages\";\r\nimport { useInitialRoute } from '../navigation/RootNavigator';\r\nimport { getCallBackUrl } from \"@tradingpost/common/api/entities/static/EntityApiBase\";\r\n\r\n\r\nexport type WelcomeScreenProps = { title: string }\r\n\r\nconst ensureG = (child: ReactElement): child is ReactElement<GProps> => {\r\n    return child.type === G;\r\n}\r\n\r\n//Test function will move out into helper later \r\nconst SvgMagic: React.FC<{ children: ReactElement<SvgProps> }> = (props) => {\r\n    const reportChildren = (children: ReactElement) => {\r\n        Children.forEach(children, (child) => {\r\n            if (ensureG(child))\r\n                console.log(\"FOUND G WITH ID:::::::\" + child.props.id);\r\n            else {\r\n                console.log(\"FOUND SOMETHING:::::::\" + (child.type as any).name);\r\n                console.log(\"FOUND SOMETHINGS CHIULDREN:::::::\" + (JSON.stringify(child.props)));\r\n            }\r\n            reportChildren(child.props.children);\r\n        })\r\n    };\r\n\r\n    reportChildren(props.children);\r\n\r\n    return props.children;\r\n}\r\n\r\n\r\nexport default ({ navigation }: RootStackScreenProps<\"Root\">) => {\r\n    const linkTo = useLinkTo();\r\n    const cleanUp = useRef<number>(),\r\n        [selectedIndex, setSelectedIndex] = useState(0);\r\n    const route = useInitialRoute();\r\n\r\n    useEffect(() => {\r\n        return () => clearInterval(cleanUp.current);\r\n    }, [])\r\n\r\n    const\r\n        userRef = useRef<ITextField>(null),\r\n        passRef = useRef<ITextField>(null),\r\n        [username, setUsername] = useState<string>(''),\r\n        [password, setPassword] = useState<string>(''),\r\n        intervalRef = useRef<any>(),\r\n        opacityAnim = useRef(new Animated.Value(0)).current,\r\n        toast = useToast(),\r\n        [isLoggingIn, setIsLoggingIn] = useState(false),\r\n        { signIn } = useAppUser();\r\n\r\n\r\n    useEffect(() => {\r\n        if (route !== \"Root\")\r\n            navigation.replace(route);\r\n    }, [route])\r\n\r\n    return <><View style={[...paddView, { justifyContent: \"center\", backgroundColor: \"white\" }]}>\r\n        <AppTitle style={{ marginVertical: sizes.rem1, alignSelf: \"center\", width: \"100%\", aspectRatio: 5 }} />\r\n\r\n        <TabView\r\n            selectedIndex={selectedIndex}\r\n            onSelect={index => setSelectedIndex(isNaN(index) ? 0 : index)}\r\n            style={{ width: \"100%\" }}\r\n            indicatorStyle={{ height: 0 }}\r\n            tabBarStyle={{ height: 0 }}\r\n        >\r\n            <Tab>\r\n                <WTF_View\r\n                    onReady={(item) => {\r\n                        if (Platform.OS === \"web\" && item instanceof HTMLDivElement) {\r\n                            const stonks = [\"fb\", \"tsla\", \"nvda\", \"btc\", \"ether\", \"doge\"].map((n) => item.querySelector<SVGGElement>(`[id=${n}]`));\r\n                            stonks.forEach((s) => {\r\n                                if (s)\r\n                                    s.style.opacity = \"0\";\r\n                            });\r\n\r\n                            let lastItem: SVGGElement | null = null;\r\n                            let lastItem2: SVGGElement | null = null;\r\n\r\n                            if (intervalRef.current)\r\n                                clearInterval(intervalRef.current);\r\n\r\n                            intervalRef.current = setInterval(() => {\r\n                                const index = Math.floor(Math.random() * (9));\r\n                                const index2 = Math.floor(Math.random() * (9));\r\n\r\n                                if (lastItem)\r\n                                    lastItem.style.opacity = \"0\";\r\n\r\n                                if (lastItem2)\r\n                                    lastItem2.style.opacity = \"0\";\r\n\r\n\r\n                                lastItem = stonks[index];\r\n                                lastItem2 = stonks[index2];\r\n                                if (lastItem)\r\n                                    lastItem.style.opacity = \"1\";\r\n                                if (lastItem2)\r\n                                    lastItem2.style.opacity = \"1\";\r\n                            }, 1000)\r\n                        }\r\n                    }}\r\n                />\r\n            </Tab>\r\n            <Tab>\r\n                <Section title=\"Login\">\r\n                    <TextField placeholder='Email Address' returnKeyType=\"next\"\r\n                        onChangeText={(name) => setUsername(name)}\r\n                        textInputRef={userRef}\r\n                        style={{ marginVertical: sizes.rem1 }}\r\n                    />\r\n                    <TextField\r\n                        onChangeText={(pass) => setPassword(pass)}\r\n                        placeholder='Password'\r\n                        style={{ marginVertical: sizes.rem1 }}\r\n                        secureTextEntry textInputRef={passRef} />\r\n                    <Link style={{ paddingTop: 4, paddingBottom: 16, alignSelf: \"flex-end\" }} onPress={() => {\r\n                        setSelectedIndex(2)\r\n                    }}>Forgot Password?</Link>\r\n                </Section>\r\n            </Tab>\r\n            <Tab>\r\n                <View>\r\n                    <Text>Please enter your email address to recover your password:</Text>\r\n                    <TextField style={{ marginVertical: sizes.rem1 }} value={username} placeholder=\"Email Address\"\r\n                        onChangeText={(t) => {\r\n                            setUsername(t);\r\n                        }} />\r\n                    <PrimaryButton onPress={async () => {\r\n                        if (username && /(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])/.test(username)) {\r\n                            Api.Auth.forgotPassword(username, getCallBackUrl());\r\n                            toast.show(\"Recovery Email has been sent\");\r\n                        } else {\r\n                            toast.show(\"Please enter a valid email address\");\r\n                        }\r\n                    }}>Recover Password</PrimaryButton>\r\n                </View>\r\n            </Tab>\r\n        </TabView>\r\n\r\n        <Animated.Text style={[bannerText, {\r\n            opacity: !selectedIndex ? 1 : opacityAnim\r\n        }]}> {!selectedIndex ? \"Welcome to the team!\" : \"Hey... Welcome Back!\"}</Animated.Text>\r\n        <LoginButtons\r\n            createAccountProps={{ onPress: () => { linkTo(\"/create/logininfo\"); } }}\r\n            loginProps={{\r\n                onPress: async () => {\r\n                    if (selectedIndex !== 1) {\r\n                        setSelectedIndex(1);\r\n                        Animated.timing(\r\n                            opacityAnim,\r\n                            {\r\n                                delay: 0.75,\r\n                                toValue: 1,\r\n                                duration: 2000,\r\n                                useNativeDriver: true\r\n                            }).start();\r\n                    } else {\r\n                        if (!isLoggingIn) {\r\n                            try {\r\n                                setIsLoggingIn(true);\r\n                                await signIn(username, password);\r\n                                toast.hideAll();\r\n                                setIsLoggingIn(false);\r\n\r\n                            } catch (ex: any) {\r\n                                setIsLoggingIn(false);\r\n                                toast.show(ex.message);\r\n                            }\r\n                        }\r\n                        else {\r\n                            toast.show(\"Still working on logging you in....\", {\r\n                                duration: 5000\r\n                            })\r\n                        }\r\n                    }\r\n                }\r\n            }}\r\n        />\r\n\r\n    </View>\r\n        {!selectedIndex && Platform.OS !== \"web\" && <Pressable\r\n            onPress={() => {\r\n                navigation.navigate('AppInformation')\r\n            }}>\r\n            <Text style={{\r\n                textAlign: \"right\",\r\n                position: \"absolute\",\r\n                bottom: sizes.rem1,\r\n                right: sizes.rem1,\r\n                fontSize: fonts.large,\r\n                lineHeight: fonts.large * 1.5\r\n            }}>\r\n                What is TradingPost{\">>\"}\r\n            </Text>\r\n        </Pressable>}\r\n    </>\r\n\r\n}\r\n\r\nconst WTF_View = (props: {\r\n    onReady: (item: any) => void\r\n}) => {\r\n    return <View style={{ width: \"100%\", aspectRatio: 1.5 }}>\r\n        <SplashWelcome\r\n            onReady={props.onReady}\r\n        />\r\n    </View>\r\n}","import React, { ReactChild, useLayoutEffect, useState } from \"react\";\r\nimport { Text } from \"@ui-kitten/components\";\r\nimport { View, Image, Pressable } from \"react-native\";\r\n//import { ensureCurrentUser, signOut, useCurrentUser } from \"../apis/Authentication\";\r\nimport { LogoImage } from \"./LogoImage\";\r\nimport { font, fonts, rounded, sizes } from \"../style\";\r\nimport { Link } from \"./Link\";\r\n//import { SetPublicLayout, screens } from \"../layouts/BaseLayout\";\r\nimport { SvgProps } from \"react-native-svg\";\r\nimport { sideMenu } from \"../images\";\r\n//import { parts, screens } from \"../navigationComponents\";\r\n//import { Navigation } from \"react-native-navigation\";\r\n//import { DashProps, fullDashOptions } from \"../layouts/DashboardLayout\";\r\nimport { TBI } from \"../utils/misc\";\r\n//import Clipboard from '@react-native-clipboard/clipboard'\r\n//import { openProfileScreen } from \"../screens/ProfileScreen\";\r\nimport { useData } from \"../lds\";\r\nimport { SvgExpo } from \"./SvgExpo\";\r\n//import { useEnsureUser } from \"./EnsureUser\";\r\nimport { useRef } from \"react\";\r\n\r\nimport { useAppUser } from '../Authentication';\r\nimport { NavigationProp } from \"@react-navigation/native\";\r\nimport { DrawerContentComponentProps, DrawerContentScrollView, DrawerItem } from \"@react-navigation/drawer\";\r\n\r\nimport { ProfileButton } from \"./ProfileButton\";\r\nimport { useLinkTo } from \"@react-navigation/native\";\r\nimport { versionCode } from \"@tradingpost/common/api/entities/static/EntityApiBase\";\r\n\r\n\r\n\r\nconst padSmall = { marginBottom: sizes.rem1 / 8 };\r\n\r\nexport function SideMenu(props: DrawerContentComponentProps) {\r\n    //const { value: currentUser } = useData(\"currentUser\");\r\n    //const { value: loginResult } = useData(\"loginResult\");\r\n    const [activeTabIndex, setActiveTab] = useState(2);\r\n\r\n    // useLayoutEffect(() => {\r\n    //     const sub1 = Navigation.events().registerBottomTabSelectedListener(({ selectedTabIndex, unselectedTabIndex }) => {\r\n    //         setActiveTab(selectedTabIndex);\r\n    //     })\r\n    //     return () => sub1.remove();\r\n    // }, [])\r\n    //const { setValue: setHasAuthed } = useData(\"hasAuthed\");\r\n    const activeTabId = `BottomTabs_${activeTabIndex}`\r\n    const { signOut, loginState } = useAppUser();\r\n    const linkTo = useLinkTo<any>();\r\n    //Not sure if the issue here but this seems to work for now.\r\n    //const { EnsureUser, appUser, signOut } = useEnsureUser(props.navigation as any as NavigationProp<any>);\r\n    const currentUser = loginState?.appUser;\r\n    if (!currentUser) return;\r\n\r\n    return <DrawerContentScrollView contentContainerStyle={{ flexGrow: 1 }} style={{ flexGrow: 1, backgroundColor: \"white\" }}>\r\n        <View style={{ alignSelf: \"center\", alignItems: \"center\", backgroundColor: \"transparent\" }}>\r\n            <Pressable\r\n                style={{ alignItems: \"center\" }}>\r\n                <View\r\n                    style={[{ marginTop: sizes.rem1 }, padSmall]}\r\n                >\r\n                    <ProfileButton size={80} profileUrl={currentUser?.profile_url || \"\"} userId={currentUser?.id} />\r\n                </View>\r\n                <Text style={[font(\"xSmall\", \"black\", true), padSmall]} >@{currentUser.handle}</Text>\r\n                <Text style={[font(\"medium\", \"black\", true), padSmall]} >{currentUser.display_name}</Text>\r\n            </Pressable>\r\n            <Text style={[font(\"xSmall\", \"darkgray\", true), padSmall]} >Subscribers: {currentUser.subscription?.count}</Text>\r\n            <Link onPress={() => {\r\n\r\n                props.navigation.navigate(\"Subscription\");\r\n\r\n            }} style={{ fontSize: fonts.xSmall, fontWeight: \"bold\" }}\r\n            // onPress={() =>\r\n            //      screens.push(activeTabId, \"ManageSubscriptions\", {\r\n            //     options: fullDashOptions,\r\n            //     passProps: { isFullscreen: true } as DashProps\r\n            // })}\r\n            >Manage Subscriptions</Link>\r\n        </View>\r\n        {([{\r\n            label: \"Profile\",\r\n            onPress: () => props.navigation.navigate(\"Profile\", {\r\n                userId: currentUser.id\r\n            }),\r\n            icon: sideMenu.Profile\r\n        },\r\n        {\r\n            label: \"Watchlists\",\r\n            onPress: () => props.navigation.navigate(\"Watchlist\"),\r\n            //onPress: () => linkTo('/create/watchlist'),\r\n            icon: sideMenu.Watchlist,\r\n        },\r\n        {\r\n            label: \"Bookmarks\",\r\n            onPress: () => props.navigation.navigate(\"Feed\", {\r\n                bookmarkedOnly: \"true\"\r\n            }),\r\n            icon: sideMenu.BookmarkActiveBlue,\r\n        },\r\n        {\r\n            label: \"App Features\",\r\n            onPress: () => props.navigation.navigate(\"AppInformation\"),\r\n\r\n            icon: sideMenu.Information,\r\n        },\r\n        {\r\n            label: \"Settings\",\r\n            //onPress: () => props.navigation.navigate(\"Create\"),\r\n            onPress: () => props.navigation.navigate(\"AccountInformation\"),\r\n            icon: sideMenu.Account,\r\n        },\r\n        {\r\n            label: \"Link Brokerage!\",\r\n            //onPress: () => props.navigation.navigate(\"Create\"),\r\n            onPress: () => props.navigation.navigate(\"BrokeragePicker\"),\r\n            icon: sideMenu.Bank_Link,\r\n        },\r\n        {\r\n            label: \"Logout\",\r\n            onPress: () => {\r\n                signOut();\r\n                //TODO: Investigate why this is needed and linkto doesn't seem to work.\r\n                //props.navigation.getParent()?.replace(\"Root\");\r\n\r\n            },\r\n            icon: sideMenu.LogOut\r\n        }] as { onPress?: () => void, label: string, icon: React.FC<SvgProps> }[]).map((item, index, array) => {\r\n            return <MenuItem\r\n                key={\"SM_\" + index}\r\n                icon={item.icon}\r\n                size={\"10%\"}\r\n                onPress={item.onPress || TBI}\r\n                navigation={props.navigation}\r\n                isLast={index === array.length - 1}\r\n            >{item.label}</MenuItem>\r\n        })}\r\n        <Text style={{ textAlign: \"center\" }}>Api Version: {versionCode}</Text>\r\n    </DrawerContentScrollView>\r\n}\r\n\r\nfunction MenuItem(props: { navigation: DrawerContentComponentProps[\"navigation\"], children: string, icon: React.FC<SvgProps>, onPress?: () => void, isLast?: boolean, size?: string | number }) {\r\n    const { icon: SvgElement } = props\r\n    return <DrawerItem\r\n        style={props.isLast ? { marginTop: \"auto\" } : undefined}\r\n        label={props.children}\r\n        icon={(props) => <SvgExpo height={props.size} width={props.size} style={{ height: props.size, width: props.size }}>\r\n            <SvgElement />\r\n        </SvgExpo>}\r\n        onPress={() => {\r\n            props.onPress?.call(undefined);\r\n            props.navigation.closeDrawer();\r\n        }\r\n        }\r\n        labelStyle={{ marginLeft: -16, }}\r\n\r\n    />\r\n    /* <Text style={{ fontSize: fonts.small, marginLeft: 16 }}>{}</Text> */\r\n}","import React, {useEffect, useState} from \"react\";\r\nimport {Pressable} from \"react-native\";\r\nimport {View} from \"react-native\";\r\nimport {Layout, Text} from '@ui-kitten/components';\r\nimport {List} from \"../components/List\";\r\nimport {flex, fonts, sizes} from \"../style\";\r\nimport {Api} from '@tradingpost/common/api';\r\nimport {ListAlertsResponse} from \"@tradingpost/common/api/entities/interfaces\";\r\nimport {ElevatedSection} from \"../components/Section\";\r\nimport {NavigationProp, useNavigation} from \"@react-navigation/native\";\r\nimport {SecondaryButton} from \"../components/SecondaryButton\";\r\n\r\nlet seen = false;\r\n\r\nexport const NotificationScreen = () => {\r\n    const [notifs, setNotifs] = useState([] as ListAlertsResponse[]);\r\n    useEffect(() => {\r\n        if (seen) {\r\n            const run = async () => {\r\n                const ids = notifs.filter(n => !n.seen).map(n => n.id);\r\n                const res = await Api.Notification.extensions.seenNotifications({notificationIds: ids});\r\n            }\r\n            run();\r\n            return\r\n        }\r\n\r\n        let timer = setTimeout(async () => {\r\n            const ids = notifs.filter(n => !n.seen).map(n => n.id);\r\n            await Api.Notification.extensions.seenNotifications({notificationIds: ids});\r\n        }, 1500)\r\n\r\n        seen = true;\r\n        return () => {\r\n            clearTimeout(timer)\r\n        };\r\n    }, [notifs])\r\n\r\n    return <View style={{flex: 1, backgroundColor: \"#F7f8f8\"}}>\r\n        <View>\r\n            <Layout style={{\r\n                backgroundColor: \"#ffffff\",\r\n                paddingBottom: '2%',\r\n                paddingTop: '2%',\r\n                borderBottomColor: '#11146F',\r\n                borderStyle: 'solid',\r\n                borderBottomWidth: 2,\r\n                marginBottom: 10\r\n            }}>\r\n                <Text style={{\r\n                    margin: 2,\r\n                    textAlign: 'center',\r\n                    fontSize: 20,\r\n                    fontWeight: '600',\r\n                    color: '#11146F',\r\n                }}>Notifications</Text>\r\n            </Layout>\r\n            <List\r\n                key={\"STATIC\"}\r\n                datasetKey={\"__________\"}\r\n                getItemLayout={(items, index, sizeCache) => {\r\n                    const curItem = items?.[index];\r\n                    return typeof curItem === 'object' ? sizeCache[index] : {\r\n                        index,\r\n                        offset: sizeCache[index - 1].offset + sizeCache[index - 1].length,\r\n                        length: 10\r\n                    };\r\n                }}\r\n                data={async (allItems: any, page: number, sizeCache: any[]): Promise<ListAlertsResponse[]> => {\r\n                    const notifications = (await Api.Notification.extensions.listAlerts({\r\n                        page,\r\n                    }));\r\n                    const newNotifications = [...(allItems || []), ...notifications];\r\n                    setNotifs(newNotifications);\r\n                    newNotifications.forEach((item, index) => {\r\n                        if (!sizeCache[index]) {\r\n                            sizeCache[index] = {\r\n                                index,\r\n                                offset: index ? sizeCache[index - 1].offset + sizeCache[index - 1].length : 0,\r\n                                length: 0,\r\n                            }\r\n                        }\r\n                    });\r\n                    return newNotifications;\r\n                }}\r\n                keyExtractor={(item: any, index) => typeof item === 'string' ? \"loadingtext\" : (index + \"_\" + item._id)}\r\n                preloadOffset={1}\r\n                renderItem={(item) => {\r\n                    if (typeof item.item === \"string\") {\r\n                        return <Text style={{textAlign: \"center\", fontSize: fonts.large}}>Loading More...</Text>\r\n                    }\r\n                    switch (item.item.type) {\r\n                        case \"NEW_USER_INTERACTION\":\r\n                            return <UserInteractionNotification response={item.item}/>;\r\n                        case \"NEW_TRADES\":\r\n                            return <NewTradeNotification response={item.item}/>\r\n                        case \"NEW_SUBSCRIPTION\":\r\n                            return <SubscriptionNotification response={item.item}/>\r\n                        default:\r\n                            console.error(`Follow Type: ${item.item.type} not registered`);\r\n                            return <DefaultNotification response={item.item}/>\r\n                    }\r\n                }}\r\n                noDataMessage={\"No Notifications Available\"}\r\n                loadingItem={\" \"}\r\n            />\r\n        </View>\r\n    </View>\r\n}\r\n\r\nconst NotificationTab: React.FC<any> = (props: any) => {\r\n    return <ElevatedSection title={\"\"} style={{marginHorizontal: sizes.rem2 / 2, marginBottom: sizes.rem1}}>\r\n        <View style={{marginBottom: -sizes.rem0_5, paddingVertical: 6}}>\r\n            <View style={{flexDirection: \"row\", width: \"100%\", marginBottom: sizes.rem0_5}}>\r\n                <View style={[flex, {marginLeft: sizes.rem0_5}]}>\r\n                    {props.children}\r\n                </View>\r\n            </View>\r\n        </View>\r\n    </ElevatedSection>\r\n}\r\n\r\nconst NewTradeNotification = (props: { response: ListAlertsResponse }): JSX.Element => {\r\n    const dt = new Date(props.response.dateTime);\r\n    const dtFmt = `${dt.getMonth()}/${dt.getDay()}/${dt.getFullYear() % 100}`\r\n\r\n    const nav = useNavigation<NavigationProp<any>>();\r\n    const openTrades = () => {\r\n        nav.navigate(\"NotificationTrade\")\r\n    }\r\n\r\n    return <NotificationTab>\r\n        <Pressable onPress={openTrades}>\r\n            <View style={{flex: 1, flexWrap: 'wrap'}}>\r\n                <View style={{flexDirection: 'row'}}>\r\n                    <Text style={{marginRight: 10, fontFamily: \"K2D\"}}>\r\n                        {dtFmt}\r\n                    </Text>\r\n                    <Text style={{flex: 1, flexWrap: 'wrap'}}>\r\n                        {props.response.data.message} <Text style={{fontWeight: 'bold'}}>Click to learn more.</Text>\r\n                    </Text>\r\n                </View>\r\n            </View>\r\n        </Pressable>\r\n    </NotificationTab>\r\n}\r\n\r\nconst UserInteractionNotification = (props: { response: ListAlertsResponse }): JSX.Element => {\r\n    const nav = useNavigation<NavigationProp<any>>();\r\n    const openProfile = () => {\r\n        if (props.response.data?.userId) {\r\n            nav.navigate(\"Profile\", {\r\n                userId: props.response.data?.userId\r\n            });\r\n        }\r\n    }\r\n\r\n    const dt = new Date(props.response.dateTime);\r\n    const dtFmt = `${dt.getMonth()}/${dt.getDay()}/${dt.getFullYear() % 100}`\r\n    return <NotificationTab>\r\n        <Pressable\r\n            onPress={openProfile}>\r\n            <View style={{flex: 1}}>\r\n                <View style={{flexDirection: 'row'}}>\r\n                    <Text style={{marginRight: 10}}>\r\n                        {dtFmt}\r\n                    </Text>\r\n                    <Text>\r\n                        <Text\r\n                            style={{fontWeight: \"bold\"}}>@{props.response.data.handle}</Text>{' '}{props.response.data.message}\r\n                    </Text>\r\n                </View>\r\n            </View>\r\n        </Pressable>\r\n    </NotificationTab>\r\n}\r\nconst SubscriptionNotification = (props: { response: ListAlertsResponse }): JSX.Element => {\r\n    const nav = useNavigation<NavigationProp<any>>();\r\n    const openProfile = () => {\r\n        if (props.response.data?.userId) {\r\n            nav.navigate(\"Profile\", {\r\n                userId: props.response.data?.userId\r\n            });\r\n        }\r\n    }\r\n    const [approval, setApproval] = useState(props.response.data.approved)\r\n\r\n    const dt = new Date(props.response.dateTime);\r\n    const dtFmt = `${dt.getMonth() + 1}/${dt.getDate()}/${dt.getFullYear() % 100}`\r\n    return <NotificationTab>\r\n        <Pressable\r\n            onPress={openProfile}>\r\n            <View style={{flex: 1}}>\r\n                <View style={{flexDirection: 'row'}}>\r\n                    <Text style={{marginRight: 10}}>\r\n                        {dtFmt}\r\n                    </Text>\r\n                    <Text style={{flex: 1, flexWrap: 'wrap'}}>\r\n                        <Text\r\n                            style={{fontWeight: \"bold\"}}>@{props.response.data.handle}</Text>{' '}{props.response.data.message}\r\n                    </Text>\r\n                    <SecondaryButton\r\n                        children={'Approve'}\r\n                        style={{\r\n                            display: approval ? 'none' : 'flex',\r\n                            backgroundColor: \"#35A265\", borderColor: \"#35A265\",\r\n                            minHeight: 26,\r\n                            height: 26,\r\n                            minWidth: 70,\r\n                            alignSelf: \"center\",\r\n                            paddingTop: 0,\r\n                            paddingBottom: 0,\r\n                            paddingLeft: 0,\r\n                            paddingRight: 0\r\n                        }}\r\n                        onPress={async () => {\r\n                            try {\r\n                                await Api.Subscriber.update(props.response.data.subscriber_id, {\r\n                                    approved: true,\r\n                                });\r\n                                console.log('past first call')\r\n                                await Api.Notification.extensions.updateNotification({\r\n                                    id: props.response.id,\r\n                                    dateTime: props.response.dateTime,\r\n                                    data: {\r\n                                        ...props.response.data,\r\n                                        approved: true\r\n                                    },\r\n                                    seen: true,\r\n                                    type: props.response.type\r\n                                });\r\n                                setApproval(true)\r\n                            } catch (e) {\r\n                                console.error(e)\r\n                            }\r\n                            \r\n                        }}\r\n                    />\r\n                </View>\r\n            </View>\r\n        </Pressable>\r\n    </NotificationTab>\r\n}\r\n\r\nconst DefaultNotification = (props: { response: ListAlertsResponse }): JSX.Element => {\r\n    return <NotificationTab>\r\n        <Text>\r\n            {props.response.data.message}\r\n        </Text>\r\n    </NotificationTab>\r\n}","import React from \"react\"\r\nimport { List } from \"../components/List\"\r\nimport { View } from 'react-native'\r\nimport { Text } from '@ui-kitten/components'\r\nimport { AllPages, TabScreenProps } from \"../navigation\"\r\nimport { NavigationProp, useNavigation } from \"@react-navigation/native\"\r\nimport { Link } from \"../components/Link\"\r\nimport { flex, paddView, paddViewWhite } from \"../style\"\r\nimport { ElevatedSection, Section } from \"../components/Section\"\r\nimport { Header } from \"../components/Headers\"\r\nimport { AppColors } from \"../constants/Colors\"\r\n\r\n\r\nexport function LimitedBlockList<T>(props: {\r\n    maxPage?: number,\r\n    \r\n    listKey: string,\r\n    title: string,\r\n    listProps: Omit<Parameters<typeof List>[0], \"maxPage\">\r\n}) {\r\n    const nav = useNavigation();\r\n    return <View style={[{}]}>\r\n        <View>\r\n            <List {...props.listProps} listKey={props.listKey} maxPage={props.maxPage} />\r\n        </View>\r\n        <Link\r\n            style={{\r\n                marginLeft: \"auto\"\r\n            }}\r\n            onPress={() => {\r\n                nav.navigate(\"BlockListModal\", {\r\n                    listProps: props.listProps as any,\r\n                    title: props.title\r\n                })\r\n            }}>View All</Link>\r\n    </View>\r\n}\r\n\r\nexport function BlockListModalScreen<T>(props: TabScreenProps<{ title: string, listProps: Parameters<typeof List>[0] }>) {\r\n    return (\r\n        props.route?.params?.listProps ? \r\n        <View style={paddView}>\r\n            <Section title={props.route.params.title} style={{backgroundColor: AppColors.background}}>\r\n                <List {...props.route?.params?.listProps} />\r\n            </Section>\r\n        </View> : \r\n        <Text>Error</Text>\r\n        )\r\n}","import { Api } from \"@tradingpost/common/api\";\r\nimport { AllWatchlists, IWatchlistGet, IWatchlistList } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Animated, ScrollView, TextStyle, View } from \"react-native\";\r\nimport { AddButton, EditButton } from \"../components/AddButton\";\r\nimport { Avatar, Icon, Text } from '@ui-kitten/components'\r\nimport { ElevatedSection, Section, Subsection } from \"../components/Section\";\r\nimport { Table } from \"../components/Table\";\r\nimport { DataOrQuery, List } from '../components/List'\r\n\r\nimport { flex, fonts, paddView, sizes } from \"../style\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { SecPressable, useMakeSecurityFields, useWatchlistItemColumns } from \"./WatchlistViewerScreen\";\r\nimport { AwaitedReturn, toPercent, toPercent2, toThousands, toDollarsAndCents, toDollars, toNumber2, toNumber1, toFormatedDateTime } from \"../utils/misc\";\r\nimport { WatchlistSection } from \"../components/WatchlistSection\";\r\nimport Theme from '../theme-light.json'\r\nimport { LimitedTable } from \"./TableModalScreen\";\r\nimport { ButtonGroup } from \"../components/ButtonGroup\";\r\nimport { LineHolder, PieHolder } from \"../components/PieHolder\";\r\nimport { AppColors } from \"../constants/Colors\";\r\nimport { LineChart } from \"../components/LineChart\";\r\nimport InteractiveChart from \"../components/InteractiveGraph\";\r\nimport { DashTabScreenProps, RootStackScreenProps } from \"../navigation/pages\";\r\nimport { TooltipComponent } from \"../components/ToolTip\";\r\nimport { useSecuritiesList } from \"../SecurityList\";\r\nimport { Header } from \"../components/Headers\";\r\nimport { WatchlistItemRenderItem } from \"../components/WatchlistItemRenderItem\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\nimport { HoldingRenderItem } from \"../components/HoldingRenderItem\";\r\nimport { TradeRenderItem } from \"../components/TradeRenderItem\";\r\nimport { LimitedBlockList } from \"./BlockListModalScreen\";\r\n\r\nconst styles = {\r\n    stateLabel: {\r\n        color: Theme[\"color-info-800\"],\r\n        textAlign: \"center\"\r\n    } as TextStyle,\r\n    stateValue: {\r\n        // color: AppColors.primary,\r\n        textAlign: \"center\",\r\n        marginBottom: sizes.rem0_5\r\n    } as TextStyle,\r\n}\r\ntype TradeReturnType = AwaitedReturn<typeof Api.User.extensions.getTrades>\r\n\r\nconst periods: { [key: string]: number } = {\r\n    \"1D\": 1,\r\n    \"1W\": 5,\r\n    \"1M\": 20,\r\n    \"3M\": 60,\r\n    \"1Y\": 252,\r\n    \"2Y\": 504,\r\n    \"Max\": 1000\r\n}\r\nexport const PortfolioScreen = (props: DashTabScreenProps<\"Portfolio\">) => {\r\n    const nav = useNavigation();\r\n    const [watchlists, setWatchlists] = useState<AllWatchlists>()\r\n    const [quickWatchlist, setQuickWatchlist] = useState<IWatchlistGet>()\r\n    const [shownMap, setShownMap] = useState<Record<string, boolean>>({})\r\n    const toast = useToast();//const [trades, setTrades] = useState<AwaitedReturn<typeof Api.User.extensions.getTrades>>();\r\n    const [holdings, setHoldings] = useState<AwaitedReturn<typeof Api.User.extensions.getHoldings>>();\r\n    const [trades, setTrades] = useState<AwaitedReturn<typeof Api.User.extensions.getTrades>>();\r\n    const [portfolio, setPortfolio] = useState<AwaitedReturn<typeof Api.User.extensions.getPortfolio>>();\r\n    const [returns, setReturns] = useState<AwaitedReturn<typeof Api.User.extensions.getReturns>>();\r\n    const [twReturns, settwReturns] = useState<{ x: string, y: number }[]>();\r\n    const [portPeriod, setPortPeriod] = useState(\"1Y\")\r\n    const [focus, setFocus] = useState(false);\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                const [lists, holdings] = await Promise.all([\r\n                    Api.Watchlist.extensions.getAllWatchlists(),\r\n                    Api.User.extensions.getHoldings({})\r\n                ]);\r\n                \r\n                //KEeping apart for now .. seems to have an error\r\n                try {\r\n                    const portfolio = await Api.User.extensions.getPortfolio({});\r\n                    setPortfolio(portfolio);\r\n                } catch (ex) {\r\n                    console.error(ex);\r\n                }\r\n\r\n                if (lists.quick.id) {\r\n                    setQuickWatchlist(await Api.Watchlist.get(lists.quick.id));\r\n                }\r\n                else {\r\n                    setQuickWatchlist({\r\n                        id: 0,\r\n                        items: [],\r\n                        name: \"\",\r\n                        saved_by_count: 0,\r\n                        type: \"primary\",\r\n                        user: [],\r\n                        is_saved: false\r\n                    })\r\n                }\r\n                setWatchlists(lists);\r\n                setHoldings(holdings);\r\n                setFocus((f) => !f)\r\n            }\r\n            catch (ex: any) {\r\n                toast.show(ex.message);\r\n            }\r\n        })()\r\n    }, [])\r\n\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                let today = new Date();\r\n                const returns = await Api.User.extensions.getReturns({\r\n                    startDate: new Date(today.setDate(today.getDate() - 1001)),\r\n                    endDate: new Date()\r\n                })\r\n                setReturns(returns);\r\n                if (!returns.length)\r\n                    return\r\n                let twr: { x: string, y: number }[] = [];\r\n                const day = new Date(String(returns.slice(returns.length - periods[portPeriod])[0].date))\r\n                twr.push({ x: (new Date(day.setDate(day.getDate() - 1))).toUTCString(), y: 1 })\r\n                //twr.push(JSON.parse(JSON.stringify(returns[returns.length - periods[portPeriod]])));\r\n                //twr[0].return = 1;\r\n                //const day = new Date(String(twr[0].date))\r\n                //twr[0].date = new Date(day.setDate(day.getDate() - 1));\r\n                returns?.slice(returns.length - periods[portPeriod]).forEach((r, i) => {\r\n                    twr.push({ x: new Date(String(r.date)).toUTCString(), y: twr[i].y * (1 + r.return) })\r\n                    //twr.push(JSON.parse(JSON.stringify(r)));\r\n                    //twr[i+1].return = twr[i].return * (1 + r.return);\r\n                })\r\n\r\n                settwReturns(twr);\r\n\r\n            } catch (err) {\r\n                console.error(err)\r\n            }\r\n        })()\r\n    }, [])\r\n    useEffect(() => {\r\n        if (!returns || !returns.length) {\r\n            return\r\n        }\r\n\r\n        let twr: { x: string, y: number }[] = [];\r\n        const day = new Date(String(returns.slice(returns.length - periods[portPeriod])[0].date))\r\n        twr.push({ x: (new Date(day.setDate(day.getDate() - 1))).toUTCString(), y: 1 })\r\n        //twr.push(JSON.parse(JSON.stringify(returns[returns.length - periods[portPeriod]])));\r\n        //twr[0].return = 1;\r\n        //const day = new Date(String(twr[0].date))\r\n        //twr[0].date = new Date(day.setDate(day.getDate() - 1));\r\n        returns?.slice(returns.length - periods[portPeriod]).forEach((r, i) => {\r\n            twr.push({ x: new Date(String(r.date)).toUTCString(), y: twr[i].y * (1 + r.return) })\r\n            //twr.push(JSON.parse(JSON.stringify(r)));\r\n            //twr[i+1].return = twr[i].return * (1 + r.return);\r\n        })\r\n        settwReturns(twr);\r\n\r\n    }, [portPeriod])\r\n\r\n    let cummReturn = 0;\r\n    const { securities: { bySymbol, byId } } = useSecuritiesList();\r\n\r\n    if (twReturns) cummReturn = twReturns[twReturns.length - 1].y - 1;\r\n    const { columns: watchlistItemColumns } = useWatchlistItemColumns(true)\r\n    return <View style={[paddView]}>\r\n        <Animated.FlatList\r\n            key={'top_level_portfolio_screen'}\r\n            data={[\r\n                <View key={\"portfolio_\"} >\r\n                    <Header text=\"Performance\"/>\r\n                    <ElevatedSection key={'pertformance_chart_section'} alt={true} title=\"\" style={(twReturns === undefined) ? { display: 'none' } : { display: 'flex' }}>\r\n                        <View key={'performance_chart'} style={{ marginBottom: sizes.rem1 }} >\r\n                            {/*<LineHolder data={twReturns} />*/}\r\n                            <InteractiveChart data={twReturns} period={portPeriod} performance={true} />\r\n                        </View>\r\n                        <ButtonGroup key={\"period\"} items={[\"1D\", \"1W\", \"1M\", \"3M\", \"1Y\", \"2Y\", \"Max\"].map(v => ({ label: v, value: v }))} onValueChange={(v) => setPortPeriod(v)} value={portPeriod} />\r\n                        <View key={'portfolio_stats'} style={[portfolio ? { display: 'flex' } : { display: 'none' }, { borderColor: \"#ccc\", borderWidth: 1, backgroundColor: \"#f5f5f5\", padding: sizes.rem0_5 / 2, borderRadius: 4, marginBottom: 12 }]}>\r\n                            \r\n                            <View key={\"returns\"} style={{ flexDirection: \"row\" }}>\r\n                                {[\r\n                                    { title: \"Total Return\", value: toPercent2(cummReturn) },\r\n                                    { title: \"Beta\", value: toNumber2(portfolio?.beta || 0) },\r\n                                    { title: \"Sharpe Ratio\", value: toPercent2(portfolio?.sharpe || 0) }]\r\n                                    .map((item, idx) => {\r\n                                        return <View key={\"key_\" + idx} style={flex}>\r\n                                            <Text style={styles.stateLabel} >{item.title}</Text>\r\n                                            <Text style={styles.stateValue}>{item.value}</Text>\r\n                                        </View>\r\n                                    })}\r\n                            </View>\r\n                            <View key=\"exposures\" style={{ flexDirection: \"row\" }}>\r\n                                {[\r\n                                    { title: \"Long\", value: portfolio?.exposure?.long || 0 },\r\n                                    { title: \"Short\", value: portfolio?.exposure?.short || 0 },\r\n                                    { title: \"Gross\", value: portfolio?.exposure?.gross || 0 },\r\n                                    { title: \"Net\", value: portfolio?.exposure?.net || 0 }]\r\n                                    .map((item, idx) => {\r\n                                        return <View key={\"key_\" + idx} style={flex}>\r\n                                            <Text style={styles.stateLabel} >{item.title}</Text>\r\n                                            <Text style={styles.stateValue}>{toPercent(item.value)}</Text>\r\n                                        </View>\r\n                                    })}\r\n                            </View>\r\n                            <View style={{flex: 1, paddingHorizontal: sizes.rem1}}>\r\n                                <Text style={{fontSize: fonts.xSmall}}>{\"Return calculations are in beta. The more feedback you can provide us, the better we can do!\"}</Text>\r\n                            </View>\r\n                        </View>\r\n                    </ElevatedSection>\r\n                    <Section key=\"holdings\" alt={true} title=\"Holdings\" style={[holdings && holdings.length > 0 ? { display: 'flex' } : { display: 'none' }, {backgroundColor: AppColors.background}]}>{\r\n                        <List\r\n                            listKey=\"holdingsList\"\r\n                            datasetKey={`holdings_id_${holdings?.length}`}\r\n                            data={holdings}\r\n                            loadingMessage={\" \"}\r\n                            noDataMessage={\" \"}\r\n                            loadingItem={undefined}\r\n                            numColumns={2}\r\n                            renderItem={(item) => {\r\n                                return (\r\n                                    <HoldingRenderItem \r\n                                        item={item}\r\n                                        byId={byId}\r\n                                        isOwner={true}\r\n                                        />\r\n                                )\r\n                            }}\r\n                        />\r\n                    }</Section>\r\n                    <Section key=\"trades\" alt={true} title=\"Trades\" style={[!(holdings && twReturns && portfolio) ? { display: 'none' } : { display: 'flex' }, {backgroundColor: AppColors.background}]}>\r\n                        <LimitedBlockList \r\n                            listKey=\"portfolio_trades_table\"\r\n                            key={'trades_table'}\r\n                            maxPage={0}\r\n                            title={'All Trades'}\r\n                            listProps={{\r\n                                keyExtractor: (item: any, idx) => {\r\n                                    return item ? \"trade_\" + item.securityId + item.date : \"empty\";\r\n                                },\r\n                                datasetKey: `trades_id_`,\r\n                                data: async (a, $page, $limit) => {\r\n                                    const newArr = a || [];\r\n                                    newArr.push(... (await Api.User.extensions.getTrades({ $page, settings: {} })))\r\n                                    return newArr;\r\n                                } ,\r\n                                loadingMessage: \" \",\r\n                                noDataMessage: \" \",\r\n                                loadingItem: undefined,\r\n                                numColumns: 2,\r\n                                renderItem: (item: any) => {\r\n                                    return (\r\n                                        <TradeRenderItem\r\n                                            item={item}\r\n                                            byId={byId}\r\n                                            isOwner={true}\r\n                                            />\r\n                                    )\r\n                                }}\r\n                                }\r\n                            \r\n                            />\r\n\r\n                    </Section>\r\n                    <Text style={[(holdings && twReturns && portfolio) ? { display: 'none' } : { display: 'flex' },\r\n                    { fontSize: fonts.medium, fontWeight: '500', color: '#ccc' }]}>\r\n                        {\"You haven't linked a brokerage to TradingPost. Go to your Account page in the Side Menu and Link one today!\"}\r\n                    </Text>\r\n                </View>,\r\n                <View>\r\n                    <View style={{flex: 1, flexDirection: 'row'}}>\r\n                        <Header key={\"quick_watch\"} text=\"Quick Watch\" style={{flex: 1}}/>\r\n                        <View style={{marginBottom: sizes.rem0_5 / 2, marginHorizontal: 6}}> \r\n                            {  \r\n                                watchlists?.quick.id ?\r\n                                    <EditButton\r\n                                        height={24}\r\n                                        width={24} \r\n                                        onPress={() => {\r\n                                            nav.navigate(\"WatchlistEditor\", {\r\n                                                watchlistId: watchlists?.quick.id\r\n                                            })\r\n                                    }} /> :\r\n                                    <AddButton\r\n                                        height={24}\r\n                                        width={24} \r\n                                        onPress={() => {\r\n                                            nav.navigate(\"WatchlistEditor\", {\r\n                                                watchlistId: -1\r\n                                            })\r\n                                    }} />\r\n                                }\r\n                        </View>\r\n                    </View>\r\n                    \r\n                    <List\r\n                        datasetKey={`quick_watch_${focus}`}\r\n                        listKey=\"quick_watch_list\"\r\n                        loadingMessage={\" \"}\r\n                        noDataMessage={\" \"}\r\n                        loadingItem={undefined}\r\n                        numColumns={2}\r\n                        data={quickWatchlist?.items}\r\n                        renderItem={(item) => {                   \r\n                            const hideEmptyNote = false\r\n                            return (\r\n                                <WatchlistItemRenderItem\r\n                                    item={item}\r\n                                    bySymbol={bySymbol}\r\n                                    byId={byId}\r\n                                    hideEmptyNote={hideEmptyNote}\r\n                                    setShownMap={setShownMap}\r\n                                    shownMap={shownMap}\r\n                                    watchlist={quickWatchlist}\r\n                                        />\r\n                            )\r\n                        }}\r\n                    />\r\n\r\n                </View>\r\n                ,\r\n                <WatchlistSection\r\n                    datasetKey={`my_watchlist_${focus}`}\r\n                    title=\"My Watchlists\"\r\n                    key={\"my_watchlist\"}\r\n                    watchlists={watchlists?.created}\r\n                    showAddButton\r\n                    hideNoteOnEmpty\r\n                />,\r\n                <WatchlistSection\r\n                    datasetKey={`shared_watch_${focus}`}\r\n                    title=\"Shared Watchlists\"\r\n                    key={\"shared_watchlist\"}\r\n                    watchlists={watchlists?.saved}\r\n                    shared\r\n                />\r\n            ]}\r\n            renderItem={(info) => {\r\n                return info.item;\r\n            }}\r\n        >\r\n        </Animated.FlatList>\r\n    </View >\r\n\r\n}","import { Icon, Input } from \"@ui-kitten/components\";\r\nimport React, { useRef } from \"react\";\r\nimport { ImageProps, ViewStyle, TextInputProps, Image, ViewProps, Pressable } from \"react-native\";\r\nimport { ITextField, TextField } from \"../components/TextField\";\r\nimport { navIcons } from \"../images\";\r\n\r\nexport const SearchBar = (props: { onTextChange: (text: string) => void, placeholder?: string } & Pick<ViewProps, \"onLayout\">) => {\r\n    const tfRef = useRef<ITextField>(null)\r\n\r\n    return <TextField\r\n        textInputRef={tfRef}\r\n        onLayout={props.onLayout}\r\n        //enableErrors={false}\r\n        //hideUnderline\r\n        accessoryLeft={\r\n            () => {\r\n                return <Image source={navIcons.Search.inactive} style={{\r\n                    height: 20,\r\n                    width: 20,\r\n                    padding: 8,\r\n                    marginHorizontal: 12,\r\n                    transform: [\r\n                        { scaleX: -1 }\r\n                    ]\r\n                }} />\r\n            }\r\n        }\r\n        accessoryRight={\r\n            () => {\r\n                return <Pressable onPress={() => {\r\n                    tfRef.current?.field.current?.clear();\r\n                    props.onTextChange(\"\");\r\n                }}><Icon name=\"close-outline\" style={{\r\n                    height: 20,\r\n                    width: 20,\r\n                    padding: 8,\r\n                    marginHorizontal: 12,\r\n                    transform: [\r\n                        { scaleX: -1 }\r\n                    ]\r\n                }} /></Pressable>\r\n            }\r\n        }\r\n        // style={{\r\n\r\n        // } as ViewStyle} containerStyle={{\r\n        //     marginBottom: 0,\r\n        //     borderBottomColor: \"#d5d5d5\",\r\n        //     borderBottomWidth: 1,\r\n        //     paddingVertical: 16\r\n        // } as ViewStyle}\r\n        {\r\n        ...{\r\n            placeholder: props.placeholder || \"Search...\",\r\n            clearButtonMode: \"while-editing\",\r\n            onChangeText: (text) => {\r\n                props.onTextChange(text);\r\n            }\r\n        } as TextInputProps} />\r\n}","import {createBottomTabNavigator} from \"@react-navigation/bottom-tabs\";\r\nimport {NavigationProp} from \"@react-navigation/native\";\r\nimport React, {useEffect, useState} from \"react\";\r\nimport {ImageBackground, ImageSourcePropType} from \"react-native\";\r\nimport {NavIconKeys, navIcons, NavIconTypeOverride} from \"../images\";\r\nimport {FeedScreen} from \"../screens/FeedScreen\";\r\nimport {NotificationScreen} from \"../screens/NotificationScreen\";\r\nimport {PortfolioScreen} from \"../screens/PortfolioScreen\";\r\nimport {SearchScreen} from \"../screens/SearchScreen\";\r\nimport {Api} from \"@tradingpost/common/api\";\r\n\r\nconst BottomTab = createBottomTabNavigator<any>();\r\nconst DashComponents: Record<keyof typeof navIcons, { c: React.ComponentType<any>, p?: any, headerRight?: (props: { navigation: NavigationProp<any>, route: any }) => React.ReactNode }> = {\r\n    Portfolio: {\r\n        c: PortfolioScreen\r\n    },\r\n    Feed: {\r\n        c: FeedScreen\r\n    },\r\n    Search: {\r\n        c: SearchScreen,\r\n    },\r\n    Notification: {\r\n        c: NotificationScreen,\r\n    }\r\n}\r\n\r\nexport function BottomTabNavigator() {\r\n    const [hasNotifications, setHasNotifications] = useState(false);\r\n    useEffect(() => {\r\n        const t = async () => {\r\n            const notificationCount = await Api.Notification.extensions.hasNotifications();\r\n            setHasNotifications(notificationCount.unseenCount > 0);\r\n        }\r\n\r\n        t();\r\n        //We should just use the notification networks... either a notification is received when the app is open...\r\n        // or when the app opens it checks for notifications \r\n            \r\n        const interval = setInterval(async () => {\r\n            const notificationCount = await Api.Notification.extensions.hasNotifications();\r\n            setHasNotifications(notificationCount.unseenCount > 0);\r\n        }, 5000);\r\n\r\n        return () => {\r\n            clearInterval(interval)\r\n        }\r\n    }, []);\r\n\r\n    return <BottomTab.Navigator\r\n        initialRouteName=\"Feed\"\r\n        screenOptions={{\r\n            //tabBarActiveTintColor: Colors[colorScheme].tint,\r\n            headerShown: false\r\n        }}>\r\n        {Object.keys(navIcons).map((n) =>\r\n            <BottomTab.Screen\r\n                key={n}\r\n                name={n}\r\n                options={({navigation, route}) => ({\r\n                    //TODO: this makes things a bit choppy .. shoudl change in the future\r\n                    unmountOnBlur: true,\r\n                    tabBarShowLabel: false,\r\n                    lazy: true,\r\n                    tabBarIcon: ({color, focused, size}) => {\r\n                        const activeType = focused ? \"active\" : \"inactive\";\r\n                        let navIcon: ImageSourcePropType = navIcons[n as keyof typeof navIcons][activeType];\r\n                        if (NavIconTypeOverride[n as keyof typeof navIcons]) {\r\n                            if (hasNotifications) {\r\n                                navIcon = NavIconTypeOverride[n as keyof typeof navIcons][\"has\"][activeType];\r\n                            }\r\n                        }\r\n\r\n                        return <ImageBackground\r\n                            source={navIcon}\r\n                            resizeMode=\"contain\" style={{height: size, width: size}}/>\r\n                    },\r\n                })}\r\n                component={DashComponents[n as keyof typeof navIcons].c}\r\n                initialParams={{...DashComponents[n as keyof typeof navIcons]?.p}}\r\n            />)}\r\n    </BottomTab.Navigator>\r\n}\r\n","import {NavigationProp} from \"@react-navigation/native\";\r\nimport { Api, Interface } from \"@tradingpost/common/api\";\r\nimport { Avatar, Text } from \"@ui-kitten/components\";\r\nimport { SecPressable } from './WatchlistViewerScreen'\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { View } from \"react-native\";\r\nimport { ButtonGroup } from \"../components/ButtonGroup\";\r\nimport { Header, Subheader } from \"../components/Headers\";\r\nimport { List } from \"../components/List\";\r\nimport { NoDataPanel } from \"../components/NoDataPanel\";\r\nimport { ProfileBar } from \"../components/ProfileBar\";\r\nimport { SearchBar } from \"../components/SearchBar\";\r\nimport { ElevatedSection } from \"../components/Section\";\r\nimport { useSecuritiesList } from \"../SecurityList\";\r\nimport { flex, fonts, sizes } from \"../style\";\r\nimport { FeedPart } from \"./FeedScreen\";\r\nimport { FlatList } from \"react-native-gesture-handler\";\r\n\r\n\r\nexport const SearchScreen = (props: { navigation: NavigationProp<any> } & { route: { params: {} } }) => {\r\n    const [searchText, setSearchText] = useState(\"\"),\r\n        [searchType, setSearchType] = useState<\"posts\" | \"people\">(\"posts\"),\r\n        [people, setPeople] = useState<Interface.IUserList[]>(),\r\n        [searchSecurities, setSearchSecurities] = useState<Interface.ISecurityList[]>(),\r\n        debounceRef = useRef<any>(),\r\n        { securities: { list: securities } } = useSecuritiesList();\r\n    useEffect(() => {\r\n        clearTimeout(debounceRef.current);\r\n            if (searchText.length >= 3) {\r\n                debounceRef.current = setTimeout(async () => {\r\n                    try {\r\n                        setPeople(await Api.User.extensions.search({\r\n                            term: searchText\r\n                        }));\r\n                    }\r\n                    catch (ex) {\r\n                        console.error(ex);\r\n                    }\r\n                    try {\r\n                        const output: Interface.ISecurityList[] = []\r\n                        \r\n                        const modSearch = searchText.slice(0,1) === '$' ? searchText.slice(1) : searchText;\r\n                        const regex = new RegExp(`^${modSearch}`, \"i\");\r\n                        securities.forEach((item) => {\r\n                            if ((regex.test(item.company_name) || regex.test(item.symbol ))) {\r\n                                output.push(item)\r\n                            }\r\n                                \r\n                        })\r\n                        setSearchSecurities(output)\r\n                    } catch (ex) {\r\n                        console.error(ex)\r\n                    }\r\n                }, 500)\r\n            }\r\n            else if (searchText.length > 0) {\r\n                try {\r\n                    setPeople(undefined);\r\n                    const output: Interface.ISecurityList[] = []\r\n                    const modSearch = searchText.slice(0,1) === '$' ? searchText.slice(1) : searchText;\r\n                    const regex = new RegExp(`^${modSearch}`, \"i\");\r\n                    securities.forEach((item) => {\r\n                        if ((regex.test(item.symbol ))) {\r\n                            output.push(item)\r\n                        }\r\n                    })\r\n                    setSearchSecurities(output)\r\n                } catch (ex) {\r\n                    console.error(ex)\r\n                }\r\n            }\r\n            else {\r\n                setPeople(undefined);\r\n                setSearchSecurities(undefined)\r\n            }\r\n        \r\n    }, [searchText, searchType])\r\n\r\n    return (\r\n        <View style={[flex, { backgroundColor: \"#F7f8f8\" }]}>\r\n            <View style={{width: '90%', alignSelf: 'center', marginBottom: sizes.rem0_5}}>\r\n                <SearchBar \r\n                    placeholder=\"Search... ($AAPL, Tim, Tesla, etc.)\"\r\n                    onTextChange={(v) => {\r\n                        setSearchText(v);\r\n                    }} \r\n                />\r\n            </View>\r\n            <FlatList\r\n                data={[\r\n                    <View key={`id_${(people?.length || 0) + (searchSecurities?.length || 0)}`} style={{ marginLeft: sizes.rem1}}>            \r\n                    <View style={[people?.length ? {display: 'flex'} : {display: 'none'}, ]}>\r\n                        <Header text=\"Analysts\" />\r\n                        <List\r\n                            listKey=\"people\"\r\n                            datasetKey={`people_id_${people?.length}`}\r\n                            horizontal\r\n                            data={people}\r\n                            loadingMessage={\" \"}\r\n                            noDataMessage={\" \"}\r\n                            loadingItem={undefined}\r\n                            renderItem={(item) => {\r\n                                return <ElevatedSection title=\"\" style={{flex: 1}}>\r\n                                    <ProfileBar user={item.item} style={{marginBottom:-sizes.rem0_5}} />\r\n                                </ElevatedSection>\r\n                            }}\r\n                        />\r\n                    </View>\r\n                    <View style={[searchSecurities?.length ? {display: 'flex'} : {display: 'none'}]}>\r\n                        <Header text=\"Companies\"/>\r\n                        <List\r\n                            listKey=\"companies\"\r\n                            datasetKey={`company_id_${searchSecurities?.length}`}\r\n                            horizontal\r\n                            data={searchSecurities}\r\n                            loadingMessage={\" \"}\r\n                            noDataMessage={\" \"}\r\n                            loadingItem={undefined}\r\n                            //numColumns={2}\r\n                            renderItem={(item) => {\r\n                                const regex = new RegExp('placeholder.png', \"i\");\r\n                                if (regex.test(item.item.logo_url)) {\r\n                                    return (\r\n                                        <ElevatedSection title=\"\" style={{flexShrink: 1, marginBottom: 6, paddingHorizontal: 2, paddingVertical: 2, justifyContent: 'center'}}>\r\n                                            <Text style={{textAlign: 'center', fontSize: 12}}>\r\n                                                {item.item.company_name}\r\n                                            </Text>\r\n                                        </ElevatedSection>\r\n                                    )\r\n                                }\r\n                                else {\r\n                                    return (\r\n                                    <ElevatedSection title=\"\" style={{flex: 1, marginBottom: 6, paddingHorizontal: sizes.rem0_5, paddingVertical: sizes.rem0_5}}>\r\n                                        <SecPressable securityId={item.item.id}>                            \r\n                                                <Avatar\r\n                                                    style={{ borderRadius: 5 }}\r\n                                                    shape={'square'}\r\n                                                    resizeMode={'cover'}\r\n                                                    source={ {uri: item.item.logo_url} }\r\n                                                    size=\"giant\"\r\n                                                />\r\n                                        </SecPressable>\r\n                                </ElevatedSection>)\r\n                                }\r\n                            }}\r\n                        />\r\n                    </View>\r\n                    <View style={[searchText !== \"\" ? {display: 'flex'} : {display: 'none'}]}>\r\n                        <Header text=\"Posts\" />\r\n                    </View>\r\n                    </View>,\r\n                    <View>\r\n                        {(searchText !== \"\") ? <FeedPart searchText={searchText} /> : <NoDataPanel message={'Search for Analysts, Posts, or Companies!'} />}\r\n                    </View>\r\n                \r\n                ]}\r\n                renderItem={(info) => {\r\n                    return info.item\r\n                }}\r\n                contentContainerStyle={[{ paddingTop: 10 }]} \r\n                nestedScrollEnabled\r\n                >\r\n            </FlatList>\r\n        </View>\r\n    );\r\n}\r\n","import { createDrawerNavigator } from \"@react-navigation/drawer\";\r\nimport { getFocusedRouteNameFromRoute, useNavigationState } from \"@react-navigation/native\";\r\nimport React from \"react\";\r\nimport { Keyboard, Pressable } from \"react-native\";\r\nimport { useAppUser } from \"../Authentication\";\r\nimport { IconButton } from \"../components/IconButton\";\r\nimport { IconifyIcon } from \"../components/IconfiyIcon\";\r\nimport { SideMenu } from \"../components/SideMenu\";\r\nimport { SvgExpo } from \"../components/SvgExpo\";\r\nimport { BookmarkActiveBlue, BookmarkIcons, LogoNoBg } from \"../images\";\r\nimport { sizes } from \"../style\";\r\nimport { useIsKeyboardVisible } from \"../utils/hooks\";\r\nimport { BottomTabNavigator } from \"./BottomTabNavigator\";\r\nimport KeyboardClose from '../assets/@iconify/keyboard-close'\r\n\r\nexport const Drawer = createDrawerNavigator();\r\n\r\n\r\nconst HeaderTp = () => {\r\n    return <SvgExpo style={{ height: \"100%\", aspectRatio: 1 }}>\r\n        <LogoNoBg />\r\n    </SvgExpo>\r\n}\r\n\r\nexport function DrawerPart() {\r\n    const { loginState } = useAppUser();\r\n\r\n    console.log(\"Running Drawer Navigation\")\r\n    return loginState?.appUser ? <Drawer.Navigator useLegacyImplementation={true} drawerContent={(props) => <SideMenu  {...props} />}\r\n        screenOptions={({ route, navigation }) => ({\r\n            headerTitleAlign: \"center\",\r\n            headerTitle: HeaderTp,\r\n            headerRight: (() => {\r\n                const routeName = getFocusedRouteNameFromRoute(route);\r\n                const state = useNavigationState((state) => {\r\n                    return (((state.routes[0]?.state?.routes as any[])?.find(r => r.name === \"Feed\").params as any)?.bookmarkedOnly || \"false\") as \"true\" | \"false\"\r\n                });\r\n\r\n                const { isKeyboardVisible } = useIsKeyboardVisible();\r\n\r\n                if (isKeyboardVisible) {\r\n                    return <Pressable\r\n                        onPress={() => {\r\n                            Keyboard.dismiss();\r\n                        }}\r\n                    ><IconifyIcon\r\n                            currentColor=\"black\"\r\n                            icon={KeyboardClose}\r\n                            svgProps={{\r\n                                height: 24,\r\n                                width: 24,\r\n                            }}\r\n                            style={{\r\n                                height: 24,\r\n                                width: 24,\r\n                                marginRight: sizes.rem1\r\n                            }}\r\n                        />\r\n                    </Pressable>\r\n                }\r\n\r\n                switch (routeName) {\r\n                    case \"Feed\":\r\n                        const isMarked = state === \"true\";\r\n                        return <Pressable onPress={() => {\r\n                            navigation.navigate(\"Feed\", {\r\n                                bookmarkedOnly: isMarked ? \"false\" : \"true\"\r\n                            })\r\n                        }}>\r\n                            {!isMarked ? <IconButton\r\n                                iconSource={isMarked ? BookmarkIcons.active : BookmarkIcons.inactive}\r\n                                style={{\r\n                                    height: 28,\r\n                                    width: 28,\r\n                                    marginRight: sizes.rem1\r\n                                }} />\r\n                                : <BookmarkActiveBlue style={{\r\n                                    height: 28,\r\n                                    width: 28,\r\n                                    marginLeft: \"auto\",\r\n                                    marginRight: (sizes.rem1_5 + sizes.rem1) / 2\r\n                                }} />\r\n                            }\r\n                        </Pressable>\r\n                    default:\r\n                        console.log(routeName);\r\n                        return undefined;\r\n                }\r\n            })\r\n        })}>\r\n        <Drawer.Screen name=\"Root\" component={BottomTabNavigator} />\r\n    </Drawer.Navigator> : null;\r\n}\r\n","import React, { useEffect, useState, useRef } from \"react\"\r\nimport { IconifyIcon } from \"../components/IconfiyIcon\"\r\nimport { Section, Subsection } from \"../components/Section\"\r\nimport { SwitchField } from \"../components/SwitchField\"\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { CreateAccountProps, sideMargin } from \"./create_account/shared\"\r\n//import { SetDashboardLayout } from \"../../layouts/DashboardLayout\"\r\n//import { deleteAccount, UpdateUserProfile } from \"../../apis/Authenticfation\"\r\nimport { /*bindSwitch,*/ useReadonlyEntity } from \"../utils/hooks\"\r\nimport { ScrollWithButtons } from \"../components/ScrollWithButtons\"\r\nimport { View, Animated } from \"react-native\"\r\nimport { useLinkTo } from \"@react-navigation/native\"\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { openBrowserAsync } from 'expo-web-browser';\r\nimport { Icon, Text } from \"@ui-kitten/components\";\r\nimport { AddButton, EditButton } from \"../components/AddButton\";\r\nimport { Table } from \"../components/Table\";\r\nimport { bannerText, flex, paddView, paddViewWhite, sizes, thinBannerText } from \"../style\";\r\nimport { PrimaryButton } from \"../components/PrimaryButton\"\r\nimport { useAppUser } from \"../Authentication\"\r\nimport { RootStackScreenProps } from \"../navigation/pages\";\r\n\r\n\r\nexport function AccountSettingsScreen(props: RootStackScreenProps<\"AccountSettings\">) {\r\n    const { loginState, signIn } = useAppUser();\r\n    const appUser = loginState?.appUser, authToken = loginState?.authToken\r\n    const [mentionCheck, setMentionCheck] = useState<boolean>(appUser?.settings?.push_notifications.mentions === undefined ? true : appUser?.settings?.push_notifications.mentions),\r\n        [upvotesCheck, setUpvotesCheck] = useState<boolean>(appUser?.settings?.push_notifications.upvotes === undefined ? true : appUser?.settings?.push_notifications.upvotes),\r\n        [watchlistChangeCheck, setWatchlistChangeCheck] = useState<boolean>(appUser?.settings?.push_notifications.watchlist_changes === undefined ? true : appUser?.settings?.push_notifications.watchlist_changes),\r\n        [performanceCheck, setPerformanceCheck] = useState<boolean>(appUser?.settings?.portfolio_display.performance === undefined ? false : appUser?.settings?.portfolio_display.performance),\r\n        [holdingsCheck, setHoldingsCheck] = useState<boolean>(appUser?.settings?.portfolio_display.holdings === undefined ? false : appUser?.settings?.portfolio_display.holdings),\r\n        [tradesCheck, setTradesCheck] = useState<boolean>(appUser?.settings?.portfolio_display.trades === undefined ? false : appUser?.settings?.portfolio_display.trades),\r\n        [analystCheck, setAnalystCheck] = useState<boolean>(appUser?.settings?.analyst === undefined ? false : appUser?.settings?.analyst),\r\n        linkTo = useLinkTo<any>()\r\n\r\n    const onMentionCheckChanged = (isMentionChecked: boolean) => {\r\n        setMentionCheck(isMentionChecked);\r\n    }\r\n    const onUpvoteCheckChanged = (isUpvoteChecked: boolean) => {\r\n        setUpvotesCheck(isUpvoteChecked);\r\n    }\r\n    const onWatchlistChangeCheckChanged = (isWatchlistChangeChecked: boolean) => {\r\n        setWatchlistChangeCheck(isWatchlistChangeChecked);\r\n    }\r\n    const onPerformanceCheckChanged = (isPerformanceChecked: boolean) => {\r\n        setPerformanceCheck(isPerformanceChecked);\r\n    }\r\n    const onHoldingsCheckChanged = (isHoldingsChecked: boolean) => {\r\n        setHoldingsCheck(isHoldingsChecked);\r\n    }\r\n    const onTradesCheckChanged = (isTradesChecked: boolean) => {\r\n        setTradesCheck(isTradesChecked);\r\n    }\r\n    const onAnalystCheckChanged = (isAnalystChecked: boolean) => {\r\n        setAnalystCheck(isAnalystChecked);\r\n    }\r\n\r\n    const opacityAnim = useRef(new Animated.Value(0)).current;\r\n    const [accounts, setAccounts] = useState<Awaited<ReturnType<typeof Api.User.extensions.getBrokerageAccounts>>>()\r\n    const intervalRef = useRef<any>();\r\n    const [needsRefresh, setNeedsRefresh] = useState<{}>();\r\n    const openLink = async () => {\r\n        const browserName = \"finicity_auth\";\r\n        await openBrowserAsync(brokerLink, { \"windowName\": browserName });\r\n        clearInterval(intervalRef.current);\r\n\r\n        intervalRef.current = setInterval(async () => {\r\n            console.log(\"WTF\");\r\n            if (await AsyncStorage.getItem(\"auth-finicity-code\")) {\r\n                console.log(\"CODE HAS BEEN FOUND\");\r\n                setAccounts(await Api.User.extensions.getBrokerageAccounts())\r\n            }\r\n        }, 5000)\r\n    }\r\n    //cleanup\r\n    useEffect(() => {\r\n        AsyncStorage.removeItem(\"auth-finicity-code\");\r\n        return () => {\r\n            clearInterval(intervalRef.current);\r\n            AsyncStorage.removeItem(\"auth-finicity-code\");\r\n        }\r\n    }, [])\r\n\r\n\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n    const [brokerLink, setLink] = useState(\"\");\r\n    useEffect(() => {\r\n        Api.User.extensions.generateBrokerageLink(undefined).then(({ link }) => {\r\n            setLink(link)\r\n        })\r\n    }, [needsRefresh])\r\n\r\n    useEffect(() => {\r\n        Api.User.extensions.getBrokerageAccounts()\r\n            .then((r: any) => {\r\n                setAccounts(r);\r\n            })\r\n    }, [])\r\n\r\n    return <ScrollWithButtons\r\n        buttons={{\r\n            left: {\r\n                text: 'Cancel',\r\n                onPress: async () => {\r\n                    try {\r\n                        //      await UpdateUserProfile({ status_setup: true });\r\n                        //    SetDashboardLayout();\r\n                        linkTo('/dash/feed')\r\n                    }\r\n                    catch (ex) {\r\n                    }\r\n                }\r\n            },\r\n            right: {\r\n                text: 'Save',\r\n                onPress: async () => {\r\n                    try {\r\n                        if (appUser?.id)\r\n                            await Api.User.update(appUser.id, {\r\n                                settings: {\r\n                                    analyst: analystCheck,\r\n                                    push_notifications: {\r\n                                        mentions: mentionCheck,\r\n                                        upvotes: upvotesCheck,\r\n                                        watchlist_changes: watchlistChangeCheck,\r\n                                    },\r\n                                    portfolio_display: {\r\n                                        performance: performanceCheck,\r\n                                        holdings: holdingsCheck,\r\n                                        trades: tradesCheck\r\n                                    }\r\n                                }\r\n                            })\r\n\r\n                        authToken ? await signIn(\"\", authToken) : {};\r\n\r\n                        linkTo('/dash/feed');\r\n\r\n                    }\r\n                    catch (ex) {\r\n                    }\r\n                }\r\n            }\r\n        }}>\r\n        <View style={{ margin: sideMargin }}>\r\n            <Section title=\"\" style={{ padding: 10 }}>\r\n                <SwitchField label='Analyst' checked={analystCheck} onChange={onAnalystCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n            </Section>\r\n            <Section title='Display' style={{ padding: 10 }}>\r\n                <SwitchField label='Performance' checked={performanceCheck} onChange={onPerformanceCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n                <SwitchField label='Portfolio' checked={holdingsCheck} onChange={onHoldingsCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n                <SwitchField label='Trades' checked={tradesCheck} onChange={onTradesCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n            </Section>\r\n            <Section style={{ padding: 10 }} title=\"Link Brokerage Accounts\" button={(props) => accounts?.length ? <EditButton\r\n                onPress={() => {\r\n                    openLink();\r\n                }}\r\n                height={35}\r\n                width={35}\r\n            /> : <AddButton\r\n                onPress={() => openLink()}\r\n                height={35}\r\n                width={35}\r\n            />} >\r\n                <Table datasetKey={accounts?.map(a => a.id).join(\",\") || \"none\"} columns={[{ alias: \"Brokerage\", field: \"broker_name\", align: \"left\" }, { alias: \"Account #\", field: \"account_number\", align: \"left\" }]} data={accounts} noDataMessage=\"You have no linked accounts\" />\r\n            </Section>\r\n            <Section title='Payment' style={{ padding: 10 }}>\r\n                <Text>\r\n                    Stripe\r\n                </Text>\r\n            </Section>\r\n            <Section title='Notifications' style={{ padding: 10 }}>\r\n                <Subsection title='Posts' alt={true}>\r\n                    <SwitchField label='Mentions' checked={mentionCheck} onChange={onMentionCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n                    <SwitchField label='Upvotes' checked={upvotesCheck} onChange={onUpvoteCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n                </Subsection>\r\n                <Subsection title='Watchlists' alt={true}>\r\n                    {/*<SwitchField label='Price Movement' checked={watchlistPxCheck} onChange={onWatchlistPxCheckChanged} viewStyle={{flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5}} toggleStyle={{}} textStyle={{fontSize: 14, alignSelf: 'center'}}/>*/}\r\n                    <SwitchField label='Changes' checked={watchlistChangeCheck} onChange={onWatchlistChangeCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n                </Subsection>\r\n            </Section>\r\n            <Section title='Management' style={{ padding: 10 }}>\r\n                <View style={{ flexDirection: 'row', justifyContent: 'space-between', marginVertical: 5 }}>\r\n                    <Text style={{ fontSize: 14, alignSelf: 'center' }}>\r\n                        Delete Account\r\n                    </Text>\r\n                    <PrimaryButton style={{ width: \"40%\", backgroundColor: \"#D81222\", borderColor: \"#D81222\" }} onPress={() => { }}>\r\n                        FOREVER\r\n                    </PrimaryButton>\r\n                </View>\r\n            </Section>\r\n        </View>\r\n    </ScrollWithButtons>\r\n}","import React, { useState, useMemo, useEffect } from \"react\"\r\nimport { ElevatedSection, Section, Subsection } from \"../components/Section\"\r\nimport { SwitchField } from \"../components/SwitchField\"\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { sideMargin } from \"./create_account/shared\"\r\nimport { ScrollWithButtons } from \"../components/ScrollWithButtons\"\r\nimport { View, Pressable, Alert, Platform } from \"react-native\"\r\nimport { useLinkTo, useNavigation } from \"@react-navigation/native\"\r\nimport { useSecuritiesList } from '../SecurityList'\r\nimport { Autocomplete, AutocompleteItem, Icon, IndexPath, Text, TabView, Tab } from \"@ui-kitten/components\";\r\nimport { AddButton, EditButton } from \"../components/AddButton\";\r\nimport { flex, sizes, fonts } from \"../style\";\r\nimport { PrimaryButton } from \"../components/PrimaryButton\"\r\nimport { useAppUser } from \"../Authentication\"\r\nimport { investmentStrats, questionStyle, gicsAC } from './create_account/InvestmentInterestSection'\r\nimport { KeyboardAvoidingInput } from \"../components/KeyboardAvoidingInput\";\r\nimport { Picker } from \"../components/Picker\";\r\nimport { ProfileButton } from \"../components/ProfileButton\";\r\nimport { Slider } from \"../components/Slider\";\r\nimport { AppColors } from \"../constants/Colors\";\r\nimport { YourContentComponent } from \"../components/YourContentComponent\";\r\nimport { IUserGet, IUserUpdate } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport { Log } from \"../utils/logger\";\r\nimport { LinkBrokerageComponent } from \"../components/LinkBrokerageComponent\";\r\n\r\nexport function AccountInfoScreen() {\r\n    const { loginState, signIn, signOut } = useAppUser(),\r\n        [index, setIndex] = useState(0),\r\n        linkTo = useLinkTo<any>()\r\n\r\n    const definedOrValue = (test: boolean | undefined, d: boolean) => {\r\n        return test === undefined ? d : test\r\n    }\r\n    const appUser = loginState?.appUser;\r\n    const [accountUpdates, setAccountUpdates] = useState<IUserUpdate>({\r\n        bio: appUser?.bio,\r\n        analyst_profile: appUser?.analyst_profile || {\r\n            investment_strategy: \"\",\r\n            portfolio_concentration: 50,\r\n            benchmark: \"\",\r\n            interests: []\r\n        },\r\n        profile_url: appUser?.profile_url,\r\n        settings: {\r\n            analyst: appUser?.settings?.analyst || false,\r\n            portfolio_display: {\r\n                holdings: definedOrValue(appUser?.settings?.portfolio_display.holdings, false),\r\n                performance: definedOrValue(appUser?.settings?.portfolio_display.performance, false),\r\n                trades: definedOrValue(appUser?.settings?.portfolio_display.trades, false)\r\n            },\r\n            push_notifications: {\r\n                mentions: definedOrValue(appUser?.settings?.push_notifications.mentions, true),\r\n                upvotes: definedOrValue(appUser?.settings?.push_notifications.upvotes, true),\r\n                watchlist_changes: definedOrValue(appUser?.settings?.push_notifications.watchlist_changes, true)\r\n            }\r\n        },\r\n        is_deleted: appUser?.is_deleted\r\n    })\r\n    //HACK: think through a better way of doing this.\r\n    useEffect(() => {\r\n        setAccountUpdates((a) => {\r\n            const clone = { ...a };\r\n            clone.profile_url = appUser?.profile_url;\r\n            return clone;\r\n        });\r\n    }, [loginState?.updated.toString(), appUser?.profile_url])\r\n\r\n    return (\r\n        <ScrollWithButtons\r\n            buttons={{\r\n                left: {\r\n                    text: 'Cancel',\r\n                    onPress: async () => {\r\n                        try {\r\n                            linkTo('/dash/feed')\r\n                        }\r\n                        catch (ex) {\r\n                        }\r\n                    }\r\n                },\r\n                right: {\r\n                    text: 'Save',\r\n                    onPress: async () => {\r\n                        await Log.tryCatch(async () => {\r\n                            if (appUser?.id && loginState?.authToken) {\r\n                                await Api.User.update(appUser?.id || '', accountUpdates);\r\n                                await signIn(\"\", loginState?.authToken);\r\n                            }\r\n                        })\r\n\r\n                        try {\r\n                            linkTo('/dash/feed')\r\n                        }\r\n                        catch (ex) {\r\n                            console.error(ex);\r\n                        }\r\n                    }\r\n                }\r\n            }}>\r\n            <View style={[flex, { margin: sideMargin, marginTop: 12 }]} >\r\n                <TabView indicatorStyle={{ marginTop: 26 }}\r\n                    style={{ marginVertical: sizes.rem0_5 }}\r\n                    tabBarStyle={{ backgroundColor: AppColors.background, borderColor: AppColors.background }}\r\n                    selectedIndex={index}\r\n                    onSelect={(idx) => {\r\n                        console.log(\"Setting index \" + idx);\r\n                        setIndex(idx);\r\n                    }}>\r\n                    <Tab key={\"A\"} title={'Account Info'} style={{ backgroundColor: AppColors.background, borderColor: AppColors.background }} >\r\n                        <AccountInfoContent setUpdates={setAccountUpdates} updates={accountUpdates} />\r\n                    </Tab>\r\n                    <Tab key={\"B\"} title={'Your Content'} style={{ backgroundColor: AppColors.background, borderColor: AppColors.background }}>\r\n                        <YourContentComponent />\r\n                    </Tab>\r\n                    <Tab key={\"C\"} title={'Advanced'} style={{ backgroundColor: AppColors.background, borderColor: AppColors.background }}>\r\n                        <AdvancedTabContent signOut={signOut} appUser={appUser} setUpdates={setAccountUpdates} updates={accountUpdates} />\r\n\r\n                    </Tab>\r\n                </TabView>\r\n\r\n            </View>\r\n        </ScrollWithButtons>\r\n    )\r\n}\r\nconst AccountInfoContent = (props: { updates: IUserUpdate, setUpdates: (updates: IUserUpdate) => void }) => {\r\n    const { updates, setUpdates } = props;\r\n    const [sliderWidth, setSliderWidth] = useState(10),\r\n        [acText, setAcText] = useState(\"\"),\r\n        { securities: { list: securities } } = useSecuritiesList();\r\n\r\n    const acValues = useMemo(() => {\r\n        const r = new RegExp(acText, \"i\");\r\n        return acText ? gicsAC.filter((g, i) => r.test(g)) : [];\r\n    }, [acText])\r\n    const addIfMissing = (value: string) => {\r\n        if (value && !updates.analyst_profile?.interests?.find((int: any) => int.toLowerCase() === value.toLowerCase())) {\r\n            const _updates = { ...updates }\r\n            _updates.analyst_profile!.interests = [..._updates.analyst_profile!.interests, value]\r\n            setUpdates(_updates);\r\n        }\r\n        setAcText(\"\");\r\n    }\r\n    const benches = securities.filter(s => s.is_benchmark).sort((a, b) => a.symbol.localeCompare(b.symbol)).map((value) => ({\r\n        label: `${value.symbol} - ${value.security_name}`,\r\n        value: value.symbol,\r\n        iconUrl: value.logo_url\r\n    }))\r\n    const { loginState } = useAppUser();\r\n\r\n    return <ElevatedSection\r\n        title=\"\">\r\n        <Text style={[questionStyle, { marginTop: sizes.rem0_5, textAlign: 'center' }]}>Tap to Modify Profile Picture</Text>\r\n        <ProfileButton key={loginState?.updated.toString()} userId={''} profileUrl={updates.profile_url || ''} size={sizes.rem8} editable />\r\n        <Text style={[questionStyle, { marginTop: sizes.rem0_5 }]}>Bio</Text>\r\n        <KeyboardAvoidingInput\r\n            value={updates.bio}\r\n            displayButton={false}\r\n            numLines={3}\r\n            placeholder={'Tell people about yourself'}\r\n            setValue={(text: string) => {\r\n                const _updates = { ...updates }\r\n                _updates.bio = text;\r\n                setUpdates(_updates);\r\n            }}\r\n        />\r\n        <Text style={questionStyle}>What is your investment strategy?</Text>\r\n        <Picker\r\n            placeholder='Select Strategy'\r\n            value={updates?.analyst_profile?.investment_strategy}\r\n            items={investmentStrats.map((value) => ({\r\n                label: value,\r\n                value\r\n            }))}\r\n            onSelect={(v) => {\r\n                if (v) {\r\n                    const _updates = { ...updates }\r\n                    _updates.analyst_profile!.investment_strategy = investmentStrats[v.row];\r\n                    setUpdates(_updates);\r\n                }\r\n            }}\r\n        />\r\n        <Text style={questionStyle}>How concentrated is your portfolio?</Text>\r\n        <Slider\r\n            containerStyle={{\r\n                //marginLeft: sliderWidth * 0.05\r\n            }}\r\n            min={0}\r\n            max={100}\r\n            step={25}\r\n            //sliderLength={sliderWidth * 0.9}\r\n            values={[updates.analyst_profile!.portfolio_concentration]}\r\n            onValuesChange={(v) => {\r\n                const _updates = { ...updates }\r\n                _updates.analyst_profile!.portfolio_concentration = v[0]\r\n                setUpdates(_updates);\r\n            }}\r\n        />\r\n        <View style={{ flexDirection: \"row\", justifyContent: \"space-between\", marginBottom: 16 }}>\r\n            <Text>Highly Diversified</Text>\r\n            <Text>Very Concentrated</Text>\r\n        </View>\r\n        <Text style={questionStyle}>What benchmark do you follow?</Text>\r\n        <Picker\r\n            value={updates.analyst_profile?.benchmark}\r\n            placeholder='Select Benchmark'\r\n            items={benches}\r\n            onSelect={(v) => {\r\n                if (v) {\r\n                    const _updates = { ...updates }\r\n                    _updates.analyst_profile!.benchmark = benches[v.row].value;\r\n                    setUpdates(_updates);\r\n                }\r\n            }}\r\n        />\r\n        <Text style={questionStyle}>Pick a few interest and specialties</Text>\r\n        <View>\r\n            <Autocomplete\r\n                value={acText || \"\"}\r\n                onChangeText={setAcText}\r\n                placeholder=\"Interest &amp; Specialties\"\r\n                placement=\"bottom\"\r\n                accessoryRight={\r\n                    (props) => <AddButton\r\n                        onPress={() => addIfMissing(acText)}\r\n                        height={(props?.style as any)?.height}\r\n                        width={(props?.style as any)?.width}\r\n\r\n                    />\r\n                }\r\n                onSelect={(idx) => addIfMissing(acValues[idx])}>{\r\n                    acValues.map((v, i) => <AutocompleteItem key={i} title={v} />)\r\n                }\r\n            </Autocomplete>\r\n        </View>\r\n        {\r\n            updates.analyst_profile?.interests.map((v, i) => <View style={{ padding: sizes.rem0_5, flexDirection: \"row\" }}>\r\n                <Text style={{ textAlign: \"left\", flex: 1 }}>{v}</Text><Pressable onPress={() => {\r\n                    const newInterest = [...updates.analyst_profile!.interests];\r\n                    newInterest.splice(i, 1);\r\n                    const _updates = { ...updates }\r\n                    _updates.analyst_profile!.interests = newInterest;\r\n                    setUpdates(_updates);\r\n                }}><Icon name=\"close-outline\" style={{ height: 24, aspectRatio: 1 }} /></Pressable>\r\n            </View>)\r\n        }\r\n    </ElevatedSection>\r\n\r\n}\r\n\r\nconst AdvancedTabContent = (props: { appUser: IUserGet | undefined, signOut: any, updates: IUserUpdate, setUpdates: (updates: IUserUpdate) => void }) => {\r\n\r\n    const nav = useNavigation();\r\n    const updates = props.updates;\r\n\r\n    const onMentionCheckChanged = (isMentionChecked: boolean) => {\r\n        const _updates = { ...updates }\r\n        _updates.settings!.push_notifications.mentions = isMentionChecked;\r\n        props.setUpdates(_updates)\r\n    }\r\n    const onUpvoteCheckChanged = (isUpvoteChecked: boolean) => {\r\n        const _updates = { ...updates }\r\n        _updates.settings!.push_notifications.upvotes = isUpvoteChecked\r\n        props.setUpdates(_updates)\r\n    }\r\n    const onWatchlistChangeCheckChanged = (isWatchlistChangeChecked: boolean) => {\r\n        const _updates = { ...updates }\r\n        _updates.settings!.push_notifications.watchlist_changes = isWatchlistChangeChecked\r\n        props.setUpdates(_updates)\r\n\r\n    }\r\n    const onPerformanceCheckChanged = (isPerformanceChecked: boolean) => {\r\n        const _updates = { ...updates }\r\n        _updates.settings!.portfolio_display.performance = isPerformanceChecked;\r\n        props.setUpdates(_updates)\r\n    }\r\n    const onHoldingsCheckChanged = (isHoldingsChecked: boolean) => {\r\n        const _updates = { ...updates }\r\n        _updates.settings!.portfolio_display.holdings = isHoldingsChecked\r\n        props.setUpdates(_updates)\r\n    }\r\n    const onTradesCheckChanged = (isTradesChecked: boolean) => {\r\n        const _updates = { ...updates }\r\n        _updates.settings!.portfolio_display.trades = isTradesChecked;\r\n        props.setUpdates(_updates)\r\n    }\r\n    const onAnalystCheckChanged = (isAnalystChecked: boolean) => {\r\n        const _updates = { ...updates }\r\n        _updates.settings!.analyst = isAnalystChecked;\r\n        props.setUpdates(_updates)\r\n    }\r\n    //@ts-ignore\r\n    const alertPolyfill = (title, description, options, extra) => {\r\n        const result = window.confirm([title, description].filter(Boolean).join('\\n'))\r\n\r\n        if (result) {\r\n            //@ts-ignore\r\n            const confirmOption = options.find(({ style }) => style !== 'cancel')\r\n            confirmOption && confirmOption.onPress()\r\n        } else {\r\n            //@ts-ignore\r\n            const cancelOption = options.find(({ style }) => style === 'cancel')\r\n            cancelOption && cancelOption.onPress()\r\n        }\r\n    }\r\n\r\n    const alert = Platform.OS === 'web' ? alertPolyfill : Alert.alert;\r\n\r\n\r\n    return <ElevatedSection title=\"\" style={{ padding: 5 }}>\r\n        <View>\r\n            <SwitchField label='Analyst'\r\n                toolTipText={`Becoming an analyst allows you to display your portfolio to subscribers, customize your profile and enable you to post premium content on TP.`}\r\n                toolTipStyle={{ alignItems: 'flex-start' }}\r\n                checked={props.updates.settings?.analyst}\r\n                onChange={onAnalystCheckChanged}\r\n                viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5, padding: 5 }}\r\n                toggleStyle={{}}\r\n                textStyle={{ fontSize: fonts.large, fontWeight: '500', alignSelf: 'center', color: AppColors.primary }}\r\n            />\r\n        </View>\r\n        <Section title='Display To Subscribers' style={{ padding: 5 }}>\r\n            <SwitchField label='Performance' checked={props.updates.settings?.portfolio_display.performance} onChange={onPerformanceCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n            <SwitchField label='Portfolio' checked={props.updates.settings?.portfolio_display.holdings} onChange={onHoldingsCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n            <SwitchField label='Trades' checked={props.updates.settings?.portfolio_display.trades} onChange={onTradesCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n            <View style={{ flexDirection: 'row', justifyContent: 'center', marginVertical: 15 }}>\r\n                <PrimaryButton style={{ width: \"60%\", paddingHorizontal: 4, backgroundColor: AppColors.secondary, borderColor: AppColors.secondary }} onPress={() => {\r\n                    nav.navigate('Subscription')\r\n                }}>\r\n                    {evaProps => <Text {...evaProps} style={{ textAlign: 'center', color: 'white', paddingHorizontal: 6 }}>Manage Subscriptions</Text>}\r\n\r\n                </PrimaryButton>\r\n            </View>\r\n        </Section>\r\n        <LinkBrokerageComponent />\r\n        <Section title='Payment' style={{ padding: 10 }}>\r\n            <Text>\r\n                Coming Soon!\r\n            </Text>\r\n        </Section>\r\n        <Section title='Notifications' style={{ padding: 10 }}>\r\n            <Subsection title='Posts' alt={true}>\r\n                <SwitchField label='Mentions' checked={props.updates.settings?.push_notifications.mentions} onChange={onMentionCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n                <SwitchField label='Upvotes' checked={props.updates.settings?.push_notifications.upvotes} onChange={onUpvoteCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n            </Subsection>\r\n            <Subsection title='Watchlists' alt={true}>\r\n                {/*<SwitchField label='Price Movement' checked={watchlistPxCheck} onChange={onWatchlistPxCheckChanged} viewStyle={{flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5}} toggleStyle={{}} textStyle={{fontSize: 14, alignSelf: 'center'}}/>*/}\r\n                <SwitchField label='Changes' checked={props.updates.settings?.push_notifications.watchlist_changes} onChange={onWatchlistChangeCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n            </Subsection>\r\n        </Section>\r\n        <Section title='Management' style={{ padding: 10 }}>\r\n            <View style={{ flexDirection: 'row', justifyContent: 'space-between', marginVertical: 5 }}>\r\n                <Text style={{ fontSize: 14, alignSelf: 'center' }}>\r\n                    Delete Account\r\n                </Text>\r\n                <PrimaryButton style={{ width: \"40%\", backgroundColor: \"#D81222\", borderColor: \"#D81222\" }} onPress={async () => {\r\n                    return alert(\r\n                        `Are you sure you want to delete your account?`,\r\n                        '',\r\n                        [\r\n                            {\r\n                                text: \"Yes\",\r\n                                onPress: async () => {\r\n                                    const _updates = { ...updates }\r\n                                    _updates.is_deleted = true;\r\n                                    props.setUpdates(_updates)\r\n                                    await Api.User.update(props.appUser?.id || '', _updates);\r\n                                    props.signOut();\r\n                                }\r\n                            },\r\n                            {\r\n                                text: \"No\"\r\n                            }\r\n                        ]\r\n                    )\r\n                }}>\r\n                    FOREVER\r\n                </PrimaryButton>\r\n            </View>\r\n        </Section>\r\n    </ElevatedSection>\r\n\r\n}","import AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { Text } from '@ui-kitten/components'\r\nimport { useEffect } from 'react';\r\nimport { RootStackScreenProps } from '../navigation/pages';\r\n\r\nexport const AuthScreen = (props: RootStackScreenProps<\"Auth\">) => {\r\n    const platform = props.route?.params?.platform;\r\n    const code = props.route?.params?.code;\r\n    console.log(\"############################## LOADED THE AUTH SCREEN ########################################\");\r\n    useEffect(() => {\r\n        console.log(\"SETTING THE PLATFORM CODE\");\r\n        if (platform === \"twitter\" && code) {\r\n            AsyncStorage.setItem(`auth-${platform}-code`, code);\r\n        }\r\n        else if (platform === \"youtube\" && code) {\r\n            AsyncStorage.setItem(`auth-${platform}-code`, code);\r\n        }\r\n        //redundant but I may change this\r\n        else if (platform === \"finicity\") {\r\n            AsyncStorage.setItem(`auth-${platform}-code`, \"DONE!\");\r\n        }\r\n        if (props.navigation.canGoBack())\r\n            props.navigation.goBack();\r\n\r\n    }, [platform, code]);\r\n    return <Text>You have been authozied to {platform || \"Missing platform\"}</Text>\r\n}","import { Button } from \"@ui-kitten/components\";\r\nimport React, { useState } from \"react\";\r\nimport { View } from \"react-native\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { PrimaryButton } from \"../components/PrimaryButton\";\r\nimport { ElevatedSection } from \"../components/Section\";\r\nimport { TextField } from \"../components/TextField\";\r\nimport { Api } from '@tradingpost/common/api'\r\nimport { useAppUser } from \"../Authentication\";\r\nimport { RootStackScreenProps } from \"../navigation/pages\";\r\n\r\nexport const ChangePasswordScreen = (props: RootStackScreenProps<\"ResetPassword\">) => {\r\n    const\r\n        [oldPass, setOldPass] = useState<string>(),\r\n        [newPass, setNewPass] = useState<string>(),\r\n        [confirm, setConfirm] = useState<string>(),\r\n        toast = useToast(),\r\n        hasToken = Boolean(props.route.params.token),\r\n        { loginState } = useAppUser()\r\n\r\n    return <View>\r\n        <ElevatedSection title={\"Reset Password\"}>\r\n            {!hasToken && <TextField label=\"Old Pass\" value={oldPass} onChangeText={(t) => setOldPass(t)} />}\r\n            <TextField label=\"New Pass\" value={newPass} onChangeText={(t) => setNewPass(t)} />\r\n            <TextField label=\"Confirm Pass\" value={confirm} onChangeText={(t) => setConfirm(t)} />\r\n            <PrimaryButton\r\n                onPress={async () => {\r\n                    try {\r\n                        if (!hasToken && !oldPass)\r\n                            throw new Error(\"Please provide a value for your old password\");\r\n                        if (newPass && newPass !== confirm)\r\n                            throw new Error(\"Please make sure your new passwords match\")\r\n                        if ((newPass?.length || 0) < 8)\r\n                            throw new Error(\"Please make sure your password is at least 8 characters long\")\r\n\r\n\r\n                        await Api.Auth.resetPassword(\r\n                            loginState?.appUser?.email || \"\",\r\n                            props.route.params.token || oldPass || \"\",\r\n                            !hasToken,\r\n                            newPass || \"\")\r\n\r\n                        props.navigation.replace(\"Root\");\r\n\r\n                    }\r\n                    catch (ex: any) {\r\n                        toast.show(ex.message)\r\n                    }\r\n\r\n                }}\r\n            >Change Password</PrimaryButton>\r\n        </ElevatedSection>\r\n    </View>\r\n\r\n}","import { Api, Interface } from \"@tradingpost/common/api\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { Animated, FlatList, NativeSyntheticEvent, ScrollView, View, NativeScrollEvent, useWindowDimensions } from \"react-native\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { Avatar, Text } from '@ui-kitten/components'\r\nimport { elevated, flex, fonts, paddView, row, sizes } from \"../style\";\r\nimport { ElevatedSection } from \"../components/Section\";\r\nimport { Tab, TabBar } from \"@ui-kitten/components\";\r\nimport { FavButton } from \"../components/AddButton\";\r\nimport { toDollarsAndCents, toPercent2 } from \"../utils/misc\";\r\nimport InteractiveChart from \"../components/InteractiveGraph\";\r\nimport { ButtonGroup } from \"../components/ButtonGroup\";\r\nimport { FeedPart } from \"./FeedScreen\";\r\nimport { RootStackScreenProps } from \"../navigation/pages\";\r\nimport { AppColors } from \"../constants/Colors\";\r\n\r\nconst periods: { [key: string]: number } = {\r\n    \"1D\": 1,\r\n    \"1W\": 5,\r\n    \"1M\": 20,\r\n    \"3M\": 60,\r\n    \"1Y\": 252,\r\n    \"2Y\": 252 * 2,\r\n    \"5Y\": 252 * 5,\r\n    \"Max\": 252 * 10\r\n}\r\nconst tabBarMargin = sizes.rem1;\r\n\r\nexport const CompanyScreen = (props: RootStackScreenProps<\"Company\">) => {\r\n\r\n    const [security, setSecurity] = useState<Interface.ISecurityGet>();\r\n    const [securityPrices, setSecurityPrices] = useState<{ x: string, y: number }[]>();\r\n    const { securityId } = props.route.params\r\n    const toast = useToast();\r\n    const [isFav, setIsFav] = useState(false);\r\n    const [description, setDescription] = useState<string>();\r\n    const [portPeriod, setPortPeriod] = useState(\"1Y\")\r\n    const [tab, setTab] = useState(0);\r\n    const { width: windowWidth, height: windowHeight } = useWindowDimensions();\r\n    const scrollRef = useRef<FlatList>(null);\r\n    const translateHeaderY = useRef(new Animated.Value(0)).current;\r\n    /*\r\n    \r\n    let headerHeight =  sizes.rem0_5 * 3 +  fonts.small * 2 + \r\n                        sizes.rem0_5 * 3 + sizes.rem1 * 2 + fonts.small * 2 + ((9 / 16) * windowWidth) + sizes.rem0_5 + sizes.rem1 + 42 +\r\n                        ( Number(elevated.paddingVertical) + Number(elevated.marginBottom) + sizes.rem1 + fonts.large ) + (description ? 100 : 0) + sizes.rem1 + sizes.rem0_5\r\n    //const headerHeight = 680;\r\n    const minViewHeight = windowHeight - headerHeight;\r\n    const [collapsed, setCollapsed] = useState(false);\r\n    const [isMaxed, setIsMaxed] = useState(false);\r\n    const clampMax = headerHeight //- ( Number(elevated.paddingVertical) + Number(elevated.marginBottom) + sizes.rem1 + fonts.large ) ; \r\n    //console.log(clampMax);\r\n    const translation = translateHeaderY.interpolate({\r\n        inputRange: [0, clampMax],\r\n        outputRange: [0, -clampMax],\r\n        extrapolate: 'clamp',\r\n    });\r\n    \r\n    useEffect(() => {\r\n        translation.addListener((v: { value: number }) => {\r\n            const c = Math.abs(v.value + clampMax) < 40;\r\n            const isMaxed = -v.value === clampMax;\r\n            setCollapsed(c);\r\n            setIsMaxed(isMaxed);\r\n        });\r\n        return () => translation.removeAllListeners();\r\n    }, [translation, clampMax]);\r\n    */\r\n    useEffect(() => {\r\n        Api.Security.get(securityId)\r\n            .then((s) => {\r\n                setSecurity(s)\r\n                s.description ? setDescription(s.description.substring(0, 300) + '...') : '';\r\n                setIsFav(s.isOnQuickWatch || false)\r\n            })\r\n            .catch((ex) => toast.show(ex.message))\r\n        Api.Security.extensions.getPrices({ securityId: securityId, includeIntraday: false, includeHistorical: true })\r\n            .then((p) => {\r\n                const prices = p.historical.slice(p.historical.length - periods[portPeriod]).map((a: any) => {\r\n                    return { x: a.date, y: a.close }\r\n                })\r\n                setSecurityPrices(prices);\r\n\r\n            })\r\n            .catch((ex) => toast.show(ex.message))\r\n\r\n    }, [securityId, portPeriod])\r\n    const pxChange =  security?.price?.price || security?.price?.open ? (security?.price?.price - security?.price?.open) / security?.price?.open : 0\r\n    return <View style={flex}>\r\n        <Animated.FlatList\r\n            data={[\r\n                <View style={{ paddingTop: sizes.rem0_5, backgroundColor: AppColors.background, \r\n                    //transform: [{ translateY: translation }], \r\n                    alignItems: \"stretch\", width: \"100%\" }}>\r\n                    <View style={[\r\n                        //collapsed ? {display: 'none'} : {display: 'flex'}, \r\n                        { paddingHorizontal: sizes.rem1, backgroundColor: AppColors.background }]}>\r\n                        <ElevatedSection key={\"Company\"} title=\"\">\r\n                            <View style={[row, { marginVertical: sizes.rem0_5 }]}>\r\n                                <Avatar source={{ uri: security?.logo_url }} style={{ marginRight: sizes.rem0_5, overflow: 'visible', borderRadius: 5 }} shape={'square'} resizeMode={'cover'}  />\r\n                                <View style={flex}>\r\n                                    <Text>{security?.symbol}</Text>\r\n                                    <Text>{security?.company_name}</Text>\r\n                                </View>\r\n                                <View>\r\n                                    <FavButton height={24} width={24} isSelected={isFav}  onPress={() => {\r\n                                    if (security) {\r\n                                        Api.Security.extensions.quickadd({\r\n                                            add: !isFav,\r\n                                            ticker: security?.symbol\r\n                                        })\r\n                                        setIsFav(!isFav);\r\n                                    }\r\n                                }} />\r\n                                <View style={{flexDirection: 'row'}}>\r\n                                    <Text style={[pxChange ? pxChange >= 0 ? { color: 'green'} : {color: 'red'} : {} ,{marginRight: sizes.rem0_5}]}>{toPercent2(pxChange)}</Text>\r\n                                    <Text>{toDollarsAndCents(security?.price?.price)}</Text>\r\n                                </View>\r\n                                </View>\r\n                            </View>\r\n                            <View style={[row, { marginVertical: sizes.rem0_5 }]}>\r\n                                <Text style={flex} category={\"label\"}>Open</Text>\r\n                                <Text style={flex} category={\"c1\"}>{toDollarsAndCents(security?.price?.open)}</Text>\r\n                                <Text style={flex} category={\"label\"}>52 Wk High</Text>\r\n                                <Text style={flex} category={\"c1\"}>{toDollarsAndCents(security?.week_52_high)}</Text>\r\n                            </View>\r\n                            <View style={[row, { marginBottom: sizes.rem1 }]}>\r\n                                <Text style={flex} category={\"label\"}>Close</Text>\r\n                                <Text style={flex} category={\"c1\"}>{toDollarsAndCents(security?.price?.price)}</Text>\r\n                                <Text style={flex} category={\"label\"}>52 Wk Low</Text>\r\n                                <Text style={flex} category={\"c1\"}>{toDollarsAndCents(security?.week_52_low)}</Text>\r\n                            </View>\r\n                            <View style={{ marginBottom: sizes.rem1 }} >\r\n                                <InteractiveChart data={securityPrices} performance={false} />\r\n                            </View>\r\n\r\n                            <ButtonGroup key={\"period\"} \r\n                                items={[\"1D\", \"1W\", \"1M\", \"3M\", \"1Y\", \"5Y\", \"Max\"].map(v => ({ label: v, value: v }))} \r\n                                onValueChange={(v) => setPortPeriod(v)} \r\n                                value={portPeriod} \r\n                            />\r\n                            <Text numberOfLines={5} style={{}}>{description}</Text>\r\n                        </ElevatedSection >\r\n                    </View>\r\n                    <View style={[\r\n                        //collapsed ? {display: 'flex'} : {display: 'flex'},\r\n                        { paddingHorizontal: sizes.rem1, backgroundColor: AppColors.background }]}>\r\n                        <ElevatedSection title=\"\" style={{marginBottom: sizes.rem0_5}} >\r\n                            <TabBar\r\n                                key={\"company_tabBar\"}\r\n                                indicatorStyle={{\r\n                                    marginTop: 26,\r\n                                    marginHorizontal: 10\r\n                                }}\r\n                                style={{width: \"100%\", marginHorizontal: 0 }}\r\n                                selectedIndex={tab}\r\n                                onSelect={t => {\r\n                                    //setTab(t);\r\n                                }}>\r\n                                {[\"Posts\", \"Analysts\"].map(t => <Tab key={\"tab_id\" + t} style={{ marginTop: -4 }} title={t} />)}\r\n                            </TabBar>\r\n                        </ ElevatedSection>\r\n                    </View>\r\n                </View>,\r\n                <View style={[{ paddingHorizontal: 0 }]}>\r\n                    {security && <FeedPart searchText={`$${security?.symbol}`} />}\r\n                </View>\r\n            ]}\r\n            renderItem={(info) => {\r\n                return info.item;\r\n            }}\r\n            ref={scrollRef} contentContainerStyle={[{ paddingTop: 0 }]} nestedScrollEnabled\r\n            /*\r\n            onMomentumScrollEnd={(ev) => {\r\n                if (collapsed && !isMaxed) {\r\n                    scrollRef.current?.scrollToOffset({ offset: clampMax, animated: true });\r\n                    setIsMaxed(true);\r\n                }\r\n            }}\r\n            </View>\r\n            */\r\n            onScroll={Animated.event<NativeSyntheticEvent<NativeScrollEvent>>([\r\n                { nativeEvent: { contentOffset: { y: translateHeaderY } } }\r\n            ], { useNativeDriver: true })}\r\n            >\r\n        </Animated.FlatList>\r\n        \r\n    </View >\r\n\r\n\r\n}","\r\nimport React, { useEffect, useLayoutEffect, useState } from \"react\";\r\nimport { Image, Text, Button, Animated, ImageBackground, useWindowDimensions, View, Alert, Platform } from \"react-native\";\r\nimport { TabScreenProps } from \"../navigation\";\r\nimport { ImageEditor } from 'expo-image-editor'\r\nimport { flex } from \"../style\";\r\nimport * as ImagePicker from 'expo-image-picker'\r\nimport { PrimaryButton } from \"../components/PrimaryButton\";\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { manipulateAsync, SaveFormat } from 'expo-image-manipulator'\r\nimport { useAppUser } from '../Authentication';\r\nimport { useData } from '../lds';\r\n\r\n//import { ImageManipulator } from 'expo-image-crop'\r\n//const imageCrop = require('expo-image-crop')\r\n//const ImageManipulator = imageCrop.ImageManipulator;\r\n\r\nconsole.log(\"Loading IMAGE PICKER\")\r\nexport const ImagePickerScreen = (props: TabScreenProps<{ onComplete: (data: any) => void }>) => {\r\n    const { loginState, updateState  } = useAppUser();\r\n    const appUser = loginState?.appUser;\r\n    console.log(\"Loading inside picker\")\r\n    const [imageUri, setImageUri] = useState<string>(),\r\n        [editorVisible, setEditorVisible] = useState(false),\r\n        [imageData, setImageData] = useState<{ uri: string }>();\r\n    // const pickImage = async () => {\r\n    //     // No permissions request is necessary for launching the image library\r\n    //     let result = await launchImageLibraryAsync({\r\n    //         mediaTypes: MediaTypeOptions.All,\r\n    //         allowsEditing: true,\r\n    //         aspect: [4, 3],\r\n    //         quality: 1,\r\n    //     });\r\n\r\n    //     console.log(result);\r\n\r\n    //     if (!result.cancelled) {\r\n    //         setImageUri(result.uri);\r\n    //     }\r\n    // };\r\n\r\n    const selectPhoto = async () => {\r\n        // Get the permission to access the camera roll\r\n        const response = await ImagePicker.requestMediaLibraryPermissionsAsync();\r\n        // If they said yes then launch the image picker\r\n        if (response.granted) {\r\n            const pickerResult = await ImagePicker.launchImageLibraryAsync({\r\n                base64: true\r\n            });\r\n            // Check they didn't cancel the picking\r\n            console.log(\"PHOTO HAS BEEN SELECTED\");\r\n            if (!pickerResult.cancelled) {\r\n                launchEditor(pickerResult.uri);\r\n            }\r\n        } else {\r\n            // If not then alert the user they need to enable it\r\n            Alert.alert(\r\n                \"Please enable camera roll permissions for this app in your settings.\"\r\n            );\r\n        }\r\n    };\r\n\r\n    const launchEditor = (uri: string) => {\r\n        console.log(\"WTF\")\r\n        // Then set the image uri\r\n        setImageUri(uri);\r\n        // And set the image editor to be visible\r\n        console.log(\"SHOWING EDITOR\");\r\n        setEditorVisible(true);\r\n    };\r\n\r\n    return <View style={flex}>\r\n        <Image\r\n            style={{ height: 300, width: 300 }}\r\n            source={{ uri: imageData?.uri }}\r\n        />\r\n        <Button title=\"Select Photo\" onPress={() => selectPhoto()} />\r\n\r\n        {imageData?.uri &&\r\n            <PrimaryButton onPress={async () => {\r\n                try {\r\n                    await Api.User.extensions.uploadProfilePic({\r\n                        image: imageData.uri\r\n                    })\r\n                    if (appUser)\r\n                        appUser.profile_url = imageData.uri;\r\n                    updateState();\r\n                    console.log(\"TRIGGERING\");\r\n                    props.navigation.goBack();\r\n                }\r\n                catch (ex) {\r\n                    console.error(ex);\r\n                }\r\n\r\n            }} >Upload Photo</PrimaryButton>}\r\n\r\n        <ImageEditor\r\n            //asView={Platform.OS === \"web\"}\r\n            visible={editorVisible}\r\n            onCloseEditor={() => {\r\n                setEditorVisible(false)\r\n            }}\r\n            imageUri={imageUri}\r\n            fixedCropAspectRatio={1}\r\n            lockAspectRatio={true}\r\n            minimumCropDimensions={{\r\n                width: 100,\r\n                height: 100,\r\n            }}\r\n            onEditingComplete={(result) => {\r\n                (async () => {\r\n                    console.log(\"DONE EDITTINGS\")\r\n                    const resizeResult = await manipulateAsync(result.uri, [{\r\n                        resize: {\r\n                            height: 512\r\n                        }\r\n                    }], {\r\n                        base64: true,\r\n                        format: SaveFormat.JPEG\r\n                    })\r\n\r\n\r\n                    setImageData({\r\n                        uri: \"data:image/jpeg;base64,\" + resizeResult.base64\r\n                    });\r\n                })()\r\n            }}\r\n            mode=\"crop-only\"\r\n        />\r\n    </View>\r\n\r\n    // const [imageUri, setImageUri] = useState(\"'https://i.pinimg.com/originals/39/42/a1/3942a180299d5b9587c2aa8e09d91ecf.jpg'\")\r\n    // // useLayoutEffect(() => {\r\n    // //     requestMediaLibraryPermissionsAsync().then(async (r) => {\r\n    // //         if (r.granted) {\r\n    // //             const img = await launchImageLibraryAsync();\r\n    // //             setImageUri((img as ImageInfo).uri);\r\n    // //         }\r\n    // //         else {\r\n    // //             props.navigation.goBack();\r\n    // //         }\r\n    // //     });\r\n    // // }, [])\r\n    // const [isVisible, setIsVisisble] = useState(false);\r\n    // const { width, height } = useWindowDimensions();\r\n    // return <ImageBackground\r\n    //     resizeMode=\"contain\"\r\n    //     style={[flex, {\r\n    //         justifyContent: 'center', padding: 20, alignItems: 'center', height, width, backgroundColor: 'black',\r\n    //     }]}\r\n    //     source={{ uri: imageUri }}\r\n    // >\r\n    //     <Button title=\"Open Image Editor\" onPress={() => setIsVisisble(true)} />\r\n    //     <ImageManipulator\r\n    //         photo={{ uri: imageUri }}\r\n    //         isVisible={isVisible}\r\n    //         onPictureChoosed={(p: { uri: string }) => setImageUri(p.uri)}\r\n    //         onToggleModal={() => setIsVisisble(v => !v)}\r\n    //     />\r\n    // </ImageBackground>\r\n}\r\n\r\n","import {View, Text, ScrollView, Pressable} from \"react-native\";\r\nimport {Api} from \"@tradingpost/common/api\";\r\nimport {ListTradesResponse} from \"@tradingpost/common/api/entities/interfaces\";\r\nimport {ElevatedSection} from \"../components/Section\";\r\nimport {NavigationProp, useNavigation} from \"@react-navigation/native\";\r\nimport {Avatar, Icon, Layout} from \"@ui-kitten/components\"\r\nimport {List} from \"../components/List\";\r\nimport {flex, fonts, sizes} from \"../style\";\r\nimport {AppColors} from \"../constants/Colors\";\r\nimport React from \"react\";\r\n\r\nexport const NotificationTradeScreen = (props: any) => {\r\n    return (\r\n        <View style={{flex: 1, backgroundColor: \"#F7f8f8\"}}>\r\n            <View>\r\n                <Layout style={{\r\n                    backgroundColor: \"#ffffff\",\r\n                    paddingBottom: '2%',\r\n                    paddingTop: '2%',\r\n                    borderBottomColor: '#11146F',\r\n                    borderStyle: 'solid',\r\n                    borderBottomWidth: 2,\r\n                    marginBottom: 10\r\n                }}>\r\n                    <Text style={{\r\n                        margin: 2,\r\n                        textAlign: 'center',\r\n                        fontSize: 20,\r\n                        fontWeight: '600',\r\n                        color: '#11146F',\r\n                    }}>Trade Alerts</Text>\r\n                </Layout>\r\n                <List\r\n                    style={{\r\n                        marginTop: '0.25rem'\r\n                    }}\r\n                    key={\"STATIC\"}\r\n                    datasetKey={\"__________\"}\r\n                    getItemLayout={(items, index, sizeCache) => {\r\n                        const curItem = items?.[index];\r\n                        return typeof curItem === 'object' ? sizeCache[index] : {\r\n                            index,\r\n                            offset: sizeCache[index - 1].offset + sizeCache[index - 1].length,\r\n                            length: 10\r\n                        };\r\n                    }}\r\n                    data={async (allItems: any, page: number, sizeCache: any[]): Promise<ListTradesResponse[]> => {\r\n                        const trades = (await Api.Notification.extensions.listTrades({\r\n                            page\r\n                        }));\r\n\r\n                        const newTrades = [...(allItems || []), ...trades];\r\n                        newTrades.forEach((item, index) => {\r\n                            if (!sizeCache[index]) {\r\n                                sizeCache[index] = {\r\n                                    index,\r\n                                    offset: index ? sizeCache[index - 1].offset + sizeCache[index - 1].length : 0,\r\n                                    length: 0,\r\n                                }\r\n                            }\r\n                        });\r\n                        return newTrades;\r\n                    }}\r\n                    keyExtractor={(item: any, index: number) => typeof item === 'string' ? 'loadingtext' : (index + \"_\" + item._id)}\r\n                    preloadOffset={1}\r\n                    renderItem={(item) => {\r\n                        if (typeof item.item === 'string') {\r\n                            return <Text style={{textAlign: \"center\", fontSize: fonts.large}}>Loading More...</Text>\r\n                        }\r\n\r\n                        const dt = new Date(item.item.dateTime);\r\n                        const dtFmt = `${dt.getMonth()+1}/${dt.getDay()}/${dt.getFullYear() % 100}`\r\n\r\n                        switch (item.item.type) {\r\n\r\n                            case \"sell\":\r\n                                return <ElevatedSection title={\"\"} style={{paddingTop: '0.5rem', paddingBottom: '0.5rem', marginHorizontal: sizes.rem2/2, marginVertical: sizes.rem1/2,}}>\r\n                                    <View style={{marginBottom: -sizes.rem0_5}}>\r\n                                        <View style={{flexDirection: \"row\", width: \"100%\", marginBottom: sizes.rem0_5}}>\r\n                                            <View style={[flex, {marginLeft: sizes.rem0_5}]}>\r\n                                                <Pressable onPress={() => {\r\n                                                }}>\r\n                                                    <View style={{flex: 1}}>\r\n                                                        <View style={{\r\n                                                            flexDirection: 'row',\r\n                                                            justifyContent: \"space-between\"\r\n                                                        }}>\r\n                                                            <Text style={{width: '15%'}}>\r\n                                                                {dtFmt}\r\n                                                            </Text>\r\n                                                            <Text style={{width: '30%'}}>\r\n                                                                @{item.item.handle}\r\n                                                            </Text>\r\n                                                            <Text style={{color: \"#22DDAA\", fontWeight: \"bold\", width: '20%'}}>\r\n                                                                Bought\r\n                                                            </Text>\r\n                                                            <Text style={{width: '12%'}}>\r\n                                                                {item.item.symbol}\r\n                                                            </Text>\r\n                                                            <Text style={{width: '20%'}}>\r\n                                                                ${toTwoDecimals(item.item.price)}\r\n                                                            </Text>\r\n                                                            <View style={{width: '8%'}}>\r\n                                                                <Icon style={{ opacity: 1, height: 16, width: 32 }} name={\"file-text-outline\"}\r\n                                                                      fill={AppColors.primary}\r\n                                                                />\r\n                                                            </View>\r\n                                                        </View>\r\n                                                    </View>\r\n                                                </Pressable>\r\n                                            </View>\r\n                                        </View>\r\n                                    </View>\r\n                                </ElevatedSection>\r\n                            case \"buy\":\r\n                                return <ElevatedSection title={\"\"} style={{paddingTop: '0.5rem', paddingBottom: '0.5rem', marginHorizontal: sizes.rem2/2, marginVertical: sizes.rem1/2,}}>\r\n                                    <View style={{marginBottom: -sizes.rem0_5}}>\r\n                                        <View style={{flexDirection: \"row\", width: \"100%\", marginBottom: sizes.rem0_5}}>\r\n                                            <View style={[flex, {marginLeft: sizes.rem0_5}]}>\r\n                                                <Pressable onPress={() => {\r\n                                                }}>\r\n                                                    <View style={{flex: 1}}>\r\n                                                        <View style={{\r\n                                                            flexDirection: 'row',\r\n                                                            justifyContent: \"space-between\"\r\n                                                        }}>\r\n                                                            <Text style={{width: '15%'}}>\r\n                                                                {dtFmt}\r\n                                                            </Text>\r\n                                                            <Text style={{width: '30%'}}>\r\n                                                                @{item.item.handle}\r\n                                                            </Text>\r\n                                                            <Text style={{color: \"#F4452D\", fontWeight: \"bold\", width: '20%'}}>\r\n                                                                Closed\r\n                                                            </Text>\r\n                                                            <Text style={{width: '12%'}}>\r\n                                                                {item.item.symbol}\r\n                                                            </Text>\r\n                                                            <Text style={{width: '20%'}}>\r\n                                                                ${toTwoDecimals(item.item.price)}\r\n                                                            </Text>\r\n                                                            <View style={{width: '8%'}}>\r\n                                                                <Icon style={{ opacity: 1, height: 16, width: 32 }} name={\"file-text-outline\"}\r\n                                                                      fill={AppColors.primary}\r\n                                                                />\r\n                                                            </View>\r\n                                                        </View>\r\n                                                    </View>\r\n                                                </Pressable>\r\n                                            </View>\r\n                                        </View>\r\n                                    </View>\r\n                                </ElevatedSection>\r\n                            default:\r\n                                return <ElevatedSection title={\"\"} style={{marginHorizontal: sizes.rem2/2, marginVertical: sizes.rem1/2, paddingTop: '0.5rem', paddingBottom: '0.5rem'}}>\r\n                                    <View style={{marginBottom: -sizes.rem0_5}}>\r\n                                        <View style={{flexDirection: \"row\", width: \"100%\", marginBottom: sizes.rem0_5}}>\r\n                                            <View style={[flex, {marginLeft: sizes.rem0_5}]}>\r\n                                                <Pressable onPress={() => {\r\n                                                }}>\r\n                                                    <View style={{flex: 1}}>\r\n                                                        <View style={{\r\n                                                            flexDirection: 'row',\r\n                                                            justifyContent: \"space-between\"\r\n                                                        }}>\r\n                                                            <Text style={{width: '15%'}}>\r\n                                                                {dtFmt}\r\n                                                            </Text>\r\n                                                            <Text style={{width: '30%'}}>\r\n                                                                @{item.item.handle}\r\n                                                            </Text>\r\n                                                            <Text style={{fontWeight: \"bold\", width: '20%'}}>\r\n                                                                {toUpperCase(item.item.type)}\r\n                                                            </Text>\r\n                                                            <Text style={{width: '12%'}}>\r\n                                                                {item.item.symbol}\r\n                                                            </Text>\r\n                                                            <Text style={{width: '20%'}}>\r\n                                                                ${toTwoDecimals(item.item.price)}\r\n                                                            </Text>\r\n                                                            <View style={{width: '8%'}}>\r\n                                                                <Icon style={{ opacity: 1, height: 16, width: 32 }} name={\"file-text-outline\"}\r\n                                                                      fill={AppColors.primary}\r\n                                                                />\r\n                                                            </View>\r\n                                                        </View>\r\n                                                    </View>\r\n                                                </Pressable>\r\n                                            </View>\r\n                                        </View>\r\n                                    </View>\r\n                                </ElevatedSection>\r\n                        }\r\n                    }}\r\n                    noDataMessage={\"No Trades Available\"}\r\n                    loadingItem={\" \"}\r\n                />\r\n            </View>\r\n        </View>\r\n    )\r\n}\r\n\r\nconst toUpperCase = (ss: string) => {\r\n    const s = ss.trim().toLowerCase();\r\n    return s.charAt(0).toUpperCase() + s.slice(1);\r\n}\r\n\r\nconst toTwoDecimals = (ss: string): string => {\r\n    const f = parseFloat(ss);\r\n    return f.toFixed(2);\r\n}","import {Api} from \"@tradingpost/common/api\";\r\nimport React, {useRef, useState} from \"react\";\r\nimport {KeyboardAvoidingView, Platform, ScrollView, View} from \"react-native\";\r\nimport {RichEditor, RichToolbar} from \"react-native-pell-rich-editor\";\r\nimport {useToast} from \"react-native-toast-notifications\";\r\nimport {Header} from \"../components/Headers\";\r\nimport {Label} from \"../components/Label\";\r\nimport {ButtonPanel} from \"../components/ScrollWithButtons\";\r\nimport {TextEditor, TextEditorToolbar} from \"../components/TextEditor\";\r\nimport {TextField} from \"../components/TextField\";\r\nimport { Text } from \"@ui-kitten/components\";\r\nimport { ButtonGroup } from \"../components/ButtonGroup\";\r\n//import Navigation, {DashScreenProps, TabScreenProps} from \"../navigation\";\r\nimport {sizes, flex, fonts} from \"../style\";\r\nimport {bindTextInput, bindTextInputBase, useReadonlyEntity} from \"../utils/hooks\";\r\n\r\nexport const PostEditorScreen = (props: any) => {\r\n    const [postHeight, setPostHeight] = useState(0),\r\n        [postWidth, setPostWidth] = useState(0)\r\n    const [subLevel, setSubLevel] = useState('standard')\r\n    const postEntity = useReadonlyEntity({\r\n            content: \"\",\r\n            title: \"\",\r\n            subscription_level: \"standard\",\r\n            height: 0,\r\n            width: 0,\r\n            photos: []\r\n        }),\r\n        [locked, setLocked] = useState(false),\r\n        editorRef = useRef<any>(null),\r\n        toast = useToast(),\r\n        [contentFocused, setContentFocused] = useState(false)\r\n\r\n    return <View style={{backgroundColor: \"white\", flexGrow: 1}}>\r\n        <Header text='+ New Post' style={{marginBottom: 0, marginTop: 4, marginLeft: sizes.rem1, color: \"black\"}}/>\r\n        <View style={{width: '90%'}}>\r\n            <ButtonGroup\r\n                        style={{ margin: sizes.rem1}}\r\n                        unselectedStyle={{\r\n                            backgroundColor: \"#35A265\",\r\n                        }}\r\n                        value={subLevel}\r\n                        onValueChange={(value) => {\r\n                            setSubLevel(value);\r\n                            postEntity.update({subscription_level: value})\r\n                            \r\n                        }} \r\n                        items={[{ label: \"Free\", value: \"standard\" }, { label: \"Premium\", value: \"premium\" }]} />\r\n        </View>\r\n        <View style={{marginHorizontal: sizes.rem1, marginTop: sizes.rem1}}>\r\n            <TextField\r\n                label='Post Title' placeholder='Add a title to your post'  {...bindTextInput(postEntity, \"title\", null)}\r\n                markRequired/>\r\n        </View>\r\n        <View style={{flex: 1, marginHorizontal: sizes.rem1 / 5}}>\r\n            <ScrollView \r\n                onTouchEnd={(ev) => {\r\n                    if (!contentFocused) {\r\n                        editorRef.current?.focusContentEditor();\r\n                    }\r\n                }} \r\n                style={[flex, {}]}\r\n                contentContainerStyle={{minHeight: \"100%\", maxHeight: \"100%\", height: \"100%\"}}>\r\n                <Text style={{ fontSize: fonts.medium, marginHorizontal: sizes.rem1, marginVertical: sizes.rem1 }}>Post</Text>\r\n                \r\n                <RichEditor \r\n                    onLayout={(event) => {\r\n                        postEntity.update({height: event.nativeEvent.layout.width / event.nativeEvent.layout.height , width: event.nativeEvent.layout.width})\r\n                    }}\r\n                    onFocus={() => {\r\n                        setContentFocused(true)\r\n                    }} onBlur={() =>\r\n                        setContentFocused(false)} containerStyle={{minHeight: 1}}\r\n                                initialContentHTML={postEntity.data.content} ref={editorRef}\r\n                                placeholder={\"Add content to your post\"}\r\n                                {...bindTextInputBase(postEntity, \"content\", null, {\"onChangeTextKey\": \"onChange\"})} />\r\n            </ScrollView>\r\n        </View>\r\n        \r\n        {/* //TODO: add are you sure if dirty  */}\r\n        <KeyboardAvoidingView style={{flex: 1}} behavior={Platform.OS === \"ios\" ? \"padding\" : \"height\"}>\r\n            <RichToolbar editor={editorRef}/>\r\n            <ButtonPanel\r\n\r\n                locked={locked}\r\n                left={{\r\n                    onPress: () => {\r\n                        props.navigation.goBack();\r\n                    },\r\n                    \"text\": \"Cancel\"\r\n                }}\r\n                right={{\r\n                    onPress: async () => {\r\n\r\n\r\n                        setLocked(true);\r\n                        if (!postEntity.data.content || !postEntity.data.title) {\r\n                            toast.show(\"Please provide a title and content for your post\");\r\n                            setLocked(false);\r\n                        } else {\r\n                            try {\r\n                                //const { id: postId } = \r\n                                await Api.Post.extensions.create(postEntity.data);\r\n                                // Navigation.pop(props.componentId);\r\n                                // const posts = await getPosts([postId]);\r\n                                // screens.push(props.componentId, \"Post\",\r\n                                //     { passProps: { post: posts[0] } });\r\n                                props.navigation.goBack();\r\n\r\n                            } catch (ex: any) {\r\n                                toast.show(ex.message);\r\n                                setLocked(false);\r\n                            }\r\n                        }\r\n                    }\r\n                    ,\r\n                    \"text\": \"Create\"\r\n                }}\r\n            />\r\n        </KeyboardAvoidingView>\r\n\r\n    </View>\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { RootStackParamList } from '../navigation/pages'\r\nimport { NavigationProp, useNavigation } from \"@react-navigation/native\"\r\nimport { Alert, Image, ImageBackground, Linking, PixelRatio, Platform, Pressable, ScrollView, StyleSheet, Text, TouchableOpacity, View } from 'react-native'\r\nimport { flex, fonts, paddView, row, shadow, sizes } from '../style'\r\nimport { Api, Interface } from '@tradingpost/common/api'\r\nimport { Header, Subheader } from './Headers'\r\nimport { useWindowDimensions } from 'react-native'\r\nimport { useAppUser } from '../Authentication'\r\nimport { toFormatedDateTime } from '../utils/misc'\r\nimport { ProfileButton } from './ProfileButton'\r\n\r\nconst commentTotalVerticalMargin = sizes.rem1;\r\nconst commentTotalHorizontalMargin = sizes.rem2;\r\nconst commentSidePad = sizes.rem2;\r\nconst commentTotalBorder = 2;\r\nconst spaceOnSide = commentTotalHorizontalMargin + commentTotalBorder + commentSidePad\r\n\r\nexport function CommentView(props: {comment: Interface.ICommentPlus}) {\r\n    const { comment } = props;\r\n    const { loginState } = useAppUser()\r\n    \r\n    const nav = useNavigation<NavigationProp<RootStackParamList>>();\r\n    \r\n    return <View style={[{marginVertical: sizes.rem0_5 / 2}, ]}>\r\n                <View style={[{alignItems: 'center'}, props.comment.user_id === loginState?.appUser?.id ? { flexDirection: 'row'} : { flexDirection: 'row-reverse'}]}>\r\n                    <Pressable\r\n                        onPress={() => {\r\n                            if (props.comment.user_id)\r\n                                nav.navigate(\"Profile\", {\r\n                                    userId: props.comment.user_id\r\n                                } as any);\r\n                        }} style={[row, {\r\n                            alignItems: \"center\",\r\n                            overflow: \"hidden\",\r\n                            //borderBottomColor: \"#ccc\",\r\n                            //borderBottomWidth: 1,\r\n                            padding: sizes.rem1 / 2\r\n                        }]}>\r\n                        {\r\n                            <ProfileButton userId={comment.user_id}\r\n                                profileUrl={comment.profile_url || \"\"} size={48} />\r\n                        }\r\n                    </Pressable>\r\n                    <View style={{width: '80%', paddingBottom: 6}}>\r\n                        <View style={[shadow, { backgroundColor: \"white\", borderRadius: sizes.borderRadius * 4, borderColor: \"#ccc\", borderWidth: commentTotalBorder / 2, justifyContent: 'center', minHeight: 48 }]}>\r\n                            {/*<View style={[flex, { borderBottomWidth: 1, borderBottomColor: \"#ccc\", padding: sizes.rem0_5 }]}>\r\n                            </View>*/}\r\n                            {/*<Text style={{fontWeight: '500',padding: sizes.rem0_5, borderBottomWidth: 1, borderBottomColor: '#ccc'}}>\r\n                                {`@${comment.handle}`}\r\n                            </Text>*/}\r\n                            <Text style={{padding: sizes.rem0_5, fontSize: 14}}>\r\n                                {comment.comment}\r\n                            </Text>\r\n                        </View>\r\n                    </View>\r\n                </View>\r\n                <Text style={[{fontSize: fonts.medium / 2 , paddingHorizontal: sizes.rem1, color: '#9D9D9D'},  props.comment.user_id === loginState?.appUser?.id ? {} : {textAlign: 'right'}]}>\r\n                    {`@${comment.handle}   ${toFormatedDateTime(String(comment.created_at))}`}\r\n                </Text>\r\n           </View>\r\n}","import { Interface } from \"@tradingpost/common/api\";\r\nimport { useState } from \"react\";\r\nimport { Text } from 'react-native'\r\nimport { DataOrQuery, List } from \"./List\";\r\nimport { fonts, sizes } from \"../style\";\r\nimport { CommentView } from \"./CommentView\";\r\nimport { Section } from \"./Section\";\r\nimport React from \"react\";\r\n\r\nexport function CommentsList(props: {comments: Interface.ICommentPlus[]}) {\r\n    \r\n    return (\r\n    <Section title=\"Comments\" style={{flex: 1, backgroundColor: 'transparent',marginHorizontal: sizes.rem1 }}>\r\n        <List \r\n            getItemLayout={(items, index, sizeCache) => {\r\n                const curItem = items?.[index];\r\n                const length = 20;\r\n                const output = typeof curItem === \"object\" ? \r\n                        (sizeCache[index] ? \r\n                            sizeCache[index] : \r\n                            {index, \r\n                            offset: length * index, \r\n                            length: length }) : \r\n                    {index, \r\n                    offset: sizeCache[index - 1].offset + sizeCache[index - 1].length, \r\n                    length: 40 };\r\n                return output;\r\n            }}\r\n            key={\"id\" + String(props.comments.length)}\r\n            datasetKey={\"___\"}\r\n            data={props.comments}\r\n            keyExtractor={(item, index) => typeof item === \"string\" ? \"loadingtext\" : (index + \"_\" + item.id)}\r\n            preloadOffset={2}\r\n            renderItem={(item) => {\r\n                \r\n                if (typeof item.item === \"string\") {\r\n                    return <Text style={{ textAlign: \"center\", fontSize: fonts.large }}>Loading More...</Text>\r\n                }\r\n                else {\r\n                    return <CommentView key={item.index + \"_\" + item.item.id} comment={item.item} />\r\n                }\r\n            }}\r\n            noDataMessage={\"No Comments Available\"}\r\n            loadingItem={\"  \"}\r\n            />\r\n    </Section>)\r\n}","import React, { useEffect, useState } from \"react\";\r\nimport { Keyboard, View } from \"react-native\";\r\n//import { DashProps } from \"../layouts/DashboardLayout\";\r\nimport { flex } from \"../style\";\r\nimport { CommentIcon, SendIcon } from \"../images\";\r\nimport { Input } from \"@ui-kitten/components\";\r\nimport { PostView } from \"../components/PostView\";\r\nimport { Api, Interface } from \"@tradingpost/common/api\";\r\nimport { CommentsList } from \"../components/CommentList\";\r\nimport { KeyboardAvoidingInput } from \"../components/KeyboardAvoidingInput\";\r\nimport { AwaitedReturn } from \"../utils/misc\";\r\nimport { RootStackScreenProps } from \"../navigation/pages\";\r\n\r\nexport function PostScreen(props: RootStackScreenProps<\"PostScreen\">) {\r\n    //https://m.tradingpostapp.com/post?\r\n\r\n\r\n    const [post, setPost] = useState(props.route.params.post);\r\n\r\n    useEffect(() => {\r\n        if (!post) {\r\n            //lookup posts \r\n            Api.Post.extensions.feed({\r\n                page: 0,\r\n                postId: props.route.params.id\r\n            }).then((r) => {\r\n                setPost(r[0]);\r\n            }).catch(ex => {\r\n                console.error(ex);\r\n            })\r\n\r\n        }\r\n    }, [props.route.params.id, post])\r\n\r\n\r\n    const [postCommments, setPostComments] = useState<AwaitedReturn<typeof Api.Comment.extensions.postList>>([]);\r\n    const [newComment, setNewComment] = useState('');\r\n    const [commentAdded, setCommentAdded] = useState(0);\r\n    useEffect(() => {\r\n        if (post) {\r\n            Api.Comment.extensions.postList({ type: \"post\", id: post._source.id })\r\n                .then((r) => {\r\n                    const data = r.sort((a, b) => {\r\n                        const diff = (new Date(String(a.created_at))).valueOf() - (new Date(String(b.created_at))).valueOf()\r\n                        return diff\r\n                    })\r\n                    setPostComments(data);\r\n                })\r\n        }\r\n    }, [post])\r\n    useEffect(() => {\r\n        if (post)\r\n            Api.Comment.extensions.postList({ type: \"post\", id: post._source.id })\r\n                .then((r) => {\r\n                    const data = r.sort((a, b) => {\r\n                        const diff = (new Date(String(a.created_at))).valueOf() - (new Date(String(b.created_at))).valueOf()\r\n                        return diff\r\n                    })\r\n                    setPostComments(data);\r\n                })\r\n    }, [commentAdded, post])\r\n\r\n    return (<View style={{ height: \"100%\" }}>\r\n        {post && <PostView\r\n            post={post} />}\r\n        <CommentsList\r\n            comments={postCommments ? postCommments : []} />\r\n        <KeyboardAvoidingInput\r\n            value={newComment}\r\n            placeholder={'Leave your comment'}\r\n            rightIcon={(props: any) => <SendIcon height={24}\r\n                width={24}\r\n                style={{ height: 24, width: 24, alignContent: 'center' }}\r\n            />\r\n            }\r\n            setValue={setNewComment}\r\n            displayButton={true}\r\n            numLines={1}\r\n            item_id={post?._source.id}\r\n            clicked={[commentAdded, setCommentAdded]}\r\n            onClick={(r: any, s: any, t: any) => {\r\n\r\n                if (r.length && post)\r\n                    Api.Comment.insert({ user_id: post._source.user.id, related_type: 'post', comment: r, related_id: t })\r\n                Keyboard.dismiss()\r\n                s('')\r\n            }}\r\n        />\r\n    </View>)\r\n\r\n}","import React from \"react\"\r\nimport { Table } from \"../components/Table\"\r\nimport { View } from 'react-native'\r\nimport { Text } from '@ui-kitten/components'\r\nimport { AllPages, TabScreenProps } from \"../navigation\"\r\nimport { NavigationProp, useNavigation } from \"@react-navigation/native\"\r\nimport { Link } from \"../components/Link\"\r\nimport { flex, paddView, paddViewWhite } from \"../style\"\r\nimport { ElevatedSection } from \"../components/Section\"\r\n\r\n\r\nexport function LimitedTable<T>(props: {\r\n    maxPage: number,\r\n    listKey: string,\r\n    title: string,\r\n    tableProps: Omit<Parameters<typeof Table<T>>[0], \"maxPage\">\r\n}) {\r\n    const nav = useNavigation();\r\n    return <View style={[{}]}>\r\n        <View>\r\n            <Table {...props.tableProps} listKey={props.listKey} maxPage={props.maxPage} />\r\n        </View>\r\n        <Link\r\n            style={{\r\n                marginLeft: \"auto\"\r\n            }}\r\n            onPress={() => {\r\n                nav.navigate(\"TableModal\", {\r\n                    tableProps: props.tableProps as any,\r\n                    title: props.title\r\n                })\r\n            }}>View All</Link>\r\n    </View>\r\n}\r\n\r\nexport function TableModalScreen<T>(props: TabScreenProps<{ title: string, tableProps: Parameters<typeof Table<T>>[0] }>) {\r\n    return (\r\n        props.route?.params?.tableProps ? \r\n        <View style={paddView}>\r\n            <ElevatedSection title={props.route.params.title} >\r\n                <Table {...props.route?.params?.tableProps} />\r\n            </ElevatedSection>\r\n        </View> : \r\n        <Text>Error</Text>\r\n        )\r\n}","import React, { useEffect, useState } from \"react\"\r\nimport { View } from \"react-native\"\r\nimport { useAppUser } from \"../Authentication\"\r\nimport { ElevatedSection } from \"../components/Section\"\r\nimport { Text } from '@ui-kitten/components'\r\nimport { RootStackScreenProps } from \"../navigation/pages\"\r\nimport { Link } from \"../components/Link\"\r\nimport { Api } from '@tradingpost/common/api'\r\nimport { ButtonPanel } from \"../components/ScrollWithButtons\"\r\nimport { paddView, sizes } from \"../style\"\r\nimport { useToast } from \"react-native-toast-notifications\"\r\nimport { useLinkTo } from \"@react-navigation/native\"\r\n\r\n\r\nexport const VerificationScreen = (props: RootStackScreenProps<\"VerifyAccount\">) => {\r\n    const { loginState, signIn } = useAppUser();\r\n    const verificationToken = props.route.params?.token;\r\n    const toast = useToast();\r\n    const linkTo = useLinkTo();\r\n    console.log(\"I'm on the verification screennnn....\")\r\n    const [imVerified, setImVerified] = useState(false);\r\n    useEffect(() => {\r\n        if (imVerified) {\r\n            if (loginState?.loginResult?.verified)\r\n                linkTo(\"/dash/feed\");\r\n            else {\r\n                toast.show(\"You account is still unverified. Please check your email for details.\")\r\n                setImVerified(false);\r\n            }\r\n        }\r\n    }, [imVerified, loginState?.loginResult])\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            if (verificationToken && !loginState?.appUser) {\r\n                if (loginState?.authToken) {\r\n                    try {\r\n                        console.log(\"SIGNING IN.....\");\r\n                        await signIn(\"\", loginState.authToken);\r\n                        setImVerified(true);\r\n\r\n                    } catch (ex: any) {\r\n                        console.log(ex.message);\r\n                    }\r\n                } else {\r\n                    console.log(\"I CANT FIND THE TOKEN.....\");\r\n                    props.navigation.replace(\"Root\", {});\r\n                }\r\n            }\r\n        })()\r\n    }, [\r\n        loginState?.authToken,\r\n        verificationToken, loginState?.appUser\r\n    ])\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n\r\n            if (verificationToken && loginState?.appUser) {\r\n                try {\r\n\r\n                    await Api.User.extensions.validateUser({\r\n                        verificationToken\r\n                    })\r\n                    if (loginState?.authToken)\r\n                        await signIn(\"\", loginState?.authToken);\r\n\r\n\r\n                } catch (ex: any) {\r\n                    toast.show(ex.message);\r\n                }\r\n            }\r\n        })()\r\n    }, [verificationToken, toast, loginState?.authToken, loginState?.appUser, imVerified])\r\n    return <View style={paddView}>\r\n        <ElevatedSection title=\"Verify Your Email\">\r\n            <Text style={{ textAlign: \"center\", paddingVertical: sizes.rem1 }}>{loginState?.appUser?.email}</Text>\r\n            <ButtonPanel\r\n                left={{\r\n                    onPress: async () => {\r\n                        if (loginState?.authToken)\r\n                            await signIn(\"\", loginState?.authToken);\r\n                        linkTo(\"/dash/feed\")\r\n                        //props.navigation.navigate(\"Dash\");\r\n                    },\r\n                    text: \"Skip\"\r\n                }}\r\n                right={{\r\n                    onPress: async () => {\r\n                        //try auth signin\r\n                        if (loginState?.authToken)\r\n                            await signIn(\"\", loginState?.authToken);\r\n                        setImVerified(true);\r\n                    },\r\n                    text: \"I'm Verified\"\r\n                }}\r\n            />\r\n            <Link\r\n                style={{ textAlign: \"center\", paddingVertical: sizes.rem1 }}\r\n                onPress={async () => {\r\n                    try {\r\n                        await Api.User.extensions.sendEmailValidation();\r\n                        toast.show(\"Verification Email has been sent\")\r\n                    } catch (ex: any) {\r\n                        console.log(ex.message);\r\n                    }\r\n                }}>[Resend Verification Email]</Link>\r\n            <Text>{props.route.params?.token}</Text>\r\n        </ElevatedSection>\r\n    </View>\r\n}","import React, { ReactNode } from \"react\";\r\nimport { View, ScrollView, FlatList } from \"react-native\";\r\nimport { AppColors } from \"../constants/Colors\";\r\n\r\nimport { flex } from \"../style\";\r\nimport { useIsKeyboardVisible } from \"../utils/hooks\";\r\nimport { PrimaryButton } from \"./PrimaryButton\";\r\nimport { SecondaryButton } from \"./SecondaryButton\";\r\n\r\nexport function VirtualListWithButtons(props: { children?: ReactNode, buttons?: ButtonPanelProps, fillHeight?: boolean }) {\r\n    const { isKeyboardVisible } = useIsKeyboardVisible();\r\n    const listChildren = props.children;\r\n    return <View style={[flex,]} >\r\n        <View style={[flex, { backgroundColor: AppColors.background }]} >\r\n            <FlatList nestedScrollEnabled contentContainerStyle={props.fillHeight ? { maxHeight: \"100%\", height: \"100%\"} : {}}\r\n                data={[\r\n                    <View style={[!isKeyboardVisible ? {display: 'flex'} : {display: 'none'}, { height: 0 }]} ></View>,\r\n                    <View>{listChildren}</View>\r\n                ]}\r\n                renderItem={(info) => {\r\n                    return info.item;\r\n                }}\r\n            >\r\n                {/* This is here to force layout of the content. Seems like a but with enxted scrollview content */}\r\n                \r\n                \r\n            </FlatList>\r\n        </View>\r\n        {props.buttons && <ButtonPanel {...props.buttons} />}\r\n    </View>\r\n}\r\n\r\nexport type ButtonPanelProps = {\r\n    locked?: boolean,\r\n    left?: {\r\n        text: string,\r\n        onPress: () => void\r\n    },\r\n    right: {\r\n        text: string,\r\n        onPress: () => void\r\n    }\r\n}\r\nexport function ButtonPanel(props: ButtonPanelProps) {\r\n    return <View style={[{ borderTopColor: \"#ccc\", borderTopWidth: 1, flexDirection: \"row\", \r\n    paddingTop: 8,\r\n     paddingBottom: 8, \r\n     \r\n     justifyContent: \"space-evenly\", zIndex: 1000 }]}>\r\n        {props.left && <SecondaryButton style={{ width: \"48%\" }} onPress={props.left.onPress} disabled={props.locked} >{props.left.text}</SecondaryButton>}\r\n        <PrimaryButton style={{ width: props.left ? \"48%\" : \"96%\" }} onPress={props.right.onPress} disabled={props.locked} >{props.right.text}</PrimaryButton>\r\n    </View>\r\n}\r\n","import { useNavigation } from \"@react-navigation/native\";\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { sleep } from \"@tradingpost/common/utils/sleep\";\r\nimport { Button, } from \"@ui-kitten/components\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { View, Text } from \"react-native\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { ButtonGroup } from \"../components/ButtonGroup\";\r\nimport { ScrollWithButtons } from \"../components/ScrollWithButtons\";\r\nimport { ElevatedSection, Section } from \"../components/Section\";\r\nimport { SwitchField } from \"../components/SwitchField\";\r\nimport { TextField } from \"../components/TextField\";\r\nimport { VirtualListWithButtons } from \"../components/VirtualListWithButtons\";\r\nimport { useWatchlistPicker, WatchlistPicker } from \"../components/WatchlistPicker\";\r\nimport { setValue } from \"../lds\";\r\nimport { DashScreenProps, TabScreenProps } from \"../navigation\";\r\nimport { flex, paddView, paddViewWhite, sizes } from \"../style\";\r\ntype WLTypes = \"public\" | \"primary\" | \"private\";\r\n\r\nexport const WatchlistEditorScreen = (props: TabScreenProps<{ watchlistId?: number }>) => {\r\n    const pickerProps = useWatchlistPicker();\r\n    const [name, setName] = useState(\"\");\r\n    const [note, setNote] = useState<string>();\r\n    const [type, setWatchlistType] = useState<WLTypes>(\"public\");\r\n\r\n    const watchlistId = props.route?.params?.watchlistId;\r\n    //TODO: HACK need to clean this u\r\n    const nav = useNavigation()\r\n    const [magic, setMagic] = useState(true);\r\n    const toast = useToast();\r\n    useEffect(() => {\r\n        (async ()=> {\r\n            const converter = pickerProps.symbolConverter.current;\r\n            if (watchlistId && converter){\r\n                if (watchlistId > 0) {\r\n                    Api.Watchlist.get(watchlistId).then((watchlist) => {\r\n                        //TODO: need to deal with settings for primary watchlist\r\n                        setName(watchlist.name);\r\n                        setWatchlistType(watchlist.type as WLTypes);\r\n                        setNote(watchlist.note);\r\n                        const selectedItems = converter(watchlist.items.map((s) => s.symbol));\r\n                        pickerProps.onSelectedItemschanged(selectedItems);\r\n    \r\n                        //TODO:: need to cache items notes since this is an delete and insert style update\r\n    \r\n                    }).catch((ex) => {\r\n                        toast.show(ex.message);\r\n                    })\r\n                }\r\n                else {\r\n                    setName(\"Primary Watchlists\")\r\n                    setWatchlistType(\"primary\");\r\n                }\r\n            }\r\n        })()\r\n        \r\n    }, [watchlistId, Boolean(pickerProps.symbolConverter.current)])\r\n\r\n\r\n    return <View style={paddView}>\r\n        <VirtualListWithButtons\r\n            buttons={{\r\n                right: {\r\n                    text: props.route?.params?.watchlistId ? \"Update Watchlist\" : \"Create Watchlist\",\r\n                    onPress: async () => {\r\n                        if (name && pickerProps.selectionConverter.current) {\r\n                            const items = pickerProps.selectionConverter.current(pickerProps.selectedItems);\r\n                            if (items.length < 2)\r\n                                toast.show(\"Please select at least 2 securities\");\r\n                            else {\r\n                                const watchlistData = {\r\n                                    items: items.map(i => ({\r\n                                        symbol: i.symbol,\r\n                                        date_added: new Date()\r\n                                    })),\r\n                                    name: name,\r\n                                    note,\r\n                                    type: type\r\n                                }\r\n\r\n                                if (props.route?.params?.watchlistId && props.route.params.watchlistId > 0) await Api.Watchlist.update(props.route.params.watchlistId, watchlistData)\r\n                                else await Api.Watchlist.insert(watchlistData)\r\n\r\n                                nav.goBack()\r\n                            }\r\n                        }\r\n                        else {\r\n                            toast.show(\"Please name your watchlist\");\r\n                        }\r\n                    }\r\n                }\r\n            }}>\r\n            <View>\r\n                {type !== \"primary\" &&\r\n                    <ElevatedSection title={(props.route?.params?.watchlistId ? \"Edit\" : \"Create\") + \" Watchlist\"} >\r\n                        <View style={{ flexDirection: \"column\", margin: sizes.rem0_5 }}>\r\n                            <ButtonGroup value={type} onValueChange={(value) => {\r\n                                setWatchlistType(value);\r\n                            }}\r\n                                items={[{ label: \"Public\", value: \"public\" }, { label: \"Private\", value: \"private\" }]}\r\n                            />\r\n                            <TextField value={name} onChangeText={(v) => setName(v || \"\")} placeholder=\"Watchlist Name\" style={{ marginBottom: sizes.rem0_5 }} />\r\n                            <TextField value={note} onChangeText={(v) => setNote(v || \"\")} placeholder=\"Watchlist Note\" style={{}} />\r\n                        </View>\r\n                    </ElevatedSection>\r\n                }\r\n                <ElevatedSection style={{ height: \"100%\" }} title={type === \"primary\" ? \"Quick Watchlist\" : \"Watchlist Securities\"}>\r\n                    <WatchlistPicker {...pickerProps} securitiesLoaded={() => {\r\n                        console.log(\"Securities are available...\");\r\n                        setMagic(m => !m)\r\n                    }} />\r\n                </ElevatedSection>\r\n            </View>\r\n        </VirtualListWithButtons>\r\n    </View >\r\n\r\n}\r\n","import { Api } from \"@tradingpost/common/api\";\r\nimport { AllWatchlists, IWatchlistGet, IWatchlistList } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport { Pressable, ScrollView, TextStyle, View } from \"react-native\";\r\nimport { AddButton, EditButton } from \"../components/AddButton\";\r\nimport { Avatar, Icon, Text } from '@ui-kitten/components'\r\nimport { ElevatedSection, Section, Subsection } from \"../components/Section\";\r\nimport { WatchlistItemRenderItem } from '../components/WatchlistItemRenderItem'\r\nimport { Table } from \"../components/Table\";\r\nimport { DataOrQuery } from '../components/List'\r\n//import { DashScreenProps, TabScreenProps } from \"../navigation\";\r\nimport { flex, fonts, paddView, sizes } from \"../style\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { NoteEditor, SecPressable, useMakeSecurityFields, useWatchlistItemColumns } from \"./WatchlistViewerScreen\";\r\nimport { AwaitedReturn, toDollarsAndCents, toPercent, toPercent2, toThousands } from \"../utils/misc\";\r\nimport { WatchlistSection } from \"../components/WatchlistSection\";\r\nimport Theme from '../theme-light.json'\r\nimport { FlatList } from \"react-native-gesture-handler\";\r\nimport { List } from \"../components/List\"\r\nimport { useFocusEffect, useNavigation } from \"@react-navigation/native\";\r\nimport { useSecuritiesList } from \"../SecurityList\";\r\nimport { Header } from \"../components/Headers\";\r\nimport { AppColors } from \"../constants/Colors\";\r\n\r\nexport const WatchlistScreen = (props: any) => {\r\n    const nav = useNavigation();\r\n    const [watchlists, setWatchlists] = useState<AllWatchlists>()\r\n    const [shownMap, setShownMap] = useState<Record<string, boolean>>({})\r\n    const [quickWatchlist, setQuickWatchlist] = useState<IWatchlistGet>()\r\n    const toast = useToast();//const [trades, setTrades] = useState<AwaitedReturn<typeof Api.User.extensions.getTrades>>();\r\n    const [focus, setFocus] = useState(false);\r\n    const scrollRef = useRef<FlatList>(null);\r\n    useFocusEffect(useCallback(()=> {\r\n        \r\n        (async () => {\r\n            try {\r\n                const lists = await Api.Watchlist.extensions.getAllWatchlists();\r\n\r\n                if (lists.quick.id) {\r\n                    setQuickWatchlist(await Api.Watchlist.get(lists.quick.id));\r\n                }\r\n                else {\r\n                    setQuickWatchlist({\r\n                        id: 0,\r\n                        items: [],\r\n                        name: \"\",\r\n                        saved_by_count: 0,\r\n                        type: \"primary\",\r\n                        user: [],\r\n                        is_saved: false\r\n                    })\r\n                }\r\n                setFocus((f) => !f)\r\n                setWatchlists(lists);\r\n\r\n            }\r\n            catch (ex: any) {\r\n                toast.show(ex.message);\r\n            }\r\n        })()\r\n        \r\n    },[]))\r\n\r\n    const { columns: watchlistItemColumns } = useWatchlistItemColumns(true)\r\n    const { securities: { bySymbol, byId } } = useSecuritiesList();\r\n    const hideEmptyNote = false;\r\n    return <View style={[paddView]}>\r\n        <FlatList\r\n            listKey=\"top_level_watchlist\"\r\n            data={[\r\n                <View>\r\n                    <View style={{flex: 1, flexDirection: 'row'}}>\r\n                        <Header key={\"quick_watch\"} text=\"Quick Watch\" style={{flex: 1}}/>\r\n                        <View style={{marginHorizontal: 6}}> \r\n                            {  \r\n                                watchlists?.quick.id ?\r\n                                    <EditButton\r\n                                        height={24}\r\n                                        width={24} \r\n                                        onPress={() => {\r\n                                            nav.navigate(\"WatchlistEditor\", {\r\n                                                watchlistId: watchlists?.quick.id\r\n                                            })\r\n                                    }} /> :\r\n                                    <AddButton\r\n                                        height={24}\r\n                                        width={24} \r\n                                        onPress={() => {\r\n                                            nav.navigate(\"WatchlistEditor\", {\r\n                                                watchlistId: -1\r\n                                            })\r\n                                    }} />\r\n                                }\r\n                        </View>\r\n                    </View>\r\n                \r\n                <List\r\n                    datasetKey={`${focus}`}\r\n                    listKey={`quick_watch_list${focus}`}\r\n                    loadingMessage={\" \"}\r\n                    noDataMessage={\" \"}\r\n                    loadingItem={undefined}\r\n                    numColumns={2}\r\n                    data={quickWatchlist?.items}\r\n                    renderItem={(item) => {                        \r\n                        return (\r\n                            <WatchlistItemRenderItem\r\n                                item={item}\r\n                                bySymbol={bySymbol}\r\n                                byId={byId}\r\n                                hideEmptyNote={hideEmptyNote}\r\n                                setShownMap={setShownMap}\r\n                                shownMap={shownMap}\r\n                                watchlist={quickWatchlist}\r\n                                    />\r\n                        )\r\n                    }}\r\n                />\r\n            </View>,\r\n            <WatchlistSection\r\n                datasetKey={`my_watchlist_${focus}`}\r\n                title=\"My Watchlists\"\r\n                key={`my_watchlist${focus}`}\r\n                watchlists={watchlists?.created}\r\n                showAddButton\r\n                hideNoteOnEmpty\r\n            />,\r\n            <WatchlistSection\r\n                datasetKey={`shared_watchlist_${focus}`}\r\n                title=\"Shared Watchlists\"\r\n                key={`shared_watchlist${focus}`}\r\n                watchlists={watchlists?.saved}\r\n                shared\r\n            />\r\n            ]}\r\n            renderItem={(info) => {\r\n                return info.item;\r\n            }}\r\n            ref={scrollRef} contentContainerStyle={[{ paddingTop: 0}]} nestedScrollEnabled         \r\n\r\n            >\r\n        </FlatList>\r\n    </View >\r\n\r\n}","import React, { useEffect, useState } from \"react\";\r\nimport { ScrollView, useWindowDimensions, View, Text } from \"react-native\";\r\nimport { Api, Interface } from \"@tradingpost/common/api\";\r\nimport { elevated, flex, fonts, sizes } from \"../style\";\r\nimport { ClimbingMountain, Studying, Debate, Analyze } from \"../images\";\r\nimport { AppColors } from \"../constants/Colors\";\r\nimport { ExitButton } from \"../components/AddButton\";\r\nimport { useLinkTo } from \"@react-navigation/native\";\r\nimport { useData } from \"../lds\";\r\nimport { SecondaryButton } from \"../components/SecondaryButton\";\r\n\r\nexport function AppInformationScreen(props: any) {\r\n    const [sliderState, setSliderState] = useState({ currentPage: 0 });\r\n    let { width, height } = useWindowDimensions();\r\n    const { value: result, setValue: setResult } = useData('loginResult')\r\n    const linkTo = useLinkTo<any>();\r\n    const setSliderPage = (event: any) => {\r\n        const { currentPage } = sliderState;\r\n        const { x } = event.nativeEvent.contentOffset;\r\n        const indexOfNextScreen = Math.floor(x / width);\r\n        if (indexOfNextScreen !== currentPage) {\r\n            setSliderState({\r\n                ...sliderState,\r\n                currentPage: indexOfNextScreen,\r\n            });\r\n        }\r\n    };\r\n    const paragraphSize = height >= 760 ? fonts.medium : fonts.small\r\n    const { currentPage: pageIndex } = sliderState;\r\n\r\n    return <View style={flex}>\r\n        <View style={{ zIndex: 1, position: 'absolute', top: 30, left: 10, flexDirection: 'row', alignItems: 'center' }}>\r\n            <ExitButton height={36} width={36} color={'#708090'} style={{ height: 36, width: 36, }}\r\n                onPress={() => {\r\n                    if (result) {\r\n                        if (result.verified)\r\n                            linkTo('/dash/feed')\r\n                        else\r\n                            linkTo('/verifyaccount');\r\n                    }\r\n                    else {\r\n                        linkTo('/login')\r\n                    }\r\n                }} />\r\n            <Text style={{ color: '#708090', marginLeft: 10 }}>{\"Exit Introduction\"}</Text>\r\n        </View>\r\n        <ScrollView\r\n            style={flex}\r\n            horizontal={true}\r\n            scrollEventThrottle={16}\r\n            pagingEnabled={true}\r\n            showsHorizontalScrollIndicator={false}\r\n            onScroll={(event: any) => {\r\n                setSliderPage(event);\r\n            }}\r\n        >\r\n            <View style={{ width, height, justifyContent: 'space-between' }}>\r\n                <ClimbingMountain height={'45%'} width={'98%'} style={{ marginTop: '5%', marginHorizontal: '1%', height: '45%', width: '100%' }} />\r\n                <View style={[elevated, {\r\n                    marginHorizontal: sizes.rem1_5,\r\n                    height: '50%',\r\n                    justifyContent: 'flex-start',\r\n                    alignItems: 'center',\r\n                    paddingVertical: sizes.rem1\r\n                    //marginVertical: 30,\r\n                }]}>\r\n                    <View style={{ justifyContent: 'center', alignItems: 'center', height: 65, }}>\r\n                        <Text style={{ fontSize: fonts.large, fontFamily: 'K2D', textAlign: 'center', color: AppColors.primary }}>\r\n                            {\"Customized Feed\"}\r\n                        </Text>\r\n                    </View>\r\n\r\n                    <Text style={{ padding: sizes.rem1, fontSize: paragraphSize, fontFamily: 'K2D', textAlign: 'center', }}>\r\n                        {\"Stock market research from every corner of the internet, all in one place.\\n\\nContent from Twitter, Substack, Spotify and more curated for you based on stocks you own and are interested in.\"}\r\n                    </Text>\r\n                </View>\r\n            </View>\r\n            <View style={{ width, height, justifyContent: 'space-between' }}>\r\n                <Studying height={'37%'} width={'98%'} style={{ marginTop: '15%', marginHorizontal: '1%', height: '37%', width: '100%' }} />\r\n                <View style={[elevated, {\r\n                    marginHorizontal: sizes.rem1_5,\r\n                    height: '50%',\r\n                    justifyContent: 'flex-start',\r\n                    alignItems: 'center',\r\n                    paddingVertical: sizes.rem1\r\n                    //marginVertical: 30,\r\n                }]}>\r\n                    <View style={{ justifyContent: 'center', alignItems: 'center', height: 65, }}>\r\n                        <Text style={{ fontSize: fonts.large, fontFamily: 'K2D', textAlign: 'center', color: AppColors.primary }}>\r\n                            {\"Follow Expert\\nTraders and Investors\"}\r\n                        </Text>\r\n                    </View>\r\n                    <Text style={{ padding: sizes.rem1, fontSize: paragraphSize, fontFamily: 'K2D', textAlign: 'center', }}>\r\n                        {\"Subscribe to experts on the platform to learn how they invest and trade.\\n\\nGain access to articles, charts, trades, and watchlists so you can grow your skills and your wealth.\"}\r\n                    </Text>\r\n                </View>\r\n            </View>\r\n            <View style={{ width, height, justifyContent: 'space-between' }}>\r\n                <Debate height={'45%'} width={'98%'} style={{ marginTop: '0%', marginHorizontal: '1%', height: '45%', width: '100%' }} />\r\n                <View style={[elevated, {\r\n                    marginHorizontal: sizes.rem1_5,\r\n                    height: '50%',\r\n                    justifyContent: 'flex-start',\r\n                    alignItems: 'center',\r\n                    paddingVertical: sizes.rem1\r\n                    //marginVertical: 30,\r\n                }]}>\r\n                    <View style={{ justifyContent: 'center', alignItems: 'center', height: 65, }}>\r\n                        <Text style={{ fontSize: fonts.large, fontFamily: 'K2D', textAlign: 'center', color: AppColors.primary }}>\r\n                            {\"Connect Your\\nInvestment Accounts\"}\r\n                        </Text>\r\n                    </View>\r\n                    <Text style={{ padding: sizes.rem1, fontSize: paragraphSize, fontFamily: 'K2D', textAlign: 'center', }}>\r\n                        {\"Connect your portfolio to TradingPost and control who can view your articles, charts, trades, and watchlists.\\n\\nMake it public, share with friends and family, or build a paying subscriber base.\"}\r\n                    </Text>\r\n                </View>\r\n            </View>\r\n            <View style={{ width, height, justifyContent: 'space-between' }}>\r\n                <Analyze height={'45%'} width={'100%'} style={{ marginTop: '5%', marginHorizontal: 2, height: '45%', width: '100%' }} />\r\n                <View style={[elevated, {\r\n                    marginHorizontal: sizes.rem1_5,\r\n                    height: '50%',\r\n                    justifyContent: 'flex-start',\r\n                    alignItems: 'center',\r\n                    paddingVertical: sizes.rem1\r\n                    //marginVertical: 30,\r\n                }]}>\r\n                    <View style={{ justifyContent: 'center', alignItems: 'center', height: 65, }}>\r\n                        <Text style={{ fontSize: fonts.large, fontFamily: 'K2D', textAlign: 'center', color: AppColors.primary }}>\r\n                            {\"Search for Content\\nthat Matters to You\"}\r\n                        </Text>\r\n                    </View>\r\n                    <Text style={{ padding: sizes.rem1, fontSize: paragraphSize, fontFamily: 'K2D', textAlign: 'center', }}>\r\n                        {\"Explore TradingPost's powerful search tool that utilizes cutting edge tech from industry leader ElasticSearch.\"}\r\n                    </Text>\r\n                    <SecondaryButton style={[result ? { display: 'none' } : { display: 'flex' }, { alignSelf: \"center\", width: \"65%\", height: '15%', marginTop: '8%' }]}\r\n                        onPress={() => {\r\n                            linkTo(\"/create/logininfo\");\r\n                        }}>\r\n                        {\"Create an Account\"}\r\n                    </SecondaryButton>\r\n                </View>\r\n            </View>\r\n        </ScrollView>\r\n        <View style={{\r\n            position: 'relative',\r\n            bottom: '10%',\r\n            left: 0,\r\n            right: 0,\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n            flexDirection: 'row',\r\n        }}\r\n        >\r\n            {Array.from(Array(4).keys()).map((key, index) => (\r\n                <View style={[{\r\n                    height: 10,\r\n                    width: 10,\r\n                    borderRadius: 10 / 2,\r\n                    backgroundColor: AppColors.secondary,\r\n                    marginLeft: 10,\r\n                    opacity: pageIndex === index ? 1 : 0.3\r\n                }]}\r\n                    key={index}\r\n                />\r\n            ))}\r\n        </View>\r\n    </View>\r\n}","import React, { useEffect, useState, useMemo, useRef } from \"react\"\r\nimport { View, Text, Animated, Pressable, Image } from \"react-native\"\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { openBrowserAsync } from 'expo-web-browser';\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { elevated, flex, fonts, paddView, paddViewWhite, row, sizes } from \"../style\"\r\nimport { ElevatedSection, Section, Subsection } from \"../components/Section\"\r\nimport { Bank, IBKR, RobinhoodLogo } from '../images'; \r\nimport { Header, Subheader } from \"../components/Headers\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\n\r\n\r\nexport function BrokeragePickerScreen() {\r\n    const nav = useNavigation();\r\n    const opacityAnim = useRef(new Animated.Value(0)).current;\r\n    const [accounts, setAccounts] = useState<Awaited<ReturnType<typeof Api.User.extensions.getBrokerageAccounts>>>()\r\n    const intervalRef = useRef<any>();\r\n\r\n    const openLink = async () => {\r\n        await Api.User.extensions.generateBrokerageLink(undefined).then(({ link }) => {\r\n            setLink(link)\r\n        })\r\n        const browserName = \"finicity_auth\";\r\n        await openBrowserAsync(brokerLink, { \"windowName\": browserName });\r\n        clearInterval(intervalRef.current);\r\n\r\n        intervalRef.current = setInterval(async () => {\r\n            console.log(\"WTF\");\r\n            if (await AsyncStorage.getItem(\"auth-finicity-code\")) {\r\n                console.log(\"CODE HAS BEEN FOUND\");\r\n                setAccounts(await Api.User.extensions.getBrokerageAccounts())\r\n            }\r\n        }, 5000)\r\n    }\r\n    //cleanup\r\n    useEffect(() => {\r\n        AsyncStorage.removeItem(\"auth-finicity-code\");\r\n        return () => {\r\n            clearInterval(intervalRef.current);\r\n            AsyncStorage.removeItem(\"auth-finicity-code\");\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n    const [brokerLink, setLink] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        Api.User.extensions.getBrokerageAccounts().then((r) => {\r\n            setAccounts(r);\r\n        })\r\n    }, [])\r\n\r\n\r\n    return (<View style={flex}>\r\n    <View style={[flex, {margin: sizes.rem1, justifyContent: 'center'}]}>\r\n        <View style={{marginBottom: 10}}>\r\n            <Header text=\"Choose your Brokerage\" />\r\n        </View>\r\n        <View style={{flex: 0.3, flexDirection: 'row'}}>\r\n            <Pressable style={{flex: 1}} onPress={()=> {\r\n               nav.navigate(\"IbkrInfo\")\r\n                }}>\r\n                <ElevatedSection style={{justifyContent: 'center', flex: 1, marginRight: sizes.rem1 / 2}} title=\"\">\r\n                    <Subheader text='Interactive Brokers' style={{ textAlign: 'center', marginBottom: 10, color: 'black'}} />\r\n                    <View style={{borderRadius: 20, overflow: 'hidden', aspectRatio: 1, height: '75%', justifyContent: 'center', alignSelf: 'center'}}>\r\n                        <IBKR style={{}}  height={\"100%\"} width={'100%'}/>\r\n                    </View>\r\n                </ElevatedSection>\r\n            </Pressable>\r\n            <Pressable style={{flex: 1 }} onPress={()=> {\r\n                nav.navigate(\"RobinhoodLogin\")\r\n            }}>\r\n                <ElevatedSection style={{justifyContent: 'center', flex: 1, marginLeft: sizes.rem1 / 2}} title=\"\">\r\n                    <Subheader text='Robinhood' style={{ textAlign: 'center', marginBottom: 10, color: 'black'}} />\r\n                    <View style={{borderRadius: 20, overflow: 'hidden', aspectRatio: 1, height: '75%', justifyContent: 'center', alignSelf: 'center'}}>\r\n                        <RobinhoodLogo style={{}}  height={\"100%\"} width={'100%'}/>\r\n                    </View>\r\n                </ElevatedSection>\r\n            </Pressable>\r\n        </View>\r\n        <View style={{ flex: 0.5}}>\r\n            <Pressable style={{flex: 1}} onPress={()=> {\r\n                openLink();\r\n            }}>\r\n                <ElevatedSection style={{justifyContent: 'center', flex: 0.5}} title=\"\">\r\n                    <Subheader text='All other brokerages' style={{ textAlign: 'center',marginBottom: 0,  color: 'black'}} />\r\n                    <Text style={{ textAlign: 'center', marginBottom: 10}}>\r\n                        {\"(Finicity, a Mastercard Company)\"}\r\n                    </Text>\r\n                    <Bank height={\"70%\"} />\r\n                </ElevatedSection>\r\n            </Pressable>\r\n        </View>\r\n        </View>\r\n    </View>)\r\n\r\n}","import React, {useEffect, useState, useMemo, useRef} from \"react\"\r\nimport {View, Animated, Pressable, Linking} from \"react-native\"\r\nimport {Api, Interface} from \"@tradingpost/common/api\"\r\n//import { LinkBrokerageComponent } from \"../components/LinkBrokerageComponent\";\r\nimport {elevated, flex, fonts, paddView, paddViewWhite, row, sizes} from \"../style\"\r\nimport {ElevatedSection, Section, Subsection} from \"../components/Section\"\r\nimport {Autocomplete, AutocompleteItem, Button, Icon, IndexPath, Text, Layout} from \"@ui-kitten/components\"\r\nimport {AddButton} from \"../components/AddButton\";\r\nimport {useIsKeyboardVisible, useReadonlyEntity} from \"../utils/hooks\";\r\nimport {ButtonPanel, ScrollWithButtons} from \"../components/ScrollWithButtons\";\r\nimport {getHivePool} from \"@tradingpost/common/db\";\r\nimport {IBKR} from \"../images\"\r\nimport {useNavigation} from \"@react-navigation/native\"\r\nimport {ScrollView} from \"react-native-gesture-handler\"\r\n\r\n\r\nexport function IbkrInfoScreen(props: any) {\r\n    const nav = useNavigation();\r\n    const [acText, setAcText] = useState('')\r\n    let [submittedText, setSubmittedText] = useState('')\r\n    //const [accountIds, setAccountIds] = useState<string[]>([]);\r\n\r\n    const accountIds = useReadonlyEntity<{ ids: string[] }>({\r\n        ids: []\r\n    })\r\n    useEffect(() => {\r\n        (async () => {\r\n            if (submittedText === '') {\r\n                return\r\n            }\r\n\r\n            accountIds.update({ids: [...accountIds.data.ids, submittedText]});\r\n            console.log('use effect')\r\n            console.log(accountIds)\r\n            setSubmittedText('')\r\n        })()\r\n\r\n    }, [submittedText])\r\n    const {isKeyboardVisible} = useIsKeyboardVisible();\r\n    return (\r\n\r\n        <View style={[flex, {margin: sizes.rem1}]}>\r\n            <View style={{\r\n                borderRadius: 20,\r\n                overflow: 'hidden',\r\n                aspectRatio: 1,\r\n                height: '15%',\r\n                justifyContent: 'center',\r\n                alignSelf: 'center'\r\n            }}>\r\n                <IBKR height={\"100%\"} width={'100%'}/>\r\n            </View>\r\n            <View style={{marginVertical: 20}}>\r\n                <Text>\r\n                    {instructions}\r\n                </Text>\r\n            </View>\r\n            <View>\r\n                <Autocomplete\r\n                    value={acText || \"\"}\r\n                    onChangeText={setAcText}\r\n                    placeholder=\"Account Ids\"\r\n                    placement=\"bottom\"\r\n                    onSubmitEditing={() => {\r\n                        console.log('button press')\r\n                        setSubmittedText(acText)\r\n                        setAcText('')\r\n\r\n                    }}\r\n\r\n                    accessoryRight={\r\n                        (props) => <AddButton\r\n                            onPress={() => {\r\n                                console.log('button press')\r\n                                setSubmittedText(acText)\r\n                                setAcText('')\r\n\r\n                            }}\r\n\r\n                            height={(props?.style as any)?.height * 1.5}\r\n                            width={(props?.style as any)?.width * 1.5}\r\n\r\n                        />\r\n                    }\r\n                >\r\n\r\n                </Autocomplete>\r\n            </View>\r\n            <View style={{\r\n                height: '20%',\r\n                borderWidth: 1,\r\n                borderColor: '#ccc',\r\n                marginVertical: sizes.rem0_5,\r\n                borderRadius: sizes.rem0_5\r\n            }}>\r\n                <ScrollView key={`view_id_${accountIds.data.ids.length}`}>\r\n                    {\r\n                        accountIds.data.ids.map((v, i) => <View key={`id_${i}`} style={{\r\n                            padding: sizes.rem0_5,\r\n                            flexDirection: \"row\"\r\n                        }}><Text style={{textAlign: \"left\", flex: 1}}>{v}</Text></View>)\r\n                    }\r\n                </ScrollView>\r\n            </View>\r\n\r\n            <View key='1' style={[isKeyboardVisible ? {height: 0} : {}, {position: 'absolute', bottom: 0}]}>\r\n                <Text style={{textAlign: 'left', fontSize: fonts.xSmall}}>\r\n                    {note}\r\n                </Text>\r\n                <Text style={{color: '#0000EE', marginVertical: 10, fontSize: fonts.xSmall}}\r\n                      onPress={() =>\r\n                          Linking.openURL('https://guides.interactivebrokers.com/ibrit/topics/reporting_integration_process.htm')}>\r\n                    {'IBKR Reporting Integration Process'}\r\n                </Text>\r\n                <ButtonPanel\r\n                    viewProps={{\r\n                        borderTopWidth: 0,\r\n                        flexDirection: \"row\",\r\n                        paddingTop: sizes.rem1,\r\n                        paddingBottom: 0,\r\n                        justifyContent: \"space-evenly\",\r\n                        zIndex: 1000\r\n                    }}\r\n                    left={{\r\n                        text: 'Go back',\r\n                        onPress: async () => {\r\n                            nav.goBack();\r\n                        }\r\n                    }}\r\n                    right={{\r\n                        text: 'Continue',\r\n                        onPress: async () => {\r\n                            try {\r\n                                if (!accountIds.data.ids.length) {\r\n                                    return\r\n                                }\r\n                                await Api.Brokerage.extensions.createIbkrAccounts({account_ids: accountIds.data.ids});\r\n                                const body = emailBody(accountIds.data.ids);\r\n                                Linking.openURL(`mailto:reportingintegration@interactivebrokers.com?subject=IBKR/TradingPost Reporting Integration&body=${body}`)\r\n                            } catch (e) {\r\n                                console.error(e);\r\n                            }\r\n                        }\r\n                    }}\r\n                />\r\n            </View>\r\n        </View>\r\n    )\r\n\r\n}\r\n\r\nconst emailBody = (accountIds: string[]) => {\r\n    return `To Whom It May Concern,\r\n\r\nI would like to integrate my Interactive Brokers reporting data with the TradingPost feed.\r\n\r\nI would like to include a historical position and transactions file.\r\n\r\nI would like to include the accounts under the below advisory account #:\r\n${accountIds.join('\\n')}\r\n\r\nBest,\r\n\r\n[Enter your legal name here]`\r\n}\r\n\r\nconst instructions = `In order to link your IBKR account to TradingPost, we need you to send an email to IBKR indicating that you would give TradingPost permission to reports on your historical positions and trades.\\n\\nPlease enter the Account IDs that you would like to link to TradingPost below. \\n\\nAfter entering them in, when you click \"Continue\" we will generate the necessary email for you to send to IBKR's Reporting Integration Team.`\r\n\r\nconst note = `Note:\r\nGranting us this access in no way gives us any authority over your account.\r\n\r\nYou can check out the below IBKR link if you have any concerns:`","import React, { useEffect, useState, useMemo, useRef } from \"react\"\r\nimport { View, Animated, Pressable, Linking } from \"react-native\"\r\nimport { ITextField, TextField } from '../components/TextField';\r\nimport { Api, Interface } from \"@tradingpost/common/api\"\r\nimport { sleep } from \"@tradingpost/common/utils/sleep\"\r\n//import { LinkBrokerageComponent } from \"../components/LinkBrokerageComponent\";\r\nimport { elevated, flex, fonts, paddView, paddViewWhite, row, sizes } from \"../style\"\r\nimport { ElevatedSection, Section, Subsection } from \"../components/Section\"\r\nimport { Autocomplete, AutocompleteItem, Button, Icon, IndexPath, Text, Layout, TabView, Tab } from \"@ui-kitten/components\"\r\nimport { AddButton } from \"../components/AddButton\";\r\nimport { useIsKeyboardVisible, useReadonlyEntity } from \"../utils/hooks\";\r\nimport { ButtonPanel, ScrollWithButtons } from \"../components/ScrollWithButtons\";\r\nimport { getHivePool } from \"@tradingpost/common/db\";\r\nimport { PrimaryButton } from \"../components/PrimaryButton\";\r\nimport { RobinhoodLogo } from '../images'; \r\nimport { Header, Subheader } from \"../components/Headers\";\r\nimport { SecondaryButton } from \"../components/SecondaryButton\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\nimport { RobinhoodLoginResponse, RobinhoodLoginStatus } from \"@tradingpost/common/api/entities/extensions/Brokerage\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { AppColors } from \"../constants/Colors\";\r\n\r\nexport function RobhinhoodLoginScreen(props: any) {\r\n    const nav = useNavigation();\r\n    const [username, setUsername] = useState<string>(''),\r\n        [password, setPassword] = useState<string>(''),\r\n        [multifactor, setMultifactor] = useState<string>(''),\r\n        [selectedIndex, setSelectedIndex] = useState(0),\r\n        [deviceToken, setDeviceToken] = useState<string>(''),\r\n        [challengeResponseId, setChallengeResponseId] = useState<string>(''),\r\n        toast = useToast();\r\n    useEffect(()=> {\r\n        if (selectedIndex === 2) {\r\n            (async () => {\r\n                console.log(challengeResponseId);\r\n                let counter = 0;\r\n                let response = await Api.Brokerage.extensions.hoodPing({requestId: challengeResponseId});\r\n                console.log(`initial response - ${response}`);\r\n                console.log(`logic check - ${response.challengeStatus !== 'redeemed' && response.challengeStatus !== 'validated' && counter < 24}`)\r\n                while (response.challengeStatus !== 'redeemed' && response.challengeStatus !== 'validated' && counter < 24) {\r\n                    response = await Api.Brokerage.extensions.hoodPing({requestId: challengeResponseId});\r\n                    counter += 1;\r\n                    await sleep(5000)\r\n                }\r\n                if (response.challengeStatus === 'redeemed' || response.challengeStatus === 'validated') {\r\n                    await Api.Brokerage.extensions.robinhoodLogin({username: username, password: password, mfaCode: null, challengeResponseId: challengeResponseId})\r\n                    toast.show(\"You've successfully linked your Robinhood account to TradingPost!\")\r\n                    nav.navigate('BrokeragePicker');\r\n                    \r\n                }\r\n                else {\r\n                    setSelectedIndex(0)\r\n                    toast.show(\"Login failed, please login again and make sure to go to the Robinhood app complete your multifactor authentication.\")\r\n                }\r\n                \r\n            })()\r\n        }\r\n\r\n    }, [selectedIndex])\r\n\r\n    \r\n    return (\r\n        <View style={paddView}>\r\n            <TabView\r\n                \r\n                selectedIndex={selectedIndex}\r\n                onSelect={index => setSelectedIndex(isNaN(index) ? 0 : index)}\r\n                style={{ width: \"100%\" }}\r\n                indicatorStyle={{ height: 0 }}\r\n                tabBarStyle={{ height: 0 }}\r\n            >\r\n                <Tab>\r\n                    <ElevatedSection title=\"\" style={{padding: sizes.rem1}}>\r\n                        <View style={{padding: sizes.rem1, borderRadius: 20, overflow: 'hidden', aspectRatio: 1, height: '40%', justifyContent: 'center', alignSelf: 'center'}}>\r\n                            <RobinhoodLogo style={{}}  height={\"100%\"} width={'100%'}/>\r\n                        </View>\r\n                        <View>\r\n                            <Header text=\"Robinhood Login\"/>\r\n                            <TextField\r\n                                //label=\"Robhinhood Username\" \r\n                                value={username}\r\n                                placeholder=\"Robinhood Username\"\r\n                                onChangeText={(name: string) => setUsername(name)}\r\n                                />\r\n                            <TextField\r\n                                //label=\"Robhinhood Password\" \r\n                                value={password}\r\n                                secureTextEntry\r\n                                placeholder=\"Robinhood Password\"\r\n                                onChangeText={(pass: string) => setPassword(pass)}\r\n                                />\r\n                        </View>\r\n                            <ButtonPanel\r\n                                viewProps={{borderTopWidth: 0,\r\n                                            flexDirection: \"row\", \r\n                                            paddingTop: sizes.rem1,\r\n                                            paddingBottom: 0,\r\n                                            justifyContent: \"space-evenly\", \r\n                                            zIndex: 1000\r\n                                        }}\r\n                                left={{\r\n                                    text: 'Go back',\r\n                                    onPress: async () => {\r\n                                        nav.goBack();\r\n                                    }\r\n                                }}\r\n                                right={{\r\n                                    text: 'Login',\r\n                                    onPress: async () => {\r\n                                        //Api call, on success go on to the MFA page\r\n                                        let initialLogin = {} as RobinhoodLoginResponse\r\n                                        if (!username || !password) {\r\n                                            toast.show('Please enter username and password')\r\n                                            return\r\n                                        }\r\n                                        else {\r\n                                            initialLogin = await Api.Brokerage.extensions.robinhoodLogin({username: username, password: password, mfaCode: null, challengeResponseId: null})\r\n                                            \r\n                                        }\r\n                                        if (initialLogin.status === 'MFA' as RobinhoodLoginStatus) {\r\n                                            setSelectedIndex(1);\r\n                                        }\r\n                                        else if (initialLogin.status === 'DEVICE_APPROVAL' as RobinhoodLoginStatus) {\r\n                                            setChallengeResponseId(initialLogin.challengeResponseId || '');\r\n                                            setSelectedIndex(2);\r\n                                        }\r\n                                        else if (initialLogin.status === 'ERROR' as RobinhoodLoginStatus) {\r\n                                            toast.show('Login failed, please re-enter username and password!')\r\n                                            setPassword('')\r\n                                            console.log('failed login!')\r\n                                        }\r\n                                        else if (initialLogin.status === 'SUCCESS' as RobinhoodLoginStatus) {\r\n                                            toast.show(`This Robinhood account is already connected to TradingPost!`)\r\n                                            setPassword('')\r\n                                        }\r\n                                    }\r\n                                }}\r\n                                />\r\n                    </ElevatedSection>\r\n                </Tab>\r\n                <Tab>\r\n                    <ElevatedSection title=\"\" style={{padding: sizes.rem1}}>\r\n                        <View style={{padding: sizes.rem1, borderRadius: 20, overflow: 'hidden', aspectRatio: 1, height: '40%', justifyContent: 'center', alignSelf: 'center'}}>\r\n                            <RobinhoodLogo style={{}}  height={\"100%\"} width={'100%'}/>\r\n                        </View>\r\n                        <Header text=\"Robinhood Multifactor Authentication\"/>\r\n                        <TextField\r\n                            //label=\"Robhinhood Password\" \r\n                            placeholder=\"Robinhood Multifactor Auth Code\"\r\n                            onChangeText={(mfa: string) => setMultifactor(mfa)}\r\n                        />\r\n                        <View style={{paddingVertical: sizes.rem1, alignItems: 'center'}}>\r\n                            <PrimaryButton \r\n                                style={{width: '50%'}}\r\n                                onPress={async () => {\r\n                                    //Api call, on success go on to the MFA page\r\n                                    const mfaLogin = await Api.Brokerage.extensions.robinhoodLogin({username: username, password: password, mfaCode: multifactor, challengeResponseId: null})\r\n                                    if (mfaLogin.status === 'SUCCESS' as RobinhoodLoginStatus) {\r\n                                        toast.show(\"You've successfully linked your Robinhood account to TradingPost!\")\r\n                                        nav.navigate('BrokeragePicker')\r\n                                    }\r\n                                    else if (mfaLogin.status === 'ERROR' as RobinhoodLoginStatus) {\r\n                                        toast.show(\"An error has occurred in connecting your Robinhood account to Tradingpost. Please try again!\")\r\n                                        setSelectedIndex(0)\r\n                                    }\r\n                                }}\r\n                            >\r\n                                Submit\r\n                            </PrimaryButton>\r\n                        </View>\r\n                       \r\n                    </ElevatedSection>\r\n                </Tab>\r\n                <Tab>\r\n                    <ElevatedSection title=\"Robinhood Multifactor Authentication\" style={{padding: sizes.rem1}}>\r\n                        <View>\r\n                            <Subheader text={'Please go to the Robinhood app and confirm that it is you logging into your account. Once you have done this, please click \"Confirmed\" below.'} \r\n                                       style={{color: 'black'}}\r\n                            />\r\n                            <PrimaryButton\r\n                                onPress={async ()=> {\r\n                                    let response = await Api.Brokerage.extensions.hoodPing({requestId: challengeResponseId});\r\n                                    if (response.challengeStatus === 'redeemed' || response.challengeStatus === 'validated') {\r\n                                        await Api.Brokerage.extensions.robinhoodLogin({username: username, password: password, mfaCode: null, challengeResponseId: challengeResponseId})\r\n                                        toast.show(\"You've successfully linked your Robinhood account to TradingPost!\")\r\n                                        nav.navigate('BrokeragePicker');\r\n                                        \r\n                                    }\r\n                                    else if (response.challengeStatus === 'issued') {\r\n                                        toast.show(\"Confirmation has not been received. Please go to the Robinhood app complete your multifactor authentication.\")\r\n                                    }\r\n                                    else {\r\n                                        setSelectedIndex(0)\r\n                                        toast.show(\"Login failed, please login again and make sure to go to the Robinhood app complete your multifactor authentication.\")\r\n                                    }\r\n                                }}>\r\n                                Confirmed\r\n                            </PrimaryButton>\r\n                        </View>\r\n                    </ElevatedSection>\r\n                </Tab>\r\n            </TabView>\r\n        </View>\r\n    )\r\n\r\n\r\n}","import { createNativeStackNavigator } from \"@react-navigation/native-stack\";\r\nimport React from \"react\";\r\nimport { Button, Keyboard, Pressable, View } from \"react-native\";\r\nimport { AppTitle } from \"../images\";\r\nimport CreateAccountScreen from \"../screens/CreateAccountScreen\";\r\nimport NotFoundScreen from \"../screens/NotFoundScreen\";\r\nimport { ProfileScreen } from \"../screens/ProfileScreen\";\r\nimport WelcomeScreen from \"../screens/WelcomeScreen\";\r\nimport { sizes } from \"../style\";\r\nimport { DrawerPart } from \"./DrawerNavigator\";\r\nimport { RootStackParamList } from \"./pages\";\r\nimport { AccountSettingsScreen } from \"../screens/AccountSettingsScreen\"\r\nimport { AccountInfoScreen } from \"../screens/AccountInfoScreen\";\r\nimport { AuthScreen } from \"../screens/AuthScreen\"\r\nimport { ChangePasswordScreen } from \"../screens/ChangePasswordScreen\"\r\nimport { CompanyScreen } from \"../screens/CompanyScreen\"\r\nimport { ImagePickerScreen } from \"../screens/ImagePicker\"\r\nimport { NotificationTradeScreen } from \"../screens/NotificationTradeScreen\"\r\nimport { PostEditorScreen } from \"../screens/PostEditorScreen\"\r\nimport { PostScreen } from \"../screens/PostScreen\"\r\nimport { SubscriptionScreen, SubscriptionSettingsScreen } from \"../screens/SubscriptionScreen\"\r\nimport { TableModalScreen } from \"../screens/TableModalScreen\"\r\nimport { BlockListModalScreen } from \"../screens/BlockListModalScreen\";\r\nimport { VerificationScreen } from \"../screens/VerificationScreen\"\r\nimport { WatchlistEditorScreen } from \"../screens/WatchlistEditorScreen\"\r\nimport { WatchlistScreen } from \"../screens/WatchlistScreen\"\r\nimport { WatchlistViewerScreen } from \"../screens/WatchlistViewerScreen\"\r\nimport { AppInformationScreen } from \"../screens/AppInformationScreen\";\r\nimport * as Notifications from 'expo-notifications';\r\nimport { useIsKeyboardVisible } from \"../utils/hooks\";\r\nimport { IconifyIcon } from \"../components/IconfiyIcon\";\r\nimport KeyboardClose from '../assets/@iconify/keyboard-close'\r\nimport { useAppUser } from \"../Authentication\";\r\nimport { Log } from \"../utils/logger\";\r\nimport { BrokeragePickerScreen } from \"../screens/BrokeragePickerScreen\";\r\nimport { IbkrInfoScreen } from \"../screens/IbkrInfoScreen\";\r\nimport { RobhinhoodLoginScreen } from \"../screens/RobinhoodLoginScreen\";\r\nimport { ShareButton } from \"../components/ShareButton\";\r\nimport linking from \"./LinkingConfiguration\";\r\nimport { useLinkBuilder, useRoute } from \"@react-navigation/native\";\r\n\r\n\r\nNotifications.setNotificationHandler({\r\n    handleNotification: async () => ({\r\n        shouldShowAlert: true,\r\n        shouldPlaySound: false,\r\n        shouldSetBadge: false\r\n    }),\r\n});\r\n\r\nexport const Stack = createNativeStackNavigator<RootStackParamList>();\r\n\r\nexport const useInitialRoute = () => {\r\n    let { loginState } = useAppUser();\r\n    let initialRoute: keyof RootStackParamList;\r\n    if (loginState?.appUser)\r\n        //TODO: Should refactor this so that it is more related... settings + settings.analyst + analyst_profile\r\n        if (loginState.setupStatus?.needsAnalystSettings || loginState.setupStatus?.needsSettings)\r\n            initialRoute = \"Create\"\r\n        else if (!loginState.loginResult?.verified)\r\n            initialRoute = \"VerifyAccount\"\r\n        else\r\n            initialRoute = \"Dash\"\r\n    else if (loginState?.loginResult)\r\n        initialRoute = \"Create\"\r\n\r\n    else\r\n        initialRoute = \"Root\"\r\n\r\n    Log.verbose(`Initial Route Is : '${initialRoute}'`);\r\n    return initialRoute;\r\n}\r\n\r\nexport function RootNavigator() {\r\n    console.log(\"Running Root Navigation\");\r\n    return <Stack.Navigator\r\n        initialRouteName={useInitialRoute()}\r\n        screenOptions={{\r\n            headerTitle: () => <AppTitle height={\"100%\"}\r\n                style={{ marginTop: sizes.rem0_5, height: sizes.rem2, aspectRatio: 5.77 }}\r\n            />,\r\n            headerTitleAlign: \"center\",\r\n            headerBackVisible: false,\r\n            headerRight: () => {\r\n                const { isKeyboardVisible } = useIsKeyboardVisible();\r\n                if (isKeyboardVisible) {\r\n                    return <Pressable\r\n                        onPress={() => {\r\n                            Keyboard.dismiss();\r\n                        }}\r\n                    ><IconifyIcon\r\n                            currentColor=\"black\"\r\n                            icon={KeyboardClose}\r\n                            svgProps={{\r\n                                height: 24,\r\n                                width: 24,\r\n                            }}\r\n                            style={{\r\n                                height: 24,\r\n                                width: 24,\r\n                                marginRight: sizes.rem1\r\n                            }} />\r\n                    </Pressable>\r\n                }\r\n                // else if () {\r\n\r\n                // }\r\n                else return undefined;\r\n            }\r\n        }}>\r\n        <Stack.Screen name=\"Root\" component={WelcomeScreen} options={{ headerShown: false }} />\r\n        <Stack.Screen name=\"Create\" component={CreateAccountScreen}\r\n            options={{ headerShown: false, headerBackVisible: false }} />\r\n        <Stack.Screen name=\"Dash\" component={DrawerPart} options={{\r\n            headerShown: false,\r\n        }} />\r\n        <Stack.Screen name=\"NotFound\" component={NotFoundScreen} options={{ title: 'Oops!' }} />\r\n        <Stack.Group screenOptions={{\r\n            headerBackVisible: true,\r\n        }}>\r\n            <Stack.Screen name=\"ResetPassword\" component={ChangePasswordScreen} />\r\n            <Stack.Screen name=\"VerifyAccount\" component={VerificationScreen} />\r\n            <Stack.Screen name=\"Auth\" component={AuthScreen} />\r\n            <Stack.Screen name=\"Subscription\" component={SubscriptionScreen} />\r\n            <Stack.Screen name=\"AccountSettings\" component={AccountSettingsScreen} />\r\n            <Stack.Screen name=\"AccountInformation\" component={AccountInfoScreen} />\r\n            <Stack.Screen name=\"AppInformation\" component={AppInformationScreen} options={{ headerShown: false }} />\r\n            <Stack.Screen name=\"SubscriptionSettings\" component={SubscriptionSettingsScreen} />\r\n            <Stack.Screen name=\"WatchlistEditor\" component={WatchlistEditorScreen} />\r\n            <Stack.Screen name=\"PostScreen\" component={PostScreen} />\r\n            <Stack.Screen name=\"PostEditor\" component={PostEditorScreen} />\r\n            <Stack.Screen name=\"WatchlistViewer\" component={WatchlistViewerScreen} />\r\n            <Stack.Screen name=\"Watchlist\" component={WatchlistScreen} />\r\n            <Stack.Screen name=\"ImagePicker\" component={ImagePickerScreen} />\r\n            <Stack.Screen name=\"Company\" component={CompanyScreen} />\r\n            <Stack.Screen name=\"TableModal\" component={TableModalScreen} />\r\n            <Stack.Screen name=\"BlockListModal\" component={BlockListModalScreen} />\r\n            <Stack.Screen name=\"NotificationTrade\" component={NotificationTradeScreen} />\r\n            <Stack.Screen name=\"BrokeragePicker\" component={BrokeragePickerScreen} />\r\n            <Stack.Screen name=\"IbkrInfo\" component={IbkrInfoScreen} />\r\n            <Stack.Screen name=\"RobinhoodLogin\" component={RobhinhoodLoginScreen} />\r\n        </Stack.Group>\r\n        <Stack.Group screenOptions={{\r\n            headerStyle: {\r\n                backgroundColor: \"transparent\"\r\n            },\r\n            headerBackVisible: true,\r\n            headerTintColor: \"white\",\r\n            headerBackground: () => <View></View>,\r\n            headerTitle: \"\",\r\n            contentStyle: {\r\n                marginTop: -64\r\n            }\r\n        }}>\r\n            <Stack.Screen options={{\r\n                headerRight: () => {\r\n                    const route = useRoute();\r\n                    const buildLink = useLinkBuilder()\r\n                    const url = buildLink(route.name, route.params);\r\n                    return <ShareButton style={{ marginRight: 8, height: 32, width: 32 }} url={\"https://m.tradingpostapp.com\" + url || \"\"} title={\"https://m.tradingpostapp.com\" + url || \"\"} color=\"white\" />\r\n                }\r\n            }} name=\"Profile\" component={ProfileScreen} />\r\n        </Stack.Group>\r\n    </Stack.Navigator>\r\n}\r\n\r\n\r\n\r\n\r\n","/**\r\n * If you are not familiar with React Navigation, refer to the \"Fundamentals\" guide:\r\n * https://reactnavigation.org/docs/getting-started\r\n *\r\n */\r\nimport { createBottomTabNavigator } from '@react-navigation/bottom-tabs';\r\nimport {\r\n  getFocusedRouteNameFromRoute,\r\n  NavigationContainer,\r\n  DefaultTheme,\r\n  DarkTheme,\r\n  NavigationProp,\r\n  useNavigationState\r\n} from '@react-navigation/native';\r\nimport { createNativeStackNavigator } from '@react-navigation/native-stack';\r\n\r\nimport { createDrawerNavigator } from '@react-navigation/drawer';\r\nimport { SideMenu } from '../components/SideMenu';\r\n\r\nimport * as React from 'react';\r\n\r\nimport { ColorSchemeName } from 'react-native';\r\n//import { RootStackParamList, RootTabParamList, RootTabScreenProps } from '../types';\r\nimport LinkingConfiguration from './LinkingConfiguration';\r\nimport { SafeAreaProvider } from 'react-native-safe-area-context';\r\nimport { RootNavigator } from './RootNavigator';\r\n\r\nexport default function Navigation({ colorScheme }: { colorScheme: ColorSchemeName }) {\r\n  return (\r\n    <SafeAreaProvider>\r\n      <NavigationContainer\r\n        linking={LinkingConfiguration}\r\n        theme={colorScheme === 'dark' ? DarkTheme : DefaultTheme}\r\n      ><RootNavigator />\r\n      </NavigationContainer>\r\n    </SafeAreaProvider>\r\n  );\r\n}","import {configApi} from '@tradingpost/common/api/entities/static/EntityApiBase'\r\nimport Constants, {AppOwnership} from 'expo-constants'\r\nimport {useURL} from 'expo-linking'\r\nimport {parse} from 'url'\r\n\r\nif (!__DEV__) {\r\n    configApi({\r\n        apiBaseUrl: \"https://api.tradingpostapp.com\"\r\n    })\r\n} else if (__DEV__ && (AppOwnership.Expo === Constants.appOwnership || AppOwnership.Standalone === Constants.appOwnership || !Constants.appOwnership)) {\r\n\r\n    if (Constants.manifest?.hostUri) {\r\n        configApi({\r\n            apiBaseUrl: `http://${Constants.manifest?.hostUri?.split(\":\")[0]}:8082`\r\n        })\r\n    } else {\r\n\r\n        //manual ip for api server... have been trying to find a way to avoid this...\r\n        configApi({\r\n            apiBaseUrl: `http://${Constants.expoConfig?.extra?.localIp || \"localhost\"}:8082`\r\n        })\r\n    }\r\n}\r\n\r\nif (__DEV__ && Platform.OS === \"web\")\r\n    configApi({\r\n        callbackUrl: \"http://localhost:19006\"\r\n    })\r\n\r\n\r\nimport {StatusBar} from 'expo-status-bar';\r\nimport useCachedResources from './hooks/useCachedResources';\r\nimport useColorScheme from './hooks/useColorScheme';\r\nimport Navigation from './navigation';\r\nimport * as eva from '@eva-design/eva';\r\nimport {ApplicationProvider, Layout, Button, IconRegistry} from '@ui-kitten/components';\r\nimport theme from \"./theme-light.json\"; // <-- Import app theme\r\nimport {ToastProvider} from 'react-native-toast-notifications';\r\nimport React, {useEffect,} from 'react';\r\n\r\n\r\nimport {EvaIconsPack} from '@ui-kitten/eva-icons';\r\n\r\nimport {getSecurityList} from './SecurityList'\r\nimport {Platform} from 'react-native'\r\n\r\nexport default function App() {\r\n    const {isLoadingComplete} = useCachedResources();\r\n    const colorScheme = useColorScheme();\r\n\r\n    useEffect(() => {\r\n        if (isLoadingComplete) {\r\n            getSecurityList();\r\n        }\r\n    }, [isLoadingComplete])\r\n    const url = useURL();\r\n    if (__DEV__ && url) {\r\n\r\n        const urlParsed = parse(url, true);\r\n\r\n        //com.tradingpostapp://expo-development-client/?url=http%3A%2F%2F10.0.0.94%3A8081 need to parse and set the api url the first run through\r\n        if (urlParsed.hostname === \"expo-development-client\") {\r\n            configApi({\r\n                apiBaseUrl: \"http://\" + (urlParsed.query[\"url\"] as string)?.split(\":\")[1] + \":8082\"\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    return !isLoadingComplete ? null : <ApplicationProvider {...eva} theme={{...eva.light, ...theme}}>\r\n        <IconRegistry icons={EvaIconsPack}/>\r\n        <ToastProvider>\r\n            <Navigation colorScheme={colorScheme}/>\r\n            <StatusBar/>\r\n        </ToastProvider>\r\n    </ApplicationProvider>\r\n}\r\n\r\n\r\n\r\n","import { registerRootComponent } from 'expo';\r\n\r\nimport App from './App';\r\n\r\n// registerRootComponent calls AppRegistry.registerComponent('main', () => App);\r\n// It also ensures that whether you load the app in Expo Go or in a native build,\r\n// the environment is set up appropriately\r\nregisterRootComponent(App);\r\n","import { FontAwesome } from '@expo/vector-icons';\r\nimport * as Font from 'expo-font';\r\nimport * as SplashScreen from 'expo-splash-screen';\r\nimport { useEffect, useState } from 'react';\r\nimport { initLds, setValue } from '../lds';\r\nimport { Authentication } from '../Authentication';\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { registerDeviceForNotifications } from \"../utils/notifications\";\r\n\r\nimport '../SecurityList'\r\nimport { Log } from '../utils/logger';\r\n\r\nexport default function useCachedResources() {\r\n    const [isLoadingComplete, setLoadingComplete] = useState(false);\r\n\r\n    // Load any resources or data that we need prior to rendering the app\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n\r\n                SplashScreen.preventAutoHideAsync();\r\n                // Load fonts\r\n                await Font.loadAsync({\r\n                    ...FontAwesome.font,\r\n                    'space-mono': require('../assets/fonts/SpaceMono-Regular.ttf'),\r\n                    'K2D': require('../assets/fonts/K2D-Regular.ttf'),\r\n                });\r\n\r\n                const lds = await initLds();\r\n                if (lds.authToken) {\r\n                    Log.verbose(\"There IS AN AUTH TOKEN\");\r\n                    try {\r\n                        const results = await Authentication.signIn(\"\", lds.authToken);\r\n                        lds.loginResult = results.loginResult;\r\n                        lds.currentUser = results.currentUser;\r\n                        Log.verbose(`CU: ${JSON.stringify(lds.currentUser)} LR: ${JSON.stringify(lds.loginResult)}`);\r\n                        setValue(\"loginResult\", results.loginResult);\r\n                        setValue(\"currentUser\", results.currentUser);\r\n\r\n                        if (results.currentUser?.email)\r\n                            await registerDeviceForNotifications();\r\n\r\n                    } catch (ex) {\r\n                        //TODO: make this remove the authtoken if the exception actually is related to the auth token being invalid \r\n                        setValue(\"authToken\", undefined);\r\n                        console.error(ex);\r\n                    }\r\n                }\r\n                else\r\n                    Log.verbose(\"There is no auth token.\");\r\n\r\n\r\n            } catch (e) {\r\n                // We might want to provide this error information to an error reporting service\r\n                console.error(e);\r\n            } finally {\r\n                setLoadingComplete(true);\r\n                SplashScreen.hideAsync();\r\n            }\r\n        })()\r\n    }, []);\r\n\r\n\r\n    return {\r\n        isLoadingComplete,\r\n    }\r\n}\r\n","const data = {\r\n\t\"width\": 24,\r\n\t\"height\": 24,\r\n\t\"body\": \"<path fill=\\\"currentColor\\\" d=\\\"m12 23l4-4H8M19 8h-2V6h2m0 5h-2V9h2m-3-1h-2V6h2m0 5h-2V9h2m0 6H8v-2h8M7 8H5V6h2m0 5H5V9h2m1 0h2v2H8m0-5h2v2H8m3 1h2v2h-2m0-5h2v2h-2m9-5H4c-1.11 0-2 .89-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2Z\\\"/>\"\r\n};\r\nexports.__esModule = true;\r\nexports.default = data;\r\n","module.exports = __webpack_public_path__ + \"static/media/bookmark-active.d96ac9da.svg\";","module.exports = __webpack_public_path__ + \"static/media/bookmark-active-blue.fdca270d.svg\";","module.exports = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cGF0aCBkPSJNNjQgOEMzMy4wNzUgOCA4IDMzLjA3NSA4IDY0QzggOTQuOTI1IDMzLjA3NSAxMjAgNjQgMTIwQzk0LjkyNSAxMjAgMTIwIDk0LjkyNSAxMjAgNjRDMTIwIDMzLjA3NSA5NC45MjUgOCA2NCA4Wk02NCAxMTAuNUMzOC4zMjUgMTEwLjUgMTcuNSA4OS42NzUgMTcuNSA2NEMxNy41IDM4LjMyNSAzOC4zMjUgMTcuNSA2NCAxNy41Qzg5LjY3NSAxNy41IDExMC41IDM4LjMyNSAxMTAuNSA2NEMxMTAuNSA4OS42NzUgODkuNjc1IDExMC41IDY0IDExMC41WiIgZmlsbD0iYmxhY2siLz4NCjxwYXRoIGQ9Ik01OCA0MkM1OCA0My41OTEzIDU4LjYzMjEgNDUuMTE3NCA1OS43NTc0IDQ2LjI0MjZDNjAuODgyNiA0Ny4zNjc5IDYyLjQwODcgNDggNjQgNDhDNjUuNTkxMyA0OCA2Ny4xMTc0IDQ3LjM2NzkgNjguMjQyNiA0Ni4yNDI2QzY5LjM2NzkgNDUuMTE3NCA3MCA0My41OTEzIDcwIDQyQzcwIDQwLjQwODcgNjkuMzY3OSAzOC44ODI2IDY4LjI0MjYgMzcuNzU3NEM2Ny4xMTc0IDM2LjYzMjEgNjUuNTkxMyAzNiA2NCAzNkM2Mi40MDg3IDM2IDYwLjg4MjYgMzYuNjMyMSA1OS43NTc0IDM3Ljc1NzRDNTguNjMyMSAzOC44ODI2IDU4IDQwLjQwODcgNTggNDJWNDJaTTY3IDU2SDYxQzYwLjQ1IDU2IDYwIDU2LjQ1IDYwIDU3VjkxQzYwIDkxLjU1IDYwLjQ1IDkyIDYxIDkySDY3QzY3LjU1IDkyIDY4IDkxLjU1IDY4IDkxVjU3QzY4IDU2LjQ1IDY3LjU1IDU2IDY3IDU2WiIgZmlsbD0iYmxhY2siLz4NCjwvc3ZnPg0K\"","module.exports = __webpack_public_path__ + \"static/media/logo.9bb3fb31.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo-no-bg.9cd8c523.svg\";","module.exports = __webpack_public_path__ + \"static/media/notification-active.ead2911b.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAoCAYAAACSN4jeAAAACXBIWXMAAAsTAAALEwEAmpwYAAACr0lEQVRYhe2Ye28SQRTFf6C1+KSliliMtVZqrNpUjI9qfVSjprSk+ABbFhb6/b+EGXPGjBtcFthH/+hJboDduTOH+5o7A9PjMrAK1IEPwFfJJ+AFsA4skDByzvcysAP8AHrAABiOkD7QEdG7/5krFlIF4DVwDPiSLvBNlnoPvAM+A4fAkTOup+eluEndAFqyglmkDbwCloH5EVaYk86W9HqSX0AtLlIVTehJjFWKE8wzrzg8lr4huDErqUXFiaeJNwJjxsWL+74K/JT7Dbl7I8ZEQh7Y0yRdZRlTTuaGRFt/tD2h5f9O8tiJqfqUhFxY3RX90b7KzEQoKNuMckPWiwOW3Lbm7iqG3XehiutS9FRExypOiKJc6asERcauCmdTqZ8E3mqNljw0FgUNHqhWxW2tnD7XHHeWo6xTUtXuO5kYJzGL6846tbB17MObTiGshinMiKvab41nNqMQW3aq/K0whRlxSZlviD2NQqyaIrGWiNWjEjNuPCPGmcUSjLFTFfx5p1ykEfwXHWK2XIQ2C7czsNizsIErapsPtFV42jaSwpyIefo0jcPDoNW21IIMJCcimTSeOGta2bXkKk773NKZ0fT250gHq2ocG/LUQN0zz/XDbKhLAaUkYivsNLUnz31BbIeKrayxIyPtmx+PxPJIabugnmwxJSmp1a7peOfb+LYdq68M6agfT1M6znnTU0/4ByUFn6eO0s9AesB3la1/kFdBNe30gwzkjhLg1CIX9mKU2IpcVtYcOFtWPjDW4IrSvukcaoLjgjITlhSoJ6rcdkEC3yuK1+G4U1BcyDmXLYfajEfho3OXdi1JQpaUwX3nRrEh65zXNlbU7WJXY+yhOTVsq0r3dHfWVOx19MyXZS+QATblKhtLRuwu8ibr9DfZZ+qQaQZeqjOYuY/7DbN2cxBGpVy8AAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/store-front-logo2-alt.7ad935b2.svg\";","module.exports = __webpack_public_path__ + \"static/media/store-front.5d28ee3a.svg\";","module.exports = __webpack_public_path__ + \"static/media/app-title.a87bb585.svg\";","module.exports = __webpack_public_path__ + \"static/media/splash-welcome.0edc3aee.svg\";","module.exports = __webpack_public_path__ + \"static/media/ClimbingMountain.4dedba75.svg\";","module.exports = __webpack_public_path__ + \"static/media/Debate.d0700537.svg\";","module.exports = __webpack_public_path__ + \"static/media/Studying.63530cae.svg\";","module.exports = __webpack_public_path__ + \"static/media/analyze.13c5c9ae.svg\";","module.exports = __webpack_public_path__ + \"static/media/bank.76a3b142.svg\";","module.exports = __webpack_public_path__ + \"static/media/IBKR.cfa56b4d.svg\";","module.exports = __webpack_public_path__ + \"static/media/robinhood_logo.d70982fc.svg\";","module.exports = __webpack_public_path__ + \"static/media/robinhood_logo_long.a5900aa8.svg\";","module.exports = __webpack_public_path__ + \"static/media/plus.cdc95c1f.svg\";","module.exports = __webpack_public_path__ + \"static/media/upvote.d5439e23.svg\";","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgODIgODIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cGF0aCBkPSJNNDguMjYxMiAyOS4yMDY0TDQyLjUyNTMgMjMuNDc0NkwyNi42NjI0IDM5LjMxN1Y0NS4wNDg4SDMyLjM5NDJMNDguMjYxMiAyOS4yMDY0WiIgZmlsbD0iI0Y0NDUyRCIvPg0KPHBhdGggZD0iTTQ5LjYwMTcgMTYuMzk5NEw1NS4zMzM2IDIyLjEzMTJMNTAuOTU4OCAyNi41MDU5TDQ1LjIyNzEgMjAuNzc0MUw0OS42MDE3IDE2LjM5OTRaIiBmaWxsPSIjRjQ0NTJEIi8+DQo8cGF0aCBkPSJNNzMuOCAwSDguMkMzLjY3NzcgMCAwIDMuNjc3NyAwIDguMlY4MkwyMS44NjUzIDY1LjZINzMuOEM3OC4zMjIzIDY1LjYgODIgNjEuOTIyMyA4MiA1Ny40VjguMkM4MiAzLjY3NzcgNzguMzIyMyAwIDczLjggMFpNNzMuOCA1Ny40SDE5LjEzNDdMOC4yIDY1LjZWOC4ySDczLjhWNTcuNFoiIGZpbGw9IiNGNDQ1MkQiLz4NCjwvc3ZnPg0K\"","module.exports = __webpack_public_path__ + \"static/media/bookmark.1ebaa1ce.svg\";","module.exports = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCA1MCA1MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0zOCAzNUgzNlYxN0MzNiAxNi40IDM1LjYgMTYgMzUgMTZIMThWMTRIMzVDMzYuNyAxNCAzOCAxNS4zIDM4IDE3VjM1WiIgZmlsbD0iYmxhY2siLz4NCjxwYXRoIGQ9Ik0zNyAzNi41TDMwLjIgMjguN0wzMS44IDI3LjNMMzcgMzMuNUw0Mi4yIDI3LjNMNDMuOCAyOC43TDM3IDM2LjVaTTMyIDM2SDE1QzEzLjMgMzYgMTIgMzQuNyAxMiAzM1YxNUgxNFYzM0MxNCAzMy42IDE0LjQgMzQgMTUgMzRIMzJWMzZaIiBmaWxsPSJibGFjayIvPg0KPHBhdGggZD0iTTE4LjIwMDIgMjIuN0wxMy4wMDAyIDE2LjVMNy44MDAyIDIyLjdMNi4yMDAyIDIxLjNMMTMuMDAwMiAxMy41TDE5LjgwMDIgMjEuM0wxOC4yMDAyIDIyLjdaIiBmaWxsPSJibGFjayIvPg0KPC9zdmc+DQo=\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQyIDI0MiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF8yNzkyXzI0NSkiPg0KPHBhdGggZD0iTTEyMSAwQzU0LjE3MzUgMCAwIDU0LjE3MzUgMCAxMjFDMCAxODcuODI2IDU0LjE3MzUgMjQyIDEyMSAyNDJDMTg3LjgyNiAyNDIgMjQyIDE4Ny44MjYgMjQyIDEyMUMyNDIgNTQuMTczNSAxODcuODI2IDAgMTIxIDBaTTEyMS43OTggNDIuMzMyM0wxNDAuODY2IDEwMS44NzJMMjAzLjM2MSAxMDMuMjc1TDE1Mi42MjQgMTM5Ljc4OEwxNzAuNiAxOTkuNjY4TDEyMC4xODggMTYyLjY5N0w2OC44MDEgMTk4LjMwOUw4OC4zODY3IDEzOC45MzFMMzguNjM5NSAxMDEuMDZMMTAxLjE2MyAxMDEuMzQxTDEyMS43OTggNDIuMzMyM1Y0Mi4zMzIzWiIgZmlsbD0iIzM1QTI2NSIvPg0KPC9nPg0KPGRlZnM+DQo8Y2xpcFBhdGggaWQ9ImNsaXAwXzI3OTJfMjQ1Ij4NCjxyZWN0IHdpZHRoPSIyNDIiIGhlaWdodD0iMjQyIiBmaWxsPSJ3aGl0ZSIvPg0KPC9jbGlwUGF0aD4NCjwvZGVmcz4NCjwvc3ZnPg0K\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjUiIGhlaWdodD0iNjIiIHZpZXdCb3g9IjAgMCA2NSA2MiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik02Mi40MTk1IDI3Ljk4MzZMNS43NTI4NyAxLjMxNjk4QzUuMTgyMzEgMS4wNDcwMyA0LjU0Njc5IDAuOTQ0ODAzIDMuOTIwMzYgMS4wMjIyQzMuMjkzOTMgMS4wOTk2MSAyLjcwMjQgMS4zNTM0NSAyLjIxNDcxIDEuNzU0MTVDMS43MjcwMiAyLjE1NDg1IDEuMzYzMjYgMi42ODU5MSAxLjE2NTgxIDMuMjg1NDNDMC45NjgzNzQgMy44ODQ5NSAwLjk0NTM4NyA0LjUyODIzIDEuMDk5NTMgNS4xNDAzMUw3LjU2Mjg3IDMxLjAwMDNMMS4wOTk1MyA1Ni44NjAzQzAuOTQzOTQ1IDU3LjQ3MjYgMC45NjU5MjYgNTguMTE2NiAxLjE2MjkxIDU4LjcxNjhDMS4zNTk4OSA1OS4zMTcxIDEuNzIzNzMgNTkuODQ4OSAyLjIxMTg2IDYwLjI0OTlDMi42OTk5OSA2MC42NTEgMy4yOTIyMyA2MC45MDQ4IDMuOTE5MzEgNjAuOTgxNkM0LjU0NjM5IDYxLjA1ODQgNS4xODIzNyA2MC45NTUxIDUuNzUyODcgNjAuNjgzNkw2Mi40MTk1IDM0LjAxN0M2Mi45OTIyIDMzLjc0NzggNjMuNDc2NCAzMy4zMjEyIDYzLjgxNTYgMzIuNzg3QzY0LjE1NDcgMzIuMjUyOCA2NC4zMzQ4IDMxLjYzMzEgNjQuMzM0OCAzMS4wMDAzQzY0LjMzNDggMzAuMzY3NSA2NC4xNTQ3IDI5Ljc0NzggNjMuODE1NiAyOS4yMTM3QzYzLjQ3NjQgMjguNjc5NSA2Mi45OTIyIDI4LjI1MjggNjIuNDE5NSAyNy45ODM2VjI3Ljk4MzZaTTkuMjY5NTMgNTEuNjU3TDEyLjA2NjIgNDAuNDY3TDMwLjk5OTUgMzEuMDAwM0wxMi4wNjYyIDIxLjUzMzZMOS4yNjk1MyAxMC4zNDM2TDUzLjE2OTUgMzEuMDAwM0w5LjI2OTUzIDUxLjY1N1oiIGZpbGw9IiMzNUEyNjUiLz4NCjwvc3ZnPg0K\"","module.exports = __webpack_public_path__ + \"static/media/Account.9d5b65c9.svg\";","module.exports = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAxIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDEwMSAxMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cGF0aCBkPSJNNS45NDExOCAwLjIzNTI5MVYxMDcuMTc2SDBWMTE5LjA1OUgyMy43NjQ3VjEwNy4xNzZIMTcuODIzNVY3Ny40NzA2SDk1LjA1ODhDOTYuNjM0NSA3Ny40NzA2IDk4LjE0NTcgNzYuODQ0NiA5OS4yNTk5IDc1LjczMDRDMTAwLjM3NCA3NC42MTYzIDEwMSA3My4xMDUxIDEwMSA3MS41Mjk0VjEyLjExNzZDMTAxIDEwLjU0MTkgMTAwLjM3NCA5LjAzMDc4IDk5LjI1OTkgNy45MTY2Qzk4LjE0NTcgNi44MDI0MSA5Ni42MzQ1IDYuMTc2NDcgOTUuMDU4OCA2LjE3NjQ3SDE3LjgyMzVWMC4yMzUyOTFINS45NDExOFpNMjkuNzA1OSAxOC4wNTg4VjI5Ljk0MTJINDEuNTg4MlYxOC4wNTg4SDUzLjQ3MDZWMjkuOTQxMkg2NS4zNTI5VjE4LjA1ODhINzcuMjM1M1YyOS45NDEySDg5LjExNzZWNDEuODIzNUg3Ny4yMzUzVjUzLjcwNTlIODkuMTE3NlY2NS41ODgySDc3LjIzNTNWNTMuNzA1OUg2NS4zNTI5VjY1LjU4ODJINTMuNDcwNlY1My43MDU5SDQxLjU4ODJWNjUuNTg4MkgyOS43MDU5VjUzLjcwNTlIMTcuODIzNVY0MS44MjM1SDI5LjcwNTlWMjkuOTQxMkgxNy44MjM1VjE4LjA1ODhIMjkuNzA1OVoiIGZpbGw9ImJsYWNrIi8+DQo8cGF0aCBkPSJNMjkuNzA1NiA0MS44MjMySDQxLjU4NzlWNTMuNzA1NkgyOS43MDU2VjQxLjgyMzJaTTUzLjQ3MDMgNDEuODIzMkg2NS4zNTI2VjUzLjcwNTZINTMuNDcwM1Y0MS44MjMyWk00MS41ODc5IDI5Ljk0MDlINTMuNDcwM1Y0MS44MjMySDQxLjU4NzlWMjkuOTQwOVpNNjUuMzUyNiAyOS45NDA5SDc3LjIzNVY0MS44MjMySDY1LjM1MjZWMjkuOTQwOVoiIGZpbGw9ImJsYWNrIi8+DQo8L3N2Zz4NCg==\"","module.exports = __webpack_public_path__ + \"static/media/Feedback.22ef3824.svg\";","module.exports = __webpack_public_path__ + \"static/media/Help.6a3a2895.svg\";","module.exports = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI5IiBoZWlnaHQ9IjEwNiIgdmlld0JveD0iMCAwIDEyOSAxMDYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cGF0aCBkPSJNNS4yNSAxNy42NzVDNS4yNSAxNy42NzUgMTQuMTU2MiA1LjggMzQuOTM3NSA1LjhDNTUuNzE4OCA1LjggNjQuNjI1IDE3LjY3NSA2NC42MjUgMTcuNjc1VjEwMC44QzY0LjYyNSAxMDAuOCA1NS43MTg4IDk0Ljg2MjUgMzQuOTM3NSA5NC44NjI1QzE0LjE1NjIgOTQuODYyNSA1LjI1IDEwMC44IDUuMjUgMTAwLjhWMTcuNjc1WiIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIxMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8cGF0aCBkPSJNNjQuNjI1IDE3LjY3NUM2NC42MjUgMTcuNjc1IDczLjUzMTIgNS44IDk0LjMxMjUgNS44QzExNS4wOTQgNS44IDEyNCAxNy42NzUgMTI0IDE3LjY3NVYxMDAuOEMxMjQgMTAwLjggMTE1LjA5NCA5NC44NjI1IDk0LjMxMjUgOTQuODYyNUM3My41MzEyIDk0Ljg2MjUgNjQuNjI1IDEwMC44IDY0LjYyNSAxMDAuOFYxNy42NzVaIiBzdHJva2U9ImJsYWNrIiBzdHJva2Utd2lkdGg9IjEwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjwvc3ZnPg0K\"","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyNi4zLjEsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHZpZXdCb3g9IjAgMCAxNjQgMTkyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxNjQgMTkyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8cGF0aCBmaWxsPSJibGFjayIgZD0iTTE1MC4zLDAuOWgtODJjLTMuNiwwLTcuMSwxLjQtOS43LDRjLTIuNiwyLjYtNCw2LTQsOS42djIwLjRoMTMuN1YxNC41aDgydjE2My4zaC04MnYtMjAuNEg1NC43djIwLjRjMCwzLjYsMS40LDcuMSw0LDkuNg0KCWMyLjYsMi42LDYsNCw5LjcsNGg4MmMzLjYsMCw3LjEtMS40LDkuNy00YzIuNi0yLjYsNC02LDQtOS42VjE0LjVjMC0zLjYtMS40LTcuMS00LTkuNkMxNTcuNCwyLjMsMTU0LDAuOSwxNTAuMywwLjl6Ii8+DQo8cGF0aCBmaWxsPSJibGFjayIgIGQ9Ik01MC43LDY0LjlMMjYuMiw4OS4zSDEyM3YxMy42SDI2LjJsMjQuNSwyNC40bC05LjcsOS42TDAsOTYuMWw0MS00MC44TDUwLjcsNjQuOXoiLz4NCjwvc3ZnPg0K\"","module.exports = __webpack_public_path__ + \"static/media/Profile.39f7f989.svg\";","module.exports = __webpack_public_path__ + \"static/media/Watchlist.e35b45e7.svg\";","module.exports = __webpack_public_path__ + \"static/media/bank-link-icon.73f705c3.svg\";","const data = {\r\n\t\"width\": 256,\r\n\t\"height\": 180,\r\n\t\"body\": \"<path fill=\\\"red\\\" d=\\\"M250.346 28.075A32.18 32.18 0 0 0 227.69 5.418C207.824 0 127.87 0 127.87 0S47.912.164 28.046 5.582A32.18 32.18 0 0 0 5.39 28.24c-6.009 35.298-8.34 89.084.165 122.97a32.18 32.18 0 0 0 22.656 22.657c19.866 5.418 99.822 5.418 99.822 5.418s79.955 0 99.82-5.418a32.18 32.18 0 0 0 22.657-22.657c6.338-35.348 8.291-89.1-.164-123.134Z\\\"/><path fill=\\\"#FFF\\\" d=\\\"m102.421 128.06l66.328-38.418l-66.328-38.418z\\\"/>\"\r\n};\r\nexports.__esModule = true;\r\nexports.default = data;\r\n","const data = {\r\n\t\"width\": 256,\r\n\t\"height\": 256,\r\n\t\"body\": \"<path fill=\\\"#1ED760\\\" d=\\\"M128 0C57.308 0 0 57.309 0 128c0 70.696 57.309 128 128 128c70.697 0 128-57.304 128-128C256 57.314 198.697.007 127.998.007l.001-.006Zm58.699 184.614c-2.293 3.76-7.215 4.952-10.975 2.644c-30.053-18.357-67.885-22.515-112.44-12.335a7.981 7.981 0 0 1-9.552-6.007a7.968 7.968 0 0 1 6-9.553c48.76-11.14 90.583-6.344 124.323 14.276c3.76 2.308 4.952 7.215 2.644 10.975Zm15.667-34.853c-2.89 4.695-9.034 6.178-13.726 3.289c-34.406-21.148-86.853-27.273-127.548-14.92c-5.278 1.594-10.852-1.38-12.454-6.649c-1.59-5.278 1.386-10.842 6.655-12.446c46.485-14.106 104.275-7.273 143.787 17.007c4.692 2.89 6.175 9.034 3.286 13.72v-.001Zm1.345-36.293C162.457 88.964 94.394 86.71 55.007 98.666c-6.325 1.918-13.014-1.653-14.93-7.978c-1.917-6.328 1.65-13.012 7.98-14.935C93.27 62.027 168.434 64.68 215.929 92.876c5.702 3.376 7.566 10.724 4.188 16.405c-3.362 5.69-10.73 7.565-16.4 4.187h-.006Z\\\"/>\"\r\n};\r\nexports.__esModule = true;\r\nexports.default = data;\r\n","const data = {\r\n\t\"width\": 256,\r\n\t\"height\": 209,\r\n\t\"body\": \"<path fill=\\\"#55acee\\\" d=\\\"M256 25.45a105.04 105.04 0 0 1-30.166 8.27c10.845-6.5 19.172-16.793 23.093-29.057a105.183 105.183 0 0 1-33.351 12.745C205.995 7.201 192.346.822 177.239.822c-29.006 0-52.523 23.516-52.523 52.52c0 4.117.465 8.125 1.36 11.97c-43.65-2.191-82.35-23.1-108.255-54.876c-4.52 7.757-7.11 16.78-7.11 26.404c0 18.222 9.273 34.297 23.365 43.716a52.312 52.312 0 0 1-23.79-6.57c-.003.22-.003.44-.003.661c0 25.447 18.104 46.675 42.13 51.5a52.592 52.592 0 0 1-23.718.9c6.683 20.866 26.08 36.05 49.062 36.475c-17.975 14.086-40.622 22.483-65.228 22.483c-4.24 0-8.42-.249-12.529-.734c23.243 14.902 50.85 23.597 80.51 23.597c96.607 0 149.434-80.031 149.434-149.435c0-2.278-.05-4.543-.152-6.795A106.748 106.748 0 0 0 256 25.45\\\"/>\"\r\n};\r\nexports.__esModule = true;\r\nexports.default = data;\r\n","const data = {\r\n\t\"width\": 256,\r\n\t\"height\": 256,\r\n\t\"body\": \"<path fill=\\\"#0A66C2\\\" d=\\\"M218.123 218.127h-37.931v-59.403c0-14.165-.253-32.4-19.728-32.4c-19.756 0-22.779 15.434-22.779 31.369v60.43h-37.93V95.967h36.413v16.694h.51a39.907 39.907 0 0 1 35.928-19.733c38.445 0 45.533 25.288 45.533 58.186l-.016 67.013ZM56.955 79.27c-12.157.002-22.014-9.852-22.016-22.009c-.002-12.157 9.851-22.014 22.008-22.016c12.157-.003 22.014 9.851 22.016 22.008A22.013 22.013 0 0 1 56.955 79.27m18.966 138.858H37.95V95.967h37.97v122.16ZM237.033.018H18.89C8.58-.098.125 8.161-.001 18.471v219.053c.122 10.315 8.576 18.582 18.89 18.474h218.144c10.336.128 18.823-8.139 18.966-18.474V18.454c-.147-10.33-8.635-18.588-18.966-18.453\\\"/>\"\r\n};\r\nexports.__esModule = true;\r\nexports.default = data;\r\n","const data = {\r\n\t\"width\": 24,\r\n\t\"height\": 24,\r\n\t\"body\": \"<path fill=\\\"currentColor\\\" d=\\\"M22.539 8.242H1.46V5.406h21.08v2.836zM1.46 10.812V24L12 18.11L22.54 24V10.812H1.46zM22.54 0H1.46v2.836h21.08V0z\\\"/>\"\r\n};\r\nexports.__esModule = true;\r\nexports.default = data;\r\n","module.exports = __webpack_public_path__ + \"static/media/analyze2.def492bc.svg\";","module.exports = __webpack_public_path__ + \"static/media/analytics.96f2c1d2.svg\";","const data = {\r\n\t\"width\": 24,\r\n\t\"height\": 24,\r\n\t\"body\": \"<path fill=\\\"currentColor\\\" d=\\\"M12 4a4 4 0 0 1 4 4a4 4 0 0 1-4 4a4 4 0 0 1-4-4a4 4 0 0 1 4-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4Z\\\"/>\"\r\n};\r\nexports.__esModule = true;\r\nexports.default = data;\r\n","const data = {\n\t\"width\": 24,\n\t\"height\": 24,\n\t\"body\": \"<path fill=\\\"currentColor\\\" d=\\\"M18 22q-1.25 0-2.125-.875T15 19q0-.175.025-.363q.025-.187.075-.337l-7.05-4.1q-.425.375-.95.587Q6.575 15 6 15q-1.25 0-2.125-.875T3 12q0-1.25.875-2.125T6 9q.575 0 1.1.212q.525.213.95.588l7.05-4.1q-.05-.15-.075-.337Q15 5.175 15 5q0-1.25.875-2.125T18 2q1.25 0 2.125.875T21 5q0 1.25-.875 2.125T18 8q-.575 0-1.1-.213q-.525-.212-.95-.587L8.9 11.3q.05.15.075.337Q9 11.825 9 12t-.025.362q-.025.188-.075.338l7.05 4.1q.425-.375.95-.588Q17.425 16 18 16q1.25 0 2.125.875T21 19q0 1.25-.875 2.125T18 22Z\\\"/>\"\n};\nexports.__esModule = true;\nexports.default = data;\n","const data = {\r\n\t\"width\": 24,\r\n\t\"height\": 24,\r\n\t\"body\": \"<path fill=\\\"currentColor\\\" d=\\\"M17 13h-4v4h-2v-4H7v-2h4V7h2v4h4m-5-9A10 10 0 0 0 2 12a10 10 0 0 0 10 10a10 10 0 0 0 10-10A10 10 0 0 0 12 2Z\\\"/>\"\r\n};\r\nexports.__esModule = true;\r\nexports.default = data;\r\n","module.exports = __webpack_public_path__ + \"./fonts/SpaceMono-Regular.ttf\";","module.exports = __webpack_public_path__ + \"./fonts/K2D-Regular.ttf\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAIBAMAAAA7P9P/AAAAFVBMVEUAAAAAAAAAAABHcEwAAAAAAAAAAAAsXusGAAAABnRSTlPUFhUAxLV788luAAAAQ0lEQVQI12MIUTY2NjZyZXBjAtIKKQwCCcrGRmyMDIZsTMYKCcIMxgIJSmyMxgzGhmwMCcJA2lggjdEYRBu5CBsbAwA6HgmSu7c8IwAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADfSURBVHgB3ZVhDYMwEIVfMDAkzMEszMEqoRJwAA6oA+ZgszAFzEEzBZuDrc1oUkjbO0p/8SXvz+XuHeXKAeyd2qgxuhlpo++kcYpJbEAYvT3TmHROo55hvFTLNW8zzJ16ylwSBsroSuSIVANNFDtSOXZudc7TcxtYNS6x8oouKMc51OCIcpxCweUxB/BRiLzOKlH0AZ8DJ4m6QWuGPLpE/wRPlOMVavBAOe6hoP04qOXmoJZfFEEUD6AXoQSBAj3EmDow6TLMFVYiwbu6dm4CG5D4/x5HzAdpY3ap1dg1PyNVyJlgDEwbAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAAAcklEQVRIDWNgGAWjIYAcAgqGtltBGFmMEJuFkAIU+f//vVD4RHCYiFBDkZJRCwgGHyM2FeCUQmqEMjJue3D+sDe6eVSLA8b/DP/RDSeZr2Bg8x+ESdFINR/gsnTUAlwhAxcnrSwCJkWqpBa49aOMYRECANa7E7ZM1CXvAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/has-notification-active.b9317cb3.png\";","module.exports = __webpack_public_path__ + \"static/media/has-notification.76af1056.png\";","module.exports = __webpack_public_path__ + \"static/media/portfolio-active.efe3924c.png\";","module.exports = __webpack_public_path__ + \"static/media/portfolio.e8bf12f0.png\";","module.exports = __webpack_public_path__ + \"static/media/feed-active.7796425f.png\";","module.exports = __webpack_public_path__ + \"static/media/feed.31fac6f4.png\";","module.exports = __webpack_public_path__ + \"static/media/search-active.cc2d6f99.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAoCAYAAAB99ePgAAAACXBIWXMAAAsTAAALEwEAmpwYAAADFklEQVRYhc2YC08TQRSFv4IgCGhriIGqIIKCD/CBAopgwkOpgFAUKC3bxP//J8wkZ/RmAu3udDfhJJNtd/feOXPv3Mcs9IZS8H8QuA9MAbMa7ncZGOgiWwj6gWlgAzgGzoEmcKnR1L0j4DPwGOgrioxd8QywD7QMmQRo62rHpRk/ZNGrdPZM7DawaSzT0jgBtoBlYBFYAj4A28Cv4H33e924uyeCXngM+ClrNDTJN+ApMNRBfhiYA2qSaUiHs+JIHgRHtK9assAp8OyahdgRPnupfXghoociHw23ifeMa46ASjBpN9h3xoG6IbgbYzkv8E4b3Smry71pSV2ns6x9eiHdb2J0lo0b3JjogVhIsGr0ujnuZVW0atLBSg7EQoIfTRpyc6XGHaUBFwS/gVHyx6iCqyk3D6dd1ROTPNcKIFbS9ZOZZyat0Ipx6XTwLA94XdPyTibXbkngLEgdRbk2UVLvilvK4Imqgus6isKgkrGb6yBNczBoStVhkd0E/5N8Wwm+qyEGtIpEAs6SRaFfdbctg4T935XYFbmTgtKIx5DqdqI2LFUUrUvA5aDJ4FmeqJhOxQVhR3gCCyZ7LwXP8oDXNW/meZtlRefKQfvaG0Vgx3Q83kOpsC3BlprKvGvrpOmQ99NmBS88ZVZl811eBL9Lt3Ppixjd3npubF6xgFgsm4UfxKarssqL71xXIgnad1/JlX5PVyP0/cOCyDVEcEMnMTvxdYrt/T6dyjyxtskEUVhVQXbtelMkW9qDsynd4Qg+Ck5gbRGNxqKUtVX/5uView51++W9Jh9Txh/SiW1COvbMyc3LufuZ4d0wJxLnunrzV0xu8mkmkUVPdQiqm32amMO3L1HVXog91Ap9WXGRFWJKkezJJx3GhVz6PDaZl8y58swQczW2EyoKmDU1CzUNl8O+AK+BB0FgZIpK//Jdc568VCFOE4VERG7mjzQHZn/UMnxsKUU+S4U+ucRH4XFeH1nywNcg4io3hdiq+azVyOmTQy5YEjFf49xB+kYQWzDEoluWojCubP1HdfPGYazXrqAI/AWJsGc6P11vXQAAAABJRU5ErkJggg==\"","module.exports = __webpack_public_path__ + \"static/media/bookmark-active.a74f9155.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAoCAYAAAAPOoFWAAAACXBIWXMAAAsTAAALEwEAmpwYAAABbklEQVRYhe2XTU8CMRRFT1E3LiWRja4QBFyqgAqGOLIxEfnQ//9XzCO3SR0HKcwMcTEveXlhBu55vW1JC9AEJsC4xJyIwxRYKj9LyKXSOCTAB3AHdIGbArMrXdN/8TAj1ykn6tL/AWvopSsI4lQbh4SdZ8HsYQWLCada2ZgrnGplY65wqpWNucKpVjbmCqda2fg/bDw9FKwHzIB22bAesBDM6nVZsBA0VZ3/McK9YV0JL3TCPQJu9Xm+ARgFS0dHgpb91Lt7Ae143drw++iRtYMRDTK6TgOvdh2Z/1JLAiY03LJw+gGwGQPzx2/UoQc9RO69QQZw61k/BD0CtQgQamiYAfwFWwFnwGUwR08BKPay4eSEB15Id+Vhr9oztqTf1MVIy3sXkI+aHFlKz18GkxD2ro7GOUAuBVxId+ZhiR6Yfc/A8Z4gMoA2FaZr+muY/fV8FQRKA80hmxLTX1/gbdXYPjkpCJQG2gBs43e+AWheWzD4nGQdAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAoCAYAAAC4h3lxAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB6UlEQVRYhe2YPS8EURSGn5lllyg0QkFBKCQ+ExoKwg/wFa3KPxBaBYVGo9ZR6UQiVin+gZVoSUQnQmR9zO5cmTizublGrEJyRvYkT+7s3Fu8Z+45956z8GmejA1APzAMDClkEGjGsVj8MnALlIBARk0EMt4D664TS4BJGRv2DlzJy3cgVE4gWh+BtsiBdvlhnIVGIaHDRORAE3AnC0rOQm3CDVCW5yhaeuMw2pbJQCY08yZaj+wkzgIHCr60qZJzoNU9RiObBlaAVcXMWJor2j3HkTSYl/TSB+qAjFLqZKxZzf4qKTKCr5SM8CWBo8m0me8+tACbwAlwCuRl1EDe0rMD9LhOdALXCm5YUyXPwLi9HYcy8SL1kGZeRWshzoUW6XLsSk9bNWoSSulI6wjSFDwkLDLKHQiBsTiEzqwQKinnTbTeAI2xA6NAUcFXNr9g0T1G+6UnuJAEibhUREE4BqZEs5d0kUUVX06aHE3kgPqki8x+kYZS1U9p5VCz9JXUGaX434lPU2J43zX13cAcsKCYAceRim1Z17RmQmBP7oWKrVkLSsopi87dWHzWamYCBX+fhz8QO1CURowO4MkpWTWHT2gx+S92ICkHysoxdg7Yp9C7gjAxVbDvnkKxdQGzct7OK6XP0ut9AF3v9ga2MivCAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/flatgrad.0b9cb975.png\";"],"sourceRoot":""}
{"version":3,"sources":["lds.tsx","Authentication.tsx","SecurityList.ts","utils/logger.ts","utils/notifications.ts","components/SvgExpo.web.tsx","images.tsx","constants/Colors.ts","style.ts","utils/hooks.tsx","components/LabeledField.tsx","components/PrimaryButton.tsx","components/SecondaryButton.tsx","components/ButtonField.tsx","components/TextField.tsx","utils/validators.ts","components/ScrollWithButtons.tsx","utils/misc.tsx","screens/create_account/shared.ts","components/Link.tsx","screens/create_account/AccountInfoSection.tsx","components/Headers.tsx","components/Section.tsx","components/Picker.tsx","components/Slider.tsx","components/AddButton.tsx","components/KeyboardAvoidingInput.tsx","screens/create_account/InvestmentInterestSection.tsx","components/IconfiyIcon.tsx","utils/third-party/twitter.ts","utils/third-party/youtube.ts","utils/third-party/shared.ts","components/YourContentComponent.tsx","components/ProfileButton.tsx","components/NoDataPanel.tsx","components/List.tsx","components/WatchlistPicker.tsx","components/Themed.tsx","hooks/useColorScheme.ts","screens/create_account/AnalystStartSection.tsx","components/Table.tsx","components/LinkBrokerageComponent.tsx","components/ToolTip.tsx","components/SwitchField.tsx","screens/SubscriptionScreen.tsx","components/HtmlView.web.tsx","screens/CreateAccountScreen.tsx","screens/create_account/BasicInfoSection.tsx","screens/create_account/PickWatchlistSection.tsx","screens/create_account/LinkBrokerageSection.tsx","screens/create_account/YourContentSection.tsx","screens/create_account/SubscrpitionCostSection.tsx","screens/create_account/ProfileIconSection.tsx","screens/create_account/TermsScreen.tsx","screens/create_account/PrivacyScreen.tsx","navigation/LinkingConfiguration.ts","screens/NotFoundScreen.tsx","components/ProfileBanner.tsx","components/ProfileBar.tsx","components/PrimaryChip.tsx","components/IconButton.tsx","components/AsyncPressable.tsx","components/ShareButton.tsx","components/PostView.tsx","components/PostList.tsx","components/MultiTermFeed.tsx","components/WatchlistItemRenderItem.tsx","screens/WatchlistViewerScreen.tsx","components/WatchlistSection.tsx","components/PlusContentButton.tsx","screens/FeedScreen.tsx","charts-js/animated-path.js","charts-js/chart/chart.js","charts-js/area-chart.js","charts-js/stacked-area-chart.js","charts-js/bar-chart/bar-chart.js","charts-js/bar-chart/bar-chart-grouped.js","charts-js/stacked-bar-chart/stacked-bar-chart.js","charts-js/stacked-bar-chart/stacked-bar-grouped.js","charts-js/line-chart/line-chart.js","charts-js/chart/chart-grouped.js","charts-js/line-chart/line-chart-grouped.js","charts-js/line-chart/index.js","charts-js/progress-circle.js","charts-js/x-axis.js","charts-js/y-axis.js","charts-js/chart-decorators/horizontal-line.js","charts-js/chart-decorators/point.js","charts-js/chart-decorators/tooltip.js","charts-js/grid.js","components/InteractiveGraph.tsx","components/ButtonGroup.tsx","components/HoldingRenderItem.tsx","components/TradeRenderItem.tsx","screens/ProfileScreen.tsx","components/LoginButtons.tsx","screens/WelcomeScreen.tsx","components/SideMenu.tsx","screens/NotificationScreen.tsx","screens/BlockListModalScreen.tsx","screens/PortfolioScreen.tsx","components/SearchBar.tsx","navigation/BottomTabNavigator.tsx","screens/SearchScreen.tsx","navigation/DrawerNavigator.tsx","screens/AccountSettingsScreen.tsx","screens/AccountInfoScreen.tsx","screens/AuthScreen.tsx","screens/ChangePasswordScreen.tsx","screens/CompanyScreen.tsx","screens/ImagePicker.tsx","screens/NotificationTradeScreen.tsx","components/TextEditor.web.tsx","screens/PostEditorScreen.tsx","components/CommentView.tsx","components/CommentList.tsx","screens/PostScreen.tsx","screens/TableModalScreen.tsx","screens/VerificationScreen.tsx","components/VirtualListWithButtons.tsx","screens/WatchlistEditorScreen.tsx","screens/WatchlistScreen.tsx","screens/AppInformationScreen.tsx","screens/BrokeragePickerScreen.tsx","screens/IbkrInfoScreen.tsx","screens/RobinhoodLoginScreen.tsx","navigation/RootNavigator.tsx","navigation/index.tsx","App.tsx","index.js","hooks/useCachedResources.ts","assets/@iconify/keyboard-close.js","assets/post-feed/bookmark-active.svg","assets/post-feed/bookmark-active-blue.svg","assets/side-menu/Information.svg","assets/logo.svg","assets/logo-no-bg.svg","assets/nav-bar/notification-active.png","assets/nav-bar/notification.png","assets/store-front-logo2-alt.svg","assets/store-front.svg","assets/app-title.svg","assets/splash-welcome.svg","assets/ClimbingMountain.svg","assets/Debate.svg","assets/Studying.svg","assets/analyze.svg","assets/bank.svg","assets/IBKR.svg","assets/robinhood_logo.svg","assets/robinhood_logo_long.svg","assets/misc/plus.svg","assets/post-feed/upvote.svg","assets/post-feed/comment.svg","assets/post-feed/bookmark.svg","assets/post-feed/ei_retweet.svg","assets/post-feed/PremiumStar.svg","assets/post-feed/SendIcon.svg","assets/side-menu/Account.svg","assets/side-menu/Competition.svg","assets/side-menu/Feedback.svg","assets/side-menu/Help.svg","assets/side-menu/Learn.svg","assets/side-menu/Log Out.svg","assets/side-menu/Profile.svg","assets/side-menu/Watchlist.svg","assets/bank-link-icon.svg","assets/@iconify/youtube-icon.js","assets/@iconify/spotify-icon.js","assets/@iconify/twitter.js","assets/@iconify/linkedin-icon.js","assets/@iconify/substack.js","assets/analyze2.svg","assets/analytics.svg","assets/@iconify/user.js","assets/@iconify/share.js","assets/@iconify/plus-circle.js","assets/fonts/SpaceMono-Regular.ttf","assets/fonts/K2D-Regular.ttf","assets/rnui/chevronDown.png","assets/rnui/add.png","assets/rnui/plus.png","assets/nav-bar/has-notification-active.png","assets/nav-bar/has-notification.png","assets/nav-bar/portfolio-active.png","assets/nav-bar/portfolio.png","assets/nav-bar/feed-active.png","assets/nav-bar/feed.png","assets/nav-bar/search-active.png","assets/nav-bar/search.png","assets/nav-bar/bookmark-active.png","assets/nav-bar/bookmark.png","assets/nav-bar/menu.png","assets/post-feed/flatgrad.png","webpack:///./components/TextEditor.css?ebe6","components/TextEditor.css"],"names":["lds","isCachedMap","authToken","hasAuthed","isExplirable","securities","duration","useData","key","expireCheck","cachedAt","Date","now","setValue","undefined","useState","value","_setValue","useEffect","sub","EventRegister","addEventListener","data","removeEventListener","useCallback","v","cachedLds","Object","keys","forEach","k","AsyncStorage","setItem","JSON","stringify","emit","initLds","result","getItem","parse","securityListTask","useAppUser","tracker","_appUser","setAppUser","_loginResult","setLoginResult","setAuthToken","nav","useNavigation","createLoginState","currentUser","loginResult","updated","appUser","user_id","token","setupStatus","needsSettings","settings","length","needsAnalystSettings","Boolean","analyst","analyst_profile","loginState","setLoginState","console","log","forceTrigger","updateState","signIn","email","pass","Authentication","signOut","Auth","navigate","login","User","get","enableVerbose","error","err","tryCatch","action","ex","Log","enabled","verbose","msg","registerDeviceForNotifications","Device","existingStatus","Notifications","status","finalStatus","Api","Notification","extensions","registerUserDevice","provider","Platform","OS","deviceId","timezone","Localization","name","importance","MAX","vibrationPattern","lightColor","fetchSecurities","list","Security","byId","bySymbol","r","id","symbol","getSecurityList","useSecuritiesList","setErr","setSecurities","localValue","setLocalValue","then","catch","SvgExpo","props","url","children","type","lastRef","useRef","onReadyRef","onReady","current","divRef","svgData","setSvgData","fetch","ok","statusText","text","setTimeout","View","style","ref","height","width","justifyContent","alignContent","alignItems","display","dangerouslySetInnerHTML","__html","sideMenu","Account","Competition","Feedback","Information","Help","Learn","LogOut","Profile","Watchlist","Bank_Link","BookmarkActive","_BookmarkActive","BookmarkInactive","_BookmarkInactive","BookmarkActiveBlue","_BookmarkActiveBlue","makeExpoSvg","Svg","AppTitle","_AppTitle","SplashWelcome","_SplashWelcome","ClimbingMountain","_ClimbingMountain","Debate","_Debate","Studying","_Studying","Analyze","_Analyze","Bank","_Bank","IBKR","_IBKR","RobinhoodLogo","_RobinhoodLogo","Retweet","_RobinhoodLogoLong","_IconBg","_IconNoBg","_PlusIcon","_Retweet","UpvoteIcon","_UpvoteIcon","CommentIcon","_CommentIcon","SendIcon","_SendIcon","InfoIcon","PremiumStar","_PremiumStar","NavIconTypeOverride","require","no","active","inactive","has","navIcons","BookmarkIcons","social","TwitterLogo","LinkedInLogo","YouTubeLogo","SubstackLogo","SpotifyLogo","light","background","tint","tabIconDefault","tabIconSelected","dark","AppColors","flex","row","flexDirection","shadow","elevation","shadowOffset","shadowColor","shadowOpacity","shadowRadius","noMargin","marginTop","marginRight","marginBottom","marginLeft","fonts","xSmall","small","medium","large","xLarge","font","size","color","isBold","fontSize","fontWeight","sizes","paddView","padding","backgroundColor","elevated","marginHorizontal","paddingVertical","borderColor","borderWidth","borderRadius","bannerText","textAlign","margin","lineHeight","thinBannerText","marginVertical","textInputWiz","useOpacityAnim","opacityAnim","Animated","Value","timing","delay","toValue","useNativeDriver","start","useMemo","BannerText","Text","opacity","AppearView","styleProp","Symbol","iterator","unshift","useReadonlyEntity","seedValue","setData","hasChanged","setHasChanged","resetData","d","update","updates","_entity","bindTextInput","entity","converter","onChangeText","bindTextInputBase","valueKey","onChangeTextKey","bindKeys","output","fromType","toType","bindPicker","onSelect","item","useIsKeyboardVisible","isKeyboardVisible","setIsKeyboardVisible","useLayoutEffect","showSubscription","Keyboard","addListener","hideSubscription","remove","LabeledField","sz","compact","leftElement","label","PrimaryButton","AltPrimaryButton","SecondaryButton","AltSecondaryButton","ButtonField","_isActive","setIsActive","buttonLabel","disabled","disabledText","activeText","inactiveText","isActive","bProps","onPress","ev","a","secondary","TextField","rnuRef","caption","setCaption","valueTracker","setValueTracker","validate","textInputRef","errorMessage","field","numberOfLines","spellCheck","autoCorrect","editable","accessoryLeft","accessoryRight","onSubmitEditing","textProps","markRequired","t","validateOnChange","newCaption","category","secureTextEntry","returnKeyType","placeholder","isValidEmail","test","isRequired","replace","ScrollWithButtons","ScrollView","nestedScrollEnabled","contentContainerStyle","fillHeight","maxHeight","buttons","ButtonPanel","viewProps","borderTopColor","borderTopWidth","paddingTop","paddingBottom","zIndex","left","locked","right","TBI","warn","toPercent","number","numeral","format","toPercent2","toNumber1","toFormatedDateTime","dateTimeString","m","getMonth","getDate","y","getFullYear","h","getHours","min","getMinutes","ampm","String","toDollars","toDollarsAndCents","split","sideMargin","Link","Pressable","AccountBasicInfo","refs","isAuthed","agreeToTerms","setAgreeToTerms","agreeToPrivacy","setAgreeToPrivacy","linkTo","useLinkTo","loginEntity","confirm","c","password","checked","onChange","Header","Subheader","Section","title","useSubHeading","alt","button","Subsection","ElevatedSection","paddingHorizontal","Picker","Array","items","map","filter","join","find","selectedIndex","multiSelect","i","idx","_item","IndexPath","findIndex","Image","source","uri","iconUrl","Slider","MultiSlider","AddButton","fill","EditButton","SettingsButton","DeleteButton","ExitButton","FavButton","isSelected","KeyboardAvoidingInput","KeyboardAvoidingView","behavior","multiline","numLines","nextValue","paddingLeft","displayButton","clicked","onClick","item_id","rightIcon","investmentStrats","questionStyle","gicsAC","sort","IconifyIcon","DEBUG","icon","xml","currentColor","body","svg","svgProps","pressableProps","redirectUriText","getCallBackUrl","URL","platform","AppOwnership","Expo","Constants","appOwnership","manifest","hostUri","makeRedirectUrl","YourContentComponent","toast","useToast","inputMessage","setInputMessage","inputPlatform","setInputPlatform","inputValue","setInputValue","getTwitterToken","state","uuid","v4","intervalHandler","openAuth","removeItem","_challenge","Math","random","toString","substring","authUrl","searchParams","append","openBrowserAsync","code","Promise","res","rej","clearInterval","setInterval","linkSocialAccount","callbackUrl","challenge","useTwitterAuth","getGoogleToken","googleUrl","encodeURIComponent","useGoogleAuth","userClaims","claims","handle","twitterHandle","setTwitterHandle","substackUsername","spotifyShow","youtubeChannel","setYoutubeChannel","iconPadd","socialStyling","s","platform_idenifier","show","HandleButton","fontStyle","ProfileButton","userId","alignSelf","overflow","profileUrl","NoDataPanel","message","List","internalData","setInternalData","preloadOffset","datasetKey","currentPage","setCurrentPage","pagesDone","setPagesDone","isLoadingRef","maxItem","setMaxItem","setTriggerHack","sizeCache","datasetKeyRef","maxPage","hack","nextPage","originalLength","newData","vp","viewabilityConfig","itemVisiblePercentThreshold","onViewableItemsChanged","max","viewableItems","vi","index","curMax","needsSplice","maxDisaplyCount","FlatList","listKey","horizontal","getItemLayout","b","numColumns","ListHeaderComponent","ListFooterComponent","maxDisaplyText","stickyHeaderIndices","loadingItem","slice","keyExtractor","renderItem","viewabilityConfigCallbackPairs","noDataMessage","loadingMessage","cellStyle","flexGrow","aspectRatio","flexBasis","empty","useWatchlistPicker","selectedItems","setSelectedItems","selectionConverter","onSelectedItemschanged","symbolConverter","WatchlistPicker","searchText","setSearchText","setDatasetKey","securitiesLoaded","_selectedItems","_symbols","_s","delayRef","clearTimeout","RegExp","security_name","aStartsWith","bStartsWith","localeCompare","gap","from","push","isSec","onPressed","selectedClone","SecurityCell","innerSelected","setInnerSelected","shape","logo_url","resizeMode","position","bottom","top","useThemeColor","colorName","theme","_useColorScheme","colorFromProps","Colors","darkColor","otherProps","Table","columns","rowPressed","columnStyle","headerStyle","headerAlias","columnDynamicStyle","columnsToString","align","Theme","alias","dynamicStyle","hideHeader","info","elevatedView","colStyle","FieldElem","evaluatedStyle","evaluatedValue","renderAuxItem","alert","description","options","extra","window","confirmOption","cancelOption","Alert","LinkBrokerageComponent","accounts","setAccounts","intervalRef","needsRefresh","brokerLink","setLink","removeAccount","generateBrokerageLink","link","getBrokerageAccounts","accountId","brokerage","Brokerage","scheduleForDeletion","useFocusEffect","React","buttonProps","acc","broker_name","TooltipComponent","visible","setVisible","anchor","appearance","minHeight","minWidth","translateY","translateX","backdropStyle","placement","onBackdropPress","SwitchField","viewStyle","toggleStyle","toolTipText","textStyle","SubscriptionScreen","setIndex","mySubscriptionsCall","Subscriber","getBySubscriber","mySubscribersCall","getByOwner","subscriptions","setSubscriptions","subscribers","setSubscribers","buttonClick","setButtonClick","subtionTask","suberTask","all","p","navigation","indicatorStyle","subscription","user","profile_url","cost","toLocaleDateString","approved","flexShrink","removeSubscription","subscriptionId","subscription_id","SubscriptionSettingsScreen","SubscriptionSettingsView","call","Subscription","getByUserId","submit","insert","goBack","submitRef","pow","approve_new","HtmlView","scrolling","src","isUrl","srcDoc","screens","lockButtons","setLockButtons","setAgrreeToPrivacy","first","last","username","buttonConfig","canGoBack","screen","errors","val","toastMessage","Error","createLogin","json","policy","setFirstTime","createUser","first_name","last_name","converterRef","WatchlistApi","push_notifications","mentions","upvotes","watchlist_changes","portfolio_display","performance","holdings","trades","anaylistProfile","investment_strategy","portfolio_concentration","benchmark","interests","bio","setBio","sliderWidth","setSliderWidth","acText","setAcText","acValues","g","addIfMissing","int","toLowerCase","benches","is_benchmark","onLayout","nativeEvent","layout","containerStyle","step","sliderLength","values","onValuesChange","newInterest","splice","screenKeys","subScreen","userState","display_name","tags","route","params","resolvedIndex","caProps","insets","useSafeAreaInsets","swipeEnabled","tabBarStyle","shouldLoadComponent","Screen","ConfigOverride","path","linking","prefixes","Linking","config","Root","Create","Dash","PostScreen","AccountInformation","VerifyAccount","ResetPassword","NotificationTrade","WatchlistViewer","Modal","NotFound","getStateFromPath","routes","$replace","getActionFromState","NotFoundScreen","styles","container","TouchableOpacity","linkText","StyleSheet","create","profileImageSize","profileImageSmall","actionPanelSize","profileImageStyle","profileImageSmallStyle","bannerAspectRatio","ProfileBanner","profilePic","collapse","extraMarginTop","maxWidth","transform","subscriberCount","platforms","ProfilePic","editMode","navigator","onProfilePicked","SocialBar","logoName","logo","UserLogo","ProfileBar","openProfile","PrimaryChip","isAlt","IconButton","iconSource","AsyncPressable","isDisabled","setIsDisabled","ShareButton","Share","share","ShareIcon","postTotalVerticalMargin","postTotalHorizontalMargin","postSidePad","spaceOnSide","postInnerHeight","itm","windowWidth","_source","postType","resolvePostContent","postUrl","content","htmlBody","matches","exec","PostView","post","ext","is_bookmarked","isBookmarked","setIsBookmarked","is_upvoted","isUpvoted","setIsUpvoted","upvoteCount","setUpvoteCount","showStatus","setShowStatus","postTotalBorder","borderBottomColor","borderBottomWidth","showsHorizontalScrollIndicator","chip","resp","Post","setBookmarked","_id","includes","paddingRight","evaProps","setUpvoted","count","parseHtmlEnteties","str","match","numStr","num","parseInt","fromCharCode","PostContentView","useWindowDimensions","availWidth","scale","openURL","socialStyle","fontFamily","parsedText","platformCreatedAt","SubstackView","subscription_level","tradingpostCreatedAt","PostList","offset","posts","MultiTermFeedPart","allItems","page","multitermfeed","terms","newItems","WatchlistItemRenderItem","secId","intradayChange","price","open","securityId","shownMap","watchlist","note","onChangeNote","canEdit","hideEmptyNote","ticker","watchlistId","useNoteField","setShownMap","column","SecPressable","useWatchlistItemColumns","getIdValue","useMakeSecurityFields","iconField","secField","change","WatchlistViewerScreen","setWatchlist","isSaved","setIsFav","watchlistTickers","setWatchlistTickers","translateHeaderY","scrollRef","w","is_saved","toUpperCase","saveWatchlist","f","onScroll","event","contentOffset","NoteEditor","isEdit","setIsEdit","setNote","WatchlistSection","setFocus","fields","shared","hideNoteOnEmpty","showAddButton","watchlists","PlusContentButton","plusCircle","FeedPart","bookmarkedOnly","feed","AnimatedPath","this","newD","animate","oldD","interpolator","interpolate","_animate","cancelAnimationFrame","animation","_clearInteraction","requestAnimationFrame","timestamp","InteractionManager","createInteractionHandle","delta","animationDuration","component","setNativeProps","setState","clearInteractionHandle","Component","propTypes","PropTypes","bool","renderPlaceholder","func","Path","defaultProps","Chart","xAccessor","yAccessor","yScale","xScale","numberOfTicks","contentInset","gridMax","gridMin","clampX","clampY","mappedData","x","yValues","xValues","yExtent","array","xExtent","yMin","yMax","xMin","xMax","domain","range","clamp","paths","createPaths","ticks","extraProps","_onLayout","Children","child","belowChart","cloneElement","PureComponent","oneOfType","arrayOf","object","any","curve","AreaChart","area","y0","y1","defined","line","AreaStack","colors","order","svgs","series","areas","serie","_","string","showGrid","strokeWidth","BarChart","spacingInner","spacingOuter","paddingInner","paddingOuter","bar","_index","bandwidth","x0","x1","obj","extent","calcExtent","indexes","calcIndexes","xDomain","yDomain","calcXScale","calcYScale","calcAreas","barSvg","GroupedBarChart","_data","barWidth","collectionIndex","valueIndex","dataExtent","keyIndex","entry","entryIndex","isNaN","valueAccessor","getSeries","showZeroAxis","StackedBarGrouped","coordinatesToPathCommands","showTopBorder","showBottomBorder","commands","marker","topLeft1","topLeft2","bottomLeft1","bottomLeft2","bottomRight1","bottomRight2","topRight1","topRight2","commandsToSvgPath","command","trim","initialBorderRadius","innerBarSpace","stack","stackIndex","leftMargin","barHeight","mergedValues","stacks","indexStack","areaIndex","indexArea","LineChart","ChartGrouped","dataArray","pathSvg","LineChartGrouped","lines","LineChartGate","hasOwnProperty","ProgressCircle","progressColor","startAngle","endAngle","animateDuration","cornerRadius","progress","outerDiameter","isFinite","arcs","outerRadius","innerRadius","PI","XAxis","d3Scale","formatLabel","_getX","valueSvg","textAnchor","originX","alignmentBaseline","YAxis","getY","longestValue","reduce","prev","curr","originY","HorizontalLine","other","x2","y2","stroke","Point","radius","cx","cy","Tooltip","pointStroke","rx","ry","Horizontal","tick","Vertical","Both","dataPoints","Direction","VERTICAL","HORIZONTAL","BOTH","Grid","direction","oneOf","InteractiveChart","apx","Dimensions","date","return","dateList","priceList","positionX","setPositionX","panResponder","PanResponder","onStartShouldSetPanResponder","evt","gestureState","onStartShouldSetPanResponderCapture","onMoveShouldSetPanResponder","onMoveShouldSetPanResponderCapture","onPanResponderTerminationRequest","onPanResponderGrant","updatePosition","locationX","onPanResponderMove","onPanResponderRelease","YAxisWidth","chartWidth","xN","xDistance","Number","toFixed","verticalContentInset","panHandlers","stopColor","stopOpacity","strokeDasharray","period","dateString","toDateString","toDateMonthYear","rotation","ButtonGroup","arr","unselectedStyle","onValueChange","HoldingRenderItem","security_id","optionInfo","strike_price","expiration","isOwner","cost_basis","pnl","TradeRenderItem","quantity","amount","getUTCHours","tabBarMargin","periods","ProfileScreen","setUser","setWatchlists","setSummary","setHoldings","returns","setReturns","twReturns","settwReturns","portPeriod","setPortPeriod","dim","bannerHeight","useProfileBannerSize","headerHeight","ButtonMargin","clampMax","minViewHeight","collapsed","setCollapsed","isMaxed","setIsMaxed","translation","inputRange","outputRange","extrapolate","manager","abs","removeAllListeners","tab","setTab","getHoldings","getWatchlists","holdingsP","today","summary","getPortfolio","getReturns","startDate","setDate","endDate","twr","day","toUTCString","displayHoldings","is_subscribed","displayTrades","displayPerformance","ProfilePage","currentIndex","$page","newArr","getTrades","$limit","onMomentumScrollEnd","scrollToOffset","animated","bannerPic","is_pending","insertWithNotification","start_date","LoginButtons","createAccountProps","loginProps","cleanUp","setSelectedIndex","useInitialRoute","userRef","passRef","setUsername","setPassword","isLoggingIn","setIsLoggingIn","HTMLDivElement","stonks","n","querySelector","lastItem","lastItem2","floor","index2","forgotPassword","hideAll","WTF_View","padSmall","SideMenu","DrawerContentScrollView","MenuItem","isLast","versionCode","SvgElement","DrawerItem","closeDrawer","labelStyle","seen","NotificationTab","NewTradeNotification","dt","response","dateTime","dtFmt","getDay","flexWrap","UserInteractionNotification","SubscriptionNotification","approval","setApproval","subscriber_id","updateNotification","e","DefaultNotification","LimitedBlockList","listProps","BlockListModalScreen","stateLabel","stateValue","SearchBar","tfRef","Search","scaleX","clear","onTextChange","clearButtonMode","BottomTab","createBottomTabNavigator","DashComponents","Portfolio","quickWatchlist","setQuickWatchlist","portfolio","setPortfolio","focus","getAllWatchlists","lists","quick","saved_by_count","cummReturn","beta","sharpe","exposure","long","short","gross","net","created","saved","Feed","searchType","people","setPeople","searchSecurities","setSearchSecurities","debounceRef","search","term","modSearch","regex","company_name","notifs","setNotifs","timer","ids","seenNotifications","notificationIds","run","borderStyle","notifications","listAlerts","newNotifications","BottomTabNavigator","hasNotifications","setHasNotifications","notificationCount","unseenCount","interval","Navigator","initialRouteName","screenOptions","headerShown","unmountOnBlur","tabBarShowLabel","lazy","tabBarIcon","focused","activeType","navIcon","ImageBackground","initialParams","Drawer","createDrawerNavigator","HeaderTp","DrawerPart","useLegacyImplementation","drawerContent","headerTitleAlign","headerTitle","headerRight","routeName","getFocusedRouteNameFromRoute","useNavigationState","dismiss","KeyboardClose","isMarked","AccountSettingsScreen","mentionCheck","setMentionCheck","upvotesCheck","setUpvotesCheck","watchlistChangeCheck","setWatchlistChangeCheck","performanceCheck","setPerformanceCheck","holdingsCheck","setHoldingsCheck","tradesCheck","setTradesCheck","analystCheck","setAnalystCheck","openLink","isAnalystChecked","isPerformanceChecked","isHoldingsChecked","isTradesChecked","isMentionChecked","isUpvoteChecked","isWatchlistChangeChecked","AccountInfoScreen","definedOrValue","is_deleted","accountUpdates","setAccountUpdates","clone","setUpdates","AccountInfoContent","_updates","AdvancedTabContent","toolTipStyle","AuthScreen","ChangePasswordScreen","oldPass","setOldPass","newPass","setNewPass","setConfirm","hasToken","resetPassword","CompanyScreen","security","setSecurity","securityPrices","setSecurityPrices","isFav","setDescription","isOnQuickWatch","getPrices","includeIntraday","includeHistorical","prices","historical","close","pxChange","quickadd","add","week_52_high","week_52_low","ImagePickerScreen","imageUri","setImageUri","editorVisible","setEditorVisible","imageData","setImageData","selectPhoto","ImagePicker","granted","pickerResult","base64","cancelled","launchEditor","Button","uploadProfilePic","image","onCloseEditor","fixedCropAspectRatio","lockAspectRatio","minimumCropDimensions","onEditingComplete","resizeResult","manipulateAsync","resize","SaveFormat","JPEG","mode","NotificationTradeScreen","listTrades","newTrades","toTwoDecimals","ss","charAt","parseFloat","TextEditor","html","setHtml","pell","init","element","onChangeHtml","actions","prompt","innerHTML","className","PostEditorScreen","subLevel","setSubLevel","postEntity","photos","setLocked","editorRef","contentFocused","setContentFocused","onTouchEnd","focusContentEditor","onFocus","onBlur","initialContentHTML","editor","CommentView","comment","commentTotalBorder","created_at","CommentsList","comments","setPost","postId","postCommments","setPostComments","newComment","setNewComment","commentAdded","setCommentAdded","Comment","postList","valueOf","related_type","related_id","TableModalScreen","tableProps","VerificationScreen","verificationToken","imVerified","setImVerified","verified","validateUser","sendEmailValidation","VirtualListWithButtons","listChildren","WatchlistEditorScreen","pickerProps","setName","setWatchlistType","setMagic","watchlistData","date_added","WatchlistScreen","AppInformationScreen","sliderState","setSliderState","widthOg","paragraphSize","pageIndex","scrollEventThrottle","pagingEnabled","indexOfNextScreen","setSliderPage","BrokeragePickerScreen","IbkrInfoScreen","submittedText","setSubmittedText","accountIds","instructions","createIbkrAccounts","account_ids","emailBody","RobhinhoodLoginScreen","multifactor","setMultifactor","challengeResponseId","setChallengeResponseId","counter","hoodPing","requestId","challengeStatus","sleep","robinhoodLogin","mfaCode","initialLogin","mfa","mfaLogin","handleNotification","shouldShowAlert","shouldPlaySound","shouldSetBadge","Stack","createNativeStackNavigator","initialRoute","RootNavigator","headerBackVisible","WelcomeScreen","CreateAccountScreen","Group","headerTintColor","headerBackground","contentStyle","useRoute","useLinkBuilder","buildLink","Navigation","colorScheme","NavigationContainer","LinkingConfiguration","DarkTheme","DefaultTheme","configApi","apiBaseUrl","registerRootComponent","isLoadingComplete","setLoadingComplete","SplashScreen","Font","FontAwesome","results","useCachedResources","useURL","eva","icons","EvaIconsPack","StatusBar","exports","__esModule","default","module","api","locals","___CSS_LOADER_API_IMPORT___"],"mappings":"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","file":"static/js/app.c6d58749.chunk.js","sourcesContent":["import {useCallback, useEffect, useState} from 'react';\r\nimport {EventRegister} from 'react-native-event-listeners'\r\nimport {LoginResult} from \"@tradingpost/common/api/entities/static/AuthApi\";\r\nimport {IUserGet, ISecurityList} from \"@tradingpost/common/api/entities/interfaces\";\r\nimport AsyncStorage, {useAsyncStorage} from '@react-native-async-storage/async-storage'\r\n\r\n//current_user\r\n//token \r\nexport interface LDS {\r\n    currentUser: IUserGet | undefined,\r\n    loginResult: LoginResult | undefined\r\n    authToken: string | undefined,\r\n    hasAuthed: boolean | undefined,\r\n    firstTime: boolean | undefined,\r\n    securities: {\r\n        list: ISecurityList[],\r\n        byId: Record<number, ISecurityList>,\r\n        bySymbol: Record<string, ISecurityList>\r\n    } | undefined,\r\n}\r\n\r\n\r\nlet lds: Partial<Record<keyof LDS, any>> = {}\r\nlet isCachedMap: Partial<Record<keyof LDS, true>> = {\r\n    authToken: true,\r\n    hasAuthed: true\r\n}\r\n\r\nlet isExplirable: Partial<Record<keyof LDS, { duration: number, cachedAt?: number }>> = {\r\n    securities: {\r\n        duration: 4/*hours*/ * 60 * 60 * 1000\r\n    }\r\n}\r\n\r\n\r\nconst LDS_CACHE_KEY = \"lds\"\r\nconst ldsChangedEvenName = \"lds_changed\";\r\n\r\nexport const useData = <T extends keyof LDS>(key: T) => {\r\n    const expireCheck = isExplirable[key]\r\n    if (expireCheck?.cachedAt && expireCheck.duration <= (Date.now() - expireCheck.cachedAt)) {\r\n        setValue(key, undefined);\r\n    }\r\n\r\n    const [value, _setValue] = useState<LDS[T]>(lds[key]);\r\n\r\n    useEffect(() => {\r\n        const sub = EventRegister.addEventListener(ldsChangedEvenName, (data) => {\r\n\r\n            if (data.key === key) {\r\n                _setValue(lds[key])\r\n            }\r\n\r\n        });\r\n        return () => {\r\n            EventRegister.removeEventListener(sub as string)\r\n        };\r\n    }, [key])\r\n    return {\r\n        value,\r\n        setValue: useCallback(async (v: typeof value) => {\r\n            await setValue(key, v)\r\n        }, [key])\r\n    }\r\n\r\n}\r\n\r\nexport const setValue = async <T extends keyof LDS>(key: T, v: LDS[T]) => {\r\n    lds[key] = v;\r\n    if (isCachedMap[key]) {\r\n        const cachedLds: Partial<LDS> = {...lds}\r\n        Object.keys(lds).forEach((k) => {\r\n            if (!isCachedMap[k as keyof LDS]) {\r\n                //console.log(\"DELETING KEY:\" + k);\r\n                delete cachedLds[k as keyof LDS]\r\n            } else {\r\n                //console.log(\"CACHING KEY\" + k)\r\n            }\r\n        })\r\n        await AsyncStorage.setItem(LDS_CACHE_KEY, JSON.stringify(cachedLds));\r\n    }\r\n    EventRegister.emit(ldsChangedEvenName, {key})\r\n}\r\n\r\nexport const initLds = async () => {\r\n    //load all cached values\r\n    //console.log(\"Initing LDS\");\r\n    const result = await AsyncStorage.getItem(LDS_CACHE_KEY);\r\n    if (result) {\r\n        //console.log(\"Results\" + result);\r\n        lds = JSON.parse(result);\r\n        Object.keys(lds).forEach((k) =>\r\n            EventRegister.emit(ldsChangedEvenName, {k}));\r\n    }\r\n    return lds;\r\n};","import Auth from '@tradingpost/common/api/entities/static/AuthApi';\r\nimport { useCallback, useEffect } from \"react\";\r\nimport User from '@tradingpost/common/api/entities/apis/UserApi';\r\nimport { useData } from \"./lds\";\r\nimport { useState } from 'react';\r\nimport { EventRegister } from 'react-native-event-listeners';\r\nimport { Log } from './utils/logger';\r\nimport { useNavigation } from '@react-navigation/native';\r\n\r\n\r\n// if (email !== '') {\r\n//     try {\r\n//         await registerDeviceForNotifications();\r\n//     }\r\n//     catch (ex) {\r\n//         console.error(ex);\r\n//     }\r\n// }\r\n\r\n\r\nconst loginStateChangedEventName = \"LOGIN_STATE_CAHNGED\";\r\n\r\n\r\n\r\nexport const useAppUser = (tracker?: string) => {\r\n\r\n    const { value: _appUser, setValue: setAppUser } = useData(\"currentUser\");\r\n    const { value: _loginResult, setValue: setLoginResult } = useData(\"loginResult\");\r\n    const { value: _authToken, setValue: setAuthToken } = useData(\"authToken\");\r\n    const [toggleRefresh, setToggleRefresh] = useState(true);\r\n    const nav = useNavigation();\r\n    type LoginState = {\r\n        appUser: typeof _appUser,\r\n        loginResult: typeof _loginResult,\r\n        authToken: typeof _authToken,\r\n        //TODO: stop gap... but we should make this resolved on the server probably \r\n        setupStatus?: {\r\n            needsSettings: boolean,\r\n            needsAnalystSettings: boolean\r\n        },\r\n        updated: Date\r\n    };\r\n\r\n    const createLoginState = (currentUser: typeof _appUser, loginResult: typeof _loginResult): LoginState => {\r\n        return {\r\n            updated: new Date(),\r\n            appUser: currentUser,\r\n            authToken: loginResult?.user_id ? loginResult.token : undefined,\r\n            loginResult: loginResult,\r\n            setupStatus: currentUser ? {\r\n                needsSettings: !currentUser.settings || !Object.keys(currentUser.settings).length,\r\n                needsAnalystSettings: Boolean(currentUser.settings?.analyst) && !currentUser.analyst_profile\r\n            } : undefined\r\n        }\r\n    }\r\n\r\n    const [loginState, setLoginState] = useState(_appUser || _loginResult ? createLoginState(_appUser, _loginResult) : undefined)\r\n\r\n    useEffect(() => {\r\n        if (tracker)\r\n            console.log(\"CREATING WITH A TRACKER OF \" + tracker);\r\n        const sub = EventRegister.addEventListener(loginStateChangedEventName, (data) => {\r\n            if (tracker)\r\n                console.log(\"TRIGGERED TRACKER OF \" + tracker);\r\n            setLoginState(data);\r\n        });\r\n        return () => {\r\n            EventRegister.removeEventListener(sub as string)\r\n        };\r\n    }, [tracker])\r\n\r\n    return {\r\n        loginState,\r\n        forceTrigger: () => {\r\n            if (_loginResult) {\r\n                setLoginResult({ ..._loginResult });\r\n            }\r\n        },\r\n        updateState: () => {\r\n            if (_loginResult) {\r\n                setLoginResult({ ..._loginResult });\r\n            }\r\n            if (loginState) {\r\n                setLoginState({ ...loginState, updated: new Date() })\r\n            }\r\n        },\r\n        signIn: useCallback(async (email: string, pass: string) => {\r\n            setLoginState(undefined);\r\n            const value = await Authentication.signIn(email, pass)\r\n            setLoginResult(value.loginResult);\r\n            setAppUser(value.currentUser);\r\n            if (value.loginResult.user_id)\r\n                setAuthToken(value.loginResult.token);\r\n\r\n            EventRegister.emit(loginStateChangedEventName, createLoginState(value.currentUser, value.loginResult))\r\n\r\n        }, []),\r\n        signOut: useCallback(() => {\r\n            Auth.signOut();\r\n            setAuthToken(undefined);\r\n            setLoginResult(undefined);\r\n            setAppUser(undefined);\r\n            setLoginState(undefined);\r\n            EventRegister.emit(loginStateChangedEventName, undefined);\r\n            nav.navigate('Root');\r\n        }, [])\r\n    }\r\n}\r\n\r\nexport const Authentication = {\r\n    signIn: async (email: string, pass: string) => {\r\n        const result = await Auth.login(email, pass);\r\n        return {\r\n            loginResult: result,\r\n            currentUser: result.user_id ? await User.get(result.user_id) : undefined\r\n        }\r\n    }\r\n}\r\n\r\n","import { Api } from \"@tradingpost/common/api\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useData } from \"./lds\";\r\n\r\nconst fetchSecurities = async () => {\r\n    console.log(\"I'm getting securities\");\r\n    const list = await Api.Security.extensions.list(),\r\n        byId: Record<number, typeof list[0]> = {},\r\n        bySymbol: Record<string, typeof list[0]> = {}\r\n    list.forEach((r) => {\r\n        byId[r.id] = r;\r\n        bySymbol[r.symbol] = r;\r\n    })\r\n    return {\r\n        list,\r\n        byId,\r\n        bySymbol\r\n    }\r\n}\r\nlet securityListTask: ReturnType<typeof fetchSecurities>\r\nexport const getSecurityList = () => securityListTask || (securityListTask = fetchSecurities())\r\n\r\n\r\nexport const useSecuritiesList = () => {\r\n\r\n    const [err, setErr] = useState<any>()\r\n    const { value: securities, setValue: setSecurities } = useData(\"securities\");\r\n    const [localValue, setLocalValue] = useState(securities)\r\n\r\n\r\n    useEffect(() => {\r\n        if (!securities)\r\n            getSecurityList()\r\n                .then((r) => {\r\n                    setSecurities(r)\r\n                    setLocalValue(r);\r\n                }).catch(ex => setErr(ex));\r\n    }, [securities])\r\n\r\n    return {\r\n        err,\r\n        securities: localValue || {\r\n            byId: {},\r\n            bySymbol: {},\r\n            list: []\r\n        }\r\n    }\r\n}\r\n","//Should change this to a process.env\r\nlet enableVerbose = true;\r\n\r\nconst verbose = (msg: string) => {\r\n    if (enableVerbose) {\r\n        console.log(msg);\r\n    }\r\n}\r\nconst error = (err: string | Error | unknown) => {\r\n    console.error(err);\r\n}\r\nconst tryCatch = async <T>(action: () => T) => {\r\n    try {\r\n        return await action();\r\n    } catch (ex) {\r\n        error(ex)\r\n    }\r\n}\r\n\r\nexport const Log = {\r\n    enableVerbose: (enabled: boolean) => {\r\n        enableVerbose = enabled\r\n    },\r\n    verbose,\r\n    error,\r\n    tryCatch\r\n}\r\n","// Render message if can send notifications\r\n// Pass along user device id to database and platform\r\n// Should be done in Settings / Login / Sign Up(After a user creates their email / password) & its accepted\r\nimport * as Notifications from 'expo-notifications';\r\nimport * as Device from 'expo-device';\r\nimport { Platform } from 'react-native';\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport * as Localization from 'expo-localization';\r\nimport { Log } from './logger';\r\n\r\nexport const registerDeviceForNotifications = async () => {\r\n    return await Log.tryCatch(async () => {\r\n        let token;\r\n        if (Device.isDevice) {\r\n            const { status: existingStatus } = await Notifications.getPermissionsAsync();\r\n            let finalStatus = existingStatus;\r\n            if (existingStatus === 'undetermined') {\r\n                const { status } = await Notifications.requestPermissionsAsync();\r\n                finalStatus = status;\r\n            }\r\n\r\n            if (finalStatus !== 'granted') {\r\n                return;\r\n            }\r\n            token = await (await Notifications.getDevicePushTokenAsync()).data;\r\n            await Api.Notification.extensions.registerUserDevice({\r\n                provider: Platform.OS,\r\n                deviceId: token,\r\n                timezone: Localization.timezone\r\n            });\r\n        }\r\n\r\n        if (Platform.OS === 'android') {\r\n            await Notifications.setNotificationChannelAsync('default', {\r\n                name: 'default',\r\n                importance: Notifications.AndroidImportance.MAX,\r\n                vibrationPattern: [0, 250, 250, 250],\r\n                lightColor: '#282869',\r\n            });\r\n        }\r\n        return token;\r\n    })\r\n}","import React, { PropsWithChildren, useEffect, useRef, useState } from \"react\";\r\nimport { View, Image } from \"react-native\";\r\nimport { SvgProps } from \"react-native-svg\";\r\n\r\n\r\nexport const SvgExpo = (props: SvgProps & { onReady?: (parent: any) => void }) => {\r\n    const url = (props.children as any).type;\r\n    const lastRef = useRef(\"\");;\r\n    const onReadyRef = useRef(props.onReady);\r\n    onReadyRef.current = props.onReady;\r\n    const divRef = useRef<HTMLDivElement>(null);\r\n\r\n    const [svgData, setSvgData] = useState(\"\");\r\n    useEffect(() => {\r\n\r\n\r\n        lastRef.current = url;\r\n        fetch(url, {}).then((data) => {\r\n            if (data.ok) {\r\n                data.text().then((result) => {\r\n                    if (lastRef.current === url)\r\n                        setSvgData(result);\r\n                    // //hacky right now ... will fix later \r\n\r\n                    setTimeout(() => {\r\n                        if (onReadyRef.current)\r\n                            onReadyRef.current(divRef.current)\r\n                    }, 222)\r\n                });\r\n            }\r\n            else throw data.statusText;\r\n        }).catch(ex => console.log(ex));\r\n\r\n\r\n    }), [url]\r\n\r\n\r\n\r\n    //hacky but gotta convert \r\n    return <View style={props.style}>\r\n        <div ref={divRef} style={{ height: \"100%\", width: \"100%\", justifyContent: \"center\", alignContent: \"center\", alignItems: \"center\", display:\"flex\" }} dangerouslySetInnerHTML={{ __html: svgData }} />\r\n    </View>\r\n}","import _IconNoBg from './assets/store-front-logo2-alt.svg'\r\nimport _IconBg from './assets/store-front.svg'\r\nimport _AppTitle from './assets/app-title.svg'\r\nimport _SplashWelcome from './assets/splash-welcome.svg'\r\nimport _ClimbingMountain from './assets/ClimbingMountain.svg'\r\nimport _Debate from './assets/Debate.svg'\r\nimport _Studying from './assets/Studying.svg'\r\nimport _Analyze from './assets/analyze.svg'\r\nimport _Bank from './assets/bank.svg'\r\nimport _IBKR from './assets/IBKR.svg'\r\nimport _RobinhoodLogo from './assets/robinhood_logo.svg'\r\nimport _RobinhoodLogoLong from './assets/robinhood_logo_long.svg'\r\n\r\n\r\n\r\nimport Logo from './assets/logo.svg'\r\nimport LogoNoBg from './assets/logo-no-bg.svg'\r\n\r\n// import MenuIcon from './assets/side-menu/menu-icon.svg';\r\nimport _PlusIcon from './assets/misc/plus.svg';\r\nimport _UpvoteIcon from './assets/post-feed/upvote.svg'\r\nimport _CommentIcon from './assets/post-feed/comment.svg'\r\nimport _BookmarkActive from './assets/post-feed/bookmark-active.svg'\r\nimport _BookmarkActiveBlue from './assets/post-feed/bookmark-active-blue.svg'\r\nimport _BookmarkInactive from './assets/post-feed/bookmark.svg'\r\nimport _Retweet from './assets/post-feed/ei_retweet.svg'\r\nimport _PremiumStar from './assets/post-feed/PremiumStar.svg'\r\nimport _SendIcon from './assets/post-feed/SendIcon.svg'\r\n\r\n// /** Side Menu Icons */\r\nimport Account from './assets/side-menu/Account.svg'\r\nimport Competition from './assets/side-menu/Competition.svg'\r\nimport Feedback from './assets/side-menu/Feedback.svg'\r\nimport Help from './assets/side-menu/Help.svg'\r\nimport Information from './assets/side-menu/Information.svg'\r\nimport Learn from './assets/side-menu/Learn.svg'\r\nimport LogOut from './assets/side-menu/Log Out.svg'\r\nimport Profile from './assets/side-menu/Profile.svg'\r\nimport Watchlist from './assets/side-menu/Watchlist.svg'\r\nimport Bank_Link from './assets/bank-link-icon.svg'\r\n\r\nimport YouTubeLogo from './assets/@iconify/youtube-icon'\r\nimport SpotifyLogo from './assets/@iconify/spotify-icon'\r\n\r\nimport TwitterLogo from './assets/@iconify/twitter'\r\n\r\nimport LinkedInLogo from './assets/@iconify/linkedin-icon'\r\n\r\nimport SubstackLogo from './assets/@iconify/substack'\r\n\r\nimport React, { Component } from 'react'\r\nimport { SvgExpo } from './components/SvgExpo'\r\nimport { SvgProps } from 'react-native-svg'\r\n\r\nexport const sideMenu = {\r\n    Account,\r\n    Competition,\r\n    Feedback,\r\n    Information,\r\n    Help,\r\n    Learn,\r\n    LogOut,\r\n    Profile,\r\n    Watchlist,\r\n    Bank_Link,\r\n    BookmarkActive: _BookmarkActive,\r\n    BookmarkInactive: _BookmarkInactive,\r\n    BookmarkActiveBlue: _BookmarkActiveBlue\r\n}\r\n\r\nfunction makeExpoSvg(Svg: React.FC<SvgProps>) {\r\n    return (props: SvgProps & { onReady?: (parent: any) => void }) => <SvgExpo {...props}><Svg /></SvgExpo>\r\n}\r\n\r\nexport const AppTitle = makeExpoSvg(_AppTitle)\r\nexport const SplashWelcome = makeExpoSvg(_SplashWelcome)\r\n\r\nexport const ClimbingMountain = makeExpoSvg(_ClimbingMountain)\r\nexport const Debate = makeExpoSvg(_Debate)\r\nexport const Studying = makeExpoSvg(_Studying)\r\nexport const Analyze = makeExpoSvg(_Analyze);\r\nexport const Bank = makeExpoSvg(_Bank);\r\nexport const IBKR = makeExpoSvg(_IBKR);\r\nexport const RobinhoodLogo = makeExpoSvg(_RobinhoodLogo);\r\nexport const RobinhoodLogoLong = makeExpoSvg(_RobinhoodLogoLong);\r\n//export const Bank_Link = makeExpoSvg(_Bank_Link);\r\n\r\nexport const IconBg = makeExpoSvg(_IconBg)\r\nexport const IconNoBg = makeExpoSvg(_IconNoBg)\r\nexport const PlusIcon = makeExpoSvg(_PlusIcon)\r\n\r\nexport const Retweet = makeExpoSvg(_Retweet);\r\n\r\n\r\n// IconBg,\r\n// IconNoBg,\r\n// MenuIcon,\r\n// PlusIcon,\r\nexport const UpvoteIcon = makeExpoSvg(_UpvoteIcon);\r\nexport const CommentIcon = makeExpoSvg(_CommentIcon);\r\nexport const SendIcon = makeExpoSvg(_SendIcon);\r\nexport const InfoIcon = makeExpoSvg(Information);\r\nexport const BookmarkActive = makeExpoSvg(_BookmarkActive);\r\nexport const BookmarkActiveBlue = makeExpoSvg(_BookmarkActiveBlue);\r\nexport const PremiumStar = makeExpoSvg(_PremiumStar);\r\n\r\n\r\nexport { Logo, LogoNoBg };\r\n\r\n\r\nexport const rnui = {\r\n    chevronDown: require('./assets/rnui/chevronDown.png'),\r\n    add: require('./assets/rnui/add.png'),\r\n    plus: require('./assets/rnui/plus.png')\r\n}\r\nexport type NavIconKeys = \"Portfolio\" | \"Search\" | \"Feed\" | \"Notification\"; //| \"Bookmark\";\r\n\r\nexport const NavIconTypeOverride: Partial<Record<NavIconKeys, any>> = {\r\n    Notification: {\r\n        no: {\r\n            active: require('./assets/nav-bar/notification-active.png'),\r\n            inactive: require('./assets/nav-bar/notification.png'),\r\n        },\r\n        has: {\r\n            active: require('./assets/nav-bar/has-notification-active.png'),\r\n            inactive: require('./assets/nav-bar/has-notification.png')\r\n        }\r\n    }\r\n}\r\n\r\nexport const navIcons: Record<NavIconKeys, { active: number, inactive: number }> = {\r\n    \"Portfolio\": {\r\n        active: require(\"./assets/nav-bar/portfolio-active.png\"),\r\n        inactive: require(\"./assets/nav-bar/portfolio.png\")\r\n    },\r\n    \"Feed\": {\r\n        active: require(\"./assets/nav-bar/feed-active.png\"),\r\n        inactive: require(\"./assets/nav-bar/feed.png\")\r\n    },\r\n    \"Search\": {\r\n        active: require(\"./assets/nav-bar/search-active.png\"),\r\n        inactive: require(\"./assets/nav-bar/search.png\")\r\n    },\r\n    // \"Bookmark\": {\r\n    //     active: require(\"./assets/nav-bar/bookmark-active.png\"),\r\n    //     inactive: require(\"./assets/nav-bar/bookmark.png\")\r\n    // },\r\n    \"Notification\": {\r\n        active: require(\"./assets/nav-bar/notification-active.png\"),\r\n        inactive: require(\"./assets/nav-bar/notification.png\")\r\n    },\r\n}\r\n\r\nexport const BookmarkIcons = {\r\n    active: require(\"./assets/nav-bar/bookmark-active.png\"),\r\n    inactive: require(\"./assets/nav-bar/bookmark.png\")\r\n}\r\n\r\n\r\nexport const topBarIcons = {\r\n    menu: require('./assets/nav-bar/menu.png')\r\n}\r\n\r\nexport const social = {\r\n    TwitterLogo,\r\n    LinkedInLogo,\r\n    YouTubeLogo,\r\n    SubstackLogo,\r\n    SpotifyLogo,\r\n}\r\n\r\n\r\nexport const postBg = require(\"./assets/post-feed/flatgrad.png\");","const tintColorLight = '#2f95dc';\r\nconst tintColorDark = '#fff';\r\n\r\nexport default {\r\n  light: {\r\n    text: '#000',\r\n    background: '#fff',\r\n    tint: tintColorLight,\r\n    tabIconDefault: '#ccc',\r\n    tabIconSelected: tintColorLight,\r\n  },\r\n  dark: {\r\n    text: '#fff',\r\n    background: '#000',\r\n    tint: tintColorDark,\r\n    tabIconDefault: '#ccc',\r\n    tabIconSelected: tintColorDark,\r\n  },\r\n};\r\n\r\nexport const AppColors  = {\r\n  primary : \"#11146F\",\r\n  secondary:\"#35A265\",\r\n  background :\"#F7f8f8\"\r\n}\r\n\r\n\r\n","import { FlexStyle, TextStyle, ViewStyle } from \"react-native\";\r\nimport { AppColors } from \"./constants/Colors\";\r\n\r\nexport const flex = { flex: 1 } as ViewStyle\r\nexport const row: ViewStyle = { flexDirection: \"row\" }\r\nexport const shadow: ViewStyle = {\r\n    elevation: 4,\r\n    shadowOffset: { height: 2, width: 2 },\r\n    shadowColor: \"black\",\r\n    shadowOpacity: 0.125,\r\n    shadowRadius: 0.25,\r\n}\r\n\r\nexport const noMargin = {\r\n    marginTop: 0,\r\n    marginRight: 0,\r\n    marginBottom: 0,\r\n    marginLeft: 0,\r\n}\r\n\r\nexport function rounded(size: number) {\r\n    return {\r\n        height: size,\r\n        width: size,\r\n        borderRadius: size / 2\r\n    }\r\n}\r\n\r\nexport const fonts = {\r\n    xSmall: 12,\r\n    small: 16,\r\n    medium: 20,\r\n    large: 24,\r\n    xLarge: 32\r\n}\r\n\r\nexport function font(size: keyof typeof fonts, color: string = \"black\", isBold: boolean = false) {\r\n    return {\r\n        fontSize: fonts[size],\r\n        fontWeight: isBold ? \"bold\" : undefined,\r\n        color: color\r\n    } as TextStyle\r\n}\r\n\r\n\r\nexport const sizes = {\r\n    rem0_5: 8,\r\n    rem1: 16,\r\n    rem1_5: 24,\r\n    rem2: 32,\r\n    rem4: 64,\r\n    rem6: 96,\r\n    rem7: 112,\r\n    rem8: 128,\r\n    rem9: 144,\r\n    rem10: 160,\r\n    rem12: 192,\r\n    rem16: 256,\r\n    borderRadius: 2\r\n}\r\n\r\n\r\n\r\nexport const paddView = [flex, { padding: sizes.rem1, backgroundColor: AppColors.background }]\r\nexport const paddViewWhite = [...paddView, { backgroundColor: \"white\" }]\r\n\r\nexport const elevated =\r\n{\r\n    marginHorizontal: 2,\r\n    paddingVertical: 8,\r\n    backgroundColor: \"white\",\r\n    borderColor: \"#ccc\",\r\n    borderWidth: 1,\r\n    borderRadius: 4,\r\n    marginBottom: 16,\r\n    ...shadow\r\n}\r\n\r\n\r\nexport const chartColors = [\r\n    '#2dadf4',\r\n    '#f5523b',\r\n    '#66a1fa',\r\n    '#ff4a6b',\r\n    '#9891f4',\r\n    '#f95399',\r\n    '#c37de1',\r\n    '#e567c1']\r\n\r\n\r\nexport const social = {\r\n    substackColor: '#ff7731'\r\n}\r\n\r\nexport const bannerText = {\r\n    textAlign: \"center\", margin: sizes.rem2, fontSize: fonts.large, lineHeight: fonts.large * 1.5,\r\n} as TextStyle\r\nexport const thinBannerText = [bannerText, {\r\n    marginHorizontal: 0, marginVertical: sizes.rem0_5\r\n} as TextStyle]\r\n\r\n\r\n\r\nexport const textInputWiz = {\r\n    marginVertical: sizes.rem0_5\r\n} as ViewStyle","import { getActionFromState, getStateFromPath, LinkingContext, NavigationContainerRefContext, useLinkTo } from \"@react-navigation/native\";\r\nimport { To } from \"@react-navigation/native/lib/typescript/src/useLinkTo\";\r\nimport { IndexPath } from \"@ui-kitten/components\";\r\nimport React from \"react\";\r\nimport { useCallback, useEffect, useLayoutEffect, useMemo, useRef, useState } from \"react\";\r\nimport { Animated, Keyboard, TextProps, ViewProps } from \"react-native\";\r\nimport { PickerProps } from \"../components/Picker\";\r\n\r\nimport { bannerText } from \"../style\";\r\n\r\n\r\nexport interface IEntity<T> {\r\n    data: Readonly<T>,\r\n    update(updates: Partial<T>): void,\r\n    hasChanged: boolean,\r\n    resetData(newData: T): void\r\n}\r\n\r\n\r\nconst ensureIterable = (value: any): value is Iterable<any> => {\r\n    return Symbol.iterator in Object(value);\r\n}\r\n\r\n\r\nexport const useOpacityAnim = () => {\r\n    const opacityAnim = useRef(new Animated.Value(0)).current\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n    return useMemo(() => ({\r\n        opacityAnim,\r\n        BannerText: (props: Omit<TextProps, \"style\">) => {\r\n            return <Animated.Text\r\n                style={[bannerText, { opacity: opacityAnim }]}\r\n                {...props}\r\n            />\r\n        },\r\n        AppearView: (props: Animated.AnimatedProps<ViewProps>) => {\r\n            const styleProp = [{ opacity: opacityAnim } as Animated.AnimatedProps<ViewProps>[\"style\"]]\r\n            if (props.style) {\r\n                if (ensureIterable(props.style))\r\n                    styleProp.unshift(...props.style as any)\r\n                else\r\n                    styleProp.unshift(props.style)\r\n            }\r\n\r\n            return <Animated.View {...props} style={[styleProp]} />\r\n        }\r\n    }), [opacityAnim])\r\n}\r\n\r\nexport function useReadonlyEntity<T>(seedValue: T): IEntity<T> {\r\n    const [data, setData] = useState<Readonly<T>>(seedValue)\r\n    const [hasChanged, setHasChanged] = useState(false);\r\n    return {\r\n        data,\r\n        hasChanged,\r\n        resetData: useCallback(function (d) {\r\n            setHasChanged(false);\r\n            setData(d);\r\n        }, []),\r\n        update: useCallback((updates: Partial<T>) => {\r\n            setHasChanged(true);\r\n            setData((_entity) => ({\r\n                ..._entity,\r\n                ...updates\r\n            }))\r\n        }, [])\r\n    }\r\n}\r\n\r\ntype EnsureTypeFrom<T, U extends keyof T, S> = T[U] extends (S) ? (((v: S) => S) | undefined | null) : (v: S) => T[U]\r\ntype EnsureTypeTo<T, U extends keyof T, S> = T[U] extends (S) ? (((v: S) => S) | undefined | null) : (v: T[U]) => S\r\n\r\ntype ConvertType<T, U extends keyof T, S> = {\r\n    toType: EnsureTypeTo<T, U, S>\r\n    fromType: EnsureTypeFrom<T, U, S>\r\n}\r\n\r\ntype EnsureConverter<T, U extends keyof T, S> = T[U] extends (S) ? (ConvertType<T, U, S> | undefined | null) : ConvertType<T, U, S>\r\n\r\nexport function bindTextInput<T, U extends keyof T>(entity: IEntity<T>, key: U, converter: EnsureConverter<T, U, string | undefined>, onChangeText?: (text: string) => void) {\r\n    return bindTextInputBase(entity, key, converter, {\r\n        valueKey: \"value\",\r\n        onChangeTextKey: \"onChangeText\"\r\n    }, onChangeText)\r\n}\r\n\r\nexport function bindTextInputBase<T, U extends keyof T>(entity: IEntity<T>, key: U, converter: EnsureConverter<T, U, string | undefined>, bindKeys: { valueKey?: string, onChangeTextKey: string }, onChangeText?: (text: string) => void) {\r\n    const output = {\r\n        [bindKeys.onChangeTextKey]: (v: string) => {\r\n            const update: Partial<T> = {};\r\n            entity.update({\r\n                [key]: converter?.fromType ? converter.fromType(v) : v\r\n            } as any)\r\n            if (onChangeText) {\r\n                onChangeText(v);\r\n            }\r\n        }\r\n    };\r\n    if (bindKeys.valueKey)\r\n        output[bindKeys.valueKey] = converter?.toType ? converter.toType(entity.data[key] as any) : (entity.data[key] as any)\r\n    return output;\r\n}\r\n\r\nexport function bindPicker<T, U extends keyof T>(entity: IEntity<T>, key: U, converter: EnsureConverter<T, U, IndexPath | undefined>, onSelect?: (item: IndexPath) => void) {\r\n\r\n    return {\r\n        //value: converter?.toType ? converter.toType(entity.data[key] as any) : (entity.data[key] as any),\r\n        onSelect: (item) => {\r\n            const update: Partial<T> = {};\r\n            //console.log(item);\r\n            entity.update({\r\n                [key]: converter?.fromType ? converter.fromType(item) : item\r\n            } as any)\r\n\r\n            if (onSelect)\r\n                onSelect(item)\r\n        },\r\n        // onChangeText: (v: string) => {\r\n        //     const update: Partial<T> = {};\r\n        //     entity.update({\r\n        //         [key]: converter?.fromString ? converter.fromString(v) : v\r\n        //     } as any)\r\n        //     if (onChangeText) {\r\n        //         onChangeText(v);\r\n        //     }\r\n        // }\r\n    } as Partial<PickerProps<false>>\r\n}\r\n// export function bindMultiPicker<T, U extends keyof T>(entity: IEntity<T>, key: U, converter: EnsureConverter<T, U, (number | string)[] | undefined>, onChange?: (item: (string | number)[]) => void) {\r\n//     return {\r\n//         value: converter?.toType ? converter.toType(entity.data[key] as any) : (entity.data[key] as any),\r\n//         onChange: (item) => {\r\n//             //const update: Partial<T> = {};\r\n//             //console.log(item);\r\n//             entity.update({\r\n//                 [key]: converter?.fromType ? converter.fromType(item) : item\r\n//             } as any)\r\n\r\n//             if (onChange)\r\n//                 onChange(item)\r\n//         },\r\n//         // onChangeText: (v: string) => {\r\n//         //     const update: Partial<T> = {};\r\n//         //     entity.update({\r\n//         //         [key]: converter?.fromString ? converter.fromString(v) : v\r\n//         //     } as any)\r\n//         // if (onChangeText) {\r\n//         //     onChangeText(v);\r\n//         // }\r\n//         //  }\r\n//     } as Partial<PickerProps<true>>\r\n// }\r\n\r\n// export function bindSwitch<T, U extends keyof T>(entity: IEntity<T>, key: U, converter: EnsureConverter<T, U, boolean | undefined>, invert?: boolean, onChange?: (item: boolean) => void) {\r\n//     let calcedValue = converter?.toType ? converter.toType(entity.data[key] as any) : (entity.data[key] as any);\r\n//     if (invert)\r\n//         calcedValue = !calcedValue;\r\n\r\n//     return {\r\n//         value: calcedValue,\r\n//         onValueChange: (item) => {\r\n//             let itemCalced = converter?.fromType ? converter.fromType(item) : item;\r\n//             if (invert)\r\n//                 itemCalced = !itemCalced;\r\n\r\n//             const update: Partial<T> = {};\r\n//             entity.update({\r\n//                 [key]: itemCalced\r\n//             } as any)\r\n\r\n//             if (onChange)\r\n//                 onChange(item)\r\n//         },\r\n\r\n//     } as SwitchProps\r\n// }\r\n\r\n\r\nexport function useIsKeyboardVisible() {\r\n    const [isKeyboardVisible, setIsKeyboardVisible] = useState(false);\r\n\r\n    useLayoutEffect(() => {\r\n        const showSubscription = Keyboard.addListener(\"keyboardDidShow\", () => {\r\n            setIsKeyboardVisible(true);\r\n        });\r\n        const hideSubscription = Keyboard.addListener(\"keyboardDidHide\", () => {\r\n            setIsKeyboardVisible(false)\r\n        });\r\n\r\n        return () => {\r\n            showSubscription.remove();\r\n            hideSubscription.remove();\r\n        };\r\n    }, []);\r\n    return {\r\n        isKeyboardVisible\r\n    }\r\n}\r\n\r\nexport default function useLinkToExt<\r\n    ParamList extends ReactNavigation.RootParamList\r\n>() {\r\n    const navigation = React.useContext(NavigationContainerRefContext);\r\n    const linking = React.useContext(LinkingContext);\r\n    const _linkTo = useLinkTo();\r\n    const linkTo = useCallback((to: To<ParamList>, replace?: boolean) => {\r\n\r\n        if (navigation === undefined) {\r\n            throw new Error(\r\n                \"Couldn't find a navigation object. Is your component inside NavigationContainer?\"\r\n            );\r\n        }\r\n\r\n        if (typeof to !== 'string') {\r\n            // @ts-expect-error: This is fine\r\n            navigation.navigate(to.screen, to.params);\r\n            return;\r\n        }\r\n\r\n        if (!to.startsWith('/')) {\r\n            throw new Error(`The path must start with '/' (${to}).`);\r\n        }\r\n\r\n        const { options } = linking;\r\n\r\n        const state = options?.getStateFromPath\r\n            ? options.getStateFromPath(to, options.config)\r\n            : getStateFromPath(to, options?.config);\r\n\r\n        if (state) {\r\n            const action = getActionFromState(state, options?.config);\r\n            if (action !== undefined) {\r\n                navigation.dispatch(action);\r\n            } else {\r\n                navigation.reset(state);\r\n            }\r\n        } else {\r\n            throw new Error('Failed to parse the path to a navigation state.');\r\n        }\r\n\r\n    }, [linking, navigation])\r\n\r\n\r\n    return linkTo;\r\n}\r\n","import React, { ReactElement, useLayoutEffect, useState } from \"react\";\r\nimport { flex, fonts, row, sizes } from \"../style\";\r\nimport { AltPrimaryButton, PrimaryButton } from \"./PrimaryButton\";\r\nimport { Text } from '@ui-kitten/components'\r\nimport { View } from 'react-native'\r\nexport function LabeledField(props: { compact?: boolean, children?: ReactElement, label?: string, leftElement?: (props: { width: number, height: number }) => ReactElement }) {\r\n\r\n    const sz = props.compact ? sizes.rem1 : sizes.rem2\r\n    return <View style={[row, { alignItems: \"center\", marginBottom: sz }]}>\r\n        {props.leftElement && props.leftElement({ height: sz, width: sz })}\r\n        <Text style={[flex, { fontSize: props.compact ? fonts.small : fonts.medium }]}>{props.label}</Text>\r\n        {props.children}\r\n    </View>\r\n\r\n}\r\n\r\n","import React from 'react'\r\n//import { ButtonProps } from \"react-native-ui-lib\";\r\nimport { Button, ButtonProps } from '@ui-kitten/components'\r\nimport { AppColors } from '../constants/Colors'\r\n//import Button from \"react-native-ui-lib/button\";\r\n\r\nexport function PrimaryButton(props: ButtonProps) {\r\n    return <Button\r\n        //backgroundColor={Colors.primary} \r\n        {...props} />\r\n}\r\n\r\nexport function AltPrimaryButton(props: ButtonProps) {\r\n    return <Button\r\n        //backgroundColor={Colors.white} \r\n        //color={AppColors.primary}\r\n        // outlineColor={AppColors.primary}\r\n        {...props} />\r\n}","import { Button, ButtonProps } from '@ui-kitten/components';\r\nimport React from 'react'\r\n//import { ButtonProps } from \"react-native\";\r\n//import Button from \"react-native-ui-lib/button\";\r\n//import { Colors } from 'react-native-ui-lib'\r\nimport { PressableButton } from './PressableButton';\r\n\r\n\r\nexport function SecondaryButton(props: ButtonProps) {\r\n    return <Button\r\n        status={'success'} {...props} />\r\n}\r\nexport function AltSecondaryButton(props: ButtonProps) {\r\n    return <Button status={'success'} {...props} />\r\n}","import React, { ReactElement, ReactNode, useLayoutEffect, useState } from \"react\";\r\nimport { Button, ButtonProps, Text } from \"@ui-kitten/components\";\r\nimport { flex, fonts, row, sizes } from \"../style\";\r\nimport { LabeledField } from \"./LabeledField\";\r\nimport { AltPrimaryButton, PrimaryButton } from \"./PrimaryButton\";\r\nimport { AltSecondaryButton, SecondaryButton } from \"./SecondaryButton\";\r\n//import { PlaidLink, PlaidLinkComponentProps } from 'react-native-plaid-link-sdk'\r\n\r\nexport function ButtonField(props: {\r\n    compact?: boolean, secondary?: boolean, label?: string, activeText?: string, disabledText?: string, inactiveText?: string, isActive?: boolean, leftElement?: (props: { width: number, height: number }) => ReactElement\r\n}\r\n    & Pick<ButtonProps, \"onPress\" | \"disabled\">) {\r\n    const [_isActive, setIsActive] = useState(false)\r\n    const buttonLabel =\r\n        (props.disabled && props.disabledText) ?\r\n            props.disabledText :\r\n            (_isActive ?\r\n                (props.activeText || \"Active\") :\r\n                (props.inactiveText || \"Inactive\"))\r\n\r\n    useLayoutEffect(() => {\r\n        setIsActive(props.isActive || false)\r\n    }, [props.isActive])\r\n    const bProps: ButtonProps = {\r\n        style:\r\n        {\r\n            width: sizes.rem9,\r\n            height: sizes.rem2,\r\n            padding: 0,\r\n\r\n        },\r\n        // labelStyle:\r\n        // {\r\n        //     height: sizes.rem1_5,\r\n        //     top: 0\r\n        // },\r\n        children: buttonLabel,\r\n        onPress(ev) {\r\n            setIsActive((a) => props.isActive === undefined ? !a : props.isActive)\r\n            if (props.onPress) {\r\n                props.onPress(ev)\r\n            }\r\n        }\r\n    };\r\n    return <LabeledField compact={props.compact} label={props.label} leftElement={props.leftElement}>\r\n        {_isActive ?\r\n            (!props.secondary ? <PrimaryButton {...bProps} /> : <SecondaryButton {...bProps} />) :\r\n            (!props.secondary ? <AltPrimaryButton {...bProps} /> : <AltSecondaryButton {...bProps} />)}\r\n    </LabeledField>\r\n\r\n}\r\nexport function PlaidButtonField(props: {\r\n    plaidProps: {},// Omit<PlaidLinkComponentProps, \"children\">,\r\n    compact?: boolean, secondary?: boolean, label?: string, activeText?: string, disabledText?: string, inactiveText?: string, isActive?: boolean, leftElement?: (props: { width: number, height: number }) => ReactElement\r\n}\r\n    & Pick<ButtonProps, \"onPress\" | \"disabled\">) {\r\n    const [_isActive, setIsActive] = useState(false)\r\n    const buttonLabel =\r\n        (props.disabled && props.disabledText) ?\r\n            props.disabledText :\r\n            (_isActive ?\r\n                (props.activeText || \"Active\") :\r\n                (props.inactiveText || \"Inactive\"))\r\n\r\n    useLayoutEffect(() => {\r\n        setIsActive(props.isActive || false)\r\n    }, [props.isActive])\r\n    const bProps: ButtonProps = {\r\n        style:\r\n        {\r\n            width: sizes.rem9,\r\n            height: sizes.rem2,\r\n            padding: 0,\r\n        },\r\n        // labelStyle:\r\n        // {\r\n        //     height: sizes.rem1_5,\r\n        //     top: 0\r\n\r\n        // },\r\n        children: buttonLabel,\r\n        onPress(ev) {\r\n            setIsActive((a) => props.isActive === undefined ? !a : props.isActive)\r\n            if (props.onPress) {\r\n                props.onPress(ev)\r\n            }\r\n        }\r\n    };\r\n    return <LabeledField compact={props.compact} label={props.label} leftElement={props.leftElement}>\r\n        <Text>BROKEN</Text>\r\n        {/* <PlaidLink {...props.plaidProps}>\r\n        <View pointerEvents=\"none\">\r\n            {_isActive ?\r\n                (!props.secondary ? <PrimaryButton {...bProps} /> : <SecondaryButton {...bProps} />) :\r\n                (!props.secondary ? <AltPrimaryButton {...bProps} /> : <AltSecondaryButton {...bProps} />)}\r\n        </View>\r\n    </PlaidLink> */}\r\n    </LabeledField >\r\n\r\n}\r\n\r\n\r\n\r\n","import React, { MutableRefObject, RefObject, useEffect, useRef, useState } from 'react';\r\nimport { ViewStyle, TextInputProps } from 'react-native';\r\n//import { Colors } from 'react-native-ui-lib';\r\nimport { Text, Input, InputProps } from '@ui-kitten/components'\r\n\r\n\r\n// interface IRnField {\r\n//     focus(): void,\r\n//     clear(): void\r\n// }\r\nexport interface ITextField {\r\n    field: RefObject<Input>,\r\n    errorMessage?: string\r\n    validate: () => boolean\r\n}\r\nexport function TextField(props: {\r\n    label?: string,\r\n    textInputRef?: MutableRefObject<ITextField | null>\r\n    disabled?: boolean\r\n    validate?: (value: string | undefined) => boolean,\r\n    validateOnChange?: boolean\r\n    errorMessage?: string,\r\n    //defaulted this to false... which is the right way to to a positive assetion...  \r\n    spellCheck?: boolean,\r\n    //defaulted this to false... which is the right way to to a positive assetion...  \r\n    autoCorrect?: boolean,\r\n    markRequired?: boolean\r\n    //caption?: InputProps[\"caption\"],\r\n\r\n} & TextInputProps & Pick<InputProps, \"caption\" | \"accessoryLeft\" | \"accessoryRight\">) {\r\n    const rnuRef = useRef<Input>(null);\r\n    const [caption, setCaption] = useState<InputProps[\"caption\"]>();\r\n    const [valueTracker, setValueTracker] = useState<string>();\r\n\r\n    useEffect(() => {\r\n        setCaption(props.caption);\r\n    }, [props.caption])\r\n    useEffect(() => {\r\n        setValueTracker(props.value);\r\n    }, [props.value])\r\n    const { validate } = props;\r\n    if (props.textInputRef) {\r\n        props.textInputRef.current = {\r\n            errorMessage: /* props.errorMessage instanceof Array ? props.errorMessage.join(\",\") :*/ props.errorMessage,\r\n            validate: () => validate ? validate(valueTracker) : true,\r\n            field: rnuRef\r\n        }\r\n    }\r\n\r\n    //const tt = { spellCheck: true, autoCorrect:false } as TextInputProps\r\n\r\n    return <Input\r\n        ref={rnuRef}\r\n\r\n        numberOfLines={props.numberOfLines}\r\n        spellCheck={props.spellCheck || false}\r\n        autoCorrect={props.autoCorrect || false}\r\n        editable={!props.disabled}\r\n        //disabledColor={props.disabledColor || Colors.grey20}\r\n        //placeholder=\"Enter Email...\"\r\n        //validateOnChange={props.validateOnChange}\r\n        caption={caption}\r\n        accessoryLeft={props.accessoryLeft}\r\n        accessoryRight={props.accessoryRight}\r\n        //validate={props.validate}\r\n        //errorMessage={props.errorMessage}\r\n        value={props.value}\r\n        //markRequired={props.markRequired}\r\n        //ref={props.textInputRef?.current?.field}\r\n        onSubmitEditing={props.onSubmitEditing}\r\n        label={(textProps) => {\r\n            return props.label ? <Text {...textProps}>{props.label}{<Text {...textProps} style={[\r\n                textProps?.style,\r\n                {\r\n                    color: \"red\"\r\n                }]}  >{props.markRequired ? \"*\" : \"\"}</Text>}</Text> :\r\n                <Text></Text>\r\n        }}\r\n        onChangeText={(t) => {\r\n            setValueTracker(t);\r\n            if (validate && props.validateOnChange) {\r\n                let errorMessage: string | undefined = undefined;\r\n                let newCaption: InputProps[\"caption\"] = undefined;\r\n                if (!validate(t)) {\r\n                    errorMessage = props.errorMessage;\r\n                    newCaption = () => <Text category={\"c1\"} style={{ color: \"red\" }}>{errorMessage}</Text>;\r\n                }\r\n\r\n                if (props.textInputRef?.current) {\r\n                    props.textInputRef.current.errorMessage = errorMessage;\r\n                    //props.textInputRef.current.validate = () => validate(t);\r\n                }\r\n                setCaption(() => newCaption);\r\n            }\r\n\r\n            if (props.onChangeText)\r\n                props.onChangeText(t);\r\n        }}\r\n        secureTextEntry={props.secureTextEntry}\r\n        returnKeyType={props.returnKeyType}\r\n        placeholder={props.placeholder}\r\n        //error={props.error}\r\n        style={props.style}\r\n    //hideUnderline={props.disabled}\r\n    //containerStyle={props.containerStyle}\r\n    />\r\n}\r\n","export function isValidEmail(email: string | undefined) {\r\n    return /^[-!#$%&'*+\\/0-9=?A-Z^_a-z`{|}~](\\.?[-!#$%&'*+\\/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-*\\.?[a-zA-Z0-9])*\\.[a-zA-Z](-?[a-zA-Z0-9])+$/.test(email || \"\")\r\n}\r\n\r\nexport function isRequired(value: string | undefined) {\r\n    return (value || \"\").replace(/ /gi, '').length > 0;\r\n}\r\n\r\nexport function isAlphaNumeric(value: string | undefined) {\r\n    return /^[a-z0-9\\_]+$/i.test(value||\"\")\r\n}","import React, { ReactNode } from \"react\";\r\nimport { View, ScrollView, ViewProps, ViewComponent, ViewStyle, StyleProp } from \"react-native\";\r\nimport { AppColors } from \"../constants/Colors\";\r\n\r\nimport { flex } from \"../style\";\r\nimport { useIsKeyboardVisible } from \"../utils/hooks\";\r\nimport { PrimaryButton } from \"./PrimaryButton\";\r\nimport { SecondaryButton } from \"./SecondaryButton\";\r\n\r\nexport function ScrollWithButtons(props: { children?: ReactNode, buttons?: ButtonPanelProps, fillHeight?: boolean }) {\r\n    const { isKeyboardVisible } = useIsKeyboardVisible();\r\n    return <View style={[flex,]} >\r\n        <View style={[flex, { backgroundColor: AppColors.background }]} >\r\n            <ScrollView nestedScrollEnabled contentContainerStyle={props.fillHeight ? { maxHeight: \"100%\", height: \"100%\"} : {}}>\r\n                {/* This is here to force layout of the content. Seems like a but with enxted scrollview content */}\r\n                {!isKeyboardVisible && <View style={{ height: 0 }} ></View>}\r\n                {props.children}\r\n            </ScrollView>\r\n        </View>\r\n        {props.buttons && <ButtonPanel {...props.buttons} />}\r\n    </View>\r\n}\r\n\r\nexport type ButtonPanelProps = {\r\n    locked?: boolean,\r\n    left?: {\r\n        text: string,\r\n        onPress: () => void\r\n    },\r\n    right: {\r\n        text: string,\r\n        onPress: () => void\r\n    }\r\n    viewProps?: StyleProp<ViewStyle> \r\n}\r\nexport function ButtonPanel(props: ButtonPanelProps) {\r\n    return <View style={ props.viewProps && Object.keys(props.viewProps).length ? props.viewProps : { borderTopColor: \"#ccc\", borderTopWidth: 1, flexDirection: \"row\", \r\n    paddingTop: 8,\r\n     paddingBottom: 8, \r\n     \r\n     justifyContent: \"space-evenly\", zIndex: 1000 }}>\r\n        {props.left && <SecondaryButton style={{ width: \"48%\" }} onPress={props.left.onPress} disabled={props.locked} >{props.left.text}</SecondaryButton>}\r\n        <PrimaryButton style={{ width: props.left ? \"48%\" : \"96%\" }} onPress={props.right.onPress} disabled={props.locked} >{props.right.text}</PrimaryButton>\r\n    </View>\r\n}\r\n","import React from 'react';\r\nimport { Alert } from \"react-native\";\r\nimport numeral, {} from 'numeral'\r\n//import { AmiraError } from '../AmiraError';\r\n\r\nexport type AwaitedReturn<T extends (...args: any[]) => Promise<any>> = Awaited<ReturnType<T>>\r\n\r\nexport function TBI() {\r\n    return console.warn(\"Method has not been implemented\");\r\n}\r\n\r\nexport function randomPrice() {\r\n    return Math.round(Math.random() * 100 * 100) / 100;\r\n}\r\n\r\n\r\nexport function random(maxExclusive: number) {\r\n    return Math.floor(Math.random() * maxExclusive);\r\n}\r\n\r\n\r\nexport function randomArray(maxExclusive: number) {\r\n    return Array.from(new Array(random(maxExclusive) + 1))\r\n}\r\nexport function randomName() {\r\n    return [\"JoshL\", \"LJames\", \"JodyH\"][random(3)]\r\n}\r\n\r\nexport function randomText() {\r\n    const texts = [\"gaping\",\r\n        \"woebegone\",\r\n        \"sticky\",\r\n        \"friendly\",\r\n        \"fine\",\r\n        \"free\",\r\n        \"accessible\",\r\n        \"subsequent\",\r\n        \"labored\",\r\n        \"tan\",\r\n        \"curious\",\r\n        \"brash\",\r\n        \"cautious\",\r\n        \"sassy\",\r\n        \"mushy\",\r\n        \"foreign\",\r\n        \"rightful\",\r\n        \"bad\",\r\n        \"psychological\",\r\n        \"talented\",\r\n        \"grieving\",\r\n        \"scrawny\",\r\n        \"familiar\",\r\n        \"thoughtless\",\r\n        \"daily\",\r\n        \"ritzy\",\r\n        \"elite\",\r\n        \"cool\",\r\n        \"shrill\",\r\n        \"skinny\",\r\n        \"living\",\r\n        \"opposite\",\r\n        \"right\",\r\n        \"red\",\r\n        \"slippery\",\r\n        \"mammoth\",\r\n        \"great\",\r\n        \"spooky\",\r\n        \"polite\",\r\n        \"spotted\",\r\n        \"educated\",\r\n        \"private\",\r\n        \"six\",\r\n        \"belligerent\",\r\n        \"amuck\",\r\n        \"successful\",\r\n        \"exotic\",\r\n        \"guilty\",\r\n        \"prickly\",\r\n        \"shiny\",\r\n    ]\r\n    return texts[random(texts.length)]\r\n}\r\n\r\nexport function randomDateString(pastDate?: boolean) {\r\n    return new Date(new Date().valueOf() + (pastDate ? -1 : 1) * random(31536000)).toUTCString()\r\n}\r\n\r\n\r\nexport function DEV_ONLY(code: () => void) {\r\n    if (!__DEV__)\r\n        throw new Error(\"DEVELOPMENT CODE IS RUNNING IN PRODUCTION\");\r\n    //throw new AmiraError(-1,\"DEVELOPMENT CODE IS RUNNING IN PRODUCTION\");\r\n    else\r\n        code();\r\n}\r\n\r\ntype All<T> = {\r\n    [K in keyof T]-?: T[K]\r\n}\r\n\r\nexport type Undefinable<T> = {\r\n    [K in keyof All<T>]: (T[K] | undefined)\r\n}\r\n\r\nexport function badDate() {\r\n    return toAmiraDate(new Date())\r\n}\r\n\r\n//const pctFormatter = numeral()\r\n\r\n//NumberFormat('en-US', {\r\n  //  style: 'percent',\r\n//})\r\n/**** All of these should be moved to a formatter file */\r\n\r\nexport function toAmiraDate(date: Date) {\r\n    return date.toISOString().replace(/Z/gi, '');\r\n}\r\nexport function fromAmiraDate(date: string) {\r\n    return new Date(date + 'Z');\r\n}\r\n\r\n// const pct2Formatter = NumberFormat('en-US', {\r\n//     style: 'percent',\r\n//     minimumFractionDigits: 2\r\n// })\r\n\r\nexport function toPercent(number: number) {\r\n    return (number === undefined || number === null) ? \"\" : numeral(number).format('0%')\r\n}\r\nexport function toPercent1(number: number) {\r\n    return (number === undefined || number === null) ? \"\" : numeral(number).format('0.0%')\r\n}\r\nexport function toPercent2(number: number) {\r\n    return (number === undefined || number === null) ? \"\" : numeral(number).format('0.00%')\r\n}\r\n// const thousandFormatter = NumberFormat('en-US', {\r\n//     maximumSignificantDigits: 3\r\n// })\r\nexport function toThousands(number: number) {\r\n    return    numeral(number).format('0,0');\r\n}\r\nexport function toNumber1(number: number) {\r\n    return (number === undefined || number === null) ? \"\" : numeral(number).format('0.0')\r\n}\r\nexport function toNumber2(number: number) {\r\n    return (number === undefined || number === null) ? \"\" : numeral(number).format('0.00')\r\n}\r\n// const currencyFormatter = NumberFormat('en-US', {\r\n//     style: 'currency',\r\n//     currency: \"USD\",\r\n// })\r\n\r\nexport function isoToDate(dateString: string) {\r\n    return dateString.split(\"T\")[0];\r\n}\r\nexport function toFormatedDateTime(dateTimeString: string) {\r\n    const m = new Date(dateTimeString).getMonth() + 1;\r\n    const d = new Date(dateTimeString).getDate();\r\n    const y = new Date(dateTimeString).getFullYear() % 100;\r\n    let h = new Date(dateTimeString).getHours();\r\n    let min: string | number = new Date(dateTimeString).getMinutes();\r\n    let ampm = 'am'\r\n    if ( h >= 12 ) {\r\n        ampm = 'pm';\r\n        h = h === 12 ? h : h - 12;\r\n    }\r\n    if ( h === 0 ) {\r\n        h = 12\r\n    }\r\n    if ( min < 10 ) {\r\n        min = String(`0${min}`)\r\n    }\r\n    return `${h}:${min} ${ampm} ${m}/${d}/${y}`\r\n}\r\nexport function toDateMonthYear(dateString: string) {\r\n    const m = (new Date(dateString).toDateString().slice(4,7));\r\n    const y = String((new Date(dateString).getFullYear())).slice(2);\r\n    return `${m}-${y}`;\r\n}\r\nexport function toDateDayMonth(dateString: string) {\r\n    const d = (new Date(dateString).toDateString().slice(8,11));\r\n    const m = (new Date(dateString).toDateString().slice(4,7));\r\n    return `${d} ${m}`;\r\n}\r\nexport function toDollars(number: number) {\r\n    return toDollarsAndCents(number).split(\".\")[0];\r\n}\r\nexport function toDollarsAndCents(number: number | undefined | null) {\r\n    return  (number === undefined || number === null) ? \"\" : numeral(number).format('$0,0.00') //currencyFormatter.format(number);\r\n}\r\n","import { NavigationProp } from \"@react-navigation/native\";\r\nimport { IUserGet } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport { Dispatch, SetStateAction, useState, useEffect } from \"react\";\r\nimport { sizes } from \"../../style\";\r\nimport { IEntity } from \"../../utils/hooks\";\r\n\r\nexport const sideMargin = sizes.rem1_5;\r\n\r\nexport type CreateAccountProps = {\r\n    user: IEntity<IUserGet>,\r\n    toastMessage: (msg: string, delay?: number | undefined) => void\r\n};\r\n\r\n","import React from \"react\";\r\nimport { Pressable, PressableProps, Text, TextProps } from \"react-native\";\r\nimport { AppColors } from \"../constants/Colors\";\r\n//import { Colors, Text, TextProps, TouchableOpacity, TouchableOpacityProps } from 'react-native-ui-lib'\r\n\r\nexport function Link(props: Pick<PressableProps, \"onPress\"> & Pick<TextProps, \"style\" | \"children\">) {\r\n    return <Pressable onPress={props.onPress}>\r\n        <Text style={[{ color: AppColors.primary }, props.style]}>{props.children}</Text>\r\n    </Pressable>\r\n}","import React, { useRef, useEffect, RefObject, useMemo, useState } from \"react\";\r\nimport { Image, View, Animated } from \"react-native\";\r\nimport { CheckBox, Text } from \"@ui-kitten/components\";\r\nimport { ButtonField } from \"../../components/ButtonField\";\r\nimport { TextField, ITextField } from \"../../components/TextField\";\r\nimport { bannerText, flex, sizes, textInputWiz } from \"../../style\";\r\nimport { bindTextInput, IEntity, useReadonlyEntity } from \"../../utils/hooks\";\r\nimport { isRequired, isValidEmail } from \"../../utils/validators\";\r\n\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\";\r\n\r\nimport { TBI } from \"../../utils/misc\";\r\nimport { AppColors } from \"../../constants/Colors\";\r\nimport Auth from '@tradingpost/common/api/entities/static/AuthApi'\r\nimport { useAppUser } from \"../../Authentication\";\r\nimport { useData } from \"../../lds\";\r\nimport { useLinkTo, useNavigation } from \"@react-navigation/native\";\r\nimport { CreateAccountProps, sideMargin } from \"./shared\";\r\nimport { Link } from \"../../components/Link\";\r\n\r\n\r\ntype FieldRefs = {\r\n    first: RefObject<ITextField>,\r\n    last: RefObject<ITextField>,\r\n    email: RefObject<ITextField>,\r\n    username: RefObject<ITextField>,\r\n    pass: RefObject<ITextField>,\r\n    confirm: RefObject<ITextField>\r\n}\r\ntype LoginInfo = { email?: string, password?: string };\r\n\r\nexport function AccountInfoSection(props: CreateAccountProps) {\r\n\r\n\r\n    const\r\n        [lockButtons, setLockButtons] = useState(false),\r\n        { setValue: setLoginResult } = useData(\"loginResult\"),\r\n        loginEntity = useReadonlyEntity<LoginInfo>({}),\r\n        linkTo = useLinkTo<any>(),\r\n        nav = useNavigation(),\r\n        [agreeToTerms, setAgreeToTerms] = useState(false),\r\n        [agreeToPrivacy, setAgrreeToPrivacy] = useState(false),\r\n        refs: FieldRefs = {\r\n            first: useRef<ITextField>(null),\r\n            last: useRef<ITextField>(null),\r\n            email: useRef<ITextField>(null),\r\n            username: useRef<ITextField>(null),\r\n            pass: useRef<ITextField>(null),\r\n            confirm: useRef<ITextField>(null),\r\n        },\r\n        buttonConfig = {\r\n            locked: lockButtons,\r\n            left: ({\r\n                text: \"Cancel\",\r\n                onPress: () => {\r\n                    if (nav.canGoBack()) {\r\n                        nav.goBack()\r\n                    } else {\r\n                        linkTo({\r\n                            screen: \"/login\"\r\n                        });\r\n                    }\r\n                }\r\n            }),\r\n            right: {\r\n                text: \"Create\",\r\n                onPress: async () => {\r\n                    setLockButtons(true);\r\n                    const errors: string[] = [];\r\n                    try {\r\n                        for (const k in refs) {\r\n                            const val = refs[k as keyof typeof refs];\r\n                            if (val.current && !val.current.validate()) {\r\n                                errors.push(val.current.errorMessage || \"\");\r\n                            }\r\n                        }\r\n                        if (!agreeToPrivacy || !agreeToTerms) {\r\n                            errors.push(\"You must agree to terms and privacy policy\");\r\n                        }\r\n\r\n                        if (errors.length) {\r\n                            errors.unshift(\"Please fix the following issues:\");\r\n                            props.toastMessage(errors.join(\"\\r\\n\"));\r\n                            setLockButtons(false);\r\n                        } else if (!false) {  //create new user\r\n                            if (loginEntity.data.email && loginEntity.data.password) {\r\n                                const login = await Auth.createLogin(loginEntity.data.email, loginEntity.data.password);\r\n                                await setLoginResult(login);\r\n                                linkTo('/create/basicinfo')\r\n                            } else {\r\n                                throw new Error(\"Something is very wrong.\" + JSON.stringify(loginEntity.data))\r\n                            }\r\n                            setLockButtons(false);\r\n                        } else { //patch authed user\r\n\r\n                            //await UpdateUserProfile(props.user.data);\r\n                            TBI();\r\n                            props.user.resetData(props.user.data);\r\n                            linkTo('/create/basicinfo')\r\n                        }\r\n                    } catch (ex: any) {\r\n                        if (ex.json) {\r\n                            props.toastMessage(`${ex.json.name}:\\r\\n${ex.json.policy || ex.json.description}`);\r\n                        } else if (typeof ex.message === \"string\") {\r\n                            props.toastMessage(ex.message);\r\n                        } else props.toastMessage(JSON.stringify(ex.message));\r\n                        setLockButtons(false);\r\n                    }\r\n\r\n                }\r\n            }\r\n        }\r\n\r\n    return <ScrollWithButtons\r\n        buttons={buttonConfig}>\r\n        {\r\n            <AccountBasicInfo agreeToPrivacy={agreeToPrivacy} setAgreeToPrivacy={setAgrreeToPrivacy} agreeToTerms={agreeToTerms} setAgreeToTerms={setAgreeToTerms} refs={refs} isAuthed={false} loginEntity={loginEntity} {...props} />\r\n        }\r\n    </ScrollWithButtons>\r\n}\r\n\r\nfunction AccountBasicInfo(props: CreateAccountProps & { refs: FieldRefs, isAuthed: boolean, loginEntity: IEntity<LoginInfo>, agreeToTerms: boolean, setAgreeToTerms: (a: boolean) => void, agreeToPrivacy: boolean, setAgreeToPrivacy: (a: boolean) => void }) {\r\n    const { refs, isAuthed } = props,\r\n        opacityAnim = useRef(new Animated.Value(0)).current,\r\n        { agreeToTerms, setAgreeToTerms, agreeToPrivacy, setAgreeToPrivacy } = props,\r\n        linkTo = useLinkTo<any>();\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n\r\n    return <View>\r\n        <View style={[flex, { margin: sideMargin }]}>\r\n            <Animated.Text\r\n                style={[bannerText, { opacity: opacityAnim }]}>\r\n                Let's start with some login information\r\n            </Animated.Text>\r\n            {/* <Section title={'Personal Information'}>\r\n                <TextField label='Name'\r\n                    validate={isRequired}\r\n                    errorMessage={\"`Name` is required\"}\r\n                    textInputRef={refs.first}\r\n                    validateOnChange placeholder='First Name' returnKeyType=\"none\" {...bindTextInput(props.user, \"first_name\", null)} />\r\n                <TextField\r\n                    label='Last'\r\n                    errorMessage={\"`Last Name` is required\"}\r\n                    textInputRef={refs.last}\r\n                    validate={isRequired}\r\n                    validateOnChange placeholder='Last Name' returnKeyType=\"none\"  {...bindTextInput(props.user, \"last_name\", null)} />\r\n            </Section> */}  \r\n            {/* <Section title={'Login Information'} > */}\r\n            <TextField\r\n                //label='Email'\r\n                style={textInputWiz}\r\n                textInputRef={refs.email}\r\n                errorMessage={\"`Email Address` is invalid\"}\r\n                disabled={isAuthed}\r\n                validate={isValidEmail}\r\n                validateOnChange placeholder='Email Address'\r\n                returnKeyType=\"none\" {...bindTextInput(props.loginEntity, \"email\", null)}\r\n            />\r\n\r\n            {\r\n                isAuthed ?\r\n                    <ButtonField\r\n                        compact\r\n                        isActive\r\n                        label='Password'\r\n                        activeText='Change'\r\n                    />\r\n                    : <>\r\n                        <TextField\r\n                            //label='Password'\r\n                            style={textInputWiz}\r\n                            textInputRef={refs.pass}\r\n                            validate={isRequired}\r\n                            validateOnChange\r\n                            errorMessage={\"`Password` is required.\"}\r\n                            placeholder='Account Password' returnKeyType=\"none\" secureTextEntry\r\n                            {...bindTextInput(props.loginEntity, \"password\", null)} />\r\n                        <TextField\r\n                            //label='Confirm'\r\n                            style={textInputWiz}\r\n                            textInputRef={refs.confirm}\r\n                            placeholder='Confirm Password'\r\n                            returnKeyType=\"none\"\r\n                            errorMessage={\"'Confirm' does not match.\"}\r\n                            validateOnChange\r\n                            validate={(c) => Boolean(c) && c === props.loginEntity.data.password}\r\n                            secureTextEntry\r\n                        />\r\n                        <View\r\n                            style={[textInputWiz, { flexDirection: \"row\" }]}\r\n                        >\r\n                            <CheckBox checked={agreeToTerms} onChange={setAgreeToTerms} style={{marginRight: 10}}/>\r\n                            <Text>Agree To </Text>\r\n                            <Link onPress={() => {\r\n                                linkTo('/create/terms')\r\n                            }} >Terms Of Use</Link>\r\n                        </View>\r\n                        <View\r\n                            style={[textInputWiz, { flexDirection: \"row\" }]}\r\n                        >\r\n                            <CheckBox checked={agreeToPrivacy} onChange={setAgreeToPrivacy} style={{marginRight: 10}} />\r\n                            <Text>Agree To </Text>\r\n                            <Link onPress={() => {\r\n                                linkTo('/create/privacy')\r\n                            }}>Privacy Policy</Link>\r\n                        </View>\r\n                    </>\r\n            }\r\n            {/* </Section> */}\r\n        </View>\r\n    </View>\r\n}\r\n","import React from 'react'\r\nimport { TextStyle, ViewStyle } from 'react-native';\r\nimport { Text } from \"@ui-kitten/components\";\r\nimport { fonts, sizes } from '../style';\r\nimport { AppColors } from '../constants/Colors';\r\n\r\nexport function Header(props: { text: string, style?: TextStyle }) {\r\n    return <Text\r\n        style={[{ color: AppColors.primary, fontSize: fonts.large, marginBottom: sizes.rem0_5 }, props.style]}\r\n    >{props.text}{ }</Text>\r\n}\r\n\r\n\r\nexport function Subheader(props: { text: string, style?: TextStyle }) {\r\n    return <Text\r\n        //color={Colors.primary}\r\n        style={[{ color:AppColors.secondary, fontSize: fonts.small, marginBottom: sizes.rem0_5 }, props.style]}\r\n    >{props.text}{ }</Text>\r\n}","import React, { ReactElement, ReactNode } from 'react'\r\nimport { View, ViewProps, ViewStyle } from 'react-native';\r\n\r\nimport { elevated, sizes } from '../style';\r\nimport { Header, Subheader } from './Headers'\r\n\r\ninterface SecitonProps {\r\n    title: string,\r\n    useSubHeading?: boolean,\r\n    children?: ReactNode,\r\n    button?: (props: { height: number, width: number }) => ReactElement,\r\n    alt?: boolean\r\n    style?: ViewProps[\"style\"],\r\n    \r\n}\r\n\r\nexport function Section(props: SecitonProps) {\r\n    const { title, children, useSubHeading} = props;\r\n    return (\r\n        <View  style={[{ backgroundColor: \"white\", marginBottom: sizes.rem1 }, props.style]}>\r\n            <View style={{ flexDirection: \"row\", justifyContent: \"space-between\" }}>\r\n                {Boolean(title) && (useSubHeading ? <Subheader text={title} style={{ color: props.alt ? \"#434343\" : undefined }} /> : <Header text={title} />)}\r\n                {props.button && props.button({ height: sizes.rem1_5, width: sizes.rem1_5 })}\r\n            </View>\r\n            {children}\r\n        </View>\r\n    )\r\n}\r\n\r\nexport function Subsection(props: Omit<SecitonProps, 'useSubHeading'>) {\r\n    return <Section useSubHeading {...props} />\r\n}\r\n\r\nexport const ElevatedSection = (props: Parameters<typeof Section>[0]) => {\r\n    const style = [[elevated, { paddingHorizontal: sizes.rem1 }], props.style]\r\n    return <Section {...props} style={style} />\r\n}","import React, { useLayoutEffect, useState } from 'react'\r\n\r\n//import { rnui } from '../images'\r\nimport { Text, Image } from 'react-native'\r\nimport { IndexPath, Select, SelectItem, SelectProps } from '@ui-kitten/components'\r\n\r\nexport type PickerProps<T extends boolean> = Omit<SelectProps, \"children\" | \"mode\" | \"onSelect\" | \"value\" | \"migrate\" | \"spellCheck\" | \"selectedIndex\"> & {\r\n    selectionLimit?: number, multiSelect?: T,\r\n    // selectedIndex?: (T extends false ? (IndexPath) : (IndexPath)[]),\r\n    items: { label: string, value: string | number, iconUrl?: string }[],\r\n    value?: T extends false ? (string | number) : (string | number)[]\r\n    onSelect?: (item: (T extends false ? IndexPath : IndexPath[])) => void\r\n}\r\n\r\nexport function Picker<T extends boolean = false>(props: PickerProps<T>) {\r\n\r\n    //const [_value, setValues] = useState<PickerProps<T>[\"value\"]>(props.value);\r\n\r\n    // useLayoutEffect(() => {\r\n    //     setValues();\r\n    // }, [props.value])\r\n\r\n    return <Select\r\n        //rightIconSource={rnui.chevronDown}\r\n        //spellCheck={false} \r\n        //migrate \r\n        //selectionLimit={props.selectionLimit}\r\n        //multiSelect={props.multiSelect}\r\n        //mode={props.multiSelect ? \"MULTI\" : \"SINGLE\"}\r\n        {...props}\r\n        //value={(p) => <Text {...p}></Text>}\r\n        value={props.value instanceof Array ? props.items.map((item) => \"TEST\").filter(v => v).join(\",\") : props.items.find((v) => v.value === props.value)?.label || props.placeholder}\r\n\r\n        onSelect={(v) => {\r\n            // if (v instanceof Array) {\r\n            //     setValues(v.map((v) => props.items[v.row].value) as any);\r\n            // }\r\n            // else {\r\n            //     // console.log(\"TESTTTTT::::::\" + props.items[v.row].value as any);\r\n            //     setValues(props.items[v.row].value as any);\r\n            // }\r\n\r\n            if (props.onSelect)\r\n                props.onSelect(v as any);\r\n        }}\r\n        selectedIndex={\r\n            props.multiSelect ? props.items.map((i, idx) =>\r\n                Boolean((props.value as any[]).find(_item => _item.value === i.value)) ?\r\n                    new IndexPath(idx) : null).filter(v => v) as IndexPath[] :\r\n                new IndexPath(props.items.findIndex((i, idx) => i.value === props.value))\r\n        }>\r\n        {props.items.map(i => <SelectItem accessoryLeft={(props) => <Image {...props} source={{ uri: i.iconUrl }} />} title={i.label} key={i.value} />)}\r\n    </Select >\r\n}","import React from 'react';\r\nimport MultiSlider, { MultiSliderProps } from '@ptomasroos/react-native-multi-slider';\r\n\r\nexport function Slider(props: MultiSliderProps) {\r\n    return <MultiSlider\r\n\r\n        //thumbTintColor={Colors.primary}\r\n        //maximumTrackTintColor={Colors.grey50}\r\n        //minimumTrackTintColor={Colors.grey50} \r\n        {...props} />\r\n}","import { Icon } from \"@ui-kitten/components\";\r\nimport React from \"react\";\r\nimport { Pressable, PressableProps, StyleProp, ViewStyle } from \"react-native\";\r\nimport { AppColors } from \"../constants/Colors\";\r\n\r\nexport const AddButton = (props: Pick<PressableProps, \"onPress\"> & Pick<ViewStyle, \"height\" | \"width\">) => {\r\n    return <Pressable onPress={props.onPress} style={{ justifyContent: \"center\" }} ><Icon\r\n        //fill={AppColors.secondary}\r\n        fill={AppColors.secondary}\r\n        height={props.height}\r\n        width={props.width}\r\n        name=\"plus-square\" style={{\r\n            height: props.height,\r\n            width: props.width\r\n        }} /></Pressable>\r\n}\r\n\r\nexport const EditButton = (props: Pick<PressableProps, \"onPress\"> & Pick<ViewStyle, \"height\" | \"width\"> & { style?: ViewStyle }) => {\r\n    return <Pressable onPress={props.onPress} style={[{ justifyContent: \"center\" }, props.style]}><Icon\r\n        //fill={AppColors.secondary}\r\n        fill={\"#708090\"}\r\n        name=\"edit-outline\" style={{\r\n            height: props.height,\r\n            width: props.width\r\n        }} /></Pressable>\r\n}\r\n\r\nexport const SettingsButton = (props: Pick<PressableProps, \"onPress\"> & Pick<ViewStyle, \"height\" | \"width\"> & { style?: ViewStyle }) => {\r\n    return <Pressable onPress={props.onPress} style={[{ justifyContent: \"center\" }, props.style]}><Icon\r\n        //fill={AppColors.secondary}\r\n        fill={\"#708090\"}\r\n        name=\"settings-2-outline\" style={{\r\n            height: props.height,\r\n            width: props.width\r\n        }} /></Pressable>\r\n}\r\nexport const DeleteButton = (props: Pick<PressableProps, \"onPress\"> & Pick<ViewStyle, \"height\" | \"width\" > & { style?: ViewStyle, color?: string }) => {\r\n    return <Pressable onPress={props.onPress} style={[{ justifyContent: \"center\" }, props.style]}><Icon\r\n        //fill={AppColors.secondary}\r\n        fill={props.color ? props.color : \"#708090\"}\r\n        name=\"close-circle-outline\" style={{\r\n            height: props.height,\r\n            width: props.width\r\n            \r\n        }} /></Pressable>\r\n}\r\nexport const ExitButton = (props: Pick<PressableProps, \"onPress\"> & Pick<ViewStyle, \"height\" | \"width\" > & { style?: ViewStyle, color?: string }) => {\r\n    return <Pressable onPress={props.onPress} style={[{ justifyContent: \"center\" }, props.style]}><Icon\r\n        //fill={AppColors.secondary}\r\n        fill={props.color ? props.color : \"#708090\"}\r\n        name=\"close-circle-outline\" style={{\r\n            height: props.height,\r\n            width: props.width\r\n            \r\n        }} /></Pressable>\r\n}\r\nexport const FavButton = (props: Pick<PressableProps, \"onPress\"> & Pick<ViewStyle, \"height\" | \"width\"> & { isSelected?: boolean }) => {\r\n    return <Pressable onPress={props.onPress} style={{ justifyContent: \"center\", alignItems: 'center' }}><Icon\r\n        //fill={AppColors.secondary}\r\n        fill={props.isSelected ? \"#F6BE00\" : \"#708090\"}\r\n        name={props.isSelected ? \"star\" : \"star-outline\"} style={{\r\n            height: props.height,\r\n            width: props.width\r\n        }} /></Pressable>\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { View, KeyboardAvoidingView, Platform } from \"react-native\";\r\nimport { Input } from \"@ui-kitten/components\";\r\nimport { Button, Icon } from '@ui-kitten/components'\r\nimport { sizes } from \"../style\";\r\n\r\nexport function KeyboardAvoidingInput(props: any) {\r\n    return (\r\n    <KeyboardAvoidingView\r\n        behavior={Platform.OS === \"ios\" ? \"padding\" : \"height\"}\r\n        style={{display: \"flex\", flexDirection: \"column\", alignContent: \"flex-end\"}}\r\n        >\r\n        <View style={{display: \"flex\", flexDirection: \"row\", alignItems: 'center'}}>\r\n        <Input \r\n            placeholder={props.placeholder}\r\n            value={props.value}\r\n            multiline={true}\r\n            numberOfLines={props.numLines}\r\n            style={{flex: 1,\r\n                    borderColor: '#ccc',\r\n                    //paddingVertical: sizes.rem0_5, paddingLeft: sizes.rem0_5,\r\n                    padding: sizes.rem0_5\r\n                }}\r\n            onChangeText={nextValue => props.setValue(nextValue)}\r\n        />\r\n        <Button \r\n            style={{backgroundColor: 'transparent',\r\n                    borderColor: 'transparent',\r\n                    padding: sizes.rem0_5,\r\n                    paddingLeft: 0,\r\n                    display: props.displayButton ? 'flex' : 'none'}}\r\n            onPress={() => {\r\n                if (props.clicked) {\r\n                    props.clicked[1](props.clicked[0] + 1)\r\n                }\r\n                props.onClick(props.value, props.setValue, props.item_id)\r\n            }}            \r\n            //onPress={props.onClick(props.value, props.setValue, props.item_id)}\r\n            accessoryRight={props.rightIcon}\r\n                        />\r\n        \r\n        </View>\r\n    </KeyboardAvoidingView>);\r\n}","import React, { useEffect, useMemo, useState } from \"react\"\r\nimport { Autocomplete, AutocompleteItem, Button, Icon, IndexPath, Text, Layout } from \"@ui-kitten/components\"\r\n//import { referenceData } from \"../../apis/ReferenceData\"\r\nimport { ElevatedSection, Section } from \"../../components/Section\"\r\nimport { PlusIcon } from \"../../images\"\r\nimport { bannerText, flex, noMargin, paddView, sizes, thinBannerText } from \"../../style\"\r\nimport { Picker } from '../../components/Picker'\r\nimport {\r\n    CreateAccountProps,\r\n    sideMargin\r\n} from \"./shared\"\r\n\r\nimport {\r\n    //bindMultiPicker,\r\n    bindPicker,\r\n    useOpacityAnim,\r\n    useReadonlyEntity\r\n} from \"../../utils/hooks\"\r\nimport { useSecuritiesList } from '../../SecurityList'\r\n//import { UpdateUserProfile } from \"../../apis/Authentication\"\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\"\r\nimport { Alert, Pressable, TextStyle, View } from \"react-native\"\r\nimport { Slider } from \"../../components/Slider\"\r\nimport { AppColors } from \"../../constants/Colors\"\r\nimport { Api } from \"@tradingpost/common/api\"\r\nimport { AddButton } from \"../../components/AddButton\"\r\nimport { useLinkTo } from \"@react-navigation/native\";\r\nimport { KeyboardAvoidingInput } from \"../../components/KeyboardAvoidingInput\"\r\n\r\n//import { AppConfig } from \"../../apis/ApplicationApi\"\r\n\r\n\r\nexport const investmentStrats = [\r\n    'Buy & Hold',\r\n    'Growth-Focused',\r\n    'Swing Trading',\r\n    'Momentum',\r\n    'Day Trading',\r\n    'Index Investing',\r\n    'Value-Focused',\r\n    'Long/Short',\r\n    'Opportunistic ',\r\n    'Concetrated',\r\n    'Diversified'\r\n];\r\nexport const questionStyle = { fontSize: 16, marginBottom: sizes.rem1, marginTop: sizes.rem1_5 } as TextStyle;\r\n\r\nexport const gicsAC = ['SaaS',\r\n    'Biotech',\r\n    'AdTech',\r\n    'Tech',\r\n    'Fintech',\r\n    'Specialty Finance',\r\n    'Aero/Defense',\r\n    'Industrial',\r\n    'Medtech',\r\n    'Cloud',\r\n    'Consumer',\r\n    'Banks',\r\n    'Industrials',\r\n    'Healthcare',\r\n    'Housing',\r\n    'Electric Vehicles',\r\n    'Renewable Energy',\r\n    'Oil and Gas',\r\n    'Metals and Mining',\r\n    'Semiconductors',\r\n    'Cybersecurity',\r\n    'Metaverse',\r\n    'Crypto',\r\n    'Transportation',\r\n    'Airlines',\r\n    'Auto',\r\n    'Healthcare',\r\n    'Retail',\r\n    'E-commerce',\r\n    'Insurance',\r\n    'Gambling',\r\n    'Quality',\r\n    'Deep Dives',\r\n    'General Market',\r\n    'Valuation',\r\n    'Technicals',\r\n    'Investment Process',\r\n    'Small Caps',\r\n    'Macro',\r\n    'News',\r\n    'Venture Capital',\r\n    'Emerging Markets',\r\n    'Portfolio Management',\r\n    'Data Driven',\r\n    'Industry Expert',\r\n    'Financial Coach',\r\n    'Businesses',\r\n    'Special Situations',\r\n    'Activist'].sort()\r\n\r\n\r\nexport function InvestmentInterestSection(props: CreateAccountProps) {\r\n    const { AppearView } = useOpacityAnim();\r\n    const anaylistProfile = useReadonlyEntity(props.user.data.analyst_profile || {\r\n        investment_strategy: \"\",\r\n        portfolio_concentration: 50,\r\n        benchmark: \"\",\r\n        interests: []\r\n    });\r\n    //props.user.data.investment_interests || { interestLevel: 50 }\r\n    const { securities: { list: securities } } = useSecuritiesList(),\r\n        [lockButtons, setLockButtons] = useState(false),\r\n        [bio, setBio] = useState(''),\r\n        [sliderWidth, setSliderWidth] = useState(100),\r\n        linkTo = useLinkTo<any>(),\r\n        [acText, setAcText] = useState(\"\");\r\n    const acValues = useMemo(() => {\r\n        const r = new RegExp(acText, \"i\");\r\n        return acText ? gicsAC.filter((g, i) => r.test(g)) : [];\r\n    }, [acText])\r\n    const addIfMissing = (value: string) => {\r\n        if (value && !anaylistProfile.data.interests.find((int) => int.toLowerCase() === value.toLowerCase())) {\r\n            anaylistProfile.update({\r\n                \"interests\": [...anaylistProfile.data.interests, value]\r\n            })\r\n        }\r\n        setAcText(\"\");\r\n    }\r\n    const benches = securities.filter(s => s.is_benchmark).sort((a, b) => a.symbol.localeCompare(b.symbol)).map((value) => ({\r\n        label: `[${value.symbol}] ${value.security_name}`,\r\n        value: value.symbol,\r\n        iconUrl: value.logo_url\r\n    }))\r\n    return <ScrollWithButtons\r\n        buttons={\r\n            {\r\n                locked: lockButtons,\r\n                left: {\r\n                    text: \"Nevermind\",\r\n                    onPress: async () => {\r\n                        const defaultSettings = {\r\n                            analyst: false,\r\n                            push_notifications: {\r\n                                mentions: true,\r\n                                upvotes: true,\r\n                                watchlist_changes: true,\r\n                            },\r\n                            portfolio_display: {\r\n                                performance: false,\r\n                                holdings: false,\r\n                                trades: false\r\n                            }\r\n                        }\r\n                        await Api.User.update(props.user.data.id, {\r\n                            settings: defaultSettings\r\n                        })\r\n                        linkTo('/create/profilepicture')\r\n                    }\r\n                },\r\n                right: {\r\n                    text: \"Continue\",\r\n                    onPress: async () => {\r\n                        setLockButtons(true);\r\n                        try {\r\n                            await Api.User.update(props.user.data.id, {\r\n                                bio: bio,\r\n                                analyst_profile: anaylistProfile.data\r\n                            });\r\n                            anaylistProfile.resetData(anaylistProfile.data);\r\n                            props.user.resetData(props.user.data);\r\n\r\n\r\n                            linkTo('/create/linkbrokerage')\r\n                        } catch (ex: any) {\r\n                            console.error(ex);\r\n                            props.toastMessage(\"Unable to update profile\");\r\n                            setLockButtons(false);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }>\r\n        <View style={[paddView, { paddingBottom: 0 }]}>\r\n            <ElevatedSection title=\"\" style={{ paddingVertical: 4 }}>\r\n                <AppearView onLayout={(ev) => {\r\n                    setSliderWidth(ev.nativeEvent.layout.width)\r\n                }} style={[flex]}>\r\n                    <Text style={[thinBannerText, { marginHorizontal: 0, marginTop: sizes.rem0_5 }]}>Welcome Analyst! Tell us a bit about yourself</Text>\r\n                    <Text style={[questionStyle, { marginTop: sizes.rem0_5 }]}>Bio</Text>\r\n                    <KeyboardAvoidingInput\r\n                        value={bio}\r\n                        displayButton={false}\r\n                        numLines={3}\r\n                        placeholder={'Tell people about yourself'}\r\n                        //rightIcon=\r\n                        setValue={setBio}\r\n                    //item_id={props.route.params.post._source.id}\r\n                    //clicked={[commentAdded, setCommentAdded]}\r\n                    //onClick={() => {}}\r\n                    />\r\n                    <Text style={questionStyle}>What is your investment strategy?</Text>\r\n                    <Picker\r\n                        placeholder='Select Strategy'\r\n                        value={anaylistProfile.data.investment_strategy}\r\n                        items={investmentStrats.map((value) => ({\r\n                            label: value,\r\n                            value\r\n                        }))}\r\n                        {...bindPicker(anaylistProfile, \"investment_strategy\", {\r\n                            fromType: (v) => {\r\n                                if (v) {\r\n                                    return investmentStrats[v.row]\r\n                                }\r\n                                return \"\";\r\n                            },\r\n                            toType: (v) => {\r\n                                return new IndexPath(investmentStrats.findIndex(v => v === v));\r\n                            }\r\n                        })}\r\n                    />\r\n                    <Text style={questionStyle}>How concentrated is your portfolio?</Text>\r\n                    <Slider\r\n                        containerStyle={{\r\n                            marginLeft: sliderWidth * 0.05\r\n                        }}\r\n                        min={0}\r\n                        max={100}\r\n                        step={25}\r\n                        sliderLength={sliderWidth * 0.9}\r\n                        values={[anaylistProfile.data.portfolio_concentration || 50]}\r\n                        onValuesChange={(v) => {\r\n                            anaylistProfile.update({\r\n                                portfolio_concentration: v[0]\r\n                            })\r\n                        }\r\n                        }\r\n                    />\r\n                    <View style={{ flexDirection: \"row\", justifyContent: \"space-between\", marginBottom: 16 }}>\r\n                        <Text>Highly Diversified</Text>\r\n                        <Text>Very Concentrated</Text>\r\n                    </View>\r\n                    <Text style={questionStyle}>What benchmark do you follow?</Text>\r\n                    <Picker\r\n                        value={anaylistProfile.data.benchmark}\r\n                        placeholder='Select Benchmark'\r\n                        items={benches}\r\n                        {...bindPicker(anaylistProfile, \"benchmark\", {\r\n                            fromType: (v) => {\r\n                                if (v) {\r\n                                    return benches[v.row].value\r\n                                }\r\n                                return \"\";\r\n                            },\r\n                            toType: (v) => {\r\n                                return new IndexPath(benches.findIndex(v => v === v));\r\n                            }\r\n                        })}\r\n                    />\r\n                    <Text style={questionStyle}>Pick a few interest and specialties</Text>\r\n                    <View>\r\n                        <Autocomplete\r\n                            value={acText || \"\"}\r\n                            onChangeText={setAcText}\r\n                            placeholder=\"Interest &amp; Specialties\"\r\n                            placement=\"bottom\"\r\n                            accessoryRight={\r\n                                (props) => <AddButton\r\n                                    onPress={() => addIfMissing(acText)}\r\n                                    height={(props?.style as any)?.height}\r\n                                    width={(props?.style as any)?.width}\r\n\r\n                                />\r\n                            }\r\n                            onSelect={(idx) => addIfMissing(acValues[idx])}>{\r\n                                acValues.map((v, i) => <AutocompleteItem key={i} title={v} />)\r\n                            }\r\n                        </Autocomplete>\r\n                    </View>\r\n                    {\r\n                        anaylistProfile.data.interests.map((v, i) => <View style={{ padding: sizes.rem0_5, flexDirection: \"row\" }}>\r\n                            <Text style={{ textAlign: \"left\", flex: 1 }}>{v}</Text><Pressable onPress={() => {\r\n                                const newInterest = [...anaylistProfile.data.interests];\r\n                                newInterest.splice(i, 1);\r\n                                anaylistProfile.update({\r\n                                    interests: newInterest\r\n                                })\r\n                            }}><Icon name=\"close-outline\" style={{ height: 24, aspectRatio: 1 }} /></Pressable>\r\n                        </View>)\r\n                    }\r\n                </AppearView>\r\n            </ElevatedSection>\r\n        </View>\r\n    </ScrollWithButtons>\r\n}\r\n\r\n","import React, {useEffect} from 'react'\r\nimport {Text, View, Pressable, PressableProps, ViewStyle, Platform} from 'react-native'\r\nimport {SvgProps, SvgXml} from 'react-native-svg'\r\n\r\n// think about just making an image source converter \r\nexport interface IIconifyIcon {\r\n    body: string;\r\n    left?: number;\r\n    top?: number;\r\n    width?: number;\r\n    height?: number;\r\n    rotate?: number;\r\n    hFlip?: boolean;\r\n    vFlip?: boolean;\r\n}\r\n\r\nexport interface IconProps {\r\n    icon: IIconifyIcon,\r\n    style?: ViewStyle,\r\n    svgProps?: SvgProps,\r\n    DEBUG?: boolean,\r\n    // Hack for right now... shoudl htink about this...    \r\n    currentColor?: string\r\n    pressableProps?: Omit<PressableProps, \"style\">\r\n}\r\n\r\nexport function IconifyIcon(props: IconProps) {\r\n    useEffect(() => {\r\n        if (props.DEBUG) {\r\n            console.log(JSON.stringify(props.icon));\r\n        }\r\n    }, [props.icon, props.DEBUG])\r\n\r\n    const xml = `<svg fill=\"black\" ${Platform.OS === \"web\" ? 'style=\"height:100%;width:100%;\"' : \"\"} width=\"${props.icon.width || 0}\" height=\"${props.icon.height || 0}\" viewBox=\"0 0 ${props.icon.width || 0} ${props.icon.height || 0}\">${props.currentColor ? props.icon.body.replace(/\"currentColor\"/gi, `\"${props.currentColor}\"`) : props.icon.body}</svg>`;\r\n    const svg =\r\n        Platform.OS === \"web\" ? <View style={props.svgProps?.style}>\r\n                <div style={{height: \"100%\", width: \"100%\"}} dangerouslySetInnerHTML={{__html: xml}}/>\r\n            </View> :\r\n            <SvgXml height={\"100%\"} width={\"100%\"} xml={xml}  {...props.svgProps} />\r\n\r\n    return props.pressableProps ?\r\n        <Pressable style={props.style} {...props.pressableProps}>{svg}</Pressable> :\r\n        <View style={props.style}>{svg}</View>\r\n}","import AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { getCallBackUrl } from \"@tradingpost/common/api/entities/static/EntityApiBase\";\r\nimport { openBrowserAsync, WebBrowserResultType } from \"expo-web-browser\";\r\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { Linking } from \"react-native\";\r\nimport { EventRegister } from \"react-native-event-listeners\";\r\nimport uuid from 'react-native-uuid';\r\nimport { initLds } from \"../../lds\";\r\n//TODO: SHould put this all in the app later as a generate link \r\nconst clientId = \"cm9mUHBhbVUxZzcyVGJNX0xrc2E6MTpjaQ\";\r\nconst platform = \"twitter\",\r\n    redirectUriText = `${getCallBackUrl()}/auth/${platform}`,\r\n    redirectUri = new URL(redirectUriText),\r\n    authUrlText = \"https://twitter.com/i/oauth2/authorize\"\r\n//state = `amira_${platform}`;\r\n\r\nexport interface ITokenResponse {\r\n    \"token_type\": \"bearer\",\r\n    \"expires_in\": number,\r\n    \"access_token\": string,\r\n    \"scope\": string\r\n}\r\n\r\nexport interface TwitterMe {\r\n    id: string,\r\n    name: string\r\n    username: string\r\n}\r\n\r\nexport function useTwitterAuth() {\r\n    const state = useRef<string>(uuid.v4() as string);\r\n    let intervalHandler = useRef<any>()\r\n    \r\n    const openAuth = useCallback(async () => {\r\n        await AsyncStorage.removeItem(\"auth-twitter-code\");\r\n        const _challenge = Math.random().toString().substring(2, 10);\r\n        const authUrl = new URL(authUrlText);\r\n        authUrl.searchParams.append(\"response_type\", \"code\");\r\n        authUrl.searchParams.append(\"client_id\", clientId);\r\n        authUrl.searchParams.append(\"redirect_uri\", redirectUriText);\r\n        authUrl.searchParams.append(\"state\", state.current);\r\n        authUrl.searchParams.append(\"scope\", \"users.read tweet.read offline.access\");\r\n        authUrl.searchParams.append(\"code_challenge\", _challenge);\r\n        authUrl.searchParams.append(\"code_challenge_method\", \"plain\");\r\n        console.log(\"OPENING BRWOSER\")\r\n        const openResult = await openBrowserAsync(authUrl.toString());\r\n        \r\n        const code = await new Promise<string>((res,rej)=>{\r\n        //HACK: will look for a better solution later \r\n            //TODO: Also need to check state here just in case no matter what ... \r\n            clearInterval(intervalHandler.current);       \r\n            intervalHandler.current =setInterval(async ()=>{\r\n                const code = await AsyncStorage.getItem(\"auth-twitter-code\");\r\n                console.log(\"########## LOOKING FOR THE CODE ##########\");\r\n                if(code){{\r\n                    res(code);\r\n                    console.log(\"########## I FOUND THE CODE ##########\");\r\n                }\r\n                clearInterval(intervalHandler.current);\r\n                }\r\n            },1000);\r\n        })\r\n        \r\n        // let respTest = await resp.text();\r\n        // if (!resp.ok)\r\n        //     throw new Error(respTest)\r\n        // else {\r\n        //     //respTest = await resp.text();\r\n        //     console.log(respTest);\r\n        // }\r\n        //const auth    //: ITokenResponse =  JSON.parse(respTest);  //await resp.json();\r\n        return  await Api.User.extensions.linkSocialAccount({ callbackUrl: getCallBackUrl(), platform,code, challenge:_challenge}) ;        \r\n    }, []);\r\n\r\n    //Clean up interval if its dangling \r\n    useEffect(()=>{\r\n        return ()=> clearInterval(intervalHandler.current)\r\n    },[])\r\n\r\n    return openAuth\r\n}\r\n\r\n// export const getToken = async (info: {\r\n//     code: string\r\n// }) => {\r\n//     try {\r\n        \r\n//         // const meResp = await fetch(\"https://api.twitter.com/2/users/me\", {\r\n//         //     method: \"GET\",\r\n//         //     headers: {\r\n//         //         Authorization: `Bearer ${auth.access_token}`\r\n//         //     }\r\n//         // });\r\n\r\n//         // if (!meResp.ok)\r\n//         //     throw new Error(await meResp.text())\r\n\r\n//         // const meData: {\r\n//         //     data: TwitterMe\r\n\r\n//         // } = await meResp.json();\r\n\r\n\r\n//     })\r\n\r\n// }","import AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { getCallBackUrl } from \"@tradingpost/common/api/entities/static/EntityApiBase\";\r\nimport { openBrowserAsync, WebBrowserResultType } from \"expo-web-browser\";\r\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { Linking } from \"react-native\";\r\nimport { EventRegister } from \"react-native-event-listeners\";\r\nimport uuid from 'react-native-uuid';\r\nimport { makeRedirectUrl } from \"./shared\";\r\n\r\n//TODO: SHould put this all in the app later as a generate link \r\nconst clientId = \"408632420955-7gsbtielmra10pj4sdccgml20tphfujk.apps.googleusercontent.com\";\r\nconst platform = \"youtube\",\r\n    redirectUriText = makeRedirectUrl(platform),// `http://localhost:19006/auth/${platform}`,\r\n    redirectUri = new URL(redirectUriText),\r\n    authUrlText = \"https://accounts.google.com/o/oauth2/v2/auth\"\r\n//state = `amira_${platform}`;\r\n\r\nexport interface ITokenResponse {\r\n    \"token_type\": \"bearer\",\r\n    \"expires_in\": number,\r\n    \"access_token\": string,\r\n    \"scope\": string\r\n}\r\n\r\nexport interface TwitterMe {\r\n    id: string,\r\n    name: string\r\n    username: string\r\n}\r\n\r\nexport function useGoogleAuth() {\r\n    const state = useRef<string>(uuid.v4() as string);\r\n    let intervalHandler = useRef<any>()\r\n    \r\n    const openAuth = useCallback(async () => {\r\n        await AsyncStorage.removeItem(\"auth-youtube-code\");\r\n        const _challenge = Math.random().toString().substring(2, 10);\r\n        //const authUrl = new URL(authUrlText);\r\n        // authUrl.searchParams.append(\"response_type\", \"code\");\r\n        // authUrl.searchParams.append(\"client_id\", clientId);\r\n        // authUrl.searchParams.append(\"redirect_uri\", redirectUriText);\r\n        // authUrl.searchParams.append(\"state\", state.current);\r\n        // authUrl.searchParams.append(\"scope\", \"https://www.googleapis.com/auth/youtube\");\r\n        // authUrl.searchParams.append(\"code_challenge\", _challenge);\r\n        // authUrl.searchParams.append(\"code_challenge_method\", \"plain\");\r\n    //https://www.googleapis.com/auth/youtubepartner-channel-audit\r\n        const googleUrl = `https://accounts.google.com/o/oauth2/v2/auth?`+\r\n        `scope=https%3A//www.googleapis.com/auth/youtube%20https%3A//www.googleapis.com/auth/youtubepartner-channel-audit&`+\r\n        `include_granted_scopes=true&`+\r\n        `response_type=code&`+\r\n        `state=state_parameter_passthrough_value&`+\r\n        `redirect_uri=${encodeURIComponent(redirectUriText)}&`+\r\n        `client_id=${clientId}`;\r\n\r\n        const openResult = await openBrowserAsync(googleUrl);\r\n        \r\n        const code = await new Promise<string>((res,rej)=>{\r\n        //HACK: will look for a better solution later \r\n            //TODO: Also need to check state here just in case no matter what ... \r\n            clearInterval(intervalHandler.current);       \r\n            intervalHandler.current =setInterval(async ()=>{\r\n                const code = await AsyncStorage.getItem(\"auth-youtube-code\");\r\n                if(code){\r\n                    res(code);\r\n                clearInterval(intervalHandler.current);\r\n                }\r\n            },1000);\r\n        })\r\n        \r\n        // let respTest = await resp.text();\r\n        // if (!resp.ok)\r\n        //     throw new Error(respTest)\r\n        // else {\r\n        //     //respTest = await resp.text();\r\n        //     console.log(respTest);\r\n        // }\r\n        //const auth    //: ITokenResponse =  JSON.parse(respTest);  //await resp.json();\r\n        return await Api.User.extensions.linkSocialAccount({platform,code, challenge:_challenge, callbackUrl:getCallBackUrl()});\r\n    }, []);\r\n\r\n    //Clean up interval if its dangling \r\n    useEffect(()=>{\r\n        return ()=> clearInterval(intervalHandler.current)\r\n    },[])\r\n\r\n    return openAuth\r\n}\r\n\r\n// export const getToken = async (info: {\r\n//     code: string\r\n// }) => {\r\n//     try {\r\n        \r\n//         // const meResp = await fetch(\"https://api.twitter.com/2/users/me\", {\r\n//         //     method: \"GET\",\r\n//         //     headers: {\r\n//         //         Authorization: `Bearer ${auth.access_token}`\r\n//         //     }\r\n//         // });\r\n\r\n//         // if (!meResp.ok)\r\n//         //     throw new Error(await meResp.text())\r\n\r\n//         // const meData: {\r\n//         //     data: TwitterMe\r\n\r\n//         // } = await meResp.json();\r\n\r\n\r\n//     })\r\n\r\n// }","\r\nimport { getCallBackUrl } from '@tradingpost/common/api/entities/static/EntityApiBase';\r\nimport Constants, { AppOwnership } from 'expo-constants'\r\n\r\nexport const makeRedirectUrl = (platform: string) => {\r\n    let baseUrl = AppOwnership.Expo === Constants.appOwnership ? Constants.manifest?.hostUri : \"\";\r\n    return `${getCallBackUrl()}/auth/${platform}`\r\n}","import React, { useEffect, useState, useMemo, useRef } from \"react\"\r\nimport { IconifyIcon, IIconifyIcon } from \"./IconfiyIcon\"\r\nimport { ElevatedSection, Section, Subsection } from \"./Section\"\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { View, Animated, Pressable, PressableProps } from \"react-native\"\r\nimport { useLinkTo } from \"@react-navigation/native\"\r\nimport { Autocomplete, AutocompleteItem, Icon, IndexPath, Text, TabView, Tab } from \"@ui-kitten/components\";\r\nimport { bannerText, elevated, flex, paddView, paddViewWhite, sizes, thinBannerText, social as socialStyling, fonts } from \"../style\";\r\nimport { useAppUser } from \"../Authentication\"\r\nimport { KeyboardAvoidingInput } from \"./KeyboardAvoidingInput\";\r\nimport { useTwitterAuth } from \"../utils/third-party/twitter\";\r\nimport { social } from \"../images\";\r\nimport { AppColors } from \"../constants/Colors\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { useGoogleAuth } from \"../utils/third-party/youtube\";\r\nimport { getCallBackUrl } from \"@tradingpost/common/api/entities/static/EntityApiBase\";\r\n\r\n\r\nexport function YourContentComponent() {\r\n    const { loginState, signIn } = useAppUser(),\r\n        toast = useToast(),\r\n        [inputMessage, setInputMessage] = useState(''),\r\n        [inputPlatform, setInputPlatform] = useState(''),\r\n        [inputValue, setInputValue] = useState('');\r\n\r\n    const appUser = loginState?.appUser;\r\n    const authToken = loginState?.authToken\r\n    const getTwitterToken = useTwitterAuth();\r\n    const getGoogleToken = useGoogleAuth();\r\n\r\n    let userClaims = appUser?.claims;\r\n\r\n    let [twitterHandle, setTwitterHandle] = useState(userClaims ? userClaims.find(c => c.platform === \"twitter\")?.claims?.handle : '')\r\n    let [substackUsername, setsubstackUsername] = useState(userClaims ? userClaims.find(c => c.platform === \"substack\")?.claims?.handle : '')\r\n    let [spotifyShow, setSpotifyShow] = useState(userClaims ? userClaims.find(c => c.platform === \"spotify\")?.claims?.handle : '')\r\n    let [youtubeChannel, setYoutubeChannel] = useState(userClaims ? userClaims.find(c => c.platform === \"youtube\")?.claims?.handle : '')\r\n\r\n\r\n    return (\r\n        <ElevatedSection title=\"\" style={{ padding: 5 }}>\r\n            <Text style={[thinBannerText, { fontSize: fonts.medium, lineHeight: fonts.medium * 1.5 }]}>TradingPost aggregates content across several social platforms.</Text>\r\n            <View style={{ flexDirection: \"row\", marginHorizontal: sizes.rem2, marginBottom: sizes.rem1 }}>\r\n                <HandleButton\r\n                    title={twitterHandle}\r\n                    icon={social.TwitterLogo}\r\n                    onPress={() => {\r\n                        getTwitterToken().then((handle) => {\r\n                            setTwitterHandle(handle)\r\n                        })\r\n                    }}\r\n                    iconPadd={sizes.rem1}\r\n                />\r\n                <HandleButton title={youtubeChannel} icon={social.YouTubeLogo}\r\n                    iconPadd={sizes.rem1}\r\n                    onPress={() => {\r\n                        getGoogleToken().then((handle) => {\r\n                            setYoutubeChannel(handle)\r\n                        })\r\n                        setInputPlatform('youtube')\r\n                        //await Api.User.extensions.linkSocialAccount({platform: 'substack', platform_idenifier: ''}) ;  \r\n                    }}\r\n                />\r\n            </View>\r\n            <View style={{ flexDirection: \"row\", marginHorizontal: sizes.rem2, marginBottom: sizes.rem1 }}>\r\n                <HandleButton title={substackUsername} icon={social.SubstackLogo}\r\n                    iconPadd={sizes.rem1}\r\n                    currentColor={socialStyling.substackColor}\r\n                    onPress={() => {\r\n                        setInputMessage('Please enter your Substack username as it appears in your profile URL');\r\n                        setInputPlatform('substack')\r\n                        //await Api.User.extensions.linkSocialAccount({platform: 'substack', platform_idenifier: ''}) ;  \r\n                    }}\r\n                />\r\n                <HandleButton title={spotifyShow} icon={social.SpotifyLogo}\r\n                    iconPadd={sizes.rem0_5}\r\n                    onPress={() => {\r\n                        setInputMessage(\"Please enter your Spotify Podcast's Profile URL.\\nIn the Spotify App, this can be found by going to your Podcasts's Profile Page, clicking the 'Share' Icon and clicking 'Copy Link'.\");\r\n                        setInputPlatform('spotify')\r\n                        //await Api.User.extensions.linkSocialAccount({platform: 'substack', platform_idenifier: ''}) ;  \r\n                    }}\r\n                />\r\n            </View>\r\n            <Text style={[thinBannerText, { fontSize: fonts.medium, lineHeight: fonts.medium * 1.5 }]}>Sign in to your account(s) above to claim or add your content.</Text>\r\n            <View style={inputPlatform === '' ? { display: 'none' } : { display: 'flex' }}>\r\n                <Text>\r\n                    {inputMessage}\r\n                </Text>\r\n                <KeyboardAvoidingInput\r\n                    placeholder={'Enter here'}\r\n                    value={inputValue}\r\n                    setValue={setInputValue}\r\n                    displayButton={true}\r\n                    numLines={2}\r\n                    rightIcon={(props: any) => <Icon\r\n                        fill={AppColors.secondary}\r\n                        name=\"plus-square\" height={35} width={35} style={{ height: 35, width: 35, padding: 0, alignContent: 'center' }} />}\r\n\r\n                    onClick={async (r: any, s: any, t: any) => {\r\n                        const result = await Api.User.extensions.linkSocialAccount({ callbackUrl: getCallBackUrl(), platform: inputPlatform, platform_idenifier: r });\r\n                        if (result === '') {\r\n                            toast.show(`${inputPlatform} Account Link Failed. Please try again or email contact@tradingpostapp.com for assistance.`)\r\n                        }\r\n                        s('')\r\n                        authToken ? await signIn(\"\", authToken) : {};\r\n                    }}\r\n                />\r\n            </View>\r\n        </ElevatedSection>)\r\n\r\n}\r\n\r\nexport const HandleButton = (props: { title: string | undefined, icon: IIconifyIcon, currentColor?: string, iconPadd?: number } & Pick<PressableProps, \"onPress\">) => {\r\n    return <Pressable onPress={props.onPress} style={{ flex: 1, height: sizes.rem8, opacity: props.title ? 1 : 0.25 }}>\r\n        <IconifyIcon icon={props.icon} style={{ width: \"100%\", flex: 1, justifyContent: \"space-around\" }} svgProps={{ style: { paddingVertical: props.iconPadd, height: \"100%\" } }} currentColor={props.currentColor} />\r\n        <Text numberOfLines={1} style={{ fontStyle: !props.title ? \"italic\" : undefined, color: \"black\", textAlign: \"center\" }}>{props.title || \"Unclaimed\"}</Text>\r\n    </Pressable>\r\n}","\r\nimport { NavigationProp, useNavigation } from \"@react-navigation/native\"\r\nimport { Icon } from \"@ui-kitten/components\"\r\nimport React from \"react\"\r\nimport { Pressable, Image } from \"react-native\"\r\nimport { AppColors } from \"../constants/Colors\"\r\nimport { sizes } from \"../style\"\r\n\r\nexport const ProfileButton = (props: { userId: string, profileUrl: string, size: number, editable?: boolean }) => {\r\n    const nav = useNavigation<NavigationProp<any>>();\r\n\r\n    return <Pressable\r\n        onPress={props.editable ? async () => {\r\n            nav.navigate(\"ImagePicker\");\r\n        } : () => {\r\n            if (props.userId)\r\n                nav.navigate(\"Profile\", {\r\n                    userId: props.userId\r\n                });\r\n        }}\r\n        style={{\r\n            backgroundColor: \"gray\",\r\n            width: props.size,\r\n            height: props.size,\r\n            borderRadius: props.size / 2,\r\n            alignSelf: \"center\",\r\n            borderWidth: props.size / 32,\r\n            borderColor: \"#ccc\",\r\n            overflow: \"hidden\"\r\n        }}>\r\n        {props.profileUrl ? <Image style={{ height: \"100%\", width: \"100%\" }} source={{ uri: props.profileUrl }} /> : <Icon height={\"100%\"} width={\"100%\"} name=\"person\" />}\r\n    </Pressable>\r\n}","import React from \"react\";\r\nimport { Text } from \"@ui-kitten/components\";\r\nimport { View } from 'react-native'\r\nimport { flex, fonts, sizes } from \"../style\";\r\n\r\nexport function NoDataPanel(props: { message?: string }) {\r\n    return <View style={[{ justifyContent: \"center\", alignContent: \"center\", margin: sizes.rem1 }]}>\r\n        <Text style={{ fontSize: fonts.large, color: \"lightgray\", textAlign: \"center\" }}>\r\n            {props.message || \"No Items\"}\r\n        </Text>\r\n    </View>\r\n}","import React, { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { Text, FlatList, FlatListProps, ListRenderItem, ScrollView, View, ViewToken } from \"react-native\";\r\nimport { flex } from \"../style\";\r\nimport { TBI } from \"../utils/misc\";\r\nimport { Link } from \"./Link\";\r\nimport { NoDataPanel } from \"./NoDataPanel\";\r\n\r\n\r\nexport type DataOrQuery<T> = T[] | ((data: T[] | undefined, page: number, sizeCache: SizeParts[]) => Promise<T[]>);\r\nexport type ListProps<T> = {\r\n    data?: DataOrQuery<T>,\r\n    noDataMessage?: string,\r\n    loadingMessage?: string,\r\n    maxDisaplyCount?: number,\r\n    maxDisaplyText?: string\r\n    datasetKey?: string | number,\r\n    keyExtractor?: FlatListProps<T>[\"keyExtractor\"]\r\n}\r\ntype HasU<T, U> = U extends undefined | null ? T : (T | U);\r\nexport type SizeParts = { index: number, length: number, offset: number };\r\nexport function List<T, U>(props: {\r\n    //    data: ReadonlyArray<T> | null | undefined\r\n    maxPage?: number,\r\n    listKey?: string,\r\n    renderItem: ListRenderItem<HasU<T, U>> | null | undefined\r\n    nestedScrollEnabled?: boolean,\r\n    preloadOffset?: number,\r\n    loadingItem: U,\r\n    getItemLayout?: ((\r\n        data: Array<HasU<T, U>> | null | undefined,\r\n        index: number,\r\n        sizeCache: SizeParts[]\r\n    ) => { length: number; offset: number; index: number }) | undefined;\r\n} & ListProps<T> & Pick<FlatListProps<HasU<T, U>>, \"style\" | \"contentContainerStyle\" | \"numColumns\" | \"ListHeaderComponent\" | \"StickyHeaderComponent\" | \"keyExtractor\" | \"horizontal\">) {\r\n\r\n    const [internalData, setInternalData] = useState<T[]>(),\r\n        { data, preloadOffset, datasetKey } = props,\r\n        [currentPage, setCurrentPage] = useState(0),\r\n        [pagesDone, setPagesDone] = useState(false),\r\n        isLoadingRef = useRef(true),\r\n        [maxItem, setMaxItem] = useState(-1),\r\n        [triggertHack, setTriggerHack] = useState(false),\r\n        sizeCache = useRef<SizeParts[]>([]).current,\r\n        datasetKeyRef = useRef(props.datasetKey);\r\n\r\n    datasetKeyRef.current = props.datasetKey;\r\n\r\n    useEffect(() => {\r\n        setPagesDone(false);\r\n\r\n        (async () => {\r\n            if (typeof data == \"function\") {\r\n                const result = await data(undefined, 0, sizeCache);\r\n\r\n                if (!result.length || props.maxPage === 0) {\r\n                    setPagesDone(true);\r\n                }\r\n\r\n                if (datasetKey === datasetKeyRef.current) {\r\n                    isLoadingRef.current = false;\r\n                    setInternalData(result);\r\n                }\r\n\r\n\r\n            }\r\n            else {\r\n                isLoadingRef.current = false;\r\n                setInternalData(data);\r\n                setPagesDone(true);\r\n            }\r\n        })()\r\n    }, [datasetKey, Boolean(data), props.maxPage])\r\n\r\n    useEffect(() => {\r\n        if (!pagesDone && typeof data === 'function' && internalData) {\r\n            if (!isLoadingRef.current) {\r\n                const remaining = (internalData.length - 1) - maxItem;\r\n                if (remaining <= (preloadOffset || 1)) {\r\n                    isLoadingRef.current = true;\r\n                    setTriggerHack((hack) => !hack);\r\n                    const nextPage = currentPage + 1;\r\n                    const originalLength = internalData.length\r\n\r\n                    if (datasetKey === datasetKeyRef.current) {\r\n                        data(internalData, nextPage, sizeCache).then((newData) => {\r\n                            if (newData.length === originalLength || props.maxPage === nextPage) {\r\n                                isLoadingRef.current = false;\r\n                                setPagesDone(true);\r\n                            }\r\n                            else {\r\n                                setInternalData(newData);\r\n                                setCurrentPage(nextPage);\r\n                                isLoadingRef.current = false;\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n                else {\r\n                    //console.log(\"NOPE\");\r\n                }\r\n            }\r\n            else {\r\n                //console.log(\"WHAT UP\");\r\n            }\r\n        }\r\n\r\n    }, [maxItem, datasetKey, internalData, preloadOffset, currentPage, props.maxPage])\r\n\r\n    const vp = useMemo(() => [\r\n        {\r\n            viewabilityConfig: {\r\n                itemVisiblePercentThreshold: 20\r\n            },\r\n            onViewableItemsChanged: (ev: { viewableItems: Array<ViewToken>; changed: Array<ViewToken> }) => {\r\n                let max = 0;\r\n                ev.viewableItems.forEach((vi) => {\r\n                    max = Math.max(max, vi.index || 0);\r\n                });\r\n                setMaxItem((curMax) =>\r\n                    Math.max(max, curMax));\r\n            },\r\n        },\r\n    ], []);\r\n    const needsSplice = internalData && props.maxDisaplyCount && internalData.length > props.maxDisaplyCount;\r\n\r\n    return !internalData?.length ? <NoDataPanel message={internalData ? props.noDataMessage : (props.loadingMessage || \"Loading...\")} /> :\r\n        <FlatList\r\n            listKey={props.listKey}\r\n            horizontal={props.horizontal}\r\n            style={[{\r\n                //    height: \"100%\" \r\n            }, props.style]}\r\n            // contentContainerStyle={[{ height: \"100%\" }, props.contentContainerStyle]}\r\n            getItemLayout={props.getItemLayout ? (a, b) => (props.getItemLayout as any)(a, b, sizeCache) : undefined}\r\n            numColumns={props.numColumns}\r\n            ListHeaderComponent={props.ListHeaderComponent}\r\n            ListFooterComponent={needsSplice ? () => {\r\n                return <Link onPress={TBI} style={{ marginLeft: \"auto\" }}>{props.maxDisaplyText || \"View All\"}</Link>\r\n            } : undefined}\r\n            stickyHeaderIndices={props.ListHeaderComponent ? [0] : undefined}\r\n            data={(isLoadingRef.current ? [...internalData, props.loadingItem] : (needsSplice ? internalData.slice(0, props.maxDisaplyCount) : internalData)) as HasU<T, U>[]}\r\n            keyExtractor={props.keyExtractor}\r\n            renderItem={props.renderItem}\r\n            nestedScrollEnabled={props.nestedScrollEnabled}\r\n            viewabilityConfigCallbackPairs={vp}\r\n        />\r\n\r\n    // return <ScrollView nestedScrollEnabled>\r\n    //     <View\r\n    //         style={{ backgroundColor: \"purple\", height: 1000, borderColor: \"yellow\", borderWidth: 2 }}\r\n    //     ></View>\r\n    // </ScrollView>\r\n}","import React, { MutableRefObject, useEffect, useRef, useState } from \"react\";\r\nimport { Pressable, View, ViewStyle, Text } from \"react-native\";\r\nimport { useSecuritiesList } from '../SecurityList'\r\nimport { SearchBar } from \"./SearchBar\";\r\nimport { Interface } from \"@tradingpost/common/api\"\r\nimport { ISecurityList } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport { Avatar, Icon } from \"@ui-kitten/components\";\r\nimport { List } from \"./List\";\r\nimport { flex } from \"../style\";\r\nimport { KeyboardAvoidingInput } from \"./KeyboardAvoidingInput\";\r\nimport { useIsKeyboardVisible } from \"../utils/hooks\";\r\n\r\nconst cellStyle = { flexGrow: 1, aspectRatio: 1, justifyContent: \"center\", marginVertical: 4, alignItems: \"center\", flexBasis: 20 } as ViewStyle;\r\nconst numItemsPerRow = 4;\r\n//TODO: Need to optimize security load\r\nconst empty = {};\r\ntype SecOrEmpty = ISecurityList | {};\r\n\r\nexport type SelectionConverterRef = MutableRefObject<((selectedItems: Record<number, true>) => ISecurityList[]) | null>;\r\n//helper until i  lean this up\r\nexport const useWatchlistPicker = () => {\r\n    const [selectedItems, setSelectedItems] = useState<Record<number, true>>({})\r\n    return {\r\n        selectionConverter: useRef<(selectedItems: Record<number, true>) => ISecurityList[]>(null),\r\n        selectedItems,\r\n        onSelectedItemschanged: setSelectedItems,\r\n        symbolConverter: useRef<(symbols: string[]) => Record<number, true>>(null),\r\n    }\r\n}\r\nexport const WatchlistPicker = (props: { selectedItems: Record<number, true>, securitiesLoaded?: () => void, onSelectedItemschanged: (selectedItems: Record<number, true>) => void, selectionConverter: SelectionConverterRef, symbolConverter: MutableRefObject<((symbols: string[]) => Record<number, true>) | null> }) => {\r\n\r\n    const [searchText, setSearchText] = useState(\"\"),\r\n        { selectedItems } = props,\r\n        [data, setData] = useState<(Interface.ISecurityList | {})[]>([]),\r\n        [datasetKey, setDatasetKey] = useState(\"\"),\r\n        { securities: {\r\n            list: securities\r\n        } } = useSecuritiesList()\r\n\r\n    //    if (props.selectionConverter) {\r\n\r\n\r\n    //This is a all part of just getting done quickly.. need ot clean this up \r\n    useEffect(() => {\r\n        if (securities.length && props.securitiesLoaded) {\r\n            props.securitiesLoaded()\r\n        }\r\n\r\n    }, [securities.length, Boolean(props.securitiesLoaded)])\r\n    props.selectionConverter.current = securities.length ? (_selectedItems) => securities.filter((s) => _selectedItems[s.id]) : null;\r\n    props.symbolConverter.current = securities.length ? (_symbols) => {\r\n        const output: Record<number, true> = {}\r\n        securities.forEach((s) => {\r\n            if (_symbols.find((_s) => _s === s.symbol))\r\n                output[s.id] = true;\r\n        })\r\n        return output;\r\n    } : null\r\n    //}\r\n    //  else if (props.selectionConverter)\r\n    const delayRef = useRef(0);\r\n\r\n    const selectedItemCount = Object.keys(selectedItems).length;\r\n    useEffect(() => {\r\n        if (delayRef.current)\r\n            clearTimeout(delayRef.current);\r\n\r\n        delayRef.current = setTimeout(() => {\r\n\r\n            const items: (ISecurityList | {})[] = securities.filter((s, i) =>\r\n                (!searchText && (i < 25 || selectedItems[s.id])) ||\r\n                ((searchText.length >= 3 && new RegExp(searchText, \"gi\").test(s.security_name))) ||\r\n                (searchText.length && (new RegExp(searchText, \"gi\")).test(s.symbol))\r\n            ).sort((a, b) => {\r\n                if (selectedItems[a.id] && !selectedItems[b.id])\r\n                    return -1\r\n                else if (selectedItems[b.id] && !selectedItems[a.id])\r\n                    return 1\r\n                else {\r\n                    return (() => {\r\n\r\n                        if (searchText) {\r\n                            if (searchText.length <= 3) {\r\n                                const aStartsWith = new RegExp(\"^\" + searchText, \"gi\").test(a.symbol);\r\n                                const bStartsWith = new RegExp(\"^\" + searchText, \"gi\").test(b.symbol);\r\n\r\n                                if (aStartsWith && !bStartsWith)\r\n                                    return -1\r\n                                else if (!aStartsWith && bStartsWith)\r\n                                    return 1\r\n                                else\r\n                                    return a.symbol.localeCompare(b.symbol)\r\n\r\n                            }\r\n                            else\r\n                                return a.symbol.localeCompare(b.symbol)\r\n                        }\r\n                        else\r\n                            return 0\r\n                    })()\r\n\r\n\r\n\r\n                }\r\n\r\n\r\n                //? a.symbol.localeCompare(b.symbol) : \r\n                //                (selectedItems[a.id] ? -1 : -1)\r\n            });\r\n\r\n            const gap = Array.from({ length: numItemsPerRow - (items.length % numItemsPerRow) }, () => empty);\r\n            if (gap.length !== 4)\r\n                items.push(...gap);\r\n\r\n            setData(items)\r\n            setDatasetKey(searchText);\r\n        }, 333) as any;\r\n    }, [searchText, securities, selectedItems])\r\n\r\n\r\n\r\n    return <View\r\n        style={flex}\r\n    >\r\n        <View style={{ padding: 8 }}>\r\n            <KeyboardAvoidingInput\r\n                value={searchText}\r\n                displayButton={false}\r\n                numLines={1}\r\n                placeholder={'Searching...'}\r\n                setValue={setSearchText}\r\n            />\r\n        </View>\r\n        <View style={flex}>\r\n            <List\r\n                numColumns={numItemsPerRow}\r\n                data={data}\r\n                datasetKey={datasetKey ? datasetKey : data.filter(d => d !== empty).length}\r\n                renderItem={(i) => {\r\n                    return <SecurityCell\r\n                        item={i.item}\r\n                        isSelected={isSec(i.item) ? (selectedItems[i.item.id] || false) : false}\r\n                        onPressed={(isSelected) => {\r\n                            if (isSec(i.item)) {\r\n                                const selectedClone = { ...selectedItems };\r\n                                if (isSelected)\r\n                                    selectedClone[i.item.id] = true;\r\n                                else\r\n                                    delete selectedClone[i.item.id];\r\n\r\n\r\n                                props.onSelectedItemschanged(selectedClone)\r\n                                //setSelectedItems(selectedClone);\r\n                                return true\r\n                            }\r\n                            return false;\r\n                        }} />\r\n\r\n                }}\r\n                loadingItem={undefined} />\r\n        </View>\r\n    </View >\r\n}\r\n\r\n\r\nconst isSec = (item: SecOrEmpty): item is ISecurityList => {\r\n    return item !== empty;\r\n}\r\n\r\nconst SecurityCell = (props: { item: ISecurityList | {}, isSelected: boolean, onPressed: (isSelected: boolean) => boolean }) => {\r\n    const { item, onPressed, isSelected } = props;\r\n    const [innerSelected, setInnerSelected] = useState(isSelected)\r\n\r\n    return <Pressable\r\n        onPress={() => {\r\n            if (onPressed(!innerSelected)) {\r\n                setInnerSelected(!innerSelected);\r\n            }\r\n        }}\r\n        style={cellStyle}>\r\n        {isSec(item) ? <><View>\r\n            <Avatar shape='square' source={{ uri: item.logo_url }} size=\"large\" style={{ }} resizeMode={'contain'} />\r\n            {innerSelected && <View style={{ position: \"absolute\", width: \"40%\", aspectRatio: 1, zIndex: 50000, right: \"-10%\", bottom: \"-10%\" } as ViewStyle}>\r\n                <View style={{ backgroundColor: \"white\", position: \"absolute\", left: \"25%\", top: \"25%\", height: \"50%\", width: \"50%\" }} />\r\n                <Icon name=\"checkmark-circle-2\" fill=\"green\" style={{ height: \"100%\", width: \"100%\" }} />\r\n            </View>}\r\n        </View>\r\n            <Text>{item.symbol}</Text>\r\n        </> : null\r\n        }\r\n    </Pressable>\r\n}","/**\r\n * Learn more about Light and Dark modes:\r\n * https://docs.expo.io/guides/color-schemes/\r\n */\r\n\r\nimport { Text as DefaultText, View as DefaultView } from 'react-native';\r\n\r\nimport Colors from '../constants/Colors';\r\nimport useColorScheme from '../hooks/useColorScheme';\r\n\r\nexport function useThemeColor(\r\n  props: { light?: string; dark?: string },\r\n  colorName: keyof typeof Colors.light & keyof typeof Colors.dark\r\n) {\r\n  const theme = useColorScheme();\r\n  const colorFromProps = props[theme];\r\n\r\n  if (colorFromProps) {\r\n    return colorFromProps;\r\n  } else {\r\n    return Colors[theme][colorName];\r\n  }\r\n}\r\n\r\ntype ThemeProps = {\r\n  lightColor?: string;\r\n  darkColor?: string;\r\n};\r\n\r\nexport type TextProps = ThemeProps & DefaultText['props'];\r\nexport type ViewProps = ThemeProps & DefaultView['props'];\r\n\r\nexport function Text(props: TextProps) {\r\n  const { style, lightColor, darkColor, ...otherProps } = props;\r\n  const color = useThemeColor({ light: lightColor, dark: darkColor }, 'text');\r\n\r\n  return <DefaultText style={[{ color }, style]} {...otherProps} />;\r\n}\r\n\r\nexport function View(props: ViewProps) {\r\n  const { style, lightColor, darkColor, ...otherProps } = props;\r\n  const backgroundColor = useThemeColor({ light: lightColor, dark: darkColor }, 'background');\r\n\r\n  return <DefaultView style={[{ backgroundColor }, style]} {...otherProps} />;\r\n}\r\n","import { ColorSchemeName, useColorScheme as _useColorScheme } from 'react-native';\r\n\r\n// The useColorScheme value is always either light or dark, but the built-in\r\n// type suggests that it can be null. This will not happen in practice, so this\r\n// makes it a bit easier to work with.\r\nexport default function useColorScheme(): NonNullable<ColorSchemeName> {\r\n  return _useColorScheme() as NonNullable<ColorSchemeName>;\r\n}\r\n","import { Icon, Text } from \"@ui-kitten/components\";\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\"\r\nimport { AppColors } from \"../../constants/Colors\";\r\nimport { bannerText, flex, fonts, paddView, sizes, thinBannerText } from \"../../style\";\r\nimport Analytics from '../../assets/analytics.svg'\r\nimport { SvgExpo } from \"../../components/SvgExpo\";\r\nimport { useEffect, useRef } from \"react\";\r\nimport { Animated } from \"react-native\";\r\nimport { View } from \"../../components/Themed\";\r\nimport { ElevatedSection } from \"../../components/Section\";\r\nimport { useLinkTo } from \"@react-navigation/native\";\r\nimport { CreateAccountProps } from \"./shared\";\r\nimport { Api } from \"@tradingpost/common/api\"\r\nimport React from \"react\";\r\n\r\n\r\nexport const AnalystStartSection = (props: CreateAccountProps) => {\r\n\r\n    const opacityAnim = useRef(new Animated.Value(0)).current,\r\n        linkTo = useLinkTo<any>();\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n\r\n    return <ScrollWithButtons\r\n        fillHeight\r\n        buttons={{\r\n            right: {\r\n                text: \"I'm An Analyst\",\r\n                onPress: async () => {\r\n                    const defaultSettings = {\r\n                        analyst: true,\r\n                        push_notifications: {\r\n                            mentions: true,\r\n                            upvotes: true,\r\n                            watchlist_changes: true,\r\n                        },\r\n                        portfolio_display: {\r\n                            performance: true,\r\n                            holdings: true,\r\n                            trades: true\r\n                        }\r\n                    }\r\n                    await Api.User.update(props.user.data.id, {\r\n                        settings: defaultSettings\r\n                    })\r\n                    linkTo(\"/create/analystinterest\");\r\n                }\r\n            },\r\n            left: {\r\n                text: \"Not Now\",\r\n                onPress: async () => {\r\n                    const defaultSettings = {\r\n                        analyst: false,\r\n                        push_notifications: {\r\n                            mentions: true,\r\n                            upvotes: true,\r\n                            watchlist_changes: true,\r\n                        },\r\n                        portfolio_display: {\r\n                            performance: false,\r\n                            holdings: false,\r\n                            trades: false\r\n                        }\r\n                    }\r\n                    await Api.User.update(props.user.data.id, {\r\n                        settings: defaultSettings\r\n                    })\r\n                    linkTo(\"/create/profilepicture\");\r\n                }\r\n            }\r\n        }}\r\n    >\r\n        <View style={[paddView, { justifyContent: \"center\" }]}>\r\n            <ElevatedSection title=\"\">\r\n                <Animated.View style={[{ opacity: opacityAnim }]}>\r\n                    <Text style={[thinBannerText]}>Are you a Market Analyst?</Text>\r\n                    <View style={{ padding: sizes.rem1 }}>\r\n                        <SvgExpo style={{ width:\"100%\", aspectRatio:1.5}}>\r\n                            <Analytics />\r\n                        </SvgExpo>\r\n                    </View>\r\n                    <Text style={[thinBannerText, { fontSize: fonts.medium }]}>Select Analyst if you actively post fundamental or technical research related to stocks, commodities, crypto, etc. and would like to bolster your content.</Text>\r\n                </Animated.View>\r\n            </ElevatedSection>\r\n        </View>\r\n    </ScrollWithButtons>\r\n}","import React, { ReactComponentElement, ReactElement, useEffect, useState } from \"react\";\r\nimport { Text, Pressable, TextStyle, View, ListRenderItem } from \"react-native\";\r\n// import { LinearGradient, SvgFromXml } from \"react-native-svg\";\r\nimport { AppColors } from \"../constants/Colors\";\r\n//import { Colors, Fader, Text, View } from \"react-native-ui-lib\";\r\nimport { fonts, row, sizes, elevated as elevatedView } from \"../style\";\r\nimport { List, ListProps } from \"./List\";\r\nimport { NoDataPanel } from \"./NoDataPanel\";\r\nimport Theme from '../theme-light.json'\r\n//TODO: needs to be re-named... itsm misleading\r\ntype RowFunction<T, R> = (value: any, key: (keyof T) | undefined, item: T, index: number) => R\r\n\r\ntype EntireRowFunction<T, R> = (item: T, index: number) => R\r\n\r\n\r\ninterface TableColumnProps {\r\n    alias?: string,\r\n    width?: number | string,\r\n    align?: \"left\" | \"right\" | undefined\r\n}\r\n//This about if yo ucan infer this in the future\r\ntype FieldElement<T> = (props: {\r\n    item: T,\r\n    index: number\r\n    style?: (TextStyle | undefined)[]\r\n} & TableColumnProps) => ReactElement;\r\n\r\n\r\n\r\nexport type ITableColumn<T> = {\r\n    field?: (keyof T) | FieldElement<T>,\r\n    style?: TextStyle\r\n    headerStyle?: TextStyle\r\n    dynamicStyle?: RowFunction<T, TextStyle>,\r\n    stringify?: RowFunction<T, string>\r\n} & TableColumnProps\r\n\r\nfunction ensureString<T>(item?: (keyof T) | FieldElement<T>): item is (keyof T) | undefined {\r\n    return typeof item === \"string\" || !item;\r\n}\r\n\r\n// //helper to create strongly typed table column definitions\r\n// export class TableColumn<T, K extends keyof T> implements ITableColumn<T>{\r\n//     field: K;\r\n//     width?: number;\r\n//     style?: TextStyle;\r\n//     toString?: ((value: any, key: keyof T, item: T, index: number) => string);\r\n//     constructor(field: K, props: Omit<ITableColumn<T>, \"field\" | \"toString\"> & { toString: (value: T[K], key: K, item: T, index: number) => string }) {\r\n//         this.field = field\r\n//         this.style = props.style;\r\n//         this.width = props.width;\r\n//         this.toString = props.toString\r\n//     }\r\n\r\n// }\r\n\r\n// export function makeTableColumn<T>(field: keyof T, props: //Pick<ITableColumn<T>, \"width\" | \"style\"|\"toString\"> &\r\n//     { toString?(value: T[typeof field], key: typeof field, item: T, index: number): string }\r\n\r\n// ): ITableColumn<T> {\r\n//     return {\r\n//         field,\r\n//         //width: props.width,\r\n//         //style: props.style,\r\n//         toString: props.toString as ((value: any, key: keyof T, item: T, index: number) => string)\r\n//     }\r\n// }\r\n\r\nexport const stringyDate = (dts?: string) => {\r\n    const v = dts ? new Date(dts) : new Date();\r\n    return `${v?.getMonth() + 1}/${v?.getDate()}/${v?.getFullYear().toString().substring(2, 4)}`\r\n}\r\n\r\n\r\nexport type TableProps<T> = {\r\n    maxPage?: number,\r\n    listKey?: string,\r\n    columns: ITableColumn<T>[],\r\n    elevated?: boolean,\r\n    nestedScrollEnabled?: boolean,\r\n    rowPressed?: EntireRowFunction<T, void>,\r\n    hideHeader?: boolean,\r\n    renderAuxItem?: ListRenderItem<T> | null | undefined\r\n} & ListProps<T>\r\n\r\nexport function Table<T>(\r\n    props: TableProps<T>) {\r\n\r\n    const\r\n        { data, columns, nestedScrollEnabled, elevated, rowPressed } = props,\r\n        columnStyle: Partial<Record<number, (TextStyle | undefined)[]>> = {},\r\n        headerStyle: Partial<Record<number, (TextStyle | undefined)[]>> = {},\r\n        headerAlias: Partial<Record<number, string>> = {},\r\n        columnDynamicStyle: Partial<Record<number, RowFunction<T, TextStyle>>> = {},\r\n        columnsToString: Partial<Record<number, RowFunction<T, string>>> = {};\r\n\r\n    columns.forEach((c, i) => {\r\n        columnStyle[i] = [{\r\n            fontSize: fonts.xSmall,\r\n            lineHeight: fonts.medium,\r\n            width: c.width,\r\n            flex: c.width === undefined ? 1 : undefined,\r\n            textAlign: c.align || \"center\",\r\n            marginLeft: c.align === \"left\" ? 0 : undefined\r\n\r\n        }, c.style,];\r\n\r\n        headerStyle[i] = [{\r\n            fontSize: fonts.small,\r\n            width: c.width,\r\n            flex: c.width === undefined ? 1 : undefined,\r\n            textAlign: c.align || \"center\",\r\n            color: Theme[\"color-info-800\"],\r\n            //paddingBottom: 16\r\n        }, c.headerStyle]\r\n\r\n        if (c.alias)\r\n            headerAlias[i] = c.alias;\r\n\r\n        if (c.dynamicStyle)\r\n            columnDynamicStyle[i] = c.dynamicStyle;\r\n\r\n        if (c.stringify)\r\n            columnsToString[i] = c.stringify;\r\n\r\n    })\r\n\r\n    return <List\r\n        maxPage={props.maxPage}\r\n        maxDisaplyCount={props.maxDisaplyCount}\r\n        maxDisaplyText={props.maxDisaplyText}\r\n        keyExtractor={props.keyExtractor}\r\n        listKey={props.listKey}\r\n        ListHeaderComponent={props.hideHeader ? undefined : () => {\r\n            return <View key={\"table_header\"} style={{ alignItems: \"stretch\" }}>\r\n                <View style={[row, { backgroundColor: \"white\" }]}>\r\n                    {columns.map((c, i) => {\r\n                        return <Text key={`header_${i}`} numberOfLines={1} style={headerStyle[i]} >{headerAlias[i] || c.field?.toString()}</Text>\r\n                    })}\r\n                </View>\r\n                {/**Was just for testing... **/}\r\n                <View style={{ height: 16 }}>\r\n                    {/* <Fader size={16} position={Fader.position.TOP} /> */}\r\n                </View>\r\n            </View>\r\n        }}\r\n        nestedScrollEnabled={nestedScrollEnabled}\r\n        data={data}\r\n        datasetKey={props.datasetKey}\r\n        noDataMessage={props.noDataMessage}\r\n        loadingItem={null}\r\n        renderItem={(info) => {\r\n            //return <View><Text>{JSON.stringify(info.item)}</Text></View>\r\n            return info.item ?\r\n                <Pressable\r\n                    onPress={rowPressed ? () => {\r\n                        rowPressed(info.item, info.index)\r\n                    } : undefined}\r\n                    key={`row_${info.index}`}\r\n                    style={[props.elevated ? elevatedView : { paddingVertical: 8, marginHorizontal: 4, overflow: 'visible' }]}>\r\n                    <View style={row}>\r\n                        {\r\n                            props.columns.map((c, i) => {\r\n                                const key = `column_${i}`,\r\n                                    colStyle = columnStyle[i];\r\n\r\n                                if (ensureString(c.field)) {\r\n                                    const toString = columnsToString[i],\r\n                                        dynamicStyle = columnDynamicStyle[i],\r\n                                        evaluatedStyle = dynamicStyle ? [...[colStyle || []], dynamicStyle(c.field ? info.item[c.field] : undefined, c.field, info.item, info.index)] : colStyle,\r\n                                        evaluatedValue = toString ? toString(c.field ? info.item?.[c.field] : undefined, c.field, info.item, info.index) : (c.field ? info.item?.[c.field] : undefined)\r\n                                    return <Text key={key} numberOfLines={1} style={evaluatedStyle} >{evaluatedValue}</Text>\r\n                                }\r\n                                else {\r\n                                    const FieldElem = c.field;\r\n                                    return <FieldElem key={key} item={info.item} index={info.index} width={c.width} alias={c.alias} style={colStyle} />\r\n                                }\r\n                            })\r\n                        }\r\n                    </View>\r\n                    {props.renderAuxItem && props.renderAuxItem(info)}\r\n                </Pressable> :\r\n                <Text>Loading...</Text>\r\n        }} />\r\n}","import {flex, sizes} from \"../style\";\r\n\r\nimport React, {useEffect, useRef, useState} from \"react\";\r\nimport {Animated, Pressable, Text, Alert, Platform} from \"react-native\";\r\nimport {Icon} from \"@ui-kitten/components\";\r\n\r\nimport {Api} from \"@tradingpost/common/api\";\r\nimport {Section} from \"./Section\";\r\nimport {Table} from \"./Table\";\r\nimport {AddButton, EditButton} from \"./AddButton\";\r\nimport {openBrowserAsync} from 'expo-web-browser';\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport {useFocusEffect, useNavigation} from \"@react-navigation/native\";\r\nimport {DirectBrokeragesType} from \"@tradingpost/common/brokerage/interfaces\";\r\n\r\n//@ts-ignore\r\nconst alertPolyfill = (title, description, options, extra) => {\r\n    const result = window.confirm([title, description].filter(Boolean).join('\\n'))\r\n\r\n    if (result) {\r\n        //@ts-ignore\r\n        const confirmOption = options.find(({style}) => style !== 'cancel')\r\n        confirmOption && confirmOption.onPress()\r\n    } else {\r\n        //@ts-ignore\r\n        const cancelOption = options.find(({style}) => style === 'cancel')\r\n        cancelOption && cancelOption.onPress()\r\n    }\r\n}\r\n\r\nconst alert = Platform.OS === 'web' ? alertPolyfill : Alert.alert;\r\nexport const LinkBrokerageComponent = () => {\r\n    const nav = useNavigation();\r\n    const opacityAnim = useRef(new Animated.Value(0)).current;\r\n    const [accounts, setAccounts] = useState<Awaited<ReturnType<typeof Api.User.extensions.getBrokerageAccounts> | null>>()\r\n    const intervalRef = useRef<any>();\r\n    const [needsRefresh, setNeedsRefresh] = useState<{}>();\r\n    const [brokerLink, setLink] = useState(\"\");\r\n\r\n    const openLink = async () => {\r\n        await Api.User.extensions.generateBrokerageLink(undefined).then(({link}) => {\r\n            setLink(link)\r\n        })\r\n        const browserName = \"finicity_auth\";\r\n        await openBrowserAsync(brokerLink, {\"windowName\": browserName});\r\n        clearInterval(intervalRef.current);\r\n\r\n        intervalRef.current = setInterval(async () => {\r\n            console.log(\"WTF\");\r\n            if (await AsyncStorage.getItem(\"auth-finicity-code\")) {\r\n                console.log(\"CODE HAS BEEN FOUND\");\r\n                setAccounts(await Api.User.extensions.getBrokerageAccounts())\r\n            }\r\n        }, 5000)\r\n    }\r\n\r\n    const removeAccount = async (accountId: number, brokerage: DirectBrokeragesType) => {\r\n        await Api.Brokerage.extensions.scheduleForDeletion({brokerage, accountId});\r\n        if (!accounts) return\r\n        setAccounts(accounts.filter(a => a.id !== accountId));\r\n    }\r\n\r\n    //cleanup\r\n    useEffect(() => {\r\n        AsyncStorage.removeItem(\"auth-finicity-code\");\r\n        return () => {\r\n            clearInterval(intervalRef.current);\r\n            AsyncStorage.removeItem(\"auth-finicity-code\");\r\n        }\r\n    }, [])\r\n\r\n\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n    }, [needsRefresh])\r\n\r\n    useFocusEffect(\r\n        React.useCallback(() => {\r\n            setAccounts(null);\r\n            Api.User.extensions.getBrokerageAccounts().then((r) => {\r\n                setAccounts(r);\r\n            });\r\n        }, [])\r\n    );\r\n\r\n    return (\r\n        <Section style={flex} title=\"Link Brokerage Account\" button={(buttonProps) => accounts?.length ? <EditButton\r\n            onPress={() => {\r\n                nav.navigate(\"BrokeragePicker\")\r\n            }}\r\n            height={buttonProps.height}\r\n            width={buttonProps.width}\r\n        /> : <AddButton\r\n            onPress={() => nav.navigate(\"BrokeragePicker\")}\r\n            height={buttonProps.height}\r\n            width={buttonProps.width}\r\n        />}>\r\n            <Table datasetKey={accounts?.map(a => a.id).join(\",\") || \"none\"}\r\n                   columns={[\r\n                       {alias: \"Brokerage\", field: \"broker_name\"},\r\n                       {alias: \"Account #\", field: \"account_number\"},\r\n                       {alias: \" \", field: \"remove\", width: '10%', align: 'left'}\r\n                   ]}\r\n                   data={accounts?.map(acc => {\r\n                       return {\r\n                           ...acc,\r\n                           remove: <Pressable\r\n                               onPress={() => {\r\n                                   return alert(\r\n                                       `Removing ${acc.broker_name} Account?`,\r\n                                       `Are you sure you want to remove this brokerage account?`,\r\n                                       [\r\n                                           {\r\n                                               text: \"Yes\",\r\n                                               onPress: async () => {\r\n                                                   await removeAccount(acc.id, acc.broker_name as DirectBrokeragesType)\r\n                                               }\r\n                                           },\r\n                                           {\r\n                                               text: \"No\"\r\n                                           }\r\n                                       ]\r\n                                   )\r\n\r\n                               }}>\r\n                               <Icon\r\n                                   fill={\"#E74C3C\"}\r\n                                   name={\"trash-outline\"}\r\n                                   style={{\r\n                                       height: sizes.rem1,\r\n                                       width: sizes.rem1,\r\n                                   }}\r\n                               />\r\n                           </Pressable>\r\n                       }\r\n                   })}\r\n                   noDataMessage=\"You have no linked accounts\"\r\n            />\r\n        </Section>)\r\n}","import React, { useState } from 'react';\r\nimport { Pressable, View } from 'react-native';\r\nimport { Button, Layout, Tooltip, Text } from '@ui-kitten/components';\r\nimport { InfoIcon } from '../images';\r\n\r\nexport const TooltipComponent = (props: {text: string}) => {\r\n\r\n  const [visible, setVisible] = useState(false);\r\n\r\n  const renderToggleButton = () => {\r\n    return (\r\n        <Button \r\n            appearance='ghost'\r\n            accessoryLeft={<InfoIcon height={24} width={24}  style={{ marginHorizontal: 0 }} />}\r\n            style={{paddingHorizontal: 0, paddingVertical: 0, minHeight: 0, minWidth: 0}}\r\n            onPress={() => setVisible(true)}>\r\n            {''}\r\n        </Button>\r\n\r\n  ) as React.ReactElement};\r\n  return (\r\n    <View style={{justifyContent: 'center',\r\n                    alignItems: 'flex-start',\r\n                    flex: 1\r\n                    }}>\r\n        <Tooltip\r\n            anchor={renderToggleButton}\r\n            style={{ translateY: 37,  translateX: -15, width: '70%', height: '130%'}}\r\n            backdropStyle={{backgroundColor: 'rgba(0, 0, 0, 0.5)'}}\r\n            placement={'right'}\r\n            visible={visible}\r\n            onBackdropPress={() => setVisible(false)}\r\n            >\r\n            <Text>{props.text}</Text>\r\n        </Tooltip>\r\n    </View>\r\n  );\r\n};","import React, { ReactElement } from \"react\";\r\nimport { Toggle } from \"@ui-kitten/components\";\r\nimport { Icon, Text } from \"@ui-kitten/components\";\r\nimport { View, Animated } from \"react-native\"\r\nimport { TooltipComponent } from \"./ToolTip\";\r\nimport { sizes } from \"../style\";\r\n\r\n\r\nexport function SwitchField(props: any) {\r\n    return <View style={props.viewStyle}>\r\n        <Toggle\r\n            style={props.toggleStyle}\r\n            checked={props.checked}\r\n            onChange={props.onChange} />\r\n        <View style={[props.toolTipText ? {display: 'flex'} : {display: 'none'}, {justifyContent: 'center', flex: 1}]}>\r\n            <TooltipComponent text={props.toolTipText}/>\r\n        </View>\r\n        <Text style={props.textStyle}>\r\n            {props.label}\r\n        </Text>\r\n    </View> \r\n    \r\n\r\n}\r\n\r\n","import { NavigationProp } from \"@react-navigation/native\";\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { ISubscriberList, IUserGet } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport { Text, Tab, TabView, Avatar } from \"@ui-kitten/components\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { View } from \"react-native\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { useAppUser } from \"../Authentication\";\r\nimport { DeleteButton, EditButton, SettingsButton } from \"../components/AddButton\";\r\nimport { Picker } from \"../components/Picker\";\r\nimport { PrimaryButton } from \"../components/PrimaryButton\";\r\nimport { ProfileButton } from \"../components/ProfileButton\";\r\nimport { SecondaryButton } from \"../components/SecondaryButton\";\r\nimport { ElevatedSection } from \"../components/Section\";\r\nimport { SwitchField } from \"../components/SwitchField\";\r\nimport { Table } from \"../components/Table\";\r\nimport { RootStackScreenProps } from \"../navigation/pages\";\r\nimport { paddView, sizes } from \"../style\";\r\nimport { useReadonlyEntity } from \"../utils/hooks\";\r\nimport { AwaitedReturn } from \"../utils/misc\";\r\n\r\nexport const SubscriptionScreen = (props: RootStackScreenProps<\"Subscription\">) => {\r\n    const [index, setIndex] = useState(0);\r\n    //const [] = useState<  >()\r\n    //  useEffect(()=>{},[])\r\n    const mySubscriptionsCall = Api.Subscriber.extensions.getBySubscriber,\r\n        mySubscribersCall = Api.Subscriber.extensions.getByOwner,\r\n        [subscriptions, setSubscriptions] = useState<AwaitedReturn<typeof mySubscriptionsCall>>(),\r\n        [subscribers, setSubscribers] = useState<AwaitedReturn<typeof mySubscribersCall>>(),\r\n        [buttonClick, setButtonClick] = useState(false);\r\n    const { loginState } = useAppUser();\r\n    const appUser = loginState?.appUser;\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                const subtionTask = mySubscriptionsCall();\r\n                const suberTask = mySubscribersCall();\r\n                const [subscriptions, subscribers] = await Promise.all([subtionTask, suberTask])\r\n                setSubscriptions(subscriptions);\r\n                setSubscribers(subscribers);\r\n            }\r\n            catch (ex) {\r\n                console.error(ex);\r\n            }\r\n        })()\r\n\r\n    }, [])\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                const subtionTask = mySubscriptionsCall();\r\n                const suberTask = mySubscribersCall();\r\n                const [subscriptions, subscribers] = await Promise.all([subtionTask, suberTask])\r\n                setSubscriptions(subscriptions);\r\n                setSubscribers(subscribers);\r\n            }\r\n            catch (ex) {\r\n                console.error(ex);\r\n            }\r\n        })()\r\n\r\n    }, [buttonClick])\r\n\r\n    return <View style={paddView}><ElevatedSection title=\"Manage Subscriptions\"\r\n        button={(p) => <SettingsButton onPress={() => {\r\n            if (appUser?.settings?.analyst) {\r\n                props.navigation.navigate(\"SubscriptionSettings\");\r\n            }\r\n        }} {...p} />}\r\n    ><TabView\r\n        indicatorStyle={{\r\n            marginTop: 26\r\n        }} style={{ marginVertical: sizes.rem0_5 }} selectedIndex={index} onSelect={appUser?.settings?.analyst ? setIndex : undefined}>\r\n            <Tab title=\"Subscriptions\">\r\n                <Table\r\n                    rowPressed={(r) => {\r\n                        props.navigation.navigate(\"Profile\", {\r\n                            userId: r.subscription?.[0].user_id\r\n                        })\r\n                    }}\r\n                    data={subscriptions}\r\n                    columns={\r\n                        [\r\n                            {\r\n                                headerStyle: {\r\n                                    height: 20,\r\n                                    width: 20,\r\n                                    flex: 0,\r\n                                    flexBasis: 22\r\n                                },\r\n                                alias: \" \",\r\n                                field: (item) => {\r\n                                    const user = item.item.subscription[0].user[0];\r\n                                    return <ProfileButton userId={user.id} size={20} profileUrl={user.profile_url || \"\"} />\r\n                                }\r\n                            },\r\n                            {\r\n                                alias: \"Analyst\",\r\n                                align: \"left\",\r\n                                field: \"subscription\",\r\n                                style: {\r\n                                    paddingLeft: 4\r\n                                },\r\n                                stringify: (k: ISubscriberList[\"subscription\"]) => {\r\n                                    return '@' + k[0].user[0].handle\r\n                                }\r\n                            },\r\n                            {\r\n                                alias: \"Cost\",\r\n                                align: \"left\",\r\n                                field: \"subscription\",\r\n                                headerStyle: {\r\n                                    textAlign: 'center'\r\n                                },\r\n                                style: {\r\n                                    textAlign: 'center',\r\n                                    //paddingLeft: 6\r\n                                },\r\n                                stringify: (k: ISubscriberList[\"subscription\"]) => {\r\n                                    return String(String(k[0].cost) === '$0.00' ? 'Free' : k[0].cost)\r\n                                }\r\n                            },\r\n                            {\r\n                                alias: \"Since\",\r\n                                field: \"start_date\",\r\n                                stringify: (k: ISubscriberList[\"start_date\"]) => {\r\n                                    return new Date(k).toLocaleDateString();\r\n                                }\r\n                            }\r\n                        ]\r\n                    }\r\n                />\r\n            </Tab>\r\n            <Tab title=\"Subscribers\">\r\n                <Table\r\n                    rowPressed={(r) => {\r\n                        props.navigation.navigate(\"Profile\", {\r\n                            userId: r.subscription?.[0].user_id\r\n                        })\r\n                    }}\r\n                    data={subscribers}\r\n                    columns={\r\n                        [\r\n                            {\r\n                                headerStyle: {\r\n                                    height: 20,\r\n                                    width: 20,\r\n                                    flex: 0,\r\n                                    flexBasis: 22\r\n                                },\r\n                                alias: \" \",\r\n                                field: (item) => {\r\n                                    const user = item.item.user[0];\r\n                                    return <ProfileButton userId={user.id} size={20} profileUrl={user.profile_url || \"\"} />\r\n                                }\r\n                            },\r\n                            {\r\n                                alias: \"Subscriber\",\r\n                                align: \"left\",\r\n                                field: \"user\",\r\n                                style: {\r\n                                    paddingLeft: 4\r\n                                },\r\n                                stringify: (k: ISubscriberList[\"user\"]) => {\r\n                                    return '@' + k[0].handle\r\n                                }\r\n                            },\r\n                            {\r\n                                alias: \"Status\",\r\n                                field: (item) => {\r\n                                    if (item.item.approved) {\r\n                                        return <Text>Approved</Text>;\r\n                                    }\r\n                                    else {\r\n                                        return <SecondaryButton\r\n                                            children={'Approve'}\r\n                                            style={{\r\n                                                backgroundColor: \"#35A265\", borderColor: \"#35A265\",\r\n                                                minHeight: 26,\r\n                                                height: 26,\r\n                                                minWidth: 70,\r\n                                                width: 70\r\n                                            }}\r\n                                            onPress={async () => {\r\n                                                item.item.approved = true;\r\n                                                await Api.Subscriber.update(item.item.id, {\r\n                                                    approved: true\r\n                                                })\r\n                                                setButtonClick(!buttonClick);\r\n                                            }}\r\n                                        />\r\n                                    }\r\n                                },\r\n                                style: { color: '#35A265' }\r\n                                /*\r\n                                stringify: (k: ISubscriberList[\"approved\"]) => {\r\n                                    if (k) {\r\n                                        return 'Approved'\r\n                                    }\r\n                                    else {\r\n\r\n                                        return ''\r\n                                    }\r\n                                }\r\n                                */\r\n                            },\r\n                            {\r\n                                alias: \"Since\",\r\n                                field: \"start_date\",\r\n                                stringify: (k: ISubscriberList[\"start_date\"]) => {\r\n                                    return new Date(k).toLocaleDateString();\r\n                                }\r\n                            },\r\n                            {\r\n                                headerStyle: {\r\n                                    flexGrow: 0,\r\n                                    flexShrink: 0,\r\n                                    flexBasis: '9%'\r\n\r\n                                },\r\n                                alias: ' ',\r\n                                field: (item) => {\r\n                                    return <DeleteButton\r\n                                        onPress={async () => {\r\n                                            await Api.Subscriber.extensions.removeSubscription({\r\n                                                userId: item.item.user_id,\r\n                                                subscriptionId: item.item.subscription_id\r\n                                            })\r\n                                            setButtonClick(!buttonClick);\r\n                                        }}\r\n                                        width={26}\r\n                                        //height={'auto'}\r\n                                        color={'#EC5328'}\r\n                                    />\r\n                                },\r\n                                style: { marginLeft: -10 }\r\n                            }\r\n                        ]\r\n                    }\r\n                />\r\n\r\n            </Tab>\r\n        </TabView>\r\n    </ElevatedSection>\r\n    </View>\r\n}\r\n\r\nexport const SubscriptionSettingsScreen = (props: RootStackScreenProps<\"SubscriptionSettings\">) => {\r\n\r\n\r\n    return <View style={paddView}>\r\n        <SubscriptionSettingsView navigation={props.navigation} />\r\n    </View>\r\n}\r\n\r\nexport const SubscriptionSettingsView = (props: { navigation?: NavigationProp<any>, submitRef?: React.MutableRefObject<{ submit: () => Promise<void> }> }) => {\r\n\r\n    const call = Api.Subscription.extensions.getByUserId;\r\n    const subscription = useReadonlyEntity<AwaitedReturn<typeof call>>(null)\r\n    const toast = useToast();\r\n    //const [approveSubs, setApproveSubs] = useState(subscription.data?.settings.approve_new === undefined ? false : subscription.data?.settings.approve_new);\r\n\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                subscription.resetData(await call());\r\n            }\r\n            catch (ex: any) {\r\n                toast.show(ex.message)\r\n            }\r\n        })()\r\n    }, [])\r\n\r\n    const submit = async () => {\r\n        if (subscription.data?.id) {\r\n            await Api.Subscription.update(subscription.data.id, {\r\n                cost: subscription?.data?.cost || 0,\r\n                settings: subscription.data.settings\r\n            })\r\n        }\r\n        else {\r\n            await Api.Subscription.insert({\r\n                name: \"Basic Subscription\",\r\n                cost: subscription?.data?.cost || 0,\r\n                settings: subscription?.data?.settings || false,\r\n                user_id: ''\r\n            })\r\n        }\r\n        props.navigation?.goBack();\r\n    };\r\n    if (props.submitRef)\r\n        props.submitRef.current.submit = submit;\r\n\r\n    return <ElevatedSection title=\"Primary Subscription\">\r\n        <Text style={{ marginVertical: sizes.rem1 }}>\r\n            Set a cost associated with subscribing to your account.\r\n        </Text>\r\n        <Picker\r\n            style={{ marginBottom: sizes.rem1 }}\r\n            value={subscription?.data?.cost || 0}\r\n            onSelect={(item) => {\r\n                subscription.update({\r\n                    cost: item.row ? Math.pow(5, item.row) : 0\r\n                })\r\n            }}\r\n            items={[...Array.from({ length: 1 }).map((v, i) => {\r\n                const cost = i ? Math.pow(5, i) : 0;\r\n                return {\r\n                    label: cost ? `${cost}/month` : \"Free\",\r\n                    value: cost\r\n                }\r\n            })]}\r\n        />\r\n        <SwitchField label='Approve New Subscribers?'\r\n            checked={subscription.data?.settings.approve_new}\r\n            onChange={() => { subscription.update({ settings: { approve_new: !subscription.data?.settings.approve_new } }) }}\r\n            viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', padding: 4, paddingVertical: 30 }}\r\n            toggleStyle={{}}\r\n            textStyle={{ fontSize: 16, fontWeight: '500', alignSelf: 'center' }} />\r\n        {/* Codes will go here   */}\r\n        {!props.submitRef?.current && <PrimaryButton disabled={!subscription.hasChanged} onPress={submit} >Apply</PrimaryButton>}\r\n    </ElevatedSection>\r\n}","import React from \"react\"\r\nimport { View, Text } from \"react-native\"\r\nimport { HtmlViewProps } from \"./HtmlView.interface\"\r\n\r\nexport const HtmlView = (props: HtmlViewProps) => {\r\n    return <View style={props.style}><iframe\r\n        //marginwidth=\"0\"\r\n        //marginheight=\"0\"\r\n        //hspace=\"0\"\r\n        //vspace=\"0\"\r\n        //frameborder=\"0\"\r\n        name=\"_MYFIRAME\" scrolling=\"no\"\r\n        src={props.isUrl ? props.children : undefined}\r\n        srcDoc={!props.isUrl ? props.children : undefined}\r\n        style={{ position: \"absolute\", top: 0, bottom: 0, height: \"100%\", width: \"100%\", borderWidth: 0 }} />\r\n    </View>\r\n}","import React, { useLayoutEffect, useState } from 'react';\r\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\r\nimport { Tab, TabView } from '@ui-kitten/components';\r\nimport { useReadonlyEntity } from '../utils/hooks'\r\nimport { AccountInfoSection } from './create_account/AccountInfoSection';\r\nimport { InvestmentInterestSection } from './create_account/InvestmentInterestSection';\r\nimport { YourContent } from './create_account/YourContentSection';\r\nimport { useData } from '../lds';\r\nimport { IUserGet } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport { useToast, } from 'react-native-toast-notifications'\r\nimport { BasicInfoSection } from './create_account/BasicInfoSection';\r\nimport { ProfileIconSection } from './create_account/ProfileIconSection';\r\nimport { PickWatchlistSection } from './create_account/PickWatchlistSection';\r\nimport { useAppUser } from '../Authentication';\r\nimport { AnalystStartSection } from './create_account/AnalystStartSection';\r\nimport { LinkBrokerageSection } from './create_account/LinkBrokerageSection';\r\nimport { AppColors } from '../constants/Colors';\r\nimport { SubscriptionCostSection } from './create_account/SubscrpitionCostSection';\r\nimport { Log } from '../utils/logger';\r\nimport { PrivacyScreen } from './create_account/PrivacyScreen';\r\nimport { TermsScreen } from './create_account/TermsScreen';\r\n\r\nexport const screens = {\r\n    'LoginInfo': AccountInfoSection,\r\n    'BasicInfo': BasicInfoSection,\r\n    'Watchlist': PickWatchlistSection,\r\n    'AnalystStart': AnalystStartSection,\r\n    'AnalystInterest': InvestmentInterestSection,\r\n    'LinkBrokerage': LinkBrokerageSection,\r\n    'AddClaims': YourContent,\r\n    'SubscriptionCost': SubscriptionCostSection,\r\n    'ProfilePicture': ProfileIconSection,\r\n    'Terms': TermsScreen,\r\n    'Privacy':PrivacyScreen\r\n}\r\n\r\n\r\nconst screenKeys = Object.keys(screens);\r\n\r\n\r\n\r\nexport default (props: any) => {\r\n    /**\r\n     * State & hooks\r\n     */\r\n    const { loginState } = useAppUser(\"CREATE_ACCOUNT_SCREEN\"),\r\n        appUser = loginState?.appUser, userState = loginState?.setupStatus,\r\n        user = useReadonlyEntity<IUserGet>(appUser || {\r\n            profile_url: \"\",\r\n            first_name: \"\",\r\n            last_name: \"\",\r\n            handle: \"\",\r\n            email: \"\",\r\n            bio: \"\",\r\n            claims: [],\r\n            display_name: \"\",\r\n            id: \"\",\r\n            tags: [],\r\n            subscription: null as any,\r\n        }),\r\n        toast = useToast()\r\n\r\n    /** Updates user data is the current user changes **/\r\n    useLayoutEffect(() => {\r\n        if (appUser)\r\n            user.resetData(appUser);\r\n    }, [appUser]);\r\n\r\n    /**\r\n     * Sub Screen resolution based on parameters \r\n     */\r\n    let subScreen: keyof typeof screens;\r\n\r\n\r\n    if (props?.route?.params?.params?.screen)\r\n        subScreen = props?.route?.params?.params?.screen\r\n\r\n    else if (userState?.needsSettings)\r\n        subScreen = \"AnalystStart\"\r\n    else if (userState?.needsAnalystSettings)\r\n        subScreen = \"AnalystInterest\"\r\n    else if (loginState?.loginResult)\r\n        subScreen = \"BasicInfo\"\r\n    else subScreen = \"LoginInfo\"\r\n\r\n    let resolvedIndex = screenKeys.findIndex((k) => k === subScreen);\r\n    if (resolvedIndex < 0) {\r\n        resolvedIndex = 0;\r\n        Log.error(new Error(`Invalid create subscreen key :'${subScreen}'. Defaulting to index 0`));\r\n    }\r\n\r\n\r\n\r\n\r\n    const caProps = {\r\n        user,\r\n        toastMessage: (msg: string, delay: number | undefined) => {\r\n            toast.show(msg, {\r\n                duration: delay,\r\n                placement: \"top\"\r\n            });\r\n        }\r\n    }\r\n\r\n    const insets = useSafeAreaInsets();\r\n\r\n    return <TabView\r\n        style={{\r\n            paddingTop: insets.top / 2,\r\n            backgroundColor: AppColors.background,\r\n            flexGrow: 1,\r\n            maxHeight: \"100%\",\r\n        }}\r\n        swipeEnabled={false}\r\n        selectedIndex={resolvedIndex}\r\n        indicatorStyle={{\r\n            height: 0\r\n        }}\r\n        tabBarStyle={{\r\n            height: 0,\r\n            padding: 0,\r\n            paddingBottom: 0,\r\n            paddingTop: 0\r\n        }}\r\n        shouldLoadComponent={(index) => index === resolvedIndex}\r\n    >\r\n        {screenKeys.map((v, i) => {\r\n            const Screen = screens[screenKeys[i] as keyof typeof screens];\r\n            return <Tab key={\"TAB_\" + i}>\r\n                <Screen {...caProps} />\r\n            </Tab>\r\n        })}\r\n    </TabView>\r\n\r\n\r\n}\r\n\r\n","import React, { useState, useRef, useEffect, RefObject, useMemo } from \"react\";\r\nimport { Alert, TouchableOpacity, Image, ImageStyle, ViewStyle, View, Animated } from \"react-native\";\r\n//import { Navigation } from \"react-native-navigation\";\r\n//import { Nav } from '@react-navigation/native'\r\nimport { CheckBox, Input, Text, } from \"@ui-kitten/components\";\r\n//import { signOut, getStoredCreds, CreateAuth0User, UpdateUserProfile, signInStoredCreds } from \"../../apis/Authentication\";\r\nimport { ButtonField } from \"../../components/ButtonField\";\r\nimport { IconifyIcon } from \"../../components/IconfiyIcon\";\r\nimport { Section } from \"../../components/Section\";\r\nimport { TextField, ITextField } from \"../../components/TextField\";\r\nimport { bannerText, flex, sizes, textInputWiz } from \"../../style\";\r\nimport { bindTextInput, IEntity, useReadonlyEntity } from \"../../utils/hooks\";\r\nimport { isRequired, isValidEmail, isAlphaNumeric } from \"../../utils/validators\";\r\nimport { CreateAccountProps, sideMargin } from \"./shared\";\r\n\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\";\r\nimport { useData } from \"../../lds\";\r\nimport { Label } from \"../../components/Label\";\r\nimport { TBI } from \"../../utils/misc\";\r\nimport { AppColors } from \"../../constants/Colors\";\r\nimport Auth from '@tradingpost/common/api/entities/static/AuthApi'\r\nimport UserApi from '@tradingpost/common/api/entities/apis/UserApi'\r\nimport { IUserGet } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport { useAppUser } from \"../../Authentication\";\r\nimport { useLinkTo, useNavigation } from \"@react-navigation/native\";\r\nimport { registerDeviceForNotifications } from \"../../utils/notifications\";\r\nimport { Link } from \"../../components/Link\";\r\n\r\n\r\ntype FieldRefs = {\r\n    first: RefObject<ITextField>,\r\n    last: RefObject<ITextField>,\r\n    username: RefObject<ITextField>\r\n}\r\n\r\nexport function BasicInfoSection(props: CreateAccountProps) {\r\n    const\r\n        nav = useNavigation(),\r\n        [lockButtons, setLockButtons] = useState(false),\r\n        opacityAnim = useRef(new Animated.Value(0)).current,\r\n        { signIn, loginState } = useAppUser(),\r\n        appUser = loginState?.appUser,\r\n        [agreeToTerms, setAgreeToTerms] = useState(false),\r\n        [agreeToPrivacy, setAgrreeToPrivacy] = useState(false),\r\n        refs: FieldRefs = {\r\n            first: useRef<ITextField>(null),\r\n            last: useRef<ITextField>(null),\r\n            username: useRef<ITextField>(null),\r\n        },\r\n        linkTo = useLinkTo<any>(),\r\n        { value: firstTime, setValue: setFirstTime } = useData('firstTime'),\r\n        buttonConfig = {\r\n            locked: lockButtons,\r\n            left: {\r\n                text: \"Sign Out\",\r\n                onPress: async () => {\r\n                    Auth.signOut();\r\n                    nav.goBack();\r\n                }\r\n            }\r\n            // : (props.saveOnly ? undefined : {\r\n            //     text: \"Cancel\",\r\n            //     onPress: () => props.navigation.goBack()//Navigation.pop(props.componentId)\r\n            // })\r\n            ,\r\n            right: {\r\n                text: \"Next\",\r\n                onPress: async () => {\r\n                    setLockButtons(true);\r\n                    const errors: string[] = [];\r\n                    try {\r\n                        for (const k in refs) {\r\n                            const val = refs[k as keyof typeof refs];\r\n                            if (val.current && !val.current.validate()) {\r\n                                errors.push(val.current.errorMessage || \"\");\r\n                            }\r\n                        }\r\n                        if (errors.length) {\r\n\r\n                            errors.unshift(\"Please fix the following issues:\");\r\n                            props.toastMessage(errors.join(\"\\r\\n\"));\r\n\r\n                            setLockButtons(false);\r\n                        } else {\r\n                            setFirstTime(true);\r\n                            const { token } = await Auth.createUser(props.user.data.first_name, props.user.data.last_name, props.user.data.handle);\r\n                            await signIn(\"\", token);\r\n                            await registerDeviceForNotifications();\r\n                            linkTo('/create/watchlist')\r\n                            //props.next();                            \r\n                            //props.navigation.navigate(\"Root\");\r\n                            //setLockButtons(false);\r\n                        }\r\n\r\n                    } catch (ex: any) {\r\n                        if (ex.json) {\r\n                            props.toastMessage(`${ex.json.name}:\\r\\n${ex.json.policy || ex.json.description}`);\r\n                        } else if (typeof ex.message === \"string\") {\r\n                            props.toastMessage(ex.message);\r\n                        } else props.toastMessage(JSON.stringify(ex.message));\r\n                        setLockButtons(false);\r\n                    }\r\n\r\n                }\r\n            }\r\n        }\r\n\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n\r\n\r\n    return <ScrollWithButtons\r\n        buttons={buttonConfig}>\r\n        <View>\r\n            <View style={[flex, { margin: sideMargin }]}>\r\n                <Animated.Text\r\n                    style={[bannerText, { opacity: opacityAnim }]}>\r\n                    Let's keep setting up your account\r\n                </Animated.Text>\r\n                <TextField\r\n                    style={textInputWiz}\r\n                    textInputRef={refs.first}\r\n                    errorMessage={\"`First Name` is required\"}\r\n                    validate={isRequired}\r\n                    validateOnChange placeholder='First Name'\r\n                    returnKeyType=\"none\" {...bindTextInput(props.user, \"first_name\", null)}\r\n                />\r\n                <TextField\r\n                    style={textInputWiz}\r\n                    textInputRef={refs.last}\r\n                    errorMessage={\"`Last Name` is required\"}\r\n                    validate={isRequired}\r\n                    validateOnChange placeholder='Last Name'\r\n                    returnKeyType=\"none\" {...bindTextInput(props.user, \"last_name\", null)}\r\n                />\r\n                <TextField\r\n                    style={textInputWiz}\r\n                    textInputRef={refs.username}\r\n                    errorMessage={\"`Username` is required\"}\r\n                    validate={isRequired}\r\n                    validateOnChange placeholder='Username'\r\n                    returnKeyType=\"none\" {...bindTextInput(props.user, \"handle\", null)}\r\n                />\r\n            </View>\r\n        </View>\r\n    </ScrollWithButtons>\r\n}\r\n","import React, { useRef, useEffect, RefObject, useState } from \"react\";\r\nimport { View, Animated, Pressable } from \"react-native\";\r\n//import { Navigation } from \"react-native-navigation\";\r\n//import { Nav } from '@react-navigation/native'\r\nimport { Avatar, Icon, Input, Text, } from \"@ui-kitten/components\";\r\n//import { signOut, getStoredCreds, CreateAuth0User, UpdateUserProfile, signInStoredCreds } from \"../../apis/Authentication\";\r\nimport { TextField, ITextField } from \"../../components/TextField\";\r\nimport { bannerText, flex, noMargin, paddView, sizes, textInputWiz, thinBannerText } from \"../../style\";\r\nimport { CreateAccountProps, sideMargin } from \"./shared\";\r\n\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\";\r\n\r\nimport WatchlistApi from '@tradingpost/common/api/entities/apis/WatchlistApi'\r\nimport { SvgExpo } from \"../../components/SvgExpo\";\r\nimport AnalyzeImage from '../../assets/analyze2.svg'\r\nimport { useWatchlistPicker, WatchlistPicker } from \"../../components/WatchlistPicker\";\r\nimport { ElevatedSection } from \"../../components/Section\";\r\nimport { useLinkTo, useNavigation } from \"@react-navigation/native\";\r\nimport { RootStackScreenProps } from \"../../navigation/pages\";\r\n\r\ntype FieldRefs = {\r\n    first: RefObject<ITextField>,\r\n    last: RefObject<ITextField>,\r\n    username: RefObject<ITextField>\r\n}\r\n\r\n\r\nexport function PickWatchlistSection(props: CreateAccountProps) {\r\n    const nav = useNavigation<RootStackScreenProps<\"Create\">[\"navigation\"]>();\r\n    const\r\n        [lockButtons, setLockButtons] = useState(false),\r\n        opacityAnim = useRef(new Animated.Value(0)).current,\r\n        { selectionConverter: converterRef, selectedItems, onSelectedItemschanged: setSelectedItems, symbolConverter } = useWatchlistPicker(),\r\n        linkTo = useLinkTo<any>(),\r\n        buttonConfig = {\r\n            locked: lockButtons,\r\n            left: {\r\n                text: \"Not Now\",\r\n                onPress: () => {\r\n                    linkTo('/create/analyststart');\r\n\r\n                }\r\n            },\r\n            right: {\r\n                text: \"Apply\",\r\n                onPress: async () => {\r\n                    if (!Object.keys(selectedItems).length) {\r\n                        props.toastMessage(\"Please select at least one security of interest\");\r\n                    }\r\n                    else {\r\n                        setLockButtons(true);\r\n                        try {\r\n                            await WatchlistApi.insert({\r\n                                items: (converterRef.current ? converterRef.current(selectedItems) : []).map((s) => ({\r\n                                    symbol: s.symbol\r\n                                })),\r\n                                name: \"Primary Watchlist\",\r\n                                type: \"primary\" //primary | private | public \r\n                            })\r\n                            linkTo('/create/analyststart');\r\n                        }\r\n                        catch (ex: any) {\r\n                            props.toastMessage(ex.message);\r\n                            setLockButtons(false);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 1500,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n\r\n\r\n    return <ScrollWithButtons\r\n        fillHeight\r\n        buttons={buttonConfig}\r\n\r\n    >\r\n        <View style={paddView}>\r\n            <ElevatedSection title=\"\" style={[flex, noMargin]}>\r\n                <Animated.View style={{ opacity: opacityAnim }}>\r\n                    <Pressable onPress={() => {\r\n                        nav.navigate(\"OverlayModal\");\r\n                    }}><Text\r\n                        style={[thinBannerText, { marginVertical: sizes.rem0_5 }]}>\r\n                            Help us get to know you.\r\n                        </Text>\r\n                    </Pressable>\r\n                    <SvgExpo style={{ width: \"100%\", aspectRatio: 1.5 }}>\r\n                        <AnalyzeImage />\r\n                    </SvgExpo>\r\n                    <Text\r\n                        style={[bannerText, { marginHorizontal: 0, marginVertical: sizes.rem0_5 }]}>\r\n                        Pick a few companies to help us tailor to your interests\r\n                    </Text>\r\n                </Animated.View>\r\n\r\n                <WatchlistPicker\r\n                    selectionConverter={converterRef}\r\n                    selectedItems={selectedItems}\r\n                    symbolConverter={symbolConverter}\r\n                    onSelectedItemschanged={(_selectedItems) => {\r\n                        setSelectedItems(_selectedItems)\r\n                        //TODO:::: need to put this logic back in \r\n                        // if (selectedItemCount === 5 && isSelected) {\r\n                        //     props.toastMessage(\"You can only select up to 5 companies\");\r\n                        //     return false;\r\n                        // }\r\n                        // else \r\n                        // return false;\r\n                    }}\r\n                />\r\n            </ElevatedSection>\r\n        </View>\r\n    </ScrollWithButtons>\r\n}\r\n\r\n","import { Icon, Text } from \"@ui-kitten/components\";\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\"\r\nimport { AppColors } from \"../../constants/Colors\";\r\nimport { bannerText, flex, paddView, paddViewWhite, sizes, thinBannerText } from \"../../style\";\r\nimport { CreateAccountProps } from \"./shared\"\r\nimport { Bank } from '../../images'\r\nimport { SvgExpo } from \"../../components/SvgExpo\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { Animated, Pressable } from \"react-native\";\r\nimport { View } from \"../../components/Themed\";\r\nimport { ElevatedSection, Section } from \"../../components/Section\";\r\nimport { useLinkTo } from \"@react-navigation/native\";\r\nimport { LinkBrokerageComponent } from '../../components/LinkBrokerageComponent';\r\n\r\nexport const LinkBrokerageSection = (props: CreateAccountProps) => {\r\n\r\n    const opacityAnim = useRef(new Animated.Value(0)).current;\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n\r\n    const linkTo = useLinkTo<any>()\r\n    return <ScrollWithButtons\r\n        fillHeight\r\n        buttons={{\r\n            right: {\r\n                text: \"I'm Done Linking Accounts\",\r\n                onPress: () => {\r\n                    linkTo('/create/addclaims')\r\n                }\r\n            }\r\n        }}\r\n    >\r\n        <Animated.View style={[paddView, { opacity: opacityAnim }]}>\r\n            <ElevatedSection title={\"\"} style={flex}>\r\n                <Text style={[thinBannerText]}>Link Your Brokerage Accounts.</Text>\r\n                <View style={[{ padding: sizes.rem1 }, flex]}>\r\n                    <Bank />\r\n                </View>\r\n                <Text style={{ marginVertical: sizes.rem1 }}>TradingPost links directly with your bank accounts to ....</Text>\r\n                <View style={flex}> \r\n                    <LinkBrokerageComponent />\r\n                </View>\r\n                \r\n            </ElevatedSection>\r\n        </Animated.View>\r\n    </ScrollWithButtons >\r\n}","import { useLinkTo } from \"@react-navigation/native\";\r\nimport React from \"react\";\r\nimport { View } from \"react-native\";\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\";\r\nimport { YourContentComponent } from \"../../components/YourContentComponent\";\r\nimport { AppColors } from \"../../constants/Colors\";\r\n\r\n//import { claimPlatform, createPlatform, Platform } from \"../../apis/UserApi\"\r\n//import { AmiraError } from \"../../AmiraError\"\r\n\r\nexport function YourContent() {\r\n    const linkTo = useLinkTo<any>()\r\n    return (\r\n        <ScrollWithButtons\r\n            fillHeight\r\n            buttons={{\r\n                right: {\r\n                    text: \"I'm Done Linking Accounts\",\r\n                    onPress: () => {\r\n                        linkTo('/create/subscriptioncost')\r\n                    }\r\n                }\r\n            }}\r\n        >\r\n        <YourContentComponent />\r\n    </ScrollWithButtons>\r\n    )\r\n}\r\n\r\n","import { Icon, Text } from \"@ui-kitten/components\";\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\"\r\nimport { AppColors } from \"../../constants/Colors\";\r\nimport { bannerText, flex, paddView, paddViewWhite, sizes, thinBannerText } from \"../../style\";\r\nimport { CreateAccountProps } from \"./shared\"\r\nimport Bank from '../../assets/bank.svg'\r\nimport { SvgExpo } from \"../../components/SvgExpo\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { Animated, Pressable } from \"react-native\";\r\nimport { View } from \"../../components/Themed\";\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { ElevatedSection, Section } from \"../../components/Section\";\r\nimport { Table } from \"../../components/Table\";\r\nimport { AddButton, EditButton } from \"../../components/AddButton\";\r\nimport { openBrowserAsync } from 'expo-web-browser';\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useLinkTo } from \"@react-navigation/native\";\r\nimport { SubscriptionSettingsScreen, SubscriptionSettingsView } from \"../SubscriptionScreen\";\r\n\r\nexport const SubscriptionCostSection = (props: CreateAccountProps) => {\r\n    // useEffect(() => {\r\n    //     Animated.timing(\r\n    //         opacityAnim,\r\n    //         {\r\n    //             delay: 0.75,\r\n    //             toValue: 1,\r\n    //             duration: 2000,  \r\n    //             useNativeDriver: true\r\n    //         }).start();\r\n    // }, [])\r\n    const submitRef = useRef<{ submit: () => Promise<void> }>({ submit: async () => { } });\r\n    const linkTo = useLinkTo();\r\n    return <ScrollWithButtons\r\n        fillHeight\r\n        buttons={{\r\n            right: {\r\n                text: \"Apply Subscription\",\r\n                onPress: async () => {\r\n                    await submitRef.current.submit();\r\n                    linkTo('/create/profilepicture')\r\n                }\r\n            }\r\n        }}\r\n    >\r\n        <View style={[paddView,{alignItems:\"center\", alignContent:\"center\"}]}>\r\n            <SubscriptionSettingsView submitRef={submitRef} />\r\n        </View>\r\n    </ScrollWithButtons >\r\n}","import { Icon, Text } from \"@ui-kitten/components\";\r\nimport { useEffect, useRef } from \"react\";\r\nimport { Animated, Pressable, View } from \"react-native\";\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\"\r\nimport { AppColors } from \"../../constants/Colors\";\r\nimport { bannerText, sizes, thinBannerText } from \"../../style\";\r\nimport { CreateAccountProps, sideMargin } from \"./shared\"\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { ProfileButton } from \"../../components/ProfileButton\";\r\nimport { ElevatedSection } from \"../../components/Section\";\r\nimport { useData } from \"../../lds\";\r\nimport { useLinkTo, useNavigation } from \"@react-navigation/native\";\r\nimport React from \"react\";\r\nimport { useAppUser } from \"../../Authentication\";\r\nexport const ProfileIconSection = (props: CreateAccountProps) => {\r\n    const opacityAnim = useRef(new Animated.Value(0)).current;\r\n    const { value: hasAuthed, setValue } = useData(\"hasAuthed\");\r\n    const { loginState } = useAppUser();\r\n    const nav = useNavigation();\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n\r\n    return <ScrollWithButtons\r\n        buttons={{\r\n            right: {\r\n                text: \"Go To Trading Post!\",\r\n                onPress: () => {\r\n                    setValue(true);\r\n                    nav.navigate(\"AppInformation\");\r\n\r\n                    //linkTo('/dash/feed')\r\n                }\r\n            },\r\n\r\n        }}\r\n    >\r\n        <Animated.View style={{ opacity: opacityAnim, padding: sideMargin }} >\r\n            <ElevatedSection title=\"\">\r\n                <Text style={[thinBannerText]}>Tap to Modify Profile Picture</Text>\r\n                <ProfileButton userId={props.user.data.id} profileUrl={loginState?.appUser?.profile_url || \"\"} size={sizes.rem16} editable />\r\n                <Text style={[thinBannerText]}>Tip: Profile pictures will help others quickly identify you when on the platform.</Text>\r\n            </ElevatedSection>\r\n        </Animated.View>\r\n    </ScrollWithButtons>\r\n}","import React, { useState, useRef, useEffect, RefObject, useMemo } from \"react\";\r\nimport { Alert, TouchableOpacity, Image, ImageStyle, ViewStyle, View, Animated } from \"react-native\";\r\n//import { Navigation } from \"react-native-navigation\";\r\n//import { Nav } from '@react-navigation/native'\r\nimport { Input, Text, } from \"@ui-kitten/components\";\r\n//import { signOut, getStoredCreds, CreateAuth0User, UpdateUserProfile, signInStoredCreds } from \"../../apis/Authentication\";\r\nimport { ButtonField } from \"../../components/ButtonField\";\r\nimport { IconifyIcon } from \"../../components/IconfiyIcon\";\r\nimport { Section } from \"../../components/Section\";\r\nimport { TextField, ITextField } from \"../../components/TextField\";\r\nimport { bannerText, flex, sizes, textInputWiz } from \"../../style\";\r\nimport { bindTextInput, IEntity, useReadonlyEntity } from \"../../utils/hooks\";\r\nimport { isRequired, isValidEmail, isAlphaNumeric } from \"../../utils/validators\";\r\nimport { CreateAccountProps, sideMargin } from \"./shared\";\r\n\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\";\r\nimport { useData } from \"../../lds\";\r\nimport { Label } from \"../../components/Label\";\r\nimport { TBI } from \"../../utils/misc\";\r\nimport { AppColors } from \"../../constants/Colors\";\r\nimport Auth from '@tradingpost/common/api/entities/static/AuthApi'\r\nimport UserApi from '@tradingpost/common/api/entities/apis/UserApi'\r\nimport { IUserGet } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport { useAppUser } from \"../../Authentication\";\r\nimport { useLinkTo, useNavigation } from \"@react-navigation/native\";\r\nimport { registerDeviceForNotifications } from \"../../utils/notifications\";\r\nimport { HtmlView } from \"../../components/HtmlView\";\r\n\r\n\r\n\r\n\r\nexport function TermsScreen(props: CreateAccountProps) {\r\n    const\r\n        nav = useNavigation(),\r\n        [lockButtons, setLockButtons] = useState(false),\r\n        opacityAnim = useRef(new Animated.Value(0)).current,\r\n        linkTo = useLinkTo(),\r\n        buttonConfig = {\r\n            locked: lockButtons,\r\n            right: {\r\n                text: \"Go Back\",\r\n                onPress: async () => {\r\n                    linkTo(\"/create/logininfo\")\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n\r\n\r\n    return <ScrollWithButtons\r\n        fillHeight\r\n        buttons={buttonConfig}>\r\n        <HtmlView\r\n            style={{ flex: 1 }}\r\n            isUrl\r\n        >{\"https://tradingpostapp.com/terms-of-service\"}</HtmlView>\r\n    </ScrollWithButtons>\r\n}\r\n","import React, { useState, useRef, useEffect, RefObject, useMemo } from \"react\";\r\nimport { Alert, TouchableOpacity, Image, ImageStyle, ViewStyle, View, Animated } from \"react-native\";\r\n//import { Navigation } from \"react-native-navigation\";\r\n//import { Nav } from '@react-navigation/native'\r\nimport { Input, Text, } from \"@ui-kitten/components\";\r\n//import { signOut, getStoredCreds, CreateAuth0User, UpdateUserProfile, signInStoredCreds } from \"../../apis/Authentication\";\r\nimport { ButtonField } from \"../../components/ButtonField\";\r\nimport { IconifyIcon } from \"../../components/IconfiyIcon\";\r\nimport { Section } from \"../../components/Section\";\r\nimport { TextField, ITextField } from \"../../components/TextField\";\r\nimport { bannerText, flex, sizes, textInputWiz } from \"../../style\";\r\nimport { bindTextInput, IEntity, useReadonlyEntity } from \"../../utils/hooks\";\r\nimport { isRequired, isValidEmail, isAlphaNumeric } from \"../../utils/validators\";\r\nimport { CreateAccountProps, sideMargin } from \"./shared\";\r\n\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\";\r\nimport { useData } from \"../../lds\";\r\nimport { Label } from \"../../components/Label\";\r\nimport { TBI } from \"../../utils/misc\";\r\nimport { AppColors } from \"../../constants/Colors\";\r\nimport Auth from '@tradingpost/common/api/entities/static/AuthApi'\r\nimport UserApi from '@tradingpost/common/api/entities/apis/UserApi'\r\nimport { IUserGet } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport { useAppUser } from \"../../Authentication\";\r\nimport { useLinkTo, useNavigation } from \"@react-navigation/native\";\r\nimport { registerDeviceForNotifications } from \"../../utils/notifications\";\r\nimport { HtmlView } from \"../../components/HtmlView\";\r\n\r\n\r\n\r\n\r\nexport function PrivacyScreen(props: CreateAccountProps) {\r\n    const\r\n        nav = useNavigation(),\r\n        [lockButtons, setLockButtons] = useState(false),\r\n        opacityAnim = useRef(new Animated.Value(0)).current,\r\n        linkTo = useLinkTo(),\r\n        buttonConfig = {\r\n            locked: lockButtons,\r\n            right: {\r\n                text: \"Go Back\",\r\n                onPress: async () => {\r\n                    linkTo(\"/create/logininfo\")\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n\r\n\r\n    return <ScrollWithButtons\r\n        fillHeight\r\n        buttons={buttonConfig}>\r\n        <HtmlView\r\n            style={{ flex: 1 }}\r\n            isUrl\r\n        >{\"https://tradingpostapp.com/privacy-policy\"}</HtmlView>\r\n    </ScrollWithButtons>\r\n}\r\n","/**\r\n * Learn more about deep linking with React Navigation\r\n * https://reactnavigation.org/docs/deep-linking\r\n * https://reactnavigation.org/docs/configuring-links\r\n */\r\n\r\nimport { getActionFromState, getStateFromPath, LinkingOptions } from '@react-navigation/native';\r\nimport * as Linking from 'expo-linking';\r\nimport { NavIconKeys, navIcons } from '../images';\r\nimport { screens } from '../screens/CreateAccountScreen';\r\n\r\nconst ConfigOverride: Partial<Record<NavIconKeys, any>> = {\r\n    Notification: {\r\n        path: \"dash/notification\",\r\n    }\r\n};\r\n\r\nconst linking: LinkingOptions<any> = {\r\n    prefixes: [Linking.createURL('/'), \"https://m.tradingpostapp.com\"],\r\n    config: {\r\n        screens: {\r\n            Root: \"login\",\r\n            Create: {\r\n                screens: {\r\n                    Root: {\r\n                        screens: (() => {\r\n                            const output: Record<string, string> = {}\r\n                            Object.keys(screens).map((k) => {\r\n                                output[k] = \"create/\" + k.toLowerCase();\r\n                            })\r\n                            return output;\r\n                        })()\r\n                    }\r\n                }\r\n            },\r\n            Dash: {\r\n                screens: {\r\n                    Root: {\r\n                        screens: (() => {\r\n                            const output: Record<string, string> = {}\r\n                            Object.keys(navIcons).map((k) => {\r\n                                output[k] = ConfigOverride[k as NavIconKeys] || \"dash/\" + k.toLowerCase();\r\n                            })\r\n                            return output;\r\n                        })()\r\n                    }\r\n                }\r\n            },\r\n            Profile: \"profile\",\r\n            PostScreen: \"post\",\r\n            AccountInformation: \"account\",\r\n            VerifyAccount: \"verifyaccount\",\r\n            ResetPassword: \"resetpassword\",\r\n            NotificationTrade: \"dash/notification/trade\",\r\n            Auth: \"auth/:platform\",\r\n            WatchlistViewer: \"WatchlistViewer/:watchlistId\",\r\n            Modal: 'modal',\r\n            NotFound: '*',\r\n        },\r\n    },\r\n    getStateFromPath: (path, options) => {\r\n        const state = getStateFromPath(path, options);\r\n        // Replaces the current screen if $replace is in the parameter\r\n        // ...not sure if this will work properly in all navigation situations\r\n        // maybe need to make this only work if the navigator is a dash? or look for the last dash navigator\r\n        if (state && (state.routes?.[state.routes.length - 1]?.params as any)?.$replace && state.routes.length > 1) {\r\n            console.log(\"Running a replace ....\");\r\n            delete (state.routes?.[state.routes.length - 1]?.params as any).$replace;\r\n            state.routes.splice(state.routes.length - 2, 1);\r\n        }\r\n\r\n        return state;\r\n\r\n    },\r\n    getActionFromState: (state, options) => {\r\n        const action = getActionFromState(state, options);\r\n        return action;\r\n    }\r\n};\r\n\r\nexport default linking;\r\n","import { StyleSheet, TouchableOpacity } from 'react-native';\r\n\r\nimport { Text, View } from '../components/Themed';\r\nimport { RootStackScreenProps } from '../types';\r\n\r\nexport default function NotFoundScreen({ navigation }: RootStackScreenProps<'NotFound'>) {\r\n  return (\r\n    <View style={styles.container}>\r\n      <Text style={styles.title}>This screen doesn't exist.</Text>\r\n      <TouchableOpacity onPress={() => navigation.replace('Root')} style={styles.link}>\r\n        <Text style={styles.linkText}>Go to home screen!</Text>\r\n      </TouchableOpacity>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    padding: 20,\r\n  },\r\n  title: {\r\n    fontSize: 20,\r\n    fontWeight: 'bold',\r\n  },\r\n  link: {\r\n    marginTop: 15,\r\n    paddingVertical: 15,\r\n  },\r\n  linkText: {\r\n    fontSize: 14,\r\n    color: '#2e78b7',\r\n  },\r\n});\r\n","import { View, Animated, ImageStyle, Pressable, ViewStyle } from \"react-native\";\r\nimport React, { useEffect, useRef } from \"react\";\r\nimport { Text, Image } from \"react-native\";\r\nimport { IconifyIcon } from \"./IconfiyIcon\";\r\nimport UserLogo from '../assets/@iconify/user'\r\n\r\nimport { flex, row, sizes } from \"../style\";\r\nimport { useWindowDimensions } from \"react-native\";\r\nimport { social } from \"../images\";\r\n//import { ImageResultCallback, openImagePicker } from \"../screens/ImagePickerScreen\";\r\nimport ProfileBg from '../assets/profile/profileBg.png'\r\nimport { NavigationProp } from \"@react-navigation/native\";\r\nimport { AppColors } from \"../constants/Colors\";\r\nimport { Interface } from \"@tradingpost/common/api\";\r\n\r\n\r\n\r\nexport const profileImageSize = sizes.rem6;\r\nexport const profileImageSmall = sizes.rem4;\r\nexport const actionPanelSize = sizes.rem2;\r\nconst profileImageStyle = {\r\n    height: profileImageSize,\r\n    width: profileImageSize,\r\n    position: \"absolute\",\r\n    borderRadius: profileImageSize / 2,\r\n    backgroundColor: \"darkgray\",\r\n    bottom: 0\r\n}\r\n\r\nconst profileImageSmallStyle = {\r\n    height: profileImageSmall,\r\n    width: profileImageSmall,\r\n    borderRadius: profileImageSmall / 2,\r\n    backgroundColor: \"darkgray\",\r\n    position: \"absolute\",\r\n    left: sizes.rem1,\r\n    bottom: 0\r\n}\r\n\r\n\r\nexport function useProfileBannerSize() {\r\n    const dim = useWindowDimensions();\r\n    return Math.min(dim.width, 680) / bannerAspectRatio + actionPanelSize;\r\n}\r\n\r\nconst bannerAspectRatio = 21 / 9;//16 / 9;\r\nconst viewStyle: ViewStyle = {\r\n    backgroundColor: \"lightgray\",\r\n    aspectRatio: bannerAspectRatio,\r\n    width: \"100%\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"flex-end\"\r\n};\r\n\r\ntype ImageResultCallback = (a: any, b: any) => void;\r\n\r\nexport function ProfileBanner<T extends boolean>(props: { subscriberCount: number | undefined, profilePic: string | undefined, bannerPic: string | undefined, editMode?: T, collapse?: boolean, extraMarginTop?: number, navigator: NavigationProp<any>, platforms: string[] } &\r\n    (T extends true ? {\r\n        onBannerPicked: ImageResultCallback,\r\n        onProfilePicked: ImageResultCallback\r\n\r\n    } : { onBannerPicked?: ImageResultCallback, onProfilePicked?: ImageResultCallback })\r\n) {\r\n    const { profilePic, collapse } = props;\r\n\r\n    return <View style={{ alignItems: \"center\", width: \"100%\" }}>\r\n        <Pressable\r\n            key=\"imagepart\"\r\n\r\n            style={[viewStyle, { backgroundColor: AppColors.primary }, collapse ? { marginTop: actionPanelSize / 2 + (props.extraMarginTop || 0) } : undefined]}\r\n        >\r\n            {/* <Image style={{ width: \"100%\", height: \"100%\", position: \"absolute\" }} source={ProfileBg} /> */}\r\n            {\r\n                /*</> :\r\n                <View style={[row, { backgroundColor: \"blue\", width: \"100%\" }]}>\r\n                    <ProfilePic profilePic={profilePic} collapse={collapse} editMode={props.editMode} />\r\n                </View>\r\n                */\r\n            }\r\n        </Pressable>\r\n        {!collapse && <View key=\"uncollapseFoot\" style={[row, {\r\n            width: \"100%\",\r\n            alignSelf: \"stretch\",\r\n            height: actionPanelSize,\r\n            backgroundColor: \"white\",\r\n            alignContent: \"center\",\r\n            alignItems: \"center\"\r\n        }]}>\r\n            <Text style={[flex, {\r\n                maxWidth: '48%', // some weird ness here where the  social bar/ this container is weider than the screen so creating a horizontial scroll bar\r\n                textAlign: \"center\", transform: [{\r\n                    translateX: -profileImageSize / 4,\r\n                }]\r\n            }]}>Subscribers {props.subscriberCount || \"-\"}</Text>\r\n            <View style={[row, flex, {\r\n                justifyContent: \"center\",\r\n                height: sizes.rem1_5,\r\n                maxWidth: '50%',\r\n                transform: [{\r\n                    translateX: profileImageSize / 4\r\n                }]\r\n            }]}>\r\n                <SocialBar claims={props.platforms} />\r\n            </View>\r\n        </View>}\r\n        {collapse && <View key=\"collapseFoot\" style={[{\r\n            width: \"100%\",\r\n            alignSelf: \"stretch\",\r\n            height: actionPanelSize,\r\n            backgroundColor: \"white\",\r\n            alignContent: \"center\",\r\n            alignItems: \"center\"\r\n        }]}>\r\n            <View style={[row, { height: \"100%\", alignSelf: \"flex-end\", marginRight: sizes.rem1 }]}>\r\n                <SocialBar claims={props.platforms} />\r\n            </View>\r\n        </View>}\r\n        <ProfilePic profilePic={profilePic} collapse={collapse} editMode={props.editMode} navigator={props.navigator}\r\n            onProfilePicked={props.onProfilePicked} />\r\n    </View>\r\n}\r\n\r\nconst SocialBar = (props: { claims: string[] }) => {\r\n    //{social.TwitterLogo, social.LinkedInLogo, social.YouTubeLogo}\r\n    return <>\r\n        {[\"Twitter\", \"YouTube\", \"Spotify\"].map((logoName, i) => {\r\n            //social.TwitterLogo, social.LinkedInLogo, social.YouTubeLogo\r\n            //social.TwitterLogo, social.LinkedInLogo, social.YouTubeLogo\r\n            const logo = social[logoName + \"Logo\" as keyof typeof social];\r\n            return props.claims.find((c) => c.toLowerCase() === logoName.toLowerCase()) ?\r\n                <View key={`socialV_${i}`} style={{ height: \"100%\", aspectRatio: 1 }}>\r\n                    <IconifyIcon key={`social_${i}`} icon={logo} svgProps={{ height: \"75%\" }}\r\n                        style={{ height: \"75%\", margin: \"12.5%\", aspectRatio: 1 }} />\r\n                </View> : undefined\r\n        })}\r\n    </>\r\n}\r\n\r\nfunction ProfilePic(props: { profilePic: string | undefined, collapse: boolean | undefined, editMode: boolean | undefined, navigator: NavigationProp<any>, onProfilePicked?: ImageResultCallback }) {\r\n    const { profilePic, collapse, editMode } = props;\r\n    const style = collapse ? profileImageSmallStyle : profileImageStyle\r\n    return <Pressable disabled={!editMode} style={style as ViewStyle}\r\n    // onPress={() =>\r\n    //     openImagePicker(props.componentId, {\r\n    //     onImagePicked: props.onProfilePicked,\r\n    //     cropSettings: {\r\n    //         height: 256 * 4,\r\n    //         width: 256 * 4\r\n    //     }\r\n    // })}\r\n\r\n    >\r\n        {profilePic ? <Image source={{ uri: profilePic }} style={[style as ImageStyle, { left: 0 }]} /> :\r\n            <IconifyIcon\r\n                style={{ height: \"120%\", width: \"120%\", left: \"-10%\" }}\r\n                icon={UserLogo}\r\n                currentColor='black'\r\n            />}\r\n    </Pressable>\r\n}","import {NavigationProp, useNavigation} from \"@react-navigation/native\"\r\nimport {Interface} from \"@tradingpost/common/api\"\r\nimport {Avatar, Text} from \"@ui-kitten/components\"\r\nimport React from \"react\"\r\nimport {Pressable, View, ViewStyle} from \"react-native\"\r\nimport {flex, sizes} from \"../style\"\r\nimport {ProfileButton} from \"./ProfileButton\"\r\n\r\nexport const ProfileBar = (props: {\r\n    user?: Interface.IUserList,\r\n    style?: ViewStyle\r\n}) => {\r\n    const nav = useNavigation<NavigationProp<any>>();\r\n    const openProfile = () => {\r\n        if (props.user?.id) {\r\n            nav.navigate(\"Profile\", {\r\n                userId: props.user.id\r\n            });\r\n        }\r\n    }\r\n\r\n    return <View style={props.style}><View style={{flexDirection: \"row\", width: \"100%\", marginBottom: sizes.rem0_5}}>\r\n        <ProfileButton userId={props.user?.id || \"\"} profileUrl={props.user?.profile_url || \"\"} size={sizes.rem6 / 2}/>\r\n        <View style={[flex, {marginLeft: sizes.rem0_5, justifyContent: 'center', alignItems: 'flex-start'}]}>\r\n            <Pressable style={props.user?.display_name.length && props.user?.display_name.length > 1 ? {display: 'flex'} : {display: 'none'}} onPress={openProfile}><Text category={\"s1\"}>{props.user?.display_name}</Text></Pressable>\r\n            <Pressable onPress={openProfile}><Text category={\"s2\"}>{\"@\" + props.user?.handle}</Text></Pressable>\r\n        </View>\r\n    </View>\r\n    </View>\r\n}","import React from \"react\";\r\nimport { Button } from \"@ui-kitten/components\";\r\nimport { AppColors } from \"../constants/Colors\";\r\nimport { sizes } from \"../style\";\r\nimport { Text, ViewStyle } from 'react-native'\r\nexport function PrimaryChip(props: { label: string, isAlt?: boolean, style?: ViewStyle }) {\r\n    const color = props.isAlt ? AppColors.secondary : AppColors.primary\r\n    return <Button\r\n        key={props.label}\r\n        size={'tiny'}\r\n        style={[{ borderRadius: 16, backgroundColor: color, borderColor: color, marginRight: sizes.rem1 / 4, height: sizes.rem2, minHeight: sizes.rem2 }, props.style]}\r\n    //label={props.label}\r\n    ><Text numberOfLines={1} style={{ color: \"white\" }}>{props.label}</Text></Button>\r\n}","import React from \"react\";\r\nimport { Image, ImageBackground, ImageStyle } from \"react-native\";\r\nimport { sizes } from \"../style\";\r\n\r\nexport function IconButton(props: { iconSource: number, style?: ImageStyle }) {\r\n    return <Image source={props.iconSource} resizeMode=\"contain\" style={[ {height:24}, props.style]}/>\r\n} ","import React, { ReactNode, useState } from \"react\";\r\nimport { Pressable } from \"react-native\";\r\n\r\nexport const AsyncPressable = (props: { children: ReactNode, onPress?: () => Promise<void> }) => {\r\n    const [isDisabled, setIsDisabled] = useState(false);\r\n    const { onPress, children } = props;\r\n    return <Pressable disabled={isDisabled} onPress={async () => {\r\n        setIsDisabled(true);\r\n\r\n        if (onPress)\r\n            await onPress();\r\n\r\n        setIsDisabled(false);\r\n\r\n    }}>{children}</Pressable>\r\n}","import React from \"react\"\r\nimport { Share, Pressable, ViewStyle } from \"react-native\"\r\nimport ShareIcon from '../assets/@iconify/share'\r\nimport { IconifyIcon } from \"./IconfiyIcon\"\r\n\r\nexport const ShareButton = (props: { style?: ViewStyle, title: string, url: string, color?: string }) => {\r\n    return <Pressable onPress={() => {\r\n        Share.share({\r\n            title: props.url,\r\n            url: props.url,\r\n            message: props.title\r\n\r\n        }, {\r\n\r\n        })\r\n\r\n    }}>\r\n        <IconifyIcon icon={ShareIcon} style={props.style} currentColor={props.color || \"black\"} />\r\n    </Pressable>\r\n}","import React, { useEffect, useState } from 'react'\r\nimport {\r\n    Alert,\r\n    Image,\r\n    ImageBackground,\r\n    Linking,\r\n    PixelRatio,\r\n    Platform,\r\n    Pressable,\r\n    ScrollView,\r\n    StyleSheet,\r\n    Text,\r\n    TouchableOpacity,\r\n    View\r\n} from 'react-native'\r\nimport { Button, Icon } from '@ui-kitten/components'\r\n\r\nimport { flex, fonts, row, shadow, sizes } from '../style'\r\n\r\nimport { IconifyIcon } from './IconfiyIcon'\r\nimport { Header, Subheader } from './Headers'\r\nimport { PrimaryChip } from './PrimaryChip'\r\nimport { BookmarkActive, BookmarkIcons, CommentIcon, navIcons, postBg, social, UpvoteIcon, Retweet, PremiumStar } from '../images'\r\nimport { social as socialStyle } from '../style'\r\nimport { IconButton } from './IconButton'\r\n//import { IPostList } from '../api/entities/interfaces'\r\nimport { LogoImage } from './LogoImage'\r\n//import { ensureCurrentUser } from '../apis/Authentication'\r\n//import { WebView } from 'react-native-webview';\r\nimport { color } from 'react-native-reanimated'\r\n//import { screens } from '../navigationComponents'\r\n//import { fullDashOptions } from '../layouts/DashboardLayout'\r\nimport { toFormatedDateTime } from '../utils/misc'\r\nimport { AsyncPressable } from './AsyncPressable'\r\nimport { AppColors } from '../constants/Colors'\r\nimport { Api, Interface } from '@tradingpost/common/api'\r\nimport { HtmlView } from './HtmlView'\r\nimport { useWindowDimensions } from 'react-native'\r\nimport { ProfileButton } from './ProfileButton'\r\nimport { useToast } from 'react-native-toast-notifications'\r\nimport { NavigationProp, useNavigation } from \"@react-navigation/native\"\r\nimport { RootStackParamList } from '../navigation/pages'\r\n\r\n//import { setBookmarked } from '../apis/PostApi'\r\n//import { openProfileScreen } from '../screens/ProfileScreen'\r\nimport { WebView } from \"react-native-webview\";\r\nimport { ShareButton } from './ShareButton'\r\n\r\n\r\nconst postTotalVerticalMargin = sizes.rem1;\r\nconst postTotalHorizontalMargin = sizes.rem2;\r\nconst postSidePad = sizes.rem2;\r\nconst postTotalBorder = 2//4;\r\nexport const spaceOnSide = postTotalHorizontalMargin + postTotalBorder + postSidePad\r\n\r\nexport const postInnerHeight = (itm: Interface.IElasticPost | undefined, windowWidth: number) => {\r\n    const size = (itm as Interface.IElasticPost | undefined)?._source.size\r\n    if (itm?._source.postType === \"substack\") {\r\n        return 200;\r\n    } else if (itm?._source.postType === \"tradingpost\" && size) {\r\n        return (windowWidth / size.aspectRatio) * (fonts.small / fonts.xSmall) + fonts.medium\r\n    } else if (size) {\r\n        return windowWidth / size.aspectRatio + (itm?._source.postType === \"tweet\" ? 20 * windowWidth / itm._source.size.maxWidth : 0);\r\n    } else if (itm?._source.postType === \"youtube\") {\r\n        return windowWidth / (390 / 230);\r\n    } else if (itm?._source.postType === \"spotify\") {\r\n        return windowWidth / (360 / 162);\r\n    } else {\r\n        return 200;\r\n    }\r\n}\r\nexport const resolvePostContent = (itm: Interface.IElasticPost | undefined, windowWidth: number) => {\r\n    switch (itm?._source.postType) {\r\n        case \"youtube\":\r\n            return \"https:\" + itm._source.postUrl.replace(\"https://www.youtube.com/watch?v=\", \"//www.youtube.com/embed/\");\r\n        case 'tweet':\r\n            return `<html><head>\r\n            <style>\r\n            .blink_me {\r\n                animation: blinker 1s linear infinite;\r\n              }\r\n              \r\n              @keyframes blinker {\r\n                50% {\r\n                  opacity: 0;\r\n                }\r\n              }\r\n            </style>\r\n            <script>                \r\n                const tracker = setInterval(()=>{\r\n                    if(document.querySelector(\".twitter-tweet-rendered\")){\r\n                        clearInterval(tracker);  \r\n                        document.getElementById(\"wrapper\").style.opacity=1;\r\n                        document.getElementById(\"loader\").style.opacity=0.99;\r\n                        setTimeout(()=>{\r\n                            document.getElementById(\"loader\").style.display=\"none\";\r\n                        },2000)\r\n                    }\r\n                },333)    \r\n\r\n            </script><meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0\"></meta></head>\r\n            <body style=\"margin:0; padding:0;width:${itm._source.size.maxWidth}px;transform: scale(${Math.min(windowWidth, 680) / itm._source.size.maxWidth});transform-origin: top left;\">\r\n            <div id=\"loader\" style=\"background-color:white; position:absolute; height:100%; width:100%\">\r\n             <img class=\"blink_me\" style=\"position:absolute; margin:auto; left:0; right:0; top:0; bottom:0; height:40px; width:40px\" src=\"data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e %3csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' viewBox='0 0 248 204'%3e%3cpath fill='%231d9bf0' d='M221.95 51.29c.15 2.17.15 4.34.15 6.53 0 66.73-50.8 143.69-143.69 143.69v-.04c-27.44.04-54.31-7.82-77.41-22.64 3.99.48 8 .72 12.02.73 22.74.02 44.83-7.61 62.72-21.66-21.61-.41-40.56-14.5-47.18-35.07 7.57 1.46 15.37 1.16 22.8-.87-23.56-4.76-40.51-25.46-40.51-49.5v-.64c7.02 3.91 14.88 6.08 22.92 6.32C11.58 63.31 4.74 33.79 18.14 10.71c25.64 31.55 63.47 50.73 104.08 52.76-4.07-17.54 1.49-35.92 14.61-48.25 20.34-19.12 52.33-18.14 71.45 2.19 11.31-2.23 22.15-6.38 32.07-12.26-3.77 11.69-11.66 21.62-22.2 27.93 10.01-1.18 19.79-3.86 29-7.95-6.78 10.16-15.32 19.01-25.2 26.16z'/%3e%3c/svg%3e\" />\r\n            </div>\r\n            <div id=\"wrapper\" style=\"opacity:0; min-height:${itm._source.size.maxWidth / itm._source.size.aspectRatio}px\">\r\n            ${itm._source.content.htmlBody}\r\n            </div>\r\n            </body></html>`\r\n        case 'spotify':\r\n            const matches = /src=\"(.*)\"/.exec(itm._source.content.body);\r\n            return matches?.[1] || \"\";\r\n        case 'tradingpost':\r\n            return `\r\n                <html><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n                    <body>\r\n                        <div style=\"font-size: ${fonts.medium}px; font-weight: 600px; line-height: ${fonts.medium * 1}px; margin-bottom: 10px\">${itm._source.content.title}</div>\r\n                        <div style=\"font-size: ${fonts.small}px; margin: 0px 3px 0px\">${itm._source.content.body}</div>\r\n                    </body>    \r\n                </html>\r\n                `\r\n        case 'substack':\r\n        //return SubstackView({post: itm});\r\n\r\n        /*\r\n        return `<html><head><meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0\"></meta></head>\r\n        <body style=\"margin:0; padding:0;width:${itm?._source.size.maxWidth}px;transform: scale(${windowWidth / itm._source.size.maxWidth});transform-origin: top left;\">\r\n        <h1>${itm?._source.content.title}</h1>\r\n        <p>${itm?._source.content.body}</p>\r\n        </body></html>`\r\n        */\r\n\r\n\r\n        default:\r\n            return itm?._source.content.htmlBody || \"\";\r\n    }\r\n}\r\n\r\nexport function PostView(props: { post: Interface.IElasticPostExt }) {\r\n    const { post } = props\r\n    const nav = useNavigation<NavigationProp<RootStackParamList>>();\r\n\r\n    const [isBookmarked, setIsBookmarked] = useState(Boolean(post.ext.is_bookmarked));\r\n    const [isUpvoted, setIsUpvoted] = useState(Boolean(post.ext.is_upvoted));\r\n    const [upvoteCount, setUpvoteCount] = useState(post.ext.upvoteCount || 0);\r\n    // useEffect(() => {\r\n    //     Api.Post.extensions.getUpvotes({id: props.post._source.id, count: 0})\r\n    //         .then((r) => {\r\n    //             setUpvoteCount(r.count);\r\n    //         })\r\n    // }, [])\r\n    const [showStatus, setShowStatus] = useState(false);\r\n    return <View style={{ marginHorizontal: postTotalHorizontalMargin / 2, marginVertical: postTotalVerticalMargin / 2 }}>\r\n        <View\r\n            style={[shadow, {\r\n                backgroundColor: \"white\",\r\n                borderRadius: sizes.borderRadius * 4,\r\n                borderColor: \"#ccc\",\r\n                borderWidth: postTotalBorder / 2\r\n            }]}>\r\n            <Pressable\r\n                onPress={() => {\r\n                    //openProfileScreen(props.parentComponentId, props.post.creator.id_creator);\r\n                }} style={[row, {\r\n                    alignItems: \"center\",\r\n                    overflow: \"hidden\",\r\n                    borderBottomColor: \"#ccc\",\r\n                    borderBottomWidth: 1,\r\n                    padding: sizes.rem1 / 2\r\n                }]}>\r\n                {\r\n                    <ProfileButton userId={props.post._source.user.id}\r\n                        profileUrl={props.post.ext.user?.profile_url || \"\"} size={48} />\r\n                }\r\n                <View style={[flex, { marginLeft: sizes.rem1 }]}>\r\n                    <Pressable onPress={() => {\r\n                        if (props.post._source.user.id)\r\n                            nav.navigate(\"Profile\", {\r\n                                userId: props.post._source.user.id\r\n                            } as any);\r\n                    }}\r\n                    >\r\n                        <Subheader text={\"@\" + (props.post.ext.user?.handle || \"NoUserAttached\")}\r\n                            style={{ color: \"black\", fontWeight: \"bold\" }} />\r\n                    </Pressable>\r\n                    <View style={{ marginRight: 10 }}>\r\n                        <ScrollView nestedScrollEnabled horizontal showsHorizontalScrollIndicator={false}>\r\n                            <View style={[row, props.post.ext.user?.tags ? { display: 'flex' } : { display: 'none' }]}>\r\n                                {props.post.ext.user?.tags && (props.post.ext.user?.tags).map((chip, i) =>\r\n                                    <PrimaryChip isAlt key={i} label={chip} />)}\r\n                            </View>\r\n                        </ScrollView>\r\n                    </View>\r\n                </View>\r\n                <AsyncPressable\r\n                    onPress={async () => {\r\n                        try {\r\n                            const resp = await Api.Post.extensions.setBookmarked({\r\n                                id: props.post._id,\r\n                                is_bookmarked: !isBookmarked\r\n                            });\r\n                            setIsBookmarked(Boolean(resp.is_bookmarked));\r\n                        } catch (ex) {\r\n                            console.error(ex);\r\n                        }\r\n                    }}>\r\n                    {!isBookmarked && <IconButton iconSource={BookmarkIcons.inactive}\r\n                        style={{ height: 28, width: 28, marginLeft: \"auto\" }} />}\r\n                    {isBookmarked && <BookmarkActive\r\n                        style={{ height: 28, width: 28, marginLeft: \"auto\", marginRight: sizes.rem0_5 / 2 }} />}\r\n                </AsyncPressable>\r\n            </Pressable>\r\n            {\r\n                [\"substack\", \"tradingpost\"].includes(post._source.postType) ?\r\n                    <Pressable onPress={() => {\r\n                        nav.navigate(\"PostScreen\", {\r\n                            post,\r\n                            id: post._id\r\n                        })\r\n\r\n                    }} style={{ paddingHorizontal: postSidePad / 2 }}>\r\n                        <PostContentView post={post} />\r\n                    </Pressable> :\r\n                    <View style={{ paddingHorizontal: postSidePad / 2 }}>\r\n                        <PostContentView post={post} />\r\n                    </View>\r\n            }\r\n\r\n            {(props.post._source.postType !== \"tweet\") &&\r\n                <View\r\n                    style={[row, { alignItems: \"center\", marginTop: \"auto\", borderTopColor: \"#ccc\", borderTopWidth: 1 }]}>\r\n                    {showStatus && <View style={{\r\n                        position: \"absolute\",\r\n                        backgroundColor: \"black\",\r\n                        //   opacity: 0.6,\r\n                        width: 100,\r\n                        margin: \"auto\",\r\n                        top: 12,\r\n                        left: 0,\r\n                        borderRadius: 8,\r\n                        right: 0,\r\n                        padding: 4\r\n                    }}><Text style={{ width: \"100%\", textAlign: \"center\", color: \"white\" }}>Upvoted!</Text></View>}\r\n                    <Button\r\n                        style={{ marginLeft: \"auto\", paddingLeft: 10, paddingRight: 0 }}\r\n                        appearance={'ghost'}\r\n                        accessoryLeft={(props: any) =>\r\n                            <CommentIcon height={24} width={24} style={{ height: 24, width: 24, }} />\r\n                        }\r\n                        onPress={() => {\r\n                            nav.navigate(\"PostScreen\", {\r\n                                post, id: post._id\r\n                            })\r\n                        }}\r\n                    >\r\n                        {evaProps => <Text {...evaProps}\r\n                            style={{\r\n                                fontWeight: 'normal',\r\n                                paddingLeft: sizes.rem1,\r\n                                paddingRight: sizes.rem0_5,\r\n                                color: '#9D9D9D'\r\n                            }}>\r\n                            {'-'}\r\n                        </Text>}\r\n                    </Button>\r\n                    {<Button\r\n                        style={{ paddingLeft: 10, paddingRight: 0 }}\r\n                        onPress={() => {\r\n                            if (!isUpvoted)\r\n                                setShowStatus(true);\r\n                            Api.Post.extensions.setUpvoted({\r\n                                id: post._id,\r\n                                is_upvoted: !isUpvoted,\r\n                                count: upvoteCount // return number of upvotes. \r\n                            }).then((r) => {\r\n                                if (r.is_upvoted)\r\n                                    setTimeout(() => {\r\n                                        setShowStatus(false)\r\n                                    }, 1333);\r\n                                setUpvoteCount(r.count);\r\n                                setIsUpvoted(r.is_upvoted);\r\n                            });\r\n                        }}\r\n                        accessoryLeft={(props: any) => <UpvoteIcon height={24} width={24} style={{\r\n                            height: 24,\r\n                            width: 24,\r\n                            // opacity: isUpvoted ? 1 : 0.25\r\n                        }} />} appearance={\"ghost\"}>\r\n                        {evaProps => <Text {...evaProps} style={{\r\n                            fontWeight: 'normal',\r\n                            paddingHorizontal: sizes.rem1,\r\n                            color: '#9D9D9D'\r\n                        }}>{upvoteCount}</Text>}\r\n                    </Button>}\r\n                    <ShareButton url={\"https://m.tradingpostapp.com/post?id=\" + props.post._id} title={\"https://m.tradingpostapp.com/post?id=\" + props.post._id} style={{\r\n                        height: 24,\r\n                        width: 24, marginRight: 10\r\n                    }} />\r\n                </View>}\r\n        </View>\r\n    </View>\r\n}\r\n\r\nconst SubstackView = (props: { post: Interface.IElasticPost }) => {\r\n    const { post } = props;\r\n    return <View style={{ marginVertical: sizes.rem1 / 2, marginHorizontal: sizes.rem0_5 }}>\r\n        <View key=\"profile\">\r\n            {/* <Image style={{ aspectRatio: 0.9, marginRight: sizes.rem1 / 2 }} source={{ uri: post.platform_profile_url }} /> */}\r\n            <Pressable onPress={() => {\r\n                Linking.openURL(post._source.postUrl)\r\n            }}\r\n                style={{\r\n                    marginBottom: sizes.rem0_5,\r\n                    display: \"flex\",\r\n                    flexDirection: \"row\",\r\n                    alignItems: 'center'\r\n                }}>\r\n                <IconifyIcon style={{ width: 30, height: 30, marginTop: 2, marginRight: sizes.rem1 / 1.5 }}\r\n                    svgProps={{ style: { margin: \"auto\" } }} icon={social.SubstackLogo}\r\n                    currentColor={socialStyle.substackColor} />\r\n                {<Subheader text={post._source.content.title || \"\"} style={{\r\n                    marginBottom: 0,\r\n                    display: \"flex\",\r\n                    color: \"black\",\r\n                    fontSize: fonts.medium,\r\n                    fontWeight: \"600\",\r\n                    fontFamily: \"K2D\",\r\n                    maxWidth: \"85%\"\r\n                }}></Subheader>}\r\n            </Pressable>\r\n        </View>\r\n        {<Text key=\"content\" style={{ fontSize: fonts.small }}>\r\n            {(() => {\r\n                const parsedText = parseHtmlEnteties(post._source.content.description);\r\n                return parsedText?.length > 300 ?\r\n                    `${parsedText.substring(0, 300)}...` :\r\n                    parsedText\r\n            })()}\r\n        </Text>}\r\n        {<Text key=\"date\" style={{\r\n            fontSize: fonts.xSmall,\r\n            fontFamily: \"K2D\",\r\n            paddingVertical: 5\r\n        }}>{toFormatedDateTime(post._source.platformCreatedAt)}</Text>}\r\n    </View>\r\n}\r\n\r\nconst TradingPostView = (props: { post: Interface.IElasticPost }) => {\r\n    const { post } = props;\r\n    return <View style={{ marginVertical: sizes.rem1 / 2, marginHorizontal: sizes.rem0_5 }}>\r\n        <View key=\"profile\">\r\n            {/* <Image style={{ aspectRatio: 0.9, marginRight: sizes.rem1 / 2 }} source={{ uri: post.platform_profile_url }} /> */}\r\n\r\n            <Subheader text={post._source.content.title || \"\"} style={{\r\n                marginBottom: 0,\r\n                display: \"flex\",\r\n                color: \"black\",\r\n                fontSize: fonts.medium,\r\n                fontWeight: \"600\",\r\n                fontFamily: \"K2D\",\r\n                maxWidth: \"85%\"\r\n            }}></Subheader>\r\n\r\n        </View>\r\n        <HtmlView key=\"content\" isUrl={false} style={{ height: props.post._source.size.aspectRatio }}>\r\n            {`<html><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n                <body style=\"font-size: ${fonts.small}px\">${post._source.content.body}</body></html>`}\r\n            {/*(() => {\r\n                const parsedText = parseHtmlEnteties(post._source.content.body);\r\n                return parsedText?.length > 300 ?\r\n                    `${parsedText.substring(0, 300)}...` :\r\n                    parsedText\r\n            })()*/}\r\n        </HtmlView>\r\n        {<Text key=\"date\" style={{\r\n            fontSize: fonts.xSmall,\r\n            fontFamily: \"K2D\",\r\n            paddingVertical: 5\r\n        }}>{new Date(Date.parse(post._source.platformCreatedAt)).toLocaleString('en-US', {\r\n            dateStyle: 'medium',\r\n            timeStyle: 'short'\r\n        })}</Text>}\r\n    </View>\r\n}\r\nconst parseHtmlEnteties = (str: string) => {\r\n    return str?.replace(/&#([0-9]{1,4});/gi, function (match, numStr) {\r\n        var num = parseInt(numStr, 10); // read num as normal number\r\n        return String.fromCharCode(num);\r\n    });\r\n}\r\n\r\nconst PostContentView = (props: { post: Interface.IElasticPost }) => {\r\n    const { width: windowWidth, scale } = useWindowDimensions(),\r\n        availWidth = Math.min(windowWidth, 680) - spaceOnSide\r\n\r\n    if (props.post._source.postType === 'substack') {\r\n        return SubstackView(props)\r\n    }\r\n\r\n    return <View>\r\n        <View style={{\r\n            display: (props.post._source.postType === 'tweet' && props.post._source.content.body.slice(0, 2) === 'RT') ? 'flex' : 'none',\r\n            flexDirection: 'row',\r\n            alignItems: 'center',\r\n            marginTop: 2,\r\n            marginBottom: -5\r\n        }}>\r\n            <Retweet width={30} height={30} style={{ width: 30, height: 30 }} />\r\n            <Text style={{\r\n                fontWeight: '500',\r\n                marginLeft: 2\r\n            }}>\r\n                {'Retweet'}\r\n            </Text>\r\n        </View>\r\n        <View>\r\n            {props.post._source.subscription_level === 'premium' && <PremiumStar style={{ height: 24, width: 24, marginBottom: 5, marginTop: 10 }} />}\r\n        </View>\r\n        <View style={{\r\n            height: postInnerHeight(props.post, availWidth),\r\n            paddingVertical: ['spotify', 'youtube'].includes(props.post._source.postType) ? sizes.rem0_5 : 0\r\n            //height: postInnerHeight(props.post, availWidth),\r\n            //justifyContent: ['spotify', 'youtube'].includes(props.post._source.postType) ? 'center' : undefined\r\n        }}>\r\n            <HtmlView style={{\r\n                height: ['spotify', 'youtube'].includes(props.post._source.postType) ? postInnerHeight(props.post, availWidth) : postInnerHeight(props.post, availWidth),\r\n                //height: postInnerHeight(props.post, availWidth)\r\n                //marginTop: ['spotify', 'youtube'].includes(props.post._source.postType) ? 8 : 0,\r\n                //marginBottom: ['youtube', 'spotify'].includes(props.post._source.postType) ? 8 : 0\r\n            }}\r\n                isUrl={props.post._source.postType === \"youtube\" || props.post._source.postType === \"spotify\"}>\r\n                {resolvePostContent(props.post, availWidth)}\r\n            </HtmlView>\r\n        </View>\r\n        <View>\r\n            {props.post._source.postType === 'tradingpost' &&\r\n                <Text style={{ fontSize: fonts.xSmall, marginVertical: 10, marginLeft: 10 }}>\r\n                    {toFormatedDateTime(props.post._source.tradingpostCreatedAt)}\r\n                </Text>}\r\n\r\n        </View>\r\n    </View>\r\n\r\n}\r\n","import { Interface } from \"@tradingpost/common/api\";\r\nimport { IElasticPost } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport React, { useRef, useState } from \"react\";\r\nimport { ScrollView, Text } from \"react-native\";\r\n\r\n//import { Bookmark, getPosts } from \"../apis/PostApi\";\r\n//import { FeedType, IPost, IPostWithHtmlAndBk } from \"../interfaces/IPost\";\r\nimport { fonts } from \"../style\";\r\n//import { toAmiraDate, fromAmiraDate } from \"../utils/misc\";\r\nimport { DataOrQuery, List } from \"./List\";\r\nimport { PostView } from \"./PostView\";\r\nimport { View } from \"./Themed\";\r\n\r\n\r\n\r\nexport function PostList(props: { posts?: DataOrQuery<Interface.IElasticPostExt>, datasetKey?: string }) {\r\n    return <List\r\n        //style={{ borderColor: \"orange\", borderWidth: 5 }}\r\n        // contentContainerStyle={{ height:\"auto\", borderColor: \"blue\", borderWidth: 5 }}\r\n        listKey={props.datasetKey || 'STATIC'}\r\n        getItemLayout={(items, index, sizeCache) => {\r\n            const curItem = items?.[index];\r\n            const output = typeof curItem === \"object\" ? sizeCache[index] : { index, offset: sizeCache[index - 1].offset + sizeCache[index - 1].length, length: 40 };\r\n            return output;\r\n        }}\r\n        data={props.posts}\r\n        keyExtractor={(item, index) => typeof item === \"string\" ? \"loadingtext\" : (index + \"_\" + item._id)}\r\n        preloadOffset={2}\r\n        datasetKey={props.datasetKey}\r\n        renderItem={(item) => {\r\n            if (typeof item.item === \"string\") {\r\n                return <Text style={{ textAlign: \"center\", fontSize: fonts.large }}>Loading More...</Text>\r\n            }\r\n            else {\r\n                return <PostView key={item.index + \"_\" + item.item._id} post={item.item} />\r\n            }\r\n        }}\r\n        noDataMessage={\"No Posts Available\"}\r\n        loadingItem={\"  \"}\r\n    />\r\n\r\n}\r\n\r\n\r\n//Keeping this commented to emphasise how ridiculous it was lol!!!!!!!!!!!\r\n// export function usePostLoader(pageSize: number, bookmarks: Bookmark[] | undefined, isBookMarked?: boolean, creatorId?: string, errorHandler?: (message: string) => void) {\r\n//     const feedTypeRef = useRef<{\r\n//         response: FeedType,\r\n//         subscriber_min_time?: number\r\n//         disco_min_time?: number,\r\n//         creator_min_time?: number\r\n//     }>({\r\n//         response: creatorId ? \"creator\" : \"subscriber\"\r\n//     })\r\n//     console.log(\"FEED TYPE BASE:\" + feedTypeRef.current.response);\r\n\r\n//     return bookmarks ? async (existingData: IPostWithHtmlAndBk[] | undefined, currentPage: number) => {\r\n//         const output: IPostWithHtmlAndBk[] = [];\r\n\r\n//         try {\r\n//             if (existingData)\r\n//                 output.push(...existingData);\r\n//             let newPosts: IPostWithHtmlAndBk[] = [];\r\n\r\n//             const bod: FeedRequestBody = {\r\n//                 feed_type: feedTypeRef.current.response,\r\n//                 //discovery_feed_last_loaded_post_id: existingData?.length ? existingData[existingData.length - 1]?.id : undefined\r\n//                 creator_id: creatorId,\r\n//                 subscriber_feed_last_loaded_date: feedTypeRef.current.subscriber_min_time ? toAmiraDate(new Date(feedTypeRef.current.subscriber_min_time)) : undefined,\r\n//                 discovery_feed_last_loaded_date: feedTypeRef.current.disco_min_time ? toAmiraDate(new Date(feedTypeRef.current.disco_min_time)) : undefined,\r\n//                 creator_feed_last_loaded_date: feedTypeRef.current.creator_min_time ? toAmiraDate(new Date(feedTypeRef.current.creator_min_time)) : undefined\r\n//             };\r\n\r\n//             if (!isBookMarked) {\r\n//                 const resp = (await getFeed(String(pageSize), bod));\r\n\r\n//                 let curLastMin: number | undefined;\r\n//                 let output: number[] = [];\r\n\r\n//                 resp.posts.forEach((p) => {\r\n//                     const val = fromAmiraDate(p.created_at as string).valueOf();\r\n//                     output.push(val)\r\n//                     if (!curLastMin) {\r\n//                         curLastMin = val;\r\n//                     }\r\n//                     else {\r\n//                         curLastMin = Math.min(val, curLastMin);\r\n//                     }\r\n//                 });\r\n\r\n//                 feedTypeRef.current.response = resp.feed_type;\r\n\r\n//                 if (feedTypeRef.current.response === \"subscriber\")\r\n//                     feedTypeRef.current.subscriber_min_time = curLastMin;\r\n//                 else if (feedTypeRef.current.response === \"discovery\")\r\n//                     feedTypeRef.current.disco_min_time = curLastMin;\r\n//                 else if (feedTypeRef.current.response === \"creator\") {\r\n//                     feedTypeRef.current.creator_min_time = curLastMin;\r\n//                 }\r\n//                 console.log(\"FEED TYPE:\" + JSON.stringify(feedTypeRef.current));\r\n//                 newPosts = resp.posts;\r\n//             }\r\n//             else if (currentPage === 0)\r\n//                 newPosts = await getPosts(bookmarks.map((b) => b.post_id) || []);\r\n\r\n//             // newPosts.forEach((p) => {\r\n//             //     p.bookmarkId = bookmarks.find(b => b.post_id === p.id)?.id;\r\n//             // });\r\n\r\n//             if (newPosts.length)\r\n//                 console.log(`${newPosts[0].id}->${newPosts[newPosts.length - 1].id}`);\r\n\r\n//             output.push(...newPosts);\r\n//         } catch (ex) {\r\n//             if (errorHandler) {\r\n//                 errorHandler(\"Something went wrong.\")\r\n//             }\r\n//         }\r\n//         return output;\r\n\r\n\r\n//     } : undefined\r\n// }","import { NavigationProp } from \"@react-navigation/native\";\r\nimport { Api, Interface } from \"@tradingpost/common/api\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useWindowDimensions } from \"react-native\";\r\nimport { View, Text } from \"react-native\";\r\nimport { SizeParts } from './List'\r\nimport { PlusContentButton } from \"../components/PlusContentButton\";\r\nimport { PostList } from \"../components/PostList\";\r\nimport { spaceOnSide, postInnerHeight, PostView } from \"../components/PostView\";\r\nimport { DashTabScreenProps } from \"../navigation/pages\";\r\n\r\nexport const MultiTermFeedPart = (props: { searchText?: string[] }) => {\r\n    const { width: windowWidth, height: windowHeight } = useWindowDimensions();\r\n    const { searchText } = props\r\n    return <PostList\r\n        key={\"STATIC\"}\r\n        datasetKey={\"____________\"}\r\n\r\n        posts={async (allItems, page, sizeCache) => {\r\n            console.log(page)\r\n            const posts = (await Api.Post.extensions.multitermfeed({\r\n                page,\r\n                data: searchText ? {\r\n                    terms: searchText\r\n                } : undefined\r\n            }));\r\n\r\n            const newItems = [...(allItems || []), ...posts]\r\n            newItems.forEach((itm, index) => {\r\n                if (!sizeCache[index]) {\r\n                    sizeCache[index] = {\r\n                        index,\r\n                        offset: index ? sizeCache[index - 1].offset + sizeCache[index - 1].length : 0,\r\n                        length: postInnerHeight(itm, Math.min(windowWidth, 680) - spaceOnSide)\r\n                    }\r\n                }\r\n            })\r\n            return newItems;\r\n        }}\r\n    />\r\n}\r\n/*\r\nexport const CreateMultiTermQuery = (searchTerms: string | string[]) => {\r\n    if (typeof searchTerms === 'string' ) searchTerms = [searchTerms];\r\n    let multiMatchQueryPart= [];\r\n    for (let d of searchTerms) {\r\n        const queryPart = {\r\n            \"multi_match\": {\r\n                \"fields\": [\"content.body\", \"content.title\"],\r\n                \"query\": `${d}`,\r\n                \"analyzer\": \"synonym_analyzer\",\r\n                \"boost\": 1\r\n            }\r\n        }\r\n        multiMatchQueryPart.push(queryPart)\r\n    }\r\n    let query ={\"bool\": {\r\n        \"should\": [\r\n        {\r\n            \"function_score\": {\r\n                \"query\": { \r\n                \"bool\": {\r\n                    \"must\": [\r\n                        {\r\n                        \"bool\": {\r\n                            \"should\": `${multiMatchQueryPart}`,\r\n                                \"minimum_should_match\": 1,\r\n                                \"boost\": 1\r\n                            }\r\n                            }\r\n                        ,\r\n                        {\r\n                            \"match\": {\r\n                            \"postType\": \"youtube\"\r\n                        }}\r\n                        ]\r\n                }\r\n                },\r\n                \"functions\": [\r\n                    {\r\n                    \"exp\": {\r\n                        \"platformCreatedAt\": {\r\n                        \"origin\": \"now\",\r\n                        \"scale\": \"7d\"\r\n                        }\r\n                    },\r\n                    \"weight\": 1.2\r\n                    }\r\n                ],\r\n                \"boost_mode\": \"replace\"\r\n            }\r\n        },\r\n        {\r\n            \"function_score\": {\r\n                \"query\": { \r\n                \"bool\": {\r\n                    \"must\": [\r\n                        {\r\n                        \"bool\": {\r\n                            \"should\": `${multiMatchQueryPart}`,\r\n                                \"minimum_should_match\": 1,\r\n                                \"boost\": 1\r\n                            }\r\n                            }\r\n                        ,\r\n                        {\r\n                            \"match\": {\r\n                            \"postType\": \"tweet\"\r\n                        }}\r\n                        ]\r\n                }},\r\n                \"functions\": [\r\n                    {\r\n                    \"exp\": {\r\n                        \"platformCreatedAt\": {\r\n                        \"origin\": \"now\",\r\n                        \"scale\": \"12h\"\r\n                        }\r\n                    },\r\n                    \"weight\": 1\r\n                    }\r\n                ],\r\n                \"boost_mode\": \"replace\"\r\n            }\r\n        },\r\n        {\r\n            \"function_score\": {\r\n                \"query\": { \r\n                \"bool\": {\r\n                    \"must\": [\r\n                        {\r\n                        \"bool\": {\r\n                            \"should\": `${multiMatchQueryPart}`,\r\n                                \"minimum_should_match\": 1,\r\n                                \"boost\": 1\r\n                            }\r\n                            }\r\n                        ,\r\n                        {\r\n                            \"match\": {\r\n                            \"postType\": \"substack\"\r\n                        }}\r\n                        ]\r\n                }},\r\n                \"functions\": [\r\n                    {\r\n                    \"exp\": {\r\n                        \"platformCreatedAt\": {\r\n                        \"origin\": \"now\",\r\n                        \"scale\": \"7d\"\r\n                        }\r\n                    },\r\n                    \"weight\": 1.2\r\n                    }\r\n                ],\r\n                \"boost_mode\": \"replace\"\r\n            }\r\n        },\r\n        {\r\n            \"function_score\": {\r\n                \"query\": { \r\n                \"bool\": {\r\n                    \"must\": [\r\n                        {\r\n                        \"bool\": {\r\n                            \"should\": `${multiMatchQueryPart}`,\r\n                                \"minimum_should_match\": 1,\r\n                                \"boost\": 1\r\n                            }\r\n                            }\r\n                        ,\r\n                        {\r\n                            \"match\": {\r\n                            \"postType\": \"spotify\"\r\n                        }}\r\n                        ]\r\n                }},\r\n                \"functions\": [\r\n                    {\r\n                    \"exp\": {\r\n                        \"platformCreatedAt\": {\r\n                        \"origin\": \"now\",\r\n                        \"scale\": \"7d\"\r\n                        }\r\n                    },\r\n                    \"weight\": 1.2\r\n                    }\r\n                ],\r\n                \"boost_mode\": \"replace\"\r\n            }\r\n        }\r\n        ],\r\n        \"minimum_should_match\": 1,\r\n        \"boost\": 1\r\n    }\r\n    }\r\n    return query;\r\n    \r\n} \r\n*/","import React, { PropsWithChildren, useEffect, useRef, useState, Component } from \"react\"\r\nimport { NavigationProp, useNavigation } from \"@react-navigation/native\"\r\nimport { Avatar, Icon } from \"@ui-kitten/components\"\r\nimport { View, Text, Pressable, ScrollView, useWindowDimensions, Animated, FlatList, NativeSyntheticEvent, NativeScrollEvent } from \"react-native\"\r\nimport { ElevatedSection, Section, Subsection } from \"./Section\"\r\nimport { NoteEditor, SecPressable } from \"../screens/WatchlistViewerScreen\"\r\nimport { fonts, sizes } from \"../style\"\r\nimport { AppColors } from \"../constants/Colors\"\r\nimport { toDollarsAndCents } from \"../utils/misc\"\r\n\r\nexport const WatchlistItemRenderItem = (props: {item: any, bySymbol: any, byId: any, hideEmptyNote: boolean, setShownMap: any, shownMap: any, watchlist: any}) => {\r\n    const symbol = props.item.item.symbol;\r\n    const secId = props.bySymbol[symbol] ? props.bySymbol[symbol].id : 0;\r\n    const intradayChange = props.item.item.price ? props.item.item.price.price - props.item.item.price.open : 0\r\n    //const hideEmptyNote = watchlist?.user[0].id !== appUser?.id\r\n    return (\r\n        <ElevatedSection title=\"\" style={{flex: 1, marginBottom: sizes.rem1_5 / 2, marginHorizontal: sizes.rem1_5 / 4, paddingHorizontal: sizes.rem0_5, paddingVertical: sizes.rem0_5}}>\r\n            <View style={{flex: 1, flexDirection: 'row', justifyContent: 'center'}}>\r\n                \r\n                <SecPressable securityId={secId}>                                        \r\n                    <Avatar\r\n                        style={{borderWidth: 1, borderColor: '#ccc'}}\r\n                        resizeMode={'contain'}\r\n                        size=\"medium\"\r\n                        shape=\"rounded\"\r\n                        source={\r\n                            (() => {\r\n                                let output: { uri: string } | undefined;\r\n                                \r\n                                output = props.bySymbol[symbol] ? { uri: props.bySymbol[symbol].logo_url  } : undefined\r\n                                return output;\r\n                            })()}\r\n                        />\r\n                </SecPressable>\r\n                <View style={{flex: 1, alignItems: 'center'}}>\r\n                    <View style={{flex: 1, flexDirection: 'row', alignItems: 'center'}}>\r\n                        <Text style={{ fontWeight: '900', color: '#454545'}}>\r\n                                    {props.byId[secId] ? (props.byId[secId].symbol === 'USD:CUR' ? 'Cash' : props.byId[secId].symbol) : ''}\r\n                        </Text>\r\n                        {/*<Pressable onPress={() => {\r\n                            if (props.item.item.note || !props.hideEmptyNote) {\r\n                                props.setShownMap({\r\n                                    ...props.shownMap,\r\n                                    [props.item.index]: !props.shownMap[props.item.index]\r\n                                })\r\n                            }\r\n                            }}\r\n                            style={{marginLeft: 10, justifyContent: 'flex-end'}}\r\n                            >\r\n                            <Icon style={{ opacity: (props.item.item.note || !props.hideEmptyNote) ? (props.item.item.note ? 1 : 0.5) : 0, height: 16 , width: 22 , }} \r\n                                name={!props.shownMap[props.item.index] ? \"file-text-outline\" : \"close-outline\"}\r\n                                fill={AppColors.primary}\r\n                                />\r\n                        </Pressable>\r\n                        */}\r\n                    </View>\r\n                    <View style={{flex: 1, flexDirection: 'row', alignItems: 'center'}}>\r\n                        <Text style={[{ color: '#606060', fontSize: fonts.xSmall, marginRight: 4}, intradayChange >= 0 ? (!intradayChange ? {color: 'black'} : {color: 'green'}) : {color: 'red'}]}>\r\n                            {`${toDollarsAndCents(intradayChange)}`}\r\n                        </Text>\r\n                        <Text style={{ color: '#606060', fontSize: fonts.xSmall}}>\r\n                            {`${toDollarsAndCents(props.item.item.price?.price)}`}\r\n                        </Text>\r\n\r\n\r\n                    </View>\r\n\r\n                </View>\r\n                \r\n            \r\n            </View>\r\n            <View>\r\n                {props.shownMap[props.item.index] && props.watchlist ?\r\n                    <NoteEditor note={props.item.item.note} \r\n                                onChangeNote={(note) => {\r\n                                    props.item.item.note = note;\r\n                                }} \r\n                                canEdit={!props.hideEmptyNote} \r\n                                ticker={props.item.item.symbol} \r\n                                watchlistId={props.watchlist.id} /> \r\n                                : null\r\n                                }\r\n            </View>\r\n        </ElevatedSection>\r\n    )\r\n}","import { NavigationProp, useFocusEffect, useNavigation } from \"@react-navigation/native\"\r\nimport { Api, Interface } from \"@tradingpost/common/api\"\r\nimport WatchlistApi from \"@tradingpost/common/api/entities/apis/WatchlistApi\"\r\nimport { IWatchlistGetExt } from \"@tradingpost/common/api/entities/extensions/Watchlist\"\r\nimport { ISecurityList } from \"@tradingpost/common/api/entities/interfaces\"\r\nimport { Avatar, Icon } from \"@ui-kitten/components\"\r\nimport React, { PropsWithChildren, useEffect, useRef, useState, Component, useCallback } from \"react\"\r\nimport { Header, Subheader } from \"../components/Headers\";\r\nimport { View, Text, Pressable, ScrollView, useWindowDimensions, Animated, FlatList, NativeSyntheticEvent, NativeScrollEvent } from \"react-native\"\r\nimport { useToast } from \"react-native-toast-notifications\"\r\nimport { useAppUser } from \"../Authentication\"\r\nimport { DeleteButton, EditButton, FavButton } from \"../components/AddButton\"\r\nimport { ProfileBar } from \"../components/ProfileBar\"\r\nimport { ElevatedSection, Section, Subsection } from \"../components/Section\"\r\nimport { ITableColumn, Table } from \"../components/Table\"\r\nimport { TextField } from \"../components/TextField\"\r\nimport { AppColors } from \"../constants/Colors\"\r\nimport { elevated, flex, fonts, paddView, paddViewWhite, row, sizes } from \"../style\"\r\nimport { useSecuritiesList } from '../SecurityList'\r\nimport { toDollarsAndCents, toNumber1, toPercent, toPercent1, toPercent2 } from \"../utils/misc\"\r\nimport { MultiTermFeedPart } from \"../components/MultiTermFeed\"\r\nimport { List } from \"../components/List\"\r\nimport { WatchlistItemRenderItem } from \"../components/WatchlistItemRenderItem\"\r\nimport { PrimaryChip } from \"../components/PrimaryChip\"\r\nimport { sleep } from \"@tradingpost/common/utils/sleep\"\r\n\r\n\r\nexport const useNoteField = (hideEmptyNote?: boolean) => {\r\n    const [shownMap, setShownMap] = useState<Record<string, boolean>>({})\r\n    return {\r\n        shownMap,\r\n        column: {\r\n            field: (info: { index: number, item: { note?: string } }) => {\r\n                return <Pressable onPress={() => {\r\n                    if (info.item.note || !hideEmptyNote) {\r\n                        setShownMap({\r\n                            ...shownMap,\r\n                            [info.index]: !shownMap[info.index]\r\n                        })\r\n                    }\r\n                }}>\r\n                    <Icon style={{ opacity: (info.item.note || !hideEmptyNote) ? (info.item.note ? 1 : 0.25) : 0, height: 16, width: 22 }} name={!shownMap[info.index] ? \"file-text-outline\" : \"close-outline\"}\r\n                        fill={AppColors.primary}\r\n                    /></Pressable>\r\n            }, alias: \" \", width: 32\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport const SecPressable = (props: PropsWithChildren<{ securityId: number }>) => {\r\n    const nav = useNavigation<NavigationProp<AllPages>>();\r\n    return <Pressable onPress={() => {\r\n        if (props.securityId !== -1) {\r\n        nav.navigate(\"Company\", {\r\n            securityId: props.securityId\r\n        })\r\n        }\r\n    }}>{props.children}</Pressable>\r\n}\r\n\r\nexport const useMakeSecurityFields = (getIdValue: (itm: any) => string | number) => {\r\n    const { securities: { bySymbol, byId } } = useSecuritiesList();\r\n    return [{\r\n        field: (a: any) => {\r\n            const value = getIdValue(a.item);\r\n            return (\r\n                <View style={{ overflow: 'visible' }}>\r\n                    <SecPressable securityId={\r\n                        (() => {\r\n                            if (typeof value === \"string\")\r\n                                return bySymbol[value]?.id || -1\r\n                            else\r\n                                return byId[value]?.id || -1\r\n                        })()\r\n                    }>\r\n                        <Avatar style={{ marginRight: sizes.rem0_5 }}\r\n                                resizeMode={'contain'}\r\n                                source={\r\n                                    (() => {\r\n                                        let output: { uri: string } | undefined;\r\n                                        if (typeof value === \"string\")\r\n                                            output = bySymbol[value] ? { uri: bySymbol[value].logo_url } : undefined\r\n                                        else\r\n                                            output = byId[value] ? { uri: byId[value].logo_url  } : undefined\r\n                                        return output;\r\n                                    })()}\r\n                                size=\"tiny\"\r\n                        />\r\n\r\n                    </SecPressable>\r\n                </View>\r\n            )\r\n        },\r\n        headerStyle: {\r\n            width: sizes.rem10 / 2,\r\n            //marginRight: sizes.rem0_5,\r\n            overflow: \"visible\" as \"visible\"\r\n        },\r\n        alias: \"Ticker\",\r\n        align: \"left\" as \"left\",\r\n        width: sizes.rem2\r\n    },\r\n    {\r\n        alias: \"\",\r\n        width: sizes.rem6 / 2,\r\n        align: \"left\" as \"left\",\r\n        style: { lineHeight: sizes.rem1_5 },\r\n        headerStyle: {\r\n            width: 0,\r\n        },\r\n        stringify: (value: any, key: any, item: any) => {\r\n            const v = getIdValue(item);\r\n            if (typeof v === \"string\")\r\n                return bySymbol[v]?.symbol === 'USD:CUR' ? 'Cash' : bySymbol[v]?.symbol || \"\"\r\n            else\r\n                return byId[v]?.symbol === 'USD:CUR' ? 'Cash' : byId[v]?.symbol || \"\"\r\n        }\r\n    }\r\n    ]\r\n}\r\n\r\nexport const useWatchlistItemColumns = (hideEmptyNote?: boolean) => {\r\n\r\n    const [iconField, secField] = useMakeSecurityFields((item) => item.symbol);\r\n    const { column, shownMap } = useNoteField(hideEmptyNote);\r\n    return {\r\n        shownMap,\r\n        columns: [\r\n            iconField,\r\n            secField,\r\n            {\r\n                alias: \"Price\",\r\n                field: (a) => {\r\n                    const change = a.item.price?.price || a.item.price?.open ? (a.item.price?.price - a.item.price?.open) / a.item.price?.open : 0\r\n                    return (\r\n                        <View style={{ justifyContent: 'center', flexDirection: 'row', flex: 1 }}>\r\n                            <Text style={[change ? change >= 0 ? { color: 'green' } : { color: 'red' } : {}, { marginRight: sizes.rem0_5 }]}>{`(${toPercent2(change)})`}</Text>\r\n                            <Text>{toDollarsAndCents(a.item.price?.price)}</Text>\r\n                        </View>\r\n                    )\r\n                },\r\n                //align: 'left' as 'left',\r\n                //width: sizes.rem6\r\n                /*\r\n                stringify: (a, b, c) => {\r\n                    if (c.price?.price) {\r\n                        return toDollarsAndCents(c.price.price);\r\n                    }\r\n                    else\r\n                        return \"-\"\r\n                }\r\n                */\r\n            }/*,\r\n            {\r\n                alias: \"Date Added\",\r\n                stringify: (a, b, c) => {\r\n                    if (c.price?.time) {\r\n                        return (new Date(c.date_added)).toLocaleDateString() || \"-\"\r\n                    }\r\n                    else {\r\n                        return \"-\";\r\n                    }\r\n                }\r\n            }*/,\r\n            column\r\n            //        { field: \"symbol\", align: \"left\", style: { lineHeight: sizes.rem1_5 } },\r\n        ] as ITableColumn<IWatchlistGetExt[\"items\"][number]>[]\r\n    }\r\n}\r\n\r\n\r\nexport const WatchlistViewerScreen = (props: TabScreenProps<{ watchlistId: number }>) => {\r\n    const [watchlist, setWatchlist] = useState<IWatchlistGetExt>()\r\n    const watchlistId = props.route?.params?.watchlistId;\r\n    const [isSaved, setIsFav] = useState(false)\r\n    const [watchlistTickers, setWatchlistTickers] = useState<string[]>();\r\n    const { loginState } = useAppUser();\r\n    const appUser = loginState?.appUser;\r\n    const translateHeaderY = useRef(new Animated.Value(0)).current;\r\n    const scrollRef = useRef<FlatList>(null);\r\n\r\n    const toast = useToast();\r\n    useFocusEffect(useCallback(() => {\r\n        (async () => {\r\n            try {\r\n                if (watchlistId) {\r\n                    const w = await WatchlistApi.get(watchlistId)\r\n                    setIsFav(w.is_saved)\r\n                    setWatchlist(w as IWatchlistGetExt);\r\n                }\r\n                if (watchlist) {\r\n                    setWatchlistTickers(watchlist.items.map(a => `$${a.symbol}`))\r\n                }\r\n            } catch (err) {\r\n                console.error(err);\r\n            }\r\n        })()\r\n    }, []))\r\n    useFocusEffect(useCallback(() => {\r\n        (async () => {\r\n            try {\r\n                if (watchlist) {\r\n                    setWatchlistTickers(watchlist.items.map(a => `$${a.symbol}`))\r\n                }\r\n            } catch (err) {\r\n                console.error(err);\r\n            }\r\n        })()\r\n    }, [watchlist]))\r\n\r\n    useFocusEffect(useCallback(() => {\r\n        (async () => {\r\n            try {\r\n                if (watchlistId) {\r\n                    const w = await WatchlistApi.get(watchlistId)\r\n                    setIsFav(w.is_saved)\r\n                    setWatchlist(w as IWatchlistGetExt);\r\n                }\r\n                if (watchlist) {\r\n                    setWatchlistTickers(watchlist.items.map(a => `$${a.symbol}`))\r\n                }\r\n            } catch (err) {\r\n                console.error(err);\r\n            }\r\n        })()\r\n    }, [watchlistId]))\r\n\r\n    const { securities: { bySymbol, byId } } = useSecuritiesList();\r\n    const [shownMap, setShownMap] = useState<Record<string, boolean>>({})\r\n    return <View style={[flex]}>\r\n        <Animated.FlatList\r\n            data={[\r\n                <View\r\n                    style={{\r\n                        paddingTop: sizes.rem0_5, backgroundColor: AppColors.background,\r\n                        alignItems: \"stretch\", width: \"100%\"\r\n                    }}\r\n                >\r\n                    <View style={[\r\n                        //collapsed ? {display: 'none'} : {display: 'flex'},\r\n                        { paddingHorizontal: sizes.rem1, backgroundColor: AppColors.background }]}>\r\n                        <Header text={watchlist?.name || \"\"} />\r\n                        <ElevatedSection title={\"\"}>\r\n                            <View style={{flex: 1, flexDirection: 'row', alignContent: 'center'}}>\r\n                                <ProfileBar style={{flex: 1}} user={watchlist?.user[0]} />\r\n                                <View style={{flex: 1, alignContent: 'center', justifyContent: 'center'}}>\r\n                                    <PrimaryChip style={{width: '50%'}} isAlt key={watchlist?.id} label={watchlist?.type ? watchlist.type.slice(0,1).toUpperCase() + watchlist.type.slice(1) : ''} />\r\n                                </View>\r\n                                {watchlist?.user[0].id === appUser?.id ? \r\n                                    <EditButton\r\n                                        height={24}\r\n                                        width={24} \r\n                                        onPress={() => {\r\n                                            props.navigation.navigate(\"WatchlistEditor\", {\r\n                                                watchlistId: watchlistId\r\n                                            })\r\n                                        }} /> : \r\n                                    <FavButton\r\n                                        height={24}\r\n                                        width={24}\r\n                                        isSelected={isSaved}\r\n                                        onPress={() => {\r\n                                            try {\r\n                                                if (watchlistId) {\r\n                                                    Api.Watchlist.extensions.saveWatchlist({\r\n                                                        id: watchlistId,\r\n                                                        is_saved: !isSaved\r\n                                                    })\r\n                                                    setIsFav(f => !f);\r\n                                                    toast.show(\"Watchlist Added\")\r\n                                                }\r\n                                            } catch (err) {\r\n                                                console.error(err);\r\n                                            }\r\n                                        }}\r\n                                    />}\r\n                            </View>\r\n                            \r\n                            <Text style={[{ marginVertical: sizes.rem0_5 }, !watchlist?.note ? { color: \"#ccc\", fontStyle: \"italic\" } : undefined]}>\r\n                                {watchlist?.note || \"No Notes\"}\r\n                            </Text>\r\n                            \r\n                        </ElevatedSection>\r\n                    </View>\r\n                    <View style={[\r\n                        //collapsed ? {display: 'none'} : {display: 'flex'},\r\n                        { paddingHorizontal: sizes.rem1, backgroundColor: AppColors.background }]}>\r\n                        <Section title=\"Stocks\"\r\n                                 style={{backgroundColor: AppColors.background}}>\r\n                                 \r\n                            <List   \r\n                                listKey={`watchlist_id}`}\r\n                                datasetKey={`watchlist_id_${watchlist?.items.length}`}\r\n                                data={watchlist?.items}\r\n                                loadingMessage={\" \"}\r\n                                noDataMessage={\" \"}\r\n                                loadingItem={undefined}\r\n                                numColumns={2}\r\n                                renderItem={(item)=> {\r\n                                    const symbol = item.item.symbol;\r\n                                    const secId = bySymbol[symbol] ? bySymbol[symbol].id : 0;\r\n                                    const intradayChange = item.item.price ? item.item.price.price - item.item.price.open : 0\r\n                                    const hideEmptyNote = watchlist?.user[0].id !== appUser?.id\r\n                                    return (\r\n                                        <WatchlistItemRenderItem \r\n                                            item={item}\r\n                                            bySymbol={bySymbol}\r\n                                            byId={byId}\r\n                                            hideEmptyNote={hideEmptyNote}\r\n                                            setShownMap={setShownMap}\r\n                                            shownMap={shownMap}\r\n                                            watchlist={watchlist}/>\r\n                                    )\r\n                                }}\r\n                                />\r\n                        </Section>\r\n                    </View>\r\n                    <View style={[{ paddingHorizontal: sizes.rem1, backgroundColor: AppColors.background }]}>\r\n                        <Header text=\"Watchlist Posts\" />\r\n                    </View>\r\n                </View>,\r\n                <View style={[{ paddingHorizontal: 0 }]}\r\n                >\r\n                    {watchlistTickers && <MultiTermFeedPart key={watchlistTickers ? watchlistTickers.join() : \"___\"} searchText={watchlistTickers} />}\r\n                </View>\r\n            ]}\r\n            renderItem={(info) => {\r\n                return info.item;\r\n            }}\r\n            ref={scrollRef} contentContainerStyle={[{ paddingTop: 0 }]} nestedScrollEnabled\r\n            onScroll={Animated.event<NativeSyntheticEvent<NativeScrollEvent>>([\r\n                { nativeEvent: { contentOffset: { y: translateHeaderY } } }\r\n            ], { useNativeDriver: true })}>\r\n        </Animated.FlatList>\r\n    </View>\r\n}\r\n\r\nexport const NoteEditor = (props: { canEdit: boolean, note: string | undefined, ticker: string, watchlistId: number, onChangeNote: (note: string) => void }) => {\r\n    const [isEdit, setIsEdit] = useState(!props.note && props.canEdit);\r\n    const [note, setNote] = useState(props.note)\r\n\r\n    return (!props.canEdit || (!isEdit && note)) ?\r\n        <View style={{ flexDirection: \"row\", alignItems: \"center\" }}><Text><Text style={{ fontWeight: \"bold\" }}>Note:</Text>{note}</Text>\r\n            {props.canEdit && <EditButton\r\n                style={{ marginLeft: \"auto\" }}\r\n                height={24} width={24} onPress={() => {\r\n                    setIsEdit(true);\r\n                }}\r\n            />}\r\n\r\n        </View> :\r\n        <View style={[row, { alignItems: \"center\" }]}><TextField placeholder=\"Add a note\" style={flex} value={note} onChangeText={(t) => {\r\n            setNote(t);\r\n        }} /><Pressable onPress={() => {\r\n            props.onChangeNote(note || \"\");\r\n            setIsEdit(false)\r\n        }\r\n        }><Icon name=\"checkmark-outline\" fill={AppColors.primary} style={{\r\n            height: 24,\r\n            width: 24\r\n        }} />\r\n            </Pressable>\r\n        </View>\r\n\r\n}\r\n/*\r\nclass WrappedView extends Component<finishedLoadingProp> {\r\n    finishedLoading: boolean;\r\n    constructor(props: finishedLoadingProp) {\r\n        super(props)\r\n        this.finishedLoading = props.finishedLoading\r\n    }\r\n    shouldComponentUpdate(nextProps: Readonly<ViewProps>, nextState: Readonly<{}>, nextContext: any): boolean {\r\n        if (this.finishedLoading){\r\n            return false;\r\n        }\r\n        else {\r\n            return true\r\n        }\r\n    }\r\n    render(): React.ReactNode {\r\n        let {style, children} = this.props\r\n        return (\r\n            <View style={style}>\r\n                {children}\r\n            </View>\r\n        )\r\n    }\r\n}\r\nexport interface finishedLoadingProp extends ViewProps {\r\n    finishedLoading: boolean\r\n}\r\n\r\n\r\nclass WrappedAnimatedView extends Component<finishedLoadingProp> {\r\n    finishedLoading: boolean;\r\n    constructor(props: finishedLoadingProp) {\r\n        super(props)\r\n        this.finishedLoading = props.finishedLoading\r\n    }\r\n    shouldComponentUpdate(nextProps: Readonly<ViewProps>, nextState: Readonly<{}>, nextContext: any): boolean {\r\n        if (this.finishedLoading){\r\n            return false;\r\n        }\r\n        else {\r\n            return true\r\n        }\r\n    }\r\n    render(): React.ReactNode {\r\n        let {style, children} = this.props\r\n        return (\r\n            <Animated.View style={style}>\r\n                {children}\r\n            </Animated.View>\r\n        )\r\n    }\r\n}\r\n*/","import { useFocusEffect, useNavigation } from \"@react-navigation/native\"\r\nimport { Interface } from \"@tradingpost/common/api\"\r\nimport { IWatchlistList } from \"@tradingpost/common/api/entities/interfaces\"\r\nimport React, { useCallback, useEffect, useState } from \"react\"\r\nimport { Pressable, Text, View } from \"react-native\"\r\nimport { AppColors } from \"../constants/Colors\"\r\nimport { PlusIcon } from \"../images\"\r\nimport { useNoteField } from \"../screens/WatchlistViewerScreen\"\r\nimport { fonts, row, sizes } from \"../style\"\r\nimport { AddButton } from \"./AddButton\"\r\nimport { List } from \"./List\"\r\nimport { ElevatedSection, Section } from \"./Section\"\r\nimport { ITableColumn, Table } from \"./Table\"\r\n\r\n\r\nexport function WatchlistSection(props: { title: string, watchlists: Interface.IWatchlistList[] | undefined, showAddButton?: boolean, shared?: boolean, hideNoteOnEmpty?: boolean, datasetKey?: string }) {\r\n    const nav = useNavigation<any>();\r\n    const [focus, setFocus] = useState(false);\r\n    useFocusEffect(useCallback(()=> {\r\n        setFocus((f) => !f)\r\n    },[]))\r\n    const fields: ITableColumn<IWatchlistList>[] = !props.shared ?\r\n        [{ field: \"name\", alias: \"Name\", align: \"left\" },\r\n        { field: \"item_count\", alias: \"Items\" },\r\n        { field: \"saved_by_count\", alias: \"Saves\" },\r\n        { field: \"type\", alias: \"Type\" }] :\r\n\r\n        [{ field: \"name\", alias: \"Name\", align: \"left\" },\r\n        {field: \"user\", align: \"left\", alias: \"Analyst\", stringify: (user: IWatchlistList[\"user\"], key, item) => {return user[0].handle}}]\r\n    const { column, shownMap } = useNoteField(props.hideNoteOnEmpty);\r\n    return <Section title={props.title} style={{backgroundColor: AppColors.background}} button={props.showAddButton ? (p) => <AddButton height={p.height} width={p.width} onPress={() => {\r\n        nav.navigate(\"WatchlistEditor\")\r\n    }} /> : undefined}>\r\n        <List \r\n            datasetKey={`${props.datasetKey ? props.datasetKey : props.watchlists?.length}`}\r\n            listKey={props.title}\r\n            loadingMessage={\" \"}\r\n            noDataMessage={\" \"}\r\n            loadingItem={undefined}\r\n            numColumns={1}\r\n            data={props.watchlists}\r\n            ListHeaderComponent={() => {\r\n                return <View key={\"table_header\"} style={{marginHorizontal: sizes.rem1_5 / 4, paddingHorizontal: sizes.rem0_5, marginBottom: sizes.rem1 / 2}}>\r\n                <View style={[row]}>\r\n                    {fields.map((c, i) => {\r\n                        return <Text key={`header_${i}`} numberOfLines={1} style={{flex: 1, textAlign: 'center', fontSize: fonts.small, color: '#9D9D9D'}} >{c.alias}</Text>\r\n                    })}\r\n                </View>\r\n            </View>\r\n            }}\r\n            renderItem={(item)=> {\r\n                return (\r\n                    <ElevatedSection title=\"\" style={{flex: 1, marginBottom: sizes.rem1_5 / 2, marginHorizontal: sizes.rem1_5 / 4, paddingHorizontal: sizes.rem0_5, paddingVertical: sizes.rem0_5}}>\r\n                        <Pressable\r\n                            onPress={() => {\r\n                                nav.navigate(\"WatchlistViewer\", {\r\n                                    watchlistId: item.item.id\r\n                                })\r\n                        }}>\r\n                            <View style={{flex: 1, flexDirection: 'row', justifyContent: 'space-around'}}>\r\n                                {\r\n                                fields.map((c, i) => { \r\n                                    return (\r\n                                        <Text style={{flex: 1, textAlign: 'center'}}> \r\n                                            {c.field ? \r\n                                                (c.field === 'user' ? item.item[c.field][0].handle : \r\n                                                    (c.field === 'type' ? item.item[c.field].slice(0,1).toUpperCase() + item.item[c.field].slice(1) : item.item[c.field])) : \r\n                                                ''} \r\n                                        </Text>\r\n                                        )\r\n                                        }\r\n                                    )\r\n                                }\r\n                            </View>\r\n                        </Pressable>\r\n                    </ElevatedSection>\r\n\r\n                )\r\n            }}\r\n        \r\n        />\r\n        {/*<Table\r\n            listKey={props.title}\r\n            datasetKey={`${focus}`}\r\n            noDataMessage={props.shared ? \"No Shared Watchlists\" : \"No Watchlists\"}\r\n            columns={[\r\n                ...fields,\r\n                column\r\n            ]}\r\n            rowPressed={(item, idx) => {\r\n                nav.navigate(\"WatchlistViewer\", {\r\n                    watchlistId: item.id\r\n                })\r\n            }}\r\n            renderAuxItem={(info) => shownMap[info.index] ? <Text><Text style={{ fontWeight: \"bold\" }}>Details: </Text>{info.item.note}</Text> : null}\r\n            data={props.watchlists}\r\n        />*/}\r\n    </Section>\r\n}\r\n","import React from \"react\"\r\nimport { Pressable } from \"react-native\"\r\nimport { shadow } from \"../style\"\r\nimport { IconifyIcon } from \"./IconfiyIcon\"\r\nimport plusCircle from '../assets/@iconify/plus-circle'\r\nimport { AppColors } from \"../constants/Colors\"\r\n\r\n/**\r\n * This component assumes it will be placed in the bottom right corner of its parent.\r\n * @param props \r\n * @returns \r\n */\r\nexport const PlusContentButton = (props: {\r\n    onPress: () => void\r\n}) => {\r\n\r\n    return <Pressable style={[shadow, {\r\n        position: \"absolute\",\r\n        bottom: 10,\r\n        right: 10,\r\n        backgroundColor: \"blue\",\r\n        height: 62, aspectRatio: 1,\r\n        borderRadius: 34,\r\n        overflow: \"hidden\"\r\n    }]} onPress={props.onPress}>\r\n        <IconifyIcon icon={plusCircle} currentColor=\"green\" style={{ height: 64 * 1.2, width: 64 * 1.2, aspectRatio: 1, margin: 0, padding: 0, backgroundColor: \"white\" }} svgProps={{\r\n            style: {\r\n                height: 64 * 1.2,\r\n                width: 64 * 1.2,\r\n                marginTop: \"-10%\",\r\n                marginLeft: \"-10%\"\r\n            }\r\n        }} />\r\n    </Pressable>\r\n}","import {NavigationProp, useNavigation} from \"@react-navigation/native\";\r\nimport {Api, Interface} from \"@tradingpost/common/api\";\r\nimport React, {useEffect, useState} from \"react\";\r\nimport {useWindowDimensions} from \"react-native\";\r\nimport {View, Text} from \"react-native\";\r\nimport {PlusContentButton} from \"../components/PlusContentButton\";\r\nimport {PostList} from \"../components/PostList\";\r\nimport {spaceOnSide, postInnerHeight, PostView} from \"../components/PostView\";\r\nimport {DashTabScreenProps} from \"../navigation/pages\";\r\n\r\nexport const FeedScreen = (props: DashTabScreenProps<'Feed'>) => {\r\n    const [searchText, setSearchText] = useState(\"\")\r\n    const nav = useNavigation();\r\n\r\n    //useEffect(()=>{\r\n    //props.navigation.setOptions({\r\n    //headerRight:\r\n    //  })\r\n    // return <Pressable onPress={() => {\r\n    //     navigation.setParams({\r\n    //       bookmarkedOnly: true\r\n    //     })\r\n    //   }}>\r\n    //     <IconButton iconSource={BookmarkIcons.inactive} style={{ height: 24, width: 24 }} />\r\n    //   </Pressable>\r\n    //},[])\r\n\r\n    return (\r\n        <View style={{flex: 1, backgroundColor: \"#F7f8f8\"}}>\r\n            <FeedPart bookmarkedOnly={props.route.params.bookmarkedOnly === \"true\"} searchText={searchText}/>\r\n            <PlusContentButton onPress={() => {\r\n                nav.navigate(\"PostEditor\")\r\n            }}/>\r\n        </View>\r\n    );\r\n}\r\n\r\n\r\nexport const FeedPart = (props: {\r\n    bookmarkedOnly?: boolean,\r\n    searchText?: string,\r\n    userId?: string\r\n}) => {\r\n    const {width: windowWidth} = useWindowDimensions();\r\n    const {searchText, bookmarkedOnly, userId} = props\r\n    return <PostList\r\n        key={bookmarkedOnly ? String(Date.now()) : \"STATIC\"}\r\n        datasetKey={searchText ? searchText : \"____________\"}\r\n        posts={async (allItems, page, sizeCache) => {\r\n            console.log(\"PAGE: \", page)\r\n            const posts = (await Api.Post.extensions.feed({\r\n                page,\r\n                bookmarkedOnly: bookmarkedOnly,\r\n                userId,\r\n                data: searchText ? {\r\n                    terms: (() => {\r\n                        if (searchText[0] === '$') {\r\n                            console.log('lowercasing')\r\n                            return searchText.toLowerCase()\r\n                        } else {\r\n                            return searchText\r\n                        }\r\n                    })()\r\n                } : undefined\r\n            }));\r\n\r\n            const newItems = [...(allItems || []), ...posts]\r\n            newItems.forEach((itm, index) => {\r\n                if (!sizeCache[index]) {\r\n                    sizeCache[index] = {\r\n                        index,\r\n                        offset: index ? sizeCache[index - 1].offset + sizeCache[index - 1].length : 0,\r\n                        length: postInnerHeight(itm,  Math.min(windowWidth, 680) - spaceOnSide)\r\n                    }\r\n                }\r\n            })\r\n            return newItems;\r\n        }}\r\n    />\r\n}","import React, { Component } from 'react'\r\nimport { InteractionManager } from 'react-native'\r\nimport PropTypes from 'prop-types'\r\nimport { Path } from 'react-native-svg'\r\nimport * as interpolate from 'd3-interpolate-path'\r\n\r\nclass AnimatedPath extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = { d: props.d }\r\n    }\r\n\r\n    componentDidUpdate(props) {\r\n        const { d: newD, animate } = this.props\r\n        const { d: oldD } = props\r\n\r\n        this.newD = newD\r\n\r\n        if (newD === oldD) {\r\n            return\r\n        }\r\n\r\n        if (!animate || newD === null || oldD === null) {\r\n            return\r\n        }\r\n\r\n        this.newD = newD\r\n        this.interpolator = interpolate.interpolatePath(oldD, newD)\r\n\r\n        this._animate()\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        cancelAnimationFrame(this.animation)\r\n        this._clearInteraction()\r\n    }\r\n\r\n    _animate(start) {\r\n        cancelAnimationFrame(this.animation)\r\n        this.animation = requestAnimationFrame((timestamp) => {\r\n            if (!start) {\r\n                this._clearInteraction()\r\n                this.handle = InteractionManager.createInteractionHandle()\r\n\r\n                start = timestamp\r\n            }\r\n\r\n            // Get the delta on how far long in our animation we are.\r\n            const delta = (timestamp - start) / this.props.animationDuration\r\n\r\n            // If we're above 1 then our animation should be complete.\r\n            if (delta > 1) {\r\n                // Just to be safe set our final value to the new graph path.\r\n                this.component.setNativeProps({ d: this.newD })\r\n                // Stop our animation loop.\r\n                this._clearInteraction()\r\n                return\r\n            }\r\n\r\n            const d = this.interpolator(delta)\r\n            this.component.setNativeProps({ d })\r\n            // console.log(this.interpolator)\r\n            // this.tween && console.log(this.tween.tween(delta))\r\n            // Tween the SVG path value according to what delta we're currently at.\r\n\r\n            // Update our state with the new tween value and then jump back into\r\n            // this loop.\r\n            this.setState(this.state, () => {\r\n                this._animate(start)\r\n            })\r\n        })\r\n    }\r\n\r\n    _clearInteraction() {\r\n        if (this.handle) {\r\n            InteractionManager.clearInteractionHandle(this.handle)\r\n            this.handle = null\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Path\r\n                ref={(ref) => (this.component = ref)}\r\n                {...this.props}\r\n                d={this.props.animate ? this.state.d : this.props.d}\r\n            />\r\n        )\r\n    }\r\n}\r\n\r\nAnimatedPath.propTypes = {\r\n    animate: PropTypes.bool,\r\n    animationDuration: PropTypes.number,\r\n    renderPlaceholder: PropTypes.func,\r\n    ...Path.propTypes,\r\n}\r\n\r\nAnimatedPath.defaultProps = {\r\n    animate: false,\r\n    animationDuration: 300,\r\n    renderPlaceholder: () => null,\r\n}\r\n\r\nexport default AnimatedPath\r\n","import * as array from 'd3-array'\r\nimport * as scale from 'd3-scale'\r\nimport * as shape from 'd3-shape'\r\nimport PropTypes from 'prop-types'\r\nimport React, { PureComponent } from 'react'\r\nimport { View } from 'react-native'\r\nimport Svg from 'react-native-svg'\r\nimport Path from '../animated-path'\r\n\r\nclass Chart extends PureComponent {\r\n    state = {\r\n        width: 0,\r\n        height: 0,\r\n    }\r\n\r\n    _onLayout(event) {\r\n        const {\r\n            nativeEvent: {\r\n                layout: { height, width },\r\n            },\r\n        } = event\r\n        this.setState({ height, width })\r\n    }\r\n\r\n    createPaths() {\r\n        throw 'Extending \"Chart\" requires you to override \"createPaths'\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            data,\r\n            xAccessor,\r\n            yAccessor,\r\n            yScale,\r\n            xScale,\r\n            style,\r\n            animate,\r\n            animationDuration,\r\n            numberOfTicks,\r\n            contentInset: { top = 0, bottom = 0, left = 0, right = 0 },\r\n            gridMax,\r\n            gridMin,\r\n            clampX,\r\n            clampY,\r\n            svg,\r\n            children,\r\n        } = this.props\r\n\r\n        const { width, height } = this.state\r\n\r\n        if (data.length === 0) {\r\n            return <View style={style} />\r\n        }\r\n\r\n        const mappedData = data.map((item, index) => ({\r\n            y: yAccessor({ item, index }),\r\n            x: xAccessor({ item, index }),\r\n        }))\r\n\r\n        const yValues = mappedData.map((item) => item.y)\r\n        const xValues = mappedData.map((item) => item.x)\r\n\r\n        const yExtent = array.extent([...yValues, gridMin, gridMax])\r\n        const xExtent = array.extent([...xValues])\r\n\r\n        const { yMin = yExtent[0], yMax = yExtent[1], xMin = xExtent[0], xMax = xExtent[1] } = this.props\r\n\r\n        //invert range to support svg coordinate system\r\n        const y = yScale()\r\n            .domain([yMin, yMax])\r\n            .range([height - bottom, top])\r\n            .clamp(clampY)\r\n\r\n        const x = xScale()\r\n            .domain([xMin, xMax])\r\n            .range([left, width - right])\r\n            .clamp(clampX)\r\n\r\n        const paths = this.createPaths({\r\n            data: mappedData,\r\n            x,\r\n            y,\r\n        })\r\n\r\n        const ticks = y.ticks(numberOfTicks)\r\n\r\n        const extraProps = {\r\n            x,\r\n            y,\r\n            data,\r\n            ticks,\r\n            width,\r\n            height,\r\n            ...paths,\r\n        }\r\n\r\n        return (\r\n            <View style={style}>\r\n                <View style={{ flex: 1 }} onLayout={(event) => this._onLayout(event)}>\r\n                    {height > 0 && width > 0 && (\r\n                        <Svg style={{ height, width }}>\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                            <Path\r\n                                fill={'none'}\r\n                                {...svg}\r\n                                d={paths.path}\r\n                                animate={animate}\r\n                                animationDuration={animationDuration}\r\n                            />\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && !child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                        </Svg>\r\n                    )}\r\n                </View>\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nChart.propTypes = {\r\n    data: PropTypes.oneOfType([\r\n        PropTypes.arrayOf(PropTypes.object),\r\n        PropTypes.arrayOf(PropTypes.number),\r\n        PropTypes.arrayOf(PropTypes.array),\r\n    ]).isRequired,\r\n    svg: PropTypes.object,\r\n\r\n    style: PropTypes.any,\r\n\r\n    animate: PropTypes.bool,\r\n    animationDuration: PropTypes.number,\r\n\r\n    curve: PropTypes.func,\r\n    contentInset: PropTypes.shape({\r\n        top: PropTypes.number,\r\n        left: PropTypes.number,\r\n        right: PropTypes.number,\r\n        bottom: PropTypes.number,\r\n    }),\r\n    numberOfTicks: PropTypes.number,\r\n\r\n    gridMin: PropTypes.number,\r\n    gridMax: PropTypes.number,\r\n\r\n    yMin: PropTypes.any,\r\n    yMax: PropTypes.any,\r\n    xMin: PropTypes.any,\r\n    xMax: PropTypes.any,\r\n    clampX: PropTypes.bool,\r\n    clampY: PropTypes.bool,\r\n\r\n    xScale: PropTypes.func,\r\n    yScale: PropTypes.func,\r\n\r\n    xAccessor: PropTypes.func,\r\n    yAccessor: PropTypes.func,\r\n}\r\n\r\nChart.defaultProps = {\r\n    svg: {},\r\n    width: 100,\r\n    height: 100,\r\n    curve: shape.curveLinear,\r\n    contentInset: {},\r\n    numberOfTicks: 10,\r\n    xScale: scale.scaleLinear,\r\n    yScale: scale.scaleLinear,\r\n    xAccessor: ({ index }) => index,\r\n    yAccessor: ({ item }) => item,\r\n}\r\n\r\nexport default Chart\r\n","import * as shape from 'd3-shape'\r\nimport PropTypes from 'prop-types'\r\nimport Chart from './chart/chart'\r\n\r\nclass AreaChart extends Chart {\r\n    createPaths({ data, x, y }) {\r\n        const { curve, start } = this.props\r\n\r\n        const area = shape\r\n            .area()\r\n            .x((d) => x(d.x))\r\n            .y0(y(start))\r\n            .y1((d) => y(d.y))\r\n            .defined((item) => typeof item.y === 'number')\r\n            .curve(curve)(data)\r\n\r\n        const line = shape\r\n            .line()\r\n            .x((d) => x(d.x))\r\n            .y((d) => y(d.y))\r\n            .defined((item) => typeof item.y === 'number')\r\n            .curve(curve)(data)\r\n\r\n        return {\r\n            path: area,\r\n            area,\r\n            line,\r\n        }\r\n    }\r\n}\r\n\r\nAreaChart.propTypes = {\r\n    ...Chart.propTypes,\r\n    start: PropTypes.number,\r\n}\r\n\r\nAreaChart.defaultProps = {\r\n    ...Chart.defaultProps,\r\n    start: 0,\r\n}\r\n\r\nexport default AreaChart\r\n","import PropTypes from 'prop-types'\r\nimport * as array from 'd3-array'\r\nimport * as scale from 'd3-scale'\r\nimport * as shape from 'd3-shape'\r\nimport React, { PureComponent } from 'react'\r\nimport { View } from 'react-native'\r\nimport { Svg } from 'react-native-svg'\r\nimport Path from './animated-path'\r\n\r\nclass AreaStack extends PureComponent {\r\n    static extractDataPoints(data, keys, order = shape.stackOrderNone, offset = shape.stackOffsetNone) {\r\n        const series = shape\r\n            .stack()\r\n            .keys(keys)\r\n            .order(order)\r\n            .offset(offset)(data)\r\n\r\n        //double merge arrays to extract just the values\r\n        return array.merge(array.merge(series))\r\n    }\r\n\r\n    state = {\r\n        height: 0,\r\n        width: 0,\r\n    }\r\n\r\n    _onLayout(event) {\r\n        const {\r\n            nativeEvent: {\r\n                layout: { height, width },\r\n            },\r\n        } = event\r\n        this.setState({ height, width })\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            data,\r\n            keys,\r\n            colors,\r\n            animate,\r\n            animationDuration,\r\n            style,\r\n            curve,\r\n            numberOfTicks,\r\n            contentInset: { top = 0, bottom = 0, left = 0, right = 0 },\r\n            gridMin,\r\n            gridMax,\r\n            children,\r\n            offset,\r\n            order,\r\n            svgs,\r\n            xAccessor,\r\n            xScale,\r\n            clampY,\r\n            clampX,\r\n        } = this.props\r\n\r\n        const { height, width } = this.state\r\n\r\n        if (data.length === 0) {\r\n            return <View style={style} />\r\n        }\r\n\r\n        const series = shape\r\n            .stack()\r\n            .keys(keys)\r\n            .order(order)\r\n            .offset(offset)(data)\r\n\r\n        //double merge arrays to extract just the yValues\r\n        const yValues = array.merge(array.merge(series))\r\n        const xValues = data.map((item, index) => xAccessor({ item, index }))\r\n\r\n        const yExtent = array.extent([...yValues, gridMin, gridMax])\r\n        const xExtent = array.extent(xValues)\r\n\r\n        const { yMin = yExtent[0], yMax = yExtent[1], xMin = xExtent[0], xMax = xExtent[1] } = this.props\r\n\r\n        //invert range to support svg coordinate system\r\n        const y = scale\r\n            .scaleLinear()\r\n            .domain([yMin, yMax])\r\n            .range([height - bottom, top])\r\n            .clamp(clampY)\r\n\r\n        const x = xScale()\r\n            .domain([xMin, xMax])\r\n            .range([left, width - right])\r\n            .clamp(clampX)\r\n\r\n        const ticks = y.ticks(numberOfTicks)\r\n\r\n        const areas = series.map((serie, index) => {\r\n            const path = shape\r\n                .area()\r\n                .x((d, index) => x(xAccessor({ item: d.data, index })))\r\n                .y0((d) => y(d[0]))\r\n                .y1((d) => y(d[1]))\r\n                .curve(curve)(data.map((_, index) => serie[index]))\r\n\r\n            return {\r\n                path,\r\n                key: keys[index],\r\n                color: colors[index],\r\n            }\r\n        })\r\n\r\n        const extraProps = {\r\n            x,\r\n            y,\r\n            width,\r\n            height,\r\n            ticks,\r\n            areas,\r\n        }\r\n\r\n        return (\r\n            <View style={style}>\r\n                <View style={{ flex: 1 }} onLayout={(event) => this._onLayout(event)}>\r\n                    {height > 0 && width > 0 && (\r\n                        <Svg style={{ height, width }}>\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                            {areas.map((area, index) => (\r\n                                <Path\r\n                                    key={area.key}\r\n                                    fill={area.color}\r\n                                    {...svgs[index]}\r\n                                    animate={animate}\r\n                                    animationDuration={animationDuration}\r\n                                    d={area.path}\r\n                                />\r\n                            ))}\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && !child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                        </Svg>\r\n                    )}\r\n                </View>\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nAreaStack.propTypes = {\r\n    data: PropTypes.arrayOf(PropTypes.object).isRequired,\r\n    keys: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n    colors: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n    svgs: PropTypes.arrayOf(PropTypes.object),\r\n    offset: PropTypes.func,\r\n    order: PropTypes.func,\r\n    style: PropTypes.any,\r\n    animate: PropTypes.bool,\r\n    animationDuration: PropTypes.number,\r\n    contentInset: PropTypes.shape({\r\n        top: PropTypes.number,\r\n        left: PropTypes.number,\r\n        right: PropTypes.number,\r\n        bottom: PropTypes.number,\r\n    }),\r\n    numberOfTicks: PropTypes.number,\r\n    showGrid: PropTypes.bool,\r\n    xScale: PropTypes.func,\r\n    xAccessor: PropTypes.func,\r\n\r\n    yMin: PropTypes.any,\r\n    yMax: PropTypes.any,\r\n    xMin: PropTypes.any,\r\n    xMax: PropTypes.any,\r\n    clampX: PropTypes.bool,\r\n    clampY: PropTypes.bool,\r\n}\r\n\r\nAreaStack.defaultProps = {\r\n    curve: shape.curveLinear,\r\n    offset: shape.stackOffsetNone,\r\n    order: shape.stackOrderNone,\r\n    svgs: [],\r\n    strokeWidth: 2,\r\n    contentInset: {},\r\n    numberOfTicks: 10,\r\n    showGrid: true,\r\n    xScale: scale.scaleLinear,\r\n    xAccessor: ({ index }) => index,\r\n}\r\n\r\nexport default AreaStack\r\n","import * as array from 'd3-array'\r\nimport * as scale from 'd3-scale'\r\nimport * as shape from 'd3-shape'\r\nimport PropTypes from 'prop-types'\r\nimport React, { PureComponent } from 'react'\r\nimport { View } from 'react-native'\r\nimport Svg from 'react-native-svg'\r\nimport Path from '../animated-path'\r\n\r\nclass BarChart extends PureComponent {\r\n    state = {\r\n        width: 0,\r\n        height: 0,\r\n    }\r\n\r\n    _onLayout(event) {\r\n        const {\r\n            nativeEvent: {\r\n                layout: { height, width },\r\n            },\r\n        } = event\r\n        this.setState({ height, width })\r\n    }\r\n\r\n    calcXScale(domain) {\r\n        const {\r\n            horizontal,\r\n            contentInset: { left = 0, right = 0 },\r\n            spacingInner,\r\n            spacingOuter,\r\n            clamp,\r\n        } = this.props\r\n\r\n        const { width } = this.state\r\n\r\n        if (horizontal) {\r\n            return scale\r\n                .scaleLinear()\r\n                .domain(domain)\r\n                .range([left, width - right])\r\n                .clamp(clamp)\r\n        }\r\n\r\n        return scale\r\n            .scaleBand()\r\n            .domain(domain)\r\n            .range([left, width - right])\r\n            .paddingInner([spacingInner])\r\n            .paddingOuter([spacingOuter])\r\n    }\r\n\r\n    calcYScale(domain) {\r\n        const {\r\n            horizontal,\r\n            contentInset: { top = 0, bottom = 0 },\r\n            spacingInner,\r\n            spacingOuter,\r\n            clamp,\r\n        } = this.props\r\n\r\n        const { height } = this.state\r\n\r\n        if (horizontal) {\r\n            return scale\r\n                .scaleBand()\r\n                .domain(domain)\r\n                .range([top, height - bottom])\r\n                .paddingInner([spacingInner])\r\n                .paddingOuter([spacingOuter])\r\n        }\r\n\r\n        return scale\r\n            .scaleLinear()\r\n            .domain(domain)\r\n            .range([height - bottom, top])\r\n            .clamp(clamp)\r\n    }\r\n\r\n    calcAreas(x, y) {\r\n        const { horizontal, data, yAccessor } = this.props\r\n\r\n        const values = data.map((item) => yAccessor({ item }))\r\n\r\n        if (horizontal) {\r\n            return data.map((bar, index) => ({\r\n                bar,\r\n                path: shape\r\n                    .area()\r\n                    .y((value, _index) => (_index === 0 ? y(index) : y(index) + y.bandwidth()))\r\n                    .x0(x(0))\r\n                    .x1((value) => x(value))\r\n                    .defined((value) => typeof value === 'number')([values[index], values[index]]),\r\n            }))\r\n        }\r\n\r\n        return data.map((bar, index) => ({\r\n            bar,\r\n            path: shape\r\n                .area()\r\n                .y0(y(0))\r\n                .y1((value) => y(value))\r\n                .x((value, _index) => (_index === 0 ? x(index) : x(index) + x.bandwidth()))\r\n                .defined((value) => typeof value === 'number')([values[index], values[index]]),\r\n        }))\r\n    }\r\n\r\n    calcExtent() {\r\n        const { data, gridMin, gridMax, yAccessor } = this.props\r\n        const values = data.map((obj) => yAccessor({ item: obj }))\r\n\r\n        const extent = array.extent([...values, gridMax, gridMin])\r\n\r\n        const { yMin = extent[0], yMax = extent[1] } = this.props\r\n\r\n        return [yMin, yMax]\r\n    }\r\n\r\n    calcIndexes() {\r\n        const { data } = this.props\r\n        return data.map((_, index) => index)\r\n    }\r\n\r\n    render() {\r\n        const { data, animate, animationDuration, style, numberOfTicks, svg, horizontal, children } = this.props\r\n\r\n        const { height, width } = this.state\r\n\r\n        if (data.length === 0) {\r\n            return <View style={style} />\r\n        }\r\n\r\n        const extent = this.calcExtent()\r\n        const indexes = this.calcIndexes()\r\n        const ticks = array.ticks(extent[0], extent[1], numberOfTicks)\r\n\r\n        const xDomain = horizontal ? extent : indexes\r\n        const yDomain = horizontal ? indexes : extent\r\n\r\n        const x = this.calcXScale(xDomain)\r\n        const y = this.calcYScale(yDomain)\r\n\r\n        const bandwidth = horizontal ? y.bandwidth() : x.bandwidth()\r\n\r\n        const areas = this.calcAreas(x, y).filter(\r\n            (area) => area.bar !== null && area.bar !== undefined && area.path !== null\r\n        )\r\n\r\n        const extraProps = {\r\n            x,\r\n            y,\r\n            width,\r\n            height,\r\n            bandwidth,\r\n            ticks,\r\n            data,\r\n        }\r\n\r\n        return (\r\n            <View style={style}>\r\n                <View style={{ flex: 1 }} onLayout={(event) => this._onLayout(event)}>\r\n                    {height > 0 && width > 0 && (\r\n                        <Svg style={{ height, width }}>\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                            })}\r\n                            {areas.map((area, index) => {\r\n                                const {\r\n                                    bar: { svg: barSvg = {} },\r\n                                    path,\r\n                                } = area\r\n\r\n                                return (\r\n                                    <Path\r\n                                        key={index}\r\n                                        {...svg}\r\n                                        {...barSvg}\r\n                                        d={path}\r\n                                        animate={animate}\r\n                                        animationDuration={animationDuration}\r\n                                    />\r\n                                )\r\n                            })}\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && !child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                            })}\r\n                        </Svg>\r\n                    )}\r\n                </View>\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nBarChart.propTypes = {\r\n    data: PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.number, PropTypes.object])).isRequired,\r\n    style: PropTypes.any,\r\n    spacingInner: PropTypes.number,\r\n    spacingOuter: PropTypes.number,\r\n    animate: PropTypes.bool,\r\n    animationDuration: PropTypes.number,\r\n    contentInset: PropTypes.shape({\r\n        top: PropTypes.number,\r\n        left: PropTypes.number,\r\n        right: PropTypes.number,\r\n        bottom: PropTypes.number,\r\n    }),\r\n    numberOfTicks: PropTypes.number,\r\n    gridMin: PropTypes.number,\r\n    gridMax: PropTypes.number,\r\n    svg: PropTypes.object,\r\n\r\n    yMin: PropTypes.any,\r\n    yMax: PropTypes.any,\r\n    clamp: PropTypes.bool,\r\n}\r\n\r\nBarChart.defaultProps = {\r\n    spacingInner: 0.05,\r\n    spacingOuter: 0.05,\r\n    contentInset: {},\r\n    numberOfTicks: 10,\r\n    svg: {},\r\n    yAccessor: ({ item }) => item,\r\n}\r\n\r\nexport default BarChart\r\n","import PropTypes from 'prop-types'\r\nimport * as array from 'd3-array'\r\nimport * as scale from 'd3-scale'\r\nimport * as shape from 'd3-shape'\r\nimport BarChart from './bar-chart'\r\n\r\nclass GroupedBarChart extends BarChart {\r\n    calcXScale(domain) {\r\n        const {\r\n            horizontal,\r\n            contentInset: { left = 0, right = 0 },\r\n            spacingInner,\r\n            spacingOuter,\r\n            clamp,\r\n        } = this.props\r\n\r\n        const { width } = this.state\r\n\r\n        if (horizontal) {\r\n            return scale\r\n                .scaleLinear()\r\n                .domain(domain)\r\n                .range([left, width - right])\r\n                .clamp(clamp)\r\n        }\r\n\r\n        return scale\r\n            .scaleBand()\r\n            .domain(domain)\r\n            .range([left, width - right])\r\n            .paddingInner([spacingInner])\r\n            .paddingOuter([spacingOuter])\r\n    }\r\n\r\n    calcYScale(domain) {\r\n        const {\r\n            horizontal,\r\n            spacingInner,\r\n            spacingOuter,\r\n            contentInset: { top = 0, bottom = 0 },\r\n            clamp,\r\n        } = this.props\r\n\r\n        const { height } = this.state\r\n\r\n        if (horizontal) {\r\n            return scale\r\n                .scaleBand()\r\n                .domain(domain)\r\n                .range([top, height - bottom])\r\n                .paddingInner([spacingInner])\r\n                .paddingOuter([spacingOuter])\r\n        }\r\n\r\n        return scale\r\n            .scaleLinear()\r\n            .domain(domain)\r\n            .range([height - bottom, top])\r\n            .clamp(clamp)\r\n    }\r\n\r\n    calcAreas(x, y) {\r\n        const { horizontal, data, yAccessor } = this.props\r\n\r\n        const _data = data.map((obj) => {\r\n            const { svg = {} } = obj\r\n            return {\r\n                ...obj,\r\n                data: obj.data.map((item) => {\r\n                    if (typeof item === 'number') {\r\n                        return {\r\n                            value: item,\r\n                            svg,\r\n                        }\r\n                    }\r\n\r\n                    return {\r\n                        ...item,\r\n                        svg: {\r\n                            ...svg,\r\n                            ...item.svg,\r\n                        },\r\n                        value: yAccessor({ item }),\r\n                    }\r\n                }),\r\n            }\r\n        })\r\n\r\n        const areas = []\r\n\r\n        if (horizontal) {\r\n            const barWidth = y.bandwidth() / data.length\r\n\r\n            _data.forEach((obj, collectionIndex) => {\r\n                obj.data.forEach((item, valueIndex) => {\r\n                    areas.push({\r\n                        bar: item,\r\n                        path: shape\r\n                            .area()\r\n                            .y((value, _index) =>\r\n                                _index === 0\r\n                                    ? y(valueIndex) + barWidth * collectionIndex\r\n                                    : y(valueIndex) + barWidth + barWidth * collectionIndex\r\n                            )\r\n                            .x0(x(0))\r\n                            .x1((value) => x(value))\r\n                            .defined((value) => typeof value === 'number')([item.value, item.value]),\r\n                    })\r\n                })\r\n            })\r\n        } else {\r\n            const barWidth = x.bandwidth() / data.length\r\n\r\n            _data.forEach((obj, collectionIndex) => {\r\n                obj.data.forEach((item, valueIndex) => {\r\n                    areas.push({\r\n                        bar: item,\r\n                        path: shape\r\n                            .area()\r\n                            .x((value, _index) =>\r\n                                _index === 0\r\n                                    ? x(valueIndex) + barWidth * collectionIndex\r\n                                    : x(valueIndex) + barWidth + barWidth * collectionIndex\r\n                            )\r\n                            .y0(y(0))\r\n                            .y1((value) => y(value))\r\n                            .defined((value) => typeof value === 'number')([item.value, item.value]),\r\n                    })\r\n                })\r\n            })\r\n        }\r\n\r\n        return areas\r\n    }\r\n\r\n    calcExtent() {\r\n        const { data, yAccessor, gridMin, gridMax } = this.props\r\n        const dataExtent = array.merge(data.map((obj) => obj.data.map((item) => yAccessor({ item }))))\r\n\r\n        const extent = array.extent([...dataExtent, gridMax, gridMin])\r\n\r\n        const { yMin = extent[0], yMax = extent[1] } = this.props\r\n\r\n        return [yMin, yMax]\r\n    }\r\n\r\n    calcIndexes() {\r\n        const { data } = this.props\r\n        return data[0].data.map((_, index) => index)\r\n    }\r\n}\r\n\r\nGroupedBarChart.propTypes = {\r\n    ...BarChart.propTypes,\r\n    data: PropTypes.arrayOf(\r\n        PropTypes.shape({\r\n            data: PropTypes.array.isRequired,\r\n            svg: PropTypes.object,\r\n        })\r\n    ).isRequired,\r\n}\r\n\r\nexport default GroupedBarChart\r\n","import * as array from 'd3-array'\r\nimport * as scale from 'd3-scale'\r\nimport * as shape from 'd3-shape'\r\nimport PropTypes from 'prop-types'\r\nimport React, { PureComponent } from 'react'\r\nimport { View } from 'react-native'\r\nimport Svg from 'react-native-svg'\r\nimport Path from '../animated-path'\r\n\r\nclass BarChart extends PureComponent {\r\n    static extractDataPoints(data, keys, order = shape.stackOrderNone, offset = shape.stackOffsetNone) {\r\n        const series = shape\r\n            .stack()\r\n            .keys(keys)\r\n            .order(order)\r\n            .offset(offset)(data)\r\n\r\n        //double merge arrays to extract just the values\r\n        return array.merge(array.merge(series))\r\n    }\r\n\r\n    state = {\r\n        width: 0,\r\n        height: 0,\r\n    }\r\n\r\n    _onLayout(event) {\r\n        const {\r\n            nativeEvent: {\r\n                layout: { height, width },\r\n            },\r\n        } = event\r\n        this.setState({ height, width })\r\n    }\r\n\r\n    calcXScale(domain) {\r\n        const { data } = this.props\r\n\r\n        const {\r\n            horizontal,\r\n            contentInset: { left = 0, right = 0 },\r\n            spacingInner,\r\n            spacingOuter,\r\n        } = this.props\r\n\r\n        const { width } = this.state\r\n\r\n        if (horizontal) {\r\n            return scale\r\n                .scaleLinear()\r\n                .domain(domain)\r\n                .range([left, width - right])\r\n        }\r\n\r\n        // use index as domain identifier instead of value since\r\n        // domain must be same length as number of bars\r\n        // same value can occur at several places in data\r\n        return scale\r\n            .scaleBand()\r\n            .domain(data.map((_, index) => index))\r\n            .range([left, width - right])\r\n            .paddingInner([spacingInner])\r\n            .paddingOuter([spacingOuter])\r\n    }\r\n\r\n    calcYScale(domain) {\r\n        const { data } = this.props\r\n\r\n        const {\r\n            horizontal,\r\n            contentInset: { top = 0, bottom = 0 },\r\n            spacingInner,\r\n            spacingOuter,\r\n        } = this.props\r\n\r\n        const { height } = this.state\r\n\r\n        if (horizontal) {\r\n            return scale\r\n                .scaleBand()\r\n                .domain(data.map((_, index) => index))\r\n                .range([top, height - bottom])\r\n                .paddingInner([spacingInner])\r\n                .paddingOuter([spacingOuter])\r\n        }\r\n\r\n        return scale\r\n            .scaleLinear()\r\n            .domain(domain)\r\n            .range([height - bottom, top])\r\n    }\r\n\r\n    calcAreas(x, y, series) {\r\n        const { horizontal, colors, keys } = this.props\r\n\r\n        if (horizontal) {\r\n            return array.merge(\r\n                series.map((serie, keyIndex) => {\r\n                    return serie.map((entry, entryIndex) => {\r\n                        const path = shape\r\n                            .area()\r\n                            .x0((d) => x(d[0]))\r\n                            .x1((d) => x(d[1]))\r\n                            .y((d, _index) => (_index === 0 ? y(entryIndex) : y(entryIndex) + y.bandwidth()))\r\n                            .defined((d) => !isNaN(d[0]) && !isNaN(d[1]))([entry, entry])\r\n\r\n                        return {\r\n                            path,\r\n                            color: colors[keyIndex],\r\n                            key: keys[keyIndex],\r\n                        }\r\n                    })\r\n                })\r\n            )\r\n        }\r\n\r\n        return array.merge(\r\n            series.map((serie, keyIndex) => {\r\n                return serie.map((entry, entryIndex) => {\r\n                    const path = shape\r\n                        .area()\r\n                        .y0((d) => y(d[0]))\r\n                        .y1((d) => y(d[1]))\r\n                        .x((d, _index) => (_index === 0 ? x(entryIndex) : x(entryIndex) + x.bandwidth()))\r\n                        .defined((d) => !isNaN(d[0]) && !isNaN(d[1]))([entry, entry])\r\n\r\n                    return {\r\n                        path,\r\n                        color: colors[keyIndex],\r\n                        key: keys[keyIndex],\r\n                    }\r\n                })\r\n            })\r\n        )\r\n    }\r\n\r\n    calcExtent(values) {\r\n        const { gridMax, gridMin } = this.props\r\n\r\n        return array.extent([...values, gridMin, gridMax])\r\n    }\r\n\r\n    calcIndexes(values) {\r\n        return values.map((_, index) => index)\r\n    }\r\n\r\n    getSeries() {\r\n        const { data, keys, offset, order, valueAccessor } = this.props\r\n\r\n        return shape\r\n            .stack()\r\n            .keys(keys)\r\n            .value((item, key) => valueAccessor({ item, key }))\r\n            .order(order)\r\n            .offset(offset)(data)\r\n    }\r\n\r\n    render() {\r\n        const { data, animate, animationDuration, style, numberOfTicks, children, horizontal } = this.props\r\n\r\n        const { height, width } = this.state\r\n\r\n        if (data.length === 0) {\r\n            return <View style={style} />\r\n        }\r\n\r\n        const series = this.getSeries()\r\n\r\n        //double merge arrays to extract just the values\r\n        const values = array.merge(array.merge(series))\r\n        const indexes = this.calcIndexes(values)\r\n\r\n        const extent = this.calcExtent(values)\r\n        const ticks = array.ticks(extent[0], extent[1], numberOfTicks)\r\n\r\n        const xDomain = horizontal ? extent : indexes\r\n        const yDomain = horizontal ? indexes : extent\r\n\r\n        const x = this.calcXScale(xDomain)\r\n        const y = this.calcYScale(yDomain)\r\n\r\n        const bandwidth = horizontal ? y.bandwidth() : x.bandwidth()\r\n\r\n        const areas = this.calcAreas(x, y, series)\r\n\r\n        const extraProps = {\r\n            x,\r\n            y,\r\n            width,\r\n            height,\r\n            ticks,\r\n            data,\r\n            bandwidth,\r\n        }\r\n\r\n        return (\r\n            <View style={style}>\r\n                <View style={{ flex: 1 }} onLayout={(event) => this._onLayout(event)}>\r\n                    {height > 0 && width > 0 && (\r\n                        <Svg style={{ height, width }}>\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                            {areas.map((bar, index) => {\r\n                                const keyIndex = index % data.length\r\n                                const key = `${keyIndex}-${bar.key}`\r\n                                const { svg } = data[keyIndex][bar.key]\r\n\r\n                                return (\r\n                                    <Path\r\n                                        key={key}\r\n                                        fill={bar.color}\r\n                                        {...svg}\r\n                                        d={bar.path}\r\n                                        animate={animate}\r\n                                        animationDuration={animationDuration}\r\n                                    />\r\n                                )\r\n                            })}\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && !child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                        </Svg>\r\n                    )}\r\n                </View>\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nBarChart.propTypes = {\r\n    data: PropTypes.arrayOf(PropTypes.object),\r\n    keys: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n    colors: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n    offset: PropTypes.func,\r\n    order: PropTypes.func,\r\n    style: PropTypes.any,\r\n    spacingInner: PropTypes.number,\r\n    spacingOuter: PropTypes.number,\r\n    animate: PropTypes.bool,\r\n    animationDuration: PropTypes.number,\r\n    contentInset: PropTypes.shape({\r\n        top: PropTypes.number,\r\n        left: PropTypes.number,\r\n        right: PropTypes.number,\r\n        bottom: PropTypes.number,\r\n    }),\r\n    gridMin: PropTypes.number,\r\n    gridMax: PropTypes.number,\r\n    valueAccessor: PropTypes.func,\r\n}\r\n\r\nBarChart.defaultProps = {\r\n    spacingInner: 0.05,\r\n    spacingOuter: 0.05,\r\n    offset: shape.stackOffsetNone,\r\n    order: shape.stackOrderNone,\r\n    width: 100,\r\n    height: 100,\r\n    showZeroAxis: true,\r\n    contentInset: {},\r\n    numberOfTicks: 10,\r\n    showGrid: true,\r\n    valueAccessor: ({ item, key }) => item[key],\r\n}\r\n\r\nexport default BarChart\r\n","import React, { PureComponent } from 'react'\r\nimport { View } from 'react-native'\r\nimport PropTypes from 'prop-types'\r\nimport Svg from 'react-native-svg'\r\nimport * as array from 'd3-array'\r\nimport * as scale from 'd3-scale'\r\nimport * as shape from 'd3-shape'\r\nimport Path from '../animated-path'\r\n\r\nclass StackedBarGrouped extends PureComponent {\r\n    state = {\r\n        width: 0,\r\n        height: 0,\r\n    }\r\n\r\n    _onLayout(event) {\r\n        const {\r\n            nativeEvent: {\r\n                layout: { height, width },\r\n            },\r\n        } = event\r\n        this.setState({ height, width })\r\n    }\r\n\r\n    calcXScale(domain) {\r\n        const {\r\n            horizontal,\r\n            contentInset: { left = 0, right = 0 },\r\n            spacingInner,\r\n            spacingOuter,\r\n        } = this.props\r\n\r\n        const { width } = this.state\r\n\r\n        if (horizontal) {\r\n            return scale\r\n                .scaleLinear()\r\n                .domain(domain)\r\n                .range([left, width - right])\r\n        }\r\n\r\n        return scale\r\n            .scaleBand()\r\n            .domain(domain)\r\n            .range([left, width - right])\r\n            .paddingInner([spacingInner])\r\n            .paddingOuter([spacingOuter])\r\n    }\r\n\r\n    calcYScale(domain) {\r\n        const {\r\n            horizontal,\r\n            contentInset: { top = 0, bottom = 0 },\r\n            spacingInner,\r\n            spacingOuter,\r\n        } = this.props\r\n\r\n        const { height } = this.state\r\n\r\n        if (horizontal) {\r\n            return scale\r\n                .scaleBand()\r\n                .domain(domain)\r\n                .range([top, height - bottom])\r\n                .paddingInner([spacingInner])\r\n                .paddingOuter([spacingOuter])\r\n        }\r\n\r\n        return scale\r\n            .scaleLinear()\r\n            .domain(domain)\r\n            .range([height - bottom, top])\r\n    }\r\n\r\n    calcAreas(x, y, series) {\r\n        const { horizontal, colors, keys, data, borderRadius: initialBorderRadius, innerBarSpace } = this.props\r\n        let areas\r\n        let barWidth\r\n\r\n        if (horizontal) {\r\n            barWidth = y.bandwidth() / data.length\r\n\r\n            areas = series.map((stack, stackIndex) => {\r\n                return stack.map((serie, keyIndex) => {\r\n                    return serie.map((entry, entryIndex) => {\r\n                        const leftMargin = series.length > 1 ? innerBarSpace / 2 : 0\r\n\r\n                        const path = shape\r\n                            .area()\r\n                            .x0((d) => x(d[0]))\r\n                            .x1((d) => x(d[1]))\r\n                            .y(\r\n                                (d, _index) =>\r\n                                    (_index === 0\r\n                                        ? y(entryIndex) + barWidth * stackIndex + leftMargin\r\n                                        : y(entryIndex) + barWidth + barWidth * stackIndex) - leftMargin\r\n                            )\r\n                            .defined((d) => !isNaN(d[0]) && !isNaN(d[1]))([entry, entry])\r\n\r\n                        return {\r\n                            path,\r\n                            color: colors[stackIndex][keyIndex],\r\n                            key: keys[stackIndex][keyIndex],\r\n                        }\r\n                    })\r\n                })\r\n            })\r\n        } else {\r\n            barWidth = x.bandwidth() / data.length\r\n\r\n            areas = series.map((stack, stackIndex) => {\r\n                return stack.map((serie, keyIndex) => {\r\n                    return serie.map((entry, entryIndex) => {\r\n                        const leftMargin = series.length > 1 ? innerBarSpace / 2 : 0\r\n                        const x0 = x(entryIndex) + barWidth * stackIndex + leftMargin\r\n                        const x1 = x(entryIndex) + barWidth + barWidth * stackIndex - leftMargin\r\n                        const y0 = y(entry[1])\r\n                        const y1 = y(entry[0])\r\n                        const barHeight = y1 - y0\r\n                        const borderRadius = initialBorderRadius * 2 > barHeight ? barHeight / 2 : initialBorderRadius\r\n                        const showTopBorder = keyIndex === stack.length - 1\r\n                        const showBottomBorder = keyIndex === 0\r\n                        const commands = this.coordinatesToPathCommands(\r\n                            x0,\r\n                            y0,\r\n                            x1,\r\n                            y1,\r\n                            borderRadius,\r\n                            showTopBorder,\r\n                            showBottomBorder\r\n                        )\r\n\r\n                        return {\r\n                            path: this.commandsToSvgPath(commands),\r\n                            color: colors[stackIndex][keyIndex],\r\n                            key: keys[stackIndex][keyIndex],\r\n                        }\r\n                    })\r\n                })\r\n            })\r\n        }\r\n\r\n        return array.merge(areas)\r\n    }\r\n\r\n    coordinatesToPathCommands = (x0, y0, x1, y1, borderRadius, showTopBorder, showBottomBorder) => {\r\n        const commands = []\r\n        commands.push({ marker: 'M', values: [x0, y0] })\r\n\r\n        if (showTopBorder) {\r\n            const topLeft1 = [x0 + borderRadius, y0]\r\n            const topLeft2 = [x0, y0 + borderRadius]\r\n            commands.push({ marker: 'L', values: topLeft1 })\r\n            commands.push({\r\n                marker: 'C',\r\n                values: [...topLeft1, x0, y0, ...topLeft2],\r\n            })\r\n            commands.push({ marker: 'L', values: topLeft2 })\r\n        } else {\r\n            commands.push({ marker: 'L', values: [x0, y0] })\r\n        }\r\n\r\n        if (showBottomBorder) {\r\n            const bottomLeft1 = [x0, y1 - borderRadius]\r\n            const bottomLeft2 = [x0 + borderRadius, y1]\r\n            commands.push({ marker: 'L', values: bottomLeft1 })\r\n            commands.push({\r\n                marker: 'C',\r\n                values: [...bottomLeft1, x0, y1, ...bottomLeft2],\r\n            })\r\n            commands.push({ marker: 'L', values: bottomLeft2 })\r\n            const bottomRight1 = [x1 - borderRadius, y1]\r\n            const bottomRight2 = [x1, y1 - borderRadius]\r\n            commands.push({ marker: 'L', values: bottomRight1 })\r\n            commands.push({\r\n                marker: 'C',\r\n                values: [...bottomRight1, x1, y1, ...bottomRight2],\r\n            })\r\n            commands.push({ marker: 'L', values: bottomRight2 })\r\n        } else {\r\n            commands.push({ marker: 'L', values: [x0, y1] })\r\n            commands.push({ marker: 'L', values: [x1, y1] })\r\n        }\r\n\r\n        if (showTopBorder) {\r\n            const topRight1 = [x1, y0 + borderRadius]\r\n            const topRight2 = [x1 - borderRadius, y0]\r\n\r\n            commands.push({ marker: 'L', values: topRight1 })\r\n            commands.push({\r\n                marker: 'C',\r\n                values: [...topRight1, x1, y0, ...topRight2],\r\n            })\r\n            commands.push({ marker: 'L', values: topRight2 })\r\n        } else {\r\n            commands.push({ marker: 'L', values: [x1, y0] })\r\n        }\r\n\r\n        commands.push({ marker: 'Z', values: [] })\r\n\r\n        return commands\r\n    }\r\n\r\n    commandsToSvgPath = (commands) =>\r\n        commands\r\n            .map((command) => `${command.marker} ${command.values.join(',')}`)\r\n            .join(' ')\r\n            .trim()\r\n\r\n    calcExtent(values) {\r\n        const { gridMax, gridMin } = this.props\r\n\r\n        // One more merge for stacked groups\r\n        const mergedValues = array.merge(values)\r\n\r\n        return array.extent([...mergedValues, gridMin, gridMax])\r\n    }\r\n\r\n    calcIndexes() {\r\n        const { data } = this.props\r\n\r\n        // Must return an array with indexes for the number of groups to be shown\r\n        return data[0].data.map((_, index) => index)\r\n    }\r\n\r\n    getSeries() {\r\n        const { data, keys, offset, order, valueAccessor } = this.props\r\n\r\n        return data.map((obj, index) =>\r\n            shape\r\n                .stack()\r\n                .keys(keys[index])\r\n                .value((item, key) => valueAccessor({ item, key }))\r\n                .order(order)\r\n                .offset(offset)(obj.data)\r\n        )\r\n    }\r\n\r\n    render() {\r\n        const { data, animate, animationDuration, style, numberOfTicks, children, horizontal } = this.props\r\n\r\n        const { height, width } = this.state\r\n\r\n        if (data.length === 0) {\r\n            return <View style={style} />\r\n        }\r\n\r\n        const series = this.getSeries()\r\n\r\n        //double merge arrays to extract just the values\r\n        const values = array.merge(array.merge(series))\r\n        const indexes = this.calcIndexes(values)\r\n\r\n        const extent = this.calcExtent(values)\r\n        const ticks = array.ticks(extent[0], extent[1], numberOfTicks)\r\n\r\n        const xDomain = horizontal ? extent : indexes\r\n        const yDomain = horizontal ? indexes : extent\r\n\r\n        const x = this.calcXScale(xDomain)\r\n        const y = this.calcYScale(yDomain)\r\n\r\n        const bandwidth = horizontal ? y.bandwidth() : x.bandwidth()\r\n\r\n        const stacks = this.calcAreas(x, y, series)\r\n\r\n        const extraProps = {\r\n            x,\r\n            y,\r\n            width,\r\n            height,\r\n            ticks,\r\n            data,\r\n            bandwidth,\r\n        }\r\n\r\n        return (\r\n            <View style={style}>\r\n                <View style={{ flex: 1 }} onLayout={(event) => this._onLayout(event)}>\r\n                    {height > 0 && width > 0 && (\r\n                        <Svg style={{ height, width }}>\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                            {stacks.map((areas, indexStack) => {\r\n                                const areaIndex = indexStack % data.length\r\n\r\n                                return areas.map((bar, indexArea) => {\r\n                                    const keyIndex = indexArea % data[areaIndex].data.length\r\n                                    const key = `${areaIndex}-${keyIndex}-${bar.key}`\r\n\r\n                                    const { svg } = data[areaIndex].data[keyIndex][bar.key]\r\n\r\n                                    return (\r\n                                        <Path\r\n                                            key={key}\r\n                                            fill={bar.color}\r\n                                            {...svg}\r\n                                            d={bar.path}\r\n                                            animate={animate}\r\n                                            animationDuration={animationDuration}\r\n                                        />\r\n                                    )\r\n                                })\r\n                            })}\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && !child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                        </Svg>\r\n                    )}\r\n                </View>\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nStackedBarGrouped.propTypes = {\r\n    data: PropTypes.arrayOf(PropTypes.object),\r\n    keys: PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.string)).isRequired,\r\n    colors: PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.string)).isRequired,\r\n    offset: PropTypes.func,\r\n    order: PropTypes.func,\r\n    style: PropTypes.any,\r\n    spacingInner: PropTypes.number,\r\n    spacingOuter: PropTypes.number,\r\n    animate: PropTypes.bool,\r\n    animationDuration: PropTypes.number,\r\n    contentInset: PropTypes.shape({\r\n        top: PropTypes.number,\r\n        left: PropTypes.number,\r\n        right: PropTypes.number,\r\n        bottom: PropTypes.number,\r\n    }),\r\n    gridMin: PropTypes.number,\r\n    gridMax: PropTypes.number,\r\n    valueAccessor: PropTypes.func,\r\n    borderRadius: PropTypes.number,\r\n    innerBarSpace: PropTypes.number,\r\n}\r\n\r\nStackedBarGrouped.defaultProps = {\r\n    spacingInner: 0.05,\r\n    spacingOuter: 0.05,\r\n    offset: shape.stackOffsetNone,\r\n    order: shape.stackOrderNone,\r\n    width: 100,\r\n    height: 100,\r\n    showZeroAxis: true,\r\n    contentInset: {},\r\n    numberOfTicks: 10,\r\n    showGrid: true,\r\n    valueAccessor: ({ item, key }) => item[key],\r\n    borderRadius: 0,\r\n    innerBarSpace: 0,\r\n}\r\n\r\nexport default StackedBarGrouped\r\n","import * as shape from 'd3-shape'\r\nimport Chart from '../chart/chart'\r\n\r\nclass LineChart extends Chart {\r\n    createPaths({ data, x, y }) {\r\n        const { curve } = this.props\r\n\r\n        const line = shape\r\n            .line()\r\n            .x((d) => x(d.x))\r\n            .y((d) => y(d.y))\r\n            .defined((item) => typeof item.y === 'number')\r\n            .curve(curve)(data)\r\n\r\n        return {\r\n            path: line,\r\n            line,\r\n        }\r\n    }\r\n}\r\n\r\nLineChart.propTypes = {\r\n    ...Chart.propTypes,\r\n}\r\n\r\nLineChart.defaultProps = {\r\n    ...Chart.defaultProps,\r\n}\r\n\r\nexport default LineChart\r\n","import * as array from 'd3-array'\r\nimport PropTypes from 'prop-types'\r\nimport React, { PureComponent } from 'react'\r\nimport { View } from 'react-native'\r\nimport Svg from 'react-native-svg'\r\nimport Path from '../animated-path'\r\nimport Chart from './chart'\r\n\r\nclass ChartGrouped extends PureComponent {\r\n    state = {\r\n        width: 0,\r\n        height: 0,\r\n    }\r\n\r\n    _onLayout(event) {\r\n        const {\r\n            nativeEvent: {\r\n                layout: { height, width },\r\n            },\r\n        } = event\r\n        this.setState({ height, width })\r\n    }\r\n\r\n    createPaths() {\r\n        throw 'Extending \"ChartGrouped\" requires you to override \"createPaths'\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            data,\r\n            xAccessor,\r\n            yAccessor,\r\n            yScale,\r\n            xScale,\r\n            style,\r\n            animate,\r\n            animationDuration,\r\n            numberOfTicks,\r\n            contentInset: { top = 0, bottom = 0, left = 0, right = 0 },\r\n            gridMax,\r\n            gridMin,\r\n            clampX,\r\n            clampY,\r\n            svg,\r\n            children,\r\n        } = this.props\r\n\r\n        const { width, height } = this.state\r\n\r\n        if (data.length === 0) {\r\n            return <View style={style} />\r\n        }\r\n\r\n        const mappedData = data.map((dataArray) =>\r\n            dataArray.data.map((item, index) => ({\r\n                y: yAccessor({ item, index }),\r\n                x: xAccessor({ item, index }),\r\n            }))\r\n        )\r\n\r\n        const yValues = array.merge(mappedData).map((item) => item.y)\r\n        const xValues = array.merge(mappedData).map((item) => item.x)\r\n\r\n        const yExtent = array.extent([...yValues, gridMin, gridMax])\r\n        const xExtent = array.extent([...xValues])\r\n\r\n        const { yMin = yExtent[0], yMax = yExtent[1], xMin = xExtent[0], xMax = xExtent[1] } = this.props\r\n\r\n        //invert range to support svg coordinate system\r\n        const y = yScale()\r\n            .domain([yMin, yMax])\r\n            .range([height - bottom, top])\r\n            .clamp(clampY)\r\n\r\n        const x = xScale()\r\n            .domain([xMin, xMax])\r\n            .range([left, width - right])\r\n            .clamp(clampX)\r\n\r\n        const paths = this.createPaths({\r\n            data: mappedData,\r\n            x,\r\n            y,\r\n        })\r\n\r\n        const ticks = y.ticks(numberOfTicks)\r\n\r\n        const extraProps = {\r\n            x,\r\n            y,\r\n            data,\r\n            ticks,\r\n            width,\r\n            height,\r\n            ...paths,\r\n        }\r\n\r\n        return (\r\n            <View style={style}>\r\n                <View style={{ flex: 1 }} onLayout={(event) => this._onLayout(event)}>\r\n                    {height > 0 && width > 0 && (\r\n                        <Svg style={{ height, width }}>\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                            {paths.path.map((path, index) => {\r\n                                const { svg: pathSvg } = data[index]\r\n                                const key = path + '-' + index\r\n                                return (\r\n                                    <Path\r\n                                        key={key}\r\n                                        fill={'none'}\r\n                                        {...svg}\r\n                                        {...pathSvg}\r\n                                        d={path}\r\n                                        animate={animate}\r\n                                        animationDuration={animationDuration}\r\n                                    />\r\n                                )\r\n                            })}\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && !child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                        </Svg>\r\n                    )}\r\n                </View>\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nChartGrouped.propTypes = {\r\n    ...Chart.propTypes,\r\n    data: PropTypes.arrayOf(\r\n        PropTypes.shape({\r\n            data: PropTypes.oneOfType([\r\n                PropTypes.arrayOf(PropTypes.object),\r\n                PropTypes.arrayOf(PropTypes.number),\r\n                PropTypes.arrayOf(PropTypes.array),\r\n            ]),\r\n            svg: PropTypes.object,\r\n        })\r\n    ).isRequired,\r\n}\r\n\r\nChartGrouped.defaultProps = {\r\n    ...Chart.defaultProps,\r\n}\r\n\r\nexport default ChartGrouped\r\n","import * as shape from 'd3-shape'\r\nimport ChartGrouped from '../chart/chart-grouped'\r\n\r\nclass LineChartGrouped extends ChartGrouped {\r\n    createPaths({ data, x, y }) {\r\n        const { curve } = this.props\r\n\r\n        const lines = data.map((line) =>\r\n            shape\r\n                .line()\r\n                .x((d) => x(d.x))\r\n                .y((d) => y(d.y))\r\n                .defined((item) => typeof item.y === 'number')\r\n                .curve(curve)(line)\r\n        )\r\n\r\n        return {\r\n            path: lines,\r\n            lines,\r\n        }\r\n    }\r\n}\r\n\r\nLineChartGrouped.propTypes = {\r\n    ...ChartGrouped.propTypes,\r\n}\r\n\r\nLineChartGrouped.defaultProps = {\r\n    ...ChartGrouped.defaultProps,\r\n}\r\n\r\nexport default LineChartGrouped\r\n","import React from 'react'\r\nimport LineChart from './line-chart'\r\nimport LineChartGrouped from './line-chart-grouped'\r\n\r\nconst LineChartGate = (props) => {\r\n    const { data } = props\r\n\r\n    if (data[0] && data[0].hasOwnProperty('data')) {\r\n        return <LineChartGrouped {...props} />\r\n    }\r\n\r\n    return <LineChart {...props} />\r\n}\r\n\r\nexport default LineChartGate\r\n","import React, { PureComponent } from 'react'\r\nimport { View } from 'react-native'\r\nimport PropTypes from 'prop-types'\r\nimport * as shape from 'd3-shape'\r\nimport Path from './animated-path'\r\nimport Svg, { G } from 'react-native-svg'\r\n\r\nclass ProgressCircle extends PureComponent {\r\n    state = {\r\n        height: 0,\r\n        width: 0,\r\n    }\r\n\r\n    _onLayout(event) {\r\n        const {\r\n            nativeEvent: {\r\n                layout: { height, width },\r\n            },\r\n        } = event\r\n        this.setState({ height, width })\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            style,\r\n            progressColor,\r\n            backgroundColor,\r\n            strokeWidth,\r\n            startAngle,\r\n            endAngle,\r\n            animate,\r\n            animateDuration,\r\n            children,\r\n            cornerRadius,\r\n        } = this.props\r\n\r\n        let { progress } = this.props\r\n\r\n        const { height, width } = this.state\r\n\r\n        const outerDiameter = Math.min(width, height)\r\n\r\n        if (!isFinite(progress) || isNaN(progress)) {\r\n            progress = 0\r\n        }\r\n\r\n        // important order to have progress render over \"rest\"\r\n        const data = [\r\n            {\r\n                key: 'rest',\r\n                value: 1 - progress,\r\n                color: backgroundColor,\r\n            },\r\n            {\r\n                key: 'progress',\r\n                value: progress,\r\n                color: progressColor,\r\n            },\r\n        ]\r\n\r\n        const pieSlices = shape\r\n            .pie()\r\n            .value((d) => d.value)\r\n            .sort((a) => (a.key === 'rest' ? 1 : -1))\r\n            .startAngle(startAngle)\r\n            .endAngle(endAngle)(data)\r\n\r\n        const arcs = pieSlices.map((slice, index) => ({\r\n            ...data[index],\r\n            ...slice,\r\n            path: shape\r\n                .arc()\r\n                .outerRadius(outerDiameter / 2) // Radius of the pie\r\n                .innerRadius(outerDiameter / 2 - strokeWidth) // Inner radius: to create a donut or pie\r\n                .startAngle(index === 0 ? startAngle : slice.startAngle)\r\n                .endAngle(index === 0 ? endAngle : slice.endAngle)\r\n                .cornerRadius(cornerRadius)(),\r\n        }))\r\n\r\n        const extraProps = {\r\n            width,\r\n            height,\r\n        }\r\n\r\n        return (\r\n            <View style={style} onLayout={(event) => this._onLayout(event)}>\r\n                {height > 0 && width > 0 && (\r\n                    <Svg style={{ height, width }}>\r\n                        {/* center the progress circle*/}\r\n                        <G x={width / 2} y={height / 2}>\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                            {arcs.map((shape, index) => {\r\n                                return (\r\n                                    <Path\r\n                                        key={index}\r\n                                        fill={shape.color}\r\n                                        d={shape.path}\r\n                                        animate={animate}\r\n                                        animationDuration={animateDuration}\r\n                                    />\r\n                                )\r\n                            })}\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && !child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                        </G>\r\n                    </Svg>\r\n                )}\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nProgressCircle.propTypes = {\r\n    progress: PropTypes.number.isRequired,\r\n    style: PropTypes.any,\r\n    progressColor: PropTypes.any,\r\n    backgroundColor: PropTypes.any,\r\n    strokeWidth: PropTypes.number,\r\n    startAngle: PropTypes.number,\r\n    endAngle: PropTypes.number,\r\n    animate: PropTypes.bool,\r\n    cornerRadius: PropTypes.number,\r\n    animateDuration: PropTypes.number,\r\n}\r\n\r\nProgressCircle.defaultProps = {\r\n    progressColor: 'black',\r\n    backgroundColor: '#ECECEC',\r\n    strokeWidth: 5,\r\n    startAngle: 0,\r\n    endAngle: Math.PI * 2,\r\n    cornerRadius: 45,\r\n}\r\n\r\nexport default ProgressCircle\r\n","import React, { PureComponent } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Text, View } from 'react-native'\r\nimport * as d3Scale from 'd3-scale'\r\nimport * as array from 'd3-array'\r\nimport Svg, { G, Text as SVGText } from 'react-native-svg'\r\n\r\nclass XAxis extends PureComponent {\r\n    state = {\r\n        width: 0,\r\n        height: 0,\r\n    }\r\n\r\n    _onLayout(event) {\r\n        const {\r\n            nativeEvent: {\r\n                layout: { width, height },\r\n            },\r\n        } = event\r\n\r\n        if (width !== this.state.width) {\r\n            this.setState({ width, height })\r\n        }\r\n    }\r\n\r\n    _getX(domain) {\r\n        const {\r\n            scale,\r\n            spacingInner,\r\n            spacingOuter,\r\n            contentInset: { left = 0, right = 0 },\r\n        } = this.props\r\n\r\n        const { width } = this.state\r\n\r\n        const x = scale()\r\n            .domain(domain)\r\n            .range([left, width - right])\r\n\r\n        if (scale === d3Scale.scaleBand) {\r\n            x.paddingInner([spacingInner]).paddingOuter([spacingOuter])\r\n\r\n            //add half a bar to center label\r\n            return (value) => x(value) + x.bandwidth() / 2\r\n        }\r\n\r\n        return x\r\n    }\r\n\r\n    render() {\r\n        const { style, scale, data, xAccessor, formatLabel, numberOfTicks, svg, children, min, max } = this.props\r\n\r\n        const { height, width } = this.state\r\n\r\n        if (data.length === 0) {\r\n            return <View style={style} />\r\n        }\r\n\r\n        const values = data.map((item, index) => xAccessor({ item, index }))\r\n        const extent = array.extent(values)\r\n        const domain = scale === d3Scale.scaleBand ? values : [min || extent[0], max || extent[1]]\r\n\r\n        const x = this._getX(domain)\r\n        const ticks = numberOfTicks ? x.ticks(numberOfTicks) : values\r\n\r\n        const extraProps = {\r\n            x,\r\n            ticks,\r\n            width,\r\n            height,\r\n            formatLabel,\r\n        }\r\n\r\n        return (\r\n            <View style={style}>\r\n                <View style={{ flexGrow: 1 }} onLayout={(event) => this._onLayout(event)}>\r\n                    {/*invisible text to allow for parent resizing*/}\r\n                    <Text\r\n                        style={{\r\n                            opacity: 0,\r\n                            fontSize: svg.fontSize,\r\n                            fontFamily: svg.fontFamily,\r\n                            fontWeight: svg.fontWeight,\r\n                        }}\r\n                    >\r\n                        {formatLabel(ticks[0], 0)}\r\n                    </Text>\r\n                    {height > 0 && width > 0 && (\r\n                        <Svg\r\n                            style={{\r\n                                position: 'absolute',\r\n                                top: 0,\r\n                                left: 0,\r\n                                height: height,\r\n                                width: width,\r\n                            }}\r\n                        >\r\n                            <G>\r\n                                {React.Children.map(children, (child) => {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                })}\r\n                                {// don't render labels if width isn't measured yet,\r\n                                // causes rendering issues\r\n                                width > 0 &&\r\n                                    ticks.map((value, index) => {\r\n                                        const { svg: valueSvg = {} } = data[index] || {}\r\n\r\n                                        return (\r\n                                            <SVGText\r\n                                                textAnchor={'middle'}\r\n                                                originX={x(value)}\r\n                                                alignmentBaseline={'hanging'}\r\n                                                {...svg}\r\n                                                {...valueSvg}\r\n                                                key={index}\r\n                                                y={0}\r\n                                                x={x(value)}\r\n                                                \r\n                                            >\r\n                                                {formatLabel(value, index)}\r\n                                            </SVGText>\r\n                                        )\r\n                                    })}\r\n                            </G>\r\n                        </Svg>\r\n                    )}\r\n                </View>\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nXAxis.propTypes = {\r\n    data: PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.number, PropTypes.object])).isRequired,\r\n    spacingInner: PropTypes.number,\r\n    spacingOuter: PropTypes.number,\r\n    formatLabel: PropTypes.func,\r\n    contentInset: PropTypes.shape({\r\n        left: PropTypes.number,\r\n        right: PropTypes.number,\r\n    }),\r\n    scale: PropTypes.func,\r\n    numberOfTicks: PropTypes.number,\r\n    xAccessor: PropTypes.func,\r\n    svg: PropTypes.object,\r\n    min: PropTypes.any,\r\n    max: PropTypes.any,\r\n}\r\n\r\nXAxis.defaultProps = {\r\n    spacingInner: 0.05,\r\n    spacingOuter: 0.05,\r\n    contentInset: {},\r\n    svg: {},\r\n    xAccessor: ({ index }) => index,\r\n    scale: d3Scale.scaleLinear,\r\n    formatLabel: (value) => value,\r\n}\r\n\r\nexport default XAxis\r\n","import React, { PureComponent } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Text, View } from 'react-native'\r\nimport { Svg, G, Text as SVGText } from 'react-native-svg'\r\nimport * as d3Scale from 'd3-scale'\r\nimport * as array from 'd3-array'\r\n\r\nclass YAxis extends PureComponent {\r\n    state = {\r\n        height: 0,\r\n        width: 0,\r\n    }\r\n\r\n    _onLayout(event) {\r\n        const {\r\n            nativeEvent: {\r\n                layout: { height, width },\r\n            },\r\n        } = event\r\n        this.setState({ height, width })\r\n    }\r\n\r\n    getY(domain) {\r\n        const {\r\n            scale,\r\n            spacingInner,\r\n            spacingOuter,\r\n            contentInset: { top = 0, bottom = 0 },\r\n        } = this.props\r\n\r\n        const { height } = this.state\r\n\r\n        const y = scale()\r\n            .domain(domain)\r\n            .range([height - bottom, top])\r\n\r\n        if (scale === d3Scale.scaleBand) {\r\n            // use index as domain identifier instead of value since\r\n            // same value can occur at several places in dataPoints\r\n            y\r\n                // set range top to bottom - we are not sorting on values in scaleBand\r\n                .range([top, height - bottom])\r\n                .paddingInner([spacingInner])\r\n                .paddingOuter([spacingOuter])\r\n\r\n            //add half a bar to center label\r\n            return (value) => y(value) + y.bandwidth() / 2\r\n        }\r\n\r\n        return y\r\n    }\r\n\r\n    render() {\r\n        const { style, data, scale, yAccessor, numberOfTicks, formatLabel, svg, children } = this.props\r\n\r\n        const { height, width } = this.state\r\n\r\n        if (data.length === 0) {\r\n            return <View style={style} />\r\n        }\r\n\r\n        const values = data.map((item, index) => yAccessor({ item, index }))\r\n\r\n        const extent = array.extent(values)\r\n\r\n        const { min = extent[0], max = extent[1] } = this.props\r\n\r\n        const domain = scale === d3Scale.scaleBand ? values : [min, max]\r\n\r\n        //invert range to support svg coordinate system\r\n        const y = this.getY(domain)\r\n\r\n        const ticks = scale === d3Scale.scaleBand ? values : y.ticks(numberOfTicks)\r\n\r\n        const longestValue = ticks\r\n            .map((value, index) => formatLabel(value, index))\r\n            .reduce((prev, curr) => (prev.toString().length > curr.toString().length ? prev : curr), 0)\r\n\r\n        const extraProps = {\r\n            y,\r\n            ticks,\r\n            width,\r\n            height,\r\n            formatLabel,\r\n        }\r\n\r\n        return (\r\n            <View style={[style]}>\r\n                <View style={{ flexGrow: 1 }} onLayout={(event) => this._onLayout(event)}>\r\n                    {/*invisible text to allow for parent resizing*/}\r\n                    <Text\r\n                        style={{\r\n                            opacity: 0,\r\n                            fontSize: svg.fontSize,\r\n                            fontFamily: svg.fontFamily,\r\n                            fontWeight: svg.fontWeight,\r\n                        }}\r\n                    >\r\n                        {longestValue}\r\n                    </Text>\r\n                    {height > 0 && width > 0 && (\r\n                        <Svg\r\n                            style={{\r\n                                position: 'absolute',\r\n                                top:0,\r\n                                left: 0,\r\n                                height: height,\r\n                                width: width,\r\n                            }}\r\n                        >\r\n                            <G>\r\n                                {React.Children.map(children, (child) => {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                })}\r\n                                {// don't render labels if width isn't measured yet,\r\n                                // causes rendering issues\r\n                                height > 0 &&\r\n                                    ticks.map((value, index) => {\r\n                                        return (\r\n                                            <SVGText\r\n                                                originY={y(value)}\r\n                                                textAnchor={'middle'}\r\n                                                x={'50%'}\r\n                                                alignmentBaseline={'middle'}\r\n                                                {...svg}\r\n                                                key={y(value)}\r\n                                                y={y(value)}\r\n                                                //opacity={index % 2 ? 0 : 1}\r\n                                            >\r\n                                                {formatLabel(value, index, ticks.length)}\r\n                                            </SVGText>\r\n                                        )\r\n                                    })}\r\n                            </G>\r\n                        </Svg>\r\n                    )}\r\n                </View>\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nYAxis.propTypes = {\r\n    data: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.object), PropTypes.arrayOf(PropTypes.number)]).isRequired,\r\n    svg: PropTypes.object,\r\n    style: PropTypes.any,\r\n    numberOfTicks: PropTypes.number,\r\n    formatLabel: PropTypes.func,\r\n    contentInset: PropTypes.shape({\r\n        top: PropTypes.number,\r\n        bottom: PropTypes.number,\r\n    }),\r\n    min: PropTypes.number,\r\n    max: PropTypes.number,\r\n    yAccessor: PropTypes.func,\r\n    scale: PropTypes.func,\r\n    spacingInner: PropTypes.number,\r\n    spacingOuter: PropTypes.number,\r\n}\r\n\r\nYAxis.defaultProps = {\r\n    numberOfTicks: 8,\r\n    spacingInner: 0.05,\r\n    spacingOuter: 0.05,\r\n    contentInset: {},\r\n    svg: {},\r\n    scale: d3Scale.scaleLinear,\r\n    formatLabel: (value) => value && value.toString(),\r\n    yAccessor: ({ item }) => item,\r\n}\r\n\r\nexport default YAxis\r\n","import React from 'react'\r\nimport { Line } from 'react-native-svg'\r\n\r\nclass HorizontalLine extends React.Component {\r\n    render() {\r\n        const { y, value, ...other } = this.props\r\n        return <Line x1={'0%'} x2={'100%'} y1={y(value)} y2={y(value)} {...other} />\r\n    }\r\n}\r\n\r\nHorizontalLine.defaultProps = {\r\n    stroke: 'black',\r\n}\r\n\r\nexport default HorizontalLine\r\n","import PropTypes from 'prop-types'\r\nimport React from 'react'\r\nimport { Circle } from 'react-native-svg'\r\n\r\nconst Point = ({ x, y, value, index, radius, color }) => {\r\n    if (isNaN(value)) {\r\n        return <Circle />\r\n    }\r\n\r\n    return <Circle cx={x(index)} cy={y(value)} r={radius} stroke={color} fill={'white'} />\r\n}\r\n\r\nPoint.propTypes = {\r\n    x: PropTypes.func.isRequired,\r\n    y: PropTypes.func.isRequired,\r\n    value: PropTypes.number,\r\n    radius: PropTypes.number,\r\n    index: PropTypes.number,\r\n    color: PropTypes.string,\r\n}\r\n\r\nPoint.defaultProps = {\r\n    radius: 4,\r\n    color: 'black',\r\n}\r\n\r\nexport default Point\r\n","import PropTypes from 'prop-types'\r\nimport React from 'react'\r\nimport { Circle, G, Line, Rect, Text } from 'react-native-svg'\r\n\r\nconst Tooltip = ({ x, y, value, index, height, text, stroke, pointStroke }) => {\r\n    return (\r\n        <G>\r\n            <Line x1={x(index)} y1={height} x2={x(index)} y2={20} stroke={stroke} />\r\n            <Circle cx={x(index)} cy={y(value)} r={4} stroke={pointStroke} strokeWidth={2} fill={'white'} />\r\n            <G x={x(index) < 40 ? 40 : x(index)} y={10}>\r\n                <Rect x={-40} y={1} width={80} height={20} fill={'rgba(0, 0, 0, 0.2)'} rx={2} ry={2} />\r\n                <Rect x={-40} y={0} width={80} height={20} fill={'white'} rx={2} ry={2} />\r\n                <Text fontSize='12' textAnchor='middle'>\r\n                    {text}\r\n                </Text>\r\n            </G>\r\n        </G>\r\n    )\r\n}\r\n\r\nTooltip.propTypes = {\r\n    x: PropTypes.func.isRequired,\r\n    y: PropTypes.func.isRequired,\r\n    value: PropTypes.number,\r\n    index: PropTypes.number,\r\n    height: PropTypes.number,\r\n    stroke: PropTypes.string,\r\n    pointStroke: PropTypes.string,\r\n    text: PropTypes.string,\r\n}\r\n\r\nexport default Tooltip\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { G, Line } from 'react-native-svg'\r\n \r\nconst Horizontal = ({ ticks = [], y, svg }) => {\r\n    return (\r\n        <G>\r\n            {ticks.map((tick) => (\r\n                <Line\r\n                    key={tick}\r\n                    x1={'0%'}\r\n                    x2={'100%'}\r\n                    y1={y(tick)}\r\n                    y2={y(tick)}\r\n                    strokeWidth={1}\r\n                    stroke={'rgba(0,0,0,0.2)'}\r\n                    {...svg}\r\n                />\r\n            ))}\r\n        </G>\r\n    )\r\n}\r\n\r\nconst Vertical = ({ ticks = [], x, svg }) => {\r\n    return (\r\n        <G>\r\n            {ticks.map((tick, index) => (\r\n                <Line\r\n                    key={index}\r\n                    y1={'0%'}\r\n                    y2={'100%'}\r\n                    x1={x(tick)}\r\n                    x2={x(tick)}\r\n                    strokeWidth={1}\r\n                    stroke={'rgba(0,0,0,0.2)'}\r\n                    {...svg}\r\n                />\r\n            ))}\r\n        </G>\r\n    )\r\n}\r\n\r\nconst Both = (props) => {\r\n    return (\r\n        <G>\r\n            <Horizontal {...props} />\r\n            <Vertical {...props} />\r\n        </G>\r\n    )\r\n}\r\n\r\nVertical.propTypes = {\r\n    x: PropTypes.func,\r\n    dataPoints: PropTypes.array,\r\n    svg: PropTypes.object,\r\n}\r\n\r\nHorizontal.propTypes = {\r\n    y: PropTypes.func,\r\n    ticks: PropTypes.array,\r\n}\r\n\r\nBoth.propTypes = {\r\n    ...Vertical.propTypes,\r\n    ...Horizontal.propTypes,\r\n}\r\n\r\nconst Direction = {\r\n    VERTICAL: 'VERTICAL',\r\n    HORIZONTAL: 'HORIZONTAL',\r\n    BOTH: 'BOTH',\r\n}\r\n\r\nconst Grid = ({ direction, ...props }) => {\r\n    if (direction === Direction.VERTICAL) {\r\n        return <Vertical {...props} />\r\n    } else if (direction === Direction.HORIZONTAL) {\r\n        return <Horizontal {...props} />\r\n    } else if (direction === Direction.BOTH) {\r\n        return <Both {...props} />\r\n    }\r\n\r\n    return null\r\n}\r\n\r\nGrid.Direction = Direction\r\n\r\nGrid.propTypes = {\r\n    direction: PropTypes.oneOf(Object.values(Direction)),\r\n    belowChart: PropTypes.bool,\r\n    svg: PropTypes.object,\r\n}\r\n\r\nGrid.defaultProps = {\r\n    direction: Direction.HORIZONTAL,\r\n    belowChart: true,\r\n}\r\n\r\nexport default Grid\r\n","import React, { useEffect, useRef, useState } from 'react';\r\n// import * as React from 'react'\r\n\r\nimport { chartColors, row, sizes } from \"../style\";\r\nimport {\r\n    PanResponder,\r\n    Dimensions,\r\n    Text,\r\n    TouchableOpacity,\r\n    View,\r\n} from 'react-native';\r\nimport { LineChart, XAxis, YAxis } from '../charts-js/';\r\nimport {\r\n    Circle,\r\n    Defs,\r\n    G,\r\n    Line,\r\n    LinearGradient,\r\n    Path,\r\n    Rect,\r\n    Stop,\r\n    Text as SvgText,\r\n} from 'react-native-svg';\r\nimport * as shape from 'd3-shape';\r\nimport { toDollarsAndCents, toDateMonthYear, toDateDayMonth } from '../utils/misc';\r\n\r\n\r\nexport default InteractiveChart;\r\n\r\nfunction InteractiveChart(props: any) {\r\n    const apx = (size = 0) => {\r\n        let width = Dimensions.get('window').width; //useDimensions\r\n        if (width > 680) width = 680\r\n        return (width / 750) * size;\r\n    };\r\n    \r\n    if (!props.data) {\r\n        props = {data: [{date: String(new Date()), return: 2}, {date: String(new Date(\"9/1/2022\")) , return: 1}]}\r\n    }\r\n    //console.log(props.data.map((a: any) => a.date));\r\n    const dateList = props.data.map((a: any) => a.x);\r\n    //const [dateList, setDateList] = useState([]);\r\n\r\n\r\n    const priceList = props.data.map((a: any) => a.y)\r\n    //const [priceList, setPriceList] = useState([]);\r\n    \r\n    const size = useRef(dateList.length);\r\n    size.current = dateList.length;\r\n    \r\n    \r\n    const [positionX, setPositionX] = useState(-1);// The currently selected X coordinate position\r\n\r\n    const panResponder = useRef(\r\n        PanResponder.create({\r\n            // \r\n            onStartShouldSetPanResponder: (evt, gestureState) => true,\r\n            onStartShouldSetPanResponderCapture: (evt, gestureState) => true,\r\n            onMoveShouldSetPanResponder: (evt, gestureState) => true,\r\n            onMoveShouldSetPanResponderCapture: (evt, gestureState) => true,\r\n            onPanResponderTerminationRequest: (evt, gestureState) => true,\r\n\r\n            onPanResponderGrant: (evt, gestureState) => {\r\n                updatePosition(evt.nativeEvent.locationX);\r\n                return true;\r\n            },\r\n            onPanResponderMove: (evt, gestureState) => {\r\n                updatePosition(evt.nativeEvent.locationX);\r\n                return true;\r\n            },\r\n            onPanResponderRelease: () => {\r\n                setPositionX(-1);\r\n            },\r\n        })\r\n    );\r\n\r\n    const updatePosition = (x: any) => {\r\n        const YAxisWidth = apx(130);\r\n        const x0 = apx(0);// x0 position\r\n        const chartWidth = apx(750) - YAxisWidth - x0;\r\n        const xN = x0 + chartWidth;//xN position\r\n        const xDistance = chartWidth / size.current;// The width of each coordinate point\r\n\r\n        \r\n        if (x <= x0) {\r\n            x = x0;\r\n        }\r\n        if (x >= xN) {\r\n            x = xN;\r\n        }\r\n\r\n        // console.log((x - x0) )\r\n\r\n        // The selected coordinate x :\r\n        // (x - x0)/ xDistance = value\r\n        let value = Number(((x - x0) / xDistance).toFixed(0));\r\n        if (value >= size.current - 1) {\r\n            value = size.current - 1; // Out of chart range, automatic correction\r\n        }\r\n\r\n        setPositionX(Number(value));\r\n    };\r\n\r\n    const CustomGrid = ( props: {x: any, y: any, ticks: any, performance: Boolean} ) => (\r\n\r\n        <G>\r\n            {\r\n                // Horizontal grid\r\n                props.ticks.map((tick: any) => (\r\n                    \r\n                    <Line\r\n                        key={tick}\r\n                        x1=\"0%\"\r\n                        x2=\"100%\"\r\n                        y1={props.y(1)}\r\n                        y2={props.y(1)}\r\n                        strokeWidth={props.performance ? 0.5 : 0}\r\n                        stroke=\"#35A265\"\r\n                        \r\n                    />\r\n                ))\r\n            }\r\n            {\r\n                // Vertical grid\r\n                /*\r\n                priceList.map((_, index) => (\r\n                    <Line\r\n                        key={index.toString()}\r\n                        y1=\"0%\"\r\n                        y2=\"0%\"\r\n                        x1={props.x(index)}\r\n                        x2={props.x(index)}\r\n                        stroke=\"#EEF3F6\"\r\n                    />\r\n                ))\r\n                */\r\n            }\r\n        </G>\r\n    );\r\n\r\n    const CustomLine = ( line: any ) => (\r\n        <Path\r\n            key=\"line\"\r\n            d={line}\r\n            stroke=\"#FEBE18\"\r\n            strokeWidth={apx(6)}\r\n            fill=\"none\"\r\n        />\r\n    );\r\n\r\n    const CustomGradient = () => (\r\n        <Defs key=\"gradient\">\r\n            <LinearGradient id=\"gradient\" x1=\"0\" x2=\"0%\" y2=\"100%\">\r\n                {/* <Stop offset=\"0%\" stopColor=\"rgb(134, 65, 244)\" /> */}\r\n                {/* <Stop offset=\"100%\" stopColor=\"rgb(66, 194, 244)\" /> */}\r\n\r\n                <Stop offset=\"0%\" stopColor=\"#FEBE18\" stopOpacity={0.25} />\r\n                <Stop offset=\"100%\" stopColor=\"#FEBE18\" stopOpacity={0} />\r\n            </LinearGradient>\r\n        </Defs>\r\n    );\r\n\r\n    const Tooltip = ( props: {x: any, y: any, ticks: any} ) => {\r\n        if (positionX < 0) {\r\n            return null;\r\n        }\r\n        const date = dateList[positionX];\r\n\r\n        return (\r\n            <G x={props.x(positionX)} key=\"tooltip\">\r\n                <G\r\n                    x={positionX > size.current / 2 ? -apx(300 + 10) : apx(10)}\r\n                    y={props.y(priceList[positionX]) - apx(10)}>\r\n                    <Rect\r\n                        y={-apx(24 + 24 + 20) / 2}\r\n                        rx={apx(12)} // borderRadius\r\n                        ry={apx(12)} // borderRadius\r\n                        width={apx(300)}\r\n                        height={apx(96)}\r\n                        stroke=\"rgba(254, 190, 24, 0.27)\"\r\n                        fill=\"rgba(255, 255, 255, 0.8)\"\r\n                    />\r\n\r\n                    <SvgText x={apx(20)} fill=\"#617485\" opacity={0.65} fontSize={apx(24)}>\r\n                        {(new Date(date)).toLocaleDateString()}\r\n                    </SvgText>\r\n                    <SvgText\r\n                        x={apx(20)}\r\n                        y={apx(24 + 20)}\r\n                        fontSize={apx(24)}\r\n                        fontWeight=\"bold\"\r\n                        fill=\"rgba(224, 188, 136, 1)\">\r\n                        {toDollarsAndCents(priceList[positionX])}\r\n                    </SvgText>\r\n                </G>\r\n\r\n                <G x={props.x}>\r\n                    <Line\r\n                        y1={props.ticks[0]}\r\n                        y2={props.ticks[Number(props.ticks.length)]}\r\n                        stroke=\"#FEBE18\"\r\n                        strokeWidth={apx(4)}\r\n                        strokeDasharray={[6, 3]}\r\n                    />\r\n\r\n                    <Circle\r\n                        cy={props.y(priceList[positionX])}\r\n                        r={apx(20 / 2)}\r\n                        stroke=\"#fff\"\r\n                        strokeWidth={apx(2)}\r\n                        fill=\"#FEBE18\"\r\n                    />\r\n                </G>\r\n            </G>\r\n        );\r\n    };\r\n\r\n    const verticalContentInset = { top: 10, bottom: 10 };\r\n\r\n    return (\r\n        <View\r\n            style={{\r\n                backgroundColor: '#fff',\r\n                alignItems: 'stretch',\r\n                borderWidth: 1, \r\n                borderRadius: sizes.rem0_5 / 2,\r\n                borderColor: \"#ccc\",\r\n                padding: sizes.rem0_5,\r\n                //aspectRatio: 16 / 9,\r\n            }}>\r\n            <View\r\n                style={{\r\n                    flexDirection: 'row',\r\n                    width: \"100%\",\r\n                    //height: apx(570),\r\n                    aspectRatio: 16 / 9,\r\n                    alignSelf: 'stretch',\r\n                    \r\n                }}>\r\n                <View style={{ flex: 1 }} {...panResponder.current.panHandlers}>\r\n                    <LineChart\r\n                        style={{ flex: 1 }}\r\n                        data={priceList}\r\n                        //curve={shape.curveNatural}\r\n                        curve={shape.curveMonotoneX}\r\n                        contentInset={{ ...verticalContentInset }}\r\n                        svg={{ stroke: \"#11146F\" }}>\r\n                        {/*<CustomLine />*/}\r\n                        <CustomGrid x={undefined} y={undefined} ticks={undefined} performance={props.performance} />\r\n                        <CustomGradient />\r\n                        <Tooltip x={undefined} y={undefined} ticks={undefined} />\r\n                    </LineChart>\r\n                </View>\r\n\r\n                <YAxis\r\n                    style={{ width: \"12%\" }}\r\n                    data={priceList}\r\n                    contentInset={verticalContentInset}\r\n                    svg={{ fontSize: apx(18), fill: '#617485',\r\n                }}\r\n                    numberOfTicks={5}\r\n                    \r\n                    formatLabel={(value: any, index: any) => `$${String(value).split('.')[0].length > 2 ? value.toFixed(1) : value.toFixed(2)}`}\r\n                />\r\n            </View>\r\n            <XAxis\r\n                style={{\r\n                    alignSelf: 'stretch',\r\n                    // marginTop: apx(57),\r\n                    width: \"100%\",\r\n                    height: apx(70),\r\n                }}\r\n                numberOfTicks={props.period === '1D' ? 1 : 5}\r\n                data={priceList}\r\n                formatLabel={(value: any, index: any) => ['1D', '1W', '1M'].includes(props.period) ? toDateDayMonth(dateList[value]) : toDateMonthYear(dateList[value])}\r\n                contentInset={{\r\n                    left: apx(46),\r\n                    right: apx(100),\r\n                }}\r\n                svg={{\r\n                    fontSize: apx(18),\r\n                    fill: '#617485',\r\n                    y: apx(20),\r\n                    rotation: 30,\r\n                    textAnchor:'start'\r\n                    // originY: 30,\r\n                }}\r\n            />\r\n        </View>\r\n    );\r\n}","import { Button, ButtonGroup as UI_ButtonGroup, ButtonGroupProps, ButtonProps, Text } from \"@ui-kitten/components\"\r\nimport React, { useState } from \"react\"\r\nimport { sizes } from \"../style\"\r\n\r\nexport const ButtonGroup = <T extends string>(props: {\r\n    value: T | undefined,\r\n    onValueChange: (value: T) => void\r\n    items: { label: string, value: T }[],\r\n    unselectedStyle?: ButtonProps[\"style\"],\r\n    style?: ButtonGroupProps[\"style\"]\r\n}) => {\r\n    return <UI_ButtonGroup style={[{ width: \"100%\", marginBottom: sizes.rem1 }, props.style]}>\r\n        {\r\n            props.items.map((v, idx, arr) => {\r\n                const isSelected = props.value === v.value;\r\n                const opacity = isSelected ? 1 : 0.5;\r\n                //console.log(`Button at idx ${idx} isSelected: ${isSelected} with opacity of ${opacity}`);\r\n\r\n                return <Button key={'button_' + idx + \"_\" + isSelected}\r\n                    style={[\r\n                        {\r\n                            backgroundColor: isSelected ? \"green\" : \"#777\",\r\n                            width: 100 / arr.length + \"%\",\r\n                            minWidth: 100 / arr.length + \"%\",\r\n                            opacity\r\n                        }, isSelected ? props.unselectedStyle : undefined]\r\n                    }\r\n                    onPress={() => props.onValueChange(v.value)}>\r\n                        {evaProps => \r\n                            <Text {...evaProps} style={{ color: 'white', fontSize: 14 }}>\r\n                                {v.label}\r\n                            </Text>}\r\n                    </Button>\r\n            })\r\n        }\r\n    </UI_ButtonGroup>\r\n\r\n}\r\n\r\n\r\n","import React, { PropsWithChildren, useEffect, useRef, useState, Component } from \"react\"\r\nimport { NavigationProp, useNavigation } from \"@react-navigation/native\"\r\nimport { Avatar, Icon } from \"@ui-kitten/components\"\r\nimport { View, Text, Pressable, ScrollView, useWindowDimensions, Animated, FlatList, NativeSyntheticEvent, NativeScrollEvent } from \"react-native\"\r\nimport { ElevatedSection, Section, Subsection } from \"./Section\"\r\nimport { NoteEditor, SecPressable } from \"../screens/WatchlistViewerScreen\"\r\nimport { fonts, sizes } from \"../style\"\r\nimport { AppColors } from \"../constants/Colors\"\r\nimport { toDollars, toDollarsAndCents, toNumber1, toPercent1 } from \"../utils/misc\"\r\n\r\nexport const HoldingRenderItem = (props: {item: any, byId: any, isOwner: boolean}) => {\r\n    const { item, byId } = props\r\n    const secId = item.item.security_id;\r\n    //const intradayChange = item.item.price ? item.item.price.price - item.item.price.open : 0\r\n    //const hideEmptyNote = watchlist?.user[0].id !== appUser?.id\r\n    return (\r\n        <ElevatedSection title=\"\" style={{flex: 1, marginBottom: sizes.rem1_5 / 2, marginHorizontal: sizes.rem1_5 / 4, paddingHorizontal: sizes.rem0_5, paddingVertical: sizes.rem0_5}}>\r\n        <View style={{flexDirection: 'row', justifyContent: 'center'}}>\r\n            <SecPressable securityId={byId[secId] ? (byId[secId].symbol === 'USD:CUR' ? -1 : secId) : -1}>                                        \r\n                <Avatar\r\n                    style={{borderWidth: 1, borderColor: '#ccc'}}\r\n                    resizeMode={'contain'}\r\n                    size=\"large\"\r\n                    shape=\"rounded\"\r\n                    source={\r\n                        (() => {\r\n                            let output: { uri: string } | undefined;\r\n                            output = byId[secId] ? { uri: byId[secId].logo_url  } : undefined\r\n                            return output;\r\n                        })()}\r\n                    />\r\n            </SecPressable>\r\n            <View style={{flex: 1, alignItems: 'center'}}>\r\n                <Text style={{flex: 1, fontWeight: '900', color: '#454545'}}>\r\n                            {byId[secId] ? (byId[secId].symbol === 'USD:CUR' ? 'Cash' : byId[secId].symbol) : ''}\r\n                </Text>\r\n                <Text style={[item.item.optionInfo ? {display: 'flex'} : {display: 'none'}, {fontSize: fonts.xSmall}]}>\r\n                        {item.item.optionInfo && `${String(item.item.optionInfo[0].type).toLowerCase() === 'call' ? 'C' : 'P'}${toNumber1(item.item.optionInfo[0].strike_price)} ${new Date(item.item.optionInfo[0].expiration).toLocaleDateString()}`}\r\n                    </Text>\r\n                <Text style={[{flex: 1, color: '#606060'}, byId[secId] ? (byId[secId].symbol === 'USD:CUR' ? {display: 'none'} : {display: 'flex'}) : {display: 'none'}]}>\r\n                    {toDollarsAndCents(item.item.price)}\r\n                </Text>\r\n            </View>\r\n\r\n        </View>\r\n        <View style={{flex: 1, alignContent: 'space-between', marginTop: sizes.rem0_5, flexDirection: 'row'}}>\r\n            <View style={{flex: 1, alignItems: 'center', flexDirection: 'row'}}>\r\n                <View style={{flex: 1, alignItems: 'center'}}>\r\n                    <Text style={{fontSize: fonts.medium / 2, color: '#9D9D9D'}}>\r\n                        {props.isOwner ? 'Market Value' : '% Portfolio'}\r\n                    </Text>\r\n                    <Text style={{fontSize: fonts.small, color: '#606060'}}>\r\n                        {props.isOwner ? `${toDollars(item.item.value)}` : `${toPercent1(item.item.value)}`}\r\n                    </Text>\r\n                </View>\r\n                <View style={[{flex: 1, alignItems: 'center'}, byId[secId] ? (byId[secId].symbol === 'USD:CUR' ? {display: 'none'} : {display: 'flex'}) : {display: 'none'}]}>\r\n                    <Text style={{fontSize: fonts.medium / 2, color: '#9D9D9D'}}>\r\n                        {'Cost'}\r\n                    </Text>\r\n                    <Text style={{fontSize: fonts.small, color: '#606060'}}>\r\n                        {`${toDollarsAndCents(item.item.cost_basis)}`}\r\n                    </Text>                                                    \r\n                </View>\r\n            </View>\r\n        </View>\r\n        <View style={[{flex: 1, flexDirection: 'row'}, props.isOwner ? {display: 'flex'} : {display: 'none'}]}>\r\n            <View style={[{flex: 1, alignItems: 'center'}, byId[secId] ? (byId[secId].symbol === 'USD:CUR' ? {display: 'none'} : {display: 'flex'}) : {display: 'none'}]}>\r\n                <Text style={{fontSize: fonts.medium / 2, color: '#9D9D9D'}}>\r\n                    {'Profit/Loss'}\r\n                </Text>\r\n                <Text style={[{fontSize: fonts.small}, \r\n                               item.item.pnl >= 0 ? (item.item.pnl === 0 ? {color: 'black'} : {color: 'green'}) : {color: 'red'}]}>\r\n                    {`${toDollars(item.item.pnl)}`}\r\n                </Text>\r\n            </View>\r\n\r\n        </View>\r\n    </ElevatedSection>\r\n    )\r\n}","import React, { PropsWithChildren, useEffect, useRef, useState, Component } from \"react\"\r\nimport { NavigationProp, useNavigation } from \"@react-navigation/native\"\r\nimport { Avatar, Icon } from \"@ui-kitten/components\"\r\nimport { View, Text, Pressable, ScrollView, useWindowDimensions, Animated, FlatList, NativeSyntheticEvent, NativeScrollEvent } from \"react-native\"\r\nimport { ElevatedSection, Section, Subsection } from \"./Section\"\r\nimport { NoteEditor, SecPressable } from \"../screens/WatchlistViewerScreen\"\r\nimport { fonts, sizes } from \"../style\"\r\nimport { AppColors } from \"../constants/Colors\"\r\nimport { toDollars, toDollarsAndCents, toFormatedDateTime, toNumber1 } from \"../utils/misc\"\r\n\r\nexport const TradeRenderItem = (props: {item: any, byId: any, isOwner: boolean}) => {\r\n    const { item, byId } = props\r\n    const secId = item.item.security_id || item.item.securityId;\r\n    //const intradayChange = item.item.price ? item.item.price.price - item.item.price.open : 0\r\n    //const hideEmptyNote = watchlist?.user[0].id !== appUser?.id\r\n    return (\r\n        <ElevatedSection title=\"\" style={{flex: 1, marginBottom: sizes.rem1_5 / 2, marginHorizontal: sizes.rem1_5 / 4, paddingHorizontal: sizes.rem0_5, paddingVertical: sizes.rem0_5}}>\r\n            <View style={{flexDirection: 'row', justifyContent: 'center'}}>\r\n                <SecPressable securityId={secId}>                                        \r\n                    <Avatar\r\n                        style={{borderWidth: 1, borderColor: '#ccc'}}\r\n                        resizeMode={'contain'}\r\n                        size=\"large\"\r\n                        shape=\"rounded\"\r\n                        source={\r\n                            (() => {\r\n                                let output: { uri: string } | undefined;\r\n                                output = byId[secId] ? { uri: byId[secId].logo_url  } : undefined\r\n                                return output;\r\n                            })()}\r\n                        />\r\n                </SecPressable>\r\n                <View style={{flex: 1, alignItems: 'center'}}>\r\n                    <Text style={{flex: 1, fontWeight: '900', color: '#454545'}}>\r\n                                {byId[secId] ? (byId[secId].symbol === 'USD:CUR' ? 'Cash' : `${item.item.type.slice(0,1).toUpperCase() + item.item.type.slice(1) } ${byId[secId].symbol}`) : ''}\r\n                    </Text>\r\n                    <Text style={[item.item.optionInfo ? {display: 'flex'} : {display: 'none'}, {fontSize: fonts.xSmall}]}>\r\n                        {item.item.optionInfo && `${String(item.item.optionInfo[0].type).toLowerCase() === 'call' ? 'C' : 'P'}${toNumber1(item.item.optionInfo[0].strike_price)} ${new Date(item.item.optionInfo[0].expiration).toLocaleDateString()}`}\r\n                    </Text>\r\n                    <Text style={{flex: 1, color: '#606060'}}>\r\n                        {`@ ${toDollarsAndCents(item.item.price)}`}\r\n                    </Text>\r\n                </View>\r\n            </View>\r\n            <View style={{flex: 1, alignContent: 'space-between', marginTop: sizes.rem0_5, flexDirection: 'row'}}>\r\n                <View style={[{flex: 1, alignItems: 'center', flexDirection: 'row'}, props.isOwner ? {display: 'flex'} : {display: 'none'}]}>\r\n                    <View style={{flex: 1, alignItems: 'center'}}>\r\n                        <Text style={{fontSize: fonts.medium / 2, color: '#9D9D9D'}}>\r\n                            {'Quantity'}\r\n                        </Text>\r\n                        <Text style={{fontSize: fonts.small, color: '#606060'}}>\r\n                            {`${item.item.quantity}`}\r\n                        </Text>\r\n                    </View>\r\n                    <View style={{flex: 1, alignItems: 'center'}}>\r\n                        <Text style={{fontSize: fonts.medium / 2, color: '#9D9D9D'}}>\r\n                            {'Market Value'}\r\n                        </Text>\r\n                        <Text style={{fontSize: fonts.small, color: '#606060'}}>\r\n                            {`${toDollars(item.item.amount)}`}\r\n                        </Text>                                                    \r\n                    </View>\r\n                </View>\r\n            </View>\r\n            <View style={{flex: 1, flexDirection: 'row'}}>\r\n            <View style={{flex: 1, alignItems: 'center'}}>\r\n                <Text style={{fontSize: fonts.medium / 2, color: '#9D9D9D'}}>\r\n                    {'Trade Date'}\r\n                </Text>\r\n                <Text style={[{fontSize: fonts.xSmall}]}>\r\n                    {`${(new Date(item.item.date)).getUTCHours() !== 12 ? toFormatedDateTime(String(item.item.date)) : (new Date(item.item.date)).toLocaleDateString()}`}\r\n                </Text>\r\n            </View>\r\n        </View>\r\n        </ElevatedSection>\r\n    )\r\n}","import React, {ReactElement, ReactNode, useEffect, useRef, useState} from \"react\";\r\nimport {Api} from '@tradingpost/common/api'\r\nimport {Tab, TabBar, TabView, Text} from \"@ui-kitten/components\";\r\n//import { ensureCurrentUser } from \"../apis/Authentication\";\r\nimport {ProfileBanner, profileImageSize, profileImageSmall, useProfileBannerSize} from \"../components/ProfileBanner\";\r\n//import { IAmiraUser } from \"../interfaces/IUser\";\r\n//import { DashboardScreen, DashProps, fullDashOptions, IDashboard } from \"../layouts/DashboardLayout\";\r\n//import { } from 'react-native-linear-gradient'\r\nimport {flex, fonts, paddView, row, sizes} from \"../style\";\r\nimport {\r\n    Animated,\r\n    View,\r\n    ScrollView,\r\n    NativeScrollEvent,\r\n    NativeSyntheticEvent,\r\n    useWindowDimensions,\r\n    Alert,\r\n    FlatList,\r\n    ViewStyle\r\n} from \"react-native\";\r\nimport {AwaitedReturn, DEV_ONLY, toPercent2, toDollarsAndCents, toThousands} from \"../utils/misc\";\r\nimport {SecondaryButton} from \"../components/SecondaryButton\";\r\nimport {ElevatedSection, Section, Subsection} from \"../components/Section\";\r\n//import { PostList, usePostLoader } from \"../components/PostList\";\r\n//import { getCompetitionsPast } from \"../apis/CompetitionApi\";\r\nimport {stringyDate, Table} from \"../components/Table\";\r\n//import { ChipPicker } from \"../components/ChipBar\";\r\nimport {PieHolder} from \"../components/PieHolder\";\r\nimport {WatchlistSection} from \"../components/WatchlistSection\";\r\n//import { TabScreenProps } from \"../navigation\";\r\nimport {IUserGet} from \"@tradingpost/common/api/entities/interfaces\";\r\nimport {useToast} from \"react-native-toast-notifications\";\r\nimport {FeedPart} from \"./FeedScreen\";\r\nimport {AppColors} from \"../constants/Colors\";\r\nimport {useMakeSecurityFields} from \"./WatchlistViewerScreen\";\r\nimport {PrimaryChip} from \"../components/PrimaryChip\";\r\nimport {useAppUser} from \"../Authentication\";\r\nimport InteractiveChart from \"../components/InteractiveGraph\";\r\nimport {ButtonGroup} from \"../components/ButtonGroup\";\r\nimport {RootStackScreenProps} from \"../navigation/pages\";\r\nimport { List } from \"../components/List\";\r\nimport { HoldingRenderItem } from \"../components/HoldingRenderItem\";\r\nimport { useSecuritiesList } from \"../SecurityList\";\r\nimport { TradeRenderItem } from \"../components/TradeRenderItem\";\r\n//import { screens } from \"../navigationComponents\";\r\n//import { getUser } from \"../apis/UserApi\";\r\n\r\n//May need to be changed for ios\r\nconst TabPanelSize = 48;\r\nconst StatusBarsize = 20;\r\nconst ButtonMargin = 8;\r\nconst ButtonBarsize = 43;\r\nconst titles = 27 + 17;\r\nconst tabBarMargin = sizes.rem1;\r\nconst clampBuffer = 4;\r\n\r\nconst collapseShift = 2 * ButtonMargin;\r\n\r\nconst periods: { [key: string]: number } = {\r\n    \"1D\": 1,\r\n    \"1W\": 5,\r\n    \"1M\": 20,\r\n    \"3M\": 60,\r\n    \"1Y\": 252,\r\n    \"2Y\": 504,\r\n    \"Max\": 1000\r\n}\r\n\r\nexport function ProfileScreen(props: RootStackScreenProps<'Profile'>) {\r\n    const userId = props.route?.params?.userId;\r\n\r\n    const [user, setUser] = useState<IUserGet>(),\r\n        [watchlists, setWatchlists] = useState<AwaitedReturn<typeof Api.User.extensions.getWatchlists>>(),\r\n        [summary, setSummary] = useState<AwaitedReturn<typeof Api.User.extensions.getPortfolio>>(),\r\n        [holdings, setHoldings] = useState<AwaitedReturn<typeof Api.User.extensions.getHoldings>>(),\r\n        [returns, setReturns] = useState<AwaitedReturn<typeof Api.User.extensions.getReturns>>(),\r\n        [twReturns, settwReturns] = useState<{ x: string, y: number }[]>(),\r\n        [portPeriod, setPortPeriod] = useState(\"1Y\"),\r\n        translateHeaderY = useRef(new Animated.Value(0)).current;\r\n\r\n    const dim = useWindowDimensions();\r\n    const scrollRef = useRef<FlatList>(null);\r\n    const bannerHeight = useProfileBannerSize(),\r\n        headerHeight = bannerHeight + TabPanelSize + ButtonBarsize + ButtonMargin * 2 + titles + tabBarMargin;\r\n\r\n    const clampMax = bannerHeight - profileImageSmall;\r\n    const minViewHeightCollapsed = dim.height - clampMax - StatusBarsize - headerHeight + bannerHeight + 2 * titles;\r\n    const minViewHeight = dim.height - headerHeight;\r\n    const [collapsed, setCollapsed] = useState(false);\r\n    const [isMaxed, setIsMaxed] = useState(false);\r\n    const translation = translateHeaderY.interpolate({\r\n        inputRange: [0, clampMax],\r\n        outputRange: [0, -clampMax],\r\n        extrapolate: 'clamp',\r\n    });\r\n    const manager = useRef<boolean[]>([]).current;\r\n    const {loginState} = useAppUser(),\r\n        appUser = loginState?.appUser\r\n\r\n\r\n    useEffect(() => {\r\n        translation.addListener((v: { value: number }) => {\r\n            const c = Math.abs(v.value + clampMax) < profileImageSize - profileImageSmall + 8;\r\n            const isMaxed = -v.value === clampMax;\r\n            setCollapsed(c);\r\n            setIsMaxed(isMaxed);\r\n        });\r\n        return () => translation.removeAllListeners();\r\n    }, [translation, clampMax]);\r\n\r\n    const [tab, setTab] = useState(0);\r\n    //const dashRef = useRef<any>()\r\n    const toast = useToast();\r\n\r\n    useEffect(() => {\r\n\r\n        if (userId && !user) {\r\n            (async () => {\r\n                try {\r\n                    const [user, holdingsP, watchlists] = await Promise.all([\r\n                        Api.User.get(userId),\r\n                        Api.User.extensions.getHoldings({userId: userId as string}),\r\n                        Api.User.extensions.getWatchlists({userId: userId as string})\r\n                    ]);\r\n                    setWatchlists(watchlists);\r\n                    setHoldings(holdingsP);\r\n                    setUser(user);\r\n                    let today = new Date();\r\n                    const summary = await Api.User.extensions.getPortfolio({userId: userId as string});\r\n                    setSummary(summary);\r\n                    const returns = await Api.User.extensions.getReturns({\r\n                        userId: userId as string,\r\n                        startDate: new Date(today.setDate(today.getDate() - 1001)),\r\n                        endDate: new Date()\r\n                    })\r\n                    setReturns(returns);\r\n                    if (returns.length) {\r\n                        let twr: { x: string, y: number }[] = [];\r\n                        const day = new Date(String(returns.slice(returns.length - periods[portPeriod])[0].date))\r\n                        twr.push({x: (new Date(day.setDate(day.getDate() - 1))).toUTCString(), y: 1})\r\n\r\n                        returns.slice(returns.length - periods[portPeriod]).forEach((r, i) => {\r\n                            twr.push({x: new Date(String(r.date)).toUTCString(), y: twr[i].y * (1 + r.return)})\r\n                        })\r\n                        settwReturns(twr);\r\n                    }\r\n                } catch (ex: any) {\r\n                    toast.show(ex.message);\r\n                }\r\n            })()\r\n        }\r\n    }, [userId, user])\r\n\r\n    useEffect(() => {\r\n        if (returns?.length) {\r\n            let twr: { x: string, y: number }[] = [];\r\n            const day = new Date(String(returns.slice(returns.length - periods[portPeriod])[0].date))\r\n            twr.push({x: (new Date(day.setDate(day.getDate() - 1))).toUTCString(), y: 1})\r\n\r\n            returns?.slice(returns.length - periods[portPeriod]).forEach((r, i) => {\r\n                twr.push({x: new Date(String(r.date)).toUTCString(), y: twr[i].y * (1 + r.return)})\r\n            })\r\n            settwReturns(twr);\r\n        }\r\n    }, [portPeriod])\r\n    const { securities: { bySymbol, byId } } = useSecuritiesList();\r\n    const displayHoldings = appUser?.id === user?.id || (user?.settings?.portfolio_display.holdings && user.subscription.is_subscribed)\r\n    const displayTrades = appUser?.id === user?.id || (user?.settings?.portfolio_display.trades && user.subscription.is_subscribed)\r\n    const displayPerformance = appUser?.id === user?.id || (user?.settings?.portfolio_display.performance && user.subscription.is_subscribed)\r\n    return <View style={[flex]}>\r\n        <Animated.FlatList\r\n            data={[\r\n                <ProfilePage key={'top_level_user_feed'} style={{paddingHorizontal: 0}} index={0}\r\n                             minViewHeight={minViewHeight} manager={manager} currentIndex={tab}>\r\n                    <FeedPart\r\n                        key={'user_feed'}\r\n                        userId={userId}\r\n                    />\r\n                </ProfilePage>,\r\n                <ProfilePage key={'top_level_performance_holdings'} index={1} minViewHeight={minViewHeight}\r\n                             manager={manager} currentIndex={tab}>\r\n                    <ElevatedSection title=\"Performance\">\r\n                        <View style={(appUser?.id === user?.id && !twReturns) ? {display: 'none'} : {display: 'flex'}}>\r\n                            <View style={displayPerformance ? {display: 'none'} : {\r\n                                justifyContent: \"center\",\r\n                                alignItems: 'center'\r\n                            }}>\r\n                                <Text style={{fontSize: fonts.medium, fontWeight: '500', color: '#ccc'}}>\r\n                                    {`@${user?.handle} does not display their investment performance.`}\r\n                                </Text>\r\n                            </View>\r\n                            <View style={displayPerformance ? {\r\n                                display: 'flex',\r\n                                marginBottom: sizes.rem1\r\n                            } : {display: 'none'}}>\r\n                                <View style={{marginBottom: sizes.rem1}}>\r\n                                    <InteractiveChart data={twReturns} period={portPeriod} performance={true}/>\r\n                                </View>\r\n                                <ButtonGroup key={\"period\"}\r\n                                             items={[\"1D\", \"1W\", \"1M\", \"3M\", \"1Y\", \"2Y\", \"Max\"].map(v => ({\r\n                                                 label: v,\r\n                                                 value: v\r\n                                             }))} onValueChange={(v) => setPortPeriod(v)} value={portPeriod}/>\r\n                            </View>\r\n                        </View>\r\n                        <Text\r\n                            style={[!(appUser?.id === user?.id && !twReturns) ? {display: 'none'} : {display: 'flex'}, {\r\n                                fontSize: fonts.medium,\r\n                                fontWeight: '500',\r\n                                color: '#ccc'\r\n                            }]}>\r\n                            {\"You haven't linked a brokerage to TradingPost. Go to your Account page in the Side Menu and Link one today!\"}\r\n                        </Text>\r\n                    </ElevatedSection>\r\n                    <Section title=\"Holdings\" style={{backgroundColor: AppColors.background}}>\r\n                        <View style={(appUser?.id === user?.id && !twReturns) ? {display: 'none'} : {display: 'flex'}}>\r\n                            <View style={displayHoldings ? {display: 'none'} : {\r\n                                justifyContent: \"center\",\r\n                                alignItems: 'center'\r\n                            }}>\r\n                                <Text style={{fontSize: fonts.medium, fontWeight: '500', color: '#ccc'}}>\r\n                                    {`@${user?.handle} does not display their investment holdings.`}\r\n                                </Text>\r\n                            </View>\r\n                            <View style={displayHoldings ? {\r\n                                display: 'flex',\r\n                                marginBottom: sizes.rem1\r\n                            } : {display: 'none'}}>\r\n                                <List\r\n                                    listKey=\"holdingsList\"\r\n                                    datasetKey={`holdings_id_${holdings?.length}`}\r\n                                    data={holdings}\r\n                                    loadingMessage={\" \"}\r\n                                    noDataMessage={\" \"}\r\n                                    loadingItem={undefined}\r\n                                    numColumns={2}\r\n                                    renderItem={(item) => {\r\n                                        return (\r\n                                            <HoldingRenderItem \r\n                                                item={item}\r\n                                                byId={byId}\r\n                                                isOwner={appUser?.id === user?.id}\r\n                                                />\r\n                                        )\r\n                                    }}\r\n                                />\r\n                            </View>\r\n                        </View>\r\n                        <Text\r\n                            style={[!(appUser?.id === user?.id && !twReturns) ? {display: 'none'} : {display: 'flex'}, {\r\n                                fontSize: fonts.medium,\r\n                                fontWeight: '500',\r\n                                color: '#ccc'\r\n                            }]}>\r\n                            {\"You haven't linked a brokerage to TradingPost. Go to your Account page in the Side Menu and Link one today!\"}\r\n                        </Text>\r\n                    </Section>\r\n                    <WatchlistSection title=\"Watchlists\" watchlists={watchlists}/>\r\n                </ProfilePage>,\r\n                <ProfilePage key={'top_level_trades'} index={2} minViewHeight={minViewHeight} manager={manager}\r\n                             currentIndex={tab}>\r\n                    <View style={displayTrades ? {display: 'none'} : {\r\n                        display: 'flex',\r\n                        height: '100%',\r\n                        justifyContent: \"center\",\r\n                        alignItems: 'center'\r\n                    }}>\r\n                        <Text style={{fontSize: fonts.medium, fontWeight: '500', color: '#ccc'}}>\r\n                            {`@${user?.handle} does not display their trades.`}\r\n                        </Text>\r\n                    </View>\r\n                    <Section title=\"\" style={[displayTrades ? {display: 'flex'} : {display: 'none'}, {backgroundColor: AppColors.background}]}>\r\n                        <List\r\n                            listKey={'trades_table'}\r\n                            loadingMessage={\" \"}\r\n                            noDataMessage={\" \"}\r\n                            loadingItem={undefined}\r\n                            numColumns={2}\r\n                            keyExtractor={(item, idx) => {\r\n                                return item ? \"trade_\" + idx : \"empty\";\r\n                            }}\r\n                            data={(async (a, $page) => {\r\n                                const newArr = a || [];\r\n                                newArr.push(...(await Api.User.extensions.getTrades({\r\n                                    $page,\r\n                                    $limit: 10,\r\n                                    settings: {userId: userId as string}\r\n                                })));\r\n                                //console.log(JSON.stringify(newArr))\r\n                                return newArr;\r\n                            })}\r\n                            renderItem={(item)=> {\r\n\r\n                                return (<TradeRenderItem \r\n                                    item={item}\r\n                                    byId={byId}\r\n                                    isOwner={appUser?.id === user?.id }\r\n                                />)\r\n                            }}\r\n                        />\r\n                    </Section>\r\n                </ProfilePage>,\r\n                <ProfilePage key={'top_level_about'} index={3} minViewHeight={minViewHeight} manager={manager}\r\n                             currentIndex={tab}>\r\n                    <ElevatedSection title=\"General\">\r\n                        <Subsection title=\"Biography\" alt={true}>\r\n                            <Text>{user?.bio}</Text>\r\n                        </Subsection>\r\n                        <View style={row}>\r\n                            <Subsection title=\"Strategy\" alt={true} style={flex}>\r\n                                <Text>{user?.analyst_profile?.investment_strategy}</Text>\r\n                            </Subsection>\r\n                            <Subsection title=\"Benchmark\" alt={true} style={flex}>\r\n                                <Text>{user?.analyst_profile?.benchmark}</Text>\r\n                            </Subsection>\r\n                        </View>\r\n                        <Subsection title=\"Interest &amp; Specialities\" alt={true} style={flex}>\r\n                            <View style={{flexDirection: \"row\"}}>\r\n                                {(user?.analyst_profile?.interests || [\"No\", \"Tags\", \"Here\"]).map((chip, i) =>\r\n                                    <PrimaryChip isAlt key={i} label={chip} style={{flex: 1}}/>)}\r\n                            </View>\r\n                        </Subsection>\r\n                    </ElevatedSection>\r\n                    <ElevatedSection title=\"Social Analytics\">\r\n                        <Text>\r\n                            Coming soon!\r\n                        </Text>\r\n                    </ElevatedSection>\r\n                </ProfilePage>\r\n            ]}\r\n            renderItem={(info) => {\r\n                return info.item;\r\n            }}\r\n            ref={scrollRef} contentContainerStyle={[{paddingTop: headerHeight}]} nestedScrollEnabled\r\n            onMomentumScrollEnd={(ev) => {\r\n                if (collapsed && !isMaxed) {\r\n                    scrollRef.current?.scrollToOffset({offset: clampMax, animated: true});\r\n                    setIsMaxed(true);\r\n                }\r\n            }}\r\n            onScroll={Animated.event<NativeSyntheticEvent<NativeScrollEvent>>([\r\n                {nativeEvent: {contentOffset: {y: translateHeaderY}}}\r\n            ], {useNativeDriver: true})}>\r\n        </Animated.FlatList>\r\n        <Animated.View style={{\r\n            position: \"absolute\",\r\n            top: 0,\r\n            backgroundColor: AppColors.background,\r\n            transform: [{translateY: translation}],\r\n            alignItems: \"stretch\",\r\n            width: \"100%\"\r\n        }}>\r\n            <ProfileBanner\r\n                subscriberCount={user?.subscription?.count}\r\n                navigator={props.navigation}\r\n                profilePic={user?.profile_url}\r\n                collapse={collapsed}\r\n                bannerPic={\"\"}\r\n                extraMarginTop={collapseShift}\r\n                platforms={user?.claims ? user?.claims.map(c => c.platform) : []}\r\n\r\n            />\r\n            <View style={[collapsed ? row : undefined, {width: \"100%\", alignItems: \"center\"}]}>\r\n                <View style={{marginHorizontal: collapsed ? sizes.rem1 : 0}}>\r\n                    <Text style={{\r\n                        color: \"black\",\r\n                        textAlign: !collapsed ? \"center\" : \"left\",\r\n                        fontSize: fonts.small\r\n                    }}>@{user?.handle || \"\"}</Text>\r\n                    <Text style={{\r\n                        color: \"black\",\r\n                        textAlign: !collapsed ? \"center\" : \"left\",\r\n                        fontSize: fonts.medium\r\n                    }}>{user?.display_name}</Text>\r\n                </View>\r\n                {appUser && user && <SecondaryButton\r\n                    {...(() => {\r\n                        let children: string;\r\n                        let onPress: () => void;\r\n                        let style;\r\n                        if (appUser && user && user?.id !== appUser?.id) {\r\n                            if (!user.subscription?.is_subscribed && !user.subscription?.is_pending) {\r\n                                children = `Subscribe ${(user.subscription?.cost as any) !== \"$0.00\" ? `${user.subscription.cost}/mo.` : \"(Free)\"}`\r\n                                onPress = async () => {\r\n                                    await Api.Subscriber.extensions.insertWithNotification({\r\n                                        subscription_id: user.subscription.id,\r\n                                        //TODO: this should be moved to the server side \r\n                                        start_date: new Date(),\r\n                                        user_id: user.id,\r\n                                        approved: !user.subscription.settings.approve_new\r\n                                    });\r\n                                    setUser(undefined);\r\n                                }\r\n                                style = {backgroundColor: \"#35A265\", borderColor: \"#35A265\"}\r\n                            } else {\r\n                                children = user.subscription.is_pending ? 'Pending' : 'Subscribed',\r\n                                    onPress = async () => {\r\n                                        await Api.Subscriber.extensions.removeSubscription({\r\n                                            subscriptionId: user.subscription?.id\r\n                                        });\r\n                                        setUser(undefined);\r\n                                    }\r\n                                style = user.subscription.is_pending ? {\r\n                                    backgroundColor: \"#FFCE31\",\r\n                                    borderColor: \"#FFCE31\"\r\n                                } : {backgroundColor: \"#EC5328\", borderColor: \"#EC5328\"}\r\n                            }\r\n                        } else {\r\n                            if (user?.subscription?.id) {\r\n                                children = 'Manage Subscriptions'\r\n                                onPress = () => props.navigation.navigate(\"Subscription\")\r\n                            } else {\r\n                                children = 'Become An Analyst'\r\n                                onPress = () => props.navigation.navigate(\"SubscriptionSettings\")\r\n                            }\r\n                        }\r\n                        return {\r\n                            children,\r\n                            onPress,\r\n                            style\r\n                        }\r\n                    })()}\r\n                />}\r\n            </View>\r\n            <ElevatedSection title=\"\" style={{marginHorizontal: sizes.rem1, marginTop: tabBarMargin}}>\r\n                <TabBar\r\n                    indicatorStyle={{\r\n                        marginTop: 26,\r\n                        marginHorizontal: 0\r\n                    }}\r\n                    style={{width: \"100%\", marginHorizontal: 0}}\r\n                    key={\"tabbar\"}\r\n                    selectedIndex={tab}\r\n                    onSelect={t => {\r\n                        if (collapsed)\r\n                            scrollRef.current?.scrollToOffset({offset: clampMax, animated: false});\r\n\r\n                        setTab(t);\r\n                    }}>\r\n                    {[\"Posts\", \"Portfolio\", \"Trades\", \"About\"].map(t => <Tab style={{marginTop: -4}} title={t}/>)}\r\n                </TabBar>\r\n            </ElevatedSection>\r\n        </Animated.View>\r\n    </View>\r\n}\r\n\r\nfunction ProfilePage(props: { manager: boolean[], index: number, currentIndex: number, minViewHeight: number, children?: ReactNode, style?: ViewStyle }) {\r\n    props.manager[props.currentIndex] = true;\r\n    return (props.index === props.currentIndex || props.manager[props.index]) ?\r\n        <View style={[paddView, {\r\n            minHeight: props.minViewHeight,\r\n            display: props.currentIndex === props.index ? \"flex\" : \"none\",\r\n\r\n        }, props.style]}>\r\n            {props.children}\r\n        </View> : null\r\n}","import { ButtonProps } from \"@ui-kitten/components\";\r\nimport React from \"react\";\r\nimport { Alert, View } from \"react-native\";\r\nimport Animated from \"react-native-reanimated\";\r\n//import { ButtonProps, View } from \"react-native-ui-lib\";\r\n//import AuthApi from \"../api/entities/apis/AuthApi\";\r\n\r\n//import { screens } from \"../layouts/BaseLayout\";\r\n//import CreateAccountScreen from \"../screens/CreateAccountScreen\";\r\nimport { PrimaryButton } from \"./PrimaryButton\";\r\nimport { SecondaryButton } from \"./SecondaryButton\";\r\n\r\nexport const LoginButtons = (props: { createAccountProps: Partial<ButtonProps>, loginProps: Partial<ButtonProps> }) => {\r\n    return <View style={{ flexDirection: \"row\", justifyContent: \"space-between\" }}>\r\n        <SecondaryButton style={{ alignSelf: \"center\", width: \"48%\" }} \r\n            {...props.createAccountProps}\r\n        //onPress={() => {\r\n        //  screens.push(componentId, \"CreateAccount\")\r\n\r\n        //}}\r\n        //disabled={loggingIn}\r\n        >Create Account</SecondaryButton>\r\n        <PrimaryButton\r\n         \r\n            //disabled={loggingIn}\r\n            // onPress={async () => {\r\n\r\n            //   //  setLoggingIn(true);\r\n            //     // try {\r\n            //     //     const val = userRef.current?.field.current?.validate();\r\n            //     //     const passVal = passRef.current?.field.current?.validate();\r\n            //     //     if (val && passVal) {\r\n            //     //         const user = await AuthApi.login(username, password);// signInWithPassword(username, password);\r\n\r\n            //     //         if (user.verified)\r\n            //     //             Alert.alert(\"VERIFIED\")\r\n            //     //         //SetDashboardLayout();\r\n            //     //         else\r\n            //     //             screens.push(componentId, \"CreateAccount\")\r\n\r\n\r\n\r\n\r\n            //     //         // Navigation.push(props.componentId, {\r\n            //     //         //     component: screens.getComponent(\"App\")\r\n            //     //         // });\r\n            //     //     }\r\n            //     //     else\r\n            //     //         throw new Error(userRef.current?.errorMessage)\r\n            //     // }\r\n            //     // catch (ex: any) {\r\n            //     //     passRef.current?.field.current?.clear();\r\n            //     //     dashboardRef.current?.toastMessage(ex.message);\r\n            //     // }\r\n            //     // finally {\r\n            //     //     setLoggingIn(false);\r\n            //     // }\r\n\r\n            // }}\r\n            style={{ alignSelf: \"center\", width: \"48%\" }}\r\n            {...props.loginProps}\r\n        >Sign In</PrimaryButton>\r\n    </View>\r\n}","import React, { Children, ReactElement, useEffect, useRef } from \"react\";\r\nimport { AppTitle, SplashWelcome } from \"../images\";\r\nimport { bannerText, fonts, paddView, sizes } from '../style'\r\nimport { G, GProps, Path, SvgProps } from \"react-native-svg\";\r\nimport { Link } from \"../components/Link\";\r\nimport { Animated, Platform, View, StyleSheet, Alert, Pressable } from \"react-native\";\r\nimport { LoginButtons } from \"../components/LoginButtons\";\r\nimport { useLinkTo } from \"@react-navigation/native\";\r\nimport { Text, TabView, Tab } from \"@ui-kitten/components\";\r\nimport { useState } from \"react\";\r\nimport { ITextField, TextField } from \"../components/TextField\";\r\nimport { Section } from \"../components/Section\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { useAppUser } from \"../Authentication\";\r\nimport { PrimaryButton } from \"../components/PrimaryButton\";\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { RootStackScreenProps } from \"../navigation/pages\";\r\nimport { useInitialRoute } from '../navigation/RootNavigator';\r\nimport { getCallBackUrl } from \"@tradingpost/common/api/entities/static/EntityApiBase\";\r\n\r\n\r\nexport type WelcomeScreenProps = { title: string }\r\n\r\nconst ensureG = (child: ReactElement): child is ReactElement<GProps> => {\r\n    return child.type === G;\r\n}\r\n\r\n//Test function will move out into helper later \r\nconst SvgMagic: React.FC<{ children: ReactElement<SvgProps> }> = (props) => {\r\n    const reportChildren = (children: ReactElement) => {\r\n        Children.forEach(children, (child) => {\r\n            if (ensureG(child))\r\n                console.log(\"FOUND G WITH ID:::::::\" + child.props.id);\r\n            else {\r\n                console.log(\"FOUND SOMETHING:::::::\" + (child.type as any).name);\r\n                console.log(\"FOUND SOMETHINGS CHIULDREN:::::::\" + (JSON.stringify(child.props)));\r\n            }\r\n            reportChildren(child.props.children);\r\n        })\r\n    };\r\n\r\n    reportChildren(props.children);\r\n\r\n    return props.children;\r\n}\r\n\r\n\r\nexport default ({ navigation }: RootStackScreenProps<\"Root\">) => {\r\n    const linkTo = useLinkTo();\r\n    const cleanUp = useRef<number>(),\r\n        [selectedIndex, setSelectedIndex] = useState(0);\r\n    const route = useInitialRoute();\r\n\r\n    useEffect(() => {\r\n        return () => clearInterval(cleanUp.current);\r\n    }, [])\r\n\r\n    const\r\n        userRef = useRef<ITextField>(null),\r\n        passRef = useRef<ITextField>(null),\r\n        [username, setUsername] = useState<string>(''),\r\n        [password, setPassword] = useState<string>(''),\r\n        intervalRef = useRef<any>(),\r\n        opacityAnim = useRef(new Animated.Value(0)).current,\r\n        toast = useToast(),\r\n        [isLoggingIn, setIsLoggingIn] = useState(false),\r\n        { signIn } = useAppUser();\r\n\r\n\r\n    useEffect(() => {\r\n        if (route !== \"Root\")\r\n            navigation.replace(route);\r\n    }, [route])\r\n\r\n    return <><View style={[...paddView, { justifyContent: \"center\", backgroundColor: \"white\" }]}>\r\n        <AppTitle style={{ marginVertical: sizes.rem1, alignSelf: \"center\", width: \"100%\", aspectRatio: 5 }} />\r\n\r\n        <TabView\r\n            selectedIndex={selectedIndex}\r\n            onSelect={index => setSelectedIndex(isNaN(index) ? 0 : index)}\r\n            style={{ width: \"100%\" }}\r\n            indicatorStyle={{ height: 0 }}\r\n            tabBarStyle={{ height: 0 }}\r\n        >\r\n            <Tab>\r\n                <WTF_View\r\n                    onReady={(item) => {\r\n                        if (Platform.OS === \"web\" && item instanceof HTMLDivElement) {\r\n                            const stonks = [\"fb\", \"tsla\", \"nvda\", \"btc\", \"ether\", \"doge\"].map((n) => item.querySelector<SVGGElement>(`[id=${n}]`));\r\n                            stonks.forEach((s) => {\r\n                                if (s)\r\n                                    s.style.opacity = \"0\";\r\n                            });\r\n\r\n                            let lastItem: SVGGElement | null = null;\r\n                            let lastItem2: SVGGElement | null = null;\r\n\r\n                            if (intervalRef.current)\r\n                                clearInterval(intervalRef.current);\r\n\r\n                            intervalRef.current = setInterval(() => {\r\n                                const index = Math.floor(Math.random() * (9));\r\n                                const index2 = Math.floor(Math.random() * (9));\r\n\r\n                                if (lastItem)\r\n                                    lastItem.style.opacity = \"0\";\r\n\r\n                                if (lastItem2)\r\n                                    lastItem2.style.opacity = \"0\";\r\n\r\n\r\n                                lastItem = stonks[index];\r\n                                lastItem2 = stonks[index2];\r\n                                if (lastItem)\r\n                                    lastItem.style.opacity = \"1\";\r\n                                if (lastItem2)\r\n                                    lastItem2.style.opacity = \"1\";\r\n                            }, 1000)\r\n                        }\r\n                    }}\r\n                />\r\n            </Tab>\r\n            <Tab>\r\n                <Section title=\"Login\">\r\n                    <TextField placeholder='Email Address' returnKeyType=\"next\"\r\n                        onChangeText={(name) => setUsername(name)}\r\n                        textInputRef={userRef}\r\n                        style={{ marginVertical: sizes.rem1 }}\r\n                    />\r\n                    <TextField\r\n                        onChangeText={(pass) => setPassword(pass)}\r\n                        placeholder='Password'\r\n                        style={{ marginVertical: sizes.rem1 }}\r\n                        secureTextEntry textInputRef={passRef} />\r\n                    <Link style={{ paddingTop: 4, paddingBottom: 16, alignSelf: \"flex-end\" }} onPress={() => {\r\n                        setSelectedIndex(2)\r\n                    }}>Forgot Password?</Link>\r\n                </Section>\r\n            </Tab>\r\n            <Tab>\r\n                <View>\r\n                    <Text>Please enter your email address to recover your password:</Text>\r\n                    <TextField style={{ marginVertical: sizes.rem1 }} value={username} placeholder=\"Email Address\"\r\n                        onChangeText={(t) => {\r\n                            setUsername(t);\r\n                        }} />\r\n                    <PrimaryButton onPress={async () => {\r\n                        if (username && /(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])/.test(username)) {\r\n                            Api.Auth.forgotPassword(username, getCallBackUrl());\r\n                            toast.show(\"Recovery Email has been sent\");\r\n                        } else {\r\n                            toast.show(\"Please enter a valid email address\");\r\n                        }\r\n                    }}>Recover Password</PrimaryButton>\r\n                </View>\r\n            </Tab>\r\n        </TabView>\r\n\r\n        <Animated.Text style={[bannerText, {\r\n            opacity: !selectedIndex ? 1 : opacityAnim\r\n        }]}> {!selectedIndex ? \"Welcome to the team!\" : \"Hey... Welcome Back!\"}</Animated.Text>\r\n        <LoginButtons\r\n            createAccountProps={{ onPress: () => { linkTo(\"/create/logininfo\"); } }}\r\n            loginProps={{\r\n                onPress: async () => {\r\n                    if (selectedIndex !== 1) {\r\n                        setSelectedIndex(1);\r\n                        Animated.timing(\r\n                            opacityAnim,\r\n                            {\r\n                                delay: 0.75,\r\n                                toValue: 1,\r\n                                duration: 2000,\r\n                                useNativeDriver: true\r\n                            }).start();\r\n                    } else {\r\n                        if (!isLoggingIn) {\r\n                            try {\r\n                                setIsLoggingIn(true);\r\n                                await signIn(username, password);\r\n                                toast.hideAll();\r\n                                setIsLoggingIn(false);\r\n\r\n                            } catch (ex: any) {\r\n                                setIsLoggingIn(false);\r\n                                toast.show(ex.message);\r\n                            }\r\n                        }\r\n                        else {\r\n                            toast.show(\"Still working on logging you in....\", {\r\n                                duration: 5000\r\n                            })\r\n                        }\r\n                    }\r\n                }\r\n            }}\r\n        />\r\n\r\n    </View>\r\n        {!selectedIndex && Platform.OS !== \"web\" && <Pressable\r\n            onPress={() => {\r\n                navigation.navigate('AppInformation')\r\n            }}>\r\n            <Text style={{\r\n                textAlign: \"right\",\r\n                position: \"absolute\",\r\n                bottom: sizes.rem1,\r\n                right: sizes.rem1,\r\n                fontSize: fonts.large,\r\n                lineHeight: fonts.large * 1.5\r\n            }}>\r\n                What is TradingPost{\">>\"}\r\n            </Text>\r\n        </Pressable>}\r\n    </>\r\n\r\n}\r\n\r\nconst WTF_View = (props: {\r\n    onReady: (item: any) => void\r\n}) => {\r\n    return <View style={{ width: \"100%\", aspectRatio: 1.5 }}>\r\n        <SplashWelcome\r\n            onReady={props.onReady}\r\n        />\r\n    </View>\r\n}","import React, { ReactChild, useLayoutEffect, useState } from \"react\";\r\nimport { Text } from \"@ui-kitten/components\";\r\nimport { View, Image, Pressable } from \"react-native\";\r\n//import { ensureCurrentUser, signOut, useCurrentUser } from \"../apis/Authentication\";\r\nimport { LogoImage } from \"./LogoImage\";\r\nimport { font, fonts, rounded, sizes } from \"../style\";\r\nimport { Link } from \"./Link\";\r\n//import { SetPublicLayout, screens } from \"../layouts/BaseLayout\";\r\nimport { SvgProps } from \"react-native-svg\";\r\nimport { sideMenu } from \"../images\";\r\n//import { parts, screens } from \"../navigationComponents\";\r\n//import { Navigation } from \"react-native-navigation\";\r\n//import { DashProps, fullDashOptions } from \"../layouts/DashboardLayout\";\r\nimport { TBI } from \"../utils/misc\";\r\n//import Clipboard from '@react-native-clipboard/clipboard'\r\n//import { openProfileScreen } from \"../screens/ProfileScreen\";\r\nimport { useData } from \"../lds\";\r\nimport { SvgExpo } from \"./SvgExpo\";\r\n//import { useEnsureUser } from \"./EnsureUser\";\r\nimport { useRef } from \"react\";\r\n\r\nimport { useAppUser } from '../Authentication';\r\nimport { NavigationProp } from \"@react-navigation/native\";\r\nimport { DrawerContentComponentProps, DrawerContentScrollView, DrawerItem } from \"@react-navigation/drawer\";\r\n\r\nimport { ProfileButton } from \"./ProfileButton\";\r\nimport { useLinkTo } from \"@react-navigation/native\";\r\nimport { versionCode } from \"@tradingpost/common/api/entities/static/EntityApiBase\";\r\n\r\n\r\n\r\nconst padSmall = { marginBottom: sizes.rem1 / 8 };\r\n\r\nexport function SideMenu(props: DrawerContentComponentProps) {\r\n    //const { value: currentUser } = useData(\"currentUser\");\r\n    //const { value: loginResult } = useData(\"loginResult\");\r\n    const [activeTabIndex, setActiveTab] = useState(2);\r\n\r\n    // useLayoutEffect(() => {\r\n    //     const sub1 = Navigation.events().registerBottomTabSelectedListener(({ selectedTabIndex, unselectedTabIndex }) => {\r\n    //         setActiveTab(selectedTabIndex);\r\n    //     })\r\n    //     return () => sub1.remove();\r\n    // }, [])\r\n    //const { setValue: setHasAuthed } = useData(\"hasAuthed\");\r\n    const activeTabId = `BottomTabs_${activeTabIndex}`\r\n    const { signOut, loginState } = useAppUser();\r\n    const linkTo = useLinkTo<any>();\r\n    //Not sure if the issue here but this seems to work for now.\r\n    //const { EnsureUser, appUser, signOut } = useEnsureUser(props.navigation as any as NavigationProp<any>);\r\n    const currentUser = loginState?.appUser;\r\n    if (!currentUser) return;\r\n\r\n    return <DrawerContentScrollView contentContainerStyle={{ flexGrow: 1 }} style={{ flexGrow: 1, backgroundColor: \"white\" }}>\r\n        <View style={{ alignSelf: \"center\", alignItems: \"center\", backgroundColor: \"transparent\" }}>\r\n            <Pressable\r\n                style={{ alignItems: \"center\" }}>\r\n                <View\r\n                    style={[{ marginTop: sizes.rem1 }, padSmall]}\r\n                >\r\n                    <ProfileButton size={80} profileUrl={currentUser?.profile_url || \"\"} userId={currentUser?.id} />\r\n                </View>\r\n                <Text style={[font(\"xSmall\", \"black\", true), padSmall]} >@{currentUser.handle}</Text>\r\n                <Text style={[font(\"medium\", \"black\", true), padSmall]} >{currentUser.display_name}</Text>\r\n            </Pressable>\r\n            <Text style={[font(\"xSmall\", \"darkgray\", true), padSmall]} >Subscribers: {currentUser.subscription?.count}</Text>\r\n            <Link onPress={() => {\r\n\r\n                props.navigation.navigate(\"Subscription\");\r\n\r\n            }} style={{ fontSize: fonts.xSmall, fontWeight: \"bold\" }}\r\n            // onPress={() =>\r\n            //      screens.push(activeTabId, \"ManageSubscriptions\", {\r\n            //     options: fullDashOptions,\r\n            //     passProps: { isFullscreen: true } as DashProps\r\n            // })}\r\n            >Manage Subscriptions</Link>\r\n        </View>\r\n        {([{\r\n            label: \"Profile\",\r\n            onPress: () => props.navigation.navigate(\"Profile\", {\r\n                userId: currentUser.id\r\n            }),\r\n            icon: sideMenu.Profile\r\n        },\r\n        {\r\n            label: \"Watchlists\",\r\n            onPress: () => props.navigation.navigate(\"Watchlist\"),\r\n            //onPress: () => linkTo('/create/watchlist'),\r\n            icon: sideMenu.Watchlist,\r\n        },\r\n        {\r\n            label: \"Bookmarks\",\r\n            onPress: () => props.navigation.navigate(\"Feed\", {\r\n                bookmarkedOnly: \"true\"\r\n            }),\r\n            icon: sideMenu.BookmarkActiveBlue,\r\n        },\r\n        {\r\n            label: \"App Features\",\r\n            onPress: () => props.navigation.navigate(\"AppInformation\"),\r\n\r\n            icon: sideMenu.Information,\r\n        },\r\n        {\r\n            label: \"Settings\",\r\n            //onPress: () => props.navigation.navigate(\"Create\"),\r\n            onPress: () => props.navigation.navigate(\"AccountInformation\"),\r\n            icon: sideMenu.Account,\r\n        },\r\n        {\r\n            label: \"Link Brokerage!\",\r\n            //onPress: () => props.navigation.navigate(\"Create\"),\r\n            onPress: () => props.navigation.navigate(\"BrokeragePicker\"),\r\n            icon: sideMenu.Bank_Link,\r\n        },\r\n        {\r\n            label: \"Logout\",\r\n            onPress: () => {\r\n                signOut();\r\n                //TODO: Investigate why this is needed and linkto doesn't seem to work.\r\n                //props.navigation.getParent()?.replace(\"Root\");\r\n\r\n            },\r\n            icon: sideMenu.LogOut\r\n        }] as { onPress?: () => void, label: string, icon: React.FC<SvgProps> }[]).map((item, index, array) => {\r\n            return <MenuItem\r\n                key={\"SM_\" + index}\r\n                icon={item.icon}\r\n                size={\"10%\"}\r\n                onPress={item.onPress || TBI}\r\n                navigation={props.navigation}\r\n                isLast={index === array.length - 1}\r\n            >{item.label}</MenuItem>\r\n        })}\r\n        <Text style={{ textAlign: \"center\" }}>Api Version: {versionCode}</Text>\r\n    </DrawerContentScrollView>\r\n}\r\n\r\nfunction MenuItem(props: { navigation: DrawerContentComponentProps[\"navigation\"], children: string, icon: React.FC<SvgProps>, onPress?: () => void, isLast?: boolean, size?: string | number }) {\r\n    const { icon: SvgElement } = props\r\n    return <DrawerItem\r\n        style={props.isLast ? { marginTop: \"auto\" } : undefined}\r\n        label={props.children}\r\n        icon={(props) => <SvgExpo height={props.size} width={props.size} style={{ height: props.size, width: props.size }}>\r\n            <SvgElement />\r\n        </SvgExpo>}\r\n        onPress={() => {\r\n            props.onPress?.call(undefined);\r\n            props.navigation.closeDrawer();\r\n        }\r\n        }\r\n        labelStyle={{ marginLeft: -16, }}\r\n\r\n    />\r\n    /* <Text style={{ fontSize: fonts.small, marginLeft: 16 }}>{}</Text> */\r\n}","import React, {useEffect, useState} from \"react\";\r\nimport {Pressable} from \"react-native\";\r\nimport {View} from \"react-native\";\r\nimport {Layout, Text} from '@ui-kitten/components';\r\nimport {List} from \"../components/List\";\r\nimport {flex, fonts, sizes} from \"../style\";\r\nimport {Api} from '@tradingpost/common/api';\r\nimport {ListAlertsResponse} from \"@tradingpost/common/api/entities/interfaces\";\r\nimport {ElevatedSection} from \"../components/Section\";\r\nimport {NavigationProp, useNavigation} from \"@react-navigation/native\";\r\nimport {SecondaryButton} from \"../components/SecondaryButton\";\r\n\r\nlet seen = false;\r\n\r\nexport const NotificationScreen = () => {\r\n    const [notifs, setNotifs] = useState([] as ListAlertsResponse[]);\r\n    useEffect(() => {\r\n        if (seen) {\r\n            const run = async () => {\r\n                const ids = notifs.filter(n => !n.seen).map(n => n.id);\r\n                const res = await Api.Notification.extensions.seenNotifications({notificationIds: ids});\r\n            }\r\n            run();\r\n            return\r\n        }\r\n\r\n        let timer = setTimeout(async () => {\r\n            const ids = notifs.filter(n => !n.seen).map(n => n.id);\r\n            await Api.Notification.extensions.seenNotifications({notificationIds: ids});\r\n        }, 1500)\r\n\r\n        seen = true;\r\n        return () => {\r\n            clearTimeout(timer)\r\n        };\r\n    }, [notifs])\r\n\r\n    return <View style={{flex: 1, backgroundColor: \"#F7f8f8\"}}>\r\n        <View>\r\n            <Layout style={{\r\n                backgroundColor: \"#ffffff\",\r\n                paddingBottom: '2%',\r\n                paddingTop: '2%',\r\n                borderBottomColor: '#11146F',\r\n                borderStyle: 'solid',\r\n                borderBottomWidth: 2,\r\n                marginBottom: 10\r\n            }}>\r\n                <Text style={{\r\n                    margin: 2,\r\n                    textAlign: 'center',\r\n                    fontSize: 20,\r\n                    fontWeight: '600',\r\n                    color: '#11146F',\r\n                }}>Notifications</Text>\r\n            </Layout>\r\n            <List\r\n                key={\"STATIC\"}\r\n                datasetKey={\"__________\"}\r\n                getItemLayout={(items, index, sizeCache) => {\r\n                    const curItem = items?.[index];\r\n                    return typeof curItem === 'object' ? sizeCache[index] : {\r\n                        index,\r\n                        offset: sizeCache[index - 1].offset + sizeCache[index - 1].length,\r\n                        length: 10\r\n                    };\r\n                }}\r\n                data={async (allItems: any, page: number, sizeCache: any[]): Promise<ListAlertsResponse[]> => {\r\n                    const notifications = (await Api.Notification.extensions.listAlerts({\r\n                        page,\r\n                    }));\r\n                    const newNotifications = [...(allItems || []), ...notifications];\r\n                    setNotifs(newNotifications);\r\n                    newNotifications.forEach((item, index) => {\r\n                        if (!sizeCache[index]) {\r\n                            sizeCache[index] = {\r\n                                index,\r\n                                offset: index ? sizeCache[index - 1].offset + sizeCache[index - 1].length : 0,\r\n                                length: 0,\r\n                            }\r\n                        }\r\n                    });\r\n                    return newNotifications;\r\n                }}\r\n                keyExtractor={(item: any, index) => typeof item === 'string' ? \"loadingtext\" : (index + \"_\" + item._id)}\r\n                preloadOffset={1}\r\n                renderItem={(item) => {\r\n                    if (typeof item.item === \"string\") {\r\n                        return <Text style={{textAlign: \"center\", fontSize: fonts.large}}>Loading More...</Text>\r\n                    }\r\n                    switch (item.item.type) {\r\n                        case \"NEW_USER_INTERACTION\":\r\n                            return <UserInteractionNotification response={item.item}/>;\r\n                        case \"NEW_TRADES\":\r\n                            return <NewTradeNotification response={item.item}/>\r\n                        case \"NEW_SUBSCRIPTION\":\r\n                            return <SubscriptionNotification response={item.item}/>\r\n                        default:\r\n                            console.error(`Follow Type: ${item.item.type} not registered`);\r\n                            return <DefaultNotification response={item.item}/>\r\n                    }\r\n                }}\r\n                noDataMessage={\"No Notifications Available\"}\r\n                loadingItem={\" \"}\r\n            />\r\n        </View>\r\n    </View>\r\n}\r\n\r\nconst NotificationTab: React.FC<any> = (props: any) => {\r\n    return <ElevatedSection title={\"\"} style={{marginHorizontal: sizes.rem2 / 2, marginBottom: sizes.rem1}}>\r\n        <View style={{marginBottom: -sizes.rem0_5, paddingVertical: 6}}>\r\n            <View style={{flexDirection: \"row\", width: \"100%\", marginBottom: sizes.rem0_5}}>\r\n                <View style={[flex, {marginLeft: sizes.rem0_5}]}>\r\n                    {props.children}\r\n                </View>\r\n            </View>\r\n        </View>\r\n    </ElevatedSection>\r\n}\r\n\r\nconst NewTradeNotification = (props: { response: ListAlertsResponse }): JSX.Element => {\r\n    const dt = new Date(props.response.dateTime);\r\n    const dtFmt = `${dt.getMonth()}/${dt.getDay()}/${dt.getFullYear() % 100}`\r\n\r\n    const nav = useNavigation<NavigationProp<any>>();\r\n    const openTrades = () => {\r\n        nav.navigate(\"NotificationTrade\")\r\n    }\r\n\r\n    return <NotificationTab>\r\n        <Pressable onPress={openTrades}>\r\n            <View style={{flex: 1, flexWrap: 'wrap'}}>\r\n                <View style={{flexDirection: 'row'}}>\r\n                    <Text style={{marginRight: 10, fontFamily: \"K2D\"}}>\r\n                        {dtFmt}\r\n                    </Text>\r\n                    <Text style={{flex: 1, flexWrap: 'wrap'}}>\r\n                        {props.response.data.message} <Text style={{fontWeight: 'bold'}}>Click to learn more.</Text>\r\n                    </Text>\r\n                </View>\r\n            </View>\r\n        </Pressable>\r\n    </NotificationTab>\r\n}\r\n\r\nconst UserInteractionNotification = (props: { response: ListAlertsResponse }): JSX.Element => {\r\n    const nav = useNavigation<NavigationProp<any>>();\r\n    const openProfile = () => {\r\n        if (props.response.data?.userId) {\r\n            nav.navigate(\"Profile\", {\r\n                userId: props.response.data?.userId\r\n            });\r\n        }\r\n    }\r\n\r\n    const dt = new Date(props.response.dateTime);\r\n    const dtFmt = `${dt.getMonth()}/${dt.getDay()}/${dt.getFullYear() % 100}`\r\n    return <NotificationTab>\r\n        <Pressable\r\n            onPress={openProfile}>\r\n            <View style={{flex: 1}}>\r\n                <View style={{flexDirection: 'row'}}>\r\n                    <Text style={{marginRight: 10}}>\r\n                        {dtFmt}\r\n                    </Text>\r\n                    <Text>\r\n                        <Text\r\n                            style={{fontWeight: \"bold\"}}>@{props.response.data.handle}</Text>{' '}{props.response.data.message}\r\n                    </Text>\r\n                </View>\r\n            </View>\r\n        </Pressable>\r\n    </NotificationTab>\r\n}\r\nconst SubscriptionNotification = (props: { response: ListAlertsResponse }): JSX.Element => {\r\n    const nav = useNavigation<NavigationProp<any>>();\r\n    const openProfile = () => {\r\n        if (props.response.data?.userId) {\r\n            nav.navigate(\"Profile\", {\r\n                userId: props.response.data?.userId\r\n            });\r\n        }\r\n    }\r\n    const [approval, setApproval] = useState(props.response.data.approved)\r\n\r\n    const dt = new Date(props.response.dateTime);\r\n    const dtFmt = `${dt.getMonth() + 1}/${dt.getDate()}/${dt.getFullYear() % 100}`\r\n    return <NotificationTab>\r\n        <Pressable\r\n            onPress={openProfile}>\r\n            <View style={{flex: 1}}>\r\n                <View style={{flexDirection: 'row'}}>\r\n                    <Text style={{marginRight: 10}}>\r\n                        {dtFmt}\r\n                    </Text>\r\n                    <Text style={{flex: 1, flexWrap: 'wrap'}}>\r\n                        <Text\r\n                            style={{fontWeight: \"bold\"}}>@{props.response.data.handle}</Text>{' '}{props.response.data.message}\r\n                    </Text>\r\n                    <SecondaryButton\r\n                        children={'Approve'}\r\n                        style={{\r\n                            display: approval ? 'none' : 'flex',\r\n                            backgroundColor: \"#35A265\", borderColor: \"#35A265\",\r\n                            minHeight: 26,\r\n                            height: 26,\r\n                            minWidth: 70,\r\n                            alignSelf: \"center\",\r\n                            paddingTop: 0,\r\n                            paddingBottom: 0,\r\n                            paddingLeft: 0,\r\n                            paddingRight: 0\r\n                        }}\r\n                        onPress={async () => {\r\n                            try {\r\n                                await Api.Subscriber.update(props.response.data.subscriber_id, {\r\n                                    approved: true,\r\n                                });\r\n                                console.log('past first call')\r\n                                await Api.Notification.extensions.updateNotification({\r\n                                    id: props.response.id,\r\n                                    dateTime: props.response.dateTime,\r\n                                    data: {\r\n                                        ...props.response.data,\r\n                                        approved: true\r\n                                    },\r\n                                    seen: true,\r\n                                    type: props.response.type\r\n                                });\r\n                                setApproval(true)\r\n                            } catch (e) {\r\n                                console.error(e)\r\n                            }\r\n                            \r\n                        }}\r\n                    />\r\n                </View>\r\n            </View>\r\n        </Pressable>\r\n    </NotificationTab>\r\n}\r\n\r\nconst DefaultNotification = (props: { response: ListAlertsResponse }): JSX.Element => {\r\n    return <NotificationTab>\r\n        <Text>\r\n            {props.response.data.message}\r\n        </Text>\r\n    </NotificationTab>\r\n}","import React from \"react\"\r\nimport { List } from \"../components/List\"\r\nimport { View } from 'react-native'\r\nimport { Text } from '@ui-kitten/components'\r\nimport { AllPages, TabScreenProps } from \"../navigation\"\r\nimport { NavigationProp, useNavigation } from \"@react-navigation/native\"\r\nimport { Link } from \"../components/Link\"\r\nimport { flex, paddView, paddViewWhite } from \"../style\"\r\nimport { ElevatedSection, Section } from \"../components/Section\"\r\nimport { Header } from \"../components/Headers\"\r\nimport { AppColors } from \"../constants/Colors\"\r\n\r\n\r\nexport function LimitedBlockList<T>(props: {\r\n    maxPage?: number,\r\n    \r\n    listKey: string,\r\n    title: string,\r\n    listProps: Omit<Parameters<typeof List>[0], \"maxPage\">\r\n}) {\r\n    const nav = useNavigation();\r\n    return <View style={[{}]}>\r\n        <View>\r\n            <List {...props.listProps} listKey={props.listKey} maxPage={props.maxPage} />\r\n        </View>\r\n        <Link\r\n            style={{\r\n                marginLeft: \"auto\"\r\n            }}\r\n            onPress={() => {\r\n                nav.navigate(\"BlockListModal\", {\r\n                    listProps: props.listProps as any,\r\n                    title: props.title\r\n                })\r\n            }}>View All</Link>\r\n    </View>\r\n}\r\n\r\nexport function BlockListModalScreen<T>(props: TabScreenProps<{ title: string, listProps: Parameters<typeof List>[0] }>) {\r\n    return (\r\n        props.route?.params?.listProps ? \r\n        <View style={paddView}>\r\n            <Section title={props.route.params.title} style={{backgroundColor: AppColors.background}}>\r\n                <List {...props.route?.params?.listProps} />\r\n            </Section>\r\n        </View> : \r\n        <Text>Error</Text>\r\n        )\r\n}","import { Api } from \"@tradingpost/common/api\";\r\nimport { AllWatchlists, IWatchlistGet, IWatchlistList } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Animated, ScrollView, TextStyle, View } from \"react-native\";\r\nimport { AddButton, EditButton } from \"../components/AddButton\";\r\nimport { Avatar, Icon, Text } from '@ui-kitten/components'\r\nimport { ElevatedSection, Section, Subsection } from \"../components/Section\";\r\nimport { Table } from \"../components/Table\";\r\nimport { DataOrQuery, List } from '../components/List'\r\n\r\nimport { flex, fonts, paddView, sizes } from \"../style\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { SecPressable, useMakeSecurityFields, useWatchlistItemColumns } from \"./WatchlistViewerScreen\";\r\nimport { AwaitedReturn, toPercent, toPercent2, toThousands, toDollarsAndCents, toDollars, toNumber2, toNumber1, toFormatedDateTime } from \"../utils/misc\";\r\nimport { WatchlistSection } from \"../components/WatchlistSection\";\r\nimport Theme from '../theme-light.json'\r\nimport { LimitedTable } from \"./TableModalScreen\";\r\nimport { ButtonGroup } from \"../components/ButtonGroup\";\r\nimport { LineHolder, PieHolder } from \"../components/PieHolder\";\r\nimport { AppColors } from \"../constants/Colors\";\r\nimport { LineChart } from \"../components/LineChart\";\r\nimport InteractiveChart from \"../components/InteractiveGraph\";\r\nimport { DashTabScreenProps, RootStackScreenProps } from \"../navigation/pages\";\r\nimport { TooltipComponent } from \"../components/ToolTip\";\r\nimport { useSecuritiesList } from \"../SecurityList\";\r\nimport { Header } from \"../components/Headers\";\r\nimport { WatchlistItemRenderItem } from \"../components/WatchlistItemRenderItem\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\nimport { HoldingRenderItem } from \"../components/HoldingRenderItem\";\r\nimport { TradeRenderItem } from \"../components/TradeRenderItem\";\r\nimport { LimitedBlockList } from \"./BlockListModalScreen\";\r\n\r\nconst styles = {\r\n    stateLabel: {\r\n        color: Theme[\"color-info-800\"],\r\n        textAlign: \"center\"\r\n    } as TextStyle,\r\n    stateValue: {\r\n        // color: AppColors.primary,\r\n        textAlign: \"center\",\r\n        marginBottom: sizes.rem0_5\r\n    } as TextStyle,\r\n}\r\ntype TradeReturnType = AwaitedReturn<typeof Api.User.extensions.getTrades>\r\n\r\nconst periods: { [key: string]: number } = {\r\n    \"1D\": 1,\r\n    \"1W\": 5,\r\n    \"1M\": 20,\r\n    \"3M\": 60,\r\n    \"1Y\": 252,\r\n    \"2Y\": 504,\r\n    \"Max\": 1000\r\n}\r\nexport const PortfolioScreen = (props: DashTabScreenProps<\"Portfolio\">) => {\r\n    const nav = useNavigation();\r\n    const [watchlists, setWatchlists] = useState<AllWatchlists>()\r\n    const [quickWatchlist, setQuickWatchlist] = useState<IWatchlistGet>()\r\n    const [shownMap, setShownMap] = useState<Record<string, boolean>>({})\r\n    const toast = useToast();//const [trades, setTrades] = useState<AwaitedReturn<typeof Api.User.extensions.getTrades>>();\r\n    const [holdings, setHoldings] = useState<AwaitedReturn<typeof Api.User.extensions.getHoldings>>();\r\n    const [trades, setTrades] = useState<AwaitedReturn<typeof Api.User.extensions.getTrades>>();\r\n    const [portfolio, setPortfolio] = useState<AwaitedReturn<typeof Api.User.extensions.getPortfolio>>();\r\n    const [returns, setReturns] = useState<AwaitedReturn<typeof Api.User.extensions.getReturns>>();\r\n    const [twReturns, settwReturns] = useState<{ x: string, y: number }[]>();\r\n    const [portPeriod, setPortPeriod] = useState(\"1Y\")\r\n    const [focus, setFocus] = useState(false);\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                const [lists, holdings] = await Promise.all([\r\n                    Api.Watchlist.extensions.getAllWatchlists(),\r\n                    Api.User.extensions.getHoldings({})\r\n                ]);\r\n                \r\n                //KEeping apart for now .. seems to have an error\r\n                try {\r\n                    const portfolio = await Api.User.extensions.getPortfolio({});\r\n                    setPortfolio(portfolio);\r\n                } catch (ex) {\r\n                    console.error(ex);\r\n                }\r\n\r\n                if (lists.quick.id) {\r\n                    setQuickWatchlist(await Api.Watchlist.get(lists.quick.id));\r\n                }\r\n                else {\r\n                    setQuickWatchlist({\r\n                        id: 0,\r\n                        items: [],\r\n                        name: \"\",\r\n                        saved_by_count: 0,\r\n                        type: \"primary\",\r\n                        user: [],\r\n                        is_saved: false\r\n                    })\r\n                }\r\n                setWatchlists(lists);\r\n                setHoldings(holdings);\r\n                setFocus((f) => !f)\r\n            }\r\n            catch (ex: any) {\r\n                toast.show(ex.message);\r\n            }\r\n        })()\r\n    }, [])\r\n\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                let today = new Date();\r\n                const returns = await Api.User.extensions.getReturns({\r\n                    startDate: new Date(today.setDate(today.getDate() - 1001)),\r\n                    endDate: new Date()\r\n                })\r\n                setReturns(returns);\r\n                if (!returns.length)\r\n                    return\r\n                let twr: { x: string, y: number }[] = [];\r\n                const day = new Date(String(returns.slice(returns.length - periods[portPeriod])[0].date))\r\n                twr.push({ x: (new Date(day.setDate(day.getDate() - 1))).toUTCString(), y: 1 })\r\n                //twr.push(JSON.parse(JSON.stringify(returns[returns.length - periods[portPeriod]])));\r\n                //twr[0].return = 1;\r\n                //const day = new Date(String(twr[0].date))\r\n                //twr[0].date = new Date(day.setDate(day.getDate() - 1));\r\n                returns?.slice(returns.length - periods[portPeriod]).forEach((r, i) => {\r\n                    twr.push({ x: new Date(String(r.date)).toUTCString(), y: twr[i].y * (1 + r.return) })\r\n                    //twr.push(JSON.parse(JSON.stringify(r)));\r\n                    //twr[i+1].return = twr[i].return * (1 + r.return);\r\n                })\r\n\r\n                settwReturns(twr);\r\n\r\n            } catch (err) {\r\n                console.error(err)\r\n            }\r\n        })()\r\n    }, [])\r\n    useEffect(() => {\r\n        if (!returns || !returns.length) {\r\n            return\r\n        }\r\n\r\n        let twr: { x: string, y: number }[] = [];\r\n        const day = new Date(String(returns.slice(returns.length - periods[portPeriod])[0].date))\r\n        twr.push({ x: (new Date(day.setDate(day.getDate() - 1))).toUTCString(), y: 1 })\r\n        //twr.push(JSON.parse(JSON.stringify(returns[returns.length - periods[portPeriod]])));\r\n        //twr[0].return = 1;\r\n        //const day = new Date(String(twr[0].date))\r\n        //twr[0].date = new Date(day.setDate(day.getDate() - 1));\r\n        returns?.slice(returns.length - periods[portPeriod]).forEach((r, i) => {\r\n            twr.push({ x: new Date(String(r.date)).toUTCString(), y: twr[i].y * (1 + r.return) })\r\n            //twr.push(JSON.parse(JSON.stringify(r)));\r\n            //twr[i+1].return = twr[i].return * (1 + r.return);\r\n        })\r\n        settwReturns(twr);\r\n\r\n    }, [portPeriod])\r\n\r\n    let cummReturn = 0;\r\n    const { securities: { bySymbol, byId } } = useSecuritiesList();\r\n\r\n    if (twReturns) cummReturn = twReturns[twReturns.length - 1].y - 1;\r\n    const { columns: watchlistItemColumns } = useWatchlistItemColumns(true)\r\n    return <View style={[paddView]}>\r\n        <Animated.FlatList\r\n            key={'top_level_portfolio_screen'}\r\n            data={[\r\n                <View key={\"portfolio_\"} >\r\n                    <Header text=\"Performance\"/>\r\n                    <ElevatedSection key={'pertformance_chart_section'} alt={true} title=\"\" style={(twReturns === undefined) ? { display: 'none' } : { display: 'flex' }}>\r\n                        <View key={'performance_chart'} style={{ marginBottom: sizes.rem1 }} >\r\n                            {/*<LineHolder data={twReturns} />*/}\r\n                            <InteractiveChart data={twReturns} period={portPeriod} performance={true} />\r\n                        </View>\r\n                        <ButtonGroup key={\"period\"} items={[\"1D\", \"1W\", \"1M\", \"3M\", \"1Y\", \"2Y\", \"Max\"].map(v => ({ label: v, value: v }))} onValueChange={(v) => setPortPeriod(v)} value={portPeriod} />\r\n                        <View key={'portfolio_stats'} style={[portfolio ? { display: 'flex' } : { display: 'none' }, { borderColor: \"#ccc\", borderWidth: 1, backgroundColor: \"#f5f5f5\", padding: sizes.rem0_5 / 2, borderRadius: 4, marginBottom: 12 }]}>\r\n                            \r\n                            <View key={\"returns\"} style={{ flexDirection: \"row\" }}>\r\n                                {[\r\n                                    { title: \"Total Return\", value: toPercent2(cummReturn) },\r\n                                    { title: \"Beta\", value: toNumber2(portfolio?.beta || 0) },\r\n                                    { title: \"Sharpe Ratio\", value: toPercent2(portfolio?.sharpe || 0) }]\r\n                                    .map((item, idx) => {\r\n                                        return <View key={\"key_\" + idx} style={flex}>\r\n                                            <Text style={styles.stateLabel} >{item.title}</Text>\r\n                                            <Text style={styles.stateValue}>{item.value}</Text>\r\n                                        </View>\r\n                                    })}\r\n                            </View>\r\n                            <View key=\"exposures\" style={{ flexDirection: \"row\" }}>\r\n                                {[\r\n                                    { title: \"Long\", value: portfolio?.exposure?.long || 0 },\r\n                                    { title: \"Short\", value: portfolio?.exposure?.short || 0 },\r\n                                    { title: \"Gross\", value: portfolio?.exposure?.gross || 0 },\r\n                                    { title: \"Net\", value: portfolio?.exposure?.net || 0 }]\r\n                                    .map((item, idx) => {\r\n                                        return <View key={\"key_\" + idx} style={flex}>\r\n                                            <Text style={styles.stateLabel} >{item.title}</Text>\r\n                                            <Text style={styles.stateValue}>{toPercent(item.value)}</Text>\r\n                                        </View>\r\n                                    })}\r\n                            </View>\r\n                            <View style={{flex: 1, paddingHorizontal: sizes.rem1}}>\r\n                                <Text style={{fontSize: fonts.xSmall}}>{\"Return calculations are in beta. The more feedback you can provide us, the better we can do!\"}</Text>\r\n                            </View>\r\n                        </View>\r\n                    </ElevatedSection>\r\n                    <Section key=\"holdings\" alt={true} title=\"Holdings\" style={[holdings && holdings.length > 0 ? { display: 'flex' } : { display: 'none' }, {backgroundColor: AppColors.background}]}>{\r\n                        <List\r\n                            listKey=\"holdingsList\"\r\n                            datasetKey={`holdings_id_${holdings?.length}`}\r\n                            data={holdings}\r\n                            loadingMessage={\" \"}\r\n                            noDataMessage={\" \"}\r\n                            loadingItem={undefined}\r\n                            numColumns={2}\r\n                            renderItem={(item) => {\r\n                                return (\r\n                                    <HoldingRenderItem \r\n                                        item={item}\r\n                                        byId={byId}\r\n                                        isOwner={true}\r\n                                        />\r\n                                )\r\n                            }}\r\n                        />\r\n                    }</Section>\r\n                    <Section key=\"trades\" alt={true} title=\"Trades\" style={[!(holdings && twReturns && portfolio) ? { display: 'none' } : { display: 'flex' }, {backgroundColor: AppColors.background}]}>\r\n                        <LimitedBlockList \r\n                            listKey=\"portfolio_trades_table\"\r\n                            key={'trades_table'}\r\n                            maxPage={0}\r\n                            title={'All Trades'}\r\n                            listProps={{\r\n                                keyExtractor: (item: any, idx) => {\r\n                                    return item ? \"trade_\" + item.securityId + item.date : \"empty\";\r\n                                },\r\n                                datasetKey: `trades_id_`,\r\n                                data: async (a, $page, $limit) => {\r\n                                    const newArr = a || [];\r\n                                    newArr.push(... (await Api.User.extensions.getTrades({ $page, settings: {} })))\r\n                                    return newArr;\r\n                                } ,\r\n                                loadingMessage: \" \",\r\n                                noDataMessage: \" \",\r\n                                loadingItem: undefined,\r\n                                numColumns: 2,\r\n                                renderItem: (item: any) => {\r\n                                    return (\r\n                                        <TradeRenderItem\r\n                                            item={item}\r\n                                            byId={byId}\r\n                                            isOwner={true}\r\n                                            />\r\n                                    )\r\n                                }}\r\n                                }\r\n                            \r\n                            />\r\n\r\n                    </Section>\r\n                    <Text style={[(holdings && twReturns && portfolio) ? { display: 'none' } : { display: 'flex' },\r\n                    { fontSize: fonts.medium, fontWeight: '500', color: '#ccc' }]}>\r\n                        {\"You haven't linked a brokerage to TradingPost. Go to your Account page in the Side Menu and Link one today!\"}\r\n                    </Text>\r\n                </View>,\r\n                <View>\r\n                    <View style={{flex: 1, flexDirection: 'row'}}>\r\n                        <Header key={\"quick_watch\"} text=\"Quick Watch\" style={{flex: 1}}/>\r\n                        <View style={{marginBottom: sizes.rem0_5 / 2, marginHorizontal: 6}}> \r\n                            {  \r\n                                watchlists?.quick.id ?\r\n                                    <EditButton\r\n                                        height={24}\r\n                                        width={24} \r\n                                        onPress={() => {\r\n                                            nav.navigate(\"WatchlistEditor\", {\r\n                                                watchlistId: watchlists?.quick.id\r\n                                            })\r\n                                    }} /> :\r\n                                    <AddButton\r\n                                        height={24}\r\n                                        width={24} \r\n                                        onPress={() => {\r\n                                            nav.navigate(\"WatchlistEditor\", {\r\n                                                watchlistId: -1\r\n                                            })\r\n                                    }} />\r\n                                }\r\n                        </View>\r\n                    </View>\r\n                    \r\n                    <List\r\n                        datasetKey={`quick_watch_${focus}`}\r\n                        listKey=\"quick_watch_list\"\r\n                        loadingMessage={\" \"}\r\n                        noDataMessage={\" \"}\r\n                        loadingItem={undefined}\r\n                        numColumns={2}\r\n                        data={quickWatchlist?.items}\r\n                        renderItem={(item) => {                   \r\n                            const hideEmptyNote = false\r\n                            return (\r\n                                <WatchlistItemRenderItem\r\n                                    item={item}\r\n                                    bySymbol={bySymbol}\r\n                                    byId={byId}\r\n                                    hideEmptyNote={hideEmptyNote}\r\n                                    setShownMap={setShownMap}\r\n                                    shownMap={shownMap}\r\n                                    watchlist={quickWatchlist}\r\n                                        />\r\n                            )\r\n                        }}\r\n                    />\r\n\r\n                </View>\r\n                ,\r\n                <WatchlistSection\r\n                    datasetKey={`my_watchlist_${focus}`}\r\n                    title=\"My Watchlists\"\r\n                    key={\"my_watchlist\"}\r\n                    watchlists={watchlists?.created}\r\n                    showAddButton\r\n                    hideNoteOnEmpty\r\n                />,\r\n                <WatchlistSection\r\n                    datasetKey={`shared_watch_${focus}`}\r\n                    title=\"Shared Watchlists\"\r\n                    key={\"shared_watchlist\"}\r\n                    watchlists={watchlists?.saved}\r\n                    shared\r\n                />\r\n            ]}\r\n            renderItem={(info) => {\r\n                return info.item;\r\n            }}\r\n        >\r\n        </Animated.FlatList>\r\n    </View >\r\n\r\n}","import { Icon, Input } from \"@ui-kitten/components\";\r\nimport React, { useRef } from \"react\";\r\nimport { ImageProps, ViewStyle, TextInputProps, Image, ViewProps, Pressable } from \"react-native\";\r\nimport { ITextField, TextField } from \"../components/TextField\";\r\nimport { navIcons } from \"../images\";\r\n\r\nexport const SearchBar = (props: { onTextChange: (text: string) => void, placeholder?: string } & Pick<ViewProps, \"onLayout\">) => {\r\n    const tfRef = useRef<ITextField>(null)\r\n\r\n    return <TextField\r\n        textInputRef={tfRef}\r\n        onLayout={props.onLayout}\r\n        //enableErrors={false}\r\n        //hideUnderline\r\n        accessoryLeft={\r\n            () => {\r\n                return <Image source={navIcons.Search.inactive} style={{\r\n                    height: 20,\r\n                    width: 20,\r\n                    padding: 8,\r\n                    marginHorizontal: 12,\r\n                    transform: [\r\n                        { scaleX: -1 }\r\n                    ]\r\n                }} />\r\n            }\r\n        }\r\n        accessoryRight={\r\n            () => {\r\n                return <Pressable onPress={() => {\r\n                    tfRef.current?.field.current?.clear();\r\n                    props.onTextChange(\"\");\r\n                }}><Icon name=\"close-outline\" style={{\r\n                    height: 20,\r\n                    width: 20,\r\n                    padding: 8,\r\n                    marginHorizontal: 12,\r\n                    transform: [\r\n                        { scaleX: -1 }\r\n                    ]\r\n                }} /></Pressable>\r\n            }\r\n        }\r\n        // style={{\r\n\r\n        // } as ViewStyle} containerStyle={{\r\n        //     marginBottom: 0,\r\n        //     borderBottomColor: \"#d5d5d5\",\r\n        //     borderBottomWidth: 1,\r\n        //     paddingVertical: 16\r\n        // } as ViewStyle}\r\n        {\r\n        ...{\r\n            placeholder: props.placeholder || \"Search...\",\r\n            clearButtonMode: \"while-editing\",\r\n            onChangeText: (text) => {\r\n                props.onTextChange(text);\r\n            }\r\n        } as TextInputProps} />\r\n}","import {createBottomTabNavigator} from \"@react-navigation/bottom-tabs\";\r\nimport {NavigationProp} from \"@react-navigation/native\";\r\nimport React, {useEffect, useState} from \"react\";\r\nimport {ImageBackground, ImageSourcePropType} from \"react-native\";\r\nimport {NavIconKeys, navIcons, NavIconTypeOverride} from \"../images\";\r\nimport {FeedScreen} from \"../screens/FeedScreen\";\r\nimport {NotificationScreen} from \"../screens/NotificationScreen\";\r\nimport {PortfolioScreen} from \"../screens/PortfolioScreen\";\r\nimport {SearchScreen} from \"../screens/SearchScreen\";\r\nimport {Api} from \"@tradingpost/common/api\";\r\n\r\nconst BottomTab = createBottomTabNavigator<any>();\r\nconst DashComponents: Record<keyof typeof navIcons, { c: React.ComponentType<any>, p?: any, headerRight?: (props: { navigation: NavigationProp<any>, route: any }) => React.ReactNode }> = {\r\n    Portfolio: {\r\n        c: PortfolioScreen\r\n    },\r\n    Feed: {\r\n        c: FeedScreen\r\n    },\r\n    Search: {\r\n        c: SearchScreen,\r\n    },\r\n    Notification: {\r\n        c: NotificationScreen,\r\n    }\r\n}\r\n\r\nexport function BottomTabNavigator() {\r\n    const [hasNotifications, setHasNotifications] = useState(false);\r\n    useEffect(() => {\r\n        const t = async () => {\r\n            const notificationCount = await Api.Notification.extensions.hasNotifications();\r\n            setHasNotifications(notificationCount.unseenCount > 0);\r\n        }\r\n\r\n        t();\r\n        //We should just use the notification networks... either a notification is received when the app is open...\r\n        // or when the app opens it checks for notifications \r\n            \r\n        const interval = setInterval(async () => {\r\n            const notificationCount = await Api.Notification.extensions.hasNotifications();\r\n            setHasNotifications(notificationCount.unseenCount > 0);\r\n        }, 5000);\r\n\r\n        return () => {\r\n            clearInterval(interval)\r\n        }\r\n    }, []);\r\n\r\n    return <BottomTab.Navigator\r\n        initialRouteName=\"Feed\"\r\n        screenOptions={{\r\n            //tabBarActiveTintColor: Colors[colorScheme].tint,\r\n            headerShown: false\r\n        }}>\r\n        {Object.keys(navIcons).map((n) =>\r\n            <BottomTab.Screen\r\n                key={n}\r\n                name={n}\r\n                options={({navigation, route}) => ({\r\n                    //TODO: this makes things a bit choppy .. shoudl change in the future\r\n                    unmountOnBlur: true,\r\n                    tabBarShowLabel: false,\r\n                    lazy: true,\r\n                    tabBarIcon: ({color, focused, size}) => {\r\n                        const activeType = focused ? \"active\" : \"inactive\";\r\n                        let navIcon: ImageSourcePropType = navIcons[n as keyof typeof navIcons][activeType];\r\n                        if (NavIconTypeOverride[n as keyof typeof navIcons]) {\r\n                            if (hasNotifications) {\r\n                                navIcon = NavIconTypeOverride[n as keyof typeof navIcons][\"has\"][activeType];\r\n                            }\r\n                        }\r\n\r\n                        return <ImageBackground\r\n                            source={navIcon}\r\n                            resizeMode=\"contain\" style={{height: size, width: size}}/>\r\n                    },\r\n                })}\r\n                component={DashComponents[n as keyof typeof navIcons].c}\r\n                initialParams={{...DashComponents[n as keyof typeof navIcons]?.p}}\r\n            />)}\r\n    </BottomTab.Navigator>\r\n}\r\n","import {NavigationProp} from \"@react-navigation/native\";\r\nimport { Api, Interface } from \"@tradingpost/common/api\";\r\nimport { Avatar, Text } from \"@ui-kitten/components\";\r\nimport { SecPressable } from './WatchlistViewerScreen'\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { View } from \"react-native\";\r\nimport { ButtonGroup } from \"../components/ButtonGroup\";\r\nimport { Header, Subheader } from \"../components/Headers\";\r\nimport { List } from \"../components/List\";\r\nimport { NoDataPanel } from \"../components/NoDataPanel\";\r\nimport { ProfileBar } from \"../components/ProfileBar\";\r\nimport { SearchBar } from \"../components/SearchBar\";\r\nimport { ElevatedSection } from \"../components/Section\";\r\nimport { useSecuritiesList } from \"../SecurityList\";\r\nimport { flex, fonts, sizes } from \"../style\";\r\nimport { FeedPart } from \"./FeedScreen\";\r\nimport { FlatList } from \"react-native-gesture-handler\";\r\n\r\n\r\nexport const SearchScreen = (props: { navigation: NavigationProp<any> } & { route: { params: {} } }) => {\r\n    const [searchText, setSearchText] = useState(\"\"),\r\n        [searchType, setSearchType] = useState<\"posts\" | \"people\">(\"posts\"),\r\n        [people, setPeople] = useState<Interface.IUserList[]>(),\r\n        [searchSecurities, setSearchSecurities] = useState<Interface.ISecurityList[]>(),\r\n        debounceRef = useRef<any>(),\r\n        { securities: { list: securities } } = useSecuritiesList();\r\n    useEffect(() => {\r\n        clearTimeout(debounceRef.current);\r\n            if (searchText.length >= 3) {\r\n                debounceRef.current = setTimeout(async () => {\r\n                    try {\r\n                        setPeople(await Api.User.extensions.search({\r\n                            term: searchText\r\n                        }));\r\n                    }\r\n                    catch (ex) {\r\n                        console.error(ex);\r\n                    }\r\n                    try {\r\n                        const output: Interface.ISecurityList[] = []\r\n                        \r\n                        const modSearch = searchText.slice(0,1) === '$' ? searchText.slice(1) : searchText;\r\n                        const regex = new RegExp(`^${modSearch}`, \"i\");\r\n                        securities.forEach((item) => {\r\n                            if ((regex.test(item.company_name) || regex.test(item.symbol ))) {\r\n                                output.push(item)\r\n                            }\r\n                                \r\n                        })\r\n                        setSearchSecurities(output)\r\n                    } catch (ex) {\r\n                        console.error(ex)\r\n                    }\r\n                }, 500)\r\n            }\r\n            else if (searchText.length > 0) {\r\n                try {\r\n                    setPeople(undefined);\r\n                    const output: Interface.ISecurityList[] = []\r\n                    const modSearch = searchText.slice(0,1) === '$' ? searchText.slice(1) : searchText;\r\n                    const regex = new RegExp(`^${modSearch}`, \"i\");\r\n                    securities.forEach((item) => {\r\n                        if ((regex.test(item.symbol ))) {\r\n                            output.push(item)\r\n                        }\r\n                    })\r\n                    setSearchSecurities(output)\r\n                } catch (ex) {\r\n                    console.error(ex)\r\n                }\r\n            }\r\n            else {\r\n                setPeople(undefined);\r\n                setSearchSecurities(undefined)\r\n            }\r\n        \r\n    }, [searchText, searchType])\r\n\r\n    return (\r\n        <View style={[flex, { backgroundColor: \"#F7f8f8\" }]}>\r\n            <View style={{width: '90%', alignSelf: 'center', marginBottom: sizes.rem0_5}}>\r\n                <SearchBar \r\n                    placeholder=\"Search... ($AAPL, Tim, Tesla, etc.)\"\r\n                    onTextChange={(v) => {\r\n                        setSearchText(v);\r\n                    }} \r\n                />\r\n            </View>\r\n            <FlatList\r\n                data={[\r\n                    <View key={`id_${(people?.length || 0) + (searchSecurities?.length || 0)}`} style={{ marginLeft: sizes.rem1}}>            \r\n                    <View style={[people?.length ? {display: 'flex'} : {display: 'none'}, ]}>\r\n                        <Header text=\"Analysts\" />\r\n                        <List\r\n                            listKey=\"people\"\r\n                            datasetKey={`people_id_${people?.length}`}\r\n                            horizontal\r\n                            data={people}\r\n                            loadingMessage={\" \"}\r\n                            noDataMessage={\" \"}\r\n                            loadingItem={undefined}\r\n                            renderItem={(item) => {\r\n                                return <ElevatedSection title=\"\" style={{flex: 1}}>\r\n                                    <ProfileBar user={item.item} style={{marginBottom:-sizes.rem0_5}} />\r\n                                </ElevatedSection>\r\n                            }}\r\n                        />\r\n                    </View>\r\n                    <View style={[searchSecurities?.length ? {display: 'flex'} : {display: 'none'}]}>\r\n                        <Header text=\"Companies\"/>\r\n                        <List\r\n                            listKey=\"companies\"\r\n                            datasetKey={`company_id_${searchSecurities?.length}`}\r\n                            horizontal\r\n                            data={searchSecurities}\r\n                            loadingMessage={\" \"}\r\n                            noDataMessage={\" \"}\r\n                            loadingItem={undefined}\r\n                            //numColumns={2}\r\n                            renderItem={(item) => {\r\n                                const regex = new RegExp('placeholder.png', \"i\");\r\n                                if (regex.test(item.item.logo_url)) {\r\n                                    return (\r\n                                        <ElevatedSection title=\"\" style={{flexShrink: 1, marginBottom: 6, paddingHorizontal: 2, paddingVertical: 2, justifyContent: 'center'}}>\r\n                                            <Text style={{textAlign: 'center', fontSize: 12}}>\r\n                                                {item.item.company_name}\r\n                                            </Text>\r\n                                        </ElevatedSection>\r\n                                    )\r\n                                }\r\n                                else {\r\n                                    return (\r\n                                    <ElevatedSection title=\"\" style={{flex: 1, marginBottom: 6, paddingHorizontal: sizes.rem0_5, paddingVertical: sizes.rem0_5}}>\r\n                                        <SecPressable securityId={item.item.id}>                            \r\n                                                <Avatar\r\n                                                    style={{ borderRadius: 5 }}\r\n                                                    shape={'square'}\r\n                                                    resizeMode={'cover'}\r\n                                                    source={ {uri: item.item.logo_url} }\r\n                                                    size=\"giant\"\r\n                                                />\r\n                                        </SecPressable>\r\n                                </ElevatedSection>)\r\n                                }\r\n                            }}\r\n                        />\r\n                    </View>\r\n                    <View style={[searchText !== \"\" ? {display: 'flex'} : {display: 'none'}]}>\r\n                        <Header text=\"Posts\" />\r\n                    </View>\r\n                    </View>,\r\n                    <View>\r\n                        {(searchText !== \"\") ? <FeedPart searchText={searchText} /> : <NoDataPanel message={'Search for Analysts, Posts, or Companies!'} />}\r\n                    </View>\r\n                \r\n                ]}\r\n                renderItem={(info) => {\r\n                    return info.item\r\n                }}\r\n                contentContainerStyle={[{ paddingTop: 10 }]} \r\n                nestedScrollEnabled\r\n                >\r\n            </FlatList>\r\n        </View>\r\n    );\r\n}\r\n","import { createDrawerNavigator } from \"@react-navigation/drawer\";\r\nimport { getFocusedRouteNameFromRoute, useNavigationState } from \"@react-navigation/native\";\r\nimport React from \"react\";\r\nimport { Keyboard, Pressable } from \"react-native\";\r\nimport { useAppUser } from \"../Authentication\";\r\nimport { IconButton } from \"../components/IconButton\";\r\nimport { IconifyIcon } from \"../components/IconfiyIcon\";\r\nimport { SideMenu } from \"../components/SideMenu\";\r\nimport { SvgExpo } from \"../components/SvgExpo\";\r\nimport { BookmarkActiveBlue, BookmarkIcons, LogoNoBg } from \"../images\";\r\nimport { sizes } from \"../style\";\r\nimport { useIsKeyboardVisible } from \"../utils/hooks\";\r\nimport { BottomTabNavigator } from \"./BottomTabNavigator\";\r\nimport KeyboardClose from '../assets/@iconify/keyboard-close'\r\n\r\nexport const Drawer = createDrawerNavigator();\r\n\r\n\r\nconst HeaderTp = () => {\r\n    return <SvgExpo style={{ height: \"100%\", aspectRatio: 1 }}>\r\n        <LogoNoBg />\r\n    </SvgExpo>\r\n}\r\n\r\nexport function DrawerPart() {\r\n    const { loginState } = useAppUser();\r\n\r\n    console.log(\"Running Drawer Navigation\")\r\n    return loginState?.appUser ? <Drawer.Navigator useLegacyImplementation={true} drawerContent={(props) => <SideMenu  {...props} />}\r\n        screenOptions={({ route, navigation }) => ({\r\n            headerTitleAlign: \"center\",\r\n            headerTitle: HeaderTp,\r\n            headerRight: (() => {\r\n                const routeName = getFocusedRouteNameFromRoute(route);\r\n                const state = useNavigationState((state) => {\r\n                    return (((state.routes[0]?.state?.routes as any[])?.find(r => r.name === \"Feed\").params as any)?.bookmarkedOnly || \"false\") as \"true\" | \"false\"\r\n                });\r\n\r\n                const { isKeyboardVisible } = useIsKeyboardVisible();\r\n\r\n                if (isKeyboardVisible) {\r\n                    return <Pressable\r\n                        onPress={() => {\r\n                            Keyboard.dismiss();\r\n                        }}\r\n                    ><IconifyIcon\r\n                            currentColor=\"black\"\r\n                            icon={KeyboardClose}\r\n                            svgProps={{\r\n                                height: 24,\r\n                                width: 24,\r\n                            }}\r\n                            style={{\r\n                                height: 24,\r\n                                width: 24,\r\n                                marginRight: sizes.rem1\r\n                            }}\r\n                        />\r\n                    </Pressable>\r\n                }\r\n\r\n                switch (routeName) {\r\n                    case \"Feed\":\r\n                        const isMarked = state === \"true\";\r\n                        return <Pressable onPress={() => {\r\n                            navigation.navigate(\"Feed\", {\r\n                                bookmarkedOnly: isMarked ? \"false\" : \"true\"\r\n                            })\r\n                        }}>\r\n                            {!isMarked ? <IconButton\r\n                                iconSource={isMarked ? BookmarkIcons.active : BookmarkIcons.inactive}\r\n                                style={{\r\n                                    height: 28,\r\n                                    width: 28,\r\n                                    marginRight: sizes.rem1\r\n                                }} />\r\n                                : <BookmarkActiveBlue style={{\r\n                                    height: 28,\r\n                                    width: 28,\r\n                                    marginLeft: \"auto\",\r\n                                    marginRight: (sizes.rem1_5 + sizes.rem1) / 2\r\n                                }} />\r\n                            }\r\n                        </Pressable>\r\n                    default:\r\n                        console.log(routeName);\r\n                        return undefined;\r\n                }\r\n            })\r\n        })}>\r\n        <Drawer.Screen name=\"Root\" component={BottomTabNavigator} />\r\n    </Drawer.Navigator> : null;\r\n}\r\n","import React, { useEffect, useState, useRef } from \"react\"\r\nimport { IconifyIcon } from \"../components/IconfiyIcon\"\r\nimport { Section, Subsection } from \"../components/Section\"\r\nimport { SwitchField } from \"../components/SwitchField\"\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { CreateAccountProps, sideMargin } from \"./create_account/shared\"\r\n//import { SetDashboardLayout } from \"../../layouts/DashboardLayout\"\r\n//import { deleteAccount, UpdateUserProfile } from \"../../apis/Authenticfation\"\r\nimport { /*bindSwitch,*/ useReadonlyEntity } from \"../utils/hooks\"\r\nimport { ScrollWithButtons } from \"../components/ScrollWithButtons\"\r\nimport { View, Animated } from \"react-native\"\r\nimport { useLinkTo } from \"@react-navigation/native\"\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { openBrowserAsync } from 'expo-web-browser';\r\nimport { Icon, Text } from \"@ui-kitten/components\";\r\nimport { AddButton, EditButton } from \"../components/AddButton\";\r\nimport { Table } from \"../components/Table\";\r\nimport { bannerText, flex, paddView, paddViewWhite, sizes, thinBannerText } from \"../style\";\r\nimport { PrimaryButton } from \"../components/PrimaryButton\"\r\nimport { useAppUser } from \"../Authentication\"\r\nimport { RootStackScreenProps } from \"../navigation/pages\";\r\n\r\n\r\nexport function AccountSettingsScreen(props: RootStackScreenProps<\"AccountSettings\">) {\r\n    const { loginState, signIn } = useAppUser();\r\n    const appUser = loginState?.appUser, authToken = loginState?.authToken\r\n    const [mentionCheck, setMentionCheck] = useState<boolean>(appUser?.settings?.push_notifications.mentions === undefined ? true : appUser?.settings?.push_notifications.mentions),\r\n        [upvotesCheck, setUpvotesCheck] = useState<boolean>(appUser?.settings?.push_notifications.upvotes === undefined ? true : appUser?.settings?.push_notifications.upvotes),\r\n        [watchlistChangeCheck, setWatchlistChangeCheck] = useState<boolean>(appUser?.settings?.push_notifications.watchlist_changes === undefined ? true : appUser?.settings?.push_notifications.watchlist_changes),\r\n        [performanceCheck, setPerformanceCheck] = useState<boolean>(appUser?.settings?.portfolio_display.performance === undefined ? false : appUser?.settings?.portfolio_display.performance),\r\n        [holdingsCheck, setHoldingsCheck] = useState<boolean>(appUser?.settings?.portfolio_display.holdings === undefined ? false : appUser?.settings?.portfolio_display.holdings),\r\n        [tradesCheck, setTradesCheck] = useState<boolean>(appUser?.settings?.portfolio_display.trades === undefined ? false : appUser?.settings?.portfolio_display.trades),\r\n        [analystCheck, setAnalystCheck] = useState<boolean>(appUser?.settings?.analyst === undefined ? false : appUser?.settings?.analyst),\r\n        linkTo = useLinkTo<any>()\r\n\r\n    const onMentionCheckChanged = (isMentionChecked: boolean) => {\r\n        setMentionCheck(isMentionChecked);\r\n    }\r\n    const onUpvoteCheckChanged = (isUpvoteChecked: boolean) => {\r\n        setUpvotesCheck(isUpvoteChecked);\r\n    }\r\n    const onWatchlistChangeCheckChanged = (isWatchlistChangeChecked: boolean) => {\r\n        setWatchlistChangeCheck(isWatchlistChangeChecked);\r\n    }\r\n    const onPerformanceCheckChanged = (isPerformanceChecked: boolean) => {\r\n        setPerformanceCheck(isPerformanceChecked);\r\n    }\r\n    const onHoldingsCheckChanged = (isHoldingsChecked: boolean) => {\r\n        setHoldingsCheck(isHoldingsChecked);\r\n    }\r\n    const onTradesCheckChanged = (isTradesChecked: boolean) => {\r\n        setTradesCheck(isTradesChecked);\r\n    }\r\n    const onAnalystCheckChanged = (isAnalystChecked: boolean) => {\r\n        setAnalystCheck(isAnalystChecked);\r\n    }\r\n\r\n    const opacityAnim = useRef(new Animated.Value(0)).current;\r\n    const [accounts, setAccounts] = useState<Awaited<ReturnType<typeof Api.User.extensions.getBrokerageAccounts>>>()\r\n    const intervalRef = useRef<any>();\r\n    const [needsRefresh, setNeedsRefresh] = useState<{}>();\r\n    const openLink = async () => {\r\n        const browserName = \"finicity_auth\";\r\n        await openBrowserAsync(brokerLink, { \"windowName\": browserName });\r\n        clearInterval(intervalRef.current);\r\n\r\n        intervalRef.current = setInterval(async () => {\r\n            console.log(\"WTF\");\r\n            if (await AsyncStorage.getItem(\"auth-finicity-code\")) {\r\n                console.log(\"CODE HAS BEEN FOUND\");\r\n                setAccounts(await Api.User.extensions.getBrokerageAccounts())\r\n            }\r\n        }, 5000)\r\n    }\r\n    //cleanup\r\n    useEffect(() => {\r\n        AsyncStorage.removeItem(\"auth-finicity-code\");\r\n        return () => {\r\n            clearInterval(intervalRef.current);\r\n            AsyncStorage.removeItem(\"auth-finicity-code\");\r\n        }\r\n    }, [])\r\n\r\n\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n    const [brokerLink, setLink] = useState(\"\");\r\n    useEffect(() => {\r\n        Api.User.extensions.generateBrokerageLink(undefined).then(({ link }) => {\r\n            setLink(link)\r\n        })\r\n    }, [needsRefresh])\r\n\r\n    useEffect(() => {\r\n        Api.User.extensions.getBrokerageAccounts()\r\n            .then((r: any) => {\r\n                setAccounts(r);\r\n            })\r\n    }, [])\r\n\r\n    return <ScrollWithButtons\r\n        buttons={{\r\n            left: {\r\n                text: 'Cancel',\r\n                onPress: async () => {\r\n                    try {\r\n                        //      await UpdateUserProfile({ status_setup: true });\r\n                        //    SetDashboardLayout();\r\n                        linkTo('/dash/feed')\r\n                    }\r\n                    catch (ex) {\r\n                    }\r\n                }\r\n            },\r\n            right: {\r\n                text: 'Save',\r\n                onPress: async () => {\r\n                    try {\r\n                        if (appUser?.id)\r\n                            await Api.User.update(appUser.id, {\r\n                                settings: {\r\n                                    analyst: analystCheck,\r\n                                    push_notifications: {\r\n                                        mentions: mentionCheck,\r\n                                        upvotes: upvotesCheck,\r\n                                        watchlist_changes: watchlistChangeCheck,\r\n                                    },\r\n                                    portfolio_display: {\r\n                                        performance: performanceCheck,\r\n                                        holdings: holdingsCheck,\r\n                                        trades: tradesCheck\r\n                                    }\r\n                                }\r\n                            })\r\n\r\n                        authToken ? await signIn(\"\", authToken) : {};\r\n\r\n                        linkTo('/dash/feed');\r\n\r\n                    }\r\n                    catch (ex) {\r\n                    }\r\n                }\r\n            }\r\n        }}>\r\n        <View style={{ margin: sideMargin }}>\r\n            <Section title=\"\" style={{ padding: 10 }}>\r\n                <SwitchField label='Analyst' checked={analystCheck} onChange={onAnalystCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n            </Section>\r\n            <Section title='Display' style={{ padding: 10 }}>\r\n                <SwitchField label='Performance' checked={performanceCheck} onChange={onPerformanceCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n                <SwitchField label='Portfolio' checked={holdingsCheck} onChange={onHoldingsCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n                <SwitchField label='Trades' checked={tradesCheck} onChange={onTradesCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n            </Section>\r\n            <Section style={{ padding: 10 }} title=\"Link Brokerage Accounts\" button={(props) => accounts?.length ? <EditButton\r\n                onPress={() => {\r\n                    openLink();\r\n                }}\r\n                height={35}\r\n                width={35}\r\n            /> : <AddButton\r\n                onPress={() => openLink()}\r\n                height={35}\r\n                width={35}\r\n            />} >\r\n                <Table datasetKey={accounts?.map(a => a.id).join(\",\") || \"none\"} columns={[{ alias: \"Brokerage\", field: \"broker_name\", align: \"left\" }, { alias: \"Account #\", field: \"account_number\", align: \"left\" }]} data={accounts} noDataMessage=\"You have no linked accounts\" />\r\n            </Section>\r\n            <Section title='Payment' style={{ padding: 10 }}>\r\n                <Text>\r\n                    Stripe\r\n                </Text>\r\n            </Section>\r\n            <Section title='Notifications' style={{ padding: 10 }}>\r\n                <Subsection title='Posts' alt={true}>\r\n                    <SwitchField label='Mentions' checked={mentionCheck} onChange={onMentionCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n                    <SwitchField label='Upvotes' checked={upvotesCheck} onChange={onUpvoteCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n                </Subsection>\r\n                <Subsection title='Watchlists' alt={true}>\r\n                    {/*<SwitchField label='Price Movement' checked={watchlistPxCheck} onChange={onWatchlistPxCheckChanged} viewStyle={{flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5}} toggleStyle={{}} textStyle={{fontSize: 14, alignSelf: 'center'}}/>*/}\r\n                    <SwitchField label='Changes' checked={watchlistChangeCheck} onChange={onWatchlistChangeCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n                </Subsection>\r\n            </Section>\r\n            <Section title='Management' style={{ padding: 10 }}>\r\n                <View style={{ flexDirection: 'row', justifyContent: 'space-between', marginVertical: 5 }}>\r\n                    <Text style={{ fontSize: 14, alignSelf: 'center' }}>\r\n                        Delete Account\r\n                    </Text>\r\n                    <PrimaryButton style={{ width: \"40%\", backgroundColor: \"#D81222\", borderColor: \"#D81222\" }} onPress={() => { }}>\r\n                        FOREVER\r\n                    </PrimaryButton>\r\n                </View>\r\n            </Section>\r\n        </View>\r\n    </ScrollWithButtons>\r\n}","import React, { useState, useMemo, useEffect } from \"react\"\r\nimport { ElevatedSection, Section, Subsection } from \"../components/Section\"\r\nimport { SwitchField } from \"../components/SwitchField\"\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { sideMargin } from \"./create_account/shared\"\r\nimport { ScrollWithButtons } from \"../components/ScrollWithButtons\"\r\nimport { View, Pressable, Alert, Platform } from \"react-native\"\r\nimport { useLinkTo, useNavigation } from \"@react-navigation/native\"\r\nimport { useSecuritiesList } from '../SecurityList'\r\nimport { Autocomplete, AutocompleteItem, Icon, IndexPath, Text, TabView, Tab } from \"@ui-kitten/components\";\r\nimport { AddButton, EditButton } from \"../components/AddButton\";\r\nimport { flex, sizes, fonts } from \"../style\";\r\nimport { PrimaryButton } from \"../components/PrimaryButton\"\r\nimport { useAppUser } from \"../Authentication\"\r\nimport { investmentStrats, questionStyle, gicsAC } from './create_account/InvestmentInterestSection'\r\nimport { KeyboardAvoidingInput } from \"../components/KeyboardAvoidingInput\";\r\nimport { Picker } from \"../components/Picker\";\r\nimport { ProfileButton } from \"../components/ProfileButton\";\r\nimport { Slider } from \"../components/Slider\";\r\nimport { AppColors } from \"../constants/Colors\";\r\nimport { YourContentComponent } from \"../components/YourContentComponent\";\r\nimport { IUserGet, IUserUpdate } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport { Log } from \"../utils/logger\";\r\nimport { LinkBrokerageComponent } from \"../components/LinkBrokerageComponent\";\r\n\r\nexport function AccountInfoScreen() {\r\n    const { loginState, signIn, signOut } = useAppUser(),\r\n        [index, setIndex] = useState(0),\r\n        linkTo = useLinkTo<any>()\r\n\r\n    const definedOrValue = (test: boolean | undefined, d: boolean) => {\r\n        return test === undefined ? d : test\r\n    }\r\n    const appUser = loginState?.appUser;\r\n    const [accountUpdates, setAccountUpdates] = useState<IUserUpdate>({\r\n        bio: appUser?.bio,\r\n        analyst_profile: appUser?.analyst_profile || {\r\n            investment_strategy: \"\",\r\n            portfolio_concentration: 50,\r\n            benchmark: \"\",\r\n            interests: []\r\n        },\r\n        profile_url: appUser?.profile_url,\r\n        settings: {\r\n            analyst: appUser?.settings?.analyst || false,\r\n            portfolio_display: {\r\n                holdings: definedOrValue(appUser?.settings?.portfolio_display.holdings, false),\r\n                performance: definedOrValue(appUser?.settings?.portfolio_display.performance, false),\r\n                trades: definedOrValue(appUser?.settings?.portfolio_display.trades, false)\r\n            },\r\n            push_notifications: {\r\n                mentions: definedOrValue(appUser?.settings?.push_notifications.mentions, true),\r\n                upvotes: definedOrValue(appUser?.settings?.push_notifications.upvotes, true),\r\n                watchlist_changes: definedOrValue(appUser?.settings?.push_notifications.watchlist_changes, true)\r\n            }\r\n        },\r\n        is_deleted: appUser?.is_deleted\r\n    })\r\n    //HACK: think through a better way of doing this.\r\n    useEffect(() => {\r\n        setAccountUpdates((a) => {\r\n            const clone = { ...a };\r\n            clone.profile_url = appUser?.profile_url;\r\n            return clone;\r\n        });\r\n    }, [loginState?.updated.toString(), appUser?.profile_url])\r\n\r\n    return (\r\n        <ScrollWithButtons\r\n            buttons={{\r\n                left: {\r\n                    text: 'Cancel',\r\n                    onPress: async () => {\r\n                        try {\r\n                            linkTo('/dash/feed')\r\n                        }\r\n                        catch (ex) {\r\n                        }\r\n                    }\r\n                },\r\n                right: {\r\n                    text: 'Save',\r\n                    onPress: async () => {\r\n                        await Log.tryCatch(async () => {\r\n                            if (appUser?.id && loginState?.authToken) {\r\n                                await Api.User.update(appUser?.id || '', accountUpdates);\r\n                                await signIn(\"\", loginState?.authToken);\r\n                            }\r\n                        })\r\n\r\n                        try {\r\n                            linkTo('/dash/feed')\r\n                        }\r\n                        catch (ex) {\r\n                            console.error(ex);\r\n                        }\r\n                    }\r\n                }\r\n            }}>\r\n            <View style={[flex, { margin: sideMargin, marginTop: 12 }]} >\r\n                <TabView indicatorStyle={{ marginTop: 26 }}\r\n                    style={{ marginVertical: sizes.rem0_5 }}\r\n                    tabBarStyle={{ backgroundColor: AppColors.background, borderColor: AppColors.background }}\r\n                    selectedIndex={index}\r\n                    onSelect={(idx) => {\r\n                        console.log(\"Setting index \" + idx);\r\n                        setIndex(idx);\r\n                    }}>\r\n                    <Tab key={\"A\"} title={'Account Info'} style={{ backgroundColor: AppColors.background, borderColor: AppColors.background }} >\r\n                        <AccountInfoContent setUpdates={setAccountUpdates} updates={accountUpdates} />\r\n                    </Tab>\r\n                    <Tab key={\"B\"} title={'Your Content'} style={{ backgroundColor: AppColors.background, borderColor: AppColors.background }}>\r\n                        <YourContentComponent />\r\n                    </Tab>\r\n                    <Tab key={\"C\"} title={'Advanced'} style={{ backgroundColor: AppColors.background, borderColor: AppColors.background }}>\r\n                        <AdvancedTabContent signOut={signOut} appUser={appUser} setUpdates={setAccountUpdates} updates={accountUpdates} />\r\n\r\n                    </Tab>\r\n                </TabView>\r\n\r\n            </View>\r\n        </ScrollWithButtons>\r\n    )\r\n}\r\nconst AccountInfoContent = (props: { updates: IUserUpdate, setUpdates: (updates: IUserUpdate) => void }) => {\r\n    const { updates, setUpdates } = props;\r\n    const [sliderWidth, setSliderWidth] = useState(10),\r\n        [acText, setAcText] = useState(\"\"),\r\n        { securities: { list: securities } } = useSecuritiesList();\r\n\r\n    const acValues = useMemo(() => {\r\n        const r = new RegExp(acText, \"i\");\r\n        return acText ? gicsAC.filter((g, i) => r.test(g)) : [];\r\n    }, [acText])\r\n    const addIfMissing = (value: string) => {\r\n        if (value && !updates.analyst_profile?.interests?.find((int: any) => int.toLowerCase() === value.toLowerCase())) {\r\n            const _updates = { ...updates }\r\n            _updates.analyst_profile!.interests = [..._updates.analyst_profile!.interests, value]\r\n            setUpdates(_updates);\r\n        }\r\n        setAcText(\"\");\r\n    }\r\n    const benches = securities.filter(s => s.is_benchmark).sort((a, b) => a.symbol.localeCompare(b.symbol)).map((value) => ({\r\n        label: `${value.symbol} - ${value.security_name}`,\r\n        value: value.symbol,\r\n        iconUrl: value.logo_url\r\n    }))\r\n    const { loginState } = useAppUser();\r\n\r\n    return <ElevatedSection\r\n        title=\"\">\r\n        <Text style={[questionStyle, { marginTop: sizes.rem0_5, textAlign: 'center' }]}>Tap to Modify Profile Picture</Text>\r\n        <ProfileButton key={loginState?.updated.toString()} userId={''} profileUrl={updates.profile_url || ''} size={sizes.rem8} editable />\r\n        <Text style={[questionStyle, { marginTop: sizes.rem0_5 }]}>Bio</Text>\r\n        <KeyboardAvoidingInput\r\n            value={updates.bio}\r\n            displayButton={false}\r\n            numLines={3}\r\n            placeholder={'Tell people about yourself'}\r\n            setValue={(text: string) => {\r\n                const _updates = { ...updates }\r\n                _updates.bio = text;\r\n                setUpdates(_updates);\r\n            }}\r\n        />\r\n        <Text style={questionStyle}>What is your investment strategy?</Text>\r\n        <Picker\r\n            placeholder='Select Strategy'\r\n            value={updates?.analyst_profile?.investment_strategy}\r\n            items={investmentStrats.map((value) => ({\r\n                label: value,\r\n                value\r\n            }))}\r\n            onSelect={(v) => {\r\n                if (v) {\r\n                    const _updates = { ...updates }\r\n                    _updates.analyst_profile!.investment_strategy = investmentStrats[v.row];\r\n                    setUpdates(_updates);\r\n                }\r\n            }}\r\n        />\r\n        <Text style={questionStyle}>How concentrated is your portfolio?</Text>\r\n        <Slider\r\n            containerStyle={{\r\n                //marginLeft: sliderWidth * 0.05\r\n            }}\r\n            min={0}\r\n            max={100}\r\n            step={25}\r\n            //sliderLength={sliderWidth * 0.9}\r\n            values={[updates.analyst_profile!.portfolio_concentration]}\r\n            onValuesChange={(v) => {\r\n                const _updates = { ...updates }\r\n                _updates.analyst_profile!.portfolio_concentration = v[0]\r\n                setUpdates(_updates);\r\n            }}\r\n        />\r\n        <View style={{ flexDirection: \"row\", justifyContent: \"space-between\", marginBottom: 16 }}>\r\n            <Text>Highly Diversified</Text>\r\n            <Text>Very Concentrated</Text>\r\n        </View>\r\n        <Text style={questionStyle}>What benchmark do you follow?</Text>\r\n        <Picker\r\n            value={updates.analyst_profile?.benchmark}\r\n            placeholder='Select Benchmark'\r\n            items={benches}\r\n            onSelect={(v) => {\r\n                if (v) {\r\n                    const _updates = { ...updates }\r\n                    _updates.analyst_profile!.benchmark = benches[v.row].value;\r\n                    setUpdates(_updates);\r\n                }\r\n            }}\r\n        />\r\n        <Text style={questionStyle}>Pick a few interest and specialties</Text>\r\n        <View>\r\n            <Autocomplete\r\n                value={acText || \"\"}\r\n                onChangeText={setAcText}\r\n                placeholder=\"Interest &amp; Specialties\"\r\n                placement=\"bottom\"\r\n                accessoryRight={\r\n                    (props) => <AddButton\r\n                        onPress={() => addIfMissing(acText)}\r\n                        height={(props?.style as any)?.height}\r\n                        width={(props?.style as any)?.width}\r\n\r\n                    />\r\n                }\r\n                onSelect={(idx) => addIfMissing(acValues[idx])}>{\r\n                    acValues.map((v, i) => <AutocompleteItem key={i} title={v} />)\r\n                }\r\n            </Autocomplete>\r\n        </View>\r\n        {\r\n            updates.analyst_profile?.interests.map((v, i) => <View style={{ padding: sizes.rem0_5, flexDirection: \"row\" }}>\r\n                <Text style={{ textAlign: \"left\", flex: 1 }}>{v}</Text><Pressable onPress={() => {\r\n                    const newInterest = [...updates.analyst_profile!.interests];\r\n                    newInterest.splice(i, 1);\r\n                    const _updates = { ...updates }\r\n                    _updates.analyst_profile!.interests = newInterest;\r\n                    setUpdates(_updates);\r\n                }}><Icon name=\"close-outline\" style={{ height: 24, aspectRatio: 1 }} /></Pressable>\r\n            </View>)\r\n        }\r\n    </ElevatedSection>\r\n\r\n}\r\n\r\nconst AdvancedTabContent = (props: { appUser: IUserGet | undefined, signOut: any, updates: IUserUpdate, setUpdates: (updates: IUserUpdate) => void }) => {\r\n\r\n    const nav = useNavigation();\r\n    const updates = props.updates;\r\n\r\n    const onMentionCheckChanged = (isMentionChecked: boolean) => {\r\n        const _updates = { ...updates }\r\n        _updates.settings!.push_notifications.mentions = isMentionChecked;\r\n        props.setUpdates(_updates)\r\n    }\r\n    const onUpvoteCheckChanged = (isUpvoteChecked: boolean) => {\r\n        const _updates = { ...updates }\r\n        _updates.settings!.push_notifications.upvotes = isUpvoteChecked\r\n        props.setUpdates(_updates)\r\n    }\r\n    const onWatchlistChangeCheckChanged = (isWatchlistChangeChecked: boolean) => {\r\n        const _updates = { ...updates }\r\n        _updates.settings!.push_notifications.watchlist_changes = isWatchlistChangeChecked\r\n        props.setUpdates(_updates)\r\n\r\n    }\r\n    const onPerformanceCheckChanged = (isPerformanceChecked: boolean) => {\r\n        const _updates = { ...updates }\r\n        _updates.settings!.portfolio_display.performance = isPerformanceChecked;\r\n        props.setUpdates(_updates)\r\n    }\r\n    const onHoldingsCheckChanged = (isHoldingsChecked: boolean) => {\r\n        const _updates = { ...updates }\r\n        _updates.settings!.portfolio_display.holdings = isHoldingsChecked\r\n        props.setUpdates(_updates)\r\n    }\r\n    const onTradesCheckChanged = (isTradesChecked: boolean) => {\r\n        const _updates = { ...updates }\r\n        _updates.settings!.portfolio_display.trades = isTradesChecked;\r\n        props.setUpdates(_updates)\r\n    }\r\n    const onAnalystCheckChanged = (isAnalystChecked: boolean) => {\r\n        const _updates = { ...updates }\r\n        _updates.settings!.analyst = isAnalystChecked;\r\n        props.setUpdates(_updates)\r\n    }\r\n    //@ts-ignore\r\n    const alertPolyfill = (title, description, options, extra) => {\r\n        const result = window.confirm([title, description].filter(Boolean).join('\\n'))\r\n\r\n        if (result) {\r\n            //@ts-ignore\r\n            const confirmOption = options.find(({ style }) => style !== 'cancel')\r\n            confirmOption && confirmOption.onPress()\r\n        } else {\r\n            //@ts-ignore\r\n            const cancelOption = options.find(({ style }) => style === 'cancel')\r\n            cancelOption && cancelOption.onPress()\r\n        }\r\n    }\r\n\r\n    const alert = Platform.OS === 'web' ? alertPolyfill : Alert.alert;\r\n\r\n\r\n    return <ElevatedSection title=\"\" style={{ padding: 5 }}>\r\n        <View>\r\n            <SwitchField label='Analyst'\r\n                toolTipText={`Becoming an analyst allows you to display your portfolio to subscribers, customize your profile and enable you to post premium content on TP.`}\r\n                toolTipStyle={{ alignItems: 'flex-start' }}\r\n                checked={props.updates.settings?.analyst}\r\n                onChange={onAnalystCheckChanged}\r\n                viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5, padding: 5 }}\r\n                toggleStyle={{}}\r\n                textStyle={{ fontSize: fonts.large, fontWeight: '500', alignSelf: 'center', color: AppColors.primary }}\r\n            />\r\n        </View>\r\n        <Section title='Display To Subscribers' style={{ padding: 5 }}>\r\n            <SwitchField label='Performance' checked={props.updates.settings?.portfolio_display.performance} onChange={onPerformanceCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n            <SwitchField label='Portfolio' checked={props.updates.settings?.portfolio_display.holdings} onChange={onHoldingsCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n            <SwitchField label='Trades' checked={props.updates.settings?.portfolio_display.trades} onChange={onTradesCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n            <View style={{ flexDirection: 'row', justifyContent: 'center', marginVertical: 15 }}>\r\n                <PrimaryButton style={{ width: \"60%\", paddingHorizontal: 4, backgroundColor: AppColors.secondary, borderColor: AppColors.secondary }} onPress={() => {\r\n                    nav.navigate('Subscription')\r\n                }}>\r\n                    {evaProps => <Text {...evaProps} style={{ textAlign: 'center', color: 'white', paddingHorizontal: 6 }}>Manage Subscriptions</Text>}\r\n\r\n                </PrimaryButton>\r\n            </View>\r\n        </Section>\r\n        <LinkBrokerageComponent />\r\n        <Section title='Payment' style={{ padding: 10 }}>\r\n            <Text>\r\n                Coming Soon!\r\n            </Text>\r\n        </Section>\r\n        <Section title='Notifications' style={{ padding: 10 }}>\r\n            <Subsection title='Posts' alt={true}>\r\n                <SwitchField label='Mentions' checked={props.updates.settings?.push_notifications.mentions} onChange={onMentionCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n                <SwitchField label='Upvotes' checked={props.updates.settings?.push_notifications.upvotes} onChange={onUpvoteCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n            </Subsection>\r\n            <Subsection title='Watchlists' alt={true}>\r\n                {/*<SwitchField label='Price Movement' checked={watchlistPxCheck} onChange={onWatchlistPxCheckChanged} viewStyle={{flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5}} toggleStyle={{}} textStyle={{fontSize: 14, alignSelf: 'center'}}/>*/}\r\n                <SwitchField label='Changes' checked={props.updates.settings?.push_notifications.watchlist_changes} onChange={onWatchlistChangeCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n            </Subsection>\r\n        </Section>\r\n        <Section title='Management' style={{ padding: 10 }}>\r\n            <View style={{ flexDirection: 'row', justifyContent: 'space-between', marginVertical: 5 }}>\r\n                <Text style={{ fontSize: 14, alignSelf: 'center' }}>\r\n                    Delete Account\r\n                </Text>\r\n                <PrimaryButton style={{ width: \"40%\", backgroundColor: \"#D81222\", borderColor: \"#D81222\" }} onPress={async () => {\r\n                    return alert(\r\n                        `Are you sure you want to delete your account?`,\r\n                        '',\r\n                        [\r\n                            {\r\n                                text: \"Yes\",\r\n                                onPress: async () => {\r\n                                    const _updates = { ...updates }\r\n                                    _updates.is_deleted = true;\r\n                                    props.setUpdates(_updates)\r\n                                    await Api.User.update(props.appUser?.id || '', _updates);\r\n                                    props.signOut();\r\n                                }\r\n                            },\r\n                            {\r\n                                text: \"No\"\r\n                            }\r\n                        ]\r\n                    )\r\n                }}>\r\n                    FOREVER\r\n                </PrimaryButton>\r\n            </View>\r\n        </Section>\r\n    </ElevatedSection>\r\n\r\n}","import AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { Text } from '@ui-kitten/components'\r\nimport { useEffect } from 'react';\r\nimport { RootStackScreenProps } from '../navigation/pages';\r\n\r\nexport const AuthScreen = (props: RootStackScreenProps<\"Auth\">) => {\r\n    const platform = props.route?.params?.platform;\r\n    const code = props.route?.params?.code;\r\n    console.log(\"############################## LOADED THE AUTH SCREEN ########################################\");\r\n    useEffect(() => {\r\n        console.log(\"SETTING THE PLATFORM CODE\");\r\n        if (platform === \"twitter\" && code) {\r\n            AsyncStorage.setItem(`auth-${platform}-code`, code);\r\n        }\r\n        else if (platform === \"youtube\" && code) {\r\n            AsyncStorage.setItem(`auth-${platform}-code`, code);\r\n        }\r\n        //redundant but I may change this\r\n        else if (platform === \"finicity\") {\r\n            AsyncStorage.setItem(`auth-${platform}-code`, \"DONE!\");\r\n        }\r\n        if (props.navigation.canGoBack())\r\n            props.navigation.goBack();\r\n\r\n    }, [platform, code]);\r\n    return <Text>You have been authozied to {platform || \"Missing platform\"}</Text>\r\n}","import { Button } from \"@ui-kitten/components\";\r\nimport React, { useState } from \"react\";\r\nimport { View } from \"react-native\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { PrimaryButton } from \"../components/PrimaryButton\";\r\nimport { ElevatedSection } from \"../components/Section\";\r\nimport { TextField } from \"../components/TextField\";\r\nimport { Api } from '@tradingpost/common/api'\r\nimport { useAppUser } from \"../Authentication\";\r\nimport { RootStackScreenProps } from \"../navigation/pages\";\r\n\r\nexport const ChangePasswordScreen = (props: RootStackScreenProps<\"ResetPassword\">) => {\r\n    const\r\n        [oldPass, setOldPass] = useState<string>(),\r\n        [newPass, setNewPass] = useState<string>(),\r\n        [confirm, setConfirm] = useState<string>(),\r\n        toast = useToast(),\r\n        hasToken = Boolean(props.route.params.token),\r\n        { loginState } = useAppUser()\r\n\r\n    return <View>\r\n        <ElevatedSection title={\"Reset Password\"}>\r\n            {!hasToken && <TextField label=\"Old Pass\" value={oldPass} onChangeText={(t) => setOldPass(t)} />}\r\n            <TextField label=\"New Pass\" value={newPass} onChangeText={(t) => setNewPass(t)} />\r\n            <TextField label=\"Confirm Pass\" value={confirm} onChangeText={(t) => setConfirm(t)} />\r\n            <PrimaryButton\r\n                onPress={async () => {\r\n                    try {\r\n                        if (!hasToken && !oldPass)\r\n                            throw new Error(\"Please provide a value for your old password\");\r\n                        if (newPass && newPass !== confirm)\r\n                            throw new Error(\"Please make sure your new passwords match\")\r\n                        if ((newPass?.length || 0) < 8)\r\n                            throw new Error(\"Please make sure your password is at least 8 characters long\")\r\n\r\n\r\n                        await Api.Auth.resetPassword(\r\n                            loginState?.appUser?.email || \"\",\r\n                            props.route.params.token || oldPass || \"\",\r\n                            !hasToken,\r\n                            newPass || \"\")\r\n\r\n                        props.navigation.replace(\"Root\");\r\n\r\n                    }\r\n                    catch (ex: any) {\r\n                        toast.show(ex.message)\r\n                    }\r\n\r\n                }}\r\n            >Change Password</PrimaryButton>\r\n        </ElevatedSection>\r\n    </View>\r\n\r\n}","import { Api, Interface } from \"@tradingpost/common/api\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { Animated, FlatList, NativeSyntheticEvent, ScrollView, View, NativeScrollEvent, useWindowDimensions } from \"react-native\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { Avatar, Text } from '@ui-kitten/components'\r\nimport { elevated, flex, fonts, paddView, row, sizes } from \"../style\";\r\nimport { ElevatedSection } from \"../components/Section\";\r\nimport { Tab, TabBar } from \"@ui-kitten/components\";\r\nimport { FavButton } from \"../components/AddButton\";\r\nimport { toDollarsAndCents, toPercent2 } from \"../utils/misc\";\r\nimport InteractiveChart from \"../components/InteractiveGraph\";\r\nimport { ButtonGroup } from \"../components/ButtonGroup\";\r\nimport { FeedPart } from \"./FeedScreen\";\r\nimport { RootStackScreenProps } from \"../navigation/pages\";\r\nimport { AppColors } from \"../constants/Colors\";\r\n\r\nconst periods: { [key: string]: number } = {\r\n    \"1D\": 1,\r\n    \"1W\": 5,\r\n    \"1M\": 20,\r\n    \"3M\": 60,\r\n    \"1Y\": 252,\r\n    \"2Y\": 252 * 2,\r\n    \"5Y\": 252 * 5,\r\n    \"Max\": 252 * 10\r\n}\r\nconst tabBarMargin = sizes.rem1;\r\n\r\nexport const CompanyScreen = (props: RootStackScreenProps<\"Company\">) => {\r\n\r\n    const [security, setSecurity] = useState<Interface.ISecurityGet>();\r\n    const [securityPrices, setSecurityPrices] = useState<{ x: string, y: number }[]>();\r\n    const { securityId } = props.route.params\r\n    const toast = useToast();\r\n    const [isFav, setIsFav] = useState(false);\r\n    const [description, setDescription] = useState<string>();\r\n    const [portPeriod, setPortPeriod] = useState(\"1Y\")\r\n    const [tab, setTab] = useState(0);\r\n    const scrollRef = useRef<FlatList>(null);\r\n    const translateHeaderY = useRef(new Animated.Value(0)).current;\r\n    /*\r\n    \r\n    let headerHeight =  sizes.rem0_5 * 3 +  fonts.small * 2 + \r\n                        sizes.rem0_5 * 3 + sizes.rem1 * 2 + fonts.small * 2 + ((9 / 16) * windowWidth) + sizes.rem0_5 + sizes.rem1 + 42 +\r\n                        ( Number(elevated.paddingVertical) + Number(elevated.marginBottom) + sizes.rem1 + fonts.large ) + (description ? 100 : 0) + sizes.rem1 + sizes.rem0_5\r\n    //const headerHeight = 680;\r\n    const minViewHeight = windowHeight - headerHeight;\r\n    const [collapsed, setCollapsed] = useState(false);\r\n    const [isMaxed, setIsMaxed] = useState(false);\r\n    const clampMax = headerHeight //- ( Number(elevated.paddingVertical) + Number(elevated.marginBottom) + sizes.rem1 + fonts.large ) ; \r\n    //console.log(clampMax);\r\n    const translation = translateHeaderY.interpolate({\r\n        inputRange: [0, clampMax],\r\n        outputRange: [0, -clampMax],\r\n        extrapolate: 'clamp',\r\n    });\r\n    \r\n    useEffect(() => {\r\n        translation.addListener((v: { value: number }) => {\r\n            const c = Math.abs(v.value + clampMax) < 40;\r\n            const isMaxed = -v.value === clampMax;\r\n            setCollapsed(c);\r\n            setIsMaxed(isMaxed);\r\n        });\r\n        return () => translation.removeAllListeners();\r\n    }, [translation, clampMax]);\r\n    */\r\n    useEffect(() => {\r\n        Api.Security.get(securityId)\r\n            .then((s) => {\r\n                setSecurity(s)\r\n                s.description ? setDescription(s.description.substring(0, 300) + '...') : '';\r\n                setIsFav(s.isOnQuickWatch || false)\r\n            })\r\n            .catch((ex) => toast.show(ex.message))\r\n        Api.Security.extensions.getPrices({ securityId: securityId, includeIntraday: false, includeHistorical: true })\r\n            .then((p) => {\r\n                const prices = p.historical.slice(p.historical.length - periods[portPeriod]).map((a: any) => {\r\n                    return { x: a.date, y: a.close }\r\n                })\r\n                setSecurityPrices(prices);\r\n\r\n            })\r\n            .catch((ex) => toast.show(ex.message))\r\n\r\n    }, [securityId, portPeriod])\r\n    const pxChange =  security?.price?.price || security?.price?.open ? (security?.price?.price - security?.price?.open) / security?.price?.open : 0\r\n    return <View style={flex}>\r\n        <Animated.FlatList\r\n            data={[\r\n                <View style={{ paddingTop: sizes.rem0_5, backgroundColor: AppColors.background, \r\n                    //transform: [{ translateY: translation }], \r\n                    alignItems: \"stretch\", width: \"100%\" }}>\r\n                    <View style={[\r\n                        //collapsed ? {display: 'none'} : {display: 'flex'}, \r\n                        { paddingHorizontal: sizes.rem1, backgroundColor: AppColors.background }]}>\r\n                        <ElevatedSection key={\"Company\"} title=\"\">\r\n                            <View style={[row, { marginVertical: sizes.rem0_5 }]}>\r\n                                <Avatar source={{ uri: security?.logo_url }} style={{ marginRight: sizes.rem0_5, overflow: 'visible', borderRadius: 5 }} shape={'square'} resizeMode={'cover'}  />\r\n                                <View style={flex}>\r\n                                    <Text>{security?.symbol}</Text>\r\n                                    <Text>{security?.company_name}</Text>\r\n                                </View>\r\n                                <View>\r\n                                    <FavButton height={24} width={24} isSelected={isFav}  onPress={() => {\r\n                                    if (security) {\r\n                                        Api.Security.extensions.quickadd({\r\n                                            add: !isFav,\r\n                                            ticker: security?.symbol\r\n                                        })\r\n                                        setIsFav(!isFav);\r\n                                    }\r\n                                }} />\r\n                                <View style={{flexDirection: 'row'}}>\r\n                                    <Text style={[pxChange ? pxChange >= 0 ? { color: 'green'} : {color: 'red'} : {} ,{marginRight: sizes.rem0_5}]}>{toPercent2(pxChange)}</Text>\r\n                                    <Text>{toDollarsAndCents(security?.price?.price)}</Text>\r\n                                </View>\r\n                                </View>\r\n                            </View>\r\n                            <View style={[row, { marginVertical: sizes.rem0_5 }]}>\r\n                                <Text style={flex} category={\"label\"}>Open</Text>\r\n                                <Text style={flex} category={\"c1\"}>{toDollarsAndCents(security?.price?.open)}</Text>\r\n                                <Text style={flex} category={\"label\"}>52 Wk High</Text>\r\n                                <Text style={flex} category={\"c1\"}>{toDollarsAndCents(security?.week_52_high)}</Text>\r\n                            </View>\r\n                            <View style={[row, { marginBottom: sizes.rem1 }]}>\r\n                                <Text style={flex} category={\"label\"}>Close</Text>\r\n                                <Text style={flex} category={\"c1\"}>{toDollarsAndCents(security?.price?.price)}</Text>\r\n                                <Text style={flex} category={\"label\"}>52 Wk Low</Text>\r\n                                <Text style={flex} category={\"c1\"}>{toDollarsAndCents(security?.week_52_low)}</Text>\r\n                            </View>\r\n                            <View style={{ marginBottom: sizes.rem1 }} >\r\n                                <InteractiveChart data={securityPrices} performance={false} />\r\n                            </View>\r\n\r\n                            <ButtonGroup key={\"period\"} \r\n                                items={[\"1D\", \"1W\", \"1M\", \"3M\", \"1Y\", \"5Y\", \"Max\"].map(v => ({ label: v, value: v }))} \r\n                                onValueChange={(v) => setPortPeriod(v)} \r\n                                value={portPeriod} \r\n                            />\r\n                            <Text numberOfLines={5} style={{}}>{description}</Text>\r\n                        </ElevatedSection >\r\n                    </View>\r\n                    <View style={[\r\n                        //collapsed ? {display: 'flex'} : {display: 'flex'},\r\n                        { paddingHorizontal: sizes.rem1, backgroundColor: AppColors.background }]}>\r\n                        <ElevatedSection title=\"\" style={{marginBottom: sizes.rem0_5}} >\r\n                            <TabBar\r\n                                key={\"company_tabBar\"}\r\n                                indicatorStyle={{\r\n                                    marginTop: 26,\r\n                                    marginHorizontal: 10\r\n                                }}\r\n                                style={{width: \"100%\", marginHorizontal: 0 }}\r\n                                selectedIndex={tab}\r\n                                onSelect={t => {\r\n                                    //setTab(t);\r\n                                }}>\r\n                                {[\"Posts\", \"Analysts\"].map(t => <Tab key={\"tab_id\" + t} style={{ marginTop: -4 }} title={t} />)}\r\n                            </TabBar>\r\n                        </ ElevatedSection>\r\n                    </View>\r\n                </View>,\r\n                <View style={[{ paddingHorizontal: 0 }]}>\r\n                    {security && <FeedPart searchText={`$${security?.symbol}`} />}\r\n                </View>\r\n            ]}\r\n            renderItem={(info) => {\r\n                return info.item;\r\n            }}\r\n            ref={scrollRef} contentContainerStyle={[{ paddingTop: 0 }]} nestedScrollEnabled\r\n            /*\r\n            onMomentumScrollEnd={(ev) => {\r\n                if (collapsed && !isMaxed) {\r\n                    scrollRef.current?.scrollToOffset({ offset: clampMax, animated: true });\r\n                    setIsMaxed(true);\r\n                }\r\n            }}\r\n            </View>\r\n            */\r\n            onScroll={Animated.event<NativeSyntheticEvent<NativeScrollEvent>>([\r\n                { nativeEvent: { contentOffset: { y: translateHeaderY } } }\r\n            ], { useNativeDriver: true })}\r\n            >\r\n        </Animated.FlatList>\r\n        \r\n    </View >\r\n\r\n\r\n}","\r\nimport React, { useEffect, useLayoutEffect, useState } from \"react\";\r\nimport { Image, Text, Button, Animated, ImageBackground, useWindowDimensions, View, Alert, Platform } from \"react-native\";\r\nimport { TabScreenProps } from \"../navigation\";\r\nimport { ImageEditor } from 'expo-image-editor'\r\nimport { flex } from \"../style\";\r\nimport * as ImagePicker from 'expo-image-picker'\r\nimport { PrimaryButton } from \"../components/PrimaryButton\";\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { manipulateAsync, SaveFormat } from 'expo-image-manipulator'\r\nimport { useAppUser } from '../Authentication';\r\nimport { useData } from '../lds';\r\n\r\n//import { ImageManipulator } from 'expo-image-crop'\r\n//const imageCrop = require('expo-image-crop')\r\n//const ImageManipulator = imageCrop.ImageManipulator;\r\n\r\nconsole.log(\"Loading IMAGE PICKER\")\r\nexport const ImagePickerScreen = (props: TabScreenProps<{ onComplete: (data: any) => void }>) => {\r\n    const { loginState, updateState  } = useAppUser();\r\n    const appUser = loginState?.appUser;\r\n    console.log(\"Loading inside picker\")\r\n    const [imageUri, setImageUri] = useState<string>(),\r\n        [editorVisible, setEditorVisible] = useState(false),\r\n        [imageData, setImageData] = useState<{ uri: string }>();\r\n    // const pickImage = async () => {\r\n    //     // No permissions request is necessary for launching the image library\r\n    //     let result = await launchImageLibraryAsync({\r\n    //         mediaTypes: MediaTypeOptions.All,\r\n    //         allowsEditing: true,\r\n    //         aspect: [4, 3],\r\n    //         quality: 1,\r\n    //     });\r\n\r\n    //     console.log(result);\r\n\r\n    //     if (!result.cancelled) {\r\n    //         setImageUri(result.uri);\r\n    //     }\r\n    // };\r\n\r\n    const selectPhoto = async () => {\r\n        // Get the permission to access the camera roll\r\n        const response = await ImagePicker.requestMediaLibraryPermissionsAsync();\r\n        // If they said yes then launch the image picker\r\n        if (response.granted) {\r\n            const pickerResult = await ImagePicker.launchImageLibraryAsync({\r\n                base64: true\r\n            });\r\n            // Check they didn't cancel the picking\r\n            console.log(\"PHOTO HAS BEEN SELECTED\");\r\n            if (!pickerResult.cancelled) {\r\n                launchEditor(pickerResult.uri);\r\n            }\r\n        } else {\r\n            // If not then alert the user they need to enable it\r\n            Alert.alert(\r\n                \"Please enable camera roll permissions for this app in your settings.\"\r\n            );\r\n        }\r\n    };\r\n\r\n    const launchEditor = (uri: string) => {\r\n        console.log(\"WTF\")\r\n        // Then set the image uri\r\n        setImageUri(uri);\r\n        // And set the image editor to be visible\r\n        console.log(\"SHOWING EDITOR\");\r\n        setEditorVisible(true);\r\n    };\r\n\r\n    return <View style={flex}>\r\n        <Image\r\n            style={{ height: 300, width: 300 }}\r\n            source={{ uri: imageData?.uri }}\r\n        />\r\n        <Button title=\"Select Photo\" onPress={() => selectPhoto()} />\r\n\r\n        {imageData?.uri &&\r\n            <PrimaryButton onPress={async () => {\r\n                try {\r\n                    await Api.User.extensions.uploadProfilePic({\r\n                        image: imageData.uri\r\n                    })\r\n                    if (appUser)\r\n                        appUser.profile_url = imageData.uri;\r\n                    updateState();\r\n                    console.log(\"TRIGGERING\");\r\n                    props.navigation.goBack();\r\n                }\r\n                catch (ex) {\r\n                    console.error(ex);\r\n                }\r\n\r\n            }} >Upload Photo</PrimaryButton>}\r\n\r\n        <ImageEditor\r\n            //asView={Platform.OS === \"web\"}\r\n            visible={editorVisible}\r\n            onCloseEditor={() => {\r\n                setEditorVisible(false)\r\n            }}\r\n            imageUri={imageUri}\r\n            fixedCropAspectRatio={1}\r\n            lockAspectRatio={true}\r\n            minimumCropDimensions={{\r\n                width: 100,\r\n                height: 100,\r\n            }}\r\n            onEditingComplete={(result) => {\r\n                (async () => {\r\n                    console.log(\"DONE EDITTINGS\")\r\n                    const resizeResult = await manipulateAsync(result.uri, [{\r\n                        resize: {\r\n                            height: 512\r\n                        }\r\n                    }], {\r\n                        base64: true,\r\n                        format: SaveFormat.JPEG\r\n                    })\r\n\r\n\r\n                    setImageData({\r\n                        uri: \"data:image/jpeg;base64,\" + resizeResult.base64\r\n                    });\r\n                })()\r\n            }}\r\n            mode=\"crop-only\"\r\n        />\r\n    </View>\r\n\r\n    // const [imageUri, setImageUri] = useState(\"'https://i.pinimg.com/originals/39/42/a1/3942a180299d5b9587c2aa8e09d91ecf.jpg'\")\r\n    // // useLayoutEffect(() => {\r\n    // //     requestMediaLibraryPermissionsAsync().then(async (r) => {\r\n    // //         if (r.granted) {\r\n    // //             const img = await launchImageLibraryAsync();\r\n    // //             setImageUri((img as ImageInfo).uri);\r\n    // //         }\r\n    // //         else {\r\n    // //             props.navigation.goBack();\r\n    // //         }\r\n    // //     });\r\n    // // }, [])\r\n    // const [isVisible, setIsVisisble] = useState(false);\r\n    // const { width, height } = useWindowDimensions();\r\n    // return <ImageBackground\r\n    //     resizeMode=\"contain\"\r\n    //     style={[flex, {\r\n    //         justifyContent: 'center', padding: 20, alignItems: 'center', height, width, backgroundColor: 'black',\r\n    //     }]}\r\n    //     source={{ uri: imageUri }}\r\n    // >\r\n    //     <Button title=\"Open Image Editor\" onPress={() => setIsVisisble(true)} />\r\n    //     <ImageManipulator\r\n    //         photo={{ uri: imageUri }}\r\n    //         isVisible={isVisible}\r\n    //         onPictureChoosed={(p: { uri: string }) => setImageUri(p.uri)}\r\n    //         onToggleModal={() => setIsVisisble(v => !v)}\r\n    //     />\r\n    // </ImageBackground>\r\n}\r\n\r\n","import {View, Text, ScrollView, Pressable} from \"react-native\";\r\nimport {Api} from \"@tradingpost/common/api\";\r\nimport {ListTradesResponse} from \"@tradingpost/common/api/entities/interfaces\";\r\nimport {ElevatedSection} from \"../components/Section\";\r\nimport {NavigationProp, useNavigation} from \"@react-navigation/native\";\r\nimport {Avatar, Icon, Layout} from \"@ui-kitten/components\"\r\nimport {List} from \"../components/List\";\r\nimport {flex, fonts, sizes} from \"../style\";\r\nimport {AppColors} from \"../constants/Colors\";\r\nimport React from \"react\";\r\n\r\nexport const NotificationTradeScreen = (props: any) => {\r\n    return (\r\n        <View style={{flex: 1, backgroundColor: \"#F7f8f8\"}}>\r\n            <View>\r\n                <Layout style={{\r\n                    backgroundColor: \"#ffffff\",\r\n                    paddingBottom: '2%',\r\n                    paddingTop: '2%',\r\n                    borderBottomColor: '#11146F',\r\n                    borderStyle: 'solid',\r\n                    borderBottomWidth: 2,\r\n                    marginBottom: 10\r\n                }}>\r\n                    <Text style={{\r\n                        margin: 2,\r\n                        textAlign: 'center',\r\n                        fontSize: 20,\r\n                        fontWeight: '600',\r\n                        color: '#11146F',\r\n                    }}>Trade Alerts</Text>\r\n                </Layout>\r\n                <List\r\n                    style={{\r\n                        marginTop: '0.25rem'\r\n                    }}\r\n                    key={\"STATIC\"}\r\n                    datasetKey={\"__________\"}\r\n                    getItemLayout={(items, index, sizeCache) => {\r\n                        const curItem = items?.[index];\r\n                        return typeof curItem === 'object' ? sizeCache[index] : {\r\n                            index,\r\n                            offset: sizeCache[index - 1].offset + sizeCache[index - 1].length,\r\n                            length: 10\r\n                        };\r\n                    }}\r\n                    data={async (allItems: any, page: number, sizeCache: any[]): Promise<ListTradesResponse[]> => {\r\n                        const trades = (await Api.Notification.extensions.listTrades({\r\n                            page\r\n                        }));\r\n\r\n                        const newTrades = [...(allItems || []), ...trades];\r\n                        newTrades.forEach((item, index) => {\r\n                            if (!sizeCache[index]) {\r\n                                sizeCache[index] = {\r\n                                    index,\r\n                                    offset: index ? sizeCache[index - 1].offset + sizeCache[index - 1].length : 0,\r\n                                    length: 0,\r\n                                }\r\n                            }\r\n                        });\r\n                        return newTrades;\r\n                    }}\r\n                    keyExtractor={(item: any, index: number) => typeof item === 'string' ? 'loadingtext' : (index + \"_\" + item._id)}\r\n                    preloadOffset={1}\r\n                    renderItem={(item) => {\r\n                        if (typeof item.item === 'string') {\r\n                            return <Text style={{textAlign: \"center\", fontSize: fonts.large}}>Loading More...</Text>\r\n                        }\r\n\r\n                        const dt = new Date(item.item.dateTime);\r\n                        const dtFmt = `${dt.getMonth()+1}/${dt.getDay()}/${dt.getFullYear() % 100}`\r\n\r\n                        switch (item.item.type) {\r\n\r\n                            case \"sell\":\r\n                                return <ElevatedSection title={\"\"} style={{paddingTop: '0.5rem', paddingBottom: '0.5rem', marginHorizontal: sizes.rem2/2, marginVertical: sizes.rem1/2,}}>\r\n                                    <View style={{marginBottom: -sizes.rem0_5}}>\r\n                                        <View style={{flexDirection: \"row\", width: \"100%\", marginBottom: sizes.rem0_5}}>\r\n                                            <View style={[flex, {marginLeft: sizes.rem0_5}]}>\r\n                                                <Pressable onPress={() => {\r\n                                                }}>\r\n                                                    <View style={{flex: 1}}>\r\n                                                        <View style={{\r\n                                                            flexDirection: 'row',\r\n                                                            justifyContent: \"space-between\"\r\n                                                        }}>\r\n                                                            <Text style={{width: '15%'}}>\r\n                                                                {dtFmt}\r\n                                                            </Text>\r\n                                                            <Text style={{width: '30%'}}>\r\n                                                                @{item.item.handle}\r\n                                                            </Text>\r\n                                                            <Text style={{color: \"#22DDAA\", fontWeight: \"bold\", width: '20%'}}>\r\n                                                                Bought\r\n                                                            </Text>\r\n                                                            <Text style={{width: '12%'}}>\r\n                                                                {item.item.symbol}\r\n                                                            </Text>\r\n                                                            <Text style={{width: '20%'}}>\r\n                                                                ${toTwoDecimals(item.item.price)}\r\n                                                            </Text>\r\n                                                            <View style={{width: '8%'}}>\r\n                                                                <Icon style={{ opacity: 1, height: 16, width: 32 }} name={\"file-text-outline\"}\r\n                                                                      fill={AppColors.primary}\r\n                                                                />\r\n                                                            </View>\r\n                                                        </View>\r\n                                                    </View>\r\n                                                </Pressable>\r\n                                            </View>\r\n                                        </View>\r\n                                    </View>\r\n                                </ElevatedSection>\r\n                            case \"buy\":\r\n                                return <ElevatedSection title={\"\"} style={{paddingTop: '0.5rem', paddingBottom: '0.5rem', marginHorizontal: sizes.rem2/2, marginVertical: sizes.rem1/2,}}>\r\n                                    <View style={{marginBottom: -sizes.rem0_5}}>\r\n                                        <View style={{flexDirection: \"row\", width: \"100%\", marginBottom: sizes.rem0_5}}>\r\n                                            <View style={[flex, {marginLeft: sizes.rem0_5}]}>\r\n                                                <Pressable onPress={() => {\r\n                                                }}>\r\n                                                    <View style={{flex: 1}}>\r\n                                                        <View style={{\r\n                                                            flexDirection: 'row',\r\n                                                            justifyContent: \"space-between\"\r\n                                                        }}>\r\n                                                            <Text style={{width: '15%'}}>\r\n                                                                {dtFmt}\r\n                                                            </Text>\r\n                                                            <Text style={{width: '30%'}}>\r\n                                                                @{item.item.handle}\r\n                                                            </Text>\r\n                                                            <Text style={{color: \"#F4452D\", fontWeight: \"bold\", width: '20%'}}>\r\n                                                                Closed\r\n                                                            </Text>\r\n                                                            <Text style={{width: '12%'}}>\r\n                                                                {item.item.symbol}\r\n                                                            </Text>\r\n                                                            <Text style={{width: '20%'}}>\r\n                                                                ${toTwoDecimals(item.item.price)}\r\n                                                            </Text>\r\n                                                            <View style={{width: '8%'}}>\r\n                                                                <Icon style={{ opacity: 1, height: 16, width: 32 }} name={\"file-text-outline\"}\r\n                                                                      fill={AppColors.primary}\r\n                                                                />\r\n                                                            </View>\r\n                                                        </View>\r\n                                                    </View>\r\n                                                </Pressable>\r\n                                            </View>\r\n                                        </View>\r\n                                    </View>\r\n                                </ElevatedSection>\r\n                            default:\r\n                                return <ElevatedSection title={\"\"} style={{marginHorizontal: sizes.rem2/2, marginVertical: sizes.rem1/2, paddingTop: '0.5rem', paddingBottom: '0.5rem'}}>\r\n                                    <View style={{marginBottom: -sizes.rem0_5}}>\r\n                                        <View style={{flexDirection: \"row\", width: \"100%\", marginBottom: sizes.rem0_5}}>\r\n                                            <View style={[flex, {marginLeft: sizes.rem0_5}]}>\r\n                                                <Pressable onPress={() => {\r\n                                                }}>\r\n                                                    <View style={{flex: 1}}>\r\n                                                        <View style={{\r\n                                                            flexDirection: 'row',\r\n                                                            justifyContent: \"space-between\"\r\n                                                        }}>\r\n                                                            <Text style={{width: '15%'}}>\r\n                                                                {dtFmt}\r\n                                                            </Text>\r\n                                                            <Text style={{width: '30%'}}>\r\n                                                                @{item.item.handle}\r\n                                                            </Text>\r\n                                                            <Text style={{fontWeight: \"bold\", width: '20%'}}>\r\n                                                                {toUpperCase(item.item.type)}\r\n                                                            </Text>\r\n                                                            <Text style={{width: '12%'}}>\r\n                                                                {item.item.symbol}\r\n                                                            </Text>\r\n                                                            <Text style={{width: '20%'}}>\r\n                                                                ${toTwoDecimals(item.item.price)}\r\n                                                            </Text>\r\n                                                            <View style={{width: '8%'}}>\r\n                                                                <Icon style={{ opacity: 1, height: 16, width: 32 }} name={\"file-text-outline\"}\r\n                                                                      fill={AppColors.primary}\r\n                                                                />\r\n                                                            </View>\r\n                                                        </View>\r\n                                                    </View>\r\n                                                </Pressable>\r\n                                            </View>\r\n                                        </View>\r\n                                    </View>\r\n                                </ElevatedSection>\r\n                        }\r\n                    }}\r\n                    noDataMessage={\"No Trades Available\"}\r\n                    loadingItem={\" \"}\r\n                />\r\n            </View>\r\n        </View>\r\n    )\r\n}\r\n\r\nconst toUpperCase = (ss: string) => {\r\n    const s = ss.trim().toLowerCase();\r\n    return s.charAt(0).toUpperCase() + s.slice(1);\r\n}\r\n\r\nconst toTwoDecimals = (ss: string): string => {\r\n    const f = parseFloat(ss);\r\n    return f.toFixed(2);\r\n}","//react-native-pell-rich-editor\r\nimport pell, { exec } from 'pell'\r\nimport React from 'react'\r\nimport { useRef } from 'react'\r\nimport { useEffect } from 'react'\r\nimport { MutableRefObject, PropsWithRef, useState } from 'react'\r\nimport './TextEditor.css'\r\n//import \"../css/pell.css\"\r\n// export const TextEditor = (props: {\r\n//     editorRef: MutableRefObject<any>\r\n// }) => {\r\n//     return <div ref={props.editorRef} />\r\n// }\r\n\r\n\r\n\r\n\r\nexport const TextEditor = (props: PropsWithRef<{\r\n    editorRef: MutableRefObject<any>,\r\n    html: string,\r\n    onChangeHtml: (text: string) => void\r\n}>) => {\r\n    const [html, setHtml] = useState(props.html)\r\n    const divRef = useRef<HTMLDivElement>(null);\r\n    useEffect(() => {\r\n        if (divRef.current) {\r\n            const editor = pell.init({\r\n                element: divRef.current,\r\n                onChange: (html: string) => {\r\n                    //(props.editorRef.current as HTMLDivElement).innerHTML = html;\r\n                    props.onChangeHtml(html);\r\n                    setHtml(html);\r\n\r\n                },\r\n                actions: ['bold',\r\n                    'underline',\r\n                    'olist',\r\n                    'ulist',\r\n                    'italic',\r\n                    {\r\n                        name: 'backColor',\r\n                        icon: '<div style=\"background-color:yellow;\">A</div>',\r\n                        title: 'Highlight Color',\r\n                        result: () => exec('backColor', 'pink')\r\n                    },\r\n                    // {\r\n                    //     name: 'image',\r\n                    //     result: () => {\r\n                    //         const url = window.prompt('Enter the image URL')\r\n                    //         if (url) exec('insertImage', url)\r\n                    //     }\r\n                    // },\r\n                    {\r\n                        name: 'link',\r\n                        result: () => {\r\n                            const url = window.prompt('Enter the link URL')\r\n                            if (url) exec('createLink', url)\r\n                        }\r\n                    }]\r\n            })\r\n            editor.content.innerHTML = html\r\n        }\r\n    }, []);\r\n\r\n\r\n    return <div placeholder='Test' style={{\r\n        backgroundColor: \"#fefefe\",\r\n        display: \"flex\",\r\n        flexGrow: 1,\r\n        flexDirection: \"column\"\r\n    }} className='pell-holder' ref={divRef}></div>\r\n}","import { Api } from \"@tradingpost/common/api\";\r\nimport React, { useRef, useState } from \"react\";\r\nimport { KeyboardAvoidingView, Platform, ScrollView, View } from \"react-native\";\r\nimport { RichEditor, RichToolbar } from \"react-native-pell-rich-editor\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { Header } from \"../components/Headers\";\r\nimport { Label } from \"../components/Label\";\r\nimport { ButtonPanel } from \"../components/ScrollWithButtons\";\r\nimport { TextEditor } from \"../components/TextEditor\";\r\nimport { TextField } from \"../components/TextField\";\r\nimport { Text } from \"@ui-kitten/components\";\r\nimport { ButtonGroup } from \"../components/ButtonGroup\";\r\n//import Navigation, {DashScreenProps, TabScreenProps} from \"../navigation\";\r\nimport { sizes, flex, fonts } from \"../style\";\r\nimport { bindTextInput, bindTextInputBase, useReadonlyEntity } from \"../utils/hooks\";\r\n\r\nexport const PostEditorScreen = (props: any) => {\r\n    const [subLevel, setSubLevel] = useState('standard')\r\n    const postEntity = useReadonlyEntity({\r\n        content: \"\",\r\n        title: \"\",\r\n        subscription_level: \"standard\",\r\n        height: 0,\r\n        width: 0,\r\n        photos: []\r\n    }),\r\n        [locked, setLocked] = useState(false),\r\n        editorRef = useRef<any>(null),\r\n        toast = useToast(),\r\n        [contentFocused, setContentFocused] = useState(false)\r\n\r\n    return <View style={{ backgroundColor: \"white\", flexGrow: 1 }}>\r\n        <Header text='+ New Post' style={{ marginBottom: 0, marginTop: 4, marginLeft: sizes.rem1, color: \"black\" }} />\r\n        <View style={{ width: '90%' }}>\r\n            <ButtonGroup\r\n                style={{ margin: sizes.rem1 }}\r\n                unselectedStyle={{\r\n                    backgroundColor: \"#35A265\",\r\n                }}\r\n                value={subLevel}\r\n                onValueChange={(value) => {\r\n                    setSubLevel(value);\r\n                    postEntity.update({ subscription_level: value })\r\n\r\n                }}\r\n                items={[{ label: \"Free\", value: \"standard\" }, { label: \"Premium\", value: \"premium\" }]} />\r\n        </View>\r\n        <View style={{ marginHorizontal: sizes.rem1, marginTop: sizes.rem1 }}>\r\n            <TextField\r\n                label='Post Title' placeholder='Add a title to your post'  {...bindTextInput(postEntity, \"title\", null)}\r\n                markRequired />\r\n        </View>\r\n        <View style={{ flex: 1, marginHorizontal: sizes.rem1 / 5 }}>\r\n            <ScrollView\r\n                onTouchEnd={(ev) => {\r\n                    if (!contentFocused) {\r\n                        editorRef.current?.focusContentEditor();\r\n                    }\r\n                }}\r\n                style={[flex, {}]}\r\n                contentContainerStyle={{ minHeight: \"100%\", maxHeight: \"100%\", height: \"100%\" }}>\r\n                <Text style={{ fontSize: fonts.medium, marginHorizontal: sizes.rem1, marginVertical: sizes.rem1 }}>Post</Text>\r\n                {Platform.OS === 'web'} <TextEditor html={postEntity.data.content} onChangeHtml={function (text: string): void {\r\n                    postEntity.update({\r\n                        \"content\": text\r\n                    })\r\n                }} />\r\n                {Platform.OS !== 'web' && <RichEditor\r\n                    onLayout={(event) => {\r\n                        postEntity.update({ height: event.nativeEvent.layout.width / event.nativeEvent.layout.height, width: event.nativeEvent.layout.width })\r\n                    }}\r\n                    onFocus={() => {\r\n                        setContentFocused(true)\r\n                    }} onBlur={() =>\r\n                        setContentFocused(false)} containerStyle={{ minHeight: 1 }}\r\n                    initialContentHTML={postEntity.data.content} ref={editorRef}\r\n                    placeholder={\"Add content to your post\"}\r\n                    {...bindTextInputBase(postEntity, \"content\", null, { \"onChangeTextKey\": \"onChange\" })} />}\r\n            </ScrollView>\r\n        </View>\r\n\r\n        {/* //TODO: add are you sure if dirty  */}\r\n        <KeyboardAvoidingView style={{ flex: 1 }} behavior={Platform.OS === \"ios\" ? \"padding\" : \"height\"}>\r\n            {Platform.OS !== \"web\" && <RichToolbar editor={editorRef} />}\r\n            <ButtonPanel\r\n\r\n                locked={locked}\r\n                left={{\r\n                    onPress: () => {\r\n                        props.navigation.goBack();\r\n                    },\r\n                    \"text\": \"Cancel\"\r\n                }}\r\n                right={{\r\n                    onPress: async () => {\r\n\r\n\r\n                        setLocked(true);\r\n                        if (!postEntity.data.content || !postEntity.data.title) {\r\n                            toast.show(\"Please provide a title and content for your post\");\r\n                            setLocked(false);\r\n                        } else {\r\n                            try {\r\n                                //const { id: postId } = \r\n                                await Api.Post.extensions.create(postEntity.data);\r\n                                // Navigation.pop(props.componentId);\r\n                                // const posts = await getPosts([postId]);\r\n                                // screens.push(props.componentId, \"Post\",\r\n                                //     { passProps: { post: posts[0] } });\r\n                                props.navigation.goBack();\r\n\r\n                            } catch (ex: any) {\r\n                                toast.show(ex.message);\r\n                                setLocked(false);\r\n                            }\r\n                        }\r\n                    }\r\n                    ,\r\n                    \"text\": \"Create\"\r\n                }}\r\n            />\r\n        </KeyboardAvoidingView>\r\n\r\n    </View>\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { RootStackParamList } from '../navigation/pages'\r\nimport { NavigationProp, useNavigation } from \"@react-navigation/native\"\r\nimport { Alert, Image, ImageBackground, Linking, PixelRatio, Platform, Pressable, ScrollView, StyleSheet, Text, TouchableOpacity, View } from 'react-native'\r\nimport { flex, fonts, paddView, row, shadow, sizes } from '../style'\r\nimport { Api, Interface } from '@tradingpost/common/api'\r\nimport { Header, Subheader } from './Headers'\r\nimport { useWindowDimensions } from 'react-native'\r\nimport { useAppUser } from '../Authentication'\r\nimport { toFormatedDateTime } from '../utils/misc'\r\nimport { ProfileButton } from './ProfileButton'\r\n\r\nconst commentTotalVerticalMargin = sizes.rem1;\r\nconst commentTotalHorizontalMargin = sizes.rem2;\r\nconst commentSidePad = sizes.rem2;\r\nconst commentTotalBorder = 2;\r\nconst spaceOnSide = commentTotalHorizontalMargin + commentTotalBorder + commentSidePad\r\n\r\nexport function CommentView(props: {comment: Interface.ICommentPlus}) {\r\n    const { comment } = props;\r\n    const { loginState } = useAppUser()\r\n    \r\n    const nav = useNavigation<NavigationProp<RootStackParamList>>();\r\n    \r\n    return <View style={[{marginVertical: sizes.rem0_5 / 2}, ]}>\r\n                <View style={[{alignItems: 'center'}, props.comment.user_id === loginState?.appUser?.id ? { flexDirection: 'row'} : { flexDirection: 'row-reverse'}]}>\r\n                    <Pressable\r\n                        onPress={() => {\r\n                            if (props.comment.user_id)\r\n                                nav.navigate(\"Profile\", {\r\n                                    userId: props.comment.user_id\r\n                                } as any);\r\n                        }} style={[row, {\r\n                            alignItems: \"center\",\r\n                            overflow: \"hidden\",\r\n                            //borderBottomColor: \"#ccc\",\r\n                            //borderBottomWidth: 1,\r\n                            padding: sizes.rem1 / 2\r\n                        }]}>\r\n                        {\r\n                            <ProfileButton userId={comment.user_id}\r\n                                profileUrl={comment.profile_url || \"\"} size={48} />\r\n                        }\r\n                    </Pressable>\r\n                    <View style={{width: '80%', paddingBottom: 6}}>\r\n                        <View style={[shadow, { backgroundColor: \"white\", borderRadius: sizes.borderRadius * 4, borderColor: \"#ccc\", borderWidth: commentTotalBorder / 2, justifyContent: 'center', minHeight: 48 }]}>\r\n                            {/*<View style={[flex, { borderBottomWidth: 1, borderBottomColor: \"#ccc\", padding: sizes.rem0_5 }]}>\r\n                            </View>*/}\r\n                            {/*<Text style={{fontWeight: '500',padding: sizes.rem0_5, borderBottomWidth: 1, borderBottomColor: '#ccc'}}>\r\n                                {`@${comment.handle}`}\r\n                            </Text>*/}\r\n                            <Text style={{padding: sizes.rem0_5, fontSize: 14}}>\r\n                                {comment.comment}\r\n                            </Text>\r\n                        </View>\r\n                    </View>\r\n                </View>\r\n                <Text style={[{fontSize: fonts.medium / 2 , paddingHorizontal: sizes.rem1, color: '#9D9D9D'},  props.comment.user_id === loginState?.appUser?.id ? {} : {textAlign: 'right'}]}>\r\n                    {`@${comment.handle}   ${toFormatedDateTime(String(comment.created_at))}`}\r\n                </Text>\r\n           </View>\r\n}","import { Interface } from \"@tradingpost/common/api\";\r\nimport { useState } from \"react\";\r\nimport { Text } from 'react-native'\r\nimport { DataOrQuery, List } from \"./List\";\r\nimport { fonts, sizes } from \"../style\";\r\nimport { CommentView } from \"./CommentView\";\r\nimport { Section } from \"./Section\";\r\nimport React from \"react\";\r\n\r\nexport function CommentsList(props: {comments: Interface.ICommentPlus[]}) {\r\n    \r\n    return (\r\n    <Section title=\"Comments\" style={{flex: 1, backgroundColor: 'transparent',marginHorizontal: sizes.rem1 }}>\r\n        <List \r\n            getItemLayout={(items, index, sizeCache) => {\r\n                const curItem = items?.[index];\r\n                const length = 20;\r\n                const output = typeof curItem === \"object\" ? \r\n                        (sizeCache[index] ? \r\n                            sizeCache[index] : \r\n                            {index, \r\n                            offset: length * index, \r\n                            length: length }) : \r\n                    {index, \r\n                    offset: sizeCache[index - 1].offset + sizeCache[index - 1].length, \r\n                    length: 40 };\r\n                return output;\r\n            }}\r\n            key={\"id\" + String(props.comments.length)}\r\n            datasetKey={\"___\"}\r\n            data={props.comments}\r\n            keyExtractor={(item, index) => typeof item === \"string\" ? \"loadingtext\" : (index + \"_\" + item.id)}\r\n            preloadOffset={2}\r\n            renderItem={(item) => {\r\n                \r\n                if (typeof item.item === \"string\") {\r\n                    return <Text style={{ textAlign: \"center\", fontSize: fonts.large }}>Loading More...</Text>\r\n                }\r\n                else {\r\n                    return <CommentView key={item.index + \"_\" + item.item.id} comment={item.item} />\r\n                }\r\n            }}\r\n            noDataMessage={\"No Comments Available\"}\r\n            loadingItem={\"  \"}\r\n            />\r\n    </Section>)\r\n}","import React, { useEffect, useState } from \"react\";\r\nimport { Keyboard, View } from \"react-native\";\r\n//import { DashProps } from \"../layouts/DashboardLayout\";\r\nimport { flex } from \"../style\";\r\nimport { CommentIcon, SendIcon } from \"../images\";\r\nimport { Input } from \"@ui-kitten/components\";\r\nimport { PostView } from \"../components/PostView\";\r\nimport { Api, Interface } from \"@tradingpost/common/api\";\r\nimport { CommentsList } from \"../components/CommentList\";\r\nimport { KeyboardAvoidingInput } from \"../components/KeyboardAvoidingInput\";\r\nimport { AwaitedReturn } from \"../utils/misc\";\r\nimport { RootStackScreenProps } from \"../navigation/pages\";\r\n\r\nexport function PostScreen(props: RootStackScreenProps<\"PostScreen\">) {\r\n    //https://m.tradingpostapp.com/post?\r\n\r\n\r\n    const [post, setPost] = useState(props.route.params.post);\r\n\r\n    useEffect(() => {\r\n        if (!post) {\r\n            //lookup posts \r\n            Api.Post.extensions.feed({\r\n                page: 0,\r\n                postId: props.route.params.id\r\n            }).then((r) => {\r\n                setPost(r[0]);\r\n            }).catch(ex => {\r\n                console.error(ex);\r\n            })\r\n\r\n        }\r\n    }, [props.route.params.id, post])\r\n\r\n\r\n    const [postCommments, setPostComments] = useState<AwaitedReturn<typeof Api.Comment.extensions.postList>>([]);\r\n    const [newComment, setNewComment] = useState('');\r\n    const [commentAdded, setCommentAdded] = useState(0);\r\n    useEffect(() => {\r\n        if (post) {\r\n            Api.Comment.extensions.postList({ type: \"post\", id: post._source.id })\r\n                .then((r) => {\r\n                    const data = r.sort((a, b) => {\r\n                        const diff = (new Date(String(a.created_at))).valueOf() - (new Date(String(b.created_at))).valueOf()\r\n                        return diff\r\n                    })\r\n                    setPostComments(data);\r\n                })\r\n        }\r\n    }, [post])\r\n    useEffect(() => {\r\n        if (post)\r\n            Api.Comment.extensions.postList({ type: \"post\", id: post._source.id })\r\n                .then((r) => {\r\n                    const data = r.sort((a, b) => {\r\n                        const diff = (new Date(String(a.created_at))).valueOf() - (new Date(String(b.created_at))).valueOf()\r\n                        return diff\r\n                    })\r\n                    setPostComments(data);\r\n                })\r\n    }, [commentAdded, post])\r\n\r\n    return (<View style={{ height: \"100%\" }}>\r\n        {post && <PostView\r\n            post={post} />}\r\n        <CommentsList\r\n            comments={postCommments ? postCommments : []} />\r\n        <KeyboardAvoidingInput\r\n            value={newComment}\r\n            placeholder={'Leave your comment'}\r\n            rightIcon={(props: any) => <SendIcon height={24}\r\n                width={24}\r\n                style={{ height: 24, width: 24, alignContent: 'center' }}\r\n            />\r\n            }\r\n            setValue={setNewComment}\r\n            displayButton={true}\r\n            numLines={1}\r\n            item_id={post?._source.id}\r\n            clicked={[commentAdded, setCommentAdded]}\r\n            onClick={(r: any, s: any, t: any) => {\r\n\r\n                if (r.length && post)\r\n                    Api.Comment.insert({ user_id: post._source.user.id, related_type: 'post', comment: r, related_id: t })\r\n                Keyboard.dismiss()\r\n                s('')\r\n            }}\r\n        />\r\n    </View>)\r\n\r\n}","import React from \"react\"\r\nimport { Table } from \"../components/Table\"\r\nimport { View } from 'react-native'\r\nimport { Text } from '@ui-kitten/components'\r\nimport { AllPages, TabScreenProps } from \"../navigation\"\r\nimport { NavigationProp, useNavigation } from \"@react-navigation/native\"\r\nimport { Link } from \"../components/Link\"\r\nimport { flex, paddView, paddViewWhite } from \"../style\"\r\nimport { ElevatedSection } from \"../components/Section\"\r\n\r\n\r\nexport function LimitedTable<T>(props: {\r\n    maxPage: number,\r\n    listKey: string,\r\n    title: string,\r\n    tableProps: Omit<Parameters<typeof Table<T>>[0], \"maxPage\">\r\n}) {\r\n    const nav = useNavigation();\r\n    return <View style={[{}]}>\r\n        <View>\r\n            <Table {...props.tableProps} listKey={props.listKey} maxPage={props.maxPage} />\r\n        </View>\r\n        <Link\r\n            style={{\r\n                marginLeft: \"auto\"\r\n            }}\r\n            onPress={() => {\r\n                nav.navigate(\"TableModal\", {\r\n                    tableProps: props.tableProps as any,\r\n                    title: props.title\r\n                })\r\n            }}>View All</Link>\r\n    </View>\r\n}\r\n\r\nexport function TableModalScreen<T>(props: TabScreenProps<{ title: string, tableProps: Parameters<typeof Table<T>>[0] }>) {\r\n    return (\r\n        props.route?.params?.tableProps ? \r\n        <View style={paddView}>\r\n            <ElevatedSection title={props.route.params.title} >\r\n                <Table {...props.route?.params?.tableProps} />\r\n            </ElevatedSection>\r\n        </View> : \r\n        <Text>Error</Text>\r\n        )\r\n}","import React, { useEffect, useState } from \"react\"\r\nimport { View } from \"react-native\"\r\nimport { useAppUser } from \"../Authentication\"\r\nimport { ElevatedSection } from \"../components/Section\"\r\nimport { Text } from '@ui-kitten/components'\r\nimport { RootStackScreenProps } from \"../navigation/pages\"\r\nimport { Link } from \"../components/Link\"\r\nimport { Api } from '@tradingpost/common/api'\r\nimport { ButtonPanel } from \"../components/ScrollWithButtons\"\r\nimport { paddView, sizes } from \"../style\"\r\nimport { useToast } from \"react-native-toast-notifications\"\r\nimport { useLinkTo } from \"@react-navigation/native\"\r\n\r\n\r\nexport const VerificationScreen = (props: RootStackScreenProps<\"VerifyAccount\">) => {\r\n    const { loginState, signIn } = useAppUser();\r\n    const verificationToken = props.route.params?.token;\r\n    const toast = useToast();\r\n    const linkTo = useLinkTo();\r\n    console.log(\"I'm on the verification screennnn....\")\r\n    const [imVerified, setImVerified] = useState(false);\r\n    useEffect(() => {\r\n        if (imVerified) {\r\n            if (loginState?.loginResult?.verified)\r\n                linkTo(\"/dash/feed\");\r\n            else {\r\n                toast.show(\"You account is still unverified. Please check your email for details.\")\r\n                setImVerified(false);\r\n            }\r\n        }\r\n    }, [imVerified, loginState?.loginResult])\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            if (verificationToken && !loginState?.appUser) {\r\n                if (loginState?.authToken) {\r\n                    try {\r\n                        console.log(\"SIGNING IN.....\");\r\n                        await signIn(\"\", loginState.authToken);\r\n                        setImVerified(true);\r\n\r\n                    } catch (ex: any) {\r\n                        console.log(ex.message);\r\n                    }\r\n                } else {\r\n                    console.log(\"I CANT FIND THE TOKEN.....\");\r\n                    props.navigation.replace(\"Root\", {});\r\n                }\r\n            }\r\n        })()\r\n    }, [\r\n        loginState?.authToken,\r\n        verificationToken, loginState?.appUser\r\n    ])\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n\r\n            if (verificationToken && loginState?.appUser) {\r\n                try {\r\n\r\n                    await Api.User.extensions.validateUser({\r\n                        verificationToken\r\n                    })\r\n                    if (loginState?.authToken)\r\n                        await signIn(\"\", loginState?.authToken);\r\n\r\n\r\n                } catch (ex: any) {\r\n                    toast.show(ex.message);\r\n                }\r\n            }\r\n        })()\r\n    }, [verificationToken, toast, loginState?.authToken, loginState?.appUser, imVerified])\r\n    return <View style={paddView}>\r\n        <ElevatedSection title=\"Verify Your Email\">\r\n            <Text style={{ textAlign: \"center\", paddingVertical: sizes.rem1 }}>{loginState?.appUser?.email}</Text>\r\n            <ButtonPanel\r\n                left={{\r\n                    onPress: async () => {\r\n                        if (loginState?.authToken)\r\n                            await signIn(\"\", loginState?.authToken);\r\n                        linkTo(\"/dash/feed\")\r\n                        //props.navigation.navigate(\"Dash\");\r\n                    },\r\n                    text: \"Skip\"\r\n                }}\r\n                right={{\r\n                    onPress: async () => {\r\n                        //try auth signin\r\n                        if (loginState?.authToken)\r\n                            await signIn(\"\", loginState?.authToken);\r\n                        setImVerified(true);\r\n                    },\r\n                    text: \"I'm Verified\"\r\n                }}\r\n            />\r\n            <Link\r\n                style={{ textAlign: \"center\", paddingVertical: sizes.rem1 }}\r\n                onPress={async () => {\r\n                    try {\r\n                        await Api.User.extensions.sendEmailValidation();\r\n                        toast.show(\"Verification Email has been sent\")\r\n                    } catch (ex: any) {\r\n                        console.log(ex.message);\r\n                    }\r\n                }}>[Resend Verification Email]</Link>\r\n            <Text>{props.route.params?.token}</Text>\r\n        </ElevatedSection>\r\n    </View>\r\n}","import React, { ReactNode } from \"react\";\r\nimport { View, ScrollView, FlatList } from \"react-native\";\r\nimport { AppColors } from \"../constants/Colors\";\r\n\r\nimport { flex } from \"../style\";\r\nimport { useIsKeyboardVisible } from \"../utils/hooks\";\r\nimport { PrimaryButton } from \"./PrimaryButton\";\r\nimport { SecondaryButton } from \"./SecondaryButton\";\r\n\r\nexport function VirtualListWithButtons(props: { children?: ReactNode, buttons?: ButtonPanelProps, fillHeight?: boolean }) {\r\n    const { isKeyboardVisible } = useIsKeyboardVisible();\r\n    const listChildren = props.children;\r\n    return <View style={[flex,]} >\r\n        <View style={[flex, { backgroundColor: AppColors.background }]} >\r\n            <FlatList nestedScrollEnabled contentContainerStyle={props.fillHeight ? { maxHeight: \"100%\", height: \"100%\"} : {}}\r\n                data={[\r\n                    <View style={[!isKeyboardVisible ? {display: 'flex'} : {display: 'none'}, { height: 0 }]} ></View>,\r\n                    <View>{listChildren}</View>\r\n                ]}\r\n                renderItem={(info) => {\r\n                    return info.item;\r\n                }}\r\n            >\r\n                {/* This is here to force layout of the content. Seems like a but with enxted scrollview content */}\r\n                \r\n                \r\n            </FlatList>\r\n        </View>\r\n        {props.buttons && <ButtonPanel {...props.buttons} />}\r\n    </View>\r\n}\r\n\r\nexport type ButtonPanelProps = {\r\n    locked?: boolean,\r\n    left?: {\r\n        text: string,\r\n        onPress: () => void\r\n    },\r\n    right: {\r\n        text: string,\r\n        onPress: () => void\r\n    }\r\n}\r\nexport function ButtonPanel(props: ButtonPanelProps) {\r\n    return <View style={[{ borderTopColor: \"#ccc\", borderTopWidth: 1, flexDirection: \"row\", \r\n    paddingTop: 8,\r\n     paddingBottom: 8, \r\n     \r\n     justifyContent: \"space-evenly\", zIndex: 1000 }]}>\r\n        {props.left && <SecondaryButton style={{ width: \"48%\" }} onPress={props.left.onPress} disabled={props.locked} >{props.left.text}</SecondaryButton>}\r\n        <PrimaryButton style={{ width: props.left ? \"48%\" : \"96%\" }} onPress={props.right.onPress} disabled={props.locked} >{props.right.text}</PrimaryButton>\r\n    </View>\r\n}\r\n","import { useNavigation } from \"@react-navigation/native\";\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { sleep } from \"@tradingpost/common/utils/sleep\";\r\nimport { Button, } from \"@ui-kitten/components\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { View, Text } from \"react-native\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { ButtonGroup } from \"../components/ButtonGroup\";\r\nimport { ScrollWithButtons } from \"../components/ScrollWithButtons\";\r\nimport { ElevatedSection, Section } from \"../components/Section\";\r\nimport { SwitchField } from \"../components/SwitchField\";\r\nimport { TextField } from \"../components/TextField\";\r\nimport { VirtualListWithButtons } from \"../components/VirtualListWithButtons\";\r\nimport { useWatchlistPicker, WatchlistPicker } from \"../components/WatchlistPicker\";\r\nimport { setValue } from \"../lds\";\r\nimport { DashScreenProps, TabScreenProps } from \"../navigation\";\r\nimport { flex, paddView, paddViewWhite, sizes } from \"../style\";\r\ntype WLTypes = \"public\" | \"primary\" | \"private\";\r\n\r\nexport const WatchlistEditorScreen = (props: TabScreenProps<{ watchlistId?: number }>) => {\r\n    const pickerProps = useWatchlistPicker();\r\n    const [name, setName] = useState(\"\");\r\n    const [note, setNote] = useState<string>();\r\n    const [type, setWatchlistType] = useState<WLTypes>(\"public\");\r\n\r\n    const watchlistId = props.route?.params?.watchlistId;\r\n    //TODO: HACK need to clean this u\r\n    const nav = useNavigation()\r\n    const [magic, setMagic] = useState(true);\r\n    const toast = useToast();\r\n    useEffect(() => {\r\n        (async ()=> {\r\n            const converter = pickerProps.symbolConverter.current;\r\n            if (watchlistId && converter){\r\n                if (watchlistId > 0) {\r\n                    Api.Watchlist.get(watchlistId).then((watchlist) => {\r\n                        //TODO: need to deal with settings for primary watchlist\r\n                        setName(watchlist.name);\r\n                        setWatchlistType(watchlist.type as WLTypes);\r\n                        setNote(watchlist.note);\r\n                        const selectedItems = converter(watchlist.items.map((s) => s.symbol));\r\n                        pickerProps.onSelectedItemschanged(selectedItems);\r\n    \r\n                        //TODO:: need to cache items notes since this is an delete and insert style update\r\n    \r\n                    }).catch((ex) => {\r\n                        toast.show(ex.message);\r\n                    })\r\n                }\r\n                else {\r\n                    setName(\"Primary Watchlists\")\r\n                    setWatchlistType(\"primary\");\r\n                }\r\n            }\r\n        })()\r\n        \r\n    }, [watchlistId, Boolean(pickerProps.symbolConverter.current)])\r\n\r\n\r\n    return <View style={paddView}>\r\n        <VirtualListWithButtons\r\n            buttons={{\r\n                right: {\r\n                    text: props.route?.params?.watchlistId ? \"Update Watchlist\" : \"Create Watchlist\",\r\n                    onPress: async () => {\r\n                        if (name && pickerProps.selectionConverter.current) {\r\n                            const items = pickerProps.selectionConverter.current(pickerProps.selectedItems);\r\n                            if (items.length < 2)\r\n                                toast.show(\"Please select at least 2 securities\");\r\n                            else {\r\n                                const watchlistData = {\r\n                                    items: items.map(i => ({\r\n                                        symbol: i.symbol,\r\n                                        date_added: new Date()\r\n                                    })),\r\n                                    name: name,\r\n                                    note,\r\n                                    type: type\r\n                                }\r\n\r\n                                if (props.route?.params?.watchlistId && props.route.params.watchlistId > 0) await Api.Watchlist.update(props.route.params.watchlistId, watchlistData)\r\n                                else await Api.Watchlist.insert(watchlistData)\r\n\r\n                                nav.goBack()\r\n                            }\r\n                        }\r\n                        else {\r\n                            toast.show(\"Please name your watchlist\");\r\n                        }\r\n                    }\r\n                }\r\n            }}>\r\n            <View>\r\n                {type !== \"primary\" &&\r\n                    <ElevatedSection title={(props.route?.params?.watchlistId ? \"Edit\" : \"Create\") + \" Watchlist\"} >\r\n                        <View style={{ flexDirection: \"column\", margin: sizes.rem0_5 }}>\r\n                            <ButtonGroup value={type} onValueChange={(value) => {\r\n                                setWatchlistType(value);\r\n                            }}\r\n                                items={[{ label: \"Public\", value: \"public\" }, { label: \"Private\", value: \"private\" }]}\r\n                            />\r\n                            <TextField value={name} onChangeText={(v) => setName(v || \"\")} placeholder=\"Watchlist Name\" style={{ marginBottom: sizes.rem0_5 }} />\r\n                            <TextField value={note} onChangeText={(v) => setNote(v || \"\")} placeholder=\"Watchlist Note\" style={{}} />\r\n                        </View>\r\n                    </ElevatedSection>\r\n                }\r\n                <ElevatedSection style={{ height: \"100%\" }} title={type === \"primary\" ? \"Quick Watchlist\" : \"Watchlist Securities\"}>\r\n                    <WatchlistPicker {...pickerProps} securitiesLoaded={() => {\r\n                        console.log(\"Securities are available...\");\r\n                        setMagic(m => !m)\r\n                    }} />\r\n                </ElevatedSection>\r\n            </View>\r\n        </VirtualListWithButtons>\r\n    </View >\r\n\r\n}\r\n","import { Api } from \"@tradingpost/common/api\";\r\nimport { AllWatchlists, IWatchlistGet, IWatchlistList } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport { Pressable, ScrollView, TextStyle, View } from \"react-native\";\r\nimport { AddButton, EditButton } from \"../components/AddButton\";\r\nimport { Avatar, Icon, Text } from '@ui-kitten/components'\r\nimport { ElevatedSection, Section, Subsection } from \"../components/Section\";\r\nimport { WatchlistItemRenderItem } from '../components/WatchlistItemRenderItem'\r\nimport { Table } from \"../components/Table\";\r\nimport { DataOrQuery } from '../components/List'\r\n//import { DashScreenProps, TabScreenProps } from \"../navigation\";\r\nimport { flex, fonts, paddView, sizes } from \"../style\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { NoteEditor, SecPressable, useMakeSecurityFields, useWatchlistItemColumns } from \"./WatchlistViewerScreen\";\r\nimport { AwaitedReturn, toDollarsAndCents, toPercent, toPercent2, toThousands } from \"../utils/misc\";\r\nimport { WatchlistSection } from \"../components/WatchlistSection\";\r\nimport Theme from '../theme-light.json'\r\nimport { FlatList } from \"react-native-gesture-handler\";\r\nimport { List } from \"../components/List\"\r\nimport { useFocusEffect, useNavigation } from \"@react-navigation/native\";\r\nimport { useSecuritiesList } from \"../SecurityList\";\r\nimport { Header } from \"../components/Headers\";\r\nimport { AppColors } from \"../constants/Colors\";\r\n\r\nexport const WatchlistScreen = (props: any) => {\r\n    const nav = useNavigation();\r\n    const [watchlists, setWatchlists] = useState<AllWatchlists>()\r\n    const [shownMap, setShownMap] = useState<Record<string, boolean>>({})\r\n    const [quickWatchlist, setQuickWatchlist] = useState<IWatchlistGet>()\r\n    const toast = useToast();//const [trades, setTrades] = useState<AwaitedReturn<typeof Api.User.extensions.getTrades>>();\r\n    const [focus, setFocus] = useState(false);\r\n    const scrollRef = useRef<FlatList>(null);\r\n    useFocusEffect(useCallback(()=> {\r\n        \r\n        (async () => {\r\n            try {\r\n                const lists = await Api.Watchlist.extensions.getAllWatchlists();\r\n\r\n                if (lists.quick.id) {\r\n                    setQuickWatchlist(await Api.Watchlist.get(lists.quick.id));\r\n                }\r\n                else {\r\n                    setQuickWatchlist({\r\n                        id: 0,\r\n                        items: [],\r\n                        name: \"\",\r\n                        saved_by_count: 0,\r\n                        type: \"primary\",\r\n                        user: [],\r\n                        is_saved: false\r\n                    })\r\n                }\r\n                setFocus((f) => !f)\r\n                setWatchlists(lists);\r\n\r\n            }\r\n            catch (ex: any) {\r\n                toast.show(ex.message);\r\n            }\r\n        })()\r\n        \r\n    },[]))\r\n\r\n    const { columns: watchlistItemColumns } = useWatchlistItemColumns(true)\r\n    const { securities: { bySymbol, byId } } = useSecuritiesList();\r\n    const hideEmptyNote = false;\r\n    return <View style={[paddView]}>\r\n        <FlatList\r\n            listKey=\"top_level_watchlist\"\r\n            data={[\r\n                <View>\r\n                    <View style={{flex: 1, flexDirection: 'row'}}>\r\n                        <Header key={\"quick_watch\"} text=\"Quick Watch\" style={{flex: 1}}/>\r\n                        <View style={{marginHorizontal: 6}}> \r\n                            {  \r\n                                watchlists?.quick.id ?\r\n                                    <EditButton\r\n                                        height={24}\r\n                                        width={24} \r\n                                        onPress={() => {\r\n                                            nav.navigate(\"WatchlistEditor\", {\r\n                                                watchlistId: watchlists?.quick.id\r\n                                            })\r\n                                    }} /> :\r\n                                    <AddButton\r\n                                        height={24}\r\n                                        width={24} \r\n                                        onPress={() => {\r\n                                            nav.navigate(\"WatchlistEditor\", {\r\n                                                watchlistId: -1\r\n                                            })\r\n                                    }} />\r\n                                }\r\n                        </View>\r\n                    </View>\r\n                \r\n                <List\r\n                    datasetKey={`${focus}`}\r\n                    listKey={`quick_watch_list${focus}`}\r\n                    loadingMessage={\" \"}\r\n                    noDataMessage={\" \"}\r\n                    loadingItem={undefined}\r\n                    numColumns={2}\r\n                    data={quickWatchlist?.items}\r\n                    renderItem={(item) => {                        \r\n                        return (\r\n                            <WatchlistItemRenderItem\r\n                                item={item}\r\n                                bySymbol={bySymbol}\r\n                                byId={byId}\r\n                                hideEmptyNote={hideEmptyNote}\r\n                                setShownMap={setShownMap}\r\n                                shownMap={shownMap}\r\n                                watchlist={quickWatchlist}\r\n                                    />\r\n                        )\r\n                    }}\r\n                />\r\n            </View>,\r\n            <WatchlistSection\r\n                datasetKey={`my_watchlist_${focus}`}\r\n                title=\"My Watchlists\"\r\n                key={`my_watchlist${focus}`}\r\n                watchlists={watchlists?.created}\r\n                showAddButton\r\n                hideNoteOnEmpty\r\n            />,\r\n            <WatchlistSection\r\n                datasetKey={`shared_watchlist_${focus}`}\r\n                title=\"Shared Watchlists\"\r\n                key={`shared_watchlist${focus}`}\r\n                watchlists={watchlists?.saved}\r\n                shared\r\n            />\r\n            ]}\r\n            renderItem={(info) => {\r\n                return info.item;\r\n            }}\r\n            ref={scrollRef} contentContainerStyle={[{ paddingTop: 0}]} nestedScrollEnabled         \r\n\r\n            >\r\n        </FlatList>\r\n    </View >\r\n\r\n}","import React, { useEffect, useState } from \"react\";\r\nimport { ScrollView, useWindowDimensions, View, Text } from \"react-native\";\r\nimport { Api, Interface } from \"@tradingpost/common/api\";\r\nimport { elevated, flex, fonts, sizes } from \"../style\";\r\nimport { ClimbingMountain, Studying, Debate, Analyze } from \"../images\";\r\nimport { AppColors } from \"../constants/Colors\";\r\nimport { ExitButton } from \"../components/AddButton\";\r\nimport { useLinkTo } from \"@react-navigation/native\";\r\nimport { useData } from \"../lds\";\r\nimport { SecondaryButton } from \"../components/SecondaryButton\";\r\n\r\nexport function AppInformationScreen(props: any) {\r\n    const [sliderState, setSliderState] = useState({ currentPage: 0 });\r\n    let { width: widthOg, height } = useWindowDimensions();\r\n    let width = Math.min(widthOg, 680);\r\n    const { value: result, setValue: setResult } = useData('loginResult')\r\n    const linkTo = useLinkTo<any>();\r\n    const setSliderPage = (event: any) => {\r\n        const { currentPage } = sliderState;\r\n        const { x } = event.nativeEvent.contentOffset;\r\n        const indexOfNextScreen = Math.floor(x / width);\r\n        if (indexOfNextScreen !== currentPage) {\r\n            setSliderState({\r\n                ...sliderState,\r\n                currentPage: indexOfNextScreen,\r\n            });\r\n        }\r\n    };\r\n    const paragraphSize = height >= 760 ? fonts.medium : fonts.small\r\n    const { currentPage: pageIndex } = sliderState;\r\n\r\n    return <View style={flex}>\r\n        <View style={{ zIndex: 1, position: 'absolute', top: 30, left: 10, flexDirection: 'row', alignItems: 'center' }}>\r\n            <ExitButton height={36} width={36} color={'#708090'} style={{ height: 36, width: 36, }}\r\n                onPress={() => {\r\n                    if (result) {\r\n                        if (result.verified)\r\n                            linkTo('/dash/feed')\r\n                        else\r\n                            linkTo('/verifyaccount');\r\n                    }\r\n                    else {\r\n                        linkTo('/login')\r\n                    }\r\n                }} />\r\n            <Text style={{ color: '#708090', marginLeft: 10 }}>{\"Exit Introduction\"}</Text>\r\n        </View>\r\n        <ScrollView\r\n            style={flex}\r\n            horizontal={true}\r\n            scrollEventThrottle={16}\r\n            pagingEnabled={true}\r\n            showsHorizontalScrollIndicator={false}\r\n            onScroll={(event: any) => {\r\n                setSliderPage(event);\r\n            }}\r\n        >\r\n            <View style={{ width, height, justifyContent: 'space-between' }}>\r\n                <ClimbingMountain height={'45%'} width={'98%'} style={{ marginTop: '5%', marginHorizontal: '1%', height: '45%', width: '100%' }} />\r\n                <View style={[elevated, {\r\n                    marginHorizontal: sizes.rem1_5,\r\n                    height: '50%',\r\n                    justifyContent: 'flex-start',\r\n                    alignItems: 'center',\r\n                    paddingVertical: sizes.rem1\r\n                    //marginVertical: 30,\r\n                }]}>\r\n                    <View style={{ justifyContent: 'center', alignItems: 'center', height: 65, }}>\r\n                        <Text style={{ fontSize: fonts.large, fontFamily: 'K2D', textAlign: 'center', color: AppColors.primary }}>\r\n                            {\"Customized Feed\"}\r\n                        </Text>\r\n                    </View>\r\n\r\n                    <Text style={{ padding: sizes.rem1, fontSize: paragraphSize, fontFamily: 'K2D', textAlign: 'center', }}>\r\n                        {\"Stock market research from every corner of the internet, all in one place.\\n\\nContent from Twitter, Substack, Spotify and more curated for you based on stocks you own and are interested in.\"}\r\n                    </Text>\r\n                </View>\r\n            </View>\r\n            <View style={{ width, height, justifyContent: 'space-between' }}>\r\n                <Studying height={'37%'} width={'98%'} style={{ marginTop: '15%', marginHorizontal: '1%', height: '37%', width: '100%' }} />\r\n                <View style={[elevated, {\r\n                    marginHorizontal: sizes.rem1_5,\r\n                    height: '50%',\r\n                    justifyContent: 'flex-start',\r\n                    alignItems: 'center',\r\n                    paddingVertical: sizes.rem1\r\n                    //marginVertical: 30,\r\n                }]}>\r\n                    <View style={{ justifyContent: 'center', alignItems: 'center', height: 65, }}>\r\n                        <Text style={{ fontSize: fonts.large, fontFamily: 'K2D', textAlign: 'center', color: AppColors.primary }}>\r\n                            {\"Follow Expert\\nTraders and Investors\"}\r\n                        </Text>\r\n                    </View>\r\n                    <Text style={{ padding: sizes.rem1, fontSize: paragraphSize, fontFamily: 'K2D', textAlign: 'center', }}>\r\n                        {\"Subscribe to experts on the platform to learn how they invest and trade.\\n\\nGain access to articles, charts, trades, and watchlists so you can grow your skills and your wealth.\"}\r\n                    </Text>\r\n                </View>\r\n            </View>\r\n            <View style={{ width, height, justifyContent: 'space-between' }}>\r\n                <Debate height={'45%'} width={'98%'} style={{ marginTop: '0%', marginHorizontal: '1%', height: '45%', width: '100%' }} />\r\n                <View style={[elevated, {\r\n                    marginHorizontal: sizes.rem1_5,\r\n                    height: '50%',\r\n                    justifyContent: 'flex-start',\r\n                    alignItems: 'center',\r\n                    paddingVertical: sizes.rem1\r\n                    //marginVertical: 30,\r\n                }]}>\r\n                    <View style={{ justifyContent: 'center', alignItems: 'center', height: 65, }}>\r\n                        <Text style={{ fontSize: fonts.large, fontFamily: 'K2D', textAlign: 'center', color: AppColors.primary }}>\r\n                            {\"Connect Your\\nInvestment Accounts\"}\r\n                        </Text>\r\n                    </View>\r\n                    <Text style={{ padding: sizes.rem1, fontSize: paragraphSize, fontFamily: 'K2D', textAlign: 'center', }}>\r\n                        {\"Connect your portfolio to TradingPost and control who can view your articles, charts, trades, and watchlists.\\n\\nMake it public, share with friends and family, or build a paying subscriber base.\"}\r\n                    </Text>\r\n                </View>\r\n            </View>\r\n            <View style={{ width, height, justifyContent: 'space-between' }}>\r\n                <Analyze height={'45%'} width={'100%'} style={{ marginTop: '5%', marginHorizontal: 2, height: '45%', width: '100%' }} />\r\n                <View style={[elevated, {\r\n                    marginHorizontal: sizes.rem1_5,\r\n                    height: '50%',\r\n                    justifyContent: 'flex-start',\r\n                    alignItems: 'center',\r\n                    paddingVertical: sizes.rem1\r\n                    //marginVertical: 30,\r\n                }]}>\r\n                    <View style={{ justifyContent: 'center', alignItems: 'center', height: 65, }}>\r\n                        <Text style={{ fontSize: fonts.large, fontFamily: 'K2D', textAlign: 'center', color: AppColors.primary }}>\r\n                            {\"Search for Content\\nthat Matters to You\"}\r\n                        </Text>\r\n                    </View>\r\n                    <Text style={{ padding: sizes.rem1, fontSize: paragraphSize, fontFamily: 'K2D', textAlign: 'center', }}>\r\n                        {\"Explore TradingPost's powerful search tool that utilizes cutting edge tech from industry leader ElasticSearch.\"}\r\n                    </Text>\r\n                    <SecondaryButton style={[result ? { display: 'none' } : { display: 'flex' }, { alignSelf: \"center\", width: \"65%\", height: '15%', marginTop: '8%' }]}\r\n                        onPress={() => {\r\n                            linkTo(\"/create/logininfo\");\r\n                        }}>\r\n                        {\"Create an Account\"}\r\n                    </SecondaryButton>\r\n                </View>\r\n            </View>\r\n        </ScrollView>\r\n        <View style={{\r\n            position: 'relative',\r\n            bottom: '10%',\r\n            left: 0,\r\n            right: 0,\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n            flexDirection: 'row',\r\n        }}\r\n        >\r\n            {Array.from(Array(4).keys()).map((key, index) => (\r\n                <View style={[{\r\n                    height: 10,\r\n                    width: 10,\r\n                    borderRadius: 10 / 2,\r\n                    backgroundColor: AppColors.secondary,\r\n                    marginLeft: 10,\r\n                    opacity: pageIndex === index ? 1 : 0.3\r\n                }]}\r\n                    key={index}\r\n                />\r\n            ))}\r\n        </View>\r\n    </View>\r\n}","import React, { useEffect, useState, useMemo, useRef } from \"react\"\r\nimport { View, Text, Animated, Pressable, Image } from \"react-native\"\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { openBrowserAsync } from 'expo-web-browser';\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { elevated, flex, fonts, paddView, paddViewWhite, row, sizes } from \"../style\"\r\nimport { ElevatedSection, Section, Subsection } from \"../components/Section\"\r\nimport { Bank, IBKR, RobinhoodLogo } from '../images'; \r\nimport { Header, Subheader } from \"../components/Headers\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\n\r\n\r\nexport function BrokeragePickerScreen() {\r\n    const nav = useNavigation();\r\n    const opacityAnim = useRef(new Animated.Value(0)).current;\r\n    const [accounts, setAccounts] = useState<Awaited<ReturnType<typeof Api.User.extensions.getBrokerageAccounts>>>()\r\n    const intervalRef = useRef<any>();\r\n\r\n    const openLink = async () => {\r\n        await Api.User.extensions.generateBrokerageLink(undefined).then(({ link }) => {\r\n            setLink(link)\r\n        })\r\n        const browserName = \"finicity_auth\";\r\n        await openBrowserAsync(brokerLink, { \"windowName\": browserName });\r\n        clearInterval(intervalRef.current);\r\n\r\n        intervalRef.current = setInterval(async () => {\r\n            console.log(\"WTF\");\r\n            if (await AsyncStorage.getItem(\"auth-finicity-code\")) {\r\n                console.log(\"CODE HAS BEEN FOUND\");\r\n                setAccounts(await Api.User.extensions.getBrokerageAccounts())\r\n            }\r\n        }, 5000)\r\n    }\r\n    //cleanup\r\n    useEffect(() => {\r\n        AsyncStorage.removeItem(\"auth-finicity-code\");\r\n        return () => {\r\n            clearInterval(intervalRef.current);\r\n            AsyncStorage.removeItem(\"auth-finicity-code\");\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n    const [brokerLink, setLink] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        Api.User.extensions.getBrokerageAccounts().then((r) => {\r\n            setAccounts(r);\r\n        })\r\n    }, [])\r\n\r\n\r\n    return (<View style={flex}>\r\n    <View style={[flex, {margin: sizes.rem1, justifyContent: 'center'}]}>\r\n        <View style={{marginBottom: 10}}>\r\n            <Header text=\"Choose your Brokerage\" />\r\n        </View>\r\n        <View style={{flex: 0.3, flexDirection: 'row'}}>\r\n            <Pressable style={{flex: 1}} onPress={()=> {\r\n               nav.navigate(\"IbkrInfo\")\r\n                }}>\r\n                <ElevatedSection style={{justifyContent: 'center', flex: 1, marginRight: sizes.rem1 / 2}} title=\"\">\r\n                    <Subheader text='Interactive Brokers' style={{ textAlign: 'center', marginBottom: 10, color: 'black'}} />\r\n                    <View style={{borderRadius: 20, overflow: 'hidden', aspectRatio: 1, height: '75%', justifyContent: 'center', alignSelf: 'center'}}>\r\n                        <IBKR style={{}}  height={\"100%\"} width={'100%'}/>\r\n                    </View>\r\n                </ElevatedSection>\r\n            </Pressable>\r\n            <Pressable style={{flex: 1 }} onPress={()=> {\r\n                nav.navigate(\"RobinhoodLogin\")\r\n            }}>\r\n                <ElevatedSection style={{justifyContent: 'center', flex: 1, marginLeft: sizes.rem1 / 2}} title=\"\">\r\n                    <Subheader text='Robinhood' style={{ textAlign: 'center', marginBottom: 10, color: 'black'}} />\r\n                    <View style={{borderRadius: 20, overflow: 'hidden', aspectRatio: 1, height: '75%', justifyContent: 'center', alignSelf: 'center'}}>\r\n                        <RobinhoodLogo style={{}}  height={\"100%\"} width={'100%'}/>\r\n                    </View>\r\n                </ElevatedSection>\r\n            </Pressable>\r\n        </View>\r\n        <View style={{ flex: 0.5}}>\r\n            <Pressable style={{flex: 1}} onPress={()=> {\r\n                openLink();\r\n            }}>\r\n                <ElevatedSection style={{justifyContent: 'center', flex: 0.5}} title=\"\">\r\n                    <Subheader text='All other brokerages' style={{ textAlign: 'center',marginBottom: 0,  color: 'black'}} />\r\n                    <Text style={{ textAlign: 'center', marginBottom: 10}}>\r\n                        {\"(Finicity, a Mastercard Company)\"}\r\n                    </Text>\r\n                    <Bank height={\"70%\"} />\r\n                </ElevatedSection>\r\n            </Pressable>\r\n        </View>\r\n        </View>\r\n    </View>)\r\n\r\n}","import React, {useEffect, useState, useMemo, useRef} from \"react\"\r\nimport {View, Animated, Pressable, Linking} from \"react-native\"\r\nimport {Api, Interface} from \"@tradingpost/common/api\"\r\n//import { LinkBrokerageComponent } from \"../components/LinkBrokerageComponent\";\r\nimport {elevated, flex, fonts, paddView, paddViewWhite, row, sizes} from \"../style\"\r\nimport {ElevatedSection, Section, Subsection} from \"../components/Section\"\r\nimport {Autocomplete, AutocompleteItem, Button, Icon, IndexPath, Text, Layout} from \"@ui-kitten/components\"\r\nimport {AddButton} from \"../components/AddButton\";\r\nimport {useIsKeyboardVisible, useReadonlyEntity} from \"../utils/hooks\";\r\nimport {ButtonPanel, ScrollWithButtons} from \"../components/ScrollWithButtons\";\r\nimport {getHivePool} from \"@tradingpost/common/db\";\r\nimport {IBKR} from \"../images\"\r\nimport {useNavigation} from \"@react-navigation/native\"\r\nimport {ScrollView} from \"react-native-gesture-handler\"\r\n\r\n\r\nexport function IbkrInfoScreen(props: any) {\r\n    const nav = useNavigation();\r\n    const [acText, setAcText] = useState('')\r\n    let [submittedText, setSubmittedText] = useState('')\r\n    //const [accountIds, setAccountIds] = useState<string[]>([]);\r\n\r\n    const accountIds = useReadonlyEntity<{ ids: string[] }>({\r\n        ids: []\r\n    })\r\n    useEffect(() => {\r\n        (async () => {\r\n            if (submittedText === '') {\r\n                return\r\n            }\r\n\r\n            accountIds.update({ids: [...accountIds.data.ids, submittedText]});\r\n            console.log('use effect')\r\n            console.log(accountIds)\r\n            setSubmittedText('')\r\n        })()\r\n\r\n    }, [submittedText])\r\n    const {isKeyboardVisible} = useIsKeyboardVisible();\r\n    return (\r\n\r\n        <View style={[flex, {margin: sizes.rem1}]}>\r\n            <View style={{\r\n                borderRadius: 20,\r\n                overflow: 'hidden',\r\n                aspectRatio: 1,\r\n                height: '15%',\r\n                justifyContent: 'center',\r\n                alignSelf: 'center'\r\n            }}>\r\n                <IBKR height={\"100%\"} width={'100%'}/>\r\n            </View>\r\n            <View style={{marginVertical: 20}}>\r\n                <Text>\r\n                    {instructions}\r\n                </Text>\r\n            </View>\r\n            <View>\r\n                <Autocomplete\r\n                    value={acText || \"\"}\r\n                    onChangeText={setAcText}\r\n                    placeholder=\"Account Ids\"\r\n                    placement=\"bottom\"\r\n                    onSubmitEditing={() => {\r\n                        console.log('button press')\r\n                        setSubmittedText(acText)\r\n                        setAcText('')\r\n\r\n                    }}\r\n\r\n                    accessoryRight={\r\n                        (props) => <AddButton\r\n                            onPress={() => {\r\n                                console.log('button press')\r\n                                setSubmittedText(acText)\r\n                                setAcText('')\r\n\r\n                            }}\r\n\r\n                            height={(props?.style as any)?.height * 1.5}\r\n                            width={(props?.style as any)?.width * 1.5}\r\n\r\n                        />\r\n                    }\r\n                >\r\n\r\n                </Autocomplete>\r\n            </View>\r\n            <View style={{\r\n                height: '20%',\r\n                borderWidth: 1,\r\n                borderColor: '#ccc',\r\n                marginVertical: sizes.rem0_5,\r\n                borderRadius: sizes.rem0_5\r\n            }}>\r\n                <ScrollView key={`view_id_${accountIds.data.ids.length}`}>\r\n                    {\r\n                        accountIds.data.ids.map((v, i) => <View key={`id_${i}`} style={{\r\n                            padding: sizes.rem0_5,\r\n                            flexDirection: \"row\"\r\n                        }}><Text style={{textAlign: \"left\", flex: 1}}>{v}</Text></View>)\r\n                    }\r\n                </ScrollView>\r\n            </View>\r\n\r\n            <View key='1' style={[isKeyboardVisible ? {height: 0} : {}, {position: 'absolute', bottom: 0}]}>\r\n                <Text style={{textAlign: 'left', fontSize: fonts.xSmall}}>\r\n                    {note}\r\n                </Text>\r\n                <Text style={{color: '#0000EE', marginVertical: 10, fontSize: fonts.xSmall}}\r\n                      onPress={() =>\r\n                          Linking.openURL('https://guides.interactivebrokers.com/ibrit/topics/reporting_integration_process.htm')}>\r\n                    {'IBKR Reporting Integration Process'}\r\n                </Text>\r\n                <ButtonPanel\r\n                    viewProps={{\r\n                        borderTopWidth: 0,\r\n                        flexDirection: \"row\",\r\n                        paddingTop: sizes.rem1,\r\n                        paddingBottom: 0,\r\n                        justifyContent: \"space-evenly\",\r\n                        zIndex: 1000\r\n                    }}\r\n                    left={{\r\n                        text: 'Go back',\r\n                        onPress: async () => {\r\n                            nav.goBack();\r\n                        }\r\n                    }}\r\n                    right={{\r\n                        text: 'Continue',\r\n                        onPress: async () => {\r\n                            try {\r\n                                if (!accountIds.data.ids.length) {\r\n                                    return\r\n                                }\r\n                                await Api.Brokerage.extensions.createIbkrAccounts({account_ids: accountIds.data.ids});\r\n                                const body = emailBody(accountIds.data.ids);\r\n                                Linking.openURL(`mailto:reportingintegration@interactivebrokers.com?subject=IBKR/TradingPost Reporting Integration&body=${body}`)\r\n                            } catch (e) {\r\n                                console.error(e);\r\n                            }\r\n                        }\r\n                    }}\r\n                />\r\n            </View>\r\n        </View>\r\n    )\r\n\r\n}\r\n\r\nconst emailBody = (accountIds: string[]) => {\r\n    return `To Whom It May Concern,\r\n\r\nI would like to integrate my Interactive Brokers reporting data with the TradingPost feed.\r\n\r\nI would like to include a historical position and transactions file.\r\n\r\nI would like to include the accounts under the below advisory account #:\r\n${accountIds.join('\\n')}\r\n\r\nBest,\r\n\r\n[Enter your legal name here]`\r\n}\r\n\r\nconst instructions = `In order to link your IBKR account to TradingPost, we need you to send an email to IBKR indicating that you would give TradingPost permission to reports on your historical positions and trades.\\n\\nPlease enter the Account IDs that you would like to link to TradingPost below. \\n\\nAfter entering them in, when you click \"Continue\" we will generate the necessary email for you to send to IBKR's Reporting Integration Team.`\r\n\r\nconst note = `Note:\r\nGranting us this access in no way gives us any authority over your account.\r\n\r\nYou can check out the below IBKR link if you have any concerns:`","import React, { useEffect, useState, useMemo, useRef } from \"react\"\r\nimport { View, Animated, Pressable, Linking } from \"react-native\"\r\nimport { ITextField, TextField } from '../components/TextField';\r\nimport { Api, Interface } from \"@tradingpost/common/api\"\r\nimport { sleep } from \"@tradingpost/common/utils/sleep\"\r\n//import { LinkBrokerageComponent } from \"../components/LinkBrokerageComponent\";\r\nimport { elevated, flex, fonts, paddView, paddViewWhite, row, sizes } from \"../style\"\r\nimport { ElevatedSection, Section, Subsection } from \"../components/Section\"\r\nimport { Autocomplete, AutocompleteItem, Button, Icon, IndexPath, Text, Layout, TabView, Tab } from \"@ui-kitten/components\"\r\nimport { AddButton } from \"../components/AddButton\";\r\nimport { useIsKeyboardVisible, useReadonlyEntity } from \"../utils/hooks\";\r\nimport { ButtonPanel, ScrollWithButtons } from \"../components/ScrollWithButtons\";\r\nimport { getHivePool } from \"@tradingpost/common/db\";\r\nimport { PrimaryButton } from \"../components/PrimaryButton\";\r\nimport { RobinhoodLogo } from '../images'; \r\nimport { Header, Subheader } from \"../components/Headers\";\r\nimport { SecondaryButton } from \"../components/SecondaryButton\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\nimport { RobinhoodLoginResponse, RobinhoodLoginStatus } from \"@tradingpost/common/api/entities/extensions/Brokerage\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { AppColors } from \"../constants/Colors\";\r\n\r\nexport function RobhinhoodLoginScreen(props: any) {\r\n    const nav = useNavigation();\r\n    const [username, setUsername] = useState<string>(''),\r\n        [password, setPassword] = useState<string>(''),\r\n        [multifactor, setMultifactor] = useState<string>(''),\r\n        [selectedIndex, setSelectedIndex] = useState(0),\r\n        [deviceToken, setDeviceToken] = useState<string>(''),\r\n        [challengeResponseId, setChallengeResponseId] = useState<string>(''),\r\n        toast = useToast();\r\n    useEffect(()=> {\r\n        if (selectedIndex === 2) {\r\n            (async () => {\r\n                console.log(challengeResponseId);\r\n                let counter = 0;\r\n                let response = await Api.Brokerage.extensions.hoodPing({requestId: challengeResponseId});\r\n                console.log(`initial response - ${response}`);\r\n                console.log(`logic check - ${response.challengeStatus !== 'redeemed' && response.challengeStatus !== 'validated' && counter < 24}`)\r\n                while (response.challengeStatus !== 'redeemed' && response.challengeStatus !== 'validated' && counter < 24) {\r\n                    response = await Api.Brokerage.extensions.hoodPing({requestId: challengeResponseId});\r\n                    counter += 1;\r\n                    await sleep(5000)\r\n                }\r\n                if (response.challengeStatus === 'redeemed' || response.challengeStatus === 'validated') {\r\n                    await Api.Brokerage.extensions.robinhoodLogin({username: username, password: password, mfaCode: null, challengeResponseId: challengeResponseId})\r\n                    toast.show(\"You've successfully linked your Robinhood account to TradingPost!\")\r\n                    nav.navigate('BrokeragePicker');\r\n                    \r\n                }\r\n                else {\r\n                    setSelectedIndex(0)\r\n                    toast.show(\"Login failed, please login again and make sure to go to the Robinhood app complete your multifactor authentication.\")\r\n                }\r\n                \r\n            })()\r\n        }\r\n\r\n    }, [selectedIndex])\r\n\r\n    \r\n    return (\r\n        <View style={paddView}>\r\n            <TabView\r\n                \r\n                selectedIndex={selectedIndex}\r\n                onSelect={index => setSelectedIndex(isNaN(index) ? 0 : index)}\r\n                style={{ width: \"100%\" }}\r\n                indicatorStyle={{ height: 0 }}\r\n                tabBarStyle={{ height: 0 }}\r\n            >\r\n                <Tab>\r\n                    <ElevatedSection title=\"\" style={{padding: sizes.rem1}}>\r\n                        <View style={{padding: sizes.rem1, borderRadius: 20, overflow: 'hidden', aspectRatio: 1, height: '40%', justifyContent: 'center', alignSelf: 'center'}}>\r\n                            <RobinhoodLogo style={{}}  height={\"100%\"} width={'100%'}/>\r\n                        </View>\r\n                        <View>\r\n                            <Header text=\"Robinhood Login\"/>\r\n                            <TextField\r\n                                //label=\"Robhinhood Username\" \r\n                                value={username}\r\n                                placeholder=\"Robinhood Username\"\r\n                                onChangeText={(name: string) => setUsername(name)}\r\n                                />\r\n                            <TextField\r\n                                //label=\"Robhinhood Password\" \r\n                                value={password}\r\n                                secureTextEntry\r\n                                placeholder=\"Robinhood Password\"\r\n                                onChangeText={(pass: string) => setPassword(pass)}\r\n                                />\r\n                        </View>\r\n                            <ButtonPanel\r\n                                viewProps={{borderTopWidth: 0,\r\n                                            flexDirection: \"row\", \r\n                                            paddingTop: sizes.rem1,\r\n                                            paddingBottom: 0,\r\n                                            justifyContent: \"space-evenly\", \r\n                                            zIndex: 1000\r\n                                        }}\r\n                                left={{\r\n                                    text: 'Go back',\r\n                                    onPress: async () => {\r\n                                        nav.goBack();\r\n                                    }\r\n                                }}\r\n                                right={{\r\n                                    text: 'Login',\r\n                                    onPress: async () => {\r\n                                        //Api call, on success go on to the MFA page\r\n                                        let initialLogin = {} as RobinhoodLoginResponse\r\n                                        if (!username || !password) {\r\n                                            toast.show('Please enter username and password')\r\n                                            return\r\n                                        }\r\n                                        else {\r\n                                            initialLogin = await Api.Brokerage.extensions.robinhoodLogin({username: username, password: password, mfaCode: null, challengeResponseId: null})\r\n                                            \r\n                                        }\r\n                                        if (initialLogin.status === 'MFA' as RobinhoodLoginStatus) {\r\n                                            setSelectedIndex(1);\r\n                                        }\r\n                                        else if (initialLogin.status === 'DEVICE_APPROVAL' as RobinhoodLoginStatus) {\r\n                                            setChallengeResponseId(initialLogin.challengeResponseId || '');\r\n                                            setSelectedIndex(2);\r\n                                        }\r\n                                        else if (initialLogin.status === 'ERROR' as RobinhoodLoginStatus) {\r\n                                            toast.show('Login failed, please re-enter username and password!')\r\n                                            setPassword('')\r\n                                            console.log('failed login!')\r\n                                        }\r\n                                        else if (initialLogin.status === 'SUCCESS' as RobinhoodLoginStatus) {\r\n                                            toast.show(`This Robinhood account is already connected to TradingPost!`)\r\n                                            setPassword('')\r\n                                        }\r\n                                    }\r\n                                }}\r\n                                />\r\n                    </ElevatedSection>\r\n                </Tab>\r\n                <Tab>\r\n                    <ElevatedSection title=\"\" style={{padding: sizes.rem1}}>\r\n                        <View style={{padding: sizes.rem1, borderRadius: 20, overflow: 'hidden', aspectRatio: 1, height: '40%', justifyContent: 'center', alignSelf: 'center'}}>\r\n                            <RobinhoodLogo style={{}}  height={\"100%\"} width={'100%'}/>\r\n                        </View>\r\n                        <Header text=\"Robinhood Multifactor Authentication\"/>\r\n                        <TextField\r\n                            //label=\"Robhinhood Password\" \r\n                            placeholder=\"Robinhood Multifactor Auth Code\"\r\n                            onChangeText={(mfa: string) => setMultifactor(mfa)}\r\n                        />\r\n                        <View style={{paddingVertical: sizes.rem1, alignItems: 'center'}}>\r\n                            <PrimaryButton \r\n                                style={{width: '50%'}}\r\n                                onPress={async () => {\r\n                                    //Api call, on success go on to the MFA page\r\n                                    const mfaLogin = await Api.Brokerage.extensions.robinhoodLogin({username: username, password: password, mfaCode: multifactor, challengeResponseId: null})\r\n                                    if (mfaLogin.status === 'SUCCESS' as RobinhoodLoginStatus) {\r\n                                        toast.show(\"You've successfully linked your Robinhood account to TradingPost!\")\r\n                                        nav.navigate('BrokeragePicker')\r\n                                    }\r\n                                    else if (mfaLogin.status === 'ERROR' as RobinhoodLoginStatus) {\r\n                                        toast.show(\"An error has occurred in connecting your Robinhood account to Tradingpost. Please try again!\")\r\n                                        setSelectedIndex(0)\r\n                                    }\r\n                                }}\r\n                            >\r\n                                Submit\r\n                            </PrimaryButton>\r\n                        </View>\r\n                       \r\n                    </ElevatedSection>\r\n                </Tab>\r\n                <Tab>\r\n                    <ElevatedSection title=\"Robinhood Multifactor Authentication\" style={{padding: sizes.rem1}}>\r\n                        <View>\r\n                            <Subheader text={'Please go to the Robinhood app and confirm that it is you logging into your account. Once you have done this, please click \"Confirmed\" below.'} \r\n                                       style={{color: 'black'}}\r\n                            />\r\n                            <PrimaryButton\r\n                                onPress={async ()=> {\r\n                                    let response = await Api.Brokerage.extensions.hoodPing({requestId: challengeResponseId});\r\n                                    if (response.challengeStatus === 'redeemed' || response.challengeStatus === 'validated') {\r\n                                        await Api.Brokerage.extensions.robinhoodLogin({username: username, password: password, mfaCode: null, challengeResponseId: challengeResponseId})\r\n                                        toast.show(\"You've successfully linked your Robinhood account to TradingPost!\")\r\n                                        nav.navigate('BrokeragePicker');\r\n                                        \r\n                                    }\r\n                                    else if (response.challengeStatus === 'issued') {\r\n                                        toast.show(\"Confirmation has not been received. Please go to the Robinhood app complete your multifactor authentication.\")\r\n                                    }\r\n                                    else {\r\n                                        setSelectedIndex(0)\r\n                                        toast.show(\"Login failed, please login again and make sure to go to the Robinhood app complete your multifactor authentication.\")\r\n                                    }\r\n                                }}>\r\n                                Confirmed\r\n                            </PrimaryButton>\r\n                        </View>\r\n                    </ElevatedSection>\r\n                </Tab>\r\n            </TabView>\r\n        </View>\r\n    )\r\n\r\n\r\n}","import { createNativeStackNavigator } from \"@react-navigation/native-stack\";\r\nimport React from \"react\";\r\nimport { Button, Keyboard, Pressable, View } from \"react-native\";\r\nimport { AppTitle } from \"../images\";\r\nimport CreateAccountScreen from \"../screens/CreateAccountScreen\";\r\nimport NotFoundScreen from \"../screens/NotFoundScreen\";\r\nimport { ProfileScreen } from \"../screens/ProfileScreen\";\r\nimport WelcomeScreen from \"../screens/WelcomeScreen\";\r\nimport { sizes } from \"../style\";\r\nimport { DrawerPart } from \"./DrawerNavigator\";\r\nimport { RootStackParamList } from \"./pages\";\r\nimport { AccountSettingsScreen } from \"../screens/AccountSettingsScreen\"\r\nimport { AccountInfoScreen } from \"../screens/AccountInfoScreen\";\r\nimport { AuthScreen } from \"../screens/AuthScreen\"\r\nimport { ChangePasswordScreen } from \"../screens/ChangePasswordScreen\"\r\nimport { CompanyScreen } from \"../screens/CompanyScreen\"\r\nimport { ImagePickerScreen } from \"../screens/ImagePicker\"\r\nimport { NotificationTradeScreen } from \"../screens/NotificationTradeScreen\"\r\nimport { PostEditorScreen } from \"../screens/PostEditorScreen\"\r\nimport { PostScreen } from \"../screens/PostScreen\"\r\nimport { SubscriptionScreen, SubscriptionSettingsScreen } from \"../screens/SubscriptionScreen\"\r\nimport { TableModalScreen } from \"../screens/TableModalScreen\"\r\nimport { BlockListModalScreen } from \"../screens/BlockListModalScreen\";\r\nimport { VerificationScreen } from \"../screens/VerificationScreen\"\r\nimport { WatchlistEditorScreen } from \"../screens/WatchlistEditorScreen\"\r\nimport { WatchlistScreen } from \"../screens/WatchlistScreen\"\r\nimport { WatchlistViewerScreen } from \"../screens/WatchlistViewerScreen\"\r\nimport { AppInformationScreen } from \"../screens/AppInformationScreen\";\r\nimport * as Notifications from 'expo-notifications';\r\nimport { useIsKeyboardVisible } from \"../utils/hooks\";\r\nimport { IconifyIcon } from \"../components/IconfiyIcon\";\r\nimport KeyboardClose from '../assets/@iconify/keyboard-close'\r\nimport { useAppUser } from \"../Authentication\";\r\nimport { Log } from \"../utils/logger\";\r\nimport { BrokeragePickerScreen } from \"../screens/BrokeragePickerScreen\";\r\nimport { IbkrInfoScreen } from \"../screens/IbkrInfoScreen\";\r\nimport { RobhinhoodLoginScreen } from \"../screens/RobinhoodLoginScreen\";\r\nimport { ShareButton } from \"../components/ShareButton\";\r\nimport linking from \"./LinkingConfiguration\";\r\nimport { useLinkBuilder, useRoute } from \"@react-navigation/native\";\r\n\r\n\r\nNotifications.setNotificationHandler({\r\n    handleNotification: async () => ({\r\n        shouldShowAlert: true,\r\n        shouldPlaySound: false,\r\n        shouldSetBadge: false\r\n    }),\r\n});\r\n\r\nexport const Stack = createNativeStackNavigator<RootStackParamList>();\r\n\r\nexport const useInitialRoute = () => {\r\n    let { loginState } = useAppUser();\r\n    let initialRoute: keyof RootStackParamList;\r\n    if (loginState?.appUser)\r\n        //TODO: Should refactor this so that it is more related... settings + settings.analyst + analyst_profile\r\n        if (loginState.setupStatus?.needsAnalystSettings || loginState.setupStatus?.needsSettings)\r\n            initialRoute = \"Create\"\r\n        else if (!loginState.loginResult?.verified)\r\n            initialRoute = \"VerifyAccount\"\r\n        else\r\n            initialRoute = \"Dash\"\r\n    else if (loginState?.loginResult)\r\n        initialRoute = \"Create\"\r\n\r\n    else\r\n        initialRoute = \"Root\"\r\n\r\n    Log.verbose(`Initial Route Is : '${initialRoute}'`);\r\n    return initialRoute;\r\n}\r\n\r\nexport function RootNavigator() {\r\n    console.log(\"Running Root Navigation\");\r\n    return <Stack.Navigator\r\n        initialRouteName={useInitialRoute()}\r\n        screenOptions={{\r\n            headerTitle: () => <AppTitle height={\"100%\"}\r\n                style={{ marginTop: sizes.rem0_5, height: sizes.rem2, aspectRatio: 5.77 }}\r\n            />,\r\n            headerTitleAlign: \"center\",\r\n            headerBackVisible: false,\r\n            headerRight: () => {\r\n                const { isKeyboardVisible } = useIsKeyboardVisible();\r\n                if (isKeyboardVisible) {\r\n                    return <Pressable\r\n                        onPress={() => {\r\n                            Keyboard.dismiss();\r\n                        }}\r\n                    ><IconifyIcon\r\n                            currentColor=\"black\"\r\n                            icon={KeyboardClose}\r\n                            svgProps={{\r\n                                height: 24,\r\n                                width: 24,\r\n                            }}\r\n                            style={{\r\n                                height: 24,\r\n                                width: 24,\r\n                                marginRight: sizes.rem1\r\n                            }} />\r\n                    </Pressable>\r\n                }\r\n                // else if () {\r\n\r\n                // }\r\n                else return undefined;\r\n            }\r\n        }}>\r\n        <Stack.Screen name=\"Root\" component={WelcomeScreen} options={{ headerShown: false }} />\r\n        <Stack.Screen name=\"Create\" component={CreateAccountScreen}\r\n            options={{ headerShown: false, headerBackVisible: false }} />\r\n        <Stack.Screen name=\"Dash\" component={DrawerPart} options={{\r\n            headerShown: false,\r\n        }} />\r\n        <Stack.Screen name=\"NotFound\" component={NotFoundScreen} options={{ title: 'Oops!' }} />\r\n        <Stack.Group screenOptions={{\r\n            headerBackVisible: true,\r\n        }}>\r\n            <Stack.Screen name=\"ResetPassword\" component={ChangePasswordScreen} />\r\n            <Stack.Screen name=\"VerifyAccount\" component={VerificationScreen} />\r\n            <Stack.Screen name=\"Auth\" component={AuthScreen} />\r\n            <Stack.Screen name=\"Subscription\" component={SubscriptionScreen} />\r\n            <Stack.Screen name=\"AccountSettings\" component={AccountSettingsScreen} />\r\n            <Stack.Screen name=\"AccountInformation\" component={AccountInfoScreen} />\r\n            <Stack.Screen name=\"AppInformation\" component={AppInformationScreen} options={{ headerShown: false }} />\r\n            <Stack.Screen name=\"SubscriptionSettings\" component={SubscriptionSettingsScreen} />\r\n            <Stack.Screen name=\"WatchlistEditor\" component={WatchlistEditorScreen} />\r\n            <Stack.Screen name=\"PostScreen\" component={PostScreen} />\r\n            <Stack.Screen name=\"PostEditor\" component={PostEditorScreen} />\r\n            <Stack.Screen name=\"WatchlistViewer\" component={WatchlistViewerScreen} />\r\n            <Stack.Screen name=\"Watchlist\" component={WatchlistScreen} />\r\n            <Stack.Screen name=\"ImagePicker\" component={ImagePickerScreen} />\r\n            <Stack.Screen name=\"Company\" component={CompanyScreen} />\r\n            <Stack.Screen name=\"TableModal\" component={TableModalScreen} />\r\n            <Stack.Screen name=\"BlockListModal\" component={BlockListModalScreen} />\r\n            <Stack.Screen name=\"NotificationTrade\" component={NotificationTradeScreen} />\r\n            <Stack.Screen name=\"BrokeragePicker\" component={BrokeragePickerScreen} />\r\n            <Stack.Screen name=\"IbkrInfo\" component={IbkrInfoScreen} />\r\n            <Stack.Screen name=\"RobinhoodLogin\" component={RobhinhoodLoginScreen} />\r\n        </Stack.Group>\r\n        <Stack.Group screenOptions={{\r\n            headerStyle: {\r\n                backgroundColor: \"transparent\"\r\n            },\r\n            headerBackVisible: true,\r\n            headerTintColor: \"white\",\r\n            headerBackground: () => <View></View>,\r\n            headerTitle: \"\",\r\n            contentStyle: {\r\n                marginTop: -64\r\n            }\r\n        }}>\r\n            <Stack.Screen options={{\r\n                headerRight: () => {\r\n                    const route = useRoute();\r\n                    const buildLink = useLinkBuilder()\r\n                    const url = buildLink(route.name, route.params);\r\n                    return <ShareButton style={{ marginRight: 8, height: 32, width: 32 }} url={\"https://m.tradingpostapp.com\" + url || \"\"} title={\"https://m.tradingpostapp.com\" + url || \"\"} color=\"white\" />\r\n                }\r\n            }} name=\"Profile\" component={ProfileScreen} />\r\n        </Stack.Group>\r\n    </Stack.Navigator>\r\n}\r\n\r\n\r\n\r\n\r\n","/**\r\n * If you are not familiar with React Navigation, refer to the \"Fundamentals\" guide:\r\n * https://reactnavigation.org/docs/getting-started\r\n *\r\n */\r\nimport { createBottomTabNavigator } from '@react-navigation/bottom-tabs';\r\nimport {\r\n  getFocusedRouteNameFromRoute,\r\n  NavigationContainer,\r\n  DefaultTheme,\r\n  DarkTheme,\r\n  NavigationProp,\r\n  useNavigationState\r\n} from '@react-navigation/native';\r\nimport { createNativeStackNavigator } from '@react-navigation/native-stack';\r\n\r\nimport { createDrawerNavigator } from '@react-navigation/drawer';\r\nimport { SideMenu } from '../components/SideMenu';\r\n\r\nimport * as React from 'react';\r\n\r\nimport { ColorSchemeName } from 'react-native';\r\n//import { RootStackParamList, RootTabParamList, RootTabScreenProps } from '../types';\r\nimport LinkingConfiguration from './LinkingConfiguration';\r\nimport { SafeAreaProvider } from 'react-native-safe-area-context';\r\nimport { RootNavigator } from './RootNavigator';\r\n\r\nexport default function Navigation({ colorScheme }: { colorScheme: ColorSchemeName }) {\r\n  return (\r\n    <SafeAreaProvider>\r\n      <NavigationContainer\r\n        linking={LinkingConfiguration}\r\n        theme={colorScheme === 'dark' ? DarkTheme : DefaultTheme}\r\n      ><RootNavigator />\r\n      </NavigationContainer>\r\n    </SafeAreaProvider>\r\n  );\r\n}","import {configApi} from '@tradingpost/common/api/entities/static/EntityApiBase'\r\nimport Constants, {AppOwnership} from 'expo-constants'\r\nimport {useURL} from 'expo-linking'\r\nimport {parse} from 'url'\r\n\r\nif (!__DEV__) {\r\n    configApi({\r\n        apiBaseUrl: \"https://api.tradingpostapp.com\"\r\n    })\r\n} else if (__DEV__ && (AppOwnership.Expo === Constants.appOwnership || AppOwnership.Standalone === Constants.appOwnership || !Constants.appOwnership)) {\r\n\r\n    if (Constants.manifest?.hostUri) {\r\n        configApi({\r\n            apiBaseUrl: `http://${Constants.manifest?.hostUri?.split(\":\")[0]}:8082`\r\n        })\r\n    } else {\r\n\r\n        //manual ip for api server... have been trying to find a way to avoid this...\r\n        configApi({\r\n            apiBaseUrl: `http://${Constants.expoConfig?.extra?.localIp || \"localhost\"}:8082`\r\n        })\r\n    }\r\n}\r\n\r\nif (__DEV__ && Platform.OS === \"web\")\r\n    configApi({\r\n        callbackUrl: \"http://localhost:19006\"\r\n    })\r\n\r\n\r\nimport {StatusBar} from 'expo-status-bar';\r\nimport useCachedResources from './hooks/useCachedResources';\r\nimport useColorScheme from './hooks/useColorScheme';\r\nimport Navigation from './navigation';\r\nimport * as eva from '@eva-design/eva';\r\nimport {ApplicationProvider, Layout, Button, IconRegistry} from '@ui-kitten/components';\r\nimport theme from \"./theme-light.json\"; // <-- Import app theme\r\nimport {ToastProvider} from 'react-native-toast-notifications';\r\nimport React, {useEffect,} from 'react';\r\n\r\n\r\nimport {EvaIconsPack} from '@ui-kitten/eva-icons';\r\n\r\nimport {getSecurityList} from './SecurityList'\r\nimport {Platform} from 'react-native'\r\n\r\nexport default function App() {\r\n    const {isLoadingComplete} = useCachedResources();\r\n    //const colorScheme = useColorScheme();\r\n    const colorScheme = 'light';\r\n    useEffect(() => {\r\n        if (isLoadingComplete) {\r\n            getSecurityList();\r\n        }\r\n    }, [isLoadingComplete])\r\n    const url = useURL();\r\n    if (__DEV__ && url) {\r\n\r\n        const urlParsed = parse(url, true);\r\n\r\n        //com.tradingpostapp://expo-development-client/?url=http%3A%2F%2F10.0.0.94%3A8081 need to parse and set the api url the first run through\r\n        if (urlParsed.hostname === \"expo-development-client\") {\r\n            configApi({\r\n                apiBaseUrl: \"http://\" + (urlParsed.query[\"url\"] as string)?.split(\":\")[1] + \":8082\"\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    return !isLoadingComplete ? null : <ApplicationProvider {...eva} theme={{...eva.light, ...theme}}>\r\n        <IconRegistry icons={EvaIconsPack}/>\r\n        <ToastProvider>\r\n            <Navigation colorScheme={colorScheme}/>\r\n            <StatusBar/>\r\n        </ToastProvider>\r\n    </ApplicationProvider>\r\n}\r\n\r\n\r\n\r\n","import { registerRootComponent } from 'expo';\r\n\r\nimport App from './App';\r\n\r\n// registerRootComponent calls AppRegistry.registerComponent('main', () => App);\r\n// It also ensures that whether you load the app in Expo Go or in a native build,\r\n// the environment is set up appropriately\r\nregisterRootComponent(App);\r\n","import { FontAwesome } from '@expo/vector-icons';\r\nimport * as Font from 'expo-font';\r\nimport * as SplashScreen from 'expo-splash-screen';\r\nimport { useEffect, useState } from 'react';\r\nimport { initLds, setValue } from '../lds';\r\nimport { Authentication } from '../Authentication';\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { registerDeviceForNotifications } from \"../utils/notifications\";\r\n\r\nimport '../SecurityList'\r\nimport { Log } from '../utils/logger';\r\n\r\nexport default function useCachedResources() {\r\n    const [isLoadingComplete, setLoadingComplete] = useState(false);\r\n\r\n    // Load any resources or data that we need prior to rendering the app\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n\r\n                SplashScreen.preventAutoHideAsync();\r\n                // Load fonts\r\n                await Font.loadAsync({\r\n                    ...FontAwesome.font,\r\n                    'space-mono': require('../assets/fonts/SpaceMono-Regular.ttf'),\r\n                    'K2D': require('../assets/fonts/K2D-Regular.ttf'),\r\n                });\r\n\r\n                const lds = await initLds();\r\n                if (lds.authToken) {\r\n                    Log.verbose(\"There IS AN AUTH TOKEN\");\r\n                    try {\r\n                        const results = await Authentication.signIn(\"\", lds.authToken);\r\n                        lds.loginResult = results.loginResult;\r\n                        lds.currentUser = results.currentUser;\r\n                        Log.verbose(`CU: ${JSON.stringify(lds.currentUser)} LR: ${JSON.stringify(lds.loginResult)}`);\r\n                        setValue(\"loginResult\", results.loginResult);\r\n                        setValue(\"currentUser\", results.currentUser);\r\n\r\n                        if (results.currentUser?.email)\r\n                            await registerDeviceForNotifications();\r\n\r\n                    } catch (ex) {\r\n                        //TODO: make this remove the authtoken if the exception actually is related to the auth token being invalid \r\n                        setValue(\"authToken\", undefined);\r\n                        console.error(ex);\r\n                    }\r\n                }\r\n                else\r\n                    Log.verbose(\"There is no auth token.\");\r\n\r\n\r\n            } catch (e) {\r\n                // We might want to provide this error information to an error reporting service\r\n                console.error(e);\r\n            } finally {\r\n                setLoadingComplete(true);\r\n                SplashScreen.hideAsync();\r\n            }\r\n        })()\r\n    }, []);\r\n\r\n\r\n    return {\r\n        isLoadingComplete,\r\n    }\r\n}\r\n","const data = {\r\n\t\"width\": 24,\r\n\t\"height\": 24,\r\n\t\"body\": \"<path fill=\\\"currentColor\\\" d=\\\"m12 23l4-4H8M19 8h-2V6h2m0 5h-2V9h2m-3-1h-2V6h2m0 5h-2V9h2m0 6H8v-2h8M7 8H5V6h2m0 5H5V9h2m1 0h2v2H8m0-5h2v2H8m3 1h2v2h-2m0-5h2v2h-2m9-5H4c-1.11 0-2 .89-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2Z\\\"/>\"\r\n};\r\nexports.__esModule = true;\r\nexports.default = data;\r\n","module.exports = __webpack_public_path__ + \"static/media/bookmark-active.d96ac9da.svg\";","module.exports = __webpack_public_path__ + \"static/media/bookmark-active-blue.fdca270d.svg\";","module.exports = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cGF0aCBkPSJNNjQgOEMzMy4wNzUgOCA4IDMzLjA3NSA4IDY0QzggOTQuOTI1IDMzLjA3NSAxMjAgNjQgMTIwQzk0LjkyNSAxMjAgMTIwIDk0LjkyNSAxMjAgNjRDMTIwIDMzLjA3NSA5NC45MjUgOCA2NCA4Wk02NCAxMTAuNUMzOC4zMjUgMTEwLjUgMTcuNSA4OS42NzUgMTcuNSA2NEMxNy41IDM4LjMyNSAzOC4zMjUgMTcuNSA2NCAxNy41Qzg5LjY3NSAxNy41IDExMC41IDM4LjMyNSAxMTAuNSA2NEMxMTAuNSA4OS42NzUgODkuNjc1IDExMC41IDY0IDExMC41WiIgZmlsbD0iYmxhY2siLz4NCjxwYXRoIGQ9Ik01OCA0MkM1OCA0My41OTEzIDU4LjYzMjEgNDUuMTE3NCA1OS43NTc0IDQ2LjI0MjZDNjAuODgyNiA0Ny4zNjc5IDYyLjQwODcgNDggNjQgNDhDNjUuNTkxMyA0OCA2Ny4xMTc0IDQ3LjM2NzkgNjguMjQyNiA0Ni4yNDI2QzY5LjM2NzkgNDUuMTE3NCA3MCA0My41OTEzIDcwIDQyQzcwIDQwLjQwODcgNjkuMzY3OSAzOC44ODI2IDY4LjI0MjYgMzcuNzU3NEM2Ny4xMTc0IDM2LjYzMjEgNjUuNTkxMyAzNiA2NCAzNkM2Mi40MDg3IDM2IDYwLjg4MjYgMzYuNjMyMSA1OS43NTc0IDM3Ljc1NzRDNTguNjMyMSAzOC44ODI2IDU4IDQwLjQwODcgNTggNDJWNDJaTTY3IDU2SDYxQzYwLjQ1IDU2IDYwIDU2LjQ1IDYwIDU3VjkxQzYwIDkxLjU1IDYwLjQ1IDkyIDYxIDkySDY3QzY3LjU1IDkyIDY4IDkxLjU1IDY4IDkxVjU3QzY4IDU2LjQ1IDY3LjU1IDU2IDY3IDU2WiIgZmlsbD0iYmxhY2siLz4NCjwvc3ZnPg0K\"","module.exports = __webpack_public_path__ + \"static/media/logo.9bb3fb31.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo-no-bg.9cd8c523.svg\";","module.exports = __webpack_public_path__ + \"static/media/notification-active.ead2911b.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAoCAYAAACSN4jeAAAACXBIWXMAAAsTAAALEwEAmpwYAAACr0lEQVRYhe2Ye28SQRTFf6C1+KSliliMtVZqrNpUjI9qfVSjprSk+ABbFhb6/b+EGXPGjBtcFthH/+hJboDduTOH+5o7A9PjMrAK1IEPwFfJJ+AFsA4skDByzvcysAP8AHrAABiOkD7QEdG7/5krFlIF4DVwDPiSLvBNlnoPvAM+A4fAkTOup+eluEndAFqyglmkDbwCloH5EVaYk86W9HqSX0AtLlIVTehJjFWKE8wzrzg8lr4huDErqUXFiaeJNwJjxsWL+74K/JT7Dbl7I8ZEQh7Y0yRdZRlTTuaGRFt/tD2h5f9O8tiJqfqUhFxY3RX90b7KzEQoKNuMckPWiwOW3Lbm7iqG3XehiutS9FRExypOiKJc6asERcauCmdTqZ8E3mqNljw0FgUNHqhWxW2tnD7XHHeWo6xTUtXuO5kYJzGL6846tbB17MObTiGshinMiKvab41nNqMQW3aq/K0whRlxSZlviD2NQqyaIrGWiNWjEjNuPCPGmcUSjLFTFfx5p1ykEfwXHWK2XIQ2C7czsNizsIErapsPtFV42jaSwpyIefo0jcPDoNW21IIMJCcimTSeOGta2bXkKk773NKZ0fT250gHq2ocG/LUQN0zz/XDbKhLAaUkYivsNLUnz31BbIeKrayxIyPtmx+PxPJIabugnmwxJSmp1a7peOfb+LYdq68M6agfT1M6znnTU0/4ByUFn6eO0s9AesB3la1/kFdBNe30gwzkjhLg1CIX9mKU2IpcVtYcOFtWPjDW4IrSvukcaoLjgjITlhSoJ6rcdkEC3yuK1+G4U1BcyDmXLYfajEfho3OXdi1JQpaUwX3nRrEh65zXNlbU7WJXY+yhOTVsq0r3dHfWVOx19MyXZS+QATblKhtLRuwu8ibr9DfZZ+qQaQZeqjOYuY/7DbN2cxBGpVy8AAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/store-front-logo2-alt.7ad935b2.svg\";","module.exports = __webpack_public_path__ + \"static/media/store-front.5d28ee3a.svg\";","module.exports = __webpack_public_path__ + \"static/media/app-title.a87bb585.svg\";","module.exports = __webpack_public_path__ + \"static/media/splash-welcome.0edc3aee.svg\";","module.exports = __webpack_public_path__ + \"static/media/ClimbingMountain.4dedba75.svg\";","module.exports = __webpack_public_path__ + \"static/media/Debate.d0700537.svg\";","module.exports = __webpack_public_path__ + \"static/media/Studying.63530cae.svg\";","module.exports = __webpack_public_path__ + \"static/media/analyze.13c5c9ae.svg\";","module.exports = __webpack_public_path__ + \"static/media/bank.76a3b142.svg\";","module.exports = __webpack_public_path__ + \"static/media/IBKR.cfa56b4d.svg\";","module.exports = __webpack_public_path__ + \"static/media/robinhood_logo.d70982fc.svg\";","module.exports = __webpack_public_path__ + \"static/media/robinhood_logo_long.a5900aa8.svg\";","module.exports = __webpack_public_path__ + \"static/media/plus.cdc95c1f.svg\";","module.exports = __webpack_public_path__ + \"static/media/upvote.d5439e23.svg\";","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgODIgODIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cGF0aCBkPSJNNDguMjYxMiAyOS4yMDY0TDQyLjUyNTMgMjMuNDc0NkwyNi42NjI0IDM5LjMxN1Y0NS4wNDg4SDMyLjM5NDJMNDguMjYxMiAyOS4yMDY0WiIgZmlsbD0iI0Y0NDUyRCIvPg0KPHBhdGggZD0iTTQ5LjYwMTcgMTYuMzk5NEw1NS4zMzM2IDIyLjEzMTJMNTAuOTU4OCAyNi41MDU5TDQ1LjIyNzEgMjAuNzc0MUw0OS42MDE3IDE2LjM5OTRaIiBmaWxsPSIjRjQ0NTJEIi8+DQo8cGF0aCBkPSJNNzMuOCAwSDguMkMzLjY3NzcgMCAwIDMuNjc3NyAwIDguMlY4MkwyMS44NjUzIDY1LjZINzMuOEM3OC4zMjIzIDY1LjYgODIgNjEuOTIyMyA4MiA1Ny40VjguMkM4MiAzLjY3NzcgNzguMzIyMyAwIDczLjggMFpNNzMuOCA1Ny40SDE5LjEzNDdMOC4yIDY1LjZWOC4ySDczLjhWNTcuNFoiIGZpbGw9IiNGNDQ1MkQiLz4NCjwvc3ZnPg0K\"","module.exports = __webpack_public_path__ + \"static/media/bookmark.1ebaa1ce.svg\";","module.exports = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCA1MCA1MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0zOCAzNUgzNlYxN0MzNiAxNi40IDM1LjYgMTYgMzUgMTZIMThWMTRIMzVDMzYuNyAxNCAzOCAxNS4zIDM4IDE3VjM1WiIgZmlsbD0iYmxhY2siLz4NCjxwYXRoIGQ9Ik0zNyAzNi41TDMwLjIgMjguN0wzMS44IDI3LjNMMzcgMzMuNUw0Mi4yIDI3LjNMNDMuOCAyOC43TDM3IDM2LjVaTTMyIDM2SDE1QzEzLjMgMzYgMTIgMzQuNyAxMiAzM1YxNUgxNFYzM0MxNCAzMy42IDE0LjQgMzQgMTUgMzRIMzJWMzZaIiBmaWxsPSJibGFjayIvPg0KPHBhdGggZD0iTTE4LjIwMDIgMjIuN0wxMy4wMDAyIDE2LjVMNy44MDAyIDIyLjdMNi4yMDAyIDIxLjNMMTMuMDAwMiAxMy41TDE5LjgwMDIgMjEuM0wxOC4yMDAyIDIyLjdaIiBmaWxsPSJibGFjayIvPg0KPC9zdmc+DQo=\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQyIDI0MiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF8yNzkyXzI0NSkiPg0KPHBhdGggZD0iTTEyMSAwQzU0LjE3MzUgMCAwIDU0LjE3MzUgMCAxMjFDMCAxODcuODI2IDU0LjE3MzUgMjQyIDEyMSAyNDJDMTg3LjgyNiAyNDIgMjQyIDE4Ny44MjYgMjQyIDEyMUMyNDIgNTQuMTczNSAxODcuODI2IDAgMTIxIDBaTTEyMS43OTggNDIuMzMyM0wxNDAuODY2IDEwMS44NzJMMjAzLjM2MSAxMDMuMjc1TDE1Mi42MjQgMTM5Ljc4OEwxNzAuNiAxOTkuNjY4TDEyMC4xODggMTYyLjY5N0w2OC44MDEgMTk4LjMwOUw4OC4zODY3IDEzOC45MzFMMzguNjM5NSAxMDEuMDZMMTAxLjE2MyAxMDEuMzQxTDEyMS43OTggNDIuMzMyM1Y0Mi4zMzIzWiIgZmlsbD0iIzM1QTI2NSIvPg0KPC9nPg0KPGRlZnM+DQo8Y2xpcFBhdGggaWQ9ImNsaXAwXzI3OTJfMjQ1Ij4NCjxyZWN0IHdpZHRoPSIyNDIiIGhlaWdodD0iMjQyIiBmaWxsPSJ3aGl0ZSIvPg0KPC9jbGlwUGF0aD4NCjwvZGVmcz4NCjwvc3ZnPg0K\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjUiIGhlaWdodD0iNjIiIHZpZXdCb3g9IjAgMCA2NSA2MiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik02Mi40MTk1IDI3Ljk4MzZMNS43NTI4NyAxLjMxNjk4QzUuMTgyMzEgMS4wNDcwMyA0LjU0Njc5IDAuOTQ0ODAzIDMuOTIwMzYgMS4wMjIyQzMuMjkzOTMgMS4wOTk2MSAyLjcwMjQgMS4zNTM0NSAyLjIxNDcxIDEuNzU0MTVDMS43MjcwMiAyLjE1NDg1IDEuMzYzMjYgMi42ODU5MSAxLjE2NTgxIDMuMjg1NDNDMC45NjgzNzQgMy44ODQ5NSAwLjk0NTM4NyA0LjUyODIzIDEuMDk5NTMgNS4xNDAzMUw3LjU2Mjg3IDMxLjAwMDNMMS4wOTk1MyA1Ni44NjAzQzAuOTQzOTQ1IDU3LjQ3MjYgMC45NjU5MjYgNTguMTE2NiAxLjE2MjkxIDU4LjcxNjhDMS4zNTk4OSA1OS4zMTcxIDEuNzIzNzMgNTkuODQ4OSAyLjIxMTg2IDYwLjI0OTlDMi42OTk5OSA2MC42NTEgMy4yOTIyMyA2MC45MDQ4IDMuOTE5MzEgNjAuOTgxNkM0LjU0NjM5IDYxLjA1ODQgNS4xODIzNyA2MC45NTUxIDUuNzUyODcgNjAuNjgzNkw2Mi40MTk1IDM0LjAxN0M2Mi45OTIyIDMzLjc0NzggNjMuNDc2NCAzMy4zMjEyIDYzLjgxNTYgMzIuNzg3QzY0LjE1NDcgMzIuMjUyOCA2NC4zMzQ4IDMxLjYzMzEgNjQuMzM0OCAzMS4wMDAzQzY0LjMzNDggMzAuMzY3NSA2NC4xNTQ3IDI5Ljc0NzggNjMuODE1NiAyOS4yMTM3QzYzLjQ3NjQgMjguNjc5NSA2Mi45OTIyIDI4LjI1MjggNjIuNDE5NSAyNy45ODM2VjI3Ljk4MzZaTTkuMjY5NTMgNTEuNjU3TDEyLjA2NjIgNDAuNDY3TDMwLjk5OTUgMzEuMDAwM0wxMi4wNjYyIDIxLjUzMzZMOS4yNjk1MyAxMC4zNDM2TDUzLjE2OTUgMzEuMDAwM0w5LjI2OTUzIDUxLjY1N1oiIGZpbGw9IiMzNUEyNjUiLz4NCjwvc3ZnPg0K\"","module.exports = __webpack_public_path__ + \"static/media/Account.9d5b65c9.svg\";","module.exports = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAxIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDEwMSAxMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cGF0aCBkPSJNNS45NDExOCAwLjIzNTI5MVYxMDcuMTc2SDBWMTE5LjA1OUgyMy43NjQ3VjEwNy4xNzZIMTcuODIzNVY3Ny40NzA2SDk1LjA1ODhDOTYuNjM0NSA3Ny40NzA2IDk4LjE0NTcgNzYuODQ0NiA5OS4yNTk5IDc1LjczMDRDMTAwLjM3NCA3NC42MTYzIDEwMSA3My4xMDUxIDEwMSA3MS41Mjk0VjEyLjExNzZDMTAxIDEwLjU0MTkgMTAwLjM3NCA5LjAzMDc4IDk5LjI1OTkgNy45MTY2Qzk4LjE0NTcgNi44MDI0MSA5Ni42MzQ1IDYuMTc2NDcgOTUuMDU4OCA2LjE3NjQ3SDE3LjgyMzVWMC4yMzUyOTFINS45NDExOFpNMjkuNzA1OSAxOC4wNTg4VjI5Ljk0MTJINDEuNTg4MlYxOC4wNTg4SDUzLjQ3MDZWMjkuOTQxMkg2NS4zNTI5VjE4LjA1ODhINzcuMjM1M1YyOS45NDEySDg5LjExNzZWNDEuODIzNUg3Ny4yMzUzVjUzLjcwNTlIODkuMTE3NlY2NS41ODgySDc3LjIzNTNWNTMuNzA1OUg2NS4zNTI5VjY1LjU4ODJINTMuNDcwNlY1My43MDU5SDQxLjU4ODJWNjUuNTg4MkgyOS43MDU5VjUzLjcwNTlIMTcuODIzNVY0MS44MjM1SDI5LjcwNTlWMjkuOTQxMkgxNy44MjM1VjE4LjA1ODhIMjkuNzA1OVoiIGZpbGw9ImJsYWNrIi8+DQo8cGF0aCBkPSJNMjkuNzA1NiA0MS44MjMySDQxLjU4NzlWNTMuNzA1NkgyOS43MDU2VjQxLjgyMzJaTTUzLjQ3MDMgNDEuODIzMkg2NS4zNTI2VjUzLjcwNTZINTMuNDcwM1Y0MS44MjMyWk00MS41ODc5IDI5Ljk0MDlINTMuNDcwM1Y0MS44MjMySDQxLjU4NzlWMjkuOTQwOVpNNjUuMzUyNiAyOS45NDA5SDc3LjIzNVY0MS44MjMySDY1LjM1MjZWMjkuOTQwOVoiIGZpbGw9ImJsYWNrIi8+DQo8L3N2Zz4NCg==\"","module.exports = __webpack_public_path__ + \"static/media/Feedback.22ef3824.svg\";","module.exports = __webpack_public_path__ + \"static/media/Help.6a3a2895.svg\";","module.exports = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI5IiBoZWlnaHQ9IjEwNiIgdmlld0JveD0iMCAwIDEyOSAxMDYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cGF0aCBkPSJNNS4yNSAxNy42NzVDNS4yNSAxNy42NzUgMTQuMTU2MiA1LjggMzQuOTM3NSA1LjhDNTUuNzE4OCA1LjggNjQuNjI1IDE3LjY3NSA2NC42MjUgMTcuNjc1VjEwMC44QzY0LjYyNSAxMDAuOCA1NS43MTg4IDk0Ljg2MjUgMzQuOTM3NSA5NC44NjI1QzE0LjE1NjIgOTQuODYyNSA1LjI1IDEwMC44IDUuMjUgMTAwLjhWMTcuNjc1WiIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIxMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8cGF0aCBkPSJNNjQuNjI1IDE3LjY3NUM2NC42MjUgMTcuNjc1IDczLjUzMTIgNS44IDk0LjMxMjUgNS44QzExNS4wOTQgNS44IDEyNCAxNy42NzUgMTI0IDE3LjY3NVYxMDAuOEMxMjQgMTAwLjggMTE1LjA5NCA5NC44NjI1IDk0LjMxMjUgOTQuODYyNUM3My41MzEyIDk0Ljg2MjUgNjQuNjI1IDEwMC44IDY0LjYyNSAxMDAuOFYxNy42NzVaIiBzdHJva2U9ImJsYWNrIiBzdHJva2Utd2lkdGg9IjEwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjwvc3ZnPg0K\"","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyNi4zLjEsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHZpZXdCb3g9IjAgMCAxNjQgMTkyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxNjQgMTkyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8cGF0aCBmaWxsPSJibGFjayIgZD0iTTE1MC4zLDAuOWgtODJjLTMuNiwwLTcuMSwxLjQtOS43LDRjLTIuNiwyLjYtNCw2LTQsOS42djIwLjRoMTMuN1YxNC41aDgydjE2My4zaC04MnYtMjAuNEg1NC43djIwLjRjMCwzLjYsMS40LDcuMSw0LDkuNg0KCWMyLjYsMi42LDYsNCw5LjcsNGg4MmMzLjYsMCw3LjEtMS40LDkuNy00YzIuNi0yLjYsNC02LDQtOS42VjE0LjVjMC0zLjYtMS40LTcuMS00LTkuNkMxNTcuNCwyLjMsMTU0LDAuOSwxNTAuMywwLjl6Ii8+DQo8cGF0aCBmaWxsPSJibGFjayIgIGQ9Ik01MC43LDY0LjlMMjYuMiw4OS4zSDEyM3YxMy42SDI2LjJsMjQuNSwyNC40bC05LjcsOS42TDAsOTYuMWw0MS00MC44TDUwLjcsNjQuOXoiLz4NCjwvc3ZnPg0K\"","module.exports = __webpack_public_path__ + \"static/media/Profile.39f7f989.svg\";","module.exports = __webpack_public_path__ + \"static/media/Watchlist.e35b45e7.svg\";","module.exports = __webpack_public_path__ + \"static/media/bank-link-icon.73f705c3.svg\";","const data = {\r\n\t\"width\": 256,\r\n\t\"height\": 180,\r\n\t\"body\": \"<path fill=\\\"red\\\" d=\\\"M250.346 28.075A32.18 32.18 0 0 0 227.69 5.418C207.824 0 127.87 0 127.87 0S47.912.164 28.046 5.582A32.18 32.18 0 0 0 5.39 28.24c-6.009 35.298-8.34 89.084.165 122.97a32.18 32.18 0 0 0 22.656 22.657c19.866 5.418 99.822 5.418 99.822 5.418s79.955 0 99.82-5.418a32.18 32.18 0 0 0 22.657-22.657c6.338-35.348 8.291-89.1-.164-123.134Z\\\"/><path fill=\\\"#FFF\\\" d=\\\"m102.421 128.06l66.328-38.418l-66.328-38.418z\\\"/>\"\r\n};\r\nexports.__esModule = true;\r\nexports.default = data;\r\n","const data = {\r\n\t\"width\": 256,\r\n\t\"height\": 256,\r\n\t\"body\": \"<path fill=\\\"#1ED760\\\" d=\\\"M128 0C57.308 0 0 57.309 0 128c0 70.696 57.309 128 128 128c70.697 0 128-57.304 128-128C256 57.314 198.697.007 127.998.007l.001-.006Zm58.699 184.614c-2.293 3.76-7.215 4.952-10.975 2.644c-30.053-18.357-67.885-22.515-112.44-12.335a7.981 7.981 0 0 1-9.552-6.007a7.968 7.968 0 0 1 6-9.553c48.76-11.14 90.583-6.344 124.323 14.276c3.76 2.308 4.952 7.215 2.644 10.975Zm15.667-34.853c-2.89 4.695-9.034 6.178-13.726 3.289c-34.406-21.148-86.853-27.273-127.548-14.92c-5.278 1.594-10.852-1.38-12.454-6.649c-1.59-5.278 1.386-10.842 6.655-12.446c46.485-14.106 104.275-7.273 143.787 17.007c4.692 2.89 6.175 9.034 3.286 13.72v-.001Zm1.345-36.293C162.457 88.964 94.394 86.71 55.007 98.666c-6.325 1.918-13.014-1.653-14.93-7.978c-1.917-6.328 1.65-13.012 7.98-14.935C93.27 62.027 168.434 64.68 215.929 92.876c5.702 3.376 7.566 10.724 4.188 16.405c-3.362 5.69-10.73 7.565-16.4 4.187h-.006Z\\\"/>\"\r\n};\r\nexports.__esModule = true;\r\nexports.default = data;\r\n","const data = {\r\n\t\"width\": 256,\r\n\t\"height\": 209,\r\n\t\"body\": \"<path fill=\\\"#55acee\\\" d=\\\"M256 25.45a105.04 105.04 0 0 1-30.166 8.27c10.845-6.5 19.172-16.793 23.093-29.057a105.183 105.183 0 0 1-33.351 12.745C205.995 7.201 192.346.822 177.239.822c-29.006 0-52.523 23.516-52.523 52.52c0 4.117.465 8.125 1.36 11.97c-43.65-2.191-82.35-23.1-108.255-54.876c-4.52 7.757-7.11 16.78-7.11 26.404c0 18.222 9.273 34.297 23.365 43.716a52.312 52.312 0 0 1-23.79-6.57c-.003.22-.003.44-.003.661c0 25.447 18.104 46.675 42.13 51.5a52.592 52.592 0 0 1-23.718.9c6.683 20.866 26.08 36.05 49.062 36.475c-17.975 14.086-40.622 22.483-65.228 22.483c-4.24 0-8.42-.249-12.529-.734c23.243 14.902 50.85 23.597 80.51 23.597c96.607 0 149.434-80.031 149.434-149.435c0-2.278-.05-4.543-.152-6.795A106.748 106.748 0 0 0 256 25.45\\\"/>\"\r\n};\r\nexports.__esModule = true;\r\nexports.default = data;\r\n","const data = {\r\n\t\"width\": 256,\r\n\t\"height\": 256,\r\n\t\"body\": \"<path fill=\\\"#0A66C2\\\" d=\\\"M218.123 218.127h-37.931v-59.403c0-14.165-.253-32.4-19.728-32.4c-19.756 0-22.779 15.434-22.779 31.369v60.43h-37.93V95.967h36.413v16.694h.51a39.907 39.907 0 0 1 35.928-19.733c38.445 0 45.533 25.288 45.533 58.186l-.016 67.013ZM56.955 79.27c-12.157.002-22.014-9.852-22.016-22.009c-.002-12.157 9.851-22.014 22.008-22.016c12.157-.003 22.014 9.851 22.016 22.008A22.013 22.013 0 0 1 56.955 79.27m18.966 138.858H37.95V95.967h37.97v122.16ZM237.033.018H18.89C8.58-.098.125 8.161-.001 18.471v219.053c.122 10.315 8.576 18.582 18.89 18.474h218.144c10.336.128 18.823-8.139 18.966-18.474V18.454c-.147-10.33-8.635-18.588-18.966-18.453\\\"/>\"\r\n};\r\nexports.__esModule = true;\r\nexports.default = data;\r\n","const data = {\r\n\t\"width\": 24,\r\n\t\"height\": 24,\r\n\t\"body\": \"<path fill=\\\"currentColor\\\" d=\\\"M22.539 8.242H1.46V5.406h21.08v2.836zM1.46 10.812V24L12 18.11L22.54 24V10.812H1.46zM22.54 0H1.46v2.836h21.08V0z\\\"/>\"\r\n};\r\nexports.__esModule = true;\r\nexports.default = data;\r\n","module.exports = __webpack_public_path__ + \"static/media/analyze2.def492bc.svg\";","module.exports = __webpack_public_path__ + \"static/media/analytics.96f2c1d2.svg\";","const data = {\r\n\t\"width\": 24,\r\n\t\"height\": 24,\r\n\t\"body\": \"<path fill=\\\"currentColor\\\" d=\\\"M12 4a4 4 0 0 1 4 4a4 4 0 0 1-4 4a4 4 0 0 1-4-4a4 4 0 0 1 4-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4Z\\\"/>\"\r\n};\r\nexports.__esModule = true;\r\nexports.default = data;\r\n","const data = {\n\t\"width\": 24,\n\t\"height\": 24,\n\t\"body\": \"<path fill=\\\"currentColor\\\" d=\\\"M18 22q-1.25 0-2.125-.875T15 19q0-.175.025-.363q.025-.187.075-.337l-7.05-4.1q-.425.375-.95.587Q6.575 15 6 15q-1.25 0-2.125-.875T3 12q0-1.25.875-2.125T6 9q.575 0 1.1.212q.525.213.95.588l7.05-4.1q-.05-.15-.075-.337Q15 5.175 15 5q0-1.25.875-2.125T18 2q1.25 0 2.125.875T21 5q0 1.25-.875 2.125T18 8q-.575 0-1.1-.213q-.525-.212-.95-.587L8.9 11.3q.05.15.075.337Q9 11.825 9 12t-.025.362q-.025.188-.075.338l7.05 4.1q.425-.375.95-.588Q17.425 16 18 16q1.25 0 2.125.875T21 19q0 1.25-.875 2.125T18 22Z\\\"/>\"\n};\nexports.__esModule = true;\nexports.default = data;\n","const data = {\r\n\t\"width\": 24,\r\n\t\"height\": 24,\r\n\t\"body\": \"<path fill=\\\"currentColor\\\" d=\\\"M17 13h-4v4h-2v-4H7v-2h4V7h2v4h4m-5-9A10 10 0 0 0 2 12a10 10 0 0 0 10 10a10 10 0 0 0 10-10A10 10 0 0 0 12 2Z\\\"/>\"\r\n};\r\nexports.__esModule = true;\r\nexports.default = data;\r\n","module.exports = __webpack_public_path__ + \"./fonts/SpaceMono-Regular.ttf\";","module.exports = __webpack_public_path__ + \"./fonts/K2D-Regular.ttf\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAIBAMAAAA7P9P/AAAAFVBMVEUAAAAAAAAAAABHcEwAAAAAAAAAAAAsXusGAAAABnRSTlPUFhUAxLV788luAAAAQ0lEQVQI12MIUTY2NjZyZXBjAtIKKQwCCcrGRmyMDIZsTMYKCcIMxgIJSmyMxgzGhmwMCcJA2lggjdEYRBu5CBsbAwA6HgmSu7c8IwAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADfSURBVHgB3ZVhDYMwEIVfMDAkzMEszMEqoRJwAA6oA+ZgszAFzEEzBZuDrc1oUkjbO0p/8SXvz+XuHeXKAeyd2qgxuhlpo++kcYpJbEAYvT3TmHROo55hvFTLNW8zzJ16ylwSBsroSuSIVANNFDtSOXZudc7TcxtYNS6x8oouKMc51OCIcpxCweUxB/BRiLzOKlH0AZ8DJ4m6QWuGPLpE/wRPlOMVavBAOe6hoP04qOXmoJZfFEEUD6AXoQSBAj3EmDow6TLMFVYiwbu6dm4CG5D4/x5HzAdpY3ap1dg1PyNVyJlgDEwbAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAAAcklEQVRIDWNgGAWjIYAcAgqGtltBGFmMEJuFkAIU+f//vVD4RHCYiFBDkZJRCwgGHyM2FeCUQmqEMjJue3D+sDe6eVSLA8b/DP/RDSeZr2Bg8x+ESdFINR/gsnTUAlwhAxcnrSwCJkWqpBa49aOMYRECANa7E7ZM1CXvAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/has-notification-active.b9317cb3.png\";","module.exports = __webpack_public_path__ + \"static/media/has-notification.76af1056.png\";","module.exports = __webpack_public_path__ + \"static/media/portfolio-active.efe3924c.png\";","module.exports = __webpack_public_path__ + \"static/media/portfolio.e8bf12f0.png\";","module.exports = __webpack_public_path__ + \"static/media/feed-active.7796425f.png\";","module.exports = __webpack_public_path__ + \"static/media/feed.31fac6f4.png\";","module.exports = __webpack_public_path__ + \"static/media/search-active.cc2d6f99.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAoCAYAAAB99ePgAAAACXBIWXMAAAsTAAALEwEAmpwYAAADFklEQVRYhc2YC08TQRSFv4IgCGhriIGqIIKCD/CBAopgwkOpgFAUKC3bxP//J8wkZ/RmAu3udDfhJJNtd/feOXPv3Mcs9IZS8H8QuA9MAbMa7ncZGOgiWwj6gWlgAzgGzoEmcKnR1L0j4DPwGOgrioxd8QywD7QMmQRo62rHpRk/ZNGrdPZM7DawaSzT0jgBtoBlYBFYAj4A28Cv4H33e924uyeCXngM+ClrNDTJN+ApMNRBfhiYA2qSaUiHs+JIHgRHtK9assAp8OyahdgRPnupfXghoociHw23ifeMa46ASjBpN9h3xoG6IbgbYzkv8E4b3Smry71pSV2ns6x9eiHdb2J0lo0b3JjogVhIsGr0ujnuZVW0atLBSg7EQoIfTRpyc6XGHaUBFwS/gVHyx6iCqyk3D6dd1ROTPNcKIFbS9ZOZZyat0Ipx6XTwLA94XdPyTibXbkngLEgdRbk2UVLvilvK4Imqgus6isKgkrGb6yBNczBoStVhkd0E/5N8Wwm+qyEGtIpEAs6SRaFfdbctg4T935XYFbmTgtKIx5DqdqI2LFUUrUvA5aDJ4FmeqJhOxQVhR3gCCyZ7LwXP8oDXNW/meZtlRefKQfvaG0Vgx3Q83kOpsC3BlprKvGvrpOmQ99NmBS88ZVZl811eBL9Lt3Ppixjd3npubF6xgFgsm4UfxKarssqL71xXIgnad1/JlX5PVyP0/cOCyDVEcEMnMTvxdYrt/T6dyjyxtskEUVhVQXbtelMkW9qDsynd4Qg+Ck5gbRGNxqKUtVX/5uView51++W9Jh9Txh/SiW1COvbMyc3LufuZ4d0wJxLnunrzV0xu8mkmkUVPdQiqm32amMO3L1HVXog91Ap9WXGRFWJKkezJJx3GhVz6PDaZl8y58swQczW2EyoKmDU1CzUNl8O+AK+BB0FgZIpK//Jdc568VCFOE4VERG7mjzQHZn/UMnxsKUU+S4U+ucRH4XFeH1nywNcg4io3hdiq+azVyOmTQy5YEjFf49xB+kYQWzDEoluWojCubP1HdfPGYazXrqAI/AWJsGc6P11vXQAAAABJRU5ErkJggg==\"","module.exports = __webpack_public_path__ + \"static/media/bookmark-active.a74f9155.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAoCAYAAAAPOoFWAAAACXBIWXMAAAsTAAALEwEAmpwYAAABbklEQVRYhe2XTU8CMRRFT1E3LiWRja4QBFyqgAqGOLIxEfnQ//9XzCO3SR0HKcwMcTEveXlhBu55vW1JC9AEJsC4xJyIwxRYKj9LyKXSOCTAB3AHdIGbArMrXdN/8TAj1ykn6tL/AWvopSsI4lQbh4SdZ8HsYQWLCada2ZgrnGplY65wqpWNucKpVjbmCqda2fg/bDw9FKwHzIB22bAesBDM6nVZsBA0VZ3/McK9YV0JL3TCPQJu9Xm+ARgFS0dHgpb91Lt7Ae143drw++iRtYMRDTK6TgOvdh2Z/1JLAiY03LJw+gGwGQPzx2/UoQc9RO69QQZw61k/BD0CtQgQamiYAfwFWwFnwGUwR08BKPay4eSEB15Id+Vhr9oztqTf1MVIy3sXkI+aHFlKz18GkxD2ro7GOUAuBVxId+ZhiR6Yfc/A8Z4gMoA2FaZr+muY/fV8FQRKA80hmxLTX1/gbdXYPjkpCJQG2gBs43e+AWheWzD4nGQdAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAoCAYAAAC4h3lxAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB6UlEQVRYhe2YPS8EURSGn5lllyg0QkFBKCQ+ExoKwg/wFa3KPxBaBYVGo9ZR6UQiVin+gZVoSUQnQmR9zO5cmTizublGrEJyRvYkT+7s3Fu8Z+45956z8GmejA1APzAMDClkEGjGsVj8MnALlIBARk0EMt4D664TS4BJGRv2DlzJy3cgVE4gWh+BtsiBdvlhnIVGIaHDRORAE3AnC0rOQm3CDVCW5yhaeuMw2pbJQCY08yZaj+wkzgIHCr60qZJzoNU9RiObBlaAVcXMWJor2j3HkTSYl/TSB+qAjFLqZKxZzf4qKTKCr5SM8CWBo8m0me8+tACbwAlwCuRl1EDe0rMD9LhOdALXCm5YUyXPwLi9HYcy8SL1kGZeRWshzoUW6XLsSk9bNWoSSulI6wjSFDwkLDLKHQiBsTiEzqwQKinnTbTeAI2xA6NAUcFXNr9g0T1G+6UnuJAEibhUREE4BqZEs5d0kUUVX06aHE3kgPqki8x+kYZS1U9p5VCz9JXUGaX434lPU2J43zX13cAcsKCYAceRim1Z17RmQmBP7oWKrVkLSsopi87dWHzWamYCBX+fhz8QO1CURowO4MkpWTWHT2gx+S92ICkHysoxdg7Yp9C7gjAxVbDvnkKxdQGzct7OK6XP0ut9AF3v9ga2MivCAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/flatgrad.0b9cb975.png\";","var api = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../node_modules/css-loader/dist/cjs.js!./TextEditor.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".pell-content {\\r\\n    flex: 1;\\r\\n    margin:8px;\\r\\n    border:1px solid #ccc;\\r\\n    padding:8px;\\r\\n}\\r\\n\\r\\n.pell-holder{\\r\\n    margin: 0 16px;\\r\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n"],"sourceRoot":""}
{"version":3,"sources":["lds.tsx","Authentication.tsx","SecurityList.ts","utils/logger.ts","utils/notifications.ts","components/SvgExpo.web.tsx","images.tsx","constants/Colors.ts","style.ts","utils/hooks.tsx","components/LabeledField.tsx","components/PrimaryButton.tsx","components/SecondaryButton.tsx","components/ButtonField.tsx","components/TextField.tsx","utils/validators.ts","components/ScrollWithButtons.tsx","utils/misc.tsx","screens/create_account/shared.ts","components/Link.tsx","screens/create_account/AccountInfoSection.tsx","components/Headers.tsx","components/Section.tsx","components/Picker.tsx","components/Slider.tsx","components/AddButton.tsx","components/KeyboardAvoidingInput.tsx","screens/create_account/InvestmentInterestSection.tsx","components/IconfiyIcon.tsx","utils/third-party/twitter.ts","utils/third-party/youtube.ts","utils/third-party/shared.ts","components/YourContentComponent.tsx","components/ProfileButton.tsx","components/NoDataPanel.tsx","components/List.tsx","components/WatchlistPicker.tsx","components/Themed.tsx","hooks/useColorScheme.ts","screens/create_account/AnalystStartSection.tsx","components/Table.tsx","components/LinkBrokerageComponent.tsx","components/ToolTip.tsx","components/SwitchField.tsx","screens/SubscriptionScreen.tsx","components/HtmlView.web.tsx","screens/CreateAccountScreen.tsx","screens/create_account/BasicInfoSection.tsx","screens/create_account/PickWatchlistSection.tsx","screens/create_account/LinkBrokerageSection.tsx","screens/create_account/YourContentSection.tsx","screens/create_account/SubscrpitionCostSection.tsx","screens/create_account/ProfileIconSection.tsx","screens/create_account/TermsScreen.tsx","screens/create_account/PrivacyScreen.tsx","navigation/LinkingConfiguration.ts","screens/NotFoundScreen.tsx","components/ProfileBanner.tsx","components/ProfileBar.tsx","components/PrimaryChip.tsx","components/IconButton.tsx","components/AsyncPressable.tsx","components/ShareButton.tsx","components/ExtendedMenuModal.tsx","components/PostView.tsx","components/PostList.tsx","components/MultiTermFeed.tsx","components/WatchlistItemRenderItem.tsx","screens/WatchlistViewerScreen.tsx","components/WatchlistSection.tsx","components/PlusContentButton.tsx","screens/FeedScreen.tsx","charts-js/animated-path.js","charts-js/chart/chart.js","charts-js/area-chart.js","charts-js/stacked-area-chart.js","charts-js/bar-chart/bar-chart.js","charts-js/bar-chart/bar-chart-grouped.js","charts-js/stacked-bar-chart/stacked-bar-chart.js","charts-js/stacked-bar-chart/stacked-bar-grouped.js","charts-js/line-chart/line-chart.js","charts-js/chart/chart-grouped.js","charts-js/line-chart/line-chart-grouped.js","charts-js/line-chart/index.js","charts-js/progress-circle.js","charts-js/x-axis.js","charts-js/y-axis.js","charts-js/chart-decorators/horizontal-line.js","charts-js/chart-decorators/point.js","charts-js/chart-decorators/tooltip.js","charts-js/grid.js","components/InteractiveGraph.tsx","components/ButtonGroup.tsx","components/HoldingRenderItem.tsx","components/TradeRenderItem.tsx","screens/ProfileScreen.tsx","components/LoginButtons.tsx","screens/WelcomeScreen.tsx","components/SideMenu.tsx","screens/NotificationScreen.tsx","screens/BlockListModalScreen.tsx","screens/PortfolioScreen.tsx","components/SearchBar.tsx","navigation/BottomTabNavigator.tsx","screens/SearchScreen.tsx","navigation/DrawerNavigator.tsx","screens/AccountSettingsScreen.tsx","screens/AccountInfoScreen.tsx","screens/AuthScreen.tsx","screens/ChangePasswordScreen.tsx","screens/CompanyScreen.tsx","screens/ImagePicker.tsx","screens/NotificationTradeScreen.tsx","components/TextEditor.web.tsx","screens/PostEditorScreen.tsx","components/CommentView.tsx","components/CommentList.tsx","screens/PostScreen.tsx","screens/TableModalScreen.tsx","screens/VerificationScreen.tsx","components/VirtualListWithButtons.tsx","screens/WatchlistEditorScreen.tsx","screens/WatchlistScreen.tsx","screens/AppInformationScreen.tsx","screens/BrokeragePickerScreen.tsx","screens/IbkrInfoScreen.tsx","screens/RobinhoodLoginScreen.tsx","screens/TwitterAuthSceen.tsx","screens/BlockListScreen.tsx","navigation/RootNavigator.tsx","navigation/index.tsx","App.tsx","index.js","hooks/useCachedResources.ts","assets/@iconify/keyboard-close.js","assets/post-feed/bookmark-active.svg","assets/post-feed/bookmark-active-blue.svg","assets/side-menu/Information.svg","assets/logo.svg","assets/logo-no-bg.svg","assets/nav-bar/notification-active.png","assets/nav-bar/notification.png","assets/store-front-logo2-alt.svg","assets/store-front.svg","assets/app-title.svg","assets/splash-welcome.svg","assets/ClimbingMountain.svg","assets/Debate.svg","assets/Studying.svg","assets/analyze.svg","assets/bank.svg","assets/IBKR.svg","assets/robinhood_logo.svg","assets/robinhood_logo_long.svg","assets/misc/plus.svg","assets/post-feed/upvote.svg","assets/post-feed/comment.svg","assets/post-feed/bookmark.svg","assets/post-feed/ei_retweet.svg","assets/post-feed/PremiumStar.svg","assets/post-feed/SendIcon.svg","assets/post-feed/material-symbols_error-circle-rounded-outline.svg","assets/post-feed/ph_dots-three-bold.svg","assets/side-menu/Account.svg","assets/side-menu/Competition.svg","assets/side-menu/Feedback.svg","assets/side-menu/Help.svg","assets/side-menu/Learn.svg","assets/side-menu/Log Out.svg","assets/side-menu/Profile.svg","assets/side-menu/Watchlist.svg","assets/bank-link-icon.svg","assets/@iconify/youtube-icon.js","assets/@iconify/spotify-icon.js","assets/@iconify/twitter.js","assets/@iconify/linkedin-icon.js","assets/@iconify/substack.js","assets/analyze2.svg","assets/analytics.svg","assets/@iconify/user.js","assets/@iconify/share.js","assets/@iconify/plus-circle.js","assets/fonts/SpaceMono-Regular.ttf","assets/fonts/K2D-Regular.ttf","assets/rnui/chevronDown.png","assets/rnui/add.png","assets/rnui/plus.png","assets/nav-bar/has-notification-active.png","assets/nav-bar/has-notification.png","assets/nav-bar/portfolio-active.png","assets/nav-bar/portfolio.png","assets/nav-bar/feed-active.png","assets/nav-bar/feed.png","assets/nav-bar/search-active.png","assets/nav-bar/search.png","assets/nav-bar/bookmark-active.png","assets/nav-bar/bookmark.png","assets/nav-bar/menu.png","assets/post-feed/flatgrad.png","webpack:///./components/TextEditor.css?ebe6","components/TextEditor.css"],"names":["lds","isCachedMap","authToken","hasAuthed","isExplirable","securities","duration","useData","key","expireCheck","cachedAt","Date","now","setValue","undefined","useState","value","_setValue","useEffect","sub","EventRegister","addEventListener","data","removeEventListener","useCallback","v","cachedLds","Object","keys","forEach","k","AsyncStorage","setItem","JSON","stringify","emit","initLds","result","getItem","parse","securityListTask","useAppUser","tracker","_appUser","setAppUser","_loginResult","setLoginResult","setAuthToken","nav","useNavigation","createLoginState","currentUser","loginResult","updated","appUser","user_id","token","setupStatus","needsSettings","settings","length","needsAnalystSettings","Boolean","analyst","analyst_profile","loginState","setLoginState","console","log","forceTrigger","updateState","signIn","email","pass","Authentication","signOut","Auth","navigate","login","User","get","enableVerbose","error","err","tryCatch","action","ex","Log","enabled","verbose","msg","registerDeviceForNotifications","Device","existingStatus","Notifications","status","finalStatus","Api","Notification","extensions","registerUserDevice","provider","Platform","OS","deviceId","timezone","Localization","name","importance","MAX","vibrationPattern","lightColor","fetchSecurities","list","Security","byId","bySymbol","r","id","symbol","getSecurityList","useSecuritiesList","setErr","setSecurities","localValue","setLocalValue","then","catch","SvgExpo","props","url","children","type","lastRef","useRef","onReadyRef","onReady","current","divRef","svgData","setSvgData","fetch","ok","statusText","text","setTimeout","View","style","ref","height","width","justifyContent","alignContent","alignItems","display","dangerouslySetInnerHTML","__html","sideMenu","Account","Competition","Feedback","Information","Help","Learn","LogOut","Profile","Watchlist","Bank_Link","BookmarkActive","_BookmarkActive","BookmarkInactive","_BookmarkInactive","BookmarkActiveBlue","_BookmarkActiveBlue","makeExpoSvg","Svg","AppTitle","_AppTitle","SplashWelcome","_SplashWelcome","ClimbingMountain","_ClimbingMountain","Debate","_Debate","Studying","_Studying","Analyze","_Analyze","Bank","_Bank","IBKR","_IBKR","RobinhoodLogo","_RobinhoodLogo","Retweet","_RobinhoodLogoLong","_IconBg","_IconNoBg","_PlusIcon","_Retweet","UpvoteIcon","_UpvoteIcon","CommentIcon","_CommentIcon","SendIcon","_SendIcon","InfoIcon","PremiumStar","_PremiumStar","EllipsesIcon","_ErrorIcon","_EllipsesIcon","NavIconTypeOverride","require","no","active","inactive","has","navIcons","BookmarkIcons","social","TwitterLogo","LinkedInLogo","YouTubeLogo","SubstackLogo","SpotifyLogo","light","background","tint","tabIconDefault","tabIconSelected","dark","AppColors","flex","row","flexDirection","shadow","elevation","shadowOffset","shadowColor","shadowOpacity","shadowRadius","noMargin","marginTop","marginRight","marginBottom","marginLeft","fonts","xSmall","small","medium","large","xLarge","font","size","color","isBold","fontSize","fontWeight","sizes","paddView","padding","backgroundColor","elevated","marginHorizontal","paddingVertical","borderColor","borderWidth","borderRadius","bannerText","textAlign","margin","lineHeight","thinBannerText","marginVertical","textInputWiz","useOpacityAnim","opacityAnim","Animated","Value","timing","delay","toValue","useNativeDriver","start","useMemo","BannerText","Text","opacity","AppearView","styleProp","Symbol","iterator","unshift","useReadonlyEntity","seedValue","setData","hasChanged","setHasChanged","resetData","d","update","updates","_entity","bindTextInput","entity","converter","onChangeText","bindTextInputBase","valueKey","onChangeTextKey","bindKeys","output","fromType","toType","bindPicker","onSelect","item","useIsKeyboardVisible","isKeyboardVisible","setIsKeyboardVisible","useLayoutEffect","showSubscription","Keyboard","addListener","hideSubscription","remove","LabeledField","sz","compact","leftElement","label","PrimaryButton","AltPrimaryButton","SecondaryButton","AltSecondaryButton","ButtonField","_isActive","setIsActive","buttonLabel","disabled","disabledText","activeText","inactiveText","isActive","bProps","onPress","ev","a","secondary","TextField","rnuRef","caption","setCaption","valueTracker","setValueTracker","validate","textInputRef","errorMessage","field","numberOfLines","spellCheck","autoCorrect","editable","accessoryLeft","accessoryRight","onSubmitEditing","textProps","markRequired","t","validateOnChange","newCaption","category","secureTextEntry","returnKeyType","placeholder","isValidEmail","test","isRequired","replace","ScrollWithButtons","ScrollView","nestedScrollEnabled","contentContainerStyle","fillHeight","maxHeight","buttons","ButtonPanel","viewProps","borderTopColor","borderTopWidth","paddingTop","paddingBottom","zIndex","left","locked","right","TBI","warn","toPercent","number","numeral","format","toPercent2","toNumber1","toFormatedDateTime","dateTimeString","m","getMonth","getDate","y","getFullYear","h","getHours","min","getMinutes","ampm","String","toDollars","toDollarsAndCents","split","sideMargin","Link","Pressable","AccountBasicInfo","refs","isAuthed","agreeToTerms","setAgreeToTerms","agreeToPrivacy","setAgreeToPrivacy","linkTo","useLinkTo","loginEntity","confirm","c","password","checked","onChange","Header","Subheader","Section","title","useSubHeading","alt","button","Subsection","ElevatedSection","paddingHorizontal","Picker","Array","items","map","filter","join","find","selectedIndex","multiSelect","i","idx","_item","IndexPath","findIndex","Image","source","uri","iconUrl","Slider","MultiSlider","AddButton","fill","EditButton","SettingsButton","DeleteButton","ExitButton","FavButton","isSelected","KeyboardAvoidingInput","KeyboardAvoidingView","behavior","multiline","numLines","nextValue","paddingLeft","displayButton","clicked","onClick","item_id","rightIcon","investmentStrats","questionStyle","gicsAC","sort","IconifyIcon","DEBUG","icon","xml","currentColor","body","svg","svgProps","pressableProps","clientId","redirectUriText","getCallBackUrl","authUrlText","URL","platform","AppOwnership","Expo","Constants","appOwnership","manifest","hostUri","makeRedirectUrl","YourContentComponent","toast","useToast","inputMessage","setInputMessage","inputPlatform","setInputPlatform","inputValue","setInputValue","getTwitterTokenOther","state","uuid","v4","intervalHandler","openAuth","removeItem","_challenge","Math","random","toString","substring","authUrl","searchParams","append","openBrowserAsync","code","Promise","res","rej","clearInterval","setInterval","linkSocialAccount","callbackUrl","challenge","useTwitterAuth","getGoogleToken","googleUrl","encodeURIComponent","useGoogleAuth","userClaims","claims","handle","twitterHandle","setTwitterHandle","substackUsername","setsubstackUsername","spotifyShow","setSpotifyShow","youtubeChannel","setYoutubeChannel","useFocusEffect","newTwitterhandle","isNewAccount","show","iconPadd","socialStyling","s","platform_idenifier","finally","HandleButton","fontStyle","ProfileButton","userId","alignSelf","overflow","profileUrl","NoDataPanel","message","List","internalData","setInternalData","preloadOffset","datasetKey","currentPage","setCurrentPage","pagesDone","setPagesDone","isLoadingRef","maxItem","setMaxItem","setTriggerHack","sizeCache","datasetKeyRef","maxPage","hack","nextPage","originalLength","newData","vp","viewabilityConfig","itemVisiblePercentThreshold","onViewableItemsChanged","max","viewableItems","vi","index","curMax","needsSplice","maxDisaplyCount","FlatList","listKey","horizontal","getItemLayout","b","numColumns","ListHeaderComponent","ListFooterComponent","maxDisaplyText","stickyHeaderIndices","loadingItem","slice","keyExtractor","renderItem","viewabilityConfigCallbackPairs","noDataMessage","loadingMessage","cellStyle","flexGrow","aspectRatio","flexBasis","empty","useWatchlistPicker","selectedItems","setSelectedItems","selectionConverter","onSelectedItemschanged","symbolConverter","WatchlistPicker","searchText","setSearchText","setDatasetKey","securitiesLoaded","_selectedItems","_symbols","_s","delayRef","clearTimeout","RegExp","security_name","aStartsWith","bStartsWith","localeCompare","gap","from","push","isSec","onPressed","selectedClone","SecurityCell","innerSelected","setInnerSelected","shape","logo_url","resizeMode","position","bottom","top","useThemeColor","colorName","theme","_useColorScheme","colorFromProps","Colors","darkColor","otherProps","Table","columns","rowPressed","columnStyle","headerStyle","headerAlias","columnDynamicStyle","columnsToString","align","Theme","alias","dynamicStyle","hideHeader","info","elevatedView","colStyle","FieldElem","evaluatedStyle","evaluatedValue","renderAuxItem","alert","description","options","extra","window","confirmOption","cancelOption","Alert","LinkBrokerageComponent","accounts","setAccounts","intervalRef","needsRefresh","brokerLink","setLink","removeAccount","generateBrokerageLink","link","getBrokerageAccounts","accountId","brokerage","Brokerage","scheduleForDeletion","React","buttonProps","acc","broker_name","TooltipComponent","visible","setVisible","anchor","appearance","minHeight","minWidth","translateY","translateX","backdropStyle","placement","onBackdropPress","SwitchField","viewStyle","toggleStyle","toolTipText","textStyle","SubscriptionScreen","setIndex","mySubscriptionsCall","Subscriber","getBySubscriber","mySubscribersCall","getByOwner","subscriptions","setSubscriptions","subscribers","setSubscribers","buttonClick","setButtonClick","subtionTask","suberTask","all","p","navigation","indicatorStyle","subscription","user","profile_url","cost","toLocaleDateString","approved","flexShrink","removeSubscription","subscriptionId","subscription_id","SubscriptionSettingsScreen","SubscriptionSettingsView","call","Subscription","getByUserId","submit","insert","goBack","submitRef","pow","approve_new","HtmlView","scrolling","src","isUrl","srcDoc","screens","lockButtons","setLockButtons","setAgrreeToPrivacy","first","last","username","buttonConfig","canGoBack","screen","errors","val","toastMessage","Error","createLogin","json","policy","setFirstTime","createUser","first_name","last_name","converterRef","WatchlistApi","push_notifications","mentions","upvotes","watchlist_changes","portfolio_display","performance","holdings","trades","anaylistProfile","investment_strategy","portfolio_concentration","benchmark","interests","bio","setBio","sliderWidth","setSliderWidth","acText","setAcText","acValues","g","addIfMissing","int","toLowerCase","benches","is_benchmark","onLayout","nativeEvent","layout","containerStyle","step","sliderLength","values","onValuesChange","newInterest","splice","screenKeys","subScreen","userState","display_name","tags","route","params","resolvedIndex","caProps","insets","useSafeAreaInsets","swipeEnabled","tabBarStyle","shouldLoadComponent","Screen","ConfigOverride","path","linking","prefixes","Linking","config","Root","Create","Dash","BlockedUsers","PostScreen","AccountInformation","VerifyAccount","ResetPassword","NotificationTrade","WatchlistViewer","Modal","NotFound","getStateFromPath","routes","$replace","getActionFromState","NotFoundScreen","styles","container","TouchableOpacity","linkText","StyleSheet","create","profileImageSize","profileImageSmall","actionPanelSize","profileImageStyle","profileImageSmallStyle","bannerAspectRatio","ProfileBanner","profilePic","collapse","extraMarginTop","maxWidth","transform","subscriberCount","platforms","ProfilePic","editMode","navigator","onProfilePicked","SocialBar","logoName","logo","UserLogo","ProfileBar","openProfile","PrimaryChip","isAlt","IconButton","iconSource","AsyncPressable","isDisabled","setIsDisabled","ShareButton","Share","share","ShareIcon","backdrop","HardcodedReportingReasons","categories","ExtendedMenuModal","onShouldClose","postId","menuCategory","setMenuCategory","menuValue","setMenuValue","details","setDetails","closeMenu","block","cat","setBlocked","Post","report","reason","postTotalVerticalMargin","postTotalHorizontalMargin","postSidePad","spaceOnSide","postInnerHeight","itm","windowWidth","_source","postType","resolvePostContent","postUrl","content","htmlBody","matches","exec","PostView","post","ext","is_bookmarked","isBookmarked","setIsBookmarked","is_upvoted","isUpvoted","setIsUpvoted","upvoteCount","setUpvoteCount","showStatus","setShowStatus","modalVisible","setModalVisible","blocked","onReloadNeeded","_id","postTotalBorder","borderBottomColor","borderBottomWidth","showsHorizontalScrollIndicator","chip","resp","setBookmarked","includes","paddingRight","evaProps","setUpvoted","count","parseHtmlEnteties","str","match","numStr","num","parseInt","fromCharCode","PostContentView","useWindowDimensions","availWidth","scale","openURL","socialStyle","fontFamily","parsedText","platformCreatedAt","SubstackView","subscription_level","tradingpostCreatedAt","PostList","offset","posts","MultiTermFeedPart","allItems","page","multitermfeed","terms","newItems","WatchlistItemRenderItem","secId","intradayChange","price","open","securityId","shownMap","watchlist","note","onChangeNote","canEdit","hideEmptyNote","ticker","watchlistId","useNoteField","setShownMap","column","SecPressable","useWatchlistItemColumns","getIdValue","useMakeSecurityFields","iconField","secField","change","WatchlistViewerScreen","setWatchlist","isSaved","setIsFav","watchlistTickers","setWatchlistTickers","translateHeaderY","scrollRef","w","is_saved","toUpperCase","saveWatchlist","f","onScroll","event","contentOffset","NoteEditor","isEdit","setIsEdit","setNote","WatchlistSection","setFocus","fields","shared","hideNoteOnEmpty","showAddButton","watchlists","PlusContentButton","plusCircle","FeedPart","bookmarkedOnly","postsKey","setPostsKey","feed","AnimatedPath","this","newD","animate","oldD","interpolator","interpolate","_animate","cancelAnimationFrame","animation","_clearInteraction","requestAnimationFrame","timestamp","InteractionManager","createInteractionHandle","delta","animationDuration","component","setNativeProps","setState","clearInteractionHandle","Component","propTypes","PropTypes","bool","renderPlaceholder","func","Path","defaultProps","Chart","xAccessor","yAccessor","yScale","xScale","numberOfTicks","contentInset","gridMax","gridMin","clampX","clampY","mappedData","x","yValues","xValues","yExtent","array","xExtent","yMin","yMax","xMin","xMax","domain","range","clamp","paths","createPaths","ticks","extraProps","_onLayout","Children","child","belowChart","cloneElement","PureComponent","oneOfType","arrayOf","object","any","curve","AreaChart","area","y0","y1","defined","line","AreaStack","colors","order","svgs","series","areas","serie","_","string","showGrid","strokeWidth","BarChart","spacingInner","spacingOuter","paddingInner","paddingOuter","bar","_index","bandwidth","x0","x1","obj","extent","calcExtent","indexes","calcIndexes","xDomain","yDomain","calcXScale","calcYScale","calcAreas","barSvg","GroupedBarChart","_data","barWidth","collectionIndex","valueIndex","dataExtent","keyIndex","entry","entryIndex","isNaN","valueAccessor","getSeries","showZeroAxis","StackedBarGrouped","coordinatesToPathCommands","showTopBorder","showBottomBorder","commands","marker","topLeft1","topLeft2","bottomLeft1","bottomLeft2","bottomRight1","bottomRight2","topRight1","topRight2","commandsToSvgPath","command","trim","initialBorderRadius","innerBarSpace","stack","stackIndex","leftMargin","barHeight","mergedValues","stacks","indexStack","areaIndex","indexArea","LineChart","ChartGrouped","dataArray","pathSvg","LineChartGrouped","lines","LineChartGate","hasOwnProperty","ProgressCircle","progressColor","startAngle","endAngle","animateDuration","cornerRadius","progress","outerDiameter","isFinite","arcs","outerRadius","innerRadius","PI","XAxis","d3Scale","formatLabel","_getX","valueSvg","textAnchor","originX","alignmentBaseline","YAxis","getY","longestValue","reduce","prev","curr","originY","HorizontalLine","other","x2","y2","stroke","Point","radius","cx","cy","Tooltip","pointStroke","rx","ry","Horizontal","tick","Vertical","Both","dataPoints","Direction","VERTICAL","HORIZONTAL","BOTH","Grid","direction","oneOf","InteractiveChart","apx","Dimensions","date","return","dateList","priceList","positionX","setPositionX","panResponder","PanResponder","onStartShouldSetPanResponder","evt","gestureState","onStartShouldSetPanResponderCapture","onMoveShouldSetPanResponder","onMoveShouldSetPanResponderCapture","onPanResponderTerminationRequest","onPanResponderGrant","updatePosition","locationX","onPanResponderMove","onPanResponderRelease","YAxisWidth","chartWidth","xN","xDistance","Number","toFixed","verticalContentInset","panHandlers","stopColor","stopOpacity","strokeDasharray","period","dateString","toDateString","toDateMonthYear","rotation","ButtonGroup","arr","unselectedStyle","onValueChange","HoldingRenderItem","security_id","optionInfo","strike_price","expiration","isOwner","cost_basis","pnl","TradeRenderItem","quantity","amount","getUTCHours","tabBarMargin","periods","ProfileScreen","setUser","setWatchlists","setSummary","setHoldings","returns","setReturns","twReturns","settwReturns","portPeriod","setPortPeriod","dim","bannerHeight","useProfileBannerSize","headerHeight","ButtonMargin","clampMax","minViewHeight","collapsed","setCollapsed","isMaxed","setIsMaxed","translation","inputRange","outputRange","extrapolate","manager","abs","removeAllListeners","tab","setTab","getHoldings","getWatchlists","holdingsP","today","summary","getPortfolio","getReturns","startDate","setDate","endDate","twr","day","toUTCString","displayHoldings","is_subscribed","displayTrades","displayPerformance","ProfilePage","currentIndex","$page","newArr","getTrades","$limit","onMomentumScrollEnd","scrollToOffset","animated","bannerPic","is_pending","insertWithNotification","start_date","LoginButtons","createAccountProps","loginProps","cleanUp","setSelectedIndex","useInitialRoute","userRef","passRef","setUsername","setPassword","isLoggingIn","setIsLoggingIn","HTMLDivElement","stonks","n","querySelector","lastItem","lastItem2","floor","index2","forgotPassword","hideAll","WTF_View","padSmall","SideMenu","DrawerContentScrollView","MenuItem","isLast","versionCode","SvgElement","DrawerItem","closeDrawer","labelStyle","seen","NotificationTab","NewTradeNotification","dt","response","dateTime","dtFmt","getDay","flexWrap","UserInteractionNotification","SubscriptionNotification","approval","setApproval","subscriber_id","updateNotification","e","DefaultNotification","LimitedBlockList","listProps","BlockListModalScreen","stateLabel","stateValue","SearchBar","tfRef","Search","scaleX","clear","onTextChange","clearButtonMode","BottomTab","createBottomTabNavigator","DashComponents","Portfolio","quickWatchlist","setQuickWatchlist","portfolio","setPortfolio","focus","getAllWatchlists","lists","quick","saved_by_count","cummReturn","beta","sharpe","exposure","long","short","gross","net","created","saved","Feed","searchType","people","setPeople","searchSecurities","setSearchSecurities","debounceRef","search","term","modSearch","regex","company_name","notifs","setNotifs","timer","ids","seenNotifications","notificationIds","run","borderStyle","notifications","listAlerts","newNotifications","BottomTabNavigator","hasNotifications","setHasNotifications","notificationCount","unseenCount","interval","Navigator","initialRouteName","screenOptions","headerShown","unmountOnBlur","tabBarShowLabel","lazy","tabBarIcon","focused","activeType","navIcon","ImageBackground","initialParams","Drawer","createDrawerNavigator","HeaderTp","DrawerPart","useLegacyImplementation","drawerContent","headerTitleAlign","headerTitle","headerRight","routeName","getFocusedRouteNameFromRoute","useNavigationState","dismiss","KeyboardClose","isMarked","AccountSettingsScreen","mentionCheck","setMentionCheck","upvotesCheck","setUpvotesCheck","watchlistChangeCheck","setWatchlistChangeCheck","performanceCheck","setPerformanceCheck","holdingsCheck","setHoldingsCheck","tradesCheck","setTradesCheck","analystCheck","setAnalystCheck","openLink","isAnalystChecked","isPerformanceChecked","isHoldingsChecked","isTradesChecked","isMentionChecked","isUpvoteChecked","isWatchlistChangeChecked","AccountInfoScreen","definedOrValue","is_deleted","accountUpdates","setAccountUpdates","clone","setUpdates","newTwitterHandle","AccountInfoContent","_updates","AdvancedTabContent","toolTipStyle","AuthScreen","ChangePasswordScreen","oldPass","setOldPass","newPass","setNewPass","setConfirm","hasToken","resetPassword","CompanyScreen","security","setSecurity","securityPrices","setSecurityPrices","isFav","setDescription","isOnQuickWatch","getPrices","includeIntraday","includeHistorical","prices","historical","close","pxChange","quickadd","add","week_52_high","week_52_low","ImagePickerScreen","imageUri","setImageUri","editorVisible","setEditorVisible","imageData","setImageData","selectPhoto","ImagePicker","granted","pickerResult","base64","cancelled","launchEditor","Button","uploadProfilePic","image","onCloseEditor","fixedCropAspectRatio","lockAspectRatio","minimumCropDimensions","onEditingComplete","resizeResult","manipulateAsync","resize","SaveFormat","JPEG","mode","NotificationTradeScreen","listTrades","newTrades","toTwoDecimals","ss","charAt","parseFloat","TextEditor","html","setHtml","pell","init","element","onChangeHtml","actions","prompt","innerHTML","className","PostEditorScreen","subLevel","setSubLevel","postEntity","photos","setLocked","editorRef","contentFocused","setContentFocused","onTouchEnd","focusContentEditor","onFocus","onBlur","initialContentHTML","editor","CommentView","comment","commentTotalBorder","created_at","CommentsList","comments","setPost","postCommments","setPostComments","newComment","setNewComment","commentAdded","setCommentAdded","Comment","postList","valueOf","related_type","related_id","TableModalScreen","tableProps","VerificationScreen","verificationToken","imVerified","setImVerified","verified","validateUser","sendEmailValidation","VirtualListWithButtons","listChildren","WatchlistEditorScreen","pickerProps","setName","setWatchlistType","setMagic","watchlistData","date_added","WatchlistScreen","AppInformationScreen","sliderState","setSliderState","widthOg","paragraphSize","pageIndex","scrollEventThrottle","pagingEnabled","indexOfNextScreen","setSliderPage","BrokeragePickerScreen","IbkrInfoScreen","submittedText","setSubmittedText","accountIds","instructions","createIbkrAccounts","account_ids","emailBody","RobhinhoodLoginScreen","multifactor","setMultifactor","challengeResponseId","setChallengeResponseId","counter","hoodPing","requestId","challengeStatus","sleep","robinhoodLogin","mfaCode","initialLogin","mfa","mfaLogin","TwitterAuthWebViewScreen","allowFileAccess","onNavigationStateChange","tURL","hostname","pathname","query","BlockScreen","blockedUsers","setBlockedUsers","getBlocked","currentRef","u","handleNotification","shouldShowAlert","shouldPlaySound","shouldSetBadge","Stack","createNativeStackNavigator","initialRoute","RootNavigator","headerBackVisible","WelcomeScreen","CreateAccountScreen","Group","headerTintColor","headerBackground","contentStyle","useRoute","Navigation","colorScheme","NavigationContainer","LinkingConfiguration","DarkTheme","DefaultTheme","configApi","apiBaseUrl","registerRootComponent","isLoadingComplete","setLoadingComplete","SplashScreen","Font","FontAwesome","results","useCachedResources","useURL","eva","icons","EvaIconsPack","StatusBar","exports","__esModule","default","module","api","locals","___CSS_LOADER_API_IMPORT___"],"mappings":"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","file":"static/js/app.603e9156.chunk.js","sourcesContent":["import {useCallback, useEffect, useState} from 'react';\r\nimport {EventRegister} from 'react-native-event-listeners'\r\nimport {LoginResult} from \"@tradingpost/common/api/entities/static/AuthApi\";\r\nimport {IUserGet, ISecurityList} from \"@tradingpost/common/api/entities/interfaces\";\r\nimport AsyncStorage, {useAsyncStorage} from '@react-native-async-storage/async-storage'\r\n\r\n//current_user\r\n//token \r\nexport interface LDS {\r\n    currentUser: IUserGet | undefined,\r\n    loginResult: LoginResult | undefined\r\n    authToken: string | undefined,\r\n    hasAuthed: boolean | undefined,\r\n    firstTime: boolean | undefined,\r\n    securities: {\r\n        list: ISecurityList[],\r\n        byId: Record<number, ISecurityList>,\r\n        bySymbol: Record<string, ISecurityList>\r\n    } | undefined,\r\n}\r\n\r\n\r\nlet lds: Partial<Record<keyof LDS, any>> = {}\r\nlet isCachedMap: Partial<Record<keyof LDS, true>> = {\r\n    authToken: true,\r\n    hasAuthed: true\r\n}\r\n\r\nlet isExplirable: Partial<Record<keyof LDS, { duration: number, cachedAt?: number }>> = {\r\n    securities: {\r\n        duration: 4/*hours*/ * 60 * 60 * 1000\r\n    }\r\n}\r\n\r\n\r\nconst LDS_CACHE_KEY = \"lds\"\r\nconst ldsChangedEvenName = \"lds_changed\";\r\n\r\nexport const useData = <T extends keyof LDS>(key: T) => {\r\n    const expireCheck = isExplirable[key]\r\n    if (expireCheck?.cachedAt && expireCheck.duration <= (Date.now() - expireCheck.cachedAt)) {\r\n        setValue(key, undefined);\r\n    }\r\n\r\n    const [value, _setValue] = useState<LDS[T]>(lds[key]);\r\n\r\n    useEffect(() => {\r\n        const sub = EventRegister.addEventListener(ldsChangedEvenName, (data) => {\r\n\r\n            if (data.key === key) {\r\n                _setValue(lds[key])\r\n            }\r\n\r\n        });\r\n        return () => {\r\n            EventRegister.removeEventListener(sub as string)\r\n        };\r\n    }, [key])\r\n    return {\r\n        value,\r\n        setValue: useCallback(async (v: typeof value) => {\r\n            await setValue(key, v)\r\n        }, [key])\r\n    }\r\n\r\n}\r\n\r\nexport const setValue = async <T extends keyof LDS>(key: T, v: LDS[T]) => {\r\n    lds[key] = v;\r\n    if (isCachedMap[key]) {\r\n        const cachedLds: Partial<LDS> = {...lds}\r\n        Object.keys(lds).forEach((k) => {\r\n            if (!isCachedMap[k as keyof LDS]) {\r\n                //console.log(\"DELETING KEY:\" + k);\r\n                delete cachedLds[k as keyof LDS]\r\n            } else {\r\n                //console.log(\"CACHING KEY\" + k)\r\n            }\r\n        })\r\n        await AsyncStorage.setItem(LDS_CACHE_KEY, JSON.stringify(cachedLds));\r\n    }\r\n    EventRegister.emit(ldsChangedEvenName, {key})\r\n}\r\n\r\nexport const initLds = async () => {\r\n    //load all cached values\r\n    //console.log(\"Initing LDS\");\r\n    const result = await AsyncStorage.getItem(LDS_CACHE_KEY);\r\n    if (result) {\r\n        //console.log(\"Results\" + result);\r\n        lds = JSON.parse(result);\r\n        Object.keys(lds).forEach((k) =>\r\n            EventRegister.emit(ldsChangedEvenName, {k}));\r\n    }\r\n    return lds;\r\n};","import Auth from '@tradingpost/common/api/entities/static/AuthApi';\r\nimport { useCallback, useEffect } from \"react\";\r\nimport User from '@tradingpost/common/api/entities/apis/UserApi';\r\nimport { useData } from \"./lds\";\r\nimport { useState } from 'react';\r\nimport { EventRegister } from 'react-native-event-listeners';\r\nimport { Log } from './utils/logger';\r\nimport { useNavigation } from '@react-navigation/native';\r\n\r\n\r\n// if (email !== '') {\r\n//     try {\r\n//         await registerDeviceForNotifications();\r\n//     }\r\n//     catch (ex) {\r\n//         console.error(ex);\r\n//     }\r\n// }\r\n\r\n\r\nconst loginStateChangedEventName = \"LOGIN_STATE_CAHNGED\";\r\n\r\n\r\n\r\nexport const useAppUser = (tracker?: string) => {\r\n\r\n    const { value: _appUser, setValue: setAppUser } = useData(\"currentUser\");\r\n    const { value: _loginResult, setValue: setLoginResult } = useData(\"loginResult\");\r\n    const { value: _authToken, setValue: setAuthToken } = useData(\"authToken\");\r\n    const [toggleRefresh, setToggleRefresh] = useState(true);\r\n    const nav = useNavigation();\r\n    type LoginState = {\r\n        appUser: typeof _appUser,\r\n        loginResult: typeof _loginResult,\r\n        authToken: typeof _authToken,\r\n        //TODO: stop gap... but we should make this resolved on the server probably \r\n        setupStatus?: {\r\n            needsSettings: boolean,\r\n            needsAnalystSettings: boolean\r\n        },\r\n        updated: Date\r\n    };\r\n\r\n    const createLoginState = (currentUser: typeof _appUser, loginResult: typeof _loginResult): LoginState => {\r\n        return {\r\n            updated: new Date(),\r\n            appUser: currentUser,\r\n            authToken: loginResult?.user_id ? loginResult.token : undefined,\r\n            loginResult: loginResult,\r\n            setupStatus: currentUser ? {\r\n                needsSettings: !currentUser.settings || !Object.keys(currentUser.settings).length,\r\n                needsAnalystSettings: Boolean(currentUser.settings?.analyst) && !currentUser.analyst_profile\r\n            } : undefined\r\n        }\r\n    }\r\n\r\n    const [loginState, setLoginState] = useState(_appUser || _loginResult ? createLoginState(_appUser, _loginResult) : undefined)\r\n\r\n    useEffect(() => {\r\n        if (tracker)\r\n            console.log(\"CREATING WITH A TRACKER OF \" + tracker);\r\n        const sub = EventRegister.addEventListener(loginStateChangedEventName, (data) => {\r\n            if (tracker)\r\n                console.log(\"TRIGGERED TRACKER OF \" + tracker);\r\n            setLoginState(data);\r\n        });\r\n        return () => {\r\n            EventRegister.removeEventListener(sub as string)\r\n        };\r\n    }, [tracker])\r\n\r\n    return {\r\n        loginState,\r\n        forceTrigger: () => {\r\n            if (_loginResult) {\r\n                setLoginResult({ ..._loginResult });\r\n            }\r\n        },\r\n        updateState: () => {\r\n            if (_loginResult) {\r\n                setLoginResult({ ..._loginResult });\r\n            }\r\n            if (loginState) {\r\n                setLoginState({ ...loginState, updated: new Date() })\r\n            }\r\n        },\r\n        signIn: useCallback(async (email: string, pass: string) => {\r\n            setLoginState(undefined);\r\n            const value = await Authentication.signIn(email, pass)\r\n            setLoginResult(value.loginResult);\r\n            setAppUser(value.currentUser);\r\n            if (value.loginResult.user_id)\r\n                setAuthToken(value.loginResult.token);\r\n\r\n            EventRegister.emit(loginStateChangedEventName, createLoginState(value.currentUser, value.loginResult))\r\n\r\n        }, []),\r\n        signOut: useCallback(() => {\r\n            Auth.signOut();\r\n            setAuthToken(undefined);\r\n            setLoginResult(undefined);\r\n            setAppUser(undefined);\r\n            setLoginState(undefined);\r\n            EventRegister.emit(loginStateChangedEventName, undefined);\r\n            nav.navigate('Root');\r\n        }, [])\r\n    }\r\n}\r\n\r\nexport const Authentication = {\r\n    signIn: async (email: string, pass: string) => {\r\n        const result = await Auth.login(email, pass);\r\n        return {\r\n            loginResult: result,\r\n            currentUser: result.user_id ? await User.get(result.user_id) : undefined\r\n        }\r\n    }\r\n}\r\n\r\n","import { Api } from \"@tradingpost/common/api\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useData } from \"./lds\";\r\n\r\nconst fetchSecurities = async () => {\r\n    console.log(\"I'm getting securities\");\r\n    const list = await Api.Security.extensions.list(),\r\n        byId: Record<number, typeof list[0]> = {},\r\n        bySymbol: Record<string, typeof list[0]> = {}\r\n    list.forEach((r) => {\r\n        byId[r.id] = r;\r\n        bySymbol[r.symbol] = r;\r\n    })\r\n    return {\r\n        list,\r\n        byId,\r\n        bySymbol\r\n    }\r\n}\r\nlet securityListTask: ReturnType<typeof fetchSecurities>\r\nexport const getSecurityList = () => securityListTask || (securityListTask = fetchSecurities())\r\n\r\n\r\nexport const useSecuritiesList = () => {\r\n\r\n    const [err, setErr] = useState<any>()\r\n    const { value: securities, setValue: setSecurities } = useData(\"securities\");\r\n    const [localValue, setLocalValue] = useState(securities)\r\n\r\n\r\n    useEffect(() => {\r\n        if (!securities)\r\n            getSecurityList()\r\n                .then((r) => {\r\n                    setSecurities(r)\r\n                    setLocalValue(r);\r\n                }).catch(ex => setErr(ex));\r\n    }, [securities])\r\n\r\n    return {\r\n        err,\r\n        securities: localValue || {\r\n            byId: {},\r\n            bySymbol: {},\r\n            list: []\r\n        }\r\n    }\r\n}\r\n","//Should change this to a process.env\r\nlet enableVerbose = true;\r\n\r\nconst verbose = (msg: string) => {\r\n    if (enableVerbose) {\r\n        console.log(msg);\r\n    }\r\n}\r\nconst error = (err: string | Error | unknown) => {\r\n    console.error(err);\r\n}\r\nconst tryCatch = async <T>(action: () => T) => {\r\n    try {\r\n        return await action();\r\n    } catch (ex) {\r\n        error(ex)\r\n    }\r\n}\r\n\r\nexport const Log = {\r\n    enableVerbose: (enabled: boolean) => {\r\n        enableVerbose = enabled\r\n    },\r\n    verbose,\r\n    error,\r\n    tryCatch\r\n}\r\n","// Render message if can send notifications\r\n// Pass along user device id to database and platform\r\n// Should be done in Settings / Login / Sign Up(After a user creates their email / password) & its accepted\r\nimport * as Notifications from 'expo-notifications';\r\nimport * as Device from 'expo-device';\r\nimport { Platform } from 'react-native';\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport * as Localization from 'expo-localization';\r\nimport { Log } from './logger';\r\n\r\nexport const registerDeviceForNotifications = async () => {\r\n    return await Log.tryCatch(async () => {\r\n        let token;\r\n        if (Device.isDevice) {\r\n            const { status: existingStatus } = await Notifications.getPermissionsAsync();\r\n            let finalStatus = existingStatus;\r\n            if (existingStatus === 'undetermined') {\r\n                const { status } = await Notifications.requestPermissionsAsync();\r\n                finalStatus = status;\r\n            }\r\n\r\n            if (finalStatus !== 'granted') {\r\n                return;\r\n            }\r\n            token = await (await Notifications.getDevicePushTokenAsync()).data;\r\n            await Api.Notification.extensions.registerUserDevice({\r\n                provider: Platform.OS,\r\n                deviceId: token,\r\n                timezone: Localization.timezone\r\n            });\r\n        }\r\n\r\n        if (Platform.OS === 'android') {\r\n            await Notifications.setNotificationChannelAsync('default', {\r\n                name: 'default',\r\n                importance: Notifications.AndroidImportance.MAX,\r\n                vibrationPattern: [0, 250, 250, 250],\r\n                lightColor: '#282869',\r\n            });\r\n        }\r\n        return token;\r\n    })\r\n}","import React, { PropsWithChildren, useEffect, useRef, useState } from \"react\";\r\nimport { View, Image } from \"react-native\";\r\nimport { SvgProps } from \"react-native-svg\";\r\n\r\n\r\nexport const SvgExpo = (props: SvgProps & { onReady?: (parent: any) => void }) => {\r\n    const url = (props.children as any).type;\r\n    const lastRef = useRef(\"\");;\r\n    const onReadyRef = useRef(props.onReady);\r\n    onReadyRef.current = props.onReady;\r\n    const divRef = useRef<HTMLDivElement>(null);\r\n\r\n    const [svgData, setSvgData] = useState(\"\");\r\n    useEffect(() => {\r\n\r\n\r\n        lastRef.current = url;\r\n        fetch(url, {}).then((data) => {\r\n            if (data.ok) {\r\n                data.text().then((result) => {\r\n                    if (lastRef.current === url)\r\n                        setSvgData(result);\r\n                    // //hacky right now ... will fix later \r\n\r\n                    setTimeout(() => {\r\n                        if (onReadyRef.current)\r\n                            onReadyRef.current(divRef.current)\r\n                    }, 222)\r\n                });\r\n            }\r\n            else throw data.statusText;\r\n        }).catch(ex => console.log(ex));\r\n\r\n\r\n    }), [url]\r\n\r\n\r\n\r\n    //hacky but gotta convert \r\n    return <View style={props.style}>\r\n        <div ref={divRef} style={{ height: \"100%\", width: \"100%\", justifyContent: \"center\", alignContent: \"center\", alignItems: \"center\", display:\"flex\" }} dangerouslySetInnerHTML={{ __html: svgData }} />\r\n    </View>\r\n}","import _IconNoBg from './assets/store-front-logo2-alt.svg'\r\nimport _IconBg from './assets/store-front.svg'\r\nimport _AppTitle from './assets/app-title.svg'\r\nimport _SplashWelcome from './assets/splash-welcome.svg'\r\nimport _ClimbingMountain from './assets/ClimbingMountain.svg'\r\nimport _Debate from './assets/Debate.svg'\r\nimport _Studying from './assets/Studying.svg'\r\nimport _Analyze from './assets/analyze.svg'\r\nimport _Bank from './assets/bank.svg'\r\nimport _IBKR from './assets/IBKR.svg'\r\nimport _RobinhoodLogo from './assets/robinhood_logo.svg'\r\nimport _RobinhoodLogoLong from './assets/robinhood_logo_long.svg'\r\n\r\n\r\nimport Logo from './assets/logo.svg'\r\nimport LogoNoBg from './assets/logo-no-bg.svg'\r\n\r\nimport _PlusIcon from './assets/misc/plus.svg';\r\nimport _UpvoteIcon from './assets/post-feed/upvote.svg'\r\nimport _CommentIcon from './assets/post-feed/comment.svg'\r\nimport _BookmarkActive from './assets/post-feed/bookmark-active.svg'\r\nimport _BookmarkActiveBlue from './assets/post-feed/bookmark-active-blue.svg'\r\nimport _BookmarkInactive from './assets/post-feed/bookmark.svg'\r\nimport _Retweet from './assets/post-feed/ei_retweet.svg'\r\nimport _PremiumStar from './assets/post-feed/PremiumStar.svg'\r\nimport _SendIcon from './assets/post-feed/SendIcon.svg'\r\nimport _ErrorIcon from './assets/post-feed/material-symbols_error-circle-rounded-outline.svg'\r\nimport _EllipsesIcon from './assets/post-feed/ph_dots-three-bold.svg'\r\n\r\n// /** Side Menu Icons */\r\nimport Account from './assets/side-menu/Account.svg'\r\nimport Competition from './assets/side-menu/Competition.svg'\r\nimport Feedback from './assets/side-menu/Feedback.svg'\r\nimport Help from './assets/side-menu/Help.svg'\r\nimport Information from './assets/side-menu/Information.svg'\r\nimport Learn from './assets/side-menu/Learn.svg'\r\nimport LogOut from './assets/side-menu/Log Out.svg'\r\nimport Profile from './assets/side-menu/Profile.svg'\r\nimport Watchlist from './assets/side-menu/Watchlist.svg'\r\nimport Bank_Link from './assets/bank-link-icon.svg'\r\n\r\nimport YouTubeLogo from './assets/@iconify/youtube-icon'\r\nimport SpotifyLogo from './assets/@iconify/spotify-icon'\r\n\r\nimport TwitterLogo from './assets/@iconify/twitter'\r\n\r\nimport LinkedInLogo from './assets/@iconify/linkedin-icon'\r\n\r\nimport SubstackLogo from './assets/@iconify/substack'\r\n\r\nimport React, {Component} from 'react'\r\nimport {SvgExpo} from './components/SvgExpo'\r\nimport {SvgProps} from 'react-native-svg'\r\n\r\nexport const sideMenu = {\r\n    Account,\r\n    Competition,\r\n    Feedback,\r\n    Information,\r\n    Help,\r\n    Learn,\r\n    LogOut,\r\n    Profile,\r\n    Watchlist,\r\n    Bank_Link,\r\n    BookmarkActive: _BookmarkActive,\r\n    BookmarkInactive: _BookmarkInactive,\r\n    BookmarkActiveBlue: _BookmarkActiveBlue\r\n}\r\n\r\nfunction makeExpoSvg(Svg: React.FC<SvgProps>) {\r\n    return (props: SvgProps & { onReady?: (parent: any) => void }) => <SvgExpo {...props}><Svg/></SvgExpo>\r\n}\r\n\r\nexport const AppTitle = makeExpoSvg(_AppTitle)\r\nexport const SplashWelcome = makeExpoSvg(_SplashWelcome)\r\n\r\nexport const ClimbingMountain = makeExpoSvg(_ClimbingMountain)\r\nexport const Debate = makeExpoSvg(_Debate)\r\nexport const Studying = makeExpoSvg(_Studying)\r\nexport const Analyze = makeExpoSvg(_Analyze);\r\nexport const Bank = makeExpoSvg(_Bank);\r\nexport const IBKR = makeExpoSvg(_IBKR);\r\nexport const RobinhoodLogo = makeExpoSvg(_RobinhoodLogo);\r\nexport const RobinhoodLogoLong = makeExpoSvg(_RobinhoodLogoLong);\r\n//export const Bank_Link = makeExpoSvg(_Bank_Link);\r\n\r\nexport const IconBg = makeExpoSvg(_IconBg)\r\nexport const IconNoBg = makeExpoSvg(_IconNoBg)\r\nexport const PlusIcon = makeExpoSvg(_PlusIcon)\r\nexport const Retweet = makeExpoSvg(_Retweet);\r\n\r\n\r\n// IconBg,\r\n// IconNoBg,\r\n// MenuIcon,\r\n// PlusIcon,\r\nexport const UpvoteIcon = makeExpoSvg(_UpvoteIcon);\r\nexport const CommentIcon = makeExpoSvg(_CommentIcon);\r\nexport const SendIcon = makeExpoSvg(_SendIcon);\r\nexport const InfoIcon = makeExpoSvg(Information);\r\nexport const BookmarkActive = makeExpoSvg(_BookmarkActive);\r\nexport const BookmarkActiveBlue = makeExpoSvg(_BookmarkActiveBlue);\r\nexport const PremiumStar = makeExpoSvg(_PremiumStar);\r\nexport const ErrorIcon = makeExpoSvg(_ErrorIcon);\r\n\r\nexport const EllipsesIcon = makeExpoSvg(_EllipsesIcon);\r\n\r\nexport {Logo, LogoNoBg};\r\n\r\n\r\nexport const rnui = {\r\n    chevronDown: require('./assets/rnui/chevronDown.png'),\r\n    add: require('./assets/rnui/add.png'),\r\n    plus: require('./assets/rnui/plus.png')\r\n}\r\nexport type NavIconKeys = \"Portfolio\" | \"Search\" | \"Feed\" | \"Notification\"; //| \"Bookmark\";\r\n\r\nexport const NavIconTypeOverride: Partial<Record<NavIconKeys, any>> = {\r\n    Notification: {\r\n        no: {\r\n            active: require('./assets/nav-bar/notification-active.png'),\r\n            inactive: require('./assets/nav-bar/notification.png'),\r\n        },\r\n        has: {\r\n            active: require('./assets/nav-bar/has-notification-active.png'),\r\n            inactive: require('./assets/nav-bar/has-notification.png')\r\n        }\r\n    }\r\n}\r\n\r\nexport const navIcons: Record<NavIconKeys, { active: number, inactive: number }> = {\r\n    \"Portfolio\": {\r\n        active: require(\"./assets/nav-bar/portfolio-active.png\"),\r\n        inactive: require(\"./assets/nav-bar/portfolio.png\")\r\n    },\r\n    \"Feed\": {\r\n        active: require(\"./assets/nav-bar/feed-active.png\"),\r\n        inactive: require(\"./assets/nav-bar/feed.png\")\r\n    },\r\n    \"Search\": {\r\n        active: require(\"./assets/nav-bar/search-active.png\"),\r\n        inactive: require(\"./assets/nav-bar/search.png\")\r\n    },\r\n    // \"Bookmark\": {\r\n    //     active: require(\"./assets/nav-bar/bookmark-active.png\"),\r\n    //     inactive: require(\"./assets/nav-bar/bookmark.png\")\r\n    // },\r\n    \"Notification\": {\r\n        active: require(\"./assets/nav-bar/notification-active.png\"),\r\n        inactive: require(\"./assets/nav-bar/notification.png\")\r\n    },\r\n}\r\n\r\nexport const BookmarkIcons = {\r\n    active: require(\"./assets/nav-bar/bookmark-active.png\"),\r\n    inactive: require(\"./assets/nav-bar/bookmark.png\")\r\n}\r\n\r\n\r\nexport const topBarIcons = {\r\n    menu: require('./assets/nav-bar/menu.png')\r\n}\r\n\r\nexport const social = {\r\n    TwitterLogo,\r\n    LinkedInLogo,\r\n    YouTubeLogo,\r\n    SubstackLogo,\r\n    SpotifyLogo,\r\n}\r\n\r\n\r\nexport const postBg = require(\"./assets/post-feed/flatgrad.png\");","const tintColorLight = '#2f95dc';\r\nconst tintColorDark = '#fff';\r\n\r\nexport default {\r\n  light: {\r\n    text: '#000',\r\n    background: '#fff',\r\n    tint: tintColorLight,\r\n    tabIconDefault: '#ccc',\r\n    tabIconSelected: tintColorLight,\r\n  },\r\n  dark: {\r\n    text: '#fff',\r\n    background: '#000',\r\n    tint: tintColorDark,\r\n    tabIconDefault: '#ccc',\r\n    tabIconSelected: tintColorDark,\r\n  },\r\n};\r\n\r\nexport const AppColors  = {\r\n  primary : \"#11146F\",\r\n  secondary:\"#35A265\",\r\n  background :\"#F7f8f8\"\r\n}\r\n\r\n\r\n","import { FlexStyle, TextStyle, ViewStyle } from \"react-native\";\r\nimport { AppColors } from \"./constants/Colors\";\r\n\r\nexport const flex = { flex: 1 } as ViewStyle\r\nexport const row: ViewStyle = { flexDirection: \"row\" }\r\nexport const shadow: ViewStyle = {\r\n    elevation: 4,\r\n    shadowOffset: { height: 2, width: 2 },\r\n    shadowColor: \"black\",\r\n    shadowOpacity: 0.125,\r\n    shadowRadius: 0.25,\r\n}\r\n\r\nexport const noMargin = {\r\n    marginTop: 0,\r\n    marginRight: 0,\r\n    marginBottom: 0,\r\n    marginLeft: 0,\r\n}\r\n\r\nexport function rounded(size: number) {\r\n    return {\r\n        height: size,\r\n        width: size,\r\n        borderRadius: size / 2\r\n    }\r\n}\r\n\r\nexport const fonts = {\r\n    xSmall: 12,\r\n    small: 16,\r\n    medium: 20,\r\n    large: 24,\r\n    xLarge: 32\r\n}\r\n\r\nexport function font(size: keyof typeof fonts, color: string = \"black\", isBold: boolean = false) {\r\n    return {\r\n        fontSize: fonts[size],\r\n        fontWeight: isBold ? \"bold\" : undefined,\r\n        color: color\r\n    } as TextStyle\r\n}\r\n\r\n\r\nexport const sizes = {\r\n    rem0_5: 8,\r\n    rem1: 16,\r\n    rem1_5: 24,\r\n    rem2: 32,\r\n    rem4: 64,\r\n    rem6: 96,\r\n    rem7: 112,\r\n    rem8: 128,\r\n    rem9: 144,\r\n    rem10: 160,\r\n    rem12: 192,\r\n    rem16: 256,\r\n    borderRadius: 2\r\n}\r\n\r\n\r\n\r\nexport const paddView = [flex, { padding: sizes.rem1, backgroundColor: AppColors.background }]\r\nexport const paddViewWhite = [...paddView, { backgroundColor: \"white\" }]\r\n\r\nexport const elevated =\r\n{\r\n    marginHorizontal: 2,\r\n    paddingVertical: 8,\r\n    backgroundColor: \"white\",\r\n    borderColor: \"#ccc\",\r\n    borderWidth: 1,\r\n    borderRadius: 4,\r\n    marginBottom: 16,\r\n    ...shadow\r\n}\r\n\r\n\r\nexport const chartColors = [\r\n    '#2dadf4',\r\n    '#f5523b',\r\n    '#66a1fa',\r\n    '#ff4a6b',\r\n    '#9891f4',\r\n    '#f95399',\r\n    '#c37de1',\r\n    '#e567c1']\r\n\r\n\r\nexport const social = {\r\n    substackColor: '#ff7731'\r\n}\r\n\r\nexport const bannerText = {\r\n    textAlign: \"center\", margin: sizes.rem2, fontSize: fonts.large, lineHeight: fonts.large * 1.5,\r\n} as TextStyle\r\nexport const thinBannerText = [bannerText, {\r\n    marginHorizontal: 0, marginVertical: sizes.rem0_5\r\n} as TextStyle]\r\n\r\n\r\n\r\nexport const textInputWiz = {\r\n    marginVertical: sizes.rem0_5\r\n} as ViewStyle","import { getActionFromState, getStateFromPath, LinkingContext, NavigationContainerRefContext, useLinkTo } from \"@react-navigation/native\";\r\nimport { To } from \"@react-navigation/native/lib/typescript/src/useLinkTo\";\r\nimport { IndexPath } from \"@ui-kitten/components\";\r\nimport React from \"react\";\r\nimport { useCallback, useEffect, useLayoutEffect, useMemo, useRef, useState } from \"react\";\r\nimport { Animated, Keyboard, TextProps, ViewProps } from \"react-native\";\r\nimport { PickerProps } from \"../components/Picker\";\r\n\r\nimport { bannerText } from \"../style\";\r\n\r\n\r\nexport interface IEntity<T> {\r\n    data: Readonly<T>,\r\n    update(updates: Partial<T>): void,\r\n    hasChanged: boolean,\r\n    resetData(newData: T): void\r\n}\r\n\r\n\r\nconst ensureIterable = (value: any): value is Iterable<any> => {\r\n    return Symbol.iterator in Object(value);\r\n}\r\n\r\n\r\nexport const useOpacityAnim = () => {\r\n    const opacityAnim = useRef(new Animated.Value(0)).current\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n    return useMemo(() => ({\r\n        opacityAnim,\r\n        BannerText: (props: Omit<TextProps, \"style\">) => {\r\n            return <Animated.Text\r\n                style={[bannerText, { opacity: opacityAnim }]}\r\n                {...props}\r\n            />\r\n        },\r\n        AppearView: (props: Animated.AnimatedProps<ViewProps>) => {\r\n            const styleProp = [{ opacity: opacityAnim } as Animated.AnimatedProps<ViewProps>[\"style\"]]\r\n            if (props.style) {\r\n                if (ensureIterable(props.style))\r\n                    styleProp.unshift(...props.style as any)\r\n                else\r\n                    styleProp.unshift(props.style)\r\n            }\r\n\r\n            return <Animated.View {...props} style={[styleProp]} />\r\n        }\r\n    }), [opacityAnim])\r\n}\r\n\r\nexport function useReadonlyEntity<T>(seedValue: T): IEntity<T> {\r\n    const [data, setData] = useState<Readonly<T>>(seedValue)\r\n    const [hasChanged, setHasChanged] = useState(false);\r\n    return {\r\n        data,\r\n        hasChanged,\r\n        resetData: useCallback(function (d) {\r\n            setHasChanged(false);\r\n            setData(d);\r\n        }, []),\r\n        update: useCallback((updates: Partial<T>) => {\r\n            setHasChanged(true);\r\n            setData((_entity) => ({\r\n                ..._entity,\r\n                ...updates\r\n            }))\r\n        }, [])\r\n    }\r\n}\r\n\r\ntype EnsureTypeFrom<T, U extends keyof T, S> = T[U] extends (S) ? (((v: S) => S) | undefined | null) : (v: S) => T[U]\r\ntype EnsureTypeTo<T, U extends keyof T, S> = T[U] extends (S) ? (((v: S) => S) | undefined | null) : (v: T[U]) => S\r\n\r\ntype ConvertType<T, U extends keyof T, S> = {\r\n    toType: EnsureTypeTo<T, U, S>\r\n    fromType: EnsureTypeFrom<T, U, S>\r\n}\r\n\r\ntype EnsureConverter<T, U extends keyof T, S> = T[U] extends (S) ? (ConvertType<T, U, S> | undefined | null) : ConvertType<T, U, S>\r\n\r\nexport function bindTextInput<T, U extends keyof T>(entity: IEntity<T>, key: U, converter: EnsureConverter<T, U, string | undefined>, onChangeText?: (text: string) => void) {\r\n    return bindTextInputBase(entity, key, converter, {\r\n        valueKey: \"value\",\r\n        onChangeTextKey: \"onChangeText\"\r\n    }, onChangeText)\r\n}\r\n\r\nexport function bindTextInputBase<T, U extends keyof T>(entity: IEntity<T>, key: U, converter: EnsureConverter<T, U, string | undefined>, bindKeys: { valueKey?: string, onChangeTextKey: string }, onChangeText?: (text: string) => void) {\r\n    const output = {\r\n        [bindKeys.onChangeTextKey]: (v: string) => {\r\n            const update: Partial<T> = {};\r\n            entity.update({\r\n                [key]: converter?.fromType ? converter.fromType(v) : v\r\n            } as any)\r\n            if (onChangeText) {\r\n                onChangeText(v);\r\n            }\r\n        }\r\n    };\r\n    if (bindKeys.valueKey)\r\n        output[bindKeys.valueKey] = converter?.toType ? converter.toType(entity.data[key] as any) : (entity.data[key] as any)\r\n    return output;\r\n}\r\n\r\nexport function bindPicker<T, U extends keyof T>(entity: IEntity<T>, key: U, converter: EnsureConverter<T, U, IndexPath | undefined>, onSelect?: (item: IndexPath) => void) {\r\n\r\n    return {\r\n        //value: converter?.toType ? converter.toType(entity.data[key] as any) : (entity.data[key] as any),\r\n        onSelect: (item) => {\r\n            const update: Partial<T> = {};\r\n            //console.log(item);\r\n            entity.update({\r\n                [key]: converter?.fromType ? converter.fromType(item) : item\r\n            } as any)\r\n\r\n            if (onSelect)\r\n                onSelect(item)\r\n        },\r\n        // onChangeText: (v: string) => {\r\n        //     const update: Partial<T> = {};\r\n        //     entity.update({\r\n        //         [key]: converter?.fromString ? converter.fromString(v) : v\r\n        //     } as any)\r\n        //     if (onChangeText) {\r\n        //         onChangeText(v);\r\n        //     }\r\n        // }\r\n    } as Partial<PickerProps<false>>\r\n}\r\n// export function bindMultiPicker<T, U extends keyof T>(entity: IEntity<T>, key: U, converter: EnsureConverter<T, U, (number | string)[] | undefined>, onChange?: (item: (string | number)[]) => void) {\r\n//     return {\r\n//         value: converter?.toType ? converter.toType(entity.data[key] as any) : (entity.data[key] as any),\r\n//         onChange: (item) => {\r\n//             //const update: Partial<T> = {};\r\n//             //console.log(item);\r\n//             entity.update({\r\n//                 [key]: converter?.fromType ? converter.fromType(item) : item\r\n//             } as any)\r\n\r\n//             if (onChange)\r\n//                 onChange(item)\r\n//         },\r\n//         // onChangeText: (v: string) => {\r\n//         //     const update: Partial<T> = {};\r\n//         //     entity.update({\r\n//         //         [key]: converter?.fromString ? converter.fromString(v) : v\r\n//         //     } as any)\r\n//         // if (onChangeText) {\r\n//         //     onChangeText(v);\r\n//         // }\r\n//         //  }\r\n//     } as Partial<PickerProps<true>>\r\n// }\r\n\r\n// export function bindSwitch<T, U extends keyof T>(entity: IEntity<T>, key: U, converter: EnsureConverter<T, U, boolean | undefined>, invert?: boolean, onChange?: (item: boolean) => void) {\r\n//     let calcedValue = converter?.toType ? converter.toType(entity.data[key] as any) : (entity.data[key] as any);\r\n//     if (invert)\r\n//         calcedValue = !calcedValue;\r\n\r\n//     return {\r\n//         value: calcedValue,\r\n//         onValueChange: (item) => {\r\n//             let itemCalced = converter?.fromType ? converter.fromType(item) : item;\r\n//             if (invert)\r\n//                 itemCalced = !itemCalced;\r\n\r\n//             const update: Partial<T> = {};\r\n//             entity.update({\r\n//                 [key]: itemCalced\r\n//             } as any)\r\n\r\n//             if (onChange)\r\n//                 onChange(item)\r\n//         },\r\n\r\n//     } as SwitchProps\r\n// }\r\n\r\n\r\nexport function useIsKeyboardVisible() {\r\n    const [isKeyboardVisible, setIsKeyboardVisible] = useState(false);\r\n\r\n    useLayoutEffect(() => {\r\n        const showSubscription = Keyboard.addListener(\"keyboardDidShow\", () => {\r\n            setIsKeyboardVisible(true);\r\n        });\r\n        const hideSubscription = Keyboard.addListener(\"keyboardDidHide\", () => {\r\n            setIsKeyboardVisible(false)\r\n        });\r\n\r\n        return () => {\r\n            showSubscription.remove();\r\n            hideSubscription.remove();\r\n        };\r\n    }, []);\r\n    return {\r\n        isKeyboardVisible\r\n    }\r\n}\r\n\r\nexport default function useLinkToExt<\r\n    ParamList extends ReactNavigation.RootParamList\r\n>() {\r\n    const navigation = React.useContext(NavigationContainerRefContext);\r\n    const linking = React.useContext(LinkingContext);\r\n    const _linkTo = useLinkTo();\r\n    const linkTo = useCallback((to: To<ParamList>, replace?: boolean) => {\r\n\r\n        if (navigation === undefined) {\r\n            throw new Error(\r\n                \"Couldn't find a navigation object. Is your component inside NavigationContainer?\"\r\n            );\r\n        }\r\n\r\n        if (typeof to !== 'string') {\r\n            // @ts-expect-error: This is fine\r\n            navigation.navigate(to.screen, to.params);\r\n            return;\r\n        }\r\n\r\n        if (!to.startsWith('/')) {\r\n            throw new Error(`The path must start with '/' (${to}).`);\r\n        }\r\n\r\n        const { options } = linking;\r\n\r\n        const state = options?.getStateFromPath\r\n            ? options.getStateFromPath(to, options.config)\r\n            : getStateFromPath(to, options?.config);\r\n\r\n        if (state) {\r\n            const action = getActionFromState(state, options?.config);\r\n            if (action !== undefined) {\r\n                navigation.dispatch(action);\r\n            } else {\r\n                navigation.reset(state);\r\n            }\r\n        } else {\r\n            throw new Error('Failed to parse the path to a navigation state.');\r\n        }\r\n\r\n    }, [linking, navigation])\r\n\r\n\r\n    return linkTo;\r\n}\r\n","import React, { ReactElement, useLayoutEffect, useState } from \"react\";\r\nimport { flex, fonts, row, sizes } from \"../style\";\r\nimport { AltPrimaryButton, PrimaryButton } from \"./PrimaryButton\";\r\nimport { Text } from '@ui-kitten/components'\r\nimport { View } from 'react-native'\r\nexport function LabeledField(props: { compact?: boolean, children?: ReactElement, label?: string, leftElement?: (props: { width: number, height: number }) => ReactElement }) {\r\n\r\n    const sz = props.compact ? sizes.rem1 : sizes.rem2\r\n    return <View style={[row, { alignItems: \"center\", marginBottom: sz }]}>\r\n        {props.leftElement && props.leftElement({ height: sz, width: sz })}\r\n        <Text style={[flex, { fontSize: props.compact ? fonts.small : fonts.medium }]}>{props.label}</Text>\r\n        {props.children}\r\n    </View>\r\n\r\n}\r\n\r\n","import React from 'react'\r\n//import { ButtonProps } from \"react-native-ui-lib\";\r\nimport { Button, ButtonProps } from '@ui-kitten/components'\r\nimport { AppColors } from '../constants/Colors'\r\n//import Button from \"react-native-ui-lib/button\";\r\n\r\nexport function PrimaryButton(props: ButtonProps) {\r\n    return <Button\r\n        //backgroundColor={Colors.primary} \r\n        {...props} />\r\n}\r\n\r\nexport function AltPrimaryButton(props: ButtonProps) {\r\n    return <Button\r\n        //backgroundColor={Colors.white} \r\n        //color={AppColors.primary}\r\n        // outlineColor={AppColors.primary}\r\n        {...props} />\r\n}","import { Button, ButtonProps } from '@ui-kitten/components';\r\nimport React from 'react'\r\n//import { ButtonProps } from \"react-native\";\r\n//import Button from \"react-native-ui-lib/button\";\r\n//import { Colors } from 'react-native-ui-lib'\r\nimport { PressableButton } from './PressableButton';\r\n\r\n\r\nexport function SecondaryButton(props: ButtonProps) {\r\n    return <Button\r\n        status={'success'} {...props} />\r\n}\r\nexport function AltSecondaryButton(props: ButtonProps) {\r\n    return <Button status={'success'} {...props} />\r\n}","import React, { ReactElement, ReactNode, useLayoutEffect, useState } from \"react\";\r\nimport { Button, ButtonProps, Text } from \"@ui-kitten/components\";\r\nimport { flex, fonts, row, sizes } from \"../style\";\r\nimport { LabeledField } from \"./LabeledField\";\r\nimport { AltPrimaryButton, PrimaryButton } from \"./PrimaryButton\";\r\nimport { AltSecondaryButton, SecondaryButton } from \"./SecondaryButton\";\r\n//import { PlaidLink, PlaidLinkComponentProps } from 'react-native-plaid-link-sdk'\r\n\r\nexport function ButtonField(props: {\r\n    compact?: boolean, secondary?: boolean, label?: string, activeText?: string, disabledText?: string, inactiveText?: string, isActive?: boolean, leftElement?: (props: { width: number, height: number }) => ReactElement\r\n}\r\n    & Pick<ButtonProps, \"onPress\" | \"disabled\">) {\r\n    const [_isActive, setIsActive] = useState(false)\r\n    const buttonLabel =\r\n        (props.disabled && props.disabledText) ?\r\n            props.disabledText :\r\n            (_isActive ?\r\n                (props.activeText || \"Active\") :\r\n                (props.inactiveText || \"Inactive\"))\r\n\r\n    useLayoutEffect(() => {\r\n        setIsActive(props.isActive || false)\r\n    }, [props.isActive])\r\n    const bProps: ButtonProps = {\r\n        style:\r\n        {\r\n            width: sizes.rem9,\r\n            height: sizes.rem2,\r\n            padding: 0,\r\n\r\n        },\r\n        // labelStyle:\r\n        // {\r\n        //     height: sizes.rem1_5,\r\n        //     top: 0\r\n        // },\r\n        children: buttonLabel,\r\n        onPress(ev) {\r\n            setIsActive((a) => props.isActive === undefined ? !a : props.isActive)\r\n            if (props.onPress) {\r\n                props.onPress(ev)\r\n            }\r\n        }\r\n    };\r\n    return <LabeledField compact={props.compact} label={props.label} leftElement={props.leftElement}>\r\n        {_isActive ?\r\n            (!props.secondary ? <PrimaryButton {...bProps} /> : <SecondaryButton {...bProps} />) :\r\n            (!props.secondary ? <AltPrimaryButton {...bProps} /> : <AltSecondaryButton {...bProps} />)}\r\n    </LabeledField>\r\n\r\n}\r\nexport function PlaidButtonField(props: {\r\n    plaidProps: {},// Omit<PlaidLinkComponentProps, \"children\">,\r\n    compact?: boolean, secondary?: boolean, label?: string, activeText?: string, disabledText?: string, inactiveText?: string, isActive?: boolean, leftElement?: (props: { width: number, height: number }) => ReactElement\r\n}\r\n    & Pick<ButtonProps, \"onPress\" | \"disabled\">) {\r\n    const [_isActive, setIsActive] = useState(false)\r\n    const buttonLabel =\r\n        (props.disabled && props.disabledText) ?\r\n            props.disabledText :\r\n            (_isActive ?\r\n                (props.activeText || \"Active\") :\r\n                (props.inactiveText || \"Inactive\"))\r\n\r\n    useLayoutEffect(() => {\r\n        setIsActive(props.isActive || false)\r\n    }, [props.isActive])\r\n    const bProps: ButtonProps = {\r\n        style:\r\n        {\r\n            width: sizes.rem9,\r\n            height: sizes.rem2,\r\n            padding: 0,\r\n        },\r\n        // labelStyle:\r\n        // {\r\n        //     height: sizes.rem1_5,\r\n        //     top: 0\r\n\r\n        // },\r\n        children: buttonLabel,\r\n        onPress(ev) {\r\n            setIsActive((a) => props.isActive === undefined ? !a : props.isActive)\r\n            if (props.onPress) {\r\n                props.onPress(ev)\r\n            }\r\n        }\r\n    };\r\n    return <LabeledField compact={props.compact} label={props.label} leftElement={props.leftElement}>\r\n        <Text>BROKEN</Text>\r\n        {/* <PlaidLink {...props.plaidProps}>\r\n        <View pointerEvents=\"none\">\r\n            {_isActive ?\r\n                (!props.secondary ? <PrimaryButton {...bProps} /> : <SecondaryButton {...bProps} />) :\r\n                (!props.secondary ? <AltPrimaryButton {...bProps} /> : <AltSecondaryButton {...bProps} />)}\r\n        </View>\r\n    </PlaidLink> */}\r\n    </LabeledField >\r\n\r\n}\r\n\r\n\r\n\r\n","import React, { MutableRefObject, RefObject, useEffect, useRef, useState } from 'react';\r\nimport { ViewStyle, TextInputProps } from 'react-native';\r\n//import { Colors } from 'react-native-ui-lib';\r\nimport { Text, Input, InputProps } from '@ui-kitten/components'\r\n\r\n\r\n// interface IRnField {\r\n//     focus(): void,\r\n//     clear(): void\r\n// }\r\nexport interface ITextField {\r\n    field: RefObject<Input>,\r\n    errorMessage?: string\r\n    validate: () => boolean\r\n}\r\nexport function TextField(props: {\r\n    label?: string,\r\n    textInputRef?: MutableRefObject<ITextField | null>\r\n    disabled?: boolean\r\n    validate?: (value: string | undefined) => boolean,\r\n    validateOnChange?: boolean\r\n    errorMessage?: string,\r\n    //defaulted this to false... which is the right way to to a positive assetion...  \r\n    spellCheck?: boolean,\r\n    //defaulted this to false... which is the right way to to a positive assetion...  \r\n    autoCorrect?: boolean,\r\n    markRequired?: boolean\r\n    //caption?: InputProps[\"caption\"],\r\n\r\n} & TextInputProps & Pick<InputProps, \"caption\" | \"accessoryLeft\" | \"accessoryRight\">) {\r\n    const rnuRef = useRef<Input>(null);\r\n    const [caption, setCaption] = useState<InputProps[\"caption\"]>();\r\n    const [valueTracker, setValueTracker] = useState<string>();\r\n\r\n    useEffect(() => {\r\n        setCaption(props.caption);\r\n    }, [props.caption])\r\n    useEffect(() => {\r\n        setValueTracker(props.value);\r\n    }, [props.value])\r\n    const { validate } = props;\r\n    if (props.textInputRef) {\r\n        props.textInputRef.current = {\r\n            errorMessage: /* props.errorMessage instanceof Array ? props.errorMessage.join(\",\") :*/ props.errorMessage,\r\n            validate: () => validate ? validate(valueTracker) : true,\r\n            field: rnuRef\r\n        }\r\n    }\r\n\r\n    //const tt = { spellCheck: true, autoCorrect:false } as TextInputProps\r\n\r\n    return <Input\r\n        ref={rnuRef}\r\n\r\n        numberOfLines={props.numberOfLines}\r\n        spellCheck={props.spellCheck || false}\r\n        autoCorrect={props.autoCorrect || false}\r\n        editable={!props.disabled}\r\n        //disabledColor={props.disabledColor || Colors.grey20}\r\n        //placeholder=\"Enter Email...\"\r\n        //validateOnChange={props.validateOnChange}\r\n        caption={caption}\r\n        accessoryLeft={props.accessoryLeft}\r\n        accessoryRight={props.accessoryRight}\r\n        //validate={props.validate}\r\n        //errorMessage={props.errorMessage}\r\n        value={props.value}\r\n        //markRequired={props.markRequired}\r\n        //ref={props.textInputRef?.current?.field}\r\n        onSubmitEditing={props.onSubmitEditing}\r\n        label={(textProps) => {\r\n            return props.label ? <Text {...textProps}>{props.label}{<Text {...textProps} style={[\r\n                textProps?.style,\r\n                {\r\n                    color: \"red\"\r\n                }]}  >{props.markRequired ? \"*\" : \"\"}</Text>}</Text> :\r\n                <Text></Text>\r\n        }}\r\n        onChangeText={(t) => {\r\n            setValueTracker(t);\r\n            if (validate && props.validateOnChange) {\r\n                let errorMessage: string | undefined = undefined;\r\n                let newCaption: InputProps[\"caption\"] = undefined;\r\n                if (!validate(t)) {\r\n                    errorMessage = props.errorMessage;\r\n                    newCaption = () => <Text category={\"c1\"} style={{ color: \"red\" }}>{errorMessage}</Text>;\r\n                }\r\n\r\n                if (props.textInputRef?.current) {\r\n                    props.textInputRef.current.errorMessage = errorMessage;\r\n                    //props.textInputRef.current.validate = () => validate(t);\r\n                }\r\n                setCaption(() => newCaption);\r\n            }\r\n\r\n            if (props.onChangeText)\r\n                props.onChangeText(t);\r\n        }}\r\n        secureTextEntry={props.secureTextEntry}\r\n        returnKeyType={props.returnKeyType}\r\n        placeholder={props.placeholder}\r\n        //error={props.error}\r\n        style={props.style}\r\n    //hideUnderline={props.disabled}\r\n    //containerStyle={props.containerStyle}\r\n    />\r\n}\r\n","export function isValidEmail(email: string | undefined) {\r\n    return /^[-!#$%&'*+\\/0-9=?A-Z^_a-z`{|}~](\\.?[-!#$%&'*+\\/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-*\\.?[a-zA-Z0-9])*\\.[a-zA-Z](-?[a-zA-Z0-9])+$/.test(email || \"\")\r\n}\r\n\r\nexport function isRequired(value: string | undefined) {\r\n    return (value || \"\").replace(/ /gi, '').length > 0;\r\n}\r\n\r\nexport function isAlphaNumeric(value: string | undefined) {\r\n    return /^[a-z0-9\\_]+$/i.test(value||\"\")\r\n}","import React, { ReactNode } from \"react\";\r\nimport { View, ScrollView, ViewProps, ViewComponent, ViewStyle, StyleProp } from \"react-native\";\r\nimport { AppColors } from \"../constants/Colors\";\r\n\r\nimport { flex } from \"../style\";\r\nimport { useIsKeyboardVisible } from \"../utils/hooks\";\r\nimport { PrimaryButton } from \"./PrimaryButton\";\r\nimport { SecondaryButton } from \"./SecondaryButton\";\r\n\r\nexport function ScrollWithButtons(props: { children?: ReactNode, buttons?: ButtonPanelProps, fillHeight?: boolean }) {\r\n    const { isKeyboardVisible } = useIsKeyboardVisible();\r\n    return <View style={[flex,]} >\r\n        <View style={[flex, { backgroundColor: AppColors.background }]} >\r\n            <ScrollView nestedScrollEnabled contentContainerStyle={props.fillHeight ? { maxHeight: \"100%\", height: \"100%\"} : {}}>\r\n                {/* This is here to force layout of the content. Seems like a but with enxted scrollview content */}\r\n                {!isKeyboardVisible && <View style={{ height: 0 }} ></View>}\r\n                {props.children}\r\n            </ScrollView>\r\n        </View>\r\n        {props.buttons && <ButtonPanel {...props.buttons} />}\r\n    </View>\r\n}\r\n\r\nexport type ButtonPanelProps = {\r\n    locked?: boolean,\r\n    left?: {\r\n        text: string,\r\n        onPress: () => void\r\n    },\r\n    right: {\r\n        text: string,\r\n        onPress: () => void\r\n    }\r\n    viewProps?: StyleProp<ViewStyle> \r\n}\r\nexport function ButtonPanel(props: ButtonPanelProps) {\r\n    return <View style={ props.viewProps && Object.keys(props.viewProps).length ? props.viewProps : { borderTopColor: \"#ccc\", borderTopWidth: 1, flexDirection: \"row\", \r\n    paddingTop: 8,\r\n     paddingBottom: 8, \r\n     \r\n     justifyContent: \"space-evenly\", zIndex: 1000 }}>\r\n        {props.left && <SecondaryButton style={{ width: \"48%\" }} onPress={props.left.onPress} disabled={props.locked} >{props.left.text}</SecondaryButton>}\r\n        <PrimaryButton style={{ width: props.left ? \"48%\" : \"96%\" }} onPress={props.right.onPress} disabled={props.locked} >{props.right.text}</PrimaryButton>\r\n    </View>\r\n}\r\n","import React from 'react';\r\nimport { Alert } from \"react-native\";\r\nimport numeral, {} from 'numeral'\r\n//import { AmiraError } from '../AmiraError';\r\n\r\nexport type AwaitedReturn<T extends (...args: any[]) => Promise<any>> = Awaited<ReturnType<T>>\r\n\r\nexport function TBI() {\r\n    return console.warn(\"Method has not been implemented\");\r\n}\r\n\r\nexport function randomPrice() {\r\n    return Math.round(Math.random() * 100 * 100) / 100;\r\n}\r\n\r\n\r\nexport function random(maxExclusive: number) {\r\n    return Math.floor(Math.random() * maxExclusive);\r\n}\r\n\r\n\r\nexport function randomArray(maxExclusive: number) {\r\n    return Array.from(new Array(random(maxExclusive) + 1))\r\n}\r\nexport function randomName() {\r\n    return [\"JoshL\", \"LJames\", \"JodyH\"][random(3)]\r\n}\r\n\r\nexport function randomText() {\r\n    const texts = [\"gaping\",\r\n        \"woebegone\",\r\n        \"sticky\",\r\n        \"friendly\",\r\n        \"fine\",\r\n        \"free\",\r\n        \"accessible\",\r\n        \"subsequent\",\r\n        \"labored\",\r\n        \"tan\",\r\n        \"curious\",\r\n        \"brash\",\r\n        \"cautious\",\r\n        \"sassy\",\r\n        \"mushy\",\r\n        \"foreign\",\r\n        \"rightful\",\r\n        \"bad\",\r\n        \"psychological\",\r\n        \"talented\",\r\n        \"grieving\",\r\n        \"scrawny\",\r\n        \"familiar\",\r\n        \"thoughtless\",\r\n        \"daily\",\r\n        \"ritzy\",\r\n        \"elite\",\r\n        \"cool\",\r\n        \"shrill\",\r\n        \"skinny\",\r\n        \"living\",\r\n        \"opposite\",\r\n        \"right\",\r\n        \"red\",\r\n        \"slippery\",\r\n        \"mammoth\",\r\n        \"great\",\r\n        \"spooky\",\r\n        \"polite\",\r\n        \"spotted\",\r\n        \"educated\",\r\n        \"private\",\r\n        \"six\",\r\n        \"belligerent\",\r\n        \"amuck\",\r\n        \"successful\",\r\n        \"exotic\",\r\n        \"guilty\",\r\n        \"prickly\",\r\n        \"shiny\",\r\n    ]\r\n    return texts[random(texts.length)]\r\n}\r\n\r\nexport function randomDateString(pastDate?: boolean) {\r\n    return new Date(new Date().valueOf() + (pastDate ? -1 : 1) * random(31536000)).toUTCString()\r\n}\r\n\r\n\r\nexport function DEV_ONLY(code: () => void) {\r\n    if (!__DEV__)\r\n        throw new Error(\"DEVELOPMENT CODE IS RUNNING IN PRODUCTION\");\r\n    //throw new AmiraError(-1,\"DEVELOPMENT CODE IS RUNNING IN PRODUCTION\");\r\n    else\r\n        code();\r\n}\r\n\r\ntype All<T> = {\r\n    [K in keyof T]-?: T[K]\r\n}\r\n\r\nexport type Undefinable<T> = {\r\n    [K in keyof All<T>]: (T[K] | undefined)\r\n}\r\n\r\nexport function badDate() {\r\n    return toAmiraDate(new Date())\r\n}\r\n\r\n//const pctFormatter = numeral()\r\n\r\n//NumberFormat('en-US', {\r\n  //  style: 'percent',\r\n//})\r\n/**** All of these should be moved to a formatter file */\r\n\r\nexport function toAmiraDate(date: Date) {\r\n    return date.toISOString().replace(/Z/gi, '');\r\n}\r\nexport function fromAmiraDate(date: string) {\r\n    return new Date(date + 'Z');\r\n}\r\n\r\n// const pct2Formatter = NumberFormat('en-US', {\r\n//     style: 'percent',\r\n//     minimumFractionDigits: 2\r\n// })\r\n\r\nexport function toPercent(number: number) {\r\n    return (number === undefined || number === null) ? \"\" : numeral(number).format('0%')\r\n}\r\nexport function toPercent1(number: number) {\r\n    return (number === undefined || number === null) ? \"\" : numeral(number).format('0.0%')\r\n}\r\nexport function toPercent2(number: number) {\r\n    return (number === undefined || number === null) ? \"\" : numeral(number).format('0.00%')\r\n}\r\n// const thousandFormatter = NumberFormat('en-US', {\r\n//     maximumSignificantDigits: 3\r\n// })\r\nexport function toThousands(number: number) {\r\n    return    numeral(number).format('0,0');\r\n}\r\nexport function toNumber1(number: number) {\r\n    return (number === undefined || number === null) ? \"\" : numeral(number).format('0.0')\r\n}\r\nexport function toNumber2(number: number) {\r\n    return (number === undefined || number === null) ? \"\" : numeral(number).format('0.00')\r\n}\r\n// const currencyFormatter = NumberFormat('en-US', {\r\n//     style: 'currency',\r\n//     currency: \"USD\",\r\n// })\r\n\r\nexport function isoToDate(dateString: string) {\r\n    return dateString.split(\"T\")[0];\r\n}\r\nexport function toFormatedDateTime(dateTimeString: string) {\r\n    const m = new Date(dateTimeString).getMonth() + 1;\r\n    const d = new Date(dateTimeString).getDate();\r\n    const y = new Date(dateTimeString).getFullYear() % 100;\r\n    let h = new Date(dateTimeString).getHours();\r\n    let min: string | number = new Date(dateTimeString).getMinutes();\r\n    let ampm = 'am'\r\n    if ( h >= 12 ) {\r\n        ampm = 'pm';\r\n        h = h === 12 ? h : h - 12;\r\n    }\r\n    if ( h === 0 ) {\r\n        h = 12\r\n    }\r\n    if ( min < 10 ) {\r\n        min = String(`0${min}`)\r\n    }\r\n    return `${h}:${min} ${ampm} ${m}/${d}/${y}`\r\n}\r\nexport function toDateMonthYear(dateString: string) {\r\n    const m = (new Date(dateString).toDateString().slice(4,7));\r\n    const y = String((new Date(dateString).getFullYear())).slice(2);\r\n    return `${m}-${y}`;\r\n}\r\nexport function toDateDayMonth(dateString: string) {\r\n    const d = (new Date(dateString).toDateString().slice(8,11));\r\n    const m = (new Date(dateString).toDateString().slice(4,7));\r\n    return `${d} ${m}`;\r\n}\r\nexport function toDollars(number: number) {\r\n    return toDollarsAndCents(number).split(\".\")[0];\r\n}\r\nexport function toDollarsAndCents(number: number | undefined | null) {\r\n    return  (number === undefined || number === null) ? \"\" : numeral(number).format('$0,0.00') //currencyFormatter.format(number);\r\n}\r\n","import { NavigationProp } from \"@react-navigation/native\";\r\nimport { IUserGet } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport { Dispatch, SetStateAction, useState, useEffect } from \"react\";\r\nimport { sizes } from \"../../style\";\r\nimport { IEntity } from \"../../utils/hooks\";\r\n\r\nexport const sideMargin = sizes.rem1_5;\r\n\r\nexport type CreateAccountProps = {\r\n    user: IEntity<IUserGet>,\r\n    toastMessage: (msg: string, delay?: number | undefined) => void\r\n};\r\n\r\n","import React from \"react\";\r\nimport { Pressable, PressableProps, Text, TextProps } from \"react-native\";\r\nimport { AppColors } from \"../constants/Colors\";\r\n//import { Colors, Text, TextProps, TouchableOpacity, TouchableOpacityProps } from 'react-native-ui-lib'\r\n\r\nexport function Link(props: Pick<PressableProps, \"onPress\"> & Pick<TextProps, \"style\" | \"children\">) {\r\n    return <Pressable onPress={props.onPress}>\r\n        <Text style={[{ color: AppColors.primary }, props.style]}>{props.children}</Text>\r\n    </Pressable>\r\n}","import React, { useRef, useEffect, RefObject, useMemo, useState } from \"react\";\r\nimport { Image, View, Animated } from \"react-native\";\r\nimport { CheckBox, Text } from \"@ui-kitten/components\";\r\nimport { ButtonField } from \"../../components/ButtonField\";\r\nimport { TextField, ITextField } from \"../../components/TextField\";\r\nimport { bannerText, flex, sizes, textInputWiz } from \"../../style\";\r\nimport { bindTextInput, IEntity, useReadonlyEntity } from \"../../utils/hooks\";\r\nimport { isRequired, isValidEmail } from \"../../utils/validators\";\r\n\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\";\r\n\r\nimport { TBI } from \"../../utils/misc\";\r\nimport { AppColors } from \"../../constants/Colors\";\r\nimport Auth from '@tradingpost/common/api/entities/static/AuthApi'\r\nimport { useAppUser } from \"../../Authentication\";\r\nimport { useData } from \"../../lds\";\r\nimport { useLinkTo, useNavigation } from \"@react-navigation/native\";\r\nimport { CreateAccountProps, sideMargin } from \"./shared\";\r\nimport { Link } from \"../../components/Link\";\r\n\r\n\r\ntype FieldRefs = {\r\n    first: RefObject<ITextField>,\r\n    last: RefObject<ITextField>,\r\n    email: RefObject<ITextField>,\r\n    username: RefObject<ITextField>,\r\n    pass: RefObject<ITextField>,\r\n    confirm: RefObject<ITextField>\r\n}\r\ntype LoginInfo = { email?: string, password?: string };\r\n\r\nexport function AccountInfoSection(props: CreateAccountProps) {\r\n\r\n\r\n    const\r\n        [lockButtons, setLockButtons] = useState(false),\r\n        { setValue: setLoginResult } = useData(\"loginResult\"),\r\n        loginEntity = useReadonlyEntity<LoginInfo>({}),\r\n        linkTo = useLinkTo<any>(),\r\n        nav = useNavigation(),\r\n        [agreeToTerms, setAgreeToTerms] = useState(false),\r\n        [agreeToPrivacy, setAgrreeToPrivacy] = useState(false),\r\n        refs: FieldRefs = {\r\n            first: useRef<ITextField>(null),\r\n            last: useRef<ITextField>(null),\r\n            email: useRef<ITextField>(null),\r\n            username: useRef<ITextField>(null),\r\n            pass: useRef<ITextField>(null),\r\n            confirm: useRef<ITextField>(null),\r\n        },\r\n        buttonConfig = {\r\n            locked: lockButtons,\r\n            left: ({\r\n                text: \"Cancel\",\r\n                onPress: () => {\r\n                    if (nav.canGoBack()) {\r\n                        nav.goBack()\r\n                    } else {\r\n                        linkTo({\r\n                            screen: \"/login\"\r\n                        });\r\n                    }\r\n                }\r\n            }),\r\n            right: {\r\n                text: \"Create\",\r\n                onPress: async () => {\r\n                    setLockButtons(true);\r\n                    const errors: string[] = [];\r\n                    try {\r\n                        for (const k in refs) {\r\n                            const val = refs[k as keyof typeof refs];\r\n                            if (val.current && !val.current.validate()) {\r\n                                errors.push(val.current.errorMessage || \"\");\r\n                            }\r\n                        }\r\n                        if (!agreeToPrivacy || !agreeToTerms) {\r\n                            errors.push(\"You must agree to terms and privacy policy\");\r\n                        }\r\n\r\n                        if (errors.length) {\r\n                            errors.unshift(\"Please fix the following issues:\");\r\n                            props.toastMessage(errors.join(\"\\r\\n\"));\r\n                            setLockButtons(false);\r\n                        } else if (!false) {  //create new user\r\n                            if (loginEntity.data.email && loginEntity.data.password) {\r\n                                const login = await Auth.createLogin(loginEntity.data.email, loginEntity.data.password);\r\n                                await setLoginResult(login);\r\n                                linkTo('/create/basicinfo')\r\n                            } else {\r\n                                throw new Error(\"Something is very wrong.\" + JSON.stringify(loginEntity.data))\r\n                            }\r\n                            setLockButtons(false);\r\n                        } else { //patch authed user\r\n\r\n                            //await UpdateUserProfile(props.user.data);\r\n                            TBI();\r\n                            props.user.resetData(props.user.data);\r\n                            linkTo('/create/basicinfo')\r\n                        }\r\n                    } catch (ex: any) {\r\n                        if (ex.json) {\r\n                            props.toastMessage(`${ex.json.name}:\\r\\n${ex.json.policy || ex.json.description}`);\r\n                        } else if (typeof ex.message === \"string\") {\r\n                            props.toastMessage(ex.message);\r\n                        } else props.toastMessage(JSON.stringify(ex.message));\r\n                        setLockButtons(false);\r\n                    }\r\n\r\n                }\r\n            }\r\n        }\r\n\r\n    return <ScrollWithButtons\r\n        buttons={buttonConfig}>\r\n        {\r\n            <AccountBasicInfo agreeToPrivacy={agreeToPrivacy} setAgreeToPrivacy={setAgrreeToPrivacy} agreeToTerms={agreeToTerms} setAgreeToTerms={setAgreeToTerms} refs={refs} isAuthed={false} loginEntity={loginEntity} {...props} />\r\n        }\r\n    </ScrollWithButtons>\r\n}\r\n\r\nfunction AccountBasicInfo(props: CreateAccountProps & { refs: FieldRefs, isAuthed: boolean, loginEntity: IEntity<LoginInfo>, agreeToTerms: boolean, setAgreeToTerms: (a: boolean) => void, agreeToPrivacy: boolean, setAgreeToPrivacy: (a: boolean) => void }) {\r\n    const { refs, isAuthed } = props,\r\n        opacityAnim = useRef(new Animated.Value(0)).current,\r\n        { agreeToTerms, setAgreeToTerms, agreeToPrivacy, setAgreeToPrivacy } = props,\r\n        linkTo = useLinkTo<any>();\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n\r\n    return <View>\r\n        <View style={[flex, { margin: sideMargin }]}>\r\n            <Animated.Text\r\n                style={[bannerText, { opacity: opacityAnim }]}>\r\n                Let's start with some login information\r\n            </Animated.Text>\r\n            {/* <Section title={'Personal Information'}>\r\n                <TextField label='Name'\r\n                    validate={isRequired}\r\n                    errorMessage={\"`Name` is required\"}\r\n                    textInputRef={refs.first}\r\n                    validateOnChange placeholder='First Name' returnKeyType=\"none\" {...bindTextInput(props.user, \"first_name\", null)} />\r\n                <TextField\r\n                    label='Last'\r\n                    errorMessage={\"`Last Name` is required\"}\r\n                    textInputRef={refs.last}\r\n                    validate={isRequired}\r\n                    validateOnChange placeholder='Last Name' returnKeyType=\"none\"  {...bindTextInput(props.user, \"last_name\", null)} />\r\n            </Section> */}  \r\n            {/* <Section title={'Login Information'} > */}\r\n            <TextField\r\n                //label='Email'\r\n                style={textInputWiz}\r\n                textInputRef={refs.email}\r\n                errorMessage={\"`Email Address` is invalid\"}\r\n                disabled={isAuthed}\r\n                validate={isValidEmail}\r\n                validateOnChange placeholder='Email Address'\r\n                returnKeyType=\"none\" {...bindTextInput(props.loginEntity, \"email\", null)}\r\n            />\r\n\r\n            {\r\n                isAuthed ?\r\n                    <ButtonField\r\n                        compact\r\n                        isActive\r\n                        label='Password'\r\n                        activeText='Change'\r\n                    />\r\n                    : <>\r\n                        <TextField\r\n                            //label='Password'\r\n                            style={textInputWiz}\r\n                            textInputRef={refs.pass}\r\n                            validate={isRequired}\r\n                            validateOnChange\r\n                            errorMessage={\"`Password` is required.\"}\r\n                            placeholder='Account Password' returnKeyType=\"none\" secureTextEntry\r\n                            {...bindTextInput(props.loginEntity, \"password\", null)} />\r\n                        <TextField\r\n                            //label='Confirm'\r\n                            style={textInputWiz}\r\n                            textInputRef={refs.confirm}\r\n                            placeholder='Confirm Password'\r\n                            returnKeyType=\"none\"\r\n                            errorMessage={\"'Confirm' does not match.\"}\r\n                            validateOnChange\r\n                            validate={(c) => Boolean(c) && c === props.loginEntity.data.password}\r\n                            secureTextEntry\r\n                        />\r\n                        <View\r\n                            style={[textInputWiz, { flexDirection: \"row\" }]}\r\n                        >\r\n                            <CheckBox checked={agreeToTerms} onChange={setAgreeToTerms} style={{marginRight: 10}}/>\r\n                            <Text>Agree To </Text>\r\n                            <Link onPress={() => {\r\n                                linkTo('/create/terms')\r\n                            }} >Terms Of Use</Link>\r\n                        </View>\r\n                        <View\r\n                            style={[textInputWiz, { flexDirection: \"row\" }]}\r\n                        >\r\n                            <CheckBox checked={agreeToPrivacy} onChange={setAgreeToPrivacy} style={{marginRight: 10}} />\r\n                            <Text>Agree To </Text>\r\n                            <Link onPress={() => {\r\n                                linkTo('/create/privacy')\r\n                            }}>Privacy Policy</Link>\r\n                        </View>\r\n                    </>\r\n            }\r\n            {/* </Section> */}\r\n        </View>\r\n    </View>\r\n}\r\n","import React from 'react'\r\nimport { TextStyle, ViewStyle } from 'react-native';\r\nimport { Text } from \"@ui-kitten/components\";\r\nimport { fonts, sizes } from '../style';\r\nimport { AppColors } from '../constants/Colors';\r\n\r\nexport function Header(props: { text: string, style?: TextStyle }) {\r\n    return <Text\r\n        style={[{ color: AppColors.primary, fontSize: fonts.large, marginBottom: sizes.rem0_5 }, props.style]}\r\n    >{props.text}{ }</Text>\r\n}\r\n\r\n\r\nexport function Subheader(props: { text: string, style?: TextStyle }) {\r\n    return <Text\r\n        //color={Colors.primary}\r\n        style={[{ color:AppColors.secondary, fontSize: fonts.small, marginBottom: sizes.rem0_5 }, props.style]}\r\n    >{props.text}{ }</Text>\r\n}","import React, { ReactElement, ReactNode } from 'react'\r\nimport { View, ViewProps, ViewStyle } from 'react-native';\r\n\r\nimport { elevated, sizes } from '../style';\r\nimport { Header, Subheader } from './Headers'\r\n\r\ninterface SecitonProps {\r\n    title: string,\r\n    useSubHeading?: boolean,\r\n    children?: ReactNode,\r\n    button?: (props: { height: number, width: number }) => ReactElement,\r\n    alt?: boolean\r\n    style?: ViewProps[\"style\"],\r\n    \r\n}\r\n\r\nexport function Section(props: SecitonProps) {\r\n    const { title, children, useSubHeading} = props;\r\n    return (\r\n        <View  style={[{ backgroundColor: \"white\", marginBottom: sizes.rem1 }, props.style]}>\r\n            <View style={{ flexDirection: \"row\", justifyContent: \"space-between\" }}>\r\n                {Boolean(title) && (useSubHeading ? <Subheader text={title} style={{ color: props.alt ? \"#434343\" : undefined }} /> : <Header text={title} />)}\r\n                {props.button && props.button({ height: sizes.rem1_5, width: sizes.rem1_5 })}\r\n            </View>\r\n            {children}\r\n        </View>\r\n    )\r\n}\r\n\r\nexport function Subsection(props: Omit<SecitonProps, 'useSubHeading'>) {\r\n    return <Section useSubHeading {...props} />\r\n}\r\n\r\nexport const ElevatedSection = (props: Parameters<typeof Section>[0]) => {\r\n    const style = [[elevated, { paddingHorizontal: sizes.rem1 }], props.style]\r\n    return <Section {...props} style={style} />\r\n}","import React from 'react'\r\nimport { Image } from 'react-native'\r\nimport { IndexPath, Select, SelectItem, SelectProps } from '@ui-kitten/components'\r\n\r\nexport type PickerProps<T extends boolean> =\r\n    Omit<SelectProps, \"children\" | \"mode\" | \"onSelect\" | \"value\" | \"migrate\" | \"spellCheck\" | \"selectedIndex\">\r\n    & {\r\n        selectionLimit?: number, multiSelect?: T,\r\n        items: { label: string, value: string | number, iconUrl?: string }[],\r\n        value?: T extends false ? (string | number) : (string | number)[]\r\n        onSelect?: (item: (T extends false ? IndexPath : IndexPath[])) => void\r\n    }\r\n\r\nexport function Picker<T extends boolean = false>(props: PickerProps<T>) {\r\n    return <Select\r\n        {...props}\r\n\r\n        value={props.value instanceof Array ? props.items.map((item) => \"TEST\").filter(v => v).join(\",\") : props.items.find((v) => v.value === props.value)?.label || props.placeholder}\r\n\r\n        onSelect={(v) => {\r\n            if (props.onSelect)\r\n                props.onSelect(v as any);\r\n        }}\r\n\r\n        selectedIndex={\r\n            props.multiSelect ? props.items.map((i, idx) =>\r\n                Boolean((props.value as any[]).find(_item => _item.value === i.value)) ?\r\n                    new IndexPath(idx) : null).filter(v => v) as IndexPath[] :\r\n                new IndexPath(props.items.findIndex((i, idx) => i.value === props.value))\r\n        }>\r\n\r\n        {props.items.map(i => <SelectItem accessoryLeft={(props) => <Image {...props} source={{ uri: i.iconUrl }} />}\r\n            title={i.label}\r\n            key={i.value}\r\n        />)}\r\n    </Select>\r\n}","import React from 'react';\r\nimport MultiSlider, { MultiSliderProps } from '@ptomasroos/react-native-multi-slider';\r\n\r\nexport function Slider(props: MultiSliderProps) {\r\n    return <MultiSlider\r\n\r\n        //thumbTintColor={Colors.primary}\r\n        //maximumTrackTintColor={Colors.grey50}\r\n        //minimumTrackTintColor={Colors.grey50} \r\n        {...props} />\r\n}","import { Icon } from \"@ui-kitten/components\";\r\nimport React from \"react\";\r\nimport { Pressable, PressableProps, StyleProp, ViewStyle } from \"react-native\";\r\nimport { AppColors } from \"../constants/Colors\";\r\n\r\nexport const AddButton = (props: Pick<PressableProps, \"onPress\"> & Pick<ViewStyle, \"height\" | \"width\">) => {\r\n    return <Pressable onPress={props.onPress} style={{ justifyContent: \"center\" }} ><Icon\r\n        //fill={AppColors.secondary}\r\n        fill={AppColors.secondary}\r\n        height={props.height}\r\n        width={props.width}\r\n        name=\"plus-square\" style={{\r\n            height: props.height,\r\n            width: props.width\r\n        }} /></Pressable>\r\n}\r\n\r\nexport const EditButton = (props: Pick<PressableProps, \"onPress\"> & Pick<ViewStyle, \"height\" | \"width\"> & { style?: ViewStyle }) => {\r\n    return <Pressable onPress={props.onPress} style={[{ justifyContent: \"center\" }, props.style]}><Icon\r\n        //fill={AppColors.secondary}\r\n        fill={\"#708090\"}\r\n        name=\"edit-outline\" style={{\r\n            height: props.height,\r\n            width: props.width\r\n        }} /></Pressable>\r\n}\r\n\r\nexport const SettingsButton = (props: Pick<PressableProps, \"onPress\"> & Pick<ViewStyle, \"height\" | \"width\"> & { style?: ViewStyle }) => {\r\n    return <Pressable onPress={props.onPress} style={[{ justifyContent: \"center\" }, props.style]}><Icon\r\n        //fill={AppColors.secondary}\r\n        fill={\"#708090\"}\r\n        name=\"settings-2-outline\" style={{\r\n            height: props.height,\r\n            width: props.width\r\n        }} /></Pressable>\r\n}\r\nexport const DeleteButton = (props: Pick<PressableProps, \"onPress\"> & Pick<ViewStyle, \"height\" | \"width\" > & { style?: ViewStyle, color?: string }) => {\r\n    return <Pressable onPress={props.onPress} style={[{ justifyContent: \"center\" }, props.style]}><Icon\r\n        //fill={AppColors.secondary}\r\n        fill={props.color ? props.color : \"#708090\"}\r\n        name=\"close-circle-outline\" style={{\r\n            height: props.height,\r\n            width: props.width\r\n            \r\n        }} /></Pressable>\r\n}\r\nexport const ExitButton = (props: Pick<PressableProps, \"onPress\"> & Pick<ViewStyle, \"height\" | \"width\" > & { style?: ViewStyle, color?: string }) => {\r\n    return <Pressable onPress={props.onPress} style={[{ justifyContent: \"center\" }, props.style]}><Icon\r\n        //fill={AppColors.secondary}\r\n        fill={props.color ? props.color : \"#708090\"}\r\n        name=\"close-circle-outline\" style={{\r\n            height: props.height,\r\n            width: props.width\r\n            \r\n        }} /></Pressable>\r\n}\r\nexport const FavButton = (props: Pick<PressableProps, \"onPress\"> & Pick<ViewStyle, \"height\" | \"width\"> & { isSelected?: boolean }) => {\r\n    return <Pressable onPress={props.onPress} style={{ justifyContent: \"center\", alignItems: 'center' }}><Icon\r\n        //fill={AppColors.secondary}\r\n        fill={props.isSelected ? \"#F6BE00\" : \"#708090\"}\r\n        name={props.isSelected ? \"star\" : \"star-outline\"} style={{\r\n            height: props.height,\r\n            width: props.width\r\n        }} /></Pressable>\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { View, KeyboardAvoidingView, Platform } from \"react-native\";\r\nimport { Input } from \"@ui-kitten/components\";\r\nimport { Button, Icon } from '@ui-kitten/components'\r\nimport { sizes } from \"../style\";\r\n\r\nexport function KeyboardAvoidingInput(props: any) {\r\n    return (\r\n    <KeyboardAvoidingView\r\n        behavior={Platform.OS === \"ios\" ? \"padding\" : \"height\"}\r\n        style={{display: \"flex\", flexDirection: \"column\", alignContent: \"flex-end\"}}\r\n        >\r\n        <View style={{display: \"flex\", flexDirection: \"row\", alignItems: 'center'}}>\r\n        <Input \r\n            placeholder={props.placeholder}\r\n            value={props.value}\r\n            multiline={true}\r\n            numberOfLines={props.numLines}\r\n            style={{flex: 1,\r\n                    borderColor: '#ccc',\r\n                    //paddingVertical: sizes.rem0_5, paddingLeft: sizes.rem0_5,\r\n                    padding: sizes.rem0_5\r\n                }}\r\n            onChangeText={nextValue => props.setValue(nextValue)}\r\n        />\r\n        <Button \r\n            style={{backgroundColor: 'transparent',\r\n                    borderColor: 'transparent',\r\n                    padding: sizes.rem0_5,\r\n                    paddingLeft: 0,\r\n                    display: props.displayButton ? 'flex' : 'none'}}\r\n            onPress={() => {\r\n                if (props.clicked) {\r\n                    props.clicked[1](props.clicked[0] + 1)\r\n                }\r\n                props.onClick(props.value, props.setValue, props.item_id)\r\n            }}            \r\n            //onPress={props.onClick(props.value, props.setValue, props.item_id)}\r\n            accessoryRight={props.rightIcon}\r\n                        />\r\n        \r\n        </View>\r\n    </KeyboardAvoidingView>);\r\n}","import React, { useEffect, useMemo, useState } from \"react\"\r\nimport { Autocomplete, AutocompleteItem, Button, Icon, IndexPath, Text, Layout } from \"@ui-kitten/components\"\r\n//import { referenceData } from \"../../apis/ReferenceData\"\r\nimport { ElevatedSection, Section } from \"../../components/Section\"\r\nimport { PlusIcon } from \"../../images\"\r\nimport { bannerText, flex, noMargin, paddView, sizes, thinBannerText } from \"../../style\"\r\nimport { Picker } from '../../components/Picker'\r\nimport {\r\n    CreateAccountProps,\r\n    sideMargin\r\n} from \"./shared\"\r\n\r\nimport {\r\n    //bindMultiPicker,\r\n    bindPicker,\r\n    useOpacityAnim,\r\n    useReadonlyEntity\r\n} from \"../../utils/hooks\"\r\nimport { useSecuritiesList } from '../../SecurityList'\r\n//import { UpdateUserProfile } from \"../../apis/Authentication\"\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\"\r\nimport { Alert, Pressable, TextStyle, View } from \"react-native\"\r\nimport { Slider } from \"../../components/Slider\"\r\nimport { AppColors } from \"../../constants/Colors\"\r\nimport { Api } from \"@tradingpost/common/api\"\r\nimport { AddButton } from \"../../components/AddButton\"\r\nimport { useLinkTo } from \"@react-navigation/native\";\r\nimport { KeyboardAvoidingInput } from \"../../components/KeyboardAvoidingInput\"\r\n\r\n//import { AppConfig } from \"../../apis/ApplicationApi\"\r\n\r\n\r\nexport const investmentStrats = [\r\n    'Buy & Hold',\r\n    'Growth-Focused',\r\n    'Swing Trading',\r\n    'Momentum',\r\n    'Day Trading',\r\n    'Index Investing',\r\n    'Value-Focused',\r\n    'Long/Short',\r\n    'Opportunistic ',\r\n    'Concetrated',\r\n    'Diversified'\r\n];\r\nexport const questionStyle = { fontSize: 16, marginBottom: sizes.rem1, marginTop: sizes.rem1_5 } as TextStyle;\r\n\r\nexport const gicsAC = ['SaaS',\r\n    'Biotech',\r\n    'AdTech',\r\n    'Tech',\r\n    'Fintech',\r\n    'Specialty Finance',\r\n    'Aero/Defense',\r\n    'Industrial',\r\n    'Medtech',\r\n    'Cloud',\r\n    'Consumer',\r\n    'Banks',\r\n    'Industrials',\r\n    'Healthcare',\r\n    'Housing',\r\n    'Electric Vehicles',\r\n    'Renewable Energy',\r\n    'Oil and Gas',\r\n    'Metals and Mining',\r\n    'Semiconductors',\r\n    'Cybersecurity',\r\n    'Metaverse',\r\n    'Crypto',\r\n    'Transportation',\r\n    'Airlines',\r\n    'Auto',\r\n    'Healthcare',\r\n    'Retail',\r\n    'E-commerce',\r\n    'Insurance',\r\n    'Gambling',\r\n    'Quality',\r\n    'Deep Dives',\r\n    'General Market',\r\n    'Valuation',\r\n    'Technicals',\r\n    'Investment Process',\r\n    'Small Caps',\r\n    'Macro',\r\n    'News',\r\n    'Venture Capital',\r\n    'Emerging Markets',\r\n    'Portfolio Management',\r\n    'Data Driven',\r\n    'Industry Expert',\r\n    'Financial Coach',\r\n    'Businesses',\r\n    'Special Situations',\r\n    'Activist'].sort()\r\n\r\n\r\nexport function InvestmentInterestSection(props: CreateAccountProps) {\r\n    const { AppearView } = useOpacityAnim();\r\n    const anaylistProfile = useReadonlyEntity(props.user.data.analyst_profile || {\r\n        investment_strategy: \"\",\r\n        portfolio_concentration: 50,\r\n        benchmark: \"\",\r\n        interests: []\r\n    });\r\n    //props.user.data.investment_interests || { interestLevel: 50 }\r\n    const { securities: { list: securities } } = useSecuritiesList(),\r\n        [lockButtons, setLockButtons] = useState(false),\r\n        [bio, setBio] = useState(''),\r\n        [sliderWidth, setSliderWidth] = useState(100),\r\n        linkTo = useLinkTo<any>(),\r\n        [acText, setAcText] = useState(\"\");\r\n    const acValues = useMemo(() => {\r\n        const r = new RegExp(acText, \"i\");\r\n        return acText ? gicsAC.filter((g, i) => r.test(g)) : [];\r\n    }, [acText])\r\n    const addIfMissing = (value: string) => {\r\n        if (value && !anaylistProfile.data.interests.find((int) => int.toLowerCase() === value.toLowerCase())) {\r\n            anaylistProfile.update({\r\n                \"interests\": [...anaylistProfile.data.interests, value]\r\n            })\r\n        }\r\n        setAcText(\"\");\r\n    }\r\n    const benches = securities.filter(s => s.is_benchmark).sort((a, b) => a.symbol.localeCompare(b.symbol)).map((value) => ({\r\n        label: `[${value.symbol}] ${value.security_name}`,\r\n        value: value.symbol,\r\n        iconUrl: value.logo_url\r\n    }))\r\n    return <ScrollWithButtons\r\n        buttons={\r\n            {\r\n                locked: lockButtons,\r\n                left: {\r\n                    text: \"Nevermind\",\r\n                    onPress: async () => {\r\n                        const defaultSettings = {\r\n                            analyst: false,\r\n                            push_notifications: {\r\n                                mentions: true,\r\n                                upvotes: true,\r\n                                watchlist_changes: true,\r\n                            },\r\n                            portfolio_display: {\r\n                                performance: false,\r\n                                holdings: false,\r\n                                trades: false\r\n                            }\r\n                        }\r\n                        await Api.User.update(props.user.data.id, {\r\n                            settings: defaultSettings\r\n                        })\r\n                        linkTo('/create/profilepicture')\r\n                    }\r\n                },\r\n                right: {\r\n                    text: \"Continue\",\r\n                    onPress: async () => {\r\n                        setLockButtons(true);\r\n                        try {\r\n                            await Api.User.update(props.user.data.id, {\r\n                                bio: bio,\r\n                                analyst_profile: anaylistProfile.data\r\n                            });\r\n                            anaylistProfile.resetData(anaylistProfile.data);\r\n                            props.user.resetData(props.user.data);\r\n\r\n\r\n                            linkTo('/create/linkbrokerage')\r\n                        } catch (ex: any) {\r\n                            console.error(ex);\r\n                            props.toastMessage(\"Unable to update profile\");\r\n                            setLockButtons(false);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }>\r\n        <View style={[paddView, { paddingBottom: 0 }]}>\r\n            <ElevatedSection title=\"\" style={{ paddingVertical: 4 }}>\r\n                <AppearView onLayout={(ev) => {\r\n                    setSliderWidth(ev.nativeEvent.layout.width)\r\n                }} style={[flex]}>\r\n                    <Text style={[thinBannerText, { marginHorizontal: 0, marginTop: sizes.rem0_5 }]}>Welcome Analyst! Tell us a bit about yourself</Text>\r\n                    <Text style={[questionStyle, { marginTop: sizes.rem0_5 }]}>Bio</Text>\r\n                    <KeyboardAvoidingInput\r\n                        value={bio}\r\n                        displayButton={false}\r\n                        numLines={3}\r\n                        placeholder={'Tell people about yourself'}\r\n                        //rightIcon=\r\n                        setValue={setBio}\r\n                    //item_id={props.route.params.post._source.id}\r\n                    //clicked={[commentAdded, setCommentAdded]}\r\n                    //onClick={() => {}}\r\n                    />\r\n                    <Text style={questionStyle}>What is your investment strategy?</Text>\r\n                    <Picker\r\n                        placeholder='Select Strategy'\r\n                        value={anaylistProfile.data.investment_strategy}\r\n                        items={investmentStrats.map((value) => ({\r\n                            label: value,\r\n                            value\r\n                        }))}\r\n                        {...bindPicker(anaylistProfile, \"investment_strategy\", {\r\n                            fromType: (v) => {\r\n                                if (v) {\r\n                                    return investmentStrats[v.row]\r\n                                }\r\n                                return \"\";\r\n                            },\r\n                            toType: (v) => {\r\n                                return new IndexPath(investmentStrats.findIndex(v => v === v));\r\n                            }\r\n                        })}\r\n                    />\r\n                    <Text style={questionStyle}>How concentrated is your portfolio?</Text>\r\n                    <Slider\r\n                        containerStyle={{\r\n                            marginLeft: sliderWidth * 0.05\r\n                        }}\r\n                        min={0}\r\n                        max={100}\r\n                        step={25}\r\n                        sliderLength={sliderWidth * 0.9}\r\n                        values={[anaylistProfile.data.portfolio_concentration || 50]}\r\n                        onValuesChange={(v) => {\r\n                            anaylistProfile.update({\r\n                                portfolio_concentration: v[0]\r\n                            })\r\n                        }\r\n                        }\r\n                    />\r\n                    <View style={{ flexDirection: \"row\", justifyContent: \"space-between\", marginBottom: 16 }}>\r\n                        <Text>Highly Diversified</Text>\r\n                        <Text>Very Concentrated</Text>\r\n                    </View>\r\n                    <Text style={questionStyle}>What benchmark do you follow?</Text>\r\n                    <Picker\r\n                        value={anaylistProfile.data.benchmark}\r\n                        placeholder='Select Benchmark'\r\n                        items={benches}\r\n                        {...bindPicker(anaylistProfile, \"benchmark\", {\r\n                            fromType: (v) => {\r\n                                if (v) {\r\n                                    return benches[v.row].value\r\n                                }\r\n                                return \"\";\r\n                            },\r\n                            toType: (v) => {\r\n                                return new IndexPath(benches.findIndex(v => v === v));\r\n                            }\r\n                        })}\r\n                    />\r\n                    <Text style={questionStyle}>Pick a few interest and specialties</Text>\r\n                    <View>\r\n                        <Autocomplete\r\n                            value={acText || \"\"}\r\n                            onChangeText={setAcText}\r\n                            placeholder=\"Interest &amp; Specialties\"\r\n                            placement=\"bottom\"\r\n                            accessoryRight={\r\n                                (props) => <AddButton\r\n                                    onPress={() => addIfMissing(acText)}\r\n                                    height={(props?.style as any)?.height}\r\n                                    width={(props?.style as any)?.width}\r\n\r\n                                />\r\n                            }\r\n                            onSelect={(idx) => addIfMissing(acValues[idx])}>{\r\n                                acValues.map((v, i) => <AutocompleteItem key={i} title={v} />)\r\n                            }\r\n                        </Autocomplete>\r\n                    </View>\r\n                    {\r\n                        anaylistProfile.data.interests.map((v, i) => <View style={{ padding: sizes.rem0_5, flexDirection: \"row\" }}>\r\n                            <Text style={{ textAlign: \"left\", flex: 1 }}>{v}</Text><Pressable onPress={() => {\r\n                                const newInterest = [...anaylistProfile.data.interests];\r\n                                newInterest.splice(i, 1);\r\n                                anaylistProfile.update({\r\n                                    interests: newInterest\r\n                                })\r\n                            }}><Icon name=\"close-outline\" style={{ height: 24, aspectRatio: 1 }} /></Pressable>\r\n                        </View>)\r\n                    }\r\n                </AppearView>\r\n            </ElevatedSection>\r\n        </View>\r\n    </ScrollWithButtons>\r\n}\r\n\r\n","import React, {useEffect} from 'react'\r\nimport {Text, View, Pressable, PressableProps, ViewStyle, Platform} from 'react-native'\r\nimport {SvgProps, SvgXml} from 'react-native-svg'\r\n\r\n// think about just making an image source converter \r\nexport interface IIconifyIcon {\r\n    body: string;\r\n    left?: number;\r\n    top?: number;\r\n    width?: number;\r\n    height?: number;\r\n    rotate?: number;\r\n    hFlip?: boolean;\r\n    vFlip?: boolean;\r\n}\r\n\r\nexport interface IconProps {\r\n    icon: IIconifyIcon,\r\n    style?: ViewStyle,\r\n    svgProps?: SvgProps,\r\n    DEBUG?: boolean,\r\n    // Hack for right now... shoudl htink about this...    \r\n    currentColor?: string\r\n    pressableProps?: Omit<PressableProps, \"style\">\r\n}\r\n\r\nexport function IconifyIcon(props: IconProps) {\r\n    useEffect(() => {\r\n        if (props.DEBUG) {\r\n            console.log(JSON.stringify(props.icon));\r\n        }\r\n    }, [props.icon, props.DEBUG])\r\n\r\n    const xml = `<svg fill=\"black\" ${Platform.OS === \"web\" ? 'style=\"height:100%;width:100%;\"' : \"\"} width=\"${props.icon.width || 0}\" height=\"${props.icon.height || 0}\" viewBox=\"0 0 ${props.icon.width || 0} ${props.icon.height || 0}\">${props.currentColor ? props.icon.body.replace(/\"currentColor\"/gi, `\"${props.currentColor}\"`) : props.icon.body}</svg>`;\r\n    const svg =\r\n        Platform.OS === \"web\" ? <View style={props.svgProps?.style}>\r\n                <div style={{height: \"100%\", width: \"100%\"}} dangerouslySetInnerHTML={{__html: xml}}/>\r\n            </View> :\r\n            <SvgXml height={\"100%\"} width={\"100%\"} xml={xml}  {...props.svgProps} />\r\n\r\n    return props.pressableProps ?\r\n        <Pressable style={props.style} {...props.pressableProps}>{svg}</Pressable> :\r\n        <View style={props.style}>{svg}</View>\r\n}","import AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { getCallBackUrl } from \"@tradingpost/common/api/entities/static/EntityApiBase\";\r\nimport { openBrowserAsync, WebBrowserResultType } from \"expo-web-browser\";\r\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { Linking } from \"react-native\";\r\nimport { EventRegister } from \"react-native-event-listeners\";\r\nimport uuid from 'react-native-uuid';\r\nimport { initLds } from \"../../lds\";\r\n//TODO: SHould put this all in the app later as a generate link \r\nconst clientId = \"cm9mUHBhbVUxZzcyVGJNX0xrc2E6MTpjaQ\";\r\nconst platform = \"twitter\",\r\n    redirectUriText = `${getCallBackUrl()}/auth/${platform}`,\r\n    redirectUri = new URL(redirectUriText),\r\n    authUrlText = \"https://twitter.com/i/oauth2/authorize\"\r\n//state = `amira_${platform}`;\r\n\r\nexport interface ITokenResponse {\r\n    \"token_type\": \"bearer\",\r\n    \"expires_in\": number,\r\n    \"access_token\": string,\r\n    \"scope\": string\r\n}\r\n\r\nexport interface TwitterMe {\r\n    id: string,\r\n    name: string\r\n    username: string\r\n}\r\n\r\nexport function useTwitterAuthWebView() {\r\n    const state = useRef<string>(uuid.v4() as string);\r\n    let intervalHandler = useRef<any>()\r\n    const nav = useNavigation()\r\n    const openAuth = useCallback(async () => {\r\n        await AsyncStorage.removeItem(\"auth-twitter-code\");\r\n        const _challenge = Math.random().toString().substring(2, 10);\r\n        const authUrl = new URL(authUrlText);\r\n        authUrl.searchParams.append(\"response_type\", \"code\");\r\n        authUrl.searchParams.append(\"client_id\", clientId);\r\n        authUrl.searchParams.append(\"redirect_uri\", redirectUriText);\r\n        authUrl.searchParams.append(\"state\", state.current);\r\n        authUrl.searchParams.append(\"scope\", \"users.read tweet.read offline.access\");\r\n        authUrl.searchParams.append(\"code_challenge\", _challenge);\r\n        authUrl.searchParams.append(\"code_challenge_method\", \"plain\");\r\n        console.log(\"OPENING BRWOSER\")\r\n        //const openResult = await openBrowserAsync(authUrl.toString());\r\n        \r\n        nav.navigate(\"TwitterAuthWebView\", {\r\n            url: authUrl.toString(),\r\n            challenge: _challenge\r\n        })\r\n        \r\n    \r\n    }, []);\r\n\r\n    //Clean up interval if its dangling \r\n    useEffect(()=>{\r\n        return ()=> clearInterval(intervalHandler.current)\r\n    },[])\r\n\r\n    return openAuth\r\n}\r\n\r\n\r\nexport function useTwitterAuth() {\r\n    const state = useRef<string>(uuid.v4() as string);\r\n    let intervalHandler = useRef<any>()\r\n    \r\n    const openAuth = useCallback(async () => {\r\n        await AsyncStorage.removeItem(\"auth-twitter-code\");\r\n        const _challenge = Math.random().toString().substring(2, 10);\r\n        const authUrl = new URL(authUrlText);\r\n        authUrl.searchParams.append(\"response_type\", \"code\");\r\n        authUrl.searchParams.append(\"client_id\", clientId);\r\n        authUrl.searchParams.append(\"redirect_uri\", redirectUriText);\r\n        authUrl.searchParams.append(\"state\", state.current);\r\n        authUrl.searchParams.append(\"scope\", \"users.read tweet.read offline.access\");\r\n        authUrl.searchParams.append(\"code_challenge\", _challenge);\r\n        authUrl.searchParams.append(\"code_challenge_method\", \"plain\");\r\n        console.log(\"OPENING BRWOSER\")\r\n        const openResult = await openBrowserAsync(authUrl.toString());\r\n        \r\n        const code = await new Promise<string>((res,rej)=>{\r\n        //HACK: will look for a better solution later \r\n            //TODO: Also need to check state here just in case no matter what ... \r\n            clearInterval(intervalHandler.current);       \r\n            intervalHandler.current =setInterval(async ()=>{\r\n                const code = await AsyncStorage.getItem(\"auth-twitter-code\");\r\n                console.log(\"########## LOOKING FOR THE CODE ##########\");\r\n                if(code){{\r\n                    res(code);\r\n                    console.log(\"########## I FOUND THE CODE ##########\");\r\n                }\r\n                clearInterval(intervalHandler.current);\r\n                }\r\n            },1000);\r\n        })\r\n        \r\n        // let respTest = await resp.text();\r\n        // if (!resp.ok)\r\n        //     throw new Error(respTest)\r\n        // else {\r\n        //     //respTest = await resp.text();\r\n        //     console.log(respTest);\r\n        // }\r\n        //const auth    //: ITokenResponse =  JSON.parse(respTest);  //await resp.json();\r\n        return await Api.User.extensions.linkSocialAccount({ callbackUrl: getCallBackUrl(), platform,code, challenge:_challenge}) ;        \r\n    }, []);\r\n\r\n    //Clean up interval if its dangling \r\n    useEffect(()=>{\r\n        return ()=> clearInterval(intervalHandler.current)\r\n    },[])\r\n\r\n    return openAuth\r\n}\r\n\r\n// export const getToken = async (info: {\r\n//     code: string\r\n// }) => {\r\n//     try {\r\n        \r\n//         // const meResp = await fetch(\"https://api.twitter.com/2/users/me\", {\r\n//         //     method: \"GET\",\r\n//         //     headers: {\r\n//         //         Authorization: `Bearer ${auth.access_token}`\r\n//         //     }\r\n//         // });\r\n\r\n//         // if (!meResp.ok)\r\n//         //     throw new Error(await meResp.text())\r\n\r\n//         // const meData: {\r\n//         //     data: TwitterMe\r\n\r\n//         // } = await meResp.json();\r\n\r\n\r\n//     })\r\n\r\n// }","import AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { getCallBackUrl } from \"@tradingpost/common/api/entities/static/EntityApiBase\";\r\nimport { openBrowserAsync, WebBrowserResultType } from \"expo-web-browser\";\r\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { Linking } from \"react-native\";\r\nimport { EventRegister } from \"react-native-event-listeners\";\r\nimport uuid from 'react-native-uuid';\r\nimport { makeRedirectUrl } from \"./shared\";\r\n\r\n//TODO: SHould put this all in the app later as a generate link \r\nconst clientId = \"408632420955-7gsbtielmra10pj4sdccgml20tphfujk.apps.googleusercontent.com\";\r\nconst platform = \"youtube\",\r\n    redirectUriText = makeRedirectUrl(platform),// `http://localhost:19006/auth/${platform}`,\r\n    redirectUri = new URL(redirectUriText),\r\n    authUrlText = \"https://accounts.google.com/o/oauth2/v2/auth\"\r\n//state = `amira_${platform}`;\r\n\r\nexport interface ITokenResponse {\r\n    \"token_type\": \"bearer\",\r\n    \"expires_in\": number,\r\n    \"access_token\": string,\r\n    \"scope\": string\r\n}\r\n\r\nexport interface TwitterMe {\r\n    id: string,\r\n    name: string\r\n    username: string\r\n}\r\n\r\nexport function useGoogleAuth() {\r\n    const state = useRef<string>(uuid.v4() as string);\r\n    let intervalHandler = useRef<any>()\r\n    \r\n    const openAuth = useCallback(async () => {\r\n        await AsyncStorage.removeItem(\"auth-youtube-code\");\r\n        const _challenge = Math.random().toString().substring(2, 10);\r\n        //const authUrl = new URL(authUrlText);\r\n        // authUrl.searchParams.append(\"response_type\", \"code\");\r\n        // authUrl.searchParams.append(\"client_id\", clientId);\r\n        // authUrl.searchParams.append(\"redirect_uri\", redirectUriText);\r\n        // authUrl.searchParams.append(\"state\", state.current);\r\n        // authUrl.searchParams.append(\"scope\", \"https://www.googleapis.com/auth/youtube\");\r\n        // authUrl.searchParams.append(\"code_challenge\", _challenge);\r\n        // authUrl.searchParams.append(\"code_challenge_method\", \"plain\");\r\n    //https://www.googleapis.com/auth/youtubepartner-channel-audit\r\n        const googleUrl = `https://accounts.google.com/o/oauth2/v2/auth?`+\r\n        `scope=https%3A//www.googleapis.com/auth/youtube%20https%3A//www.googleapis.com/auth/youtubepartner-channel-audit&`+\r\n        `include_granted_scopes=true&`+\r\n        `response_type=code&`+\r\n        `state=state_parameter_passthrough_value&`+\r\n        `redirect_uri=${encodeURIComponent(redirectUriText)}&`+\r\n        `client_id=${clientId}`;\r\n\r\n        const openResult = await openBrowserAsync(googleUrl);\r\n        \r\n        const code = await new Promise<string>((res,rej)=>{\r\n        //HACK: will look for a better solution later \r\n            //TODO: Also need to check state here just in case no matter what ... \r\n            clearInterval(intervalHandler.current);       \r\n            intervalHandler.current =setInterval(async ()=>{\r\n                const code = await AsyncStorage.getItem(\"auth-youtube-code\");\r\n                if(code){\r\n                    res(code);\r\n                clearInterval(intervalHandler.current);\r\n                }\r\n            },1000);\r\n        })\r\n        \r\n        // let respTest = await resp.text();\r\n        // if (!resp.ok)\r\n        //     throw new Error(respTest)\r\n        // else {\r\n        //     //respTest = await resp.text();\r\n        //     console.log(respTest);\r\n        // }\r\n        //const auth    //: ITokenResponse =  JSON.parse(respTest);  //await resp.json();\r\n        return await Api.User.extensions.linkSocialAccount({platform,code, challenge:_challenge, callbackUrl:getCallBackUrl()});\r\n    }, []);\r\n\r\n    //Clean up interval if its dangling \r\n    useEffect(()=>{\r\n        return ()=> clearInterval(intervalHandler.current)\r\n    },[])\r\n\r\n    return openAuth\r\n}\r\n\r\n// export const getToken = async (info: {\r\n//     code: string\r\n// }) => {\r\n//     try {\r\n        \r\n//         // const meResp = await fetch(\"https://api.twitter.com/2/users/me\", {\r\n//         //     method: \"GET\",\r\n//         //     headers: {\r\n//         //         Authorization: `Bearer ${auth.access_token}`\r\n//         //     }\r\n//         // });\r\n\r\n//         // if (!meResp.ok)\r\n//         //     throw new Error(await meResp.text())\r\n\r\n//         // const meData: {\r\n//         //     data: TwitterMe\r\n\r\n//         // } = await meResp.json();\r\n\r\n\r\n//     })\r\n\r\n// }","\r\nimport { getCallBackUrl } from '@tradingpost/common/api/entities/static/EntityApiBase';\r\nimport Constants, { AppOwnership } from 'expo-constants'\r\n\r\nexport const makeRedirectUrl = (platform: string) => {\r\n    let baseUrl = AppOwnership.Expo === Constants.appOwnership ? Constants.manifest?.hostUri : \"\";\r\n    return `${getCallBackUrl()}/auth/${platform}`\r\n}","import React, { useEffect, useState, useMemo, useRef, useCallback } from \"react\"\r\nimport { IconifyIcon, IIconifyIcon } from \"./IconfiyIcon\"\r\nimport { ElevatedSection, Section, Subsection } from \"./Section\"\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { View, Animated, Pressable, PressableProps, Platform } from \"react-native\"\r\nimport { useFocusEffect, useLinkTo, useNavigation } from \"@react-navigation/native\"\r\nimport { Autocomplete, AutocompleteItem, Icon, IndexPath, Text, TabView, Tab } from \"@ui-kitten/components\";\r\nimport { bannerText, elevated, flex, paddView, paddViewWhite, sizes, thinBannerText, social as socialStyling, fonts } from \"../style\";\r\nimport { useAppUser } from \"../Authentication\"\r\nimport { KeyboardAvoidingInput } from \"./KeyboardAvoidingInput\";\r\nimport { useTwitterAuth, useTwitterAuthWebView } from \"../utils/third-party/twitter\";\r\nimport { social } from \"../images\";\r\nimport { AppColors } from \"../constants/Colors\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { useGoogleAuth } from \"../utils/third-party/youtube\";\r\nimport { getCallBackUrl } from \"@tradingpost/common/api/entities/static/EntityApiBase\";\r\n\r\n\r\nexport function YourContentComponent(props?: any) {\r\n    let { loginState, signIn, updateState } = useAppUser(),\r\n        toast = useToast(),\r\n        [inputMessage, setInputMessage] = useState(''),\r\n        [inputPlatform, setInputPlatform] = useState(''),\r\n        [inputValue, setInputValue] = useState('');\r\n    const nav = useNavigation();\r\n\r\n    let appUser = loginState?.appUser;\r\n    const authToken = loginState?.authToken\r\n    \r\n    const getTwitterTokenOther = useTwitterAuth();\r\n    const getGoogleToken = useGoogleAuth();\r\n\r\n    let userClaims = appUser?.claims;\r\n\r\n    let [twitterHandle, setTwitterHandle] = useState(userClaims ? userClaims.find(c => c.platform === \"twitter\")?.claims?.handle : '')\r\n    let [substackUsername, setsubstackUsername] = useState(userClaims ? userClaims.find(c => c.platform === \"substack\")?.claims?.handle : '')\r\n    let [spotifyShow, setSpotifyShow] = useState(userClaims ? userClaims.find(c => c.platform === \"spotify\")?.claims?.handle : '')\r\n    let [youtubeChannel, setYoutubeChannel] = useState(userClaims ? userClaims.find(c => c.platform === \"youtube\")?.claims?.handle : '')\r\n    useFocusEffect(useCallback(() => {\r\n        if (props?.newTwitterhandle) setTwitterHandle(props.newTwitterhandle);\r\n    },[props]))\r\n    return (\r\n        <ElevatedSection title=\"\" style={{ padding: 5 }}>\r\n            <Text style={[thinBannerText, { fontSize: fonts.medium, lineHeight: fonts.medium * 1.5 }]}>TradingPost aggregates content across several social platforms.</Text>\r\n            <View style={{ flexDirection: \"row\", marginHorizontal: sizes.rem2, marginBottom: sizes.rem1 }}>\r\n                <HandleButton\r\n                    key={`${twitterHandle}`}\r\n                    title={twitterHandle}\r\n                    icon={social.TwitterLogo}\r\n                    onPress={() => {\r\n                        if (Platform.OS === 'android') {\r\n                            nav.navigate('TwitterAuthWebView', props?.isNewAccount)\r\n                        }\r\n                        else {\r\n                            getTwitterTokenOther()\r\n                                .then((handle) => setTwitterHandle(handle))\r\n                                .catch((err) => {\r\n                                    console.error(err)\r\n                                    toast.show('This Twitter account has already been claimed! If you think this is a mistake, please reach out to help@tradingpostapp.com.')\r\n                                })\r\n                        }\r\n                        setInputPlatform('twitter')\r\n                    }}\r\n                    iconPadd={sizes.rem1}\r\n                />\r\n                <HandleButton title={youtubeChannel} icon={social.YouTubeLogo}\r\n                    iconPadd={sizes.rem1}\r\n                    onPress={() => {\r\n                        getGoogleToken().then((handle) => {\r\n                            setYoutubeChannel(handle)\r\n                        }).catch((err) => {\r\n                            console.error(err)\r\n                            toast.show('This YouTube account has already been claimed! If you think this is a mistake, please reach out to help@tradingpostapp.com.')\r\n                        })\r\n                        setInputPlatform('youtube')\r\n                        //await Api.User.extensions.linkSocialAccount({platform: 'substack', platform_idenifier: ''}) ;  \r\n                    }}\r\n                />\r\n            </View>\r\n            <View style={{ flexDirection: \"row\", marginHorizontal: sizes.rem2, marginBottom: sizes.rem1 }}>\r\n                <HandleButton title={substackUsername} icon={social.SubstackLogo}\r\n                    iconPadd={sizes.rem1}\r\n                    currentColor={socialStyling.substackColor}\r\n                    onPress={() => {\r\n                        setInputMessage('Please enter your Substack username as it appears in your profile URL');\r\n                        setInputPlatform('substack')\r\n                        //await Api.User.extensions.linkSocialAccount({platform: 'substack', platform_idenifier: ''}) ;  \r\n                    }}\r\n                />\r\n                <HandleButton title={spotifyShow} icon={social.SpotifyLogo}\r\n                    iconPadd={sizes.rem0_5}\r\n                    onPress={() => {\r\n                        setInputMessage(\"Please enter your Spotify Podcast's Profile URL.\\nIn the Spotify App, this can be found by going to your Podcasts's Profile Page, clicking the 'Share' Icon and clicking 'Copy Link'.\");\r\n                        setInputPlatform('spotify')\r\n                        //await Api.User.extensions.linkSocialAccount({platform: 'substack', platform_idenifier: ''}) ;  \r\n                    }}\r\n                />\r\n            </View>\r\n            <Text style={[thinBannerText, { fontSize: fonts.medium, lineHeight: fonts.medium * 1.5 }]}>Sign in to your account(s) above to claim or add your content.</Text>\r\n            <View style={(inputPlatform === '' || inputPlatform === 'twitter') ? { display: 'none' } : { display: 'flex' }}>\r\n                <Text>\r\n                    {inputMessage}\r\n                </Text>\r\n                <KeyboardAvoidingInput\r\n                    placeholder={'Enter here'}\r\n                    value={inputValue}\r\n                    setValue={setInputValue}\r\n                    displayButton={true}\r\n                    numLines={2}\r\n                    rightIcon={(props: any) => <Icon\r\n                        fill={AppColors.secondary}\r\n                        name=\"plus-square\" height={35} width={35} style={{ height: 35, width: 35, padding: 0, alignContent: 'center' }} />}\r\n\r\n                    onClick={(r: any, s: any, t: any) => {\r\n                        Api.User.extensions.linkSocialAccount({ callbackUrl: getCallBackUrl(), platform: inputPlatform, platform_idenifier: r })\r\n                            .then((result) => {\r\n                                if (inputPlatform === 'substack') setsubstackUsername(result)\r\n                                else if (inputPlatform === 'spotify') setSpotifyShow(result)\r\n                            })\r\n                            .catch((err) => {\r\n                                console.error(err);\r\n                                toast.show(`${inputPlatform} Account Link Failed. Please try again or email contact@tradingpostapp.com for assistance.`)\r\n                            })\r\n                            .finally(() =>{\r\n                                s('')\r\n                                authToken ? signIn(\"\", authToken) : {};\r\n                            }\r\n                            )\r\n                        \r\n                        \r\n                    }}\r\n                />\r\n            </View>\r\n        </ElevatedSection>)\r\n\r\n}\r\n\r\nexport const HandleButton = (props: { title: string | undefined, icon: IIconifyIcon, currentColor?: string, iconPadd?: number } & Pick<PressableProps, \"onPress\">) => {\r\n    return <Pressable onPress={props.onPress} style={{ flex: 1, height: sizes.rem8, opacity: props.title ? 1 : 0.25 }}>\r\n        <IconifyIcon icon={props.icon} style={{ width: \"100%\", flex: 1, justifyContent: \"space-around\" }} svgProps={{ style: { paddingVertical: props.iconPadd, height: \"100%\" } }} currentColor={props.currentColor} />\r\n        <Text numberOfLines={1} style={{ fontStyle: !props.title ? \"italic\" : undefined, color: \"black\", textAlign: \"center\" }}>{props.title || \"Unclaimed\"}</Text>\r\n    </Pressable>\r\n}","\r\nimport { NavigationProp, useNavigation } from \"@react-navigation/native\"\r\nimport { Icon } from \"@ui-kitten/components\"\r\nimport React from \"react\"\r\nimport { Pressable, Image } from \"react-native\"\r\nimport { AppColors } from \"../constants/Colors\"\r\nimport { sizes } from \"../style\"\r\n\r\nexport const ProfileButton = (props: { userId: string, profileUrl: string, size: number, editable?: boolean }) => {\r\n    const nav = useNavigation<NavigationProp<any>>();\r\n\r\n    return <Pressable\r\n        onPress={props.editable ? async () => {\r\n            nav.navigate(\"ImagePicker\");\r\n        } : () => {\r\n            if (props.userId)\r\n                nav.navigate(\"Profile\", {\r\n                    userId: props.userId\r\n                });\r\n        }}\r\n        style={{\r\n            backgroundColor: \"gray\",\r\n            width: props.size,\r\n            height: props.size,\r\n            borderRadius: props.size / 2,\r\n            alignSelf: \"center\",\r\n            borderWidth: props.size / 32,\r\n            borderColor: \"#ccc\",\r\n            overflow: \"hidden\"\r\n        }}>\r\n        {props.profileUrl ? <Image style={{ height: \"100%\", width: \"100%\" }} source={{ uri: props.profileUrl }} /> : <Icon height={\"100%\"} width={\"100%\"} name=\"person\" />}\r\n    </Pressable>\r\n}","import React from \"react\";\r\nimport { Text } from \"@ui-kitten/components\";\r\nimport { View } from 'react-native'\r\nimport { flex, fonts, sizes } from \"../style\";\r\n\r\nexport function NoDataPanel(props: { message?: string }) {\r\n    return <View style={[{ justifyContent: \"center\", alignContent: \"center\", margin: sizes.rem1 }]}>\r\n        <Text style={{ fontSize: fonts.large, color: \"lightgray\", textAlign: \"center\" }}>\r\n            {props.message || \"No Items\"}\r\n        </Text>\r\n    </View>\r\n}","import React, {useCallback, useEffect, useMemo, useRef, useState} from \"react\";\r\nimport {Text, FlatList, FlatListProps, ListRenderItem, ScrollView, View, ViewToken} from \"react-native\";\r\nimport {flex} from \"../style\";\r\nimport {TBI} from \"../utils/misc\";\r\nimport {Link} from \"./Link\";\r\nimport {NoDataPanel} from \"./NoDataPanel\";\r\n\r\n\r\nexport type DataOrQuery<T> = T[] | ((data: T[] | undefined, page: number, sizeCache: SizeParts[]) => Promise<T[]>);\r\nexport type ListProps<T> = {\r\n    data?: DataOrQuery<T>,\r\n    noDataMessage?: string,\r\n    loadingMessage?: string,\r\n    maxDisaplyCount?: number,\r\n    maxDisaplyText?: string\r\n    datasetKey?: string | number,\r\n    keyExtractor?: FlatListProps<T>[\"keyExtractor\"]\r\n}\r\ntype HasU<T, U> = U extends undefined | null ? T : (T | U);\r\nexport type SizeParts = { index: number, length: number, offset: number };\r\n\r\nexport function List<T, U>(props: {\r\n    //    data: ReadonlyArray<T> | null | undefined\r\n    maxPage?: number,\r\n    listKey?: string,\r\n    renderItem: ListRenderItem<HasU<T, U>> | null | undefined\r\n    nestedScrollEnabled?: boolean,\r\n    preloadOffset?: number,\r\n    loadingItem: U,\r\n    getItemLayout?: ((\r\n        data: Array<HasU<T, U>> | null | undefined,\r\n        index: number,\r\n        sizeCache: SizeParts[]\r\n    ) => { length: number; offset: number; index: number }) | undefined;\r\n} & ListProps<T> & Pick<FlatListProps<HasU<T, U>>, \"style\" | \"contentContainerStyle\" | \"numColumns\" | \"ListHeaderComponent\" | \"StickyHeaderComponent\" | \"keyExtractor\" | \"horizontal\">) {\r\n\r\n    const [internalData, setInternalData] = useState<T[]>(),\r\n        {data, preloadOffset, datasetKey} = props,\r\n        [currentPage, setCurrentPage] = useState(0),\r\n        [pagesDone, setPagesDone] = useState(false),\r\n        isLoadingRef = useRef(true),\r\n        [maxItem, setMaxItem] = useState(-1),\r\n        [triggertHack, setTriggerHack] = useState(false),\r\n        sizeCache = useRef<SizeParts[]>([]).current,\r\n        datasetKeyRef = useRef(props.datasetKey);\r\n\r\n    datasetKeyRef.current = props.datasetKey;\r\n\r\n    useEffect(() => {\r\n        setPagesDone(false);\r\n\r\n        (async () => {\r\n            if (typeof data == \"function\") {\r\n                const result = await data(undefined, 0, sizeCache);\r\n\r\n                if (!result.length || props.maxPage === 0) {\r\n                    setPagesDone(true);\r\n                }\r\n\r\n                if (datasetKey === datasetKeyRef.current) {\r\n                    isLoadingRef.current = false;\r\n                    setInternalData(result);\r\n                }\r\n\r\n\r\n            } else {\r\n                isLoadingRef.current = false;\r\n                setInternalData(data);\r\n                setPagesDone(true);\r\n            }\r\n        })()\r\n    }, [datasetKey, Boolean(data), props.maxPage])\r\n\r\n    useEffect(() => {\r\n        if (!pagesDone && typeof data === 'function' && internalData) {\r\n            if (!isLoadingRef.current) {\r\n                const remaining = (internalData.length - 1) - maxItem;\r\n                if (remaining <= (preloadOffset || 1)) {\r\n                    isLoadingRef.current = true;\r\n                    setTriggerHack((hack) => !hack);\r\n                    const nextPage = currentPage + 1;\r\n                    const originalLength = internalData.length\r\n\r\n                    if (datasetKey === datasetKeyRef.current) {\r\n                        data(internalData, nextPage, sizeCache).then((newData) => {\r\n                            if (newData.length === originalLength || props.maxPage === nextPage) {\r\n                                isLoadingRef.current = false;\r\n                                setPagesDone(true);\r\n                            } else {\r\n                                setInternalData(newData);\r\n                                setCurrentPage(nextPage);\r\n                                isLoadingRef.current = false;\r\n                            }\r\n                        });\r\n                    }\r\n                } else {\r\n                    //console.log(\"NOPE\");\r\n                }\r\n            } else {\r\n                //console.log(\"WHAT UP\");\r\n            }\r\n        }\r\n\r\n    }, [maxItem, datasetKey, internalData, preloadOffset, currentPage, props.maxPage])\r\n\r\n    const vp = useMemo(() => [\r\n        {\r\n            viewabilityConfig: {\r\n                itemVisiblePercentThreshold: 20\r\n            },\r\n            onViewableItemsChanged: (ev: { viewableItems: Array<ViewToken>; changed: Array<ViewToken> }) => {\r\n                let max = 0;\r\n                ev.viewableItems.forEach((vi) => {\r\n                    max = Math.max(max, vi.index || 0);\r\n                });\r\n                setMaxItem((curMax) =>\r\n                    Math.max(max, curMax));\r\n            },\r\n        },\r\n    ], []);\r\n    const needsSplice = internalData && props.maxDisaplyCount && internalData.length > props.maxDisaplyCount;\r\n\r\n    return !internalData?.length ?\r\n        <NoDataPanel message={internalData ? props.noDataMessage : (props.loadingMessage || \"Loading...\")}/> :\r\n        <FlatList\r\n            listKey={props.listKey}\r\n            horizontal={props.horizontal}\r\n            style={[{}, props.style]}\r\n            getItemLayout={props.getItemLayout ? (a, b) => (props.getItemLayout as any)(a, b, sizeCache) : undefined}\r\n            numColumns={props.numColumns}\r\n            ListHeaderComponent={props.ListHeaderComponent}\r\n            ListFooterComponent={needsSplice ? () => {\r\n                return <Link onPress={TBI} style={{marginLeft: \"auto\"}}>{props.maxDisaplyText || \"View All\"}</Link>\r\n            } : undefined}\r\n            stickyHeaderIndices={props.ListHeaderComponent ? [0] : undefined}\r\n            data={(isLoadingRef.current ? [...internalData, props.loadingItem] : (needsSplice ? internalData.slice(0, props.maxDisaplyCount) : internalData)) as HasU<T, U>[]}\r\n            keyExtractor={props.keyExtractor}\r\n            renderItem={props.renderItem}\r\n            nestedScrollEnabled={props.nestedScrollEnabled}\r\n            viewabilityConfigCallbackPairs={vp}\r\n        />\r\n}","import React, { MutableRefObject, useEffect, useRef, useState } from \"react\";\r\nimport { Pressable, View, ViewStyle, Text } from \"react-native\";\r\nimport { useSecuritiesList } from '../SecurityList'\r\nimport { SearchBar } from \"./SearchBar\";\r\nimport { Interface } from \"@tradingpost/common/api\"\r\nimport { ISecurityList } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport { Avatar, Icon } from \"@ui-kitten/components\";\r\nimport { List } from \"./List\";\r\nimport { flex } from \"../style\";\r\nimport { KeyboardAvoidingInput } from \"./KeyboardAvoidingInput\";\r\nimport { useIsKeyboardVisible } from \"../utils/hooks\";\r\n\r\nconst cellStyle = { flexGrow: 1, aspectRatio: 1, justifyContent: \"center\", marginVertical: 4, alignItems: \"center\", flexBasis: 20 } as ViewStyle;\r\nconst numItemsPerRow = 4;\r\n//TODO: Need to optimize security load\r\nconst empty = {};\r\ntype SecOrEmpty = ISecurityList | {};\r\n\r\nexport type SelectionConverterRef = MutableRefObject<((selectedItems: Record<number, true>) => ISecurityList[]) | null>;\r\n//helper until i  lean this up\r\nexport const useWatchlistPicker = () => {\r\n    const [selectedItems, setSelectedItems] = useState<Record<number, true>>({})\r\n    return {\r\n        selectionConverter: useRef<(selectedItems: Record<number, true>) => ISecurityList[]>(null),\r\n        selectedItems,\r\n        onSelectedItemschanged: setSelectedItems,\r\n        symbolConverter: useRef<(symbols: string[]) => Record<number, true>>(null),\r\n    }\r\n}\r\nexport const WatchlistPicker = (props: { selectedItems: Record<number, true>, securitiesLoaded?: () => void, onSelectedItemschanged: (selectedItems: Record<number, true>) => void, selectionConverter: SelectionConverterRef, symbolConverter: MutableRefObject<((symbols: string[]) => Record<number, true>) | null> }) => {\r\n\r\n    const [searchText, setSearchText] = useState(\"\"),\r\n        { selectedItems } = props,\r\n        [data, setData] = useState<(Interface.ISecurityList | {})[]>([]),\r\n        [datasetKey, setDatasetKey] = useState(\"\"),\r\n        { securities: {\r\n            list: securities\r\n        } } = useSecuritiesList()\r\n\r\n    //    if (props.selectionConverter) {\r\n\r\n\r\n    //This is a all part of just getting done quickly.. need ot clean this up \r\n    useEffect(() => {\r\n        if (securities.length && props.securitiesLoaded) {\r\n            props.securitiesLoaded()\r\n        }\r\n\r\n    }, [securities.length, Boolean(props.securitiesLoaded)])\r\n    props.selectionConverter.current = securities.length ? (_selectedItems) => securities.filter((s) => _selectedItems[s.id]) : null;\r\n    props.symbolConverter.current = securities.length ? (_symbols) => {\r\n        const output: Record<number, true> = {}\r\n        securities.forEach((s) => {\r\n            if (_symbols.find((_s) => _s === s.symbol))\r\n                output[s.id] = true;\r\n        })\r\n        return output;\r\n    } : null\r\n    //}\r\n    //  else if (props.selectionConverter)\r\n    const delayRef = useRef(0);\r\n\r\n    const selectedItemCount = Object.keys(selectedItems).length;\r\n    useEffect(() => {\r\n        if (delayRef.current)\r\n            clearTimeout(delayRef.current);\r\n\r\n        delayRef.current = setTimeout(() => {\r\n\r\n            const items: (ISecurityList | {})[] = securities.filter((s, i) =>\r\n                (!searchText && (i < 25 || selectedItems[s.id])) ||\r\n                ((searchText.length >= 3 && new RegExp(searchText, \"gi\").test(s.security_name))) ||\r\n                (searchText.length && (new RegExp(searchText, \"gi\")).test(s.symbol))\r\n            ).sort((a, b) => {\r\n                if (selectedItems[a.id] && !selectedItems[b.id])\r\n                    return -1\r\n                else if (selectedItems[b.id] && !selectedItems[a.id])\r\n                    return 1\r\n                else {\r\n                    return (() => {\r\n\r\n                        if (searchText) {\r\n                            if (searchText.length <= 3) {\r\n                                const aStartsWith = new RegExp(\"^\" + searchText, \"gi\").test(a.symbol);\r\n                                const bStartsWith = new RegExp(\"^\" + searchText, \"gi\").test(b.symbol);\r\n\r\n                                if (aStartsWith && !bStartsWith)\r\n                                    return -1\r\n                                else if (!aStartsWith && bStartsWith)\r\n                                    return 1\r\n                                else\r\n                                    return a.symbol.localeCompare(b.symbol)\r\n\r\n                            }\r\n                            else\r\n                                return a.symbol.localeCompare(b.symbol)\r\n                        }\r\n                        else\r\n                            return 0\r\n                    })()\r\n\r\n\r\n\r\n                }\r\n\r\n\r\n                //? a.symbol.localeCompare(b.symbol) : \r\n                //                (selectedItems[a.id] ? -1 : -1)\r\n            });\r\n\r\n            const gap = Array.from({ length: numItemsPerRow - (items.length % numItemsPerRow) }, () => empty);\r\n            if (gap.length !== 4)\r\n                items.push(...gap);\r\n\r\n            setData(items)\r\n            setDatasetKey(searchText);\r\n        }, 333) as any;\r\n    }, [searchText, securities, selectedItems])\r\n\r\n\r\n\r\n    return <View\r\n        style={flex}\r\n    >\r\n        <View style={{ padding: 8 }}>\r\n            <KeyboardAvoidingInput\r\n                value={searchText}\r\n                displayButton={false}\r\n                numLines={1}\r\n                placeholder={'Searching...'}\r\n                setValue={setSearchText}\r\n            />\r\n        </View>\r\n        <View style={flex}>\r\n            <List\r\n                numColumns={numItemsPerRow}\r\n                data={data}\r\n                datasetKey={datasetKey ? datasetKey : data.filter(d => d !== empty).length}\r\n                renderItem={(i) => {\r\n                    return <SecurityCell\r\n                        item={i.item}\r\n                        isSelected={isSec(i.item) ? (selectedItems[i.item.id] || false) : false}\r\n                        onPressed={(isSelected) => {\r\n                            if (isSec(i.item)) {\r\n                                const selectedClone = { ...selectedItems };\r\n                                if (isSelected)\r\n                                    selectedClone[i.item.id] = true;\r\n                                else\r\n                                    delete selectedClone[i.item.id];\r\n\r\n\r\n                                props.onSelectedItemschanged(selectedClone)\r\n                                //setSelectedItems(selectedClone);\r\n                                return true\r\n                            }\r\n                            return false;\r\n                        }} />\r\n\r\n                }}\r\n                loadingItem={undefined} />\r\n        </View>\r\n    </View >\r\n}\r\n\r\n\r\nconst isSec = (item: SecOrEmpty): item is ISecurityList => {\r\n    return item !== empty;\r\n}\r\n\r\nconst SecurityCell = (props: { item: ISecurityList | {}, isSelected: boolean, onPressed: (isSelected: boolean) => boolean }) => {\r\n    const { item, onPressed, isSelected } = props;\r\n    const [innerSelected, setInnerSelected] = useState(isSelected)\r\n\r\n    return <Pressable\r\n        onPress={() => {\r\n            if (onPressed(!innerSelected)) {\r\n                setInnerSelected(!innerSelected);\r\n            }\r\n        }}\r\n        style={cellStyle}>\r\n        {isSec(item) ? <><View>\r\n            <Avatar shape='square' source={{ uri: item.logo_url }} size=\"large\" style={{ }} resizeMode={'contain'} />\r\n            {innerSelected && <View style={{ position: \"absolute\", width: \"40%\", aspectRatio: 1, zIndex: 50000, right: \"-10%\", bottom: \"-10%\" } as ViewStyle}>\r\n                <View style={{ backgroundColor: \"white\", position: \"absolute\", left: \"25%\", top: \"25%\", height: \"50%\", width: \"50%\" }} />\r\n                <Icon name=\"checkmark-circle-2\" fill=\"green\" style={{ height: \"100%\", width: \"100%\" }} />\r\n            </View>}\r\n        </View>\r\n            <Text>{item.symbol}</Text>\r\n        </> : null\r\n        }\r\n    </Pressable>\r\n}","/**\r\n * Learn more about Light and Dark modes:\r\n * https://docs.expo.io/guides/color-schemes/\r\n */\r\n\r\nimport { Text as DefaultText, View as DefaultView } from 'react-native';\r\n\r\nimport Colors from '../constants/Colors';\r\nimport useColorScheme from '../hooks/useColorScheme';\r\n\r\nexport function useThemeColor(\r\n  props: { light?: string; dark?: string },\r\n  colorName: keyof typeof Colors.light & keyof typeof Colors.dark\r\n) {\r\n  const theme = useColorScheme();\r\n  const colorFromProps = props[theme];\r\n\r\n  if (colorFromProps) {\r\n    return colorFromProps;\r\n  } else {\r\n    return Colors[theme][colorName];\r\n  }\r\n}\r\n\r\ntype ThemeProps = {\r\n  lightColor?: string;\r\n  darkColor?: string;\r\n};\r\n\r\nexport type TextProps = ThemeProps & DefaultText['props'];\r\nexport type ViewProps = ThemeProps & DefaultView['props'];\r\n\r\nexport function Text(props: TextProps) {\r\n  const { style, lightColor, darkColor, ...otherProps } = props;\r\n  const color = useThemeColor({ light: lightColor, dark: darkColor }, 'text');\r\n\r\n  return <DefaultText style={[{ color }, style]} {...otherProps} />;\r\n}\r\n\r\nexport function View(props: ViewProps) {\r\n  const { style, lightColor, darkColor, ...otherProps } = props;\r\n  const backgroundColor = useThemeColor({ light: lightColor, dark: darkColor }, 'background');\r\n\r\n  return <DefaultView style={[{ backgroundColor }, style]} {...otherProps} />;\r\n}\r\n","import { ColorSchemeName, useColorScheme as _useColorScheme } from 'react-native';\r\n\r\n// The useColorScheme value is always either light or dark, but the built-in\r\n// type suggests that it can be null. This will not happen in practice, so this\r\n// makes it a bit easier to work with.\r\nexport default function useColorScheme(): NonNullable<ColorSchemeName> {\r\n  return _useColorScheme() as NonNullable<ColorSchemeName>;\r\n}\r\n","import { Icon, Text } from \"@ui-kitten/components\";\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\"\r\nimport { AppColors } from \"../../constants/Colors\";\r\nimport { bannerText, flex, fonts, paddView, sizes, thinBannerText } from \"../../style\";\r\nimport Analytics from '../../assets/analytics.svg'\r\nimport { SvgExpo } from \"../../components/SvgExpo\";\r\nimport { useEffect, useRef } from \"react\";\r\nimport { Animated } from \"react-native\";\r\nimport { View } from \"../../components/Themed\";\r\nimport { ElevatedSection } from \"../../components/Section\";\r\nimport { useLinkTo } from \"@react-navigation/native\";\r\nimport { CreateAccountProps } from \"./shared\";\r\nimport { Api } from \"@tradingpost/common/api\"\r\nimport React from \"react\";\r\n\r\n\r\nexport const AnalystStartSection = (props: CreateAccountProps) => {\r\n\r\n    const opacityAnim = useRef(new Animated.Value(0)).current,\r\n        linkTo = useLinkTo<any>();\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n\r\n    return <ScrollWithButtons\r\n        fillHeight\r\n        buttons={{\r\n            right: {\r\n                text: \"I'm An Analyst\",\r\n                onPress: async () => {\r\n                    const defaultSettings = {\r\n                        analyst: true,\r\n                        push_notifications: {\r\n                            mentions: true,\r\n                            upvotes: true,\r\n                            watchlist_changes: true,\r\n                        },\r\n                        portfolio_display: {\r\n                            performance: true,\r\n                            holdings: true,\r\n                            trades: true\r\n                        }\r\n                    }\r\n                    await Api.User.update(props.user.data.id, {\r\n                        settings: defaultSettings\r\n                    })\r\n                    linkTo(\"/create/analystinterest\");\r\n                }\r\n            },\r\n            left: {\r\n                text: \"Not Now\",\r\n                onPress: async () => {\r\n                    const defaultSettings = {\r\n                        analyst: false,\r\n                        push_notifications: {\r\n                            mentions: true,\r\n                            upvotes: true,\r\n                            watchlist_changes: true,\r\n                        },\r\n                        portfolio_display: {\r\n                            performance: false,\r\n                            holdings: false,\r\n                            trades: false\r\n                        }\r\n                    }\r\n                    await Api.User.update(props.user.data.id, {\r\n                        settings: defaultSettings\r\n                    })\r\n                    linkTo(\"/create/profilepicture\");\r\n                }\r\n            }\r\n        }}\r\n    >\r\n        <View style={[paddView, { justifyContent: \"center\" }]}>\r\n            <ElevatedSection title=\"\">\r\n                <Animated.View style={[{ opacity: opacityAnim }]}>\r\n                    <Text style={[thinBannerText]}>Are you a Market Analyst?</Text>\r\n                    <View style={{ padding: sizes.rem1 }}>\r\n                        <SvgExpo style={{ width:\"100%\", aspectRatio:1.5}}>\r\n                            <Analytics />\r\n                        </SvgExpo>\r\n                    </View>\r\n                    <Text style={[thinBannerText, { fontSize: fonts.medium }]}>Select Analyst if you actively post fundamental or technical research related to stocks, commodities, crypto, etc. and would like to bolster your content.</Text>\r\n                </Animated.View>\r\n            </ElevatedSection>\r\n        </View>\r\n    </ScrollWithButtons>\r\n}","import React, { ReactComponentElement, ReactElement, useEffect, useState } from \"react\";\r\nimport { Text, Pressable, TextStyle, View, ListRenderItem } from \"react-native\";\r\n// import { LinearGradient, SvgFromXml } from \"react-native-svg\";\r\nimport { AppColors } from \"../constants/Colors\";\r\n//import { Colors, Fader, Text, View } from \"react-native-ui-lib\";\r\nimport { fonts, row, sizes, elevated as elevatedView } from \"../style\";\r\nimport { List, ListProps } from \"./List\";\r\nimport { NoDataPanel } from \"./NoDataPanel\";\r\nimport Theme from '../theme-light.json'\r\n//TODO: needs to be re-named... itsm misleading\r\ntype RowFunction<T, R> = (value: any, key: (keyof T) | undefined, item: T, index: number) => R\r\n\r\ntype EntireRowFunction<T, R> = (item: T, index: number) => R\r\n\r\n\r\ninterface TableColumnProps {\r\n    alias?: string,\r\n    width?: number | string,\r\n    align?: \"left\" | \"right\" | undefined\r\n}\r\n//This about if yo ucan infer this in the future\r\ntype FieldElement<T> = (props: {\r\n    item: T,\r\n    index: number\r\n    style?: (TextStyle | undefined)[]\r\n} & TableColumnProps) => ReactElement;\r\n\r\n\r\n\r\nexport type ITableColumn<T> = {\r\n    field?: (keyof T) | FieldElement<T>,\r\n    style?: TextStyle\r\n    headerStyle?: TextStyle\r\n    dynamicStyle?: RowFunction<T, TextStyle>,\r\n    stringify?: RowFunction<T, string>\r\n} & TableColumnProps\r\n\r\nfunction ensureString<T>(item?: (keyof T) | FieldElement<T>): item is (keyof T) | undefined {\r\n    return typeof item === \"string\" || !item;\r\n}\r\n\r\n// //helper to create strongly typed table column definitions\r\n// export class TableColumn<T, K extends keyof T> implements ITableColumn<T>{\r\n//     field: K;\r\n//     width?: number;\r\n//     style?: TextStyle;\r\n//     toString?: ((value: any, key: keyof T, item: T, index: number) => string);\r\n//     constructor(field: K, props: Omit<ITableColumn<T>, \"field\" | \"toString\"> & { toString: (value: T[K], key: K, item: T, index: number) => string }) {\r\n//         this.field = field\r\n//         this.style = props.style;\r\n//         this.width = props.width;\r\n//         this.toString = props.toString\r\n//     }\r\n\r\n// }\r\n\r\n// export function makeTableColumn<T>(field: keyof T, props: //Pick<ITableColumn<T>, \"width\" | \"style\"|\"toString\"> &\r\n//     { toString?(value: T[typeof field], key: typeof field, item: T, index: number): string }\r\n\r\n// ): ITableColumn<T> {\r\n//     return {\r\n//         field,\r\n//         //width: props.width,\r\n//         //style: props.style,\r\n//         toString: props.toString as ((value: any, key: keyof T, item: T, index: number) => string)\r\n//     }\r\n// }\r\n\r\nexport const stringyDate = (dts?: string) => {\r\n    const v = dts ? new Date(dts) : new Date();\r\n    return `${v?.getMonth() + 1}/${v?.getDate()}/${v?.getFullYear().toString().substring(2, 4)}`\r\n}\r\n\r\n\r\nexport type TableProps<T> = {\r\n    maxPage?: number,\r\n    listKey?: string,\r\n    columns: ITableColumn<T>[],\r\n    elevated?: boolean,\r\n    nestedScrollEnabled?: boolean,\r\n    rowPressed?: EntireRowFunction<T, void>,\r\n    hideHeader?: boolean,\r\n    renderAuxItem?: ListRenderItem<T> | null | undefined\r\n} & ListProps<T>\r\n\r\nexport function Table<T>(\r\n    props: TableProps<T>) {\r\n\r\n    const\r\n        { data, columns, nestedScrollEnabled, elevated, rowPressed } = props,\r\n        columnStyle: Partial<Record<number, (TextStyle | undefined)[]>> = {},\r\n        headerStyle: Partial<Record<number, (TextStyle | undefined)[]>> = {},\r\n        headerAlias: Partial<Record<number, string>> = {},\r\n        columnDynamicStyle: Partial<Record<number, RowFunction<T, TextStyle>>> = {},\r\n        columnsToString: Partial<Record<number, RowFunction<T, string>>> = {};\r\n\r\n    columns.forEach((c, i) => {\r\n        columnStyle[i] = [{\r\n            fontSize: fonts.xSmall,\r\n            lineHeight: fonts.medium,\r\n            width: c.width,\r\n            flex: c.width === undefined ? 1 : undefined,\r\n            textAlign: c.align || \"center\",\r\n            marginLeft: c.align === \"left\" ? 0 : undefined\r\n\r\n        }, c.style,];\r\n\r\n        headerStyle[i] = [{\r\n            fontSize: fonts.small,\r\n            width: c.width,\r\n            flex: c.width === undefined ? 1 : undefined,\r\n            textAlign: c.align || \"center\",\r\n            color: Theme[\"color-info-800\"],\r\n            //paddingBottom: 16\r\n        }, c.headerStyle]\r\n\r\n        if (c.alias)\r\n            headerAlias[i] = c.alias;\r\n\r\n        if (c.dynamicStyle)\r\n            columnDynamicStyle[i] = c.dynamicStyle;\r\n\r\n        if (c.stringify)\r\n            columnsToString[i] = c.stringify;\r\n\r\n    })\r\n\r\n    return <List\r\n        maxPage={props.maxPage}\r\n        maxDisaplyCount={props.maxDisaplyCount}\r\n        maxDisaplyText={props.maxDisaplyText}\r\n        keyExtractor={props.keyExtractor}\r\n        listKey={props.listKey}\r\n        ListHeaderComponent={props.hideHeader ? undefined : () => {\r\n            return <View key={\"table_header\"} style={{ alignItems: \"stretch\" }}>\r\n                <View style={[row, { backgroundColor: \"white\" }]}>\r\n                    {columns.map((c, i) => {\r\n                        return <Text key={`header_${i}`} numberOfLines={1} style={headerStyle[i]} >{headerAlias[i] || c.field?.toString()}</Text>\r\n                    })}\r\n                </View>\r\n                {/**Was just for testing... **/}\r\n                <View style={{ height: 16 }}>\r\n                    {/* <Fader size={16} position={Fader.position.TOP} /> */}\r\n                </View>\r\n            </View>\r\n        }}\r\n        nestedScrollEnabled={nestedScrollEnabled}\r\n        data={data}\r\n        datasetKey={props.datasetKey}\r\n        noDataMessage={props.noDataMessage}\r\n        loadingItem={null}\r\n        renderItem={(info) => {\r\n            //return <View><Text>{JSON.stringify(info.item)}</Text></View>\r\n            return info.item ?\r\n                <Pressable\r\n                    onPress={rowPressed ? () => {\r\n                        rowPressed(info.item, info.index)\r\n                    } : undefined}\r\n                    key={`row_${info.index}`}\r\n                    style={[props.elevated ? elevatedView : { paddingVertical: 8, marginHorizontal: 4, overflow: 'visible' }]}>\r\n                    <View style={row}>\r\n                        {\r\n                            props.columns.map((c, i) => {\r\n                                const key = `column_${i}`,\r\n                                    colStyle = columnStyle[i];\r\n\r\n                                if (ensureString(c.field)) {\r\n                                    const toString = columnsToString[i],\r\n                                        dynamicStyle = columnDynamicStyle[i],\r\n                                        evaluatedStyle = dynamicStyle ? [...[colStyle || []], dynamicStyle(c.field ? info.item[c.field] : undefined, c.field, info.item, info.index)] : colStyle,\r\n                                        evaluatedValue = toString ? toString(c.field ? info.item?.[c.field] : undefined, c.field, info.item, info.index) : (c.field ? info.item?.[c.field] : undefined)\r\n                                    return <Text key={key} numberOfLines={1} style={evaluatedStyle} >{evaluatedValue}</Text>\r\n                                }\r\n                                else {\r\n                                    const FieldElem = c.field;\r\n                                    return <FieldElem key={key} item={info.item} index={info.index} width={c.width} alias={c.alias} style={colStyle} />\r\n                                }\r\n                            })\r\n                        }\r\n                    </View>\r\n                    {props.renderAuxItem && props.renderAuxItem(info)}\r\n                </Pressable> :\r\n                <Text>Loading...</Text>\r\n        }} />\r\n}","import {flex, sizes} from \"../style\";\r\n\r\nimport React, {useEffect, useRef, useState} from \"react\";\r\nimport {Animated, Pressable, Text, Alert, Platform} from \"react-native\";\r\nimport {Icon} from \"@ui-kitten/components\";\r\n\r\nimport {Api} from \"@tradingpost/common/api\";\r\nimport {Section} from \"./Section\";\r\nimport {Table} from \"./Table\";\r\nimport {AddButton, EditButton} from \"./AddButton\";\r\nimport {openBrowserAsync} from 'expo-web-browser';\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport {useFocusEffect, useNavigation} from \"@react-navigation/native\";\r\nimport {DirectBrokeragesType} from \"@tradingpost/common/brokerage/interfaces\";\r\n\r\n//@ts-ignore\r\nconst alertPolyfill = (title, description, options, extra) => {\r\n    const result = window.confirm([title, description].filter(Boolean).join('\\n'))\r\n\r\n    if (result) {\r\n        //@ts-ignore\r\n        const confirmOption = options.find(({style}) => style !== 'cancel')\r\n        confirmOption && confirmOption.onPress()\r\n    } else {\r\n        //@ts-ignore\r\n        const cancelOption = options.find(({style}) => style === 'cancel')\r\n        cancelOption && cancelOption.onPress()\r\n    }\r\n}\r\n\r\nconst alert = Platform.OS === 'web' ? alertPolyfill : Alert.alert;\r\nexport const LinkBrokerageComponent = () => {\r\n    const nav = useNavigation();\r\n    const opacityAnim = useRef(new Animated.Value(0)).current;\r\n    const [accounts, setAccounts] = useState<Awaited<ReturnType<typeof Api.User.extensions.getBrokerageAccounts> | null>>()\r\n    const intervalRef = useRef<any>();\r\n    const [needsRefresh, setNeedsRefresh] = useState<{}>();\r\n    const [brokerLink, setLink] = useState(\"\");\r\n\r\n    const openLink = async () => {\r\n        await Api.User.extensions.generateBrokerageLink(undefined).then(({link}) => {\r\n            setLink(link)\r\n        })\r\n        const browserName = \"finicity_auth\";\r\n        await openBrowserAsync(brokerLink, {\"windowName\": browserName});\r\n        clearInterval(intervalRef.current);\r\n\r\n        intervalRef.current = setInterval(async () => {\r\n            console.log(\"WTF\");\r\n            if (await AsyncStorage.getItem(\"auth-finicity-code\")) {\r\n                console.log(\"CODE HAS BEEN FOUND\");\r\n                setAccounts(await Api.User.extensions.getBrokerageAccounts())\r\n            }\r\n        }, 5000)\r\n    }\r\n\r\n    const removeAccount = async (accountId: number, brokerage: DirectBrokeragesType) => {\r\n        await Api.Brokerage.extensions.scheduleForDeletion({brokerage, accountId});\r\n        if (!accounts) return\r\n        setAccounts(accounts.filter(a => a.id !== accountId));\r\n    }\r\n\r\n    //cleanup\r\n    useEffect(() => {\r\n        AsyncStorage.removeItem(\"auth-finicity-code\");\r\n        return () => {\r\n            clearInterval(intervalRef.current);\r\n            AsyncStorage.removeItem(\"auth-finicity-code\");\r\n        }\r\n    }, [])\r\n\r\n\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n    }, [needsRefresh])\r\n\r\n    useFocusEffect(\r\n        React.useCallback(() => {\r\n            setAccounts(null);\r\n            Api.User.extensions.getBrokerageAccounts().then((r) => {\r\n                setAccounts(r);\r\n            });\r\n        }, [])\r\n    );\r\n\r\n    return (\r\n        <Section style={flex} title=\"Link Brokerage Account\" button={(buttonProps) => accounts?.length ? <EditButton\r\n            onPress={() => {\r\n                nav.navigate(\"BrokeragePicker\")\r\n            }}\r\n            height={buttonProps.height}\r\n            width={buttonProps.width}\r\n        /> : <AddButton\r\n            onPress={() => nav.navigate(\"BrokeragePicker\")}\r\n            height={buttonProps.height}\r\n            width={buttonProps.width}\r\n        />}>\r\n            <Table datasetKey={accounts?.map(a => a.id).join(\",\") || \"none\"}\r\n                   columns={[\r\n                       {alias: \"Brokerage\", field: \"broker_name\"},\r\n                       {alias: \"Account #\", field: \"account_number\"},\r\n                       {alias: \" \", field: \"remove\", width: '10%', align: 'left'}\r\n                   ]}\r\n                   data={accounts?.map(acc => {\r\n                       return {\r\n                           ...acc,\r\n                           remove: <Pressable\r\n                               onPress={() => {\r\n                                   return alert(\r\n                                       `Removing ${acc.broker_name} Account?`,\r\n                                       `Are you sure you want to remove this brokerage account?`,\r\n                                       [\r\n                                           {\r\n                                               text: \"Yes\",\r\n                                               onPress: async () => {\r\n                                                   await removeAccount(acc.id, acc.broker_name as DirectBrokeragesType)\r\n                                               }\r\n                                           },\r\n                                           {\r\n                                               text: \"No\"\r\n                                           }\r\n                                       ]\r\n                                   )\r\n\r\n                               }}>\r\n                               <Icon\r\n                                   fill={\"#E74C3C\"}\r\n                                   name={\"trash-outline\"}\r\n                                   style={{\r\n                                       height: sizes.rem1,\r\n                                       width: sizes.rem1,\r\n                                   }}\r\n                               />\r\n                           </Pressable>\r\n                       }\r\n                   })}\r\n                   noDataMessage=\"You have no linked accounts\"\r\n            />\r\n        </Section>)\r\n}","import React, { useState } from 'react';\r\nimport { Pressable, View } from 'react-native';\r\nimport { Button, Layout, Tooltip, Text } from '@ui-kitten/components';\r\nimport { InfoIcon } from '../images';\r\n\r\nexport const TooltipComponent = (props: {text: string}) => {\r\n\r\n  const [visible, setVisible] = useState(false);\r\n\r\n  const renderToggleButton = () => {\r\n    return (\r\n        <Button \r\n            appearance='ghost'\r\n            accessoryLeft={<InfoIcon height={24} width={24}  style={{ marginHorizontal: 0 }} />}\r\n            style={{paddingHorizontal: 0, paddingVertical: 0, minHeight: 0, minWidth: 0}}\r\n            onPress={() => setVisible(true)}>\r\n            {''}\r\n        </Button>\r\n\r\n  ) as React.ReactElement};\r\n  return (\r\n    <View style={{justifyContent: 'center',\r\n                    alignItems: 'flex-start',\r\n                    flex: 1\r\n                    }}>\r\n        <Tooltip\r\n            anchor={renderToggleButton}\r\n            style={{ translateY: 37,  translateX: -15, width: '70%', height: '130%'}}\r\n            backdropStyle={{backgroundColor: 'rgba(0, 0, 0, 0.5)'}}\r\n            placement={'right'}\r\n            visible={visible}\r\n            onBackdropPress={() => setVisible(false)}\r\n            >\r\n            <Text>{props.text}</Text>\r\n        </Tooltip>\r\n    </View>\r\n  );\r\n};","import React, { ReactElement } from \"react\";\r\nimport { Toggle } from \"@ui-kitten/components\";\r\nimport { Icon, Text } from \"@ui-kitten/components\";\r\nimport { View, Animated } from \"react-native\"\r\nimport { TooltipComponent } from \"./ToolTip\";\r\nimport { sizes } from \"../style\";\r\n\r\n\r\nexport function SwitchField(props: any) {\r\n    return <View style={props.viewStyle}>\r\n        <Toggle\r\n            style={props.toggleStyle}\r\n            checked={props.checked}\r\n            onChange={props.onChange} />\r\n        <View style={[props.toolTipText ? {display: 'flex'} : {display: 'none'}, {justifyContent: 'center', flex: 1}]}>\r\n            <TooltipComponent text={props.toolTipText}/>\r\n        </View>\r\n        <Text style={props.textStyle}>\r\n            {props.label}\r\n        </Text>\r\n    </View> \r\n    \r\n\r\n}\r\n\r\n","import { NavigationProp } from \"@react-navigation/native\";\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { ISubscriberList, IUserGet } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport { Text, Tab, TabView, Avatar } from \"@ui-kitten/components\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { View } from \"react-native\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { useAppUser } from \"../Authentication\";\r\nimport { DeleteButton, EditButton, SettingsButton } from \"../components/AddButton\";\r\nimport { Picker } from \"../components/Picker\";\r\nimport { PrimaryButton } from \"../components/PrimaryButton\";\r\nimport { ProfileButton } from \"../components/ProfileButton\";\r\nimport { SecondaryButton } from \"../components/SecondaryButton\";\r\nimport { ElevatedSection } from \"../components/Section\";\r\nimport { SwitchField } from \"../components/SwitchField\";\r\nimport { Table } from \"../components/Table\";\r\nimport { RootStackScreenProps } from \"../navigation/pages\";\r\nimport { paddView, sizes } from \"../style\";\r\nimport { useReadonlyEntity } from \"../utils/hooks\";\r\nimport { AwaitedReturn } from \"../utils/misc\";\r\n\r\nexport const SubscriptionScreen = (props: RootStackScreenProps<\"Subscription\">) => {\r\n    const [index, setIndex] = useState(0);\r\n    //const [] = useState<  >()\r\n    //  useEffect(()=>{},[])\r\n    const mySubscriptionsCall = Api.Subscriber.extensions.getBySubscriber,\r\n        mySubscribersCall = Api.Subscriber.extensions.getByOwner,\r\n        [subscriptions, setSubscriptions] = useState<AwaitedReturn<typeof mySubscriptionsCall>>(),\r\n        [subscribers, setSubscribers] = useState<AwaitedReturn<typeof mySubscribersCall>>(),\r\n        [buttonClick, setButtonClick] = useState(false);\r\n    const { loginState } = useAppUser();\r\n    const appUser = loginState?.appUser;\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                const subtionTask = mySubscriptionsCall();\r\n                const suberTask = mySubscribersCall();\r\n                const [subscriptions, subscribers] = await Promise.all([subtionTask, suberTask])\r\n                setSubscriptions(subscriptions);\r\n                setSubscribers(subscribers);\r\n            }\r\n            catch (ex) {\r\n                console.error(ex);\r\n            }\r\n        })()\r\n\r\n    }, [])\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                const subtionTask = mySubscriptionsCall();\r\n                const suberTask = mySubscribersCall();\r\n                const [subscriptions, subscribers] = await Promise.all([subtionTask, suberTask])\r\n                setSubscriptions(subscriptions);\r\n                setSubscribers(subscribers);\r\n            }\r\n            catch (ex) {\r\n                console.error(ex);\r\n            }\r\n        })()\r\n\r\n    }, [buttonClick])\r\n\r\n    return <View style={paddView}><ElevatedSection title=\"Manage Subscriptions\"\r\n        button={(p) => <SettingsButton onPress={() => {\r\n            if (appUser?.settings?.analyst) {\r\n                props.navigation.navigate(\"SubscriptionSettings\");\r\n            }\r\n        }} {...p} />}\r\n    ><TabView\r\n        indicatorStyle={{\r\n            marginTop: 26\r\n        }} style={{ marginVertical: sizes.rem0_5 }} selectedIndex={index} onSelect={appUser?.settings?.analyst ? setIndex : undefined}>\r\n            <Tab title=\"Subscriptions\">\r\n                <Table\r\n                    rowPressed={(r) => {\r\n                        props.navigation.navigate(\"Profile\", {\r\n                            userId: r.subscription?.[0].user_id\r\n                        })\r\n                    }}\r\n                    data={subscriptions}\r\n                    columns={\r\n                        [\r\n                            {\r\n                                headerStyle: {\r\n                                    height: 20,\r\n                                    width: 20,\r\n                                    flex: 0,\r\n                                    flexBasis: 22\r\n                                },\r\n                                alias: \" \",\r\n                                field: (item) => {\r\n                                    const user = item.item.subscription[0].user[0];\r\n                                    return <ProfileButton userId={user.id} size={20} profileUrl={user.profile_url || \"\"} />\r\n                                }\r\n                            },\r\n                            {\r\n                                alias: \"Analyst\",\r\n                                align: \"left\",\r\n                                field: \"subscription\",\r\n                                style: {\r\n                                    paddingLeft: 4\r\n                                },\r\n                                stringify: (k: ISubscriberList[\"subscription\"]) => {\r\n                                    return '@' + k[0].user[0].handle\r\n                                }\r\n                            },\r\n                            {\r\n                                alias: \"Cost\",\r\n                                align: \"left\",\r\n                                field: \"subscription\",\r\n                                headerStyle: {\r\n                                    textAlign: 'center'\r\n                                },\r\n                                style: {\r\n                                    textAlign: 'center',\r\n                                    //paddingLeft: 6\r\n                                },\r\n                                stringify: (k: ISubscriberList[\"subscription\"]) => {\r\n                                    return String(String(k[0].cost) === '$0.00' ? 'Free' : k[0].cost)\r\n                                }\r\n                            },\r\n                            {\r\n                                alias: \"Since\",\r\n                                field: \"start_date\",\r\n                                stringify: (k: ISubscriberList[\"start_date\"]) => {\r\n                                    return new Date(k).toLocaleDateString();\r\n                                }\r\n                            }\r\n                        ]\r\n                    }\r\n                />\r\n            </Tab>\r\n            <Tab title=\"Subscribers\">\r\n                <Table\r\n                    rowPressed={(r) => {\r\n                        props.navigation.navigate(\"Profile\", {\r\n                            userId: r.subscription?.[0].user_id\r\n                        })\r\n                    }}\r\n                    data={subscribers}\r\n                    columns={\r\n                        [\r\n                            {\r\n                                headerStyle: {\r\n                                    height: 20,\r\n                                    width: 20,\r\n                                    flex: 0,\r\n                                    flexBasis: 22\r\n                                },\r\n                                alias: \" \",\r\n                                field: (item) => {\r\n                                    const user = item.item.user[0];\r\n                                    return <ProfileButton userId={user.id} size={20} profileUrl={user.profile_url || \"\"} />\r\n                                }\r\n                            },\r\n                            {\r\n                                alias: \"Subscriber\",\r\n                                align: \"left\",\r\n                                field: \"user\",\r\n                                style: {\r\n                                    paddingLeft: 4\r\n                                },\r\n                                stringify: (k: ISubscriberList[\"user\"]) => {\r\n                                    return '@' + k[0].handle\r\n                                }\r\n                            },\r\n                            {\r\n                                alias: \"Status\",\r\n                                field: (item) => {\r\n                                    if (item.item.approved) {\r\n                                        return <Text>Approved</Text>;\r\n                                    }\r\n                                    else {\r\n                                        return <SecondaryButton\r\n                                            children={'Approve'}\r\n                                            style={{\r\n                                                backgroundColor: \"#35A265\", borderColor: \"#35A265\",\r\n                                                minHeight: 26,\r\n                                                height: 26,\r\n                                                minWidth: 70,\r\n                                                width: 70\r\n                                            }}\r\n                                            onPress={async () => {\r\n                                                item.item.approved = true;\r\n                                                await Api.Subscriber.update(item.item.id, {\r\n                                                    approved: true\r\n                                                })\r\n                                                setButtonClick(!buttonClick);\r\n                                            }}\r\n                                        />\r\n                                    }\r\n                                },\r\n                                style: { color: '#35A265' }\r\n                                /*\r\n                                stringify: (k: ISubscriberList[\"approved\"]) => {\r\n                                    if (k) {\r\n                                        return 'Approved'\r\n                                    }\r\n                                    else {\r\n\r\n                                        return ''\r\n                                    }\r\n                                }\r\n                                */\r\n                            },\r\n                            {\r\n                                alias: \"Since\",\r\n                                field: \"start_date\",\r\n                                stringify: (k: ISubscriberList[\"start_date\"]) => {\r\n                                    return new Date(k).toLocaleDateString();\r\n                                }\r\n                            },\r\n                            {\r\n                                headerStyle: {\r\n                                    flexGrow: 0,\r\n                                    flexShrink: 0,\r\n                                    flexBasis: '9%'\r\n\r\n                                },\r\n                                alias: ' ',\r\n                                field: (item) => {\r\n                                    return <DeleteButton\r\n                                        onPress={async () => {\r\n                                            await Api.Subscriber.extensions.removeSubscription({\r\n                                                userId: item.item.user_id,\r\n                                                subscriptionId: item.item.subscription_id\r\n                                            })\r\n                                            setButtonClick(!buttonClick);\r\n                                        }}\r\n                                        width={26}\r\n                                        //height={'auto'}\r\n                                        color={'#EC5328'}\r\n                                    />\r\n                                },\r\n                                style: { marginLeft: -10 }\r\n                            }\r\n                        ]\r\n                    }\r\n                />\r\n\r\n            </Tab>\r\n        </TabView>\r\n    </ElevatedSection>\r\n    </View>\r\n}\r\n\r\nexport const SubscriptionSettingsScreen = (props: RootStackScreenProps<\"SubscriptionSettings\">) => {\r\n\r\n\r\n    return <View style={paddView}>\r\n        <SubscriptionSettingsView navigation={props.navigation} />\r\n    </View>\r\n}\r\n\r\nexport const SubscriptionSettingsView = (props: { navigation?: NavigationProp<any>, submitRef?: React.MutableRefObject<{ submit: () => Promise<void> }> }) => {\r\n\r\n    const call = Api.Subscription.extensions.getByUserId;\r\n    const subscription = useReadonlyEntity<AwaitedReturn<typeof call>>(null)\r\n    const toast = useToast();\r\n    //const [approveSubs, setApproveSubs] = useState(subscription.data?.settings.approve_new === undefined ? false : subscription.data?.settings.approve_new);\r\n\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                subscription.resetData(await call());\r\n            }\r\n            catch (ex: any) {\r\n                toast.show(ex.message)\r\n            }\r\n        })()\r\n    }, [])\r\n\r\n    const submit = async () => {\r\n        if (subscription.data?.id) {\r\n            await Api.Subscription.update(subscription.data.id, {\r\n                cost: subscription?.data?.cost || 0,\r\n                settings: subscription.data.settings\r\n            })\r\n        }\r\n        else {\r\n            await Api.Subscription.insert({\r\n                name: \"Basic Subscription\",\r\n                cost: subscription?.data?.cost || 0,\r\n                settings: subscription?.data?.settings || false,\r\n                user_id: ''\r\n            })\r\n        }\r\n        props.navigation?.goBack();\r\n    };\r\n    if (props.submitRef)\r\n        props.submitRef.current.submit = submit;\r\n\r\n    return <ElevatedSection title=\"Primary Subscription\">\r\n        <Text style={{ marginVertical: sizes.rem1 }}>\r\n            Set a cost associated with subscribing to your account.\r\n        </Text>\r\n        <Picker\r\n            style={{ marginBottom: sizes.rem1 }}\r\n            value={subscription?.data?.cost || 0}\r\n            onSelect={(item) => {\r\n                subscription.update({\r\n                    cost: item.row ? Math.pow(5, item.row) : 0\r\n                })\r\n            }}\r\n            items={[...Array.from({ length: 1 }).map((v, i) => {\r\n                const cost = i ? Math.pow(5, i) : 0;\r\n                return {\r\n                    label: cost ? `${cost}/month` : \"Free\",\r\n                    value: cost\r\n                }\r\n            })]}\r\n        />\r\n        <SwitchField label='Approve New Subscribers?'\r\n            checked={subscription.data?.settings.approve_new}\r\n            onChange={() => { subscription.update({ settings: { approve_new: !subscription.data?.settings.approve_new } }) }}\r\n            viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', padding: 4, paddingVertical: 30 }}\r\n            toggleStyle={{}}\r\n            textStyle={{ fontSize: 16, fontWeight: '500', alignSelf: 'center' }} />\r\n        {/* Codes will go here   */}\r\n        {!props.submitRef?.current && <PrimaryButton disabled={!subscription.hasChanged} onPress={submit} >Apply</PrimaryButton>}\r\n    </ElevatedSection>\r\n}","import React from \"react\"\r\nimport { View, Text } from \"react-native\"\r\nimport { HtmlViewProps } from \"./HtmlView.interface\"\r\n\r\nexport const HtmlView = (props: HtmlViewProps) => {\r\n    return <View style={props.style}><iframe\r\n        //marginwidth=\"0\"\r\n        //marginheight=\"0\"\r\n        //hspace=\"0\"\r\n        //vspace=\"0\"\r\n        //frameborder=\"0\"\r\n        name=\"_MYFIRAME\" scrolling=\"no\"\r\n        src={props.isUrl ? props.children : undefined}\r\n        srcDoc={!props.isUrl ? props.children : undefined}\r\n        style={{ position: \"absolute\", top: 0, bottom: 0, height: \"100%\", width: \"100%\", borderWidth: 0 }} />\r\n    </View>\r\n}","import React, { useLayoutEffect, useState } from 'react';\r\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\r\nimport { Tab, TabView } from '@ui-kitten/components';\r\nimport { useReadonlyEntity } from '../utils/hooks'\r\nimport { AccountInfoSection } from './create_account/AccountInfoSection';\r\nimport { InvestmentInterestSection } from './create_account/InvestmentInterestSection';\r\nimport { YourContent } from './create_account/YourContentSection';\r\nimport { useData } from '../lds';\r\nimport { IUserGet } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport { useToast, } from 'react-native-toast-notifications'\r\nimport { BasicInfoSection } from './create_account/BasicInfoSection';\r\nimport { ProfileIconSection } from './create_account/ProfileIconSection';\r\nimport { PickWatchlistSection } from './create_account/PickWatchlistSection';\r\nimport { useAppUser } from '../Authentication';\r\nimport { AnalystStartSection } from './create_account/AnalystStartSection';\r\nimport { LinkBrokerageSection } from './create_account/LinkBrokerageSection';\r\nimport { AppColors } from '../constants/Colors';\r\nimport { SubscriptionCostSection } from './create_account/SubscrpitionCostSection';\r\nimport { Log } from '../utils/logger';\r\nimport { PrivacyScreen } from './create_account/PrivacyScreen';\r\nimport { TermsScreen } from './create_account/TermsScreen';\r\n\r\nexport const screens = {\r\n    'LoginInfo': AccountInfoSection,\r\n    'BasicInfo': BasicInfoSection,\r\n    'Watchlist': PickWatchlistSection,\r\n    'AnalystStart': AnalystStartSection,\r\n    'AnalystInterest': InvestmentInterestSection,\r\n    'LinkBrokerage': LinkBrokerageSection,\r\n    'AddClaims': YourContent,\r\n    'SubscriptionCost': SubscriptionCostSection,\r\n    'ProfilePicture': ProfileIconSection,\r\n    'Terms': TermsScreen,\r\n    'Privacy':PrivacyScreen\r\n}\r\n\r\n\r\nconst screenKeys = Object.keys(screens);\r\n\r\n\r\n\r\nexport default (props: any) => {\r\n    /**\r\n     * State & hooks\r\n     */\r\n    const { loginState } = useAppUser(\"CREATE_ACCOUNT_SCREEN\"),\r\n        appUser = loginState?.appUser, userState = loginState?.setupStatus,\r\n        user = useReadonlyEntity<IUserGet>(appUser || {\r\n            profile_url: \"\",\r\n            first_name: \"\",\r\n            last_name: \"\",\r\n            handle: \"\",\r\n            email: \"\",\r\n            bio: \"\",\r\n            claims: [],\r\n            display_name: \"\",\r\n            id: \"\",\r\n            tags: [],\r\n            subscription: null as any,\r\n        }),\r\n        toast = useToast()\r\n\r\n    /** Updates user data is the current user changes **/\r\n    useLayoutEffect(() => {\r\n        if (appUser)\r\n            user.resetData(appUser);\r\n    }, [appUser]);\r\n\r\n    /**\r\n     * Sub Screen resolution based on parameters \r\n     */\r\n    let subScreen: keyof typeof screens;\r\n\r\n\r\n    if (props?.route?.params?.params?.screen)\r\n        subScreen = props?.route?.params?.params?.screen\r\n\r\n    else if (userState?.needsSettings)\r\n        subScreen = \"AnalystStart\"\r\n    else if (userState?.needsAnalystSettings)\r\n        subScreen = \"AnalystInterest\"\r\n    else if (loginState?.loginResult)\r\n        subScreen = \"BasicInfo\"\r\n    else subScreen = \"LoginInfo\"\r\n\r\n    let resolvedIndex = screenKeys.findIndex((k) => k === subScreen);\r\n    if (resolvedIndex < 0) {\r\n        resolvedIndex = 0;\r\n        Log.error(new Error(`Invalid create subscreen key :'${subScreen}'. Defaulting to index 0`));\r\n    }\r\n\r\n\r\n\r\n\r\n    const caProps = {\r\n        user,\r\n        toastMessage: (msg: string, delay: number | undefined) => {\r\n            toast.show(msg, {\r\n                duration: delay,\r\n                placement: \"top\"\r\n            });\r\n        }\r\n    }\r\n\r\n    const insets = useSafeAreaInsets();\r\n\r\n    return <TabView\r\n        style={{\r\n            paddingTop: insets.top / 2,\r\n            backgroundColor: AppColors.background,\r\n            flexGrow: 1,\r\n            maxHeight: \"100%\",\r\n        }}\r\n        swipeEnabled={false}\r\n        selectedIndex={resolvedIndex}\r\n        indicatorStyle={{\r\n            height: 0\r\n        }}\r\n        tabBarStyle={{\r\n            height: 0,\r\n            padding: 0,\r\n            paddingBottom: 0,\r\n            paddingTop: 0\r\n        }}\r\n        shouldLoadComponent={(index) => index === resolvedIndex}\r\n    >\r\n        {screenKeys.map((v, i) => {\r\n            const Screen = screens[screenKeys[i] as keyof typeof screens];\r\n            return <Tab key={\"TAB_\" + i}>\r\n                <Screen {...caProps} />\r\n            </Tab>\r\n        })}\r\n    </TabView>\r\n\r\n\r\n}\r\n\r\n","import React, { useState, useRef, useEffect, RefObject, useMemo } from \"react\";\r\nimport { Alert, TouchableOpacity, Image, ImageStyle, ViewStyle, View, Animated } from \"react-native\";\r\n//import { Navigation } from \"react-native-navigation\";\r\n//import { Nav } from '@react-navigation/native'\r\nimport { CheckBox, Input, Text, } from \"@ui-kitten/components\";\r\n//import { signOut, getStoredCreds, CreateAuth0User, UpdateUserProfile, signInStoredCreds } from \"../../apis/Authentication\";\r\nimport { ButtonField } from \"../../components/ButtonField\";\r\nimport { IconifyIcon } from \"../../components/IconfiyIcon\";\r\nimport { Section } from \"../../components/Section\";\r\nimport { TextField, ITextField } from \"../../components/TextField\";\r\nimport { bannerText, flex, sizes, textInputWiz } from \"../../style\";\r\nimport { bindTextInput, IEntity, useReadonlyEntity } from \"../../utils/hooks\";\r\nimport { isRequired, isValidEmail, isAlphaNumeric } from \"../../utils/validators\";\r\nimport { CreateAccountProps, sideMargin } from \"./shared\";\r\n\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\";\r\nimport { useData } from \"../../lds\";\r\nimport { Label } from \"../../components/Label\";\r\nimport { TBI } from \"../../utils/misc\";\r\nimport { AppColors } from \"../../constants/Colors\";\r\nimport Auth from '@tradingpost/common/api/entities/static/AuthApi'\r\nimport UserApi from '@tradingpost/common/api/entities/apis/UserApi'\r\nimport { IUserGet } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport { useAppUser } from \"../../Authentication\";\r\nimport { useLinkTo, useNavigation } from \"@react-navigation/native\";\r\nimport { registerDeviceForNotifications } from \"../../utils/notifications\";\r\nimport { Link } from \"../../components/Link\";\r\n\r\n\r\ntype FieldRefs = {\r\n    first: RefObject<ITextField>,\r\n    last: RefObject<ITextField>,\r\n    username: RefObject<ITextField>\r\n}\r\n\r\nexport function BasicInfoSection(props: CreateAccountProps) {\r\n    const\r\n        nav = useNavigation(),\r\n        [lockButtons, setLockButtons] = useState(false),\r\n        opacityAnim = useRef(new Animated.Value(0)).current,\r\n        { signIn, loginState } = useAppUser(),\r\n        appUser = loginState?.appUser,\r\n        [agreeToTerms, setAgreeToTerms] = useState(false),\r\n        [agreeToPrivacy, setAgrreeToPrivacy] = useState(false),\r\n        refs: FieldRefs = {\r\n            first: useRef<ITextField>(null),\r\n            last: useRef<ITextField>(null),\r\n            username: useRef<ITextField>(null),\r\n        },\r\n        linkTo = useLinkTo<any>(),\r\n        { value: firstTime, setValue: setFirstTime } = useData('firstTime'),\r\n        buttonConfig = {\r\n            locked: lockButtons,\r\n            left: {\r\n                text: \"Sign Out\",\r\n                onPress: async () => {\r\n                    Auth.signOut();\r\n                    nav.goBack();\r\n                }\r\n            }\r\n            // : (props.saveOnly ? undefined : {\r\n            //     text: \"Cancel\",\r\n            //     onPress: () => props.navigation.goBack()//Navigation.pop(props.componentId)\r\n            // })\r\n            ,\r\n            right: {\r\n                text: \"Next\",\r\n                onPress: async () => {\r\n                    setLockButtons(true);\r\n                    const errors: string[] = [];\r\n                    try {\r\n                        for (const k in refs) {\r\n                            const val = refs[k as keyof typeof refs];\r\n                            if (val.current && !val.current.validate()) {\r\n                                errors.push(val.current.errorMessage || \"\");\r\n                            }\r\n                        }\r\n                        if (errors.length) {\r\n\r\n                            errors.unshift(\"Please fix the following issues:\");\r\n                            props.toastMessage(errors.join(\"\\r\\n\"));\r\n\r\n                            setLockButtons(false);\r\n                        } else {\r\n                            setFirstTime(true);\r\n                            const { token } = await Auth.createUser(props.user.data.first_name, props.user.data.last_name, props.user.data.handle);\r\n                            await signIn(\"\", token);\r\n                            await registerDeviceForNotifications();\r\n                            linkTo('/create/watchlist')\r\n                            //props.next();                            \r\n                            //props.navigation.navigate(\"Root\");\r\n                            //setLockButtons(false);\r\n                        }\r\n\r\n                    } catch (ex: any) {\r\n                        if (ex.json) {\r\n                            props.toastMessage(`${ex.json.name}:\\r\\n${ex.json.policy || ex.json.description}`);\r\n                        } else if (typeof ex.message === \"string\") {\r\n                            props.toastMessage(ex.message);\r\n                        } else props.toastMessage(JSON.stringify(ex.message));\r\n                        setLockButtons(false);\r\n                    }\r\n\r\n                }\r\n            }\r\n        }\r\n\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n\r\n\r\n    return <ScrollWithButtons\r\n        buttons={buttonConfig}>\r\n        <View>\r\n            <View style={[flex, { margin: sideMargin }]}>\r\n                <Animated.Text\r\n                    style={[bannerText, { opacity: opacityAnim }]}>\r\n                    Let's keep setting up your account\r\n                </Animated.Text>\r\n                <TextField\r\n                    style={textInputWiz}\r\n                    textInputRef={refs.first}\r\n                    errorMessage={\"`First Name` is required\"}\r\n                    validate={isRequired}\r\n                    validateOnChange placeholder='First Name'\r\n                    returnKeyType=\"none\" {...bindTextInput(props.user, \"first_name\", null)}\r\n                />\r\n                <TextField\r\n                    style={textInputWiz}\r\n                    textInputRef={refs.last}\r\n                    errorMessage={\"`Last Name` is required\"}\r\n                    validate={isRequired}\r\n                    validateOnChange placeholder='Last Name'\r\n                    returnKeyType=\"none\" {...bindTextInput(props.user, \"last_name\", null)}\r\n                />\r\n                <TextField\r\n                    style={textInputWiz}\r\n                    textInputRef={refs.username}\r\n                    errorMessage={\"`Username` is required\"}\r\n                    validate={isRequired}\r\n                    validateOnChange placeholder='Username'\r\n                    returnKeyType=\"none\" {...bindTextInput(props.user, \"handle\", null)}\r\n                />\r\n            </View>\r\n        </View>\r\n    </ScrollWithButtons>\r\n}\r\n","import React, { useRef, useEffect, RefObject, useState } from \"react\";\r\nimport { View, Animated, Pressable } from \"react-native\";\r\n//import { Navigation } from \"react-native-navigation\";\r\n//import { Nav } from '@react-navigation/native'\r\nimport { Avatar, Icon, Input, Text, } from \"@ui-kitten/components\";\r\n//import { signOut, getStoredCreds, CreateAuth0User, UpdateUserProfile, signInStoredCreds } from \"../../apis/Authentication\";\r\nimport { TextField, ITextField } from \"../../components/TextField\";\r\nimport { bannerText, flex, noMargin, paddView, sizes, textInputWiz, thinBannerText } from \"../../style\";\r\nimport { CreateAccountProps, sideMargin } from \"./shared\";\r\n\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\";\r\n\r\nimport WatchlistApi from '@tradingpost/common/api/entities/apis/WatchlistApi'\r\nimport { SvgExpo } from \"../../components/SvgExpo\";\r\nimport AnalyzeImage from '../../assets/analyze2.svg'\r\nimport { useWatchlistPicker, WatchlistPicker } from \"../../components/WatchlistPicker\";\r\nimport { ElevatedSection } from \"../../components/Section\";\r\nimport { useLinkTo, useNavigation } from \"@react-navigation/native\";\r\nimport { RootStackScreenProps } from \"../../navigation/pages\";\r\n\r\ntype FieldRefs = {\r\n    first: RefObject<ITextField>,\r\n    last: RefObject<ITextField>,\r\n    username: RefObject<ITextField>\r\n}\r\n\r\n\r\nexport function PickWatchlistSection(props: CreateAccountProps) {\r\n    const nav = useNavigation<RootStackScreenProps<\"Create\">[\"navigation\"]>();\r\n    const\r\n        [lockButtons, setLockButtons] = useState(false),\r\n        opacityAnim = useRef(new Animated.Value(0)).current,\r\n        { selectionConverter: converterRef, selectedItems, onSelectedItemschanged: setSelectedItems, symbolConverter } = useWatchlistPicker(),\r\n        linkTo = useLinkTo<any>(),\r\n        buttonConfig = {\r\n            locked: lockButtons,\r\n            left: {\r\n                text: \"Not Now\",\r\n                onPress: () => {\r\n                    linkTo('/create/analyststart');\r\n\r\n                }\r\n            },\r\n            right: {\r\n                text: \"Apply\",\r\n                onPress: async () => {\r\n                    if (!Object.keys(selectedItems).length) {\r\n                        props.toastMessage(\"Please select at least one security of interest\");\r\n                    }\r\n                    else {\r\n                        setLockButtons(true);\r\n                        try {\r\n                            await WatchlistApi.insert({\r\n                                items: (converterRef.current ? converterRef.current(selectedItems) : []).map((s) => ({\r\n                                    symbol: s.symbol\r\n                                })),\r\n                                name: \"Primary Watchlist\",\r\n                                type: \"primary\" //primary | private | public \r\n                            })\r\n                            linkTo('/create/analyststart');\r\n                        }\r\n                        catch (ex: any) {\r\n                            props.toastMessage(ex.message);\r\n                            setLockButtons(false);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 1500,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n\r\n\r\n    return <ScrollWithButtons\r\n        fillHeight\r\n        buttons={buttonConfig}\r\n\r\n    >\r\n        <View style={paddView}>\r\n            <ElevatedSection title=\"\" style={[flex, noMargin]}>\r\n                <Animated.View style={{ opacity: opacityAnim }}>\r\n                    <Pressable onPress={() => {\r\n                        nav.navigate(\"OverlayModal\");\r\n                    }}><Text\r\n                        style={[thinBannerText, { marginVertical: sizes.rem0_5 }]}>\r\n                            Help us get to know you.\r\n                        </Text>\r\n                    </Pressable>\r\n                    <SvgExpo style={{ width: \"100%\", aspectRatio: 1.5 }}>\r\n                        <AnalyzeImage />\r\n                    </SvgExpo>\r\n                    <Text\r\n                        style={[bannerText, { marginHorizontal: 0, marginVertical: sizes.rem0_5 }]}>\r\n                        Pick a few companies to help us tailor to your interests\r\n                    </Text>\r\n                </Animated.View>\r\n\r\n                <WatchlistPicker\r\n                    selectionConverter={converterRef}\r\n                    selectedItems={selectedItems}\r\n                    symbolConverter={symbolConverter}\r\n                    onSelectedItemschanged={(_selectedItems) => {\r\n                        setSelectedItems(_selectedItems)\r\n                        //TODO:::: need to put this logic back in \r\n                        // if (selectedItemCount === 5 && isSelected) {\r\n                        //     props.toastMessage(\"You can only select up to 5 companies\");\r\n                        //     return false;\r\n                        // }\r\n                        // else \r\n                        // return false;\r\n                    }}\r\n                />\r\n            </ElevatedSection>\r\n        </View>\r\n    </ScrollWithButtons>\r\n}\r\n\r\n","import { Icon, Text } from \"@ui-kitten/components\";\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\"\r\nimport { AppColors } from \"../../constants/Colors\";\r\nimport { bannerText, flex, paddView, paddViewWhite, sizes, thinBannerText } from \"../../style\";\r\nimport { CreateAccountProps } from \"./shared\"\r\nimport { Bank } from '../../images'\r\nimport { SvgExpo } from \"../../components/SvgExpo\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { Animated, Pressable } from \"react-native\";\r\nimport { View } from \"../../components/Themed\";\r\nimport { ElevatedSection, Section } from \"../../components/Section\";\r\nimport { useLinkTo } from \"@react-navigation/native\";\r\nimport { LinkBrokerageComponent } from '../../components/LinkBrokerageComponent';\r\n\r\nexport const LinkBrokerageSection = (props: CreateAccountProps) => {\r\n\r\n    const opacityAnim = useRef(new Animated.Value(0)).current;\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n\r\n    const linkTo = useLinkTo<any>()\r\n    return <ScrollWithButtons\r\n        fillHeight\r\n        buttons={{\r\n            right: {\r\n                text: \"I'm Done Linking Accounts\",\r\n                onPress: () => {\r\n                    linkTo('/create/addclaims')\r\n                }\r\n            }\r\n        }}\r\n    >\r\n        <Animated.View style={[paddView, { opacity: opacityAnim }]}>\r\n            <ElevatedSection title={\"\"} style={flex}>\r\n                <Text style={[thinBannerText]}>Link Your Brokerage Accounts.</Text>\r\n                <View style={[{ padding: sizes.rem1 }, flex]}>\r\n                    <Bank />\r\n                </View>\r\n                <Text style={{ marginVertical: sizes.rem1 }}>TradingPost links directly with your bank accounts to ....</Text>\r\n                <View style={flex}> \r\n                    <LinkBrokerageComponent />\r\n                </View>\r\n                \r\n            </ElevatedSection>\r\n        </Animated.View>\r\n    </ScrollWithButtons >\r\n}","import { useLinkTo } from \"@react-navigation/native\";\r\nimport React from \"react\";\r\nimport { View } from \"react-native\";\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\";\r\nimport { YourContentComponent } from \"../../components/YourContentComponent\";\r\nimport { AppColors } from \"../../constants/Colors\";\r\nimport { flex } from \"../../style\";\r\nimport { sideMargin } from \"./shared\";\r\n\r\n//import { claimPlatform, createPlatform, Platform } from \"../../apis/UserApi\"\r\n//import { AmiraError } from \"../../AmiraError\"\r\n\r\nexport function YourContent(props?: any) {\r\n    const linkTo = useLinkTo<any>()\r\n    return (\r\n        <ScrollWithButtons\r\n            \r\n            fillHeight\r\n            buttons={{\r\n                right: {\r\n                    text: \"I'm Done Linking Accounts\",\r\n                    onPress: () => {\r\n                        linkTo('/create/subscriptioncost')\r\n                    }\r\n                }\r\n            }}>\r\n            <View style={[flex, { margin: sideMargin, marginTop: 12 }]} >\r\n                <YourContentComponent isNewAccount={true} />\r\n            </View>\r\n    </ScrollWithButtons>\r\n    )\r\n}\r\n\r\n","import { Icon, Text } from \"@ui-kitten/components\";\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\"\r\nimport { AppColors } from \"../../constants/Colors\";\r\nimport { bannerText, flex, paddView, paddViewWhite, sizes, thinBannerText } from \"../../style\";\r\nimport { CreateAccountProps } from \"./shared\"\r\nimport Bank from '../../assets/bank.svg'\r\nimport { SvgExpo } from \"../../components/SvgExpo\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { Animated, Pressable } from \"react-native\";\r\nimport { View } from \"../../components/Themed\";\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { ElevatedSection, Section } from \"../../components/Section\";\r\nimport { Table } from \"../../components/Table\";\r\nimport { AddButton, EditButton } from \"../../components/AddButton\";\r\nimport { openBrowserAsync } from 'expo-web-browser';\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useLinkTo } from \"@react-navigation/native\";\r\nimport { SubscriptionSettingsScreen, SubscriptionSettingsView } from \"../SubscriptionScreen\";\r\n\r\nexport const SubscriptionCostSection = (props: CreateAccountProps) => {\r\n    // useEffect(() => {\r\n    //     Animated.timing(\r\n    //         opacityAnim,\r\n    //         {\r\n    //             delay: 0.75,\r\n    //             toValue: 1,\r\n    //             duration: 2000,  \r\n    //             useNativeDriver: true\r\n    //         }).start();\r\n    // }, [])\r\n    const submitRef = useRef<{ submit: () => Promise<void> }>({ submit: async () => { } });\r\n    const linkTo = useLinkTo();\r\n    return <ScrollWithButtons\r\n        fillHeight\r\n        buttons={{\r\n            right: {\r\n                text: \"Apply Subscription\",\r\n                onPress: async () => {\r\n                    await submitRef.current.submit();\r\n                    linkTo('/create/profilepicture')\r\n                }\r\n            }\r\n        }}\r\n    >\r\n        <View style={[paddView,{alignItems:\"center\", alignContent:\"center\"}]}>\r\n            <SubscriptionSettingsView submitRef={submitRef} />\r\n        </View>\r\n    </ScrollWithButtons >\r\n}","import { Icon, Text } from \"@ui-kitten/components\";\r\nimport { useEffect, useRef } from \"react\";\r\nimport { Animated, Pressable, View } from \"react-native\";\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\"\r\nimport { AppColors } from \"../../constants/Colors\";\r\nimport { bannerText, sizes, thinBannerText } from \"../../style\";\r\nimport { CreateAccountProps, sideMargin } from \"./shared\"\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { ProfileButton } from \"../../components/ProfileButton\";\r\nimport { ElevatedSection } from \"../../components/Section\";\r\nimport { useData } from \"../../lds\";\r\nimport { useLinkTo, useNavigation } from \"@react-navigation/native\";\r\nimport React from \"react\";\r\nimport { useAppUser } from \"../../Authentication\";\r\nexport const ProfileIconSection = (props: CreateAccountProps) => {\r\n    const opacityAnim = useRef(new Animated.Value(0)).current;\r\n    const { value: hasAuthed, setValue } = useData(\"hasAuthed\");\r\n    const { loginState } = useAppUser();\r\n    const nav = useNavigation();\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n\r\n    return <ScrollWithButtons\r\n        buttons={{\r\n            right: {\r\n                text: \"Go To Trading Post!\",\r\n                onPress: () => {\r\n                    setValue(true);\r\n                    nav.navigate(\"AppInformation\");\r\n\r\n                    //linkTo('/dash/feed')\r\n                }\r\n            },\r\n\r\n        }}\r\n    >\r\n        <Animated.View style={{ opacity: opacityAnim, padding: sideMargin }} >\r\n            <ElevatedSection title=\"\">\r\n                <Text style={[thinBannerText]}>Tap to Modify Profile Picture</Text>\r\n                <ProfileButton userId={props.user.data.id} profileUrl={loginState?.appUser?.profile_url || \"\"} size={sizes.rem16} editable />\r\n                <Text style={[thinBannerText]}>Tip: Profile pictures will help others quickly identify you when on the platform.</Text>\r\n            </ElevatedSection>\r\n        </Animated.View>\r\n    </ScrollWithButtons>\r\n}","import React, { useState, useRef, useEffect, RefObject, useMemo } from \"react\";\r\nimport { Alert, TouchableOpacity, Image, ImageStyle, ViewStyle, View, Animated } from \"react-native\";\r\n//import { Navigation } from \"react-native-navigation\";\r\n//import { Nav } from '@react-navigation/native'\r\nimport { Input, Text, } from \"@ui-kitten/components\";\r\n//import { signOut, getStoredCreds, CreateAuth0User, UpdateUserProfile, signInStoredCreds } from \"../../apis/Authentication\";\r\nimport { ButtonField } from \"../../components/ButtonField\";\r\nimport { IconifyIcon } from \"../../components/IconfiyIcon\";\r\nimport { Section } from \"../../components/Section\";\r\nimport { TextField, ITextField } from \"../../components/TextField\";\r\nimport { bannerText, flex, sizes, textInputWiz } from \"../../style\";\r\nimport { bindTextInput, IEntity, useReadonlyEntity } from \"../../utils/hooks\";\r\nimport { isRequired, isValidEmail, isAlphaNumeric } from \"../../utils/validators\";\r\nimport { CreateAccountProps, sideMargin } from \"./shared\";\r\n\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\";\r\nimport { useData } from \"../../lds\";\r\nimport { Label } from \"../../components/Label\";\r\nimport { TBI } from \"../../utils/misc\";\r\nimport { AppColors } from \"../../constants/Colors\";\r\nimport Auth from '@tradingpost/common/api/entities/static/AuthApi'\r\nimport UserApi from '@tradingpost/common/api/entities/apis/UserApi'\r\nimport { IUserGet } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport { useAppUser } from \"../../Authentication\";\r\nimport { useLinkTo, useNavigation } from \"@react-navigation/native\";\r\nimport { registerDeviceForNotifications } from \"../../utils/notifications\";\r\nimport { HtmlView } from \"../../components/HtmlView\";\r\n\r\n\r\n\r\n\r\nexport function TermsScreen(props: CreateAccountProps) {\r\n    const\r\n        nav = useNavigation(),\r\n        [lockButtons, setLockButtons] = useState(false),\r\n        opacityAnim = useRef(new Animated.Value(0)).current,\r\n        linkTo = useLinkTo(),\r\n        buttonConfig = {\r\n            locked: lockButtons,\r\n            right: {\r\n                text: \"Go Back\",\r\n                onPress: async () => {\r\n                    linkTo(\"/create/logininfo\")\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n\r\n\r\n    return <ScrollWithButtons\r\n        fillHeight\r\n        buttons={buttonConfig}>\r\n        <HtmlView\r\n            style={{ flex: 1 }}\r\n            isUrl\r\n        >{\"https://tradingpostapp.com/terms-of-service\"}</HtmlView>\r\n    </ScrollWithButtons>\r\n}\r\n","import React, { useState, useRef, useEffect, RefObject, useMemo } from \"react\";\r\nimport { Alert, TouchableOpacity, Image, ImageStyle, ViewStyle, View, Animated } from \"react-native\";\r\n//import { Navigation } from \"react-native-navigation\";\r\n//import { Nav } from '@react-navigation/native'\r\nimport { Input, Text, } from \"@ui-kitten/components\";\r\n//import { signOut, getStoredCreds, CreateAuth0User, UpdateUserProfile, signInStoredCreds } from \"../../apis/Authentication\";\r\nimport { ButtonField } from \"../../components/ButtonField\";\r\nimport { IconifyIcon } from \"../../components/IconfiyIcon\";\r\nimport { Section } from \"../../components/Section\";\r\nimport { TextField, ITextField } from \"../../components/TextField\";\r\nimport { bannerText, flex, sizes, textInputWiz } from \"../../style\";\r\nimport { bindTextInput, IEntity, useReadonlyEntity } from \"../../utils/hooks\";\r\nimport { isRequired, isValidEmail, isAlphaNumeric } from \"../../utils/validators\";\r\nimport { CreateAccountProps, sideMargin } from \"./shared\";\r\n\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\";\r\nimport { useData } from \"../../lds\";\r\nimport { Label } from \"../../components/Label\";\r\nimport { TBI } from \"../../utils/misc\";\r\nimport { AppColors } from \"../../constants/Colors\";\r\nimport Auth from '@tradingpost/common/api/entities/static/AuthApi'\r\nimport UserApi from '@tradingpost/common/api/entities/apis/UserApi'\r\nimport { IUserGet } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport { useAppUser } from \"../../Authentication\";\r\nimport { useLinkTo, useNavigation } from \"@react-navigation/native\";\r\nimport { registerDeviceForNotifications } from \"../../utils/notifications\";\r\nimport { HtmlView } from \"../../components/HtmlView\";\r\n\r\n\r\n\r\n\r\nexport function PrivacyScreen(props: CreateAccountProps) {\r\n    const\r\n        nav = useNavigation(),\r\n        [lockButtons, setLockButtons] = useState(false),\r\n        opacityAnim = useRef(new Animated.Value(0)).current,\r\n        linkTo = useLinkTo(),\r\n        buttonConfig = {\r\n            locked: lockButtons,\r\n            right: {\r\n                text: \"Go Back\",\r\n                onPress: async () => {\r\n                    linkTo(\"/create/logininfo\")\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n\r\n\r\n    return <ScrollWithButtons\r\n        fillHeight\r\n        buttons={buttonConfig}>\r\n        <HtmlView\r\n            style={{ flex: 1 }}\r\n            isUrl\r\n        >{\"https://tradingpostapp.com/privacy-policy\"}</HtmlView>\r\n    </ScrollWithButtons>\r\n}\r\n","/**\r\n * Learn more about deep linking with React Navigation\r\n * https://reactnavigation.org/docs/deep-linking\r\n * https://reactnavigation.org/docs/configuring-links\r\n */\r\n\r\nimport { getActionFromState, getStateFromPath, LinkingOptions } from '@react-navigation/native';\r\nimport * as Linking from 'expo-linking';\r\nimport { NavIconKeys, navIcons } from '../images';\r\nimport { screens } from '../screens/CreateAccountScreen';\r\n\r\nconst ConfigOverride: Partial<Record<NavIconKeys, any>> = {\r\n    Notification: {\r\n        path: \"dash/notification\",\r\n    }\r\n};\r\n\r\nconst linking: LinkingOptions<any> = {\r\n    prefixes: [Linking.createURL('/'), \"https://m.tradingpostapp.com\"],\r\n    config: {\r\n        screens: {\r\n            Root: \"login\",\r\n            Create: {\r\n                screens: {\r\n                    Root: {\r\n                        screens: (() => {\r\n                            const output: Record<string, string> = {}\r\n                            Object.keys(screens).map((k) => {\r\n                                output[k] = \"create/\" + k.toLowerCase();\r\n                            })\r\n                            return output;\r\n                        })()\r\n                    }\r\n                }\r\n            },\r\n            Dash: {\r\n                screens: {\r\n                    Root: {\r\n                        screens: (() => {\r\n                            const output: Record<string, string> = {}\r\n                            Object.keys(navIcons).map((k) => {\r\n                                output[k] = ConfigOverride[k as NavIconKeys] || \"dash/\" + k.toLowerCase();\r\n                            })\r\n                            return output;\r\n                        })()\r\n                    }\r\n                }\r\n            },\r\n            BlockedUsers:\"blocked\",\r\n            Profile: \"profile\",\r\n            PostScreen: \"post\",\r\n            AccountInformation: \"account\",\r\n            VerifyAccount: \"verifyaccount\",\r\n            ResetPassword: \"resetpassword\",\r\n            NotificationTrade: \"dash/notification/trade\",\r\n            Auth: \"auth/:platform\",\r\n            WatchlistViewer: \"WatchlistViewer/:watchlistId\",\r\n            Modal: 'modal',\r\n            NotFound: '*',\r\n        },\r\n    },\r\n    getStateFromPath: (path, options) => {\r\n        const state = getStateFromPath(path, options);\r\n        // Replaces the current screen if $replace is in the parameter\r\n        // ...not sure if this will work properly in all navigation situations\r\n        // maybe need to make this only work if the navigator is a dash? or look for the last dash navigator\r\n        if (state && (state.routes?.[state.routes.length - 1]?.params as any)?.$replace && state.routes.length > 1) {\r\n            console.log(\"Running a replace ....\");\r\n            delete (state.routes?.[state.routes.length - 1]?.params as any).$replace;\r\n            state.routes.splice(state.routes.length - 2, 1);\r\n        }\r\n\r\n        return state;\r\n\r\n    },\r\n    getActionFromState: (state, options) => {\r\n        const action = getActionFromState(state, options);\r\n        return action;\r\n    }\r\n};\r\n\r\nexport default linking;\r\n","import { StyleSheet, TouchableOpacity } from 'react-native';\r\n\r\nimport { Text, View } from '../components/Themed';\r\nimport { RootStackScreenProps } from '../types';\r\n\r\nexport default function NotFoundScreen({ navigation }: RootStackScreenProps<'NotFound'>) {\r\n  return (\r\n    <View style={styles.container}>\r\n      <Text style={styles.title}>This screen doesn't exist.</Text>\r\n      <TouchableOpacity onPress={() => navigation.replace('Root')} style={styles.link}>\r\n        <Text style={styles.linkText}>Go to home screen!</Text>\r\n      </TouchableOpacity>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    padding: 20,\r\n  },\r\n  title: {\r\n    fontSize: 20,\r\n    fontWeight: 'bold',\r\n  },\r\n  link: {\r\n    marginTop: 15,\r\n    paddingVertical: 15,\r\n  },\r\n  linkText: {\r\n    fontSize: 14,\r\n    color: '#2e78b7',\r\n  },\r\n});\r\n","import { View, Animated, ImageStyle, Pressable, ViewStyle } from \"react-native\";\r\nimport React, { useEffect, useRef } from \"react\";\r\nimport { Text, Image } from \"react-native\";\r\nimport { IconifyIcon } from \"./IconfiyIcon\";\r\nimport UserLogo from '../assets/@iconify/user'\r\n\r\nimport { flex, row, sizes } from \"../style\";\r\nimport { useWindowDimensions } from \"react-native\";\r\nimport { social } from \"../images\";\r\n//import { ImageResultCallback, openImagePicker } from \"../screens/ImagePickerScreen\";\r\nimport ProfileBg from '../assets/profile/profileBg.png'\r\nimport { NavigationProp } from \"@react-navigation/native\";\r\nimport { AppColors } from \"../constants/Colors\";\r\nimport { Interface } from \"@tradingpost/common/api\";\r\n\r\n\r\n\r\nexport const profileImageSize = sizes.rem6;\r\nexport const profileImageSmall = sizes.rem4;\r\nexport const actionPanelSize = sizes.rem2;\r\nconst profileImageStyle = {\r\n    height: profileImageSize,\r\n    width: profileImageSize,\r\n    position: \"absolute\",\r\n    borderRadius: profileImageSize / 2,\r\n    backgroundColor: \"darkgray\",\r\n    bottom: 0\r\n}\r\n\r\nconst profileImageSmallStyle = {\r\n    height: profileImageSmall,\r\n    width: profileImageSmall,\r\n    borderRadius: profileImageSmall / 2,\r\n    backgroundColor: \"darkgray\",\r\n    position: \"absolute\",\r\n    left: sizes.rem1,\r\n    bottom: 0\r\n}\r\n\r\n\r\nexport function useProfileBannerSize() {\r\n    const dim = useWindowDimensions();\r\n    return Math.min(dim.width, 680) / bannerAspectRatio + actionPanelSize;\r\n}\r\n\r\nconst bannerAspectRatio = 21 / 9;//16 / 9;\r\nconst viewStyle: ViewStyle = {\r\n    backgroundColor: \"lightgray\",\r\n    aspectRatio: bannerAspectRatio,\r\n    width: \"100%\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"flex-end\"\r\n};\r\n\r\ntype ImageResultCallback = (a: any, b: any) => void;\r\n\r\nexport function ProfileBanner<T extends boolean>(props: { subscriberCount: number | undefined, profilePic: string | undefined, bannerPic: string | undefined, editMode?: T, collapse?: boolean, extraMarginTop?: number, navigator: NavigationProp<any>, platforms: string[] } &\r\n    (T extends true ? {\r\n        onBannerPicked: ImageResultCallback,\r\n        onProfilePicked: ImageResultCallback\r\n\r\n    } : { onBannerPicked?: ImageResultCallback, onProfilePicked?: ImageResultCallback })\r\n) {\r\n    const { profilePic, collapse } = props;\r\n\r\n    return <View style={{ alignItems: \"center\", width: \"100%\" }}>\r\n        <Pressable\r\n            key=\"imagepart\"\r\n\r\n            style={[viewStyle, { backgroundColor: AppColors.primary }, collapse ? { marginTop: actionPanelSize / 2 + (props.extraMarginTop || 0) } : undefined]}\r\n        >\r\n            {/* <Image style={{ width: \"100%\", height: \"100%\", position: \"absolute\" }} source={ProfileBg} /> */}\r\n            {\r\n                /*</> :\r\n                <View style={[row, { backgroundColor: \"blue\", width: \"100%\" }]}>\r\n                    <ProfilePic profilePic={profilePic} collapse={collapse} editMode={props.editMode} />\r\n                </View>\r\n                */\r\n            }\r\n        </Pressable>\r\n        {!collapse && <View key=\"uncollapseFoot\" style={[row, {\r\n            width: \"100%\",\r\n            alignSelf: \"stretch\",\r\n            height: actionPanelSize,\r\n            backgroundColor: \"white\",\r\n            alignContent: \"center\",\r\n            alignItems: \"center\"\r\n        }]}>\r\n            <Text style={[flex, {\r\n                maxWidth: '48%', // some weird ness here where the  social bar/ this container is weider than the screen so creating a horizontial scroll bar\r\n                textAlign: \"center\", transform: [{\r\n                    translateX: -profileImageSize / 4,\r\n                }]\r\n            }]}>Subscribers {props.subscriberCount || \"-\"}</Text>\r\n            <View style={[row, flex, {\r\n                justifyContent: \"center\",\r\n                height: sizes.rem1_5,\r\n                maxWidth: '50%',\r\n                transform: [{\r\n                    translateX: profileImageSize / 4\r\n                }]\r\n            }]}>\r\n                <SocialBar claims={props.platforms} />\r\n            </View>\r\n        </View>}\r\n        {collapse && <View key=\"collapseFoot\" style={[{\r\n            width: \"100%\",\r\n            alignSelf: \"stretch\",\r\n            height: actionPanelSize,\r\n            backgroundColor: \"white\",\r\n            alignContent: \"center\",\r\n            alignItems: \"center\"\r\n        }]}>\r\n            <View style={[row, { height: \"100%\", alignSelf: \"flex-end\", marginRight: sizes.rem1 }]}>\r\n                <SocialBar claims={props.platforms} />\r\n            </View>\r\n        </View>}\r\n        <ProfilePic profilePic={profilePic} collapse={collapse} editMode={props.editMode} navigator={props.navigator}\r\n            onProfilePicked={props.onProfilePicked} />\r\n    </View>\r\n}\r\n\r\nconst SocialBar = (props: { claims: string[] }) => {\r\n    //{social.TwitterLogo, social.LinkedInLogo, social.YouTubeLogo}\r\n    return <>\r\n        {[\"Twitter\", \"YouTube\", \"Spotify\"].map((logoName, i) => {\r\n            //social.TwitterLogo, social.LinkedInLogo, social.YouTubeLogo\r\n            //social.TwitterLogo, social.LinkedInLogo, social.YouTubeLogo\r\n            const logo = social[logoName + \"Logo\" as keyof typeof social];\r\n            return props.claims.find((c) => c.toLowerCase() === logoName.toLowerCase()) ?\r\n                <View key={`socialV_${i}`} style={{ height: \"100%\", aspectRatio: 1 }}>\r\n                    <IconifyIcon key={`social_${i}`} icon={logo} svgProps={{ height: \"75%\" }}\r\n                        style={{ height: \"75%\", margin: \"12.5%\", aspectRatio: 1 }} />\r\n                </View> : undefined\r\n        })}\r\n    </>\r\n}\r\n\r\nfunction ProfilePic(props: { profilePic: string | undefined, collapse: boolean | undefined, editMode: boolean | undefined, navigator: NavigationProp<any>, onProfilePicked?: ImageResultCallback }) {\r\n    const { profilePic, collapse, editMode } = props;\r\n    const style = collapse ? profileImageSmallStyle : profileImageStyle\r\n    return <Pressable disabled={!editMode} style={style as ViewStyle}\r\n    // onPress={() =>\r\n    //     openImagePicker(props.componentId, {\r\n    //     onImagePicked: props.onProfilePicked,\r\n    //     cropSettings: {\r\n    //         height: 256 * 4,\r\n    //         width: 256 * 4\r\n    //     }\r\n    // })}\r\n\r\n    >\r\n        {profilePic ? <Image source={{ uri: profilePic }} style={[style as ImageStyle, { left: 0 }]} /> :\r\n            <IconifyIcon\r\n                style={{ height: \"120%\", width: \"120%\", left: \"-10%\" }}\r\n                icon={UserLogo}\r\n                currentColor='black'\r\n            />}\r\n    </Pressable>\r\n}","import {NavigationProp, useNavigation} from \"@react-navigation/native\"\r\nimport {Interface} from \"@tradingpost/common/api\"\r\nimport {Avatar, Text} from \"@ui-kitten/components\"\r\nimport React from \"react\"\r\nimport {Pressable, View, ViewStyle} from \"react-native\"\r\nimport {flex, sizes} from \"../style\"\r\nimport {ProfileButton} from \"./ProfileButton\"\r\n\r\nexport const ProfileBar = (props: {\r\n    user?: Interface.IUserList,\r\n    style?: ViewStyle\r\n}) => {\r\n    const nav = useNavigation<NavigationProp<any>>();\r\n    const openProfile = () => {\r\n        if (props.user?.id) {\r\n            nav.navigate(\"Profile\", {\r\n                userId: props.user.id\r\n            });\r\n        }\r\n    }\r\n\r\n    return <View style={props.style}><View style={{flexDirection: \"row\", width: \"100%\", marginBottom: sizes.rem0_5}}>\r\n        <ProfileButton userId={props.user?.id || \"\"} profileUrl={props.user?.profile_url || \"\"} size={sizes.rem6 / 2}/>\r\n        <View style={[flex, {marginLeft: sizes.rem0_5, justifyContent: 'center', alignItems: 'flex-start'}]}>\r\n            <Pressable style={props.user?.display_name.length && props.user?.display_name.length > 1 ? {display: 'flex'} : {display: 'none'}} onPress={openProfile}><Text category={\"s1\"}>{props.user?.display_name}</Text></Pressable>\r\n            <Pressable onPress={openProfile}><Text category={\"s2\"}>{\"@\" + props.user?.handle}</Text></Pressable>\r\n        </View>\r\n    </View>\r\n    </View>\r\n}","import React from \"react\";\r\nimport { Button } from \"@ui-kitten/components\";\r\nimport { AppColors } from \"../constants/Colors\";\r\nimport { sizes } from \"../style\";\r\nimport { Text, ViewStyle } from 'react-native'\r\nexport function PrimaryChip(props: { label: string, isAlt?: boolean, style?: ViewStyle }) {\r\n    const color = props.isAlt ? AppColors.secondary : AppColors.primary\r\n    return <Button\r\n        key={props.label}\r\n        size={'tiny'}\r\n        style={[{ borderRadius: 16, backgroundColor: color, borderColor: color, marginRight: sizes.rem1 / 4, height: sizes.rem2, minHeight: sizes.rem2 }, props.style]}\r\n    //label={props.label}\r\n    ><Text numberOfLines={1} style={{ color: \"white\" }}>{props.label}</Text></Button>\r\n}","import React from \"react\";\r\nimport { Image, ImageBackground, ImageStyle } from \"react-native\";\r\nimport { sizes } from \"../style\";\r\n\r\nexport function IconButton(props: { iconSource: number, style?: ImageStyle }) {\r\n    return <Image source={props.iconSource} resizeMode=\"contain\" style={[ {height:24}, props.style]}/>\r\n} ","import React, { ReactNode, useState } from \"react\";\r\nimport { Pressable } from \"react-native\";\r\n\r\nexport const AsyncPressable = (props: { children: ReactNode, onPress?: () => Promise<void> }) => {\r\n    const [isDisabled, setIsDisabled] = useState(false);\r\n    const { onPress, children } = props;\r\n    return <Pressable disabled={isDisabled} onPress={async () => {\r\n        setIsDisabled(true);\r\n\r\n        if (onPress)\r\n            await onPress();\r\n\r\n        setIsDisabled(false);\r\n\r\n    }}>{children}</Pressable>\r\n}","import React from \"react\"\r\nimport { Share, Pressable, ViewStyle } from \"react-native\"\r\nimport ShareIcon from '../assets/@iconify/share'\r\nimport { IconifyIcon } from \"./IconfiyIcon\"\r\n\r\nexport const ShareButton = (props: { style?: ViewStyle, title: string, url: string, color?: string }) => {\r\n    return <Pressable onPress={() => {\r\n        Share.share({\r\n            title: props.url,\r\n            url: props.url,\r\n            message: props.title\r\n\r\n        }, {\r\n\r\n        })\r\n    }}>\r\n        <IconifyIcon icon={ShareIcon} style={props.style} currentColor={props.color || \"black\"} />\r\n    </Pressable>\r\n}","import { Modal, Card, Button, Icon } from \"@ui-kitten/components\"\r\nimport { Share, ScrollView, Pressable, StyleSheet, Text } from \"react-native\"\r\nimport { useToast } from \"react-native-toast-notifications\"\r\nimport toast from \"react-native-toast-notifications/lib/typescript/toast\"\r\nimport { Header } from \"./Headers\"\r\nimport { ElevatedSection } from \"./Section\"\r\nimport { Api } from '@tradingpost/common/api'\r\nimport { useState } from \"react\"\r\nimport { Picker } from \"./Picker\"\r\nimport { PrimaryButton } from \"./PrimaryButton\"\r\nimport { SecondaryButton } from \"./SecondaryButton\"\r\nimport { KeyboardAvoidingInput } from \"./KeyboardAvoidingInput\"\r\n\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        minHeight: 192,\r\n    },\r\n    backdrop: {\r\n        backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n    },\r\n});\r\n\r\n\r\nconst HardcodedReportingReasons = [\r\n    {\r\n        text: \"I just dont like it\",\r\n        value: \"I just dont like it\"\r\n    },\r\n    {\r\n        text: \"It's spam\",\r\n        value: \"It's spam\"\r\n    },\r\n    {\r\n        text: \"Nudity or sexual activity\",\r\n        value: \"Nudity or sexual activity\"\r\n    },\r\n    {\r\n        text: \"Hate speech or symbols\",\r\n        value: \"Hate speech or symbols\"\r\n    },\r\n    {\r\n        text: \"Bullying or harassment\",\r\n        value: \"Bullying or harassment\"\r\n    },\r\n    {\r\n        text: \"False information\",\r\n        value: \"False information\"\r\n    },\r\n    {\r\n        text: \"Violence or dangerous organizations\",\r\n        value: \"Violence or dangerous organizations\"\r\n    },\r\n    {\r\n        text: \"Scam or fraud\",\r\n        value: \"Scam or fraud\"\r\n    },\r\n    {\r\n        text: \"Intellectual property violation\",\r\n        value: \"Intellectual property violation\"\r\n    },\r\n    {\r\n        text: \"Sale of illegal or regulated goods\",\r\n        value: \"Sale of illegal or regulated goods\"\r\n    },\r\n    {\r\n        text: \"Suicide or self-injury\",\r\n        value: \"Suicide or self-injury\"\r\n    },\r\n    {\r\n        text: \"Eating disorders\",\r\n        value: \"Eating disorders\"\r\n    },\r\n];\r\n\r\nconst categories = {\r\n    // \"post_share\": {\r\n    //     title: \"Share Post\",\r\n    //     icon: \"\"\r\n    // },\r\n    \"user_share\": {\r\n        title: \"Share Profile\",\r\n        icon: \"share-outline\"\r\n    },\r\n    \"post_report\": {\r\n        title: \"Report Post\",\r\n        icon: \"flag\"\r\n    },\r\n    // \"user_report\": {\r\n    //     title: \"Report User\",\r\n    //     icon: \"\"\r\n    // },\r\n    \"user_block\": {\r\n        title: \"Block User\",\r\n        icon: \"slash\"\r\n    },\r\n}\r\n\r\nexport const ExtendedMenuModal = (props: { userId: string, postId?: string, visible: boolean, onShouldClose: (userBlocked: boolean) => void }) => {\r\n    const { visible, onShouldClose, postId, userId } = props;\r\n    const toast = useToast();\r\n    const [menuCategory, setMenuCategory] = useState<keyof typeof categories>();\r\n    const [menuValue, setMenuValue] = useState<string>();\r\n    const [details, setDetails] = useState<string>();\r\n\r\n    const closeMenu = (block: boolean) => {\r\n        setMenuValue(undefined);\r\n        setMenuCategory(undefined);\r\n        onShouldClose(block);\r\n    }\r\n\r\n    return <Modal\r\n        visible={visible}\r\n        backdropStyle={styles.backdrop}\r\n        onBackdropPress={() => closeMenu(false)}\r\n        style={{ width: '100%', alignItems: 'center' }}\r\n    >\r\n        <Card style={{ width: '90%' }}>\r\n            <Header text={menuCategory !== \"post_report\" ? \"Menu\" : 'Reason for Reporting Post'} />\r\n            <ScrollView style={{ maxHeight: 400 }}>\r\n                {!menuCategory && Object.keys(categories).filter((k) => postId || k.substring(0, 5) !== \"post_\").map((k) => {\r\n                    const item = categories[k as keyof typeof categories];\r\n                    return <Pressable onPress={async () => {\r\n                        const cat = k as keyof typeof categories\r\n                        switch (cat) {\r\n                            case \"user_share\":\r\n                                const link = \"https://m.tradingpostapp.com/profile?userId=\" + userId\r\n                                Share.share({\r\n                                    title: link,\r\n                                    url: link,\r\n                                    message: link\r\n                                }, {})\r\n                                closeMenu(false);\r\n                                break;\r\n                            case \"user_block\":\r\n                                Api.User.extensions.setBlocked({\r\n                                    userId,\r\n                                    block: true\r\n                                });\r\n                                closeMenu(true);\r\n                                break;\r\n                            default:\r\n                                setMenuCategory(cat);\r\n                        }\r\n                    }}>\r\n                        <ElevatedSection title='' style={{ flexDirection: \"row\" }}>\r\n                            <Text style={{ lineHeight: 32, flex: 1 }}>\r\n                                {item.title}\r\n                            </Text>\r\n                            <Icon name={item.icon} height={32} width={32} />\r\n                        </ElevatedSection>\r\n                    </Pressable>\r\n\r\n                })}\r\n                {menuCategory === \"post_report\" && postId &&\r\n                    <><Picker\r\n                        placeholder={\"Pick A Reason\"}\r\n                        value={menuValue}\r\n                        onSelect={(item) => {\r\n                            setMenuValue(HardcodedReportingReasons[item.row].value)\r\n                        }}\r\n                        items={\r\n                            HardcodedReportingReasons.map(h => {\r\n                                return {\r\n                                    label: h.text,\r\n                                    value: h.value\r\n                                }\r\n                            })\r\n                        } />\r\n                        {menuValue && <KeyboardAvoidingInput\r\n                            value={details}\r\n                            displayButton={false}\r\n                            numLines={3}\r\n                            placeholder={'Reason Details...'}\r\n                            setValue={(text: string) => {\r\n                                setDetails(text);\r\n                            }}\r\n                        />}\r\n                    </>\r\n                }\r\n            </ScrollView>\r\n\r\n            {postId && menuCategory === \"post_report\" && menuValue && <PrimaryButton\r\n\r\n                style={{ marginTop: 10 }}\r\n                onPress={async () => {\r\n\r\n                    toast.show('Post has been reported!')\r\n                    closeMenu(false);\r\n                    await Api.Post.extensions.report({\r\n                        postId: postId,\r\n                        reason: \"\",\r\n                        details: details || \"\"\r\n                    })\r\n                }} >Report</PrimaryButton>}\r\n            {/*<SecondaryButton style={{ marginTop: 10 }} onPress={() => {\r\n                closeMenu(false);\r\n            }\r\n\r\n            }>Cancel</SecondaryButton>*/}\r\n        </Card>\r\n    </Modal>\r\n\r\n}","import React, { useState } from 'react'\r\nimport {\r\n    Linking,\r\n    Pressable,\r\n    ScrollView,\r\n    Text,\r\n    View,\r\n    StyleSheet\r\n} from 'react-native'\r\nimport { Button, Card, Modal } from '@ui-kitten/components'\r\n\r\nimport { flex, fonts, row, shadow, sizes } from '../style'\r\n\r\nimport { IconifyIcon } from './IconfiyIcon'\r\nimport { Header, Subheader } from './Headers'\r\nimport { PrimaryChip } from './PrimaryChip'\r\nimport {\r\n    BookmarkActive,\r\n    BookmarkIcons,\r\n    CommentIcon,\r\n    social,\r\n    UpvoteIcon,\r\n    Retweet,\r\n    PremiumStar,\r\n    EllipsesIcon\r\n} from '../images'\r\nimport { social as socialStyle } from '../style'\r\nimport { IconButton } from './IconButton'\r\nimport { toFormatedDateTime } from '../utils/misc'\r\nimport { AsyncPressable } from './AsyncPressable'\r\nimport { Api, Interface } from '@tradingpost/common/api'\r\nimport { HtmlView } from './HtmlView'\r\nimport { useWindowDimensions } from 'react-native'\r\nimport { ProfileButton } from './ProfileButton'\r\nimport { NavigationProp, useNavigation } from \"@react-navigation/native\"\r\nimport { RootStackParamList } from '../navigation/pages'\r\nimport { ShareButton } from './ShareButton'\r\nimport { ElevatedSection } from \"./Section\";\r\nimport { useToast } from 'react-native-toast-notifications'\r\nimport { ExtendedMenuModal } from './ExtendedMenuModal'\r\n\r\n\r\nconst postTotalVerticalMargin = sizes.rem1;\r\nconst postTotalHorizontalMargin = sizes.rem2;\r\nconst postSidePad = sizes.rem2;\r\nconst postTotalBorder = 2//4;\r\nexport const spaceOnSide = postTotalHorizontalMargin + postTotalBorder + postSidePad\r\n\r\nexport const postInnerHeight = (itm: Interface.IElasticPost | undefined, windowWidth: number) => {\r\n    const size = (itm as Interface.IElasticPost | undefined)?._source.size\r\n    if (itm?._source.postType === \"substack\") {\r\n        return 200;\r\n    } else if (itm?._source.postType === \"tradingpost\" && size) {\r\n        return (windowWidth / size.aspectRatio) * (fonts.small / fonts.xSmall) + fonts.medium\r\n    } else if (size) {\r\n        return windowWidth / size.aspectRatio + (itm?._source.postType === \"tweet\" ? 20 * windowWidth / itm._source.size.maxWidth : 0);\r\n    } else if (itm?._source.postType === \"youtube\") {\r\n        return windowWidth / (390 / 230);\r\n    } else if (itm?._source.postType === \"spotify\") {\r\n        return windowWidth / (360 / 162);\r\n    } else {\r\n        return 200;\r\n    }\r\n}\r\nexport const resolvePostContent = (itm: Interface.IElasticPost | undefined, windowWidth: number) => {\r\n    switch (itm?._source.postType) {\r\n        case \"youtube\":\r\n            return \"https:\" + itm._source.postUrl.replace(\"https://www.youtube.com/watch?v=\", \"//www.youtube.com/embed/\");\r\n        case 'tweet':\r\n            return `<html><head>\r\n            <style>\r\n            .blink_me {\r\n                animation: blinker 1s linear infinite;\r\n              }\r\n              \r\n              @keyframes blinker {\r\n                50% {\r\n                  opacity: 0;\r\n                }\r\n              }\r\n            </style>\r\n            <script>                \r\n                const tracker = setInterval(()=>{\r\n                    if(document.querySelector(\".twitter-tweet-rendered\")){\r\n                        clearInterval(tracker);  \r\n                        document.getElementById(\"wrapper\").style.opacity=1;\r\n                        document.getElementById(\"loader\").style.opacity=0.99;\r\n                        setTimeout(()=>{\r\n                            document.getElementById(\"loader\").style.display=\"none\";\r\n                        },2000)\r\n                    }\r\n                },333)    \r\n\r\n            </script><meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0\"></meta></head>\r\n            <body style=\"margin:0; padding:0;width:${itm._source.size.maxWidth}px;transform: scale(${windowWidth / itm._source.size.maxWidth});transform-origin: top left;\">\r\n            <div id=\"loader\" style=\"background-color:white; position:absolute; height:100%; width:100%\">\r\n             <img class=\"blink_me\" style=\"position:absolute; margin:auto; left:0; right:0; top:0; bottom:0; height:40px; width:40px\" src=\"data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e %3csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' viewBox='0 0 248 204'%3e%3cpath fill='%231d9bf0' d='M221.95 51.29c.15 2.17.15 4.34.15 6.53 0 66.73-50.8 143.69-143.69 143.69v-.04c-27.44.04-54.31-7.82-77.41-22.64 3.99.48 8 .72 12.02.73 22.74.02 44.83-7.61 62.72-21.66-21.61-.41-40.56-14.5-47.18-35.07 7.57 1.46 15.37 1.16 22.8-.87-23.56-4.76-40.51-25.46-40.51-49.5v-.64c7.02 3.91 14.88 6.08 22.92 6.32C11.58 63.31 4.74 33.79 18.14 10.71c25.64 31.55 63.47 50.73 104.08 52.76-4.07-17.54 1.49-35.92 14.61-48.25 20.34-19.12 52.33-18.14 71.45 2.19 11.31-2.23 22.15-6.38 32.07-12.26-3.77 11.69-11.66 21.62-22.2 27.93 10.01-1.18 19.79-3.86 29-7.95-6.78 10.16-15.32 19.01-25.2 26.16z'/%3e%3c/svg%3e\" />\r\n            </div>\r\n            <div id=\"wrapper\" style=\"opacity:0; min-height:${itm._source.size.maxWidth / itm._source.size.aspectRatio}px\">\r\n            ${itm._source.content.htmlBody}\r\n            </div>\r\n            </body></html>`\r\n        case 'spotify':\r\n            const matches = /src=\"(.*)\"/.exec(itm._source.content.body);\r\n            return matches?.[1] || \"\";\r\n        case 'tradingpost':\r\n            return `\r\n                <html><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n                    <body>\r\n                        <div style=\"font-size: ${fonts.medium}px; font-weight: 600px; line-height: ${fonts.medium * 1}px; margin-bottom: 10px\">${itm._source.content.title}</div>\r\n                        <div style=\"font-size: ${fonts.small}px; margin: 0px 3px 0px\">${itm._source.content.body}</div>\r\n                    </body>    \r\n                </html>\r\n                `\r\n        case 'substack':\r\n        //return SubstackView({post: itm});\r\n        default:\r\n            return itm?._source.content.htmlBody || \"\";\r\n    }\r\n}\r\n\r\n\r\nexport function PostView(props: { post: Interface.IElasticPostExt, onReloadNeeded?: () => void }) {\r\n    const { post } = props\r\n    const nav = useNavigation<NavigationProp<RootStackParamList>>();\r\n\r\n    const [isBookmarked, setIsBookmarked] = useState(Boolean(post.ext.is_bookmarked));\r\n    const [isUpvoted, setIsUpvoted] = useState(Boolean(post.ext.is_upvoted));\r\n    const [upvoteCount, setUpvoteCount] = useState(post.ext.upvoteCount || 0);\r\n    const [showStatus, setShowStatus] = useState(false);\r\n    const [modalVisible, setModalVisible] = useState(false);\r\n\r\n    const toast = useToast()\r\n\r\n    return <View>\r\n        <ExtendedMenuModal onShouldClose={(blocked) => {\r\n            if (blocked && props.onReloadNeeded)\r\n                props.onReloadNeeded();\r\n\r\n            setModalVisible(false)\r\n        }} userId={post._source.user.id} postId={post._id} visible={modalVisible} />\r\n        <View style={{ marginHorizontal: postTotalHorizontalMargin / 2, marginVertical: postTotalVerticalMargin / 2 }}>\r\n            <View\r\n                style={[shadow, {\r\n                    backgroundColor: \"white\",\r\n                    borderRadius: sizes.borderRadius * 4,\r\n                    borderColor: \"#ccc\",\r\n                    borderWidth: postTotalBorder / 2\r\n                }]}>\r\n                <Pressable\r\n                    style={[row, {\r\n                        alignItems: \"center\",\r\n                        overflow: \"hidden\",\r\n                        borderBottomColor: \"#ccc\",\r\n                        borderBottomWidth: 1,\r\n                        padding: sizes.rem1 / 2\r\n                    }]}>\r\n                    <ProfileButton userId={props.post._source.user.id}\r\n                        profileUrl={props.post.ext.user?.profile_url || \"\"} size={48} />\r\n                    <View style={[flex, { marginLeft: sizes.rem1 }]}>\r\n                        <Pressable onPress={() => {\r\n                            if (props.post._source.user.id)\r\n                                nav.navigate(\"Profile\", {\r\n                                    userId: props.post._source.user.id\r\n                                } as any);\r\n                        }}\r\n                        >\r\n                            <Subheader text={\"@\" + (props.post.ext.user?.handle || \"NoUserAttached\")}\r\n                                style={{ color: \"black\", fontWeight: \"bold\" }} />\r\n                        </Pressable>\r\n                        <View style={{ marginRight: 10 }}>\r\n                            <ScrollView nestedScrollEnabled horizontal showsHorizontalScrollIndicator={false}>\r\n                                <View style={[row, props.post.ext.user?.tags ? { display: 'flex' } : { display: 'none' }]}>\r\n                                    {props.post.ext.user?.tags && (props.post.ext.user?.tags).map((chip, i) =>\r\n                                        <PrimaryChip isAlt key={i} label={chip} style={{backgroundColor:'rgba(53, 162, 101, 0.50)'}}/>)}\r\n                                </View>\r\n                            </ScrollView>\r\n                        </View>\r\n                    </View>\r\n                    <AsyncPressable\r\n                        onPress={async () => {\r\n                            try {\r\n                                const resp = await Api.Post.extensions.setBookmarked({\r\n                                    id: props.post._id,\r\n                                    is_bookmarked: !isBookmarked\r\n                                });\r\n                                setIsBookmarked(Boolean(resp.is_bookmarked));\r\n                            } catch (ex) {\r\n                                console.error(ex);\r\n                            }\r\n                        }}>\r\n                        {!isBookmarked && <IconButton iconSource={BookmarkIcons.inactive}\r\n                            style={{ height: 28, width: 28, marginLeft: \"auto\" }} />}\r\n                        {isBookmarked && <BookmarkActive\r\n                            style={{ height: 28, width: 28, marginLeft: \"auto\", marginRight: sizes.rem0_5 / 2 }} />}\r\n                    </AsyncPressable>\r\n                </Pressable>\r\n                {\r\n                    [\"substack\", \"tradingpost\"].includes(post._source.postType) ?\r\n                        <Pressable onPress={() => {\r\n                            nav.navigate(\"PostScreen\", {\r\n                                post,\r\n                                id: post._id\r\n                            })\r\n\r\n                        }} style={{ paddingHorizontal: postSidePad / 2 }}>\r\n                            <PostContentView post={post} />\r\n                        </Pressable> :\r\n                        <View style={{ paddingHorizontal: postSidePad / 2 }}>\r\n                            <PostContentView post={post} />\r\n                        </View>\r\n                }\r\n\r\n                {\r\n                    <View\r\n                        style={[row, { alignItems: \"center\", marginTop: \"auto\", borderTopColor: \"#ccc\", borderTopWidth: 1 }]}>\r\n                        {(props.post._source.postType !== \"tweet\") && <>\r\n                            {showStatus && <View style={{\r\n                                position: \"absolute\",\r\n                                backgroundColor: \"black\",\r\n                                //   opacity: 0.6,\r\n                                width: 100,\r\n                                margin: \"auto\",\r\n                                top: 12,\r\n                                left: 0,\r\n                                borderRadius: 8,\r\n                                right: 0,\r\n                                padding: 4\r\n                            }}><Text style={{ width: \"100%\", textAlign: \"center\", color: \"white\" }}>Upvoted!</Text></View>}\r\n                            <Button\r\n                                style={{ marginLeft: \"auto\", paddingLeft: 10, paddingRight: 0 }}\r\n                                appearance={'ghost'}\r\n                                accessoryLeft={(props: any) =>\r\n                                    <CommentIcon height={24} width={24} style={{ height: 24, width: 24, }} />\r\n                                }\r\n                                onPress={() => {\r\n                                    nav.navigate(\"PostScreen\", {\r\n                                        post, id: post._id\r\n                                    })\r\n                                }}\r\n                            >\r\n                                {evaProps => <Text {...evaProps}\r\n                                    style={{\r\n                                        fontWeight: 'normal',\r\n                                        paddingLeft: sizes.rem1,\r\n                                        paddingRight: sizes.rem0_5,\r\n                                        color: '#9D9D9D'\r\n                                    }}>\r\n                                   \r\n                                </Text>}\r\n                            </Button>\r\n                            {<Button\r\n                                style={{ paddingLeft: 10, paddingRight: 0 }}\r\n                                onPress={() => {\r\n                                    if (!isUpvoted)\r\n                                        setShowStatus(true);\r\n                                    Api.Post.extensions.setUpvoted({\r\n                                        id: post._id,\r\n                                        is_upvoted: !isUpvoted,\r\n                                        count: upvoteCount // return number of upvotes.\r\n                                    }).then((r) => {\r\n                                        if (r.is_upvoted)\r\n                                            setTimeout(() => {\r\n                                                setShowStatus(false)\r\n                                            }, 1333);\r\n                                        setUpvoteCount(r.count);\r\n                                        setIsUpvoted(r.is_upvoted);\r\n                                    });\r\n                                }}\r\n                                accessoryLeft={(props: any) => <UpvoteIcon height={24} width={24} style={{\r\n                                    height: 24,\r\n                                    width: 24,\r\n                                    // opacity: isUpvoted ? 1 : 0.25\r\n                                }} />} appearance={\"ghost\"}>\r\n                                {evaProps => <Text {...evaProps} style={{\r\n                                    fontWeight: 'normal',\r\n                                    paddingHorizontal: sizes.rem1,\r\n                                    color: '#9D9D9D'\r\n                                }}>{upvoteCount ? upvoteCount : '-'}</Text>}\r\n                            </Button>}\r\n                            <ShareButton url={\"https://m.tradingpostapp.com/post?id=\" + props.post._id}\r\n                                title={\"https://m.tradingpostapp.com/post?id=\" + props.post._id} style={{\r\n                                    height: 24,\r\n                                    width: 24, marginRight: 10\r\n                                }}\r\n                                color={'rgba(0,0,0,0.5)'} />\r\n\r\n                        </>}\r\n\r\n                        <Button\r\n                            style={{ marginLeft: (props.post._source.postType === \"tweet\") ? 'auto' : undefined }}\r\n                            appearance={\"ghost\"}\r\n                            onPress={() => setModalVisible(true)}\r\n                            accessoryLeft={(props: any) => <EllipsesIcon height={24} width={24} style={{ height: 24, width: 24, opacity: 0.75 }} />}\r\n                        />\r\n                    </View>}\r\n            </View>\r\n        </View>\r\n    </View>\r\n\r\n}\r\n\r\nconst SubstackView = (props: { post: Interface.IElasticPost }) => {\r\n    const { post } = props;\r\n    return <View style={{ marginVertical: sizes.rem1 / 2, marginHorizontal: sizes.rem0_5 }}>\r\n        <View key=\"profile\">\r\n            {/* <Image style={{ aspectRatio: 0.9, marginRight: sizes.rem1 / 2 }} source={{ uri: post.platform_profile_url }} /> */}\r\n            <Pressable onPress={() => {\r\n                Linking.openURL(post._source.postUrl)\r\n            }}\r\n                style={{\r\n                    marginBottom: sizes.rem0_5,\r\n                    display: \"flex\",\r\n                    flexDirection: \"row\",\r\n                    alignItems: 'center'\r\n                }}>\r\n                <IconifyIcon style={{ width: 30, height: 30, marginTop: 2, marginRight: sizes.rem1 / 1.5 }}\r\n                    svgProps={{ style: { margin: \"auto\" } }} icon={social.SubstackLogo}\r\n                    currentColor={socialStyle.substackColor} />\r\n                {<Subheader text={post._source.content.title || \"\"} style={{\r\n                    marginBottom: 0,\r\n                    display: \"flex\",\r\n                    color: \"black\",\r\n                    fontSize: fonts.medium,\r\n                    fontWeight: \"600\",\r\n                    fontFamily: \"K2D\",\r\n                    maxWidth: \"85%\"\r\n                }}></Subheader>}\r\n            </Pressable>\r\n        </View>\r\n        {<Text key=\"content\" style={{ fontSize: fonts.small }}>\r\n            {(() => {\r\n                const parsedText = parseHtmlEnteties(post._source.content.description);\r\n                return parsedText?.length > 300 ?\r\n                    `${parsedText.substring(0, 300)}...` :\r\n                    parsedText\r\n            })()}\r\n        </Text>}\r\n        {<Text key=\"date\" style={{\r\n            fontSize: fonts.xSmall,\r\n            fontFamily: \"K2D\",\r\n            paddingVertical: 5\r\n        }}>{toFormatedDateTime(post._source.platformCreatedAt)}</Text>}\r\n    </View>\r\n}\r\n\r\nconst TradingPostView = (props: { post: Interface.IElasticPost }) => {\r\n    const { post } = props;\r\n    return <View style={{ marginVertical: sizes.rem1 / 2, marginHorizontal: sizes.rem0_5 }}>\r\n        <View key=\"profile\">\r\n            {/* <Image style={{ aspectRatio: 0.9, marginRight: sizes.rem1 / 2 }} source={{ uri: post.platform_profile_url }} /> */}\r\n\r\n            <Subheader text={post._source.content.title || \"\"} style={{\r\n                marginBottom: 0,\r\n                display: \"flex\",\r\n                color: \"black\",\r\n                fontSize: fonts.medium,\r\n                fontWeight: \"600\",\r\n                fontFamily: \"K2D\",\r\n                maxWidth: \"85%\"\r\n            }}></Subheader>\r\n\r\n        </View>\r\n        <HtmlView key=\"content\" isUrl={false} style={{ height: props.post._source.size.aspectRatio }}>\r\n            {`<html><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n                <body style=\"font-size: ${fonts.small}px\">${post._source.content.body}</body></html>`}\r\n            {/*(() => {\r\n                const parsedText = parseHtmlEnteties(post._source.content.body);\r\n                return parsedText?.length > 300 ?\r\n                    `${parsedText.substring(0, 300)}...` :\r\n                    parsedText\r\n            })()*/}\r\n        </HtmlView>\r\n        {<Text key=\"date\" style={{\r\n            fontSize: fonts.xSmall,\r\n            fontFamily: \"K2D\",\r\n            paddingVertical: 5\r\n        }}>{new Date(Date.parse(post._source.platformCreatedAt)).toLocaleString('en-US', {\r\n            dateStyle: 'medium',\r\n            timeStyle: 'short'\r\n        })}</Text>}\r\n    </View>\r\n}\r\nconst parseHtmlEnteties = (str: string) => {\r\n    return str?.replace(/&#([0-9]{1,4});/gi, function (match, numStr) {\r\n        var num = parseInt(numStr, 10); // read num as normal number\r\n        return String.fromCharCode(num);\r\n    });\r\n}\r\n\r\nconst PostContentView = (props: { post: Interface.IElasticPost }) => {\r\n    const { width: windowWidth, scale } = useWindowDimensions(),\r\n        availWidth = Math.min(windowWidth, 680) - spaceOnSide\r\n\r\n    if (props.post._source.postType === 'substack') {\r\n        return SubstackView(props)\r\n    }\r\n\r\n    return <View>\r\n        <View style={{\r\n            display: (props.post._source.postType === 'tweet' && props.post._source.content.body.slice(0, 2) === 'RT') ? 'flex' : 'none',\r\n            flexDirection: 'row',\r\n\r\n            alignItems: 'center',\r\n            marginTop: 2,\r\n            marginBottom: -5\r\n        }}>\r\n            <Retweet width={30} height={30} style={{ width: 30, height: 30 }} />\r\n            <Text style={{\r\n                fontWeight: '500',\r\n                marginLeft: 2\r\n            }}>\r\n                {'Retweet'}\r\n            </Text>\r\n        </View>\r\n        <View>\r\n            {props.post._source.subscription_level === 'premium' &&\r\n                <PremiumStar style={{ height: 24, width: 24, marginBottom: 5, marginTop: 10 }} />}\r\n        </View>\r\n        <View style={{\r\n            height: postInnerHeight(props.post, availWidth),\r\n            paddingVertical: ['spotify', 'youtube'].includes(props.post._source.postType) ? sizes.rem0_5 : 0\r\n            //height: postInnerHeight(props.post, availWidth),\r\n            //justifyContent: ['spotify', 'youtube'].includes(props.post._source.postType) ? 'center' : undefined\r\n        }}>\r\n            <HtmlView style={{\r\n                height: ['spotify', 'youtube'].includes(props.post._source.postType) ? postInnerHeight(props.post, availWidth) : postInnerHeight(props.post, availWidth),\r\n                //height: postInnerHeight(props.post, availWidth)\r\n                //marginTop: ['spotify', 'youtube'].includes(props.post._source.postType) ? 8 : 0,\r\n                //marginBottom: ['youtube', 'spotify'].includes(props.post._source.postType) ? 8 : 0\r\n            }}\r\n                isUrl={props.post._source.postType === \"youtube\" || props.post._source.postType === \"spotify\"}>\r\n                {resolvePostContent(props.post, availWidth)}\r\n            </HtmlView>\r\n        </View>\r\n        <View>\r\n            {props.post._source.postType === 'tradingpost' &&\r\n                <Text style={{ fontSize: fonts.xSmall, marginVertical: 10, marginLeft: 10 }}>\r\n                    {toFormatedDateTime(props.post._source.tradingpostCreatedAt)}\r\n                </Text>}\r\n\r\n        </View>\r\n    </View>\r\n\r\n}\r\n\r\n\r\n","import { Interface } from \"@tradingpost/common/api\";\r\nimport React from \"react\";\r\nimport { Text } from \"react-native\";\r\nimport { fonts } from \"../style\";\r\nimport { DataOrQuery, List } from \"./List\";\r\nimport { PostView } from \"./PostView\";\r\n\r\nexport function PostList(props: { posts?: DataOrQuery<Interface.IElasticPostExt>, datasetKey?: string, onReloadNeeded?: () => void }) {\r\n    return <List\r\n        listKey={props.datasetKey || 'STATIC'}\r\n        getItemLayout={(items, index, sizeCache) => {\r\n            const curItem = items?.[index];\r\n            const output = typeof curItem === \"object\" ? sizeCache[index] : {\r\n                index,\r\n                offset: sizeCache[index - 1].offset + sizeCache[index - 1].length,\r\n                length: 40\r\n            };\r\n            return output;\r\n        }}\r\n        data={props.posts}\r\n        keyExtractor={(item, index) => typeof item === \"string\" ? \"loadingtext\" : (index + \"_\" + item._id)}\r\n        preloadOffset={2}\r\n        datasetKey={props.datasetKey}\r\n        renderItem={(item) => {\r\n            if (typeof item.item === \"string\") {\r\n                return <Text style={{ textAlign: \"center\", fontSize: fonts.large }}>Loading More...</Text>\r\n            } else {\r\n                return <PostView key={item.index + \"_\" + item.item._id} post={item.item} onReloadNeeded={props.onReloadNeeded} />\r\n            }\r\n        }}\r\n        noDataMessage={\"No Posts Available\"}\r\n        loadingItem={\"  \"}\r\n    />\r\n}","import { NavigationProp } from \"@react-navigation/native\";\r\nimport { Api, Interface } from \"@tradingpost/common/api\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useWindowDimensions } from \"react-native\";\r\nimport { View, Text } from \"react-native\";\r\nimport { SizeParts } from './List'\r\nimport { PlusContentButton } from \"../components/PlusContentButton\";\r\nimport { PostList } from \"../components/PostList\";\r\nimport { spaceOnSide, postInnerHeight, PostView } from \"../components/PostView\";\r\nimport { DashTabScreenProps } from \"../navigation/pages\";\r\n\r\nexport const MultiTermFeedPart = (props: { searchText?: string[] }) => {\r\n    const { width: windowWidth, height: windowHeight } = useWindowDimensions();\r\n    const { searchText } = props\r\n    return <PostList\r\n        key={\"STATIC\"}\r\n        datasetKey={\"____________\"}\r\n\r\n        posts={async (allItems, page, sizeCache) => {\r\n            console.log(page)\r\n            const posts = (await Api.Post.extensions.multitermfeed({\r\n                page,\r\n                data: searchText ? {\r\n                    terms: searchText\r\n                } : undefined\r\n            }));\r\n\r\n            const newItems = [...(allItems || []), ...posts]\r\n            newItems.forEach((itm, index) => {\r\n                if (!sizeCache[index]) {\r\n                    sizeCache[index] = {\r\n                        index,\r\n                        offset: index ? sizeCache[index - 1].offset + sizeCache[index - 1].length : 0,\r\n                        length: postInnerHeight(itm, Math.min(windowWidth, 680) - spaceOnSide)\r\n                    }\r\n                }\r\n            })\r\n            return newItems;\r\n        }}\r\n    />\r\n}\r\n/*\r\nexport const CreateMultiTermQuery = (searchTerms: string | string[]) => {\r\n    if (typeof searchTerms === 'string' ) searchTerms = [searchTerms];\r\n    let multiMatchQueryPart= [];\r\n    for (let d of searchTerms) {\r\n        const queryPart = {\r\n            \"multi_match\": {\r\n                \"fields\": [\"content.body\", \"content.title\"],\r\n                \"query\": `${d}`,\r\n                \"analyzer\": \"synonym_analyzer\",\r\n                \"boost\": 1\r\n            }\r\n        }\r\n        multiMatchQueryPart.push(queryPart)\r\n    }\r\n    let query ={\"bool\": {\r\n        \"should\": [\r\n        {\r\n            \"function_score\": {\r\n                \"query\": { \r\n                \"bool\": {\r\n                    \"must\": [\r\n                        {\r\n                        \"bool\": {\r\n                            \"should\": `${multiMatchQueryPart}`,\r\n                                \"minimum_should_match\": 1,\r\n                                \"boost\": 1\r\n                            }\r\n                            }\r\n                        ,\r\n                        {\r\n                            \"match\": {\r\n                            \"postType\": \"youtube\"\r\n                        }}\r\n                        ]\r\n                }\r\n                },\r\n                \"functions\": [\r\n                    {\r\n                    \"exp\": {\r\n                        \"platformCreatedAt\": {\r\n                        \"origin\": \"now\",\r\n                        \"scale\": \"7d\"\r\n                        }\r\n                    },\r\n                    \"weight\": 1.2\r\n                    }\r\n                ],\r\n                \"boost_mode\": \"replace\"\r\n            }\r\n        },\r\n        {\r\n            \"function_score\": {\r\n                \"query\": { \r\n                \"bool\": {\r\n                    \"must\": [\r\n                        {\r\n                        \"bool\": {\r\n                            \"should\": `${multiMatchQueryPart}`,\r\n                                \"minimum_should_match\": 1,\r\n                                \"boost\": 1\r\n                            }\r\n                            }\r\n                        ,\r\n                        {\r\n                            \"match\": {\r\n                            \"postType\": \"tweet\"\r\n                        }}\r\n                        ]\r\n                }},\r\n                \"functions\": [\r\n                    {\r\n                    \"exp\": {\r\n                        \"platformCreatedAt\": {\r\n                        \"origin\": \"now\",\r\n                        \"scale\": \"12h\"\r\n                        }\r\n                    },\r\n                    \"weight\": 1\r\n                    }\r\n                ],\r\n                \"boost_mode\": \"replace\"\r\n            }\r\n        },\r\n        {\r\n            \"function_score\": {\r\n                \"query\": { \r\n                \"bool\": {\r\n                    \"must\": [\r\n                        {\r\n                        \"bool\": {\r\n                            \"should\": `${multiMatchQueryPart}`,\r\n                                \"minimum_should_match\": 1,\r\n                                \"boost\": 1\r\n                            }\r\n                            }\r\n                        ,\r\n                        {\r\n                            \"match\": {\r\n                            \"postType\": \"substack\"\r\n                        }}\r\n                        ]\r\n                }},\r\n                \"functions\": [\r\n                    {\r\n                    \"exp\": {\r\n                        \"platformCreatedAt\": {\r\n                        \"origin\": \"now\",\r\n                        \"scale\": \"7d\"\r\n                        }\r\n                    },\r\n                    \"weight\": 1.2\r\n                    }\r\n                ],\r\n                \"boost_mode\": \"replace\"\r\n            }\r\n        },\r\n        {\r\n            \"function_score\": {\r\n                \"query\": { \r\n                \"bool\": {\r\n                    \"must\": [\r\n                        {\r\n                        \"bool\": {\r\n                            \"should\": `${multiMatchQueryPart}`,\r\n                                \"minimum_should_match\": 1,\r\n                                \"boost\": 1\r\n                            }\r\n                            }\r\n                        ,\r\n                        {\r\n                            \"match\": {\r\n                            \"postType\": \"spotify\"\r\n                        }}\r\n                        ]\r\n                }},\r\n                \"functions\": [\r\n                    {\r\n                    \"exp\": {\r\n                        \"platformCreatedAt\": {\r\n                        \"origin\": \"now\",\r\n                        \"scale\": \"7d\"\r\n                        }\r\n                    },\r\n                    \"weight\": 1.2\r\n                    }\r\n                ],\r\n                \"boost_mode\": \"replace\"\r\n            }\r\n        }\r\n        ],\r\n        \"minimum_should_match\": 1,\r\n        \"boost\": 1\r\n    }\r\n    }\r\n    return query;\r\n    \r\n} \r\n*/","import React, { PropsWithChildren, useEffect, useRef, useState, Component } from \"react\"\r\nimport { NavigationProp, useNavigation } from \"@react-navigation/native\"\r\nimport { Avatar, Icon } from \"@ui-kitten/components\"\r\nimport { View, Text, Pressable, ScrollView, useWindowDimensions, Animated, FlatList, NativeSyntheticEvent, NativeScrollEvent } from \"react-native\"\r\nimport { ElevatedSection, Section, Subsection } from \"./Section\"\r\nimport { NoteEditor, SecPressable } from \"../screens/WatchlistViewerScreen\"\r\nimport { fonts, sizes } from \"../style\"\r\nimport { AppColors } from \"../constants/Colors\"\r\nimport { toDollarsAndCents } from \"../utils/misc\"\r\n\r\nexport const WatchlistItemRenderItem = (props: {item: any, bySymbol: any, byId: any, hideEmptyNote: boolean, setShownMap: any, shownMap: any, watchlist: any}) => {\r\n    const symbol = props.item.item.symbol;\r\n    const secId = props.bySymbol[symbol] ? props.bySymbol[symbol].id : 0;\r\n    const intradayChange = props.item.item.price ? props.item.item.price.price - props.item.item.price.open : 0\r\n    //const hideEmptyNote = watchlist?.user[0].id !== appUser?.id\r\n    return (\r\n        <ElevatedSection title=\"\" style={{flex: 1, marginBottom: sizes.rem1_5 / 2, marginHorizontal: sizes.rem1_5 / 4, paddingHorizontal: sizes.rem0_5, paddingVertical: sizes.rem0_5}}>\r\n            <View style={{flex: 1, flexDirection: 'row', justifyContent: 'center'}}>\r\n                \r\n                <SecPressable securityId={secId}>                                        \r\n                    <Avatar\r\n                        style={{borderWidth: 1, borderColor: '#ccc'}}\r\n                        resizeMode={'contain'}\r\n                        size=\"medium\"\r\n                        shape=\"rounded\"\r\n                        source={\r\n                            (() => {\r\n                                let output: { uri: string } | undefined;\r\n                                \r\n                                output = props.bySymbol[symbol] ? { uri: props.bySymbol[symbol].logo_url  } : undefined\r\n                                return output;\r\n                            })()}\r\n                        />\r\n                </SecPressable>\r\n                <View style={{flex: 1, alignItems: 'center'}}>\r\n                    <View style={{flex: 1, flexDirection: 'row', alignItems: 'center'}}>\r\n                        <Text style={{ fontWeight: '900', color: '#454545'}}>\r\n                                    {props.byId[secId] ? (props.byId[secId].symbol === 'USD:CUR' ? 'Cash' : props.byId[secId].symbol) : ''}\r\n                        </Text>\r\n                        {/*<Pressable onPress={() => {\r\n                            if (props.item.item.note || !props.hideEmptyNote) {\r\n                                props.setShownMap({\r\n                                    ...props.shownMap,\r\n                                    [props.item.index]: !props.shownMap[props.item.index]\r\n                                })\r\n                            }\r\n                            }}\r\n                            style={{marginLeft: 10, justifyContent: 'flex-end'}}\r\n                            >\r\n                            <Icon style={{ opacity: (props.item.item.note || !props.hideEmptyNote) ? (props.item.item.note ? 1 : 0.5) : 0, height: 16 , width: 22 , }} \r\n                                name={!props.shownMap[props.item.index] ? \"file-text-outline\" : \"close-outline\"}\r\n                                fill={AppColors.primary}\r\n                                />\r\n                        </Pressable>\r\n                        */}\r\n                    </View>\r\n                    <View style={{flex: 1, flexDirection: 'row', alignItems: 'center'}}>\r\n                        <Text style={[{ color: '#606060', fontSize: fonts.xSmall, marginRight: 4}, intradayChange >= 0 ? (!intradayChange ? {color: 'black'} : {color: 'green'}) : {color: 'red'}]}>\r\n                            {`${toDollarsAndCents(intradayChange)}`}\r\n                        </Text>\r\n                        <Text style={{ color: '#606060', fontSize: fonts.xSmall}}>\r\n                            {`${toDollarsAndCents(props.item.item.price?.price)}`}\r\n                        </Text>\r\n\r\n\r\n                    </View>\r\n\r\n                </View>\r\n                \r\n            \r\n            </View>\r\n            <View>\r\n                {props.shownMap[props.item.index] && props.watchlist ?\r\n                    <NoteEditor note={props.item.item.note} \r\n                                onChangeNote={(note) => {\r\n                                    props.item.item.note = note;\r\n                                }} \r\n                                canEdit={!props.hideEmptyNote} \r\n                                ticker={props.item.item.symbol} \r\n                                watchlistId={props.watchlist.id} /> \r\n                                : null\r\n                                }\r\n            </View>\r\n        </ElevatedSection>\r\n    )\r\n}","import { NavigationProp, useFocusEffect, useNavigation } from \"@react-navigation/native\"\r\nimport { Api, Interface } from \"@tradingpost/common/api\"\r\nimport WatchlistApi from \"@tradingpost/common/api/entities/apis/WatchlistApi\"\r\nimport { IWatchlistGetExt } from \"@tradingpost/common/api/entities/extensions/Watchlist\"\r\nimport { ISecurityList } from \"@tradingpost/common/api/entities/interfaces\"\r\nimport { Avatar, Icon } from \"@ui-kitten/components\"\r\nimport React, { PropsWithChildren, useEffect, useRef, useState, Component, useCallback } from \"react\"\r\nimport { Header, Subheader } from \"../components/Headers\";\r\nimport { View, Text, Pressable, ScrollView, useWindowDimensions, Animated, FlatList, NativeSyntheticEvent, NativeScrollEvent } from \"react-native\"\r\nimport { useToast } from \"react-native-toast-notifications\"\r\nimport { useAppUser } from \"../Authentication\"\r\nimport { DeleteButton, EditButton, FavButton } from \"../components/AddButton\"\r\nimport { ProfileBar } from \"../components/ProfileBar\"\r\nimport { ElevatedSection, Section, Subsection } from \"../components/Section\"\r\nimport { ITableColumn, Table } from \"../components/Table\"\r\nimport { TextField } from \"../components/TextField\"\r\nimport { AppColors } from \"../constants/Colors\"\r\nimport { elevated, flex, fonts, paddView, paddViewWhite, row, sizes } from \"../style\"\r\nimport { useSecuritiesList } from '../SecurityList'\r\nimport { toDollarsAndCents, toNumber1, toPercent, toPercent1, toPercent2 } from \"../utils/misc\"\r\nimport { MultiTermFeedPart } from \"../components/MultiTermFeed\"\r\nimport { List } from \"../components/List\"\r\nimport { WatchlistItemRenderItem } from \"../components/WatchlistItemRenderItem\"\r\nimport { PrimaryChip } from \"../components/PrimaryChip\"\r\nimport { sleep } from \"@tradingpost/common/utils/sleep\"\r\n\r\n\r\nexport const useNoteField = (hideEmptyNote?: boolean) => {\r\n    const [shownMap, setShownMap] = useState<Record<string, boolean>>({})\r\n    return {\r\n        shownMap,\r\n        column: {\r\n            field: (info: { index: number, item: { note?: string } }) => {\r\n                return <Pressable onPress={() => {\r\n                    if (info.item.note || !hideEmptyNote) {\r\n                        setShownMap({\r\n                            ...shownMap,\r\n                            [info.index]: !shownMap[info.index]\r\n                        })\r\n                    }\r\n                }}>\r\n                    <Icon style={{ opacity: (info.item.note || !hideEmptyNote) ? (info.item.note ? 1 : 0.25) : 0, height: 16, width: 22 }} name={!shownMap[info.index] ? \"file-text-outline\" : \"close-outline\"}\r\n                        fill={AppColors.primary}\r\n                    /></Pressable>\r\n            }, alias: \" \", width: 32\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport const SecPressable = (props: PropsWithChildren<{ securityId: number }>) => {\r\n    const nav = useNavigation<NavigationProp<AllPages>>();\r\n    return <Pressable onPress={() => {\r\n        if (props.securityId !== -1) {\r\n        nav.navigate(\"Company\", {\r\n            securityId: props.securityId\r\n        })\r\n        }\r\n    }}>{props.children}</Pressable>\r\n}\r\n\r\nexport const useMakeSecurityFields = (getIdValue: (itm: any) => string | number) => {\r\n    const { securities: { bySymbol, byId } } = useSecuritiesList();\r\n    return [{\r\n        field: (a: any) => {\r\n            const value = getIdValue(a.item);\r\n            return (\r\n                <View style={{ overflow: 'visible' }}>\r\n                    <SecPressable securityId={\r\n                        (() => {\r\n                            if (typeof value === \"string\")\r\n                                return bySymbol[value]?.id || -1\r\n                            else\r\n                                return byId[value]?.id || -1\r\n                        })()\r\n                    }>\r\n                        <Avatar style={{ marginRight: sizes.rem0_5 }}\r\n                                resizeMode={'contain'}\r\n                                source={\r\n                                    (() => {\r\n                                        let output: { uri: string } | undefined;\r\n                                        if (typeof value === \"string\")\r\n                                            output = bySymbol[value] ? { uri: bySymbol[value].logo_url } : undefined\r\n                                        else\r\n                                            output = byId[value] ? { uri: byId[value].logo_url  } : undefined\r\n                                        return output;\r\n                                    })()}\r\n                                size=\"tiny\"\r\n                        />\r\n\r\n                    </SecPressable>\r\n                </View>\r\n            )\r\n        },\r\n        headerStyle: {\r\n            width: sizes.rem10 / 2,\r\n            //marginRight: sizes.rem0_5,\r\n            overflow: \"visible\" as \"visible\"\r\n        },\r\n        alias: \"Ticker\",\r\n        align: \"left\" as \"left\",\r\n        width: sizes.rem2\r\n    },\r\n    {\r\n        alias: \"\",\r\n        width: sizes.rem6 / 2,\r\n        align: \"left\" as \"left\",\r\n        style: { lineHeight: sizes.rem1_5 },\r\n        headerStyle: {\r\n            width: 0,\r\n        },\r\n        stringify: (value: any, key: any, item: any) => {\r\n            const v = getIdValue(item);\r\n            if (typeof v === \"string\")\r\n                return bySymbol[v]?.symbol === 'USD:CUR' ? 'Cash' : bySymbol[v]?.symbol || \"\"\r\n            else\r\n                return byId[v]?.symbol === 'USD:CUR' ? 'Cash' : byId[v]?.symbol || \"\"\r\n        }\r\n    }\r\n    ]\r\n}\r\n\r\nexport const useWatchlistItemColumns = (hideEmptyNote?: boolean) => {\r\n\r\n    const [iconField, secField] = useMakeSecurityFields((item) => item.symbol);\r\n    const { column, shownMap } = useNoteField(hideEmptyNote);\r\n    return {\r\n        shownMap,\r\n        columns: [\r\n            iconField,\r\n            secField,\r\n            {\r\n                alias: \"Price\",\r\n                field: (a) => {\r\n                    const change = a.item.price?.price || a.item.price?.open ? (a.item.price?.price - a.item.price?.open) / a.item.price?.open : 0\r\n                    return (\r\n                        <View style={{ justifyContent: 'center', flexDirection: 'row', flex: 1 }}>\r\n                            <Text style={[change ? change >= 0 ? { color: 'green' } : { color: 'red' } : {}, { marginRight: sizes.rem0_5 }]}>{`(${toPercent2(change)})`}</Text>\r\n                            <Text>{toDollarsAndCents(a.item.price?.price)}</Text>\r\n                        </View>\r\n                    )\r\n                },\r\n                //align: 'left' as 'left',\r\n                //width: sizes.rem6\r\n                /*\r\n                stringify: (a, b, c) => {\r\n                    if (c.price?.price) {\r\n                        return toDollarsAndCents(c.price.price);\r\n                    }\r\n                    else\r\n                        return \"-\"\r\n                }\r\n                */\r\n            }/*,\r\n            {\r\n                alias: \"Date Added\",\r\n                stringify: (a, b, c) => {\r\n                    if (c.price?.time) {\r\n                        return (new Date(c.date_added)).toLocaleDateString() || \"-\"\r\n                    }\r\n                    else {\r\n                        return \"-\";\r\n                    }\r\n                }\r\n            }*/,\r\n            column\r\n            //        { field: \"symbol\", align: \"left\", style: { lineHeight: sizes.rem1_5 } },\r\n        ] as ITableColumn<IWatchlistGetExt[\"items\"][number]>[]\r\n    }\r\n}\r\n\r\n\r\nexport const WatchlistViewerScreen = (props: TabScreenProps<{ watchlistId: number }>) => {\r\n    const [watchlist, setWatchlist] = useState<IWatchlistGetExt>()\r\n    const watchlistId = props.route?.params?.watchlistId;\r\n    const [isSaved, setIsFav] = useState(false)\r\n    const [watchlistTickers, setWatchlistTickers] = useState<string[]>();\r\n    const { loginState } = useAppUser();\r\n    const appUser = loginState?.appUser;\r\n    const translateHeaderY = useRef(new Animated.Value(0)).current;\r\n    const scrollRef = useRef<FlatList>(null);\r\n\r\n    const toast = useToast();\r\n    useFocusEffect(useCallback(() => {\r\n        (async () => {\r\n            try {\r\n                if (watchlistId) {\r\n                    const w = await WatchlistApi.get(watchlistId)\r\n                    setIsFav(w.is_saved)\r\n                    setWatchlist(w as IWatchlistGetExt);\r\n                }\r\n                if (watchlist) {\r\n                    setWatchlistTickers(watchlist.items.map(a => `$${a.symbol}`))\r\n                }\r\n            } catch (err) {\r\n                console.error(err);\r\n            }\r\n        })()\r\n    }, []))\r\n    useFocusEffect(useCallback(() => {\r\n        (async () => {\r\n            try {\r\n                if (watchlist) {\r\n                    setWatchlistTickers(watchlist.items.map(a => `$${a.symbol}`))\r\n                }\r\n            } catch (err) {\r\n                console.error(err);\r\n            }\r\n        })()\r\n    }, [watchlist]))\r\n\r\n    useFocusEffect(useCallback(() => {\r\n        (async () => {\r\n            try {\r\n                if (watchlistId) {\r\n                    const w = await WatchlistApi.get(watchlistId)\r\n                    setIsFav(w.is_saved)\r\n                    setWatchlist(w as IWatchlistGetExt);\r\n                }\r\n                if (watchlist) {\r\n                    setWatchlistTickers(watchlist.items.map(a => `$${a.symbol}`))\r\n                }\r\n            } catch (err) {\r\n                console.error(err);\r\n            }\r\n        })()\r\n    }, [watchlistId]))\r\n\r\n    const { securities: { bySymbol, byId } } = useSecuritiesList();\r\n    const [shownMap, setShownMap] = useState<Record<string, boolean>>({})\r\n    return <View style={[flex]}>\r\n        <Animated.FlatList\r\n            data={[\r\n                <View\r\n                    style={{\r\n                        paddingTop: sizes.rem0_5, backgroundColor: AppColors.background,\r\n                        alignItems: \"stretch\", width: \"100%\"\r\n                    }}\r\n                >\r\n                    <View style={[\r\n                        //collapsed ? {display: 'none'} : {display: 'flex'},\r\n                        { paddingHorizontal: sizes.rem1, backgroundColor: AppColors.background }]}>\r\n                        <Header text={watchlist?.name || \"\"} />\r\n                        <ElevatedSection title={\"\"}>\r\n                            <View style={{flex: 1, flexDirection: 'row', alignContent: 'center'}}>\r\n                                <ProfileBar style={{flex: 1}} user={watchlist?.user[0]} />\r\n                                <View style={{flex: 1, alignContent: 'center', justifyContent: 'center'}}>\r\n                                    <PrimaryChip style={{width: '50%'}} isAlt key={watchlist?.id} label={watchlist?.type ? watchlist.type.slice(0,1).toUpperCase() + watchlist.type.slice(1) : ''} />\r\n                                </View>\r\n                                {watchlist?.user[0].id === appUser?.id ? \r\n                                    <EditButton\r\n                                        height={24}\r\n                                        width={24} \r\n                                        onPress={() => {\r\n                                            props.navigation.navigate(\"WatchlistEditor\", {\r\n                                                watchlistId: watchlistId\r\n                                            })\r\n                                        }} /> : \r\n                                    <FavButton\r\n                                        height={24}\r\n                                        width={24}\r\n                                        isSelected={isSaved}\r\n                                        onPress={() => {\r\n                                            try {\r\n                                                if (watchlistId) {\r\n                                                    Api.Watchlist.extensions.saveWatchlist({\r\n                                                        id: watchlistId,\r\n                                                        is_saved: !isSaved\r\n                                                    })\r\n                                                    setIsFav(f => !f);\r\n                                                    toast.show(\"Watchlist Added\")\r\n                                                }\r\n                                            } catch (err) {\r\n                                                console.error(err);\r\n                                            }\r\n                                        }}\r\n                                    />}\r\n                            </View>\r\n                            \r\n                            <Text style={[{ marginVertical: sizes.rem0_5 }, !watchlist?.note ? { color: \"#ccc\", fontStyle: \"italic\" } : undefined]}>\r\n                                {watchlist?.note || \"No Notes\"}\r\n                            </Text>\r\n                            \r\n                        </ElevatedSection>\r\n                    </View>\r\n                    <View style={[\r\n                        //collapsed ? {display: 'none'} : {display: 'flex'},\r\n                        { paddingHorizontal: sizes.rem1, backgroundColor: AppColors.background }]}>\r\n                        <Section title=\"Stocks\"\r\n                                 style={{backgroundColor: AppColors.background}}>\r\n                                 \r\n                            <List   \r\n                                listKey={`watchlist_id}`}\r\n                                datasetKey={`watchlist_id_${watchlist?.items.length}`}\r\n                                data={watchlist?.items}\r\n                                loadingMessage={\" \"}\r\n                                noDataMessage={\" \"}\r\n                                loadingItem={undefined}\r\n                                numColumns={2}\r\n                                renderItem={(item)=> {\r\n                                    const symbol = item.item.symbol;\r\n                                    const secId = bySymbol[symbol] ? bySymbol[symbol].id : 0;\r\n                                    const intradayChange = item.item.price ? item.item.price.price - item.item.price.open : 0\r\n                                    const hideEmptyNote = watchlist?.user[0].id !== appUser?.id\r\n                                    return (\r\n                                        <WatchlistItemRenderItem \r\n                                            item={item}\r\n                                            bySymbol={bySymbol}\r\n                                            byId={byId}\r\n                                            hideEmptyNote={hideEmptyNote}\r\n                                            setShownMap={setShownMap}\r\n                                            shownMap={shownMap}\r\n                                            watchlist={watchlist}/>\r\n                                    )\r\n                                }}\r\n                                />\r\n                        </Section>\r\n                    </View>\r\n                    <View style={[{ paddingHorizontal: sizes.rem1, backgroundColor: AppColors.background }]}>\r\n                        <Header text=\"Watchlist Posts\" />\r\n                    </View>\r\n                </View>,\r\n                <View style={[{ paddingHorizontal: 0 }]}\r\n                >\r\n                    {watchlistTickers && <MultiTermFeedPart key={watchlistTickers ? watchlistTickers.join() : \"___\"} searchText={watchlistTickers} />}\r\n                </View>\r\n            ]}\r\n            renderItem={(info) => {\r\n                return info.item;\r\n            }}\r\n            ref={scrollRef} contentContainerStyle={[{ paddingTop: 0 }]} nestedScrollEnabled\r\n            onScroll={Animated.event<NativeSyntheticEvent<NativeScrollEvent>>([\r\n                { nativeEvent: { contentOffset: { y: translateHeaderY } } }\r\n            ], { useNativeDriver: true })}>\r\n        </Animated.FlatList>\r\n    </View>\r\n}\r\n\r\nexport const NoteEditor = (props: { canEdit: boolean, note: string | undefined, ticker: string, watchlistId: number, onChangeNote: (note: string) => void }) => {\r\n    const [isEdit, setIsEdit] = useState(!props.note && props.canEdit);\r\n    const [note, setNote] = useState(props.note)\r\n\r\n    return (!props.canEdit || (!isEdit && note)) ?\r\n        <View style={{ flexDirection: \"row\", alignItems: \"center\" }}><Text><Text style={{ fontWeight: \"bold\" }}>Note:</Text>{note}</Text>\r\n            {props.canEdit && <EditButton\r\n                style={{ marginLeft: \"auto\" }}\r\n                height={24} width={24} onPress={() => {\r\n                    setIsEdit(true);\r\n                }}\r\n            />}\r\n\r\n        </View> :\r\n        <View style={[row, { alignItems: \"center\" }]}><TextField placeholder=\"Add a note\" style={flex} value={note} onChangeText={(t) => {\r\n            setNote(t);\r\n        }} /><Pressable onPress={() => {\r\n            props.onChangeNote(note || \"\");\r\n            setIsEdit(false)\r\n        }\r\n        }><Icon name=\"checkmark-outline\" fill={AppColors.primary} style={{\r\n            height: 24,\r\n            width: 24\r\n        }} />\r\n            </Pressable>\r\n        </View>\r\n\r\n}\r\n/*\r\nclass WrappedView extends Component<finishedLoadingProp> {\r\n    finishedLoading: boolean;\r\n    constructor(props: finishedLoadingProp) {\r\n        super(props)\r\n        this.finishedLoading = props.finishedLoading\r\n    }\r\n    shouldComponentUpdate(nextProps: Readonly<ViewProps>, nextState: Readonly<{}>, nextContext: any): boolean {\r\n        if (this.finishedLoading){\r\n            return false;\r\n        }\r\n        else {\r\n            return true\r\n        }\r\n    }\r\n    render(): React.ReactNode {\r\n        let {style, children} = this.props\r\n        return (\r\n            <View style={style}>\r\n                {children}\r\n            </View>\r\n        )\r\n    }\r\n}\r\nexport interface finishedLoadingProp extends ViewProps {\r\n    finishedLoading: boolean\r\n}\r\n\r\n\r\nclass WrappedAnimatedView extends Component<finishedLoadingProp> {\r\n    finishedLoading: boolean;\r\n    constructor(props: finishedLoadingProp) {\r\n        super(props)\r\n        this.finishedLoading = props.finishedLoading\r\n    }\r\n    shouldComponentUpdate(nextProps: Readonly<ViewProps>, nextState: Readonly<{}>, nextContext: any): boolean {\r\n        if (this.finishedLoading){\r\n            return false;\r\n        }\r\n        else {\r\n            return true\r\n        }\r\n    }\r\n    render(): React.ReactNode {\r\n        let {style, children} = this.props\r\n        return (\r\n            <Animated.View style={style}>\r\n                {children}\r\n            </Animated.View>\r\n        )\r\n    }\r\n}\r\n*/","import { useFocusEffect, useNavigation } from \"@react-navigation/native\"\r\nimport { Interface } from \"@tradingpost/common/api\"\r\nimport { IWatchlistList } from \"@tradingpost/common/api/entities/interfaces\"\r\nimport React, { useCallback, useEffect, useState } from \"react\"\r\nimport { Pressable, Text, View } from \"react-native\"\r\nimport { AppColors } from \"../constants/Colors\"\r\nimport { PlusIcon } from \"../images\"\r\nimport { useNoteField } from \"../screens/WatchlistViewerScreen\"\r\nimport { fonts, row, sizes } from \"../style\"\r\nimport { AddButton } from \"./AddButton\"\r\nimport { List } from \"./List\"\r\nimport { ElevatedSection, Section } from \"./Section\"\r\nimport { ITableColumn, Table } from \"./Table\"\r\n\r\n\r\nexport function WatchlistSection(props: { title: string, watchlists: Interface.IWatchlistList[] | undefined, showAddButton?: boolean, shared?: boolean, hideNoteOnEmpty?: boolean, datasetKey?: string }) {\r\n    const nav = useNavigation<any>();\r\n    const [focus, setFocus] = useState(false);\r\n    useFocusEffect(useCallback(()=> {\r\n        setFocus((f) => !f)\r\n    },[]))\r\n    const fields: ITableColumn<IWatchlistList>[] = !props.shared ?\r\n        [{ field: \"name\", alias: \"Name\", align: \"left\" },\r\n        { field: \"item_count\", alias: \"Items\" },\r\n        { field: \"saved_by_count\", alias: \"Saves\" },\r\n        { field: \"type\", alias: \"Type\" }] :\r\n\r\n        [{ field: \"name\", alias: \"Name\", align: \"left\" },\r\n        {field: \"user\", align: \"left\", alias: \"Analyst\", stringify: (user: IWatchlistList[\"user\"], key, item) => {return user[0].handle}}]\r\n    const { column, shownMap } = useNoteField(props.hideNoteOnEmpty);\r\n    return <Section title={props.title} style={{backgroundColor: AppColors.background}} button={props.showAddButton ? (p) => <AddButton height={p.height} width={p.width} onPress={() => {\r\n        nav.navigate(\"WatchlistEditor\")\r\n    }} /> : undefined}>\r\n        <List \r\n            datasetKey={`${props.datasetKey ? props.datasetKey : props.watchlists?.length}`}\r\n            listKey={props.title}\r\n            loadingMessage={\" \"}\r\n            noDataMessage={\" \"}\r\n            loadingItem={undefined}\r\n            numColumns={1}\r\n            data={props.watchlists}\r\n            ListHeaderComponent={() => {\r\n                return <View key={\"table_header\"} style={{marginHorizontal: sizes.rem1_5 / 4, paddingHorizontal: sizes.rem0_5, marginBottom: sizes.rem1 / 2}}>\r\n                <View style={[row]}>\r\n                    {fields.map((c, i) => {\r\n                        return <Text key={`header_${i}`} numberOfLines={1} style={{flex: 1, textAlign: 'center', fontSize: fonts.small, color: '#9D9D9D'}} >{c.alias}</Text>\r\n                    })}\r\n                </View>\r\n            </View>\r\n            }}\r\n            renderItem={(item)=> {\r\n                return (\r\n                    <ElevatedSection title=\"\" style={{flex: 1, marginBottom: sizes.rem1_5 / 2, marginHorizontal: sizes.rem1_5 / 4, paddingHorizontal: sizes.rem0_5, paddingVertical: sizes.rem0_5}}>\r\n                        <Pressable\r\n                            onPress={() => {\r\n                                nav.navigate(\"WatchlistViewer\", {\r\n                                    watchlistId: item.item.id\r\n                                })\r\n                        }}>\r\n                            <View style={{flex: 1, flexDirection: 'row', justifyContent: 'space-around'}}>\r\n                                {\r\n                                fields.map((c, i) => { \r\n                                    return (\r\n                                        <Text style={{flex: 1, textAlign: 'center'}}> \r\n                                            {c.field ? \r\n                                                (c.field === 'user' ? item.item[c.field][0].handle : \r\n                                                    (c.field === 'type' ? item.item[c.field].slice(0,1).toUpperCase() + item.item[c.field].slice(1) : item.item[c.field])) : \r\n                                                ''} \r\n                                        </Text>\r\n                                        )\r\n                                        }\r\n                                    )\r\n                                }\r\n                            </View>\r\n                        </Pressable>\r\n                    </ElevatedSection>\r\n\r\n                )\r\n            }}\r\n        \r\n        />\r\n        {/*<Table\r\n            listKey={props.title}\r\n            datasetKey={`${focus}`}\r\n            noDataMessage={props.shared ? \"No Shared Watchlists\" : \"No Watchlists\"}\r\n            columns={[\r\n                ...fields,\r\n                column\r\n            ]}\r\n            rowPressed={(item, idx) => {\r\n                nav.navigate(\"WatchlistViewer\", {\r\n                    watchlistId: item.id\r\n                })\r\n            }}\r\n            renderAuxItem={(info) => shownMap[info.index] ? <Text><Text style={{ fontWeight: \"bold\" }}>Details: </Text>{info.item.note}</Text> : null}\r\n            data={props.watchlists}\r\n        />*/}\r\n    </Section>\r\n}\r\n","import React from \"react\"\r\nimport { Pressable } from \"react-native\"\r\nimport { shadow } from \"../style\"\r\nimport { IconifyIcon } from \"./IconfiyIcon\"\r\nimport plusCircle from '../assets/@iconify/plus-circle'\r\nimport { AppColors } from \"../constants/Colors\"\r\n\r\n/**\r\n * This component assumes it will be placed in the bottom right corner of its parent.\r\n * @param props \r\n * @returns \r\n */\r\nexport const PlusContentButton = (props: {\r\n    onPress: () => void\r\n}) => {\r\n\r\n    return <Pressable style={[shadow, {\r\n        position: \"absolute\",\r\n        bottom: 10,\r\n        right: 10,\r\n        backgroundColor: \"blue\",\r\n        height: 62, aspectRatio: 1,\r\n        borderRadius: 34,\r\n        overflow: \"hidden\"\r\n    }]} onPress={props.onPress}>\r\n        <IconifyIcon icon={plusCircle} currentColor=\"green\" style={{ height: 64 * 1.2, width: 64 * 1.2, aspectRatio: 1, margin: 0, padding: 0, backgroundColor: \"white\" }} svgProps={{\r\n            style: {\r\n                height: 64 * 1.2,\r\n                width: 64 * 1.2,\r\n                marginTop: \"-10%\",\r\n                marginLeft: \"-10%\"\r\n            }\r\n        }} />\r\n    </Pressable>\r\n}","import { NavigationProp, useNavigation } from \"@react-navigation/native\";\r\nimport { Api, Interface } from \"@tradingpost/common/api\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useWindowDimensions } from \"react-native\";\r\nimport { View, Text } from \"react-native\";\r\nimport { PlusContentButton } from \"../components/PlusContentButton\";\r\nimport { PostList } from \"../components/PostList\";\r\nimport { spaceOnSide, postInnerHeight } from \"../components/PostView\";\r\nimport { DashTabScreenProps } from \"../navigation/pages\";\r\n\r\nexport const FeedScreen = (props: DashTabScreenProps<'Feed'>) => {\r\n    const [searchText, setSearchText] = useState(\"\")\r\n    const nav = useNavigation();\r\n\r\n    //useEffect(()=>{\r\n    //props.navigation.setOptions({\r\n    //headerRight:\r\n    //  })\r\n    // return <Pressable onPress={() => {\r\n    //     navigation.setParams({\r\n    //       bookmarkedOnly: true\r\n    //     })\r\n    //   }}>\r\n    //     <IconButton iconSource={BookmarkIcons.inactive} style={{ height: 24, width: 24 }} />\r\n    //   </Pressable>\r\n    //},[])\r\n\r\n    return (\r\n        <View style={{ flex: 1, backgroundColor: \"#F7f8f8\" }}>\r\n            <FeedPart bookmarkedOnly={props.route.params.bookmarkedOnly === \"true\"} searchText={searchText} />\r\n            <PlusContentButton onPress={() => {\r\n                nav.navigate(\"PostEditor\")\r\n            }} />\r\n        </View>\r\n    );\r\n}\r\n\r\n\r\nexport const FeedPart = (props: {\r\n    bookmarkedOnly?: boolean,\r\n    searchText?: string,\r\n    userId?: string\r\n}) => {\r\n    const { width: windowWidth } = useWindowDimensions();\r\n    const { searchText, bookmarkedOnly, userId } = props\r\n\r\n    const [postsKey, setPostsKey] = useState(Date.now());\r\n\r\n    return <PostList\r\n        onReloadNeeded={() => {\r\n            setPostsKey(Date.now());\r\n        }}\r\n        key={bookmarkedOnly ? String(Date.now()) : postsKey}\r\n        datasetKey={searchText ? searchText : \"____________\"}\r\n        posts={async (allItems, page, sizeCache) => {\r\n            console.log(\"PAGE: \", page)\r\n            const posts = (await Api.Post.extensions.feed({\r\n                page,\r\n                bookmarkedOnly: bookmarkedOnly,\r\n                userId,\r\n                data: searchText ? {\r\n                    terms: (() => {\r\n                        if (searchText[0] === '$') {\r\n                            console.log('lowercasing')\r\n                            return searchText.toLowerCase()\r\n                        } else {\r\n                            return searchText\r\n                        }\r\n                    })()\r\n                } : undefined\r\n            }));\r\n\r\n            const newItems = [...(allItems || []), ...posts]\r\n            newItems.forEach((itm, index) => {\r\n                if (!sizeCache[index]) {\r\n                    sizeCache[index] = {\r\n                        index,\r\n                        offset: index ? sizeCache[index - 1].offset + sizeCache[index - 1].length : 0,\r\n                        length: postInnerHeight(itm, Math.min(windowWidth, 680) - spaceOnSide)\r\n                    }\r\n                }\r\n            })\r\n            return newItems;\r\n        }}\r\n    />\r\n}","import React, { Component } from 'react'\r\nimport { InteractionManager } from 'react-native'\r\nimport PropTypes from 'prop-types'\r\nimport { Path } from 'react-native-svg'\r\nimport * as interpolate from 'd3-interpolate-path'\r\n\r\nclass AnimatedPath extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = { d: props.d }\r\n    }\r\n\r\n    componentDidUpdate(props) {\r\n        const { d: newD, animate } = this.props\r\n        const { d: oldD } = props\r\n\r\n        this.newD = newD\r\n\r\n        if (newD === oldD) {\r\n            return\r\n        }\r\n\r\n        if (!animate || newD === null || oldD === null) {\r\n            return\r\n        }\r\n\r\n        this.newD = newD\r\n        this.interpolator = interpolate.interpolatePath(oldD, newD)\r\n\r\n        this._animate()\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        cancelAnimationFrame(this.animation)\r\n        this._clearInteraction()\r\n    }\r\n\r\n    _animate(start) {\r\n        cancelAnimationFrame(this.animation)\r\n        this.animation = requestAnimationFrame((timestamp) => {\r\n            if (!start) {\r\n                this._clearInteraction()\r\n                this.handle = InteractionManager.createInteractionHandle()\r\n\r\n                start = timestamp\r\n            }\r\n\r\n            // Get the delta on how far long in our animation we are.\r\n            const delta = (timestamp - start) / this.props.animationDuration\r\n\r\n            // If we're above 1 then our animation should be complete.\r\n            if (delta > 1) {\r\n                // Just to be safe set our final value to the new graph path.\r\n                this.component.setNativeProps({ d: this.newD })\r\n                // Stop our animation loop.\r\n                this._clearInteraction()\r\n                return\r\n            }\r\n\r\n            const d = this.interpolator(delta)\r\n            this.component.setNativeProps({ d })\r\n            // console.log(this.interpolator)\r\n            // this.tween && console.log(this.tween.tween(delta))\r\n            // Tween the SVG path value according to what delta we're currently at.\r\n\r\n            // Update our state with the new tween value and then jump back into\r\n            // this loop.\r\n            this.setState(this.state, () => {\r\n                this._animate(start)\r\n            })\r\n        })\r\n    }\r\n\r\n    _clearInteraction() {\r\n        if (this.handle) {\r\n            InteractionManager.clearInteractionHandle(this.handle)\r\n            this.handle = null\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Path\r\n                ref={(ref) => (this.component = ref)}\r\n                {...this.props}\r\n                d={this.props.animate ? this.state.d : this.props.d}\r\n            />\r\n        )\r\n    }\r\n}\r\n\r\nAnimatedPath.propTypes = {\r\n    animate: PropTypes.bool,\r\n    animationDuration: PropTypes.number,\r\n    renderPlaceholder: PropTypes.func,\r\n    ...Path.propTypes,\r\n}\r\n\r\nAnimatedPath.defaultProps = {\r\n    animate: false,\r\n    animationDuration: 300,\r\n    renderPlaceholder: () => null,\r\n}\r\n\r\nexport default AnimatedPath\r\n","import * as array from 'd3-array'\r\nimport * as scale from 'd3-scale'\r\nimport * as shape from 'd3-shape'\r\nimport PropTypes from 'prop-types'\r\nimport React, { PureComponent } from 'react'\r\nimport { View } from 'react-native'\r\nimport Svg from 'react-native-svg'\r\nimport Path from '../animated-path'\r\n\r\nclass Chart extends PureComponent {\r\n    state = {\r\n        width: 0,\r\n        height: 0,\r\n    }\r\n\r\n    _onLayout(event) {\r\n        const {\r\n            nativeEvent: {\r\n                layout: { height, width },\r\n            },\r\n        } = event\r\n        this.setState({ height, width })\r\n    }\r\n\r\n    createPaths() {\r\n        throw 'Extending \"Chart\" requires you to override \"createPaths'\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            data,\r\n            xAccessor,\r\n            yAccessor,\r\n            yScale,\r\n            xScale,\r\n            style,\r\n            animate,\r\n            animationDuration,\r\n            numberOfTicks,\r\n            contentInset: { top = 0, bottom = 0, left = 0, right = 0 },\r\n            gridMax,\r\n            gridMin,\r\n            clampX,\r\n            clampY,\r\n            svg,\r\n            children,\r\n        } = this.props\r\n\r\n        const { width, height } = this.state\r\n\r\n        if (data.length === 0) {\r\n            return <View style={style} />\r\n        }\r\n\r\n        const mappedData = data.map((item, index) => ({\r\n            y: yAccessor({ item, index }),\r\n            x: xAccessor({ item, index }),\r\n        }))\r\n\r\n        const yValues = mappedData.map((item) => item.y)\r\n        const xValues = mappedData.map((item) => item.x)\r\n\r\n        const yExtent = array.extent([...yValues, gridMin, gridMax])\r\n        const xExtent = array.extent([...xValues])\r\n\r\n        const { yMin = yExtent[0], yMax = yExtent[1], xMin = xExtent[0], xMax = xExtent[1] } = this.props\r\n\r\n        //invert range to support svg coordinate system\r\n        const y = yScale()\r\n            .domain([yMin, yMax])\r\n            .range([height - bottom, top])\r\n            .clamp(clampY)\r\n\r\n        const x = xScale()\r\n            .domain([xMin, xMax])\r\n            .range([left, width - right])\r\n            .clamp(clampX)\r\n\r\n        const paths = this.createPaths({\r\n            data: mappedData,\r\n            x,\r\n            y,\r\n        })\r\n\r\n        const ticks = y.ticks(numberOfTicks)\r\n\r\n        const extraProps = {\r\n            x,\r\n            y,\r\n            data,\r\n            ticks,\r\n            width,\r\n            height,\r\n            ...paths,\r\n        }\r\n\r\n        return (\r\n            <View style={style}>\r\n                <View style={{ flex: 1 }} onLayout={(event) => this._onLayout(event)}>\r\n                    {height > 0 && width > 0 && (\r\n                        <Svg style={{ height, width }}>\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                            <Path\r\n                                fill={'none'}\r\n                                {...svg}\r\n                                d={paths.path}\r\n                                animate={animate}\r\n                                animationDuration={animationDuration}\r\n                            />\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && !child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                        </Svg>\r\n                    )}\r\n                </View>\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nChart.propTypes = {\r\n    data: PropTypes.oneOfType([\r\n        PropTypes.arrayOf(PropTypes.object),\r\n        PropTypes.arrayOf(PropTypes.number),\r\n        PropTypes.arrayOf(PropTypes.array),\r\n    ]).isRequired,\r\n    svg: PropTypes.object,\r\n\r\n    style: PropTypes.any,\r\n\r\n    animate: PropTypes.bool,\r\n    animationDuration: PropTypes.number,\r\n\r\n    curve: PropTypes.func,\r\n    contentInset: PropTypes.shape({\r\n        top: PropTypes.number,\r\n        left: PropTypes.number,\r\n        right: PropTypes.number,\r\n        bottom: PropTypes.number,\r\n    }),\r\n    numberOfTicks: PropTypes.number,\r\n\r\n    gridMin: PropTypes.number,\r\n    gridMax: PropTypes.number,\r\n\r\n    yMin: PropTypes.any,\r\n    yMax: PropTypes.any,\r\n    xMin: PropTypes.any,\r\n    xMax: PropTypes.any,\r\n    clampX: PropTypes.bool,\r\n    clampY: PropTypes.bool,\r\n\r\n    xScale: PropTypes.func,\r\n    yScale: PropTypes.func,\r\n\r\n    xAccessor: PropTypes.func,\r\n    yAccessor: PropTypes.func,\r\n}\r\n\r\nChart.defaultProps = {\r\n    svg: {},\r\n    width: 100,\r\n    height: 100,\r\n    curve: shape.curveLinear,\r\n    contentInset: {},\r\n    numberOfTicks: 10,\r\n    xScale: scale.scaleLinear,\r\n    yScale: scale.scaleLinear,\r\n    xAccessor: ({ index }) => index,\r\n    yAccessor: ({ item }) => item,\r\n}\r\n\r\nexport default Chart\r\n","import * as shape from 'd3-shape'\r\nimport PropTypes from 'prop-types'\r\nimport Chart from './chart/chart'\r\n\r\nclass AreaChart extends Chart {\r\n    createPaths({ data, x, y }) {\r\n        const { curve, start } = this.props\r\n\r\n        const area = shape\r\n            .area()\r\n            .x((d) => x(d.x))\r\n            .y0(y(start))\r\n            .y1((d) => y(d.y))\r\n            .defined((item) => typeof item.y === 'number')\r\n            .curve(curve)(data)\r\n\r\n        const line = shape\r\n            .line()\r\n            .x((d) => x(d.x))\r\n            .y((d) => y(d.y))\r\n            .defined((item) => typeof item.y === 'number')\r\n            .curve(curve)(data)\r\n\r\n        return {\r\n            path: area,\r\n            area,\r\n            line,\r\n        }\r\n    }\r\n}\r\n\r\nAreaChart.propTypes = {\r\n    ...Chart.propTypes,\r\n    start: PropTypes.number,\r\n}\r\n\r\nAreaChart.defaultProps = {\r\n    ...Chart.defaultProps,\r\n    start: 0,\r\n}\r\n\r\nexport default AreaChart\r\n","import PropTypes from 'prop-types'\r\nimport * as array from 'd3-array'\r\nimport * as scale from 'd3-scale'\r\nimport * as shape from 'd3-shape'\r\nimport React, { PureComponent } from 'react'\r\nimport { View } from 'react-native'\r\nimport { Svg } from 'react-native-svg'\r\nimport Path from './animated-path'\r\n\r\nclass AreaStack extends PureComponent {\r\n    static extractDataPoints(data, keys, order = shape.stackOrderNone, offset = shape.stackOffsetNone) {\r\n        const series = shape\r\n            .stack()\r\n            .keys(keys)\r\n            .order(order)\r\n            .offset(offset)(data)\r\n\r\n        //double merge arrays to extract just the values\r\n        return array.merge(array.merge(series))\r\n    }\r\n\r\n    state = {\r\n        height: 0,\r\n        width: 0,\r\n    }\r\n\r\n    _onLayout(event) {\r\n        const {\r\n            nativeEvent: {\r\n                layout: { height, width },\r\n            },\r\n        } = event\r\n        this.setState({ height, width })\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            data,\r\n            keys,\r\n            colors,\r\n            animate,\r\n            animationDuration,\r\n            style,\r\n            curve,\r\n            numberOfTicks,\r\n            contentInset: { top = 0, bottom = 0, left = 0, right = 0 },\r\n            gridMin,\r\n            gridMax,\r\n            children,\r\n            offset,\r\n            order,\r\n            svgs,\r\n            xAccessor,\r\n            xScale,\r\n            clampY,\r\n            clampX,\r\n        } = this.props\r\n\r\n        const { height, width } = this.state\r\n\r\n        if (data.length === 0) {\r\n            return <View style={style} />\r\n        }\r\n\r\n        const series = shape\r\n            .stack()\r\n            .keys(keys)\r\n            .order(order)\r\n            .offset(offset)(data)\r\n\r\n        //double merge arrays to extract just the yValues\r\n        const yValues = array.merge(array.merge(series))\r\n        const xValues = data.map((item, index) => xAccessor({ item, index }))\r\n\r\n        const yExtent = array.extent([...yValues, gridMin, gridMax])\r\n        const xExtent = array.extent(xValues)\r\n\r\n        const { yMin = yExtent[0], yMax = yExtent[1], xMin = xExtent[0], xMax = xExtent[1] } = this.props\r\n\r\n        //invert range to support svg coordinate system\r\n        const y = scale\r\n            .scaleLinear()\r\n            .domain([yMin, yMax])\r\n            .range([height - bottom, top])\r\n            .clamp(clampY)\r\n\r\n        const x = xScale()\r\n            .domain([xMin, xMax])\r\n            .range([left, width - right])\r\n            .clamp(clampX)\r\n\r\n        const ticks = y.ticks(numberOfTicks)\r\n\r\n        const areas = series.map((serie, index) => {\r\n            const path = shape\r\n                .area()\r\n                .x((d, index) => x(xAccessor({ item: d.data, index })))\r\n                .y0((d) => y(d[0]))\r\n                .y1((d) => y(d[1]))\r\n                .curve(curve)(data.map((_, index) => serie[index]))\r\n\r\n            return {\r\n                path,\r\n                key: keys[index],\r\n                color: colors[index],\r\n            }\r\n        })\r\n\r\n        const extraProps = {\r\n            x,\r\n            y,\r\n            width,\r\n            height,\r\n            ticks,\r\n            areas,\r\n        }\r\n\r\n        return (\r\n            <View style={style}>\r\n                <View style={{ flex: 1 }} onLayout={(event) => this._onLayout(event)}>\r\n                    {height > 0 && width > 0 && (\r\n                        <Svg style={{ height, width }}>\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                            {areas.map((area, index) => (\r\n                                <Path\r\n                                    key={area.key}\r\n                                    fill={area.color}\r\n                                    {...svgs[index]}\r\n                                    animate={animate}\r\n                                    animationDuration={animationDuration}\r\n                                    d={area.path}\r\n                                />\r\n                            ))}\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && !child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                        </Svg>\r\n                    )}\r\n                </View>\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nAreaStack.propTypes = {\r\n    data: PropTypes.arrayOf(PropTypes.object).isRequired,\r\n    keys: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n    colors: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n    svgs: PropTypes.arrayOf(PropTypes.object),\r\n    offset: PropTypes.func,\r\n    order: PropTypes.func,\r\n    style: PropTypes.any,\r\n    animate: PropTypes.bool,\r\n    animationDuration: PropTypes.number,\r\n    contentInset: PropTypes.shape({\r\n        top: PropTypes.number,\r\n        left: PropTypes.number,\r\n        right: PropTypes.number,\r\n        bottom: PropTypes.number,\r\n    }),\r\n    numberOfTicks: PropTypes.number,\r\n    showGrid: PropTypes.bool,\r\n    xScale: PropTypes.func,\r\n    xAccessor: PropTypes.func,\r\n\r\n    yMin: PropTypes.any,\r\n    yMax: PropTypes.any,\r\n    xMin: PropTypes.any,\r\n    xMax: PropTypes.any,\r\n    clampX: PropTypes.bool,\r\n    clampY: PropTypes.bool,\r\n}\r\n\r\nAreaStack.defaultProps = {\r\n    curve: shape.curveLinear,\r\n    offset: shape.stackOffsetNone,\r\n    order: shape.stackOrderNone,\r\n    svgs: [],\r\n    strokeWidth: 2,\r\n    contentInset: {},\r\n    numberOfTicks: 10,\r\n    showGrid: true,\r\n    xScale: scale.scaleLinear,\r\n    xAccessor: ({ index }) => index,\r\n}\r\n\r\nexport default AreaStack\r\n","import * as array from 'd3-array'\r\nimport * as scale from 'd3-scale'\r\nimport * as shape from 'd3-shape'\r\nimport PropTypes from 'prop-types'\r\nimport React, { PureComponent } from 'react'\r\nimport { View } from 'react-native'\r\nimport Svg from 'react-native-svg'\r\nimport Path from '../animated-path'\r\n\r\nclass BarChart extends PureComponent {\r\n    state = {\r\n        width: 0,\r\n        height: 0,\r\n    }\r\n\r\n    _onLayout(event) {\r\n        const {\r\n            nativeEvent: {\r\n                layout: { height, width },\r\n            },\r\n        } = event\r\n        this.setState({ height, width })\r\n    }\r\n\r\n    calcXScale(domain) {\r\n        const {\r\n            horizontal,\r\n            contentInset: { left = 0, right = 0 },\r\n            spacingInner,\r\n            spacingOuter,\r\n            clamp,\r\n        } = this.props\r\n\r\n        const { width } = this.state\r\n\r\n        if (horizontal) {\r\n            return scale\r\n                .scaleLinear()\r\n                .domain(domain)\r\n                .range([left, width - right])\r\n                .clamp(clamp)\r\n        }\r\n\r\n        return scale\r\n            .scaleBand()\r\n            .domain(domain)\r\n            .range([left, width - right])\r\n            .paddingInner([spacingInner])\r\n            .paddingOuter([spacingOuter])\r\n    }\r\n\r\n    calcYScale(domain) {\r\n        const {\r\n            horizontal,\r\n            contentInset: { top = 0, bottom = 0 },\r\n            spacingInner,\r\n            spacingOuter,\r\n            clamp,\r\n        } = this.props\r\n\r\n        const { height } = this.state\r\n\r\n        if (horizontal) {\r\n            return scale\r\n                .scaleBand()\r\n                .domain(domain)\r\n                .range([top, height - bottom])\r\n                .paddingInner([spacingInner])\r\n                .paddingOuter([spacingOuter])\r\n        }\r\n\r\n        return scale\r\n            .scaleLinear()\r\n            .domain(domain)\r\n            .range([height - bottom, top])\r\n            .clamp(clamp)\r\n    }\r\n\r\n    calcAreas(x, y) {\r\n        const { horizontal, data, yAccessor } = this.props\r\n\r\n        const values = data.map((item) => yAccessor({ item }))\r\n\r\n        if (horizontal) {\r\n            return data.map((bar, index) => ({\r\n                bar,\r\n                path: shape\r\n                    .area()\r\n                    .y((value, _index) => (_index === 0 ? y(index) : y(index) + y.bandwidth()))\r\n                    .x0(x(0))\r\n                    .x1((value) => x(value))\r\n                    .defined((value) => typeof value === 'number')([values[index], values[index]]),\r\n            }))\r\n        }\r\n\r\n        return data.map((bar, index) => ({\r\n            bar,\r\n            path: shape\r\n                .area()\r\n                .y0(y(0))\r\n                .y1((value) => y(value))\r\n                .x((value, _index) => (_index === 0 ? x(index) : x(index) + x.bandwidth()))\r\n                .defined((value) => typeof value === 'number')([values[index], values[index]]),\r\n        }))\r\n    }\r\n\r\n    calcExtent() {\r\n        const { data, gridMin, gridMax, yAccessor } = this.props\r\n        const values = data.map((obj) => yAccessor({ item: obj }))\r\n\r\n        const extent = array.extent([...values, gridMax, gridMin])\r\n\r\n        const { yMin = extent[0], yMax = extent[1] } = this.props\r\n\r\n        return [yMin, yMax]\r\n    }\r\n\r\n    calcIndexes() {\r\n        const { data } = this.props\r\n        return data.map((_, index) => index)\r\n    }\r\n\r\n    render() {\r\n        const { data, animate, animationDuration, style, numberOfTicks, svg, horizontal, children } = this.props\r\n\r\n        const { height, width } = this.state\r\n\r\n        if (data.length === 0) {\r\n            return <View style={style} />\r\n        }\r\n\r\n        const extent = this.calcExtent()\r\n        const indexes = this.calcIndexes()\r\n        const ticks = array.ticks(extent[0], extent[1], numberOfTicks)\r\n\r\n        const xDomain = horizontal ? extent : indexes\r\n        const yDomain = horizontal ? indexes : extent\r\n\r\n        const x = this.calcXScale(xDomain)\r\n        const y = this.calcYScale(yDomain)\r\n\r\n        const bandwidth = horizontal ? y.bandwidth() : x.bandwidth()\r\n\r\n        const areas = this.calcAreas(x, y).filter(\r\n            (area) => area.bar !== null && area.bar !== undefined && area.path !== null\r\n        )\r\n\r\n        const extraProps = {\r\n            x,\r\n            y,\r\n            width,\r\n            height,\r\n            bandwidth,\r\n            ticks,\r\n            data,\r\n        }\r\n\r\n        return (\r\n            <View style={style}>\r\n                <View style={{ flex: 1 }} onLayout={(event) => this._onLayout(event)}>\r\n                    {height > 0 && width > 0 && (\r\n                        <Svg style={{ height, width }}>\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                            })}\r\n                            {areas.map((area, index) => {\r\n                                const {\r\n                                    bar: { svg: barSvg = {} },\r\n                                    path,\r\n                                } = area\r\n\r\n                                return (\r\n                                    <Path\r\n                                        key={index}\r\n                                        {...svg}\r\n                                        {...barSvg}\r\n                                        d={path}\r\n                                        animate={animate}\r\n                                        animationDuration={animationDuration}\r\n                                    />\r\n                                )\r\n                            })}\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && !child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                            })}\r\n                        </Svg>\r\n                    )}\r\n                </View>\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nBarChart.propTypes = {\r\n    data: PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.number, PropTypes.object])).isRequired,\r\n    style: PropTypes.any,\r\n    spacingInner: PropTypes.number,\r\n    spacingOuter: PropTypes.number,\r\n    animate: PropTypes.bool,\r\n    animationDuration: PropTypes.number,\r\n    contentInset: PropTypes.shape({\r\n        top: PropTypes.number,\r\n        left: PropTypes.number,\r\n        right: PropTypes.number,\r\n        bottom: PropTypes.number,\r\n    }),\r\n    numberOfTicks: PropTypes.number,\r\n    gridMin: PropTypes.number,\r\n    gridMax: PropTypes.number,\r\n    svg: PropTypes.object,\r\n\r\n    yMin: PropTypes.any,\r\n    yMax: PropTypes.any,\r\n    clamp: PropTypes.bool,\r\n}\r\n\r\nBarChart.defaultProps = {\r\n    spacingInner: 0.05,\r\n    spacingOuter: 0.05,\r\n    contentInset: {},\r\n    numberOfTicks: 10,\r\n    svg: {},\r\n    yAccessor: ({ item }) => item,\r\n}\r\n\r\nexport default BarChart\r\n","import PropTypes from 'prop-types'\r\nimport * as array from 'd3-array'\r\nimport * as scale from 'd3-scale'\r\nimport * as shape from 'd3-shape'\r\nimport BarChart from './bar-chart'\r\n\r\nclass GroupedBarChart extends BarChart {\r\n    calcXScale(domain) {\r\n        const {\r\n            horizontal,\r\n            contentInset: { left = 0, right = 0 },\r\n            spacingInner,\r\n            spacingOuter,\r\n            clamp,\r\n        } = this.props\r\n\r\n        const { width } = this.state\r\n\r\n        if (horizontal) {\r\n            return scale\r\n                .scaleLinear()\r\n                .domain(domain)\r\n                .range([left, width - right])\r\n                .clamp(clamp)\r\n        }\r\n\r\n        return scale\r\n            .scaleBand()\r\n            .domain(domain)\r\n            .range([left, width - right])\r\n            .paddingInner([spacingInner])\r\n            .paddingOuter([spacingOuter])\r\n    }\r\n\r\n    calcYScale(domain) {\r\n        const {\r\n            horizontal,\r\n            spacingInner,\r\n            spacingOuter,\r\n            contentInset: { top = 0, bottom = 0 },\r\n            clamp,\r\n        } = this.props\r\n\r\n        const { height } = this.state\r\n\r\n        if (horizontal) {\r\n            return scale\r\n                .scaleBand()\r\n                .domain(domain)\r\n                .range([top, height - bottom])\r\n                .paddingInner([spacingInner])\r\n                .paddingOuter([spacingOuter])\r\n        }\r\n\r\n        return scale\r\n            .scaleLinear()\r\n            .domain(domain)\r\n            .range([height - bottom, top])\r\n            .clamp(clamp)\r\n    }\r\n\r\n    calcAreas(x, y) {\r\n        const { horizontal, data, yAccessor } = this.props\r\n\r\n        const _data = data.map((obj) => {\r\n            const { svg = {} } = obj\r\n            return {\r\n                ...obj,\r\n                data: obj.data.map((item) => {\r\n                    if (typeof item === 'number') {\r\n                        return {\r\n                            value: item,\r\n                            svg,\r\n                        }\r\n                    }\r\n\r\n                    return {\r\n                        ...item,\r\n                        svg: {\r\n                            ...svg,\r\n                            ...item.svg,\r\n                        },\r\n                        value: yAccessor({ item }),\r\n                    }\r\n                }),\r\n            }\r\n        })\r\n\r\n        const areas = []\r\n\r\n        if (horizontal) {\r\n            const barWidth = y.bandwidth() / data.length\r\n\r\n            _data.forEach((obj, collectionIndex) => {\r\n                obj.data.forEach((item, valueIndex) => {\r\n                    areas.push({\r\n                        bar: item,\r\n                        path: shape\r\n                            .area()\r\n                            .y((value, _index) =>\r\n                                _index === 0\r\n                                    ? y(valueIndex) + barWidth * collectionIndex\r\n                                    : y(valueIndex) + barWidth + barWidth * collectionIndex\r\n                            )\r\n                            .x0(x(0))\r\n                            .x1((value) => x(value))\r\n                            .defined((value) => typeof value === 'number')([item.value, item.value]),\r\n                    })\r\n                })\r\n            })\r\n        } else {\r\n            const barWidth = x.bandwidth() / data.length\r\n\r\n            _data.forEach((obj, collectionIndex) => {\r\n                obj.data.forEach((item, valueIndex) => {\r\n                    areas.push({\r\n                        bar: item,\r\n                        path: shape\r\n                            .area()\r\n                            .x((value, _index) =>\r\n                                _index === 0\r\n                                    ? x(valueIndex) + barWidth * collectionIndex\r\n                                    : x(valueIndex) + barWidth + barWidth * collectionIndex\r\n                            )\r\n                            .y0(y(0))\r\n                            .y1((value) => y(value))\r\n                            .defined((value) => typeof value === 'number')([item.value, item.value]),\r\n                    })\r\n                })\r\n            })\r\n        }\r\n\r\n        return areas\r\n    }\r\n\r\n    calcExtent() {\r\n        const { data, yAccessor, gridMin, gridMax } = this.props\r\n        const dataExtent = array.merge(data.map((obj) => obj.data.map((item) => yAccessor({ item }))))\r\n\r\n        const extent = array.extent([...dataExtent, gridMax, gridMin])\r\n\r\n        const { yMin = extent[0], yMax = extent[1] } = this.props\r\n\r\n        return [yMin, yMax]\r\n    }\r\n\r\n    calcIndexes() {\r\n        const { data } = this.props\r\n        return data[0].data.map((_, index) => index)\r\n    }\r\n}\r\n\r\nGroupedBarChart.propTypes = {\r\n    ...BarChart.propTypes,\r\n    data: PropTypes.arrayOf(\r\n        PropTypes.shape({\r\n            data: PropTypes.array.isRequired,\r\n            svg: PropTypes.object,\r\n        })\r\n    ).isRequired,\r\n}\r\n\r\nexport default GroupedBarChart\r\n","import * as array from 'd3-array'\r\nimport * as scale from 'd3-scale'\r\nimport * as shape from 'd3-shape'\r\nimport PropTypes from 'prop-types'\r\nimport React, { PureComponent } from 'react'\r\nimport { View } from 'react-native'\r\nimport Svg from 'react-native-svg'\r\nimport Path from '../animated-path'\r\n\r\nclass BarChart extends PureComponent {\r\n    static extractDataPoints(data, keys, order = shape.stackOrderNone, offset = shape.stackOffsetNone) {\r\n        const series = shape\r\n            .stack()\r\n            .keys(keys)\r\n            .order(order)\r\n            .offset(offset)(data)\r\n\r\n        //double merge arrays to extract just the values\r\n        return array.merge(array.merge(series))\r\n    }\r\n\r\n    state = {\r\n        width: 0,\r\n        height: 0,\r\n    }\r\n\r\n    _onLayout(event) {\r\n        const {\r\n            nativeEvent: {\r\n                layout: { height, width },\r\n            },\r\n        } = event\r\n        this.setState({ height, width })\r\n    }\r\n\r\n    calcXScale(domain) {\r\n        const { data } = this.props\r\n\r\n        const {\r\n            horizontal,\r\n            contentInset: { left = 0, right = 0 },\r\n            spacingInner,\r\n            spacingOuter,\r\n        } = this.props\r\n\r\n        const { width } = this.state\r\n\r\n        if (horizontal) {\r\n            return scale\r\n                .scaleLinear()\r\n                .domain(domain)\r\n                .range([left, width - right])\r\n        }\r\n\r\n        // use index as domain identifier instead of value since\r\n        // domain must be same length as number of bars\r\n        // same value can occur at several places in data\r\n        return scale\r\n            .scaleBand()\r\n            .domain(data.map((_, index) => index))\r\n            .range([left, width - right])\r\n            .paddingInner([spacingInner])\r\n            .paddingOuter([spacingOuter])\r\n    }\r\n\r\n    calcYScale(domain) {\r\n        const { data } = this.props\r\n\r\n        const {\r\n            horizontal,\r\n            contentInset: { top = 0, bottom = 0 },\r\n            spacingInner,\r\n            spacingOuter,\r\n        } = this.props\r\n\r\n        const { height } = this.state\r\n\r\n        if (horizontal) {\r\n            return scale\r\n                .scaleBand()\r\n                .domain(data.map((_, index) => index))\r\n                .range([top, height - bottom])\r\n                .paddingInner([spacingInner])\r\n                .paddingOuter([spacingOuter])\r\n        }\r\n\r\n        return scale\r\n            .scaleLinear()\r\n            .domain(domain)\r\n            .range([height - bottom, top])\r\n    }\r\n\r\n    calcAreas(x, y, series) {\r\n        const { horizontal, colors, keys } = this.props\r\n\r\n        if (horizontal) {\r\n            return array.merge(\r\n                series.map((serie, keyIndex) => {\r\n                    return serie.map((entry, entryIndex) => {\r\n                        const path = shape\r\n                            .area()\r\n                            .x0((d) => x(d[0]))\r\n                            .x1((d) => x(d[1]))\r\n                            .y((d, _index) => (_index === 0 ? y(entryIndex) : y(entryIndex) + y.bandwidth()))\r\n                            .defined((d) => !isNaN(d[0]) && !isNaN(d[1]))([entry, entry])\r\n\r\n                        return {\r\n                            path,\r\n                            color: colors[keyIndex],\r\n                            key: keys[keyIndex],\r\n                        }\r\n                    })\r\n                })\r\n            )\r\n        }\r\n\r\n        return array.merge(\r\n            series.map((serie, keyIndex) => {\r\n                return serie.map((entry, entryIndex) => {\r\n                    const path = shape\r\n                        .area()\r\n                        .y0((d) => y(d[0]))\r\n                        .y1((d) => y(d[1]))\r\n                        .x((d, _index) => (_index === 0 ? x(entryIndex) : x(entryIndex) + x.bandwidth()))\r\n                        .defined((d) => !isNaN(d[0]) && !isNaN(d[1]))([entry, entry])\r\n\r\n                    return {\r\n                        path,\r\n                        color: colors[keyIndex],\r\n                        key: keys[keyIndex],\r\n                    }\r\n                })\r\n            })\r\n        )\r\n    }\r\n\r\n    calcExtent(values) {\r\n        const { gridMax, gridMin } = this.props\r\n\r\n        return array.extent([...values, gridMin, gridMax])\r\n    }\r\n\r\n    calcIndexes(values) {\r\n        return values.map((_, index) => index)\r\n    }\r\n\r\n    getSeries() {\r\n        const { data, keys, offset, order, valueAccessor } = this.props\r\n\r\n        return shape\r\n            .stack()\r\n            .keys(keys)\r\n            .value((item, key) => valueAccessor({ item, key }))\r\n            .order(order)\r\n            .offset(offset)(data)\r\n    }\r\n\r\n    render() {\r\n        const { data, animate, animationDuration, style, numberOfTicks, children, horizontal } = this.props\r\n\r\n        const { height, width } = this.state\r\n\r\n        if (data.length === 0) {\r\n            return <View style={style} />\r\n        }\r\n\r\n        const series = this.getSeries()\r\n\r\n        //double merge arrays to extract just the values\r\n        const values = array.merge(array.merge(series))\r\n        const indexes = this.calcIndexes(values)\r\n\r\n        const extent = this.calcExtent(values)\r\n        const ticks = array.ticks(extent[0], extent[1], numberOfTicks)\r\n\r\n        const xDomain = horizontal ? extent : indexes\r\n        const yDomain = horizontal ? indexes : extent\r\n\r\n        const x = this.calcXScale(xDomain)\r\n        const y = this.calcYScale(yDomain)\r\n\r\n        const bandwidth = horizontal ? y.bandwidth() : x.bandwidth()\r\n\r\n        const areas = this.calcAreas(x, y, series)\r\n\r\n        const extraProps = {\r\n            x,\r\n            y,\r\n            width,\r\n            height,\r\n            ticks,\r\n            data,\r\n            bandwidth,\r\n        }\r\n\r\n        return (\r\n            <View style={style}>\r\n                <View style={{ flex: 1 }} onLayout={(event) => this._onLayout(event)}>\r\n                    {height > 0 && width > 0 && (\r\n                        <Svg style={{ height, width }}>\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                            {areas.map((bar, index) => {\r\n                                const keyIndex = index % data.length\r\n                                const key = `${keyIndex}-${bar.key}`\r\n                                const { svg } = data[keyIndex][bar.key]\r\n\r\n                                return (\r\n                                    <Path\r\n                                        key={key}\r\n                                        fill={bar.color}\r\n                                        {...svg}\r\n                                        d={bar.path}\r\n                                        animate={animate}\r\n                                        animationDuration={animationDuration}\r\n                                    />\r\n                                )\r\n                            })}\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && !child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                        </Svg>\r\n                    )}\r\n                </View>\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nBarChart.propTypes = {\r\n    data: PropTypes.arrayOf(PropTypes.object),\r\n    keys: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n    colors: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n    offset: PropTypes.func,\r\n    order: PropTypes.func,\r\n    style: PropTypes.any,\r\n    spacingInner: PropTypes.number,\r\n    spacingOuter: PropTypes.number,\r\n    animate: PropTypes.bool,\r\n    animationDuration: PropTypes.number,\r\n    contentInset: PropTypes.shape({\r\n        top: PropTypes.number,\r\n        left: PropTypes.number,\r\n        right: PropTypes.number,\r\n        bottom: PropTypes.number,\r\n    }),\r\n    gridMin: PropTypes.number,\r\n    gridMax: PropTypes.number,\r\n    valueAccessor: PropTypes.func,\r\n}\r\n\r\nBarChart.defaultProps = {\r\n    spacingInner: 0.05,\r\n    spacingOuter: 0.05,\r\n    offset: shape.stackOffsetNone,\r\n    order: shape.stackOrderNone,\r\n    width: 100,\r\n    height: 100,\r\n    showZeroAxis: true,\r\n    contentInset: {},\r\n    numberOfTicks: 10,\r\n    showGrid: true,\r\n    valueAccessor: ({ item, key }) => item[key],\r\n}\r\n\r\nexport default BarChart\r\n","import React, { PureComponent } from 'react'\r\nimport { View } from 'react-native'\r\nimport PropTypes from 'prop-types'\r\nimport Svg from 'react-native-svg'\r\nimport * as array from 'd3-array'\r\nimport * as scale from 'd3-scale'\r\nimport * as shape from 'd3-shape'\r\nimport Path from '../animated-path'\r\n\r\nclass StackedBarGrouped extends PureComponent {\r\n    state = {\r\n        width: 0,\r\n        height: 0,\r\n    }\r\n\r\n    _onLayout(event) {\r\n        const {\r\n            nativeEvent: {\r\n                layout: { height, width },\r\n            },\r\n        } = event\r\n        this.setState({ height, width })\r\n    }\r\n\r\n    calcXScale(domain) {\r\n        const {\r\n            horizontal,\r\n            contentInset: { left = 0, right = 0 },\r\n            spacingInner,\r\n            spacingOuter,\r\n        } = this.props\r\n\r\n        const { width } = this.state\r\n\r\n        if (horizontal) {\r\n            return scale\r\n                .scaleLinear()\r\n                .domain(domain)\r\n                .range([left, width - right])\r\n        }\r\n\r\n        return scale\r\n            .scaleBand()\r\n            .domain(domain)\r\n            .range([left, width - right])\r\n            .paddingInner([spacingInner])\r\n            .paddingOuter([spacingOuter])\r\n    }\r\n\r\n    calcYScale(domain) {\r\n        const {\r\n            horizontal,\r\n            contentInset: { top = 0, bottom = 0 },\r\n            spacingInner,\r\n            spacingOuter,\r\n        } = this.props\r\n\r\n        const { height } = this.state\r\n\r\n        if (horizontal) {\r\n            return scale\r\n                .scaleBand()\r\n                .domain(domain)\r\n                .range([top, height - bottom])\r\n                .paddingInner([spacingInner])\r\n                .paddingOuter([spacingOuter])\r\n        }\r\n\r\n        return scale\r\n            .scaleLinear()\r\n            .domain(domain)\r\n            .range([height - bottom, top])\r\n    }\r\n\r\n    calcAreas(x, y, series) {\r\n        const { horizontal, colors, keys, data, borderRadius: initialBorderRadius, innerBarSpace } = this.props\r\n        let areas\r\n        let barWidth\r\n\r\n        if (horizontal) {\r\n            barWidth = y.bandwidth() / data.length\r\n\r\n            areas = series.map((stack, stackIndex) => {\r\n                return stack.map((serie, keyIndex) => {\r\n                    return serie.map((entry, entryIndex) => {\r\n                        const leftMargin = series.length > 1 ? innerBarSpace / 2 : 0\r\n\r\n                        const path = shape\r\n                            .area()\r\n                            .x0((d) => x(d[0]))\r\n                            .x1((d) => x(d[1]))\r\n                            .y(\r\n                                (d, _index) =>\r\n                                    (_index === 0\r\n                                        ? y(entryIndex) + barWidth * stackIndex + leftMargin\r\n                                        : y(entryIndex) + barWidth + barWidth * stackIndex) - leftMargin\r\n                            )\r\n                            .defined((d) => !isNaN(d[0]) && !isNaN(d[1]))([entry, entry])\r\n\r\n                        return {\r\n                            path,\r\n                            color: colors[stackIndex][keyIndex],\r\n                            key: keys[stackIndex][keyIndex],\r\n                        }\r\n                    })\r\n                })\r\n            })\r\n        } else {\r\n            barWidth = x.bandwidth() / data.length\r\n\r\n            areas = series.map((stack, stackIndex) => {\r\n                return stack.map((serie, keyIndex) => {\r\n                    return serie.map((entry, entryIndex) => {\r\n                        const leftMargin = series.length > 1 ? innerBarSpace / 2 : 0\r\n                        const x0 = x(entryIndex) + barWidth * stackIndex + leftMargin\r\n                        const x1 = x(entryIndex) + barWidth + barWidth * stackIndex - leftMargin\r\n                        const y0 = y(entry[1])\r\n                        const y1 = y(entry[0])\r\n                        const barHeight = y1 - y0\r\n                        const borderRadius = initialBorderRadius * 2 > barHeight ? barHeight / 2 : initialBorderRadius\r\n                        const showTopBorder = keyIndex === stack.length - 1\r\n                        const showBottomBorder = keyIndex === 0\r\n                        const commands = this.coordinatesToPathCommands(\r\n                            x0,\r\n                            y0,\r\n                            x1,\r\n                            y1,\r\n                            borderRadius,\r\n                            showTopBorder,\r\n                            showBottomBorder\r\n                        )\r\n\r\n                        return {\r\n                            path: this.commandsToSvgPath(commands),\r\n                            color: colors[stackIndex][keyIndex],\r\n                            key: keys[stackIndex][keyIndex],\r\n                        }\r\n                    })\r\n                })\r\n            })\r\n        }\r\n\r\n        return array.merge(areas)\r\n    }\r\n\r\n    coordinatesToPathCommands = (x0, y0, x1, y1, borderRadius, showTopBorder, showBottomBorder) => {\r\n        const commands = []\r\n        commands.push({ marker: 'M', values: [x0, y0] })\r\n\r\n        if (showTopBorder) {\r\n            const topLeft1 = [x0 + borderRadius, y0]\r\n            const topLeft2 = [x0, y0 + borderRadius]\r\n            commands.push({ marker: 'L', values: topLeft1 })\r\n            commands.push({\r\n                marker: 'C',\r\n                values: [...topLeft1, x0, y0, ...topLeft2],\r\n            })\r\n            commands.push({ marker: 'L', values: topLeft2 })\r\n        } else {\r\n            commands.push({ marker: 'L', values: [x0, y0] })\r\n        }\r\n\r\n        if (showBottomBorder) {\r\n            const bottomLeft1 = [x0, y1 - borderRadius]\r\n            const bottomLeft2 = [x0 + borderRadius, y1]\r\n            commands.push({ marker: 'L', values: bottomLeft1 })\r\n            commands.push({\r\n                marker: 'C',\r\n                values: [...bottomLeft1, x0, y1, ...bottomLeft2],\r\n            })\r\n            commands.push({ marker: 'L', values: bottomLeft2 })\r\n            const bottomRight1 = [x1 - borderRadius, y1]\r\n            const bottomRight2 = [x1, y1 - borderRadius]\r\n            commands.push({ marker: 'L', values: bottomRight1 })\r\n            commands.push({\r\n                marker: 'C',\r\n                values: [...bottomRight1, x1, y1, ...bottomRight2],\r\n            })\r\n            commands.push({ marker: 'L', values: bottomRight2 })\r\n        } else {\r\n            commands.push({ marker: 'L', values: [x0, y1] })\r\n            commands.push({ marker: 'L', values: [x1, y1] })\r\n        }\r\n\r\n        if (showTopBorder) {\r\n            const topRight1 = [x1, y0 + borderRadius]\r\n            const topRight2 = [x1 - borderRadius, y0]\r\n\r\n            commands.push({ marker: 'L', values: topRight1 })\r\n            commands.push({\r\n                marker: 'C',\r\n                values: [...topRight1, x1, y0, ...topRight2],\r\n            })\r\n            commands.push({ marker: 'L', values: topRight2 })\r\n        } else {\r\n            commands.push({ marker: 'L', values: [x1, y0] })\r\n        }\r\n\r\n        commands.push({ marker: 'Z', values: [] })\r\n\r\n        return commands\r\n    }\r\n\r\n    commandsToSvgPath = (commands) =>\r\n        commands\r\n            .map((command) => `${command.marker} ${command.values.join(',')}`)\r\n            .join(' ')\r\n            .trim()\r\n\r\n    calcExtent(values) {\r\n        const { gridMax, gridMin } = this.props\r\n\r\n        // One more merge for stacked groups\r\n        const mergedValues = array.merge(values)\r\n\r\n        return array.extent([...mergedValues, gridMin, gridMax])\r\n    }\r\n\r\n    calcIndexes() {\r\n        const { data } = this.props\r\n\r\n        // Must return an array with indexes for the number of groups to be shown\r\n        return data[0].data.map((_, index) => index)\r\n    }\r\n\r\n    getSeries() {\r\n        const { data, keys, offset, order, valueAccessor } = this.props\r\n\r\n        return data.map((obj, index) =>\r\n            shape\r\n                .stack()\r\n                .keys(keys[index])\r\n                .value((item, key) => valueAccessor({ item, key }))\r\n                .order(order)\r\n                .offset(offset)(obj.data)\r\n        )\r\n    }\r\n\r\n    render() {\r\n        const { data, animate, animationDuration, style, numberOfTicks, children, horizontal } = this.props\r\n\r\n        const { height, width } = this.state\r\n\r\n        if (data.length === 0) {\r\n            return <View style={style} />\r\n        }\r\n\r\n        const series = this.getSeries()\r\n\r\n        //double merge arrays to extract just the values\r\n        const values = array.merge(array.merge(series))\r\n        const indexes = this.calcIndexes(values)\r\n\r\n        const extent = this.calcExtent(values)\r\n        const ticks = array.ticks(extent[0], extent[1], numberOfTicks)\r\n\r\n        const xDomain = horizontal ? extent : indexes\r\n        const yDomain = horizontal ? indexes : extent\r\n\r\n        const x = this.calcXScale(xDomain)\r\n        const y = this.calcYScale(yDomain)\r\n\r\n        const bandwidth = horizontal ? y.bandwidth() : x.bandwidth()\r\n\r\n        const stacks = this.calcAreas(x, y, series)\r\n\r\n        const extraProps = {\r\n            x,\r\n            y,\r\n            width,\r\n            height,\r\n            ticks,\r\n            data,\r\n            bandwidth,\r\n        }\r\n\r\n        return (\r\n            <View style={style}>\r\n                <View style={{ flex: 1 }} onLayout={(event) => this._onLayout(event)}>\r\n                    {height > 0 && width > 0 && (\r\n                        <Svg style={{ height, width }}>\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                            {stacks.map((areas, indexStack) => {\r\n                                const areaIndex = indexStack % data.length\r\n\r\n                                return areas.map((bar, indexArea) => {\r\n                                    const keyIndex = indexArea % data[areaIndex].data.length\r\n                                    const key = `${areaIndex}-${keyIndex}-${bar.key}`\r\n\r\n                                    const { svg } = data[areaIndex].data[keyIndex][bar.key]\r\n\r\n                                    return (\r\n                                        <Path\r\n                                            key={key}\r\n                                            fill={bar.color}\r\n                                            {...svg}\r\n                                            d={bar.path}\r\n                                            animate={animate}\r\n                                            animationDuration={animationDuration}\r\n                                        />\r\n                                    )\r\n                                })\r\n                            })}\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && !child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                        </Svg>\r\n                    )}\r\n                </View>\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nStackedBarGrouped.propTypes = {\r\n    data: PropTypes.arrayOf(PropTypes.object),\r\n    keys: PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.string)).isRequired,\r\n    colors: PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.string)).isRequired,\r\n    offset: PropTypes.func,\r\n    order: PropTypes.func,\r\n    style: PropTypes.any,\r\n    spacingInner: PropTypes.number,\r\n    spacingOuter: PropTypes.number,\r\n    animate: PropTypes.bool,\r\n    animationDuration: PropTypes.number,\r\n    contentInset: PropTypes.shape({\r\n        top: PropTypes.number,\r\n        left: PropTypes.number,\r\n        right: PropTypes.number,\r\n        bottom: PropTypes.number,\r\n    }),\r\n    gridMin: PropTypes.number,\r\n    gridMax: PropTypes.number,\r\n    valueAccessor: PropTypes.func,\r\n    borderRadius: PropTypes.number,\r\n    innerBarSpace: PropTypes.number,\r\n}\r\n\r\nStackedBarGrouped.defaultProps = {\r\n    spacingInner: 0.05,\r\n    spacingOuter: 0.05,\r\n    offset: shape.stackOffsetNone,\r\n    order: shape.stackOrderNone,\r\n    width: 100,\r\n    height: 100,\r\n    showZeroAxis: true,\r\n    contentInset: {},\r\n    numberOfTicks: 10,\r\n    showGrid: true,\r\n    valueAccessor: ({ item, key }) => item[key],\r\n    borderRadius: 0,\r\n    innerBarSpace: 0,\r\n}\r\n\r\nexport default StackedBarGrouped\r\n","import * as shape from 'd3-shape'\r\nimport Chart from '../chart/chart'\r\n\r\nclass LineChart extends Chart {\r\n    createPaths({ data, x, y }) {\r\n        const { curve } = this.props\r\n\r\n        const line = shape\r\n            .line()\r\n            .x((d) => x(d.x))\r\n            .y((d) => y(d.y))\r\n            .defined((item) => typeof item.y === 'number')\r\n            .curve(curve)(data)\r\n\r\n        return {\r\n            path: line,\r\n            line,\r\n        }\r\n    }\r\n}\r\n\r\nLineChart.propTypes = {\r\n    ...Chart.propTypes,\r\n}\r\n\r\nLineChart.defaultProps = {\r\n    ...Chart.defaultProps,\r\n}\r\n\r\nexport default LineChart\r\n","import * as array from 'd3-array'\r\nimport PropTypes from 'prop-types'\r\nimport React, { PureComponent } from 'react'\r\nimport { View } from 'react-native'\r\nimport Svg from 'react-native-svg'\r\nimport Path from '../animated-path'\r\nimport Chart from './chart'\r\n\r\nclass ChartGrouped extends PureComponent {\r\n    state = {\r\n        width: 0,\r\n        height: 0,\r\n    }\r\n\r\n    _onLayout(event) {\r\n        const {\r\n            nativeEvent: {\r\n                layout: { height, width },\r\n            },\r\n        } = event\r\n        this.setState({ height, width })\r\n    }\r\n\r\n    createPaths() {\r\n        throw 'Extending \"ChartGrouped\" requires you to override \"createPaths'\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            data,\r\n            xAccessor,\r\n            yAccessor,\r\n            yScale,\r\n            xScale,\r\n            style,\r\n            animate,\r\n            animationDuration,\r\n            numberOfTicks,\r\n            contentInset: { top = 0, bottom = 0, left = 0, right = 0 },\r\n            gridMax,\r\n            gridMin,\r\n            clampX,\r\n            clampY,\r\n            svg,\r\n            children,\r\n        } = this.props\r\n\r\n        const { width, height } = this.state\r\n\r\n        if (data.length === 0) {\r\n            return <View style={style} />\r\n        }\r\n\r\n        const mappedData = data.map((dataArray) =>\r\n            dataArray.data.map((item, index) => ({\r\n                y: yAccessor({ item, index }),\r\n                x: xAccessor({ item, index }),\r\n            }))\r\n        )\r\n\r\n        const yValues = array.merge(mappedData).map((item) => item.y)\r\n        const xValues = array.merge(mappedData).map((item) => item.x)\r\n\r\n        const yExtent = array.extent([...yValues, gridMin, gridMax])\r\n        const xExtent = array.extent([...xValues])\r\n\r\n        const { yMin = yExtent[0], yMax = yExtent[1], xMin = xExtent[0], xMax = xExtent[1] } = this.props\r\n\r\n        //invert range to support svg coordinate system\r\n        const y = yScale()\r\n            .domain([yMin, yMax])\r\n            .range([height - bottom, top])\r\n            .clamp(clampY)\r\n\r\n        const x = xScale()\r\n            .domain([xMin, xMax])\r\n            .range([left, width - right])\r\n            .clamp(clampX)\r\n\r\n        const paths = this.createPaths({\r\n            data: mappedData,\r\n            x,\r\n            y,\r\n        })\r\n\r\n        const ticks = y.ticks(numberOfTicks)\r\n\r\n        const extraProps = {\r\n            x,\r\n            y,\r\n            data,\r\n            ticks,\r\n            width,\r\n            height,\r\n            ...paths,\r\n        }\r\n\r\n        return (\r\n            <View style={style}>\r\n                <View style={{ flex: 1 }} onLayout={(event) => this._onLayout(event)}>\r\n                    {height > 0 && width > 0 && (\r\n                        <Svg style={{ height, width }}>\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                            {paths.path.map((path, index) => {\r\n                                const { svg: pathSvg } = data[index]\r\n                                const key = path + '-' + index\r\n                                return (\r\n                                    <Path\r\n                                        key={key}\r\n                                        fill={'none'}\r\n                                        {...svg}\r\n                                        {...pathSvg}\r\n                                        d={path}\r\n                                        animate={animate}\r\n                                        animationDuration={animationDuration}\r\n                                    />\r\n                                )\r\n                            })}\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && !child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                        </Svg>\r\n                    )}\r\n                </View>\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nChartGrouped.propTypes = {\r\n    ...Chart.propTypes,\r\n    data: PropTypes.arrayOf(\r\n        PropTypes.shape({\r\n            data: PropTypes.oneOfType([\r\n                PropTypes.arrayOf(PropTypes.object),\r\n                PropTypes.arrayOf(PropTypes.number),\r\n                PropTypes.arrayOf(PropTypes.array),\r\n            ]),\r\n            svg: PropTypes.object,\r\n        })\r\n    ).isRequired,\r\n}\r\n\r\nChartGrouped.defaultProps = {\r\n    ...Chart.defaultProps,\r\n}\r\n\r\nexport default ChartGrouped\r\n","import * as shape from 'd3-shape'\r\nimport ChartGrouped from '../chart/chart-grouped'\r\n\r\nclass LineChartGrouped extends ChartGrouped {\r\n    createPaths({ data, x, y }) {\r\n        const { curve } = this.props\r\n\r\n        const lines = data.map((line) =>\r\n            shape\r\n                .line()\r\n                .x((d) => x(d.x))\r\n                .y((d) => y(d.y))\r\n                .defined((item) => typeof item.y === 'number')\r\n                .curve(curve)(line)\r\n        )\r\n\r\n        return {\r\n            path: lines,\r\n            lines,\r\n        }\r\n    }\r\n}\r\n\r\nLineChartGrouped.propTypes = {\r\n    ...ChartGrouped.propTypes,\r\n}\r\n\r\nLineChartGrouped.defaultProps = {\r\n    ...ChartGrouped.defaultProps,\r\n}\r\n\r\nexport default LineChartGrouped\r\n","import React from 'react'\r\nimport LineChart from './line-chart'\r\nimport LineChartGrouped from './line-chart-grouped'\r\n\r\nconst LineChartGate = (props) => {\r\n    const { data } = props\r\n\r\n    if (data[0] && data[0].hasOwnProperty('data')) {\r\n        return <LineChartGrouped {...props} />\r\n    }\r\n\r\n    return <LineChart {...props} />\r\n}\r\n\r\nexport default LineChartGate\r\n","import React, { PureComponent } from 'react'\r\nimport { View } from 'react-native'\r\nimport PropTypes from 'prop-types'\r\nimport * as shape from 'd3-shape'\r\nimport Path from './animated-path'\r\nimport Svg, { G } from 'react-native-svg'\r\n\r\nclass ProgressCircle extends PureComponent {\r\n    state = {\r\n        height: 0,\r\n        width: 0,\r\n    }\r\n\r\n    _onLayout(event) {\r\n        const {\r\n            nativeEvent: {\r\n                layout: { height, width },\r\n            },\r\n        } = event\r\n        this.setState({ height, width })\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            style,\r\n            progressColor,\r\n            backgroundColor,\r\n            strokeWidth,\r\n            startAngle,\r\n            endAngle,\r\n            animate,\r\n            animateDuration,\r\n            children,\r\n            cornerRadius,\r\n        } = this.props\r\n\r\n        let { progress } = this.props\r\n\r\n        const { height, width } = this.state\r\n\r\n        const outerDiameter = Math.min(width, height)\r\n\r\n        if (!isFinite(progress) || isNaN(progress)) {\r\n            progress = 0\r\n        }\r\n\r\n        // important order to have progress render over \"rest\"\r\n        const data = [\r\n            {\r\n                key: 'rest',\r\n                value: 1 - progress,\r\n                color: backgroundColor,\r\n            },\r\n            {\r\n                key: 'progress',\r\n                value: progress,\r\n                color: progressColor,\r\n            },\r\n        ]\r\n\r\n        const pieSlices = shape\r\n            .pie()\r\n            .value((d) => d.value)\r\n            .sort((a) => (a.key === 'rest' ? 1 : -1))\r\n            .startAngle(startAngle)\r\n            .endAngle(endAngle)(data)\r\n\r\n        const arcs = pieSlices.map((slice, index) => ({\r\n            ...data[index],\r\n            ...slice,\r\n            path: shape\r\n                .arc()\r\n                .outerRadius(outerDiameter / 2) // Radius of the pie\r\n                .innerRadius(outerDiameter / 2 - strokeWidth) // Inner radius: to create a donut or pie\r\n                .startAngle(index === 0 ? startAngle : slice.startAngle)\r\n                .endAngle(index === 0 ? endAngle : slice.endAngle)\r\n                .cornerRadius(cornerRadius)(),\r\n        }))\r\n\r\n        const extraProps = {\r\n            width,\r\n            height,\r\n        }\r\n\r\n        return (\r\n            <View style={style} onLayout={(event) => this._onLayout(event)}>\r\n                {height > 0 && width > 0 && (\r\n                    <Svg style={{ height, width }}>\r\n                        {/* center the progress circle*/}\r\n                        <G x={width / 2} y={height / 2}>\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                            {arcs.map((shape, index) => {\r\n                                return (\r\n                                    <Path\r\n                                        key={index}\r\n                                        fill={shape.color}\r\n                                        d={shape.path}\r\n                                        animate={animate}\r\n                                        animationDuration={animateDuration}\r\n                                    />\r\n                                )\r\n                            })}\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && !child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                        </G>\r\n                    </Svg>\r\n                )}\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nProgressCircle.propTypes = {\r\n    progress: PropTypes.number.isRequired,\r\n    style: PropTypes.any,\r\n    progressColor: PropTypes.any,\r\n    backgroundColor: PropTypes.any,\r\n    strokeWidth: PropTypes.number,\r\n    startAngle: PropTypes.number,\r\n    endAngle: PropTypes.number,\r\n    animate: PropTypes.bool,\r\n    cornerRadius: PropTypes.number,\r\n    animateDuration: PropTypes.number,\r\n}\r\n\r\nProgressCircle.defaultProps = {\r\n    progressColor: 'black',\r\n    backgroundColor: '#ECECEC',\r\n    strokeWidth: 5,\r\n    startAngle: 0,\r\n    endAngle: Math.PI * 2,\r\n    cornerRadius: 45,\r\n}\r\n\r\nexport default ProgressCircle\r\n","import React, { PureComponent } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Text, View } from 'react-native'\r\nimport * as d3Scale from 'd3-scale'\r\nimport * as array from 'd3-array'\r\nimport Svg, { G, Text as SVGText } from 'react-native-svg'\r\n\r\nclass XAxis extends PureComponent {\r\n    state = {\r\n        width: 0,\r\n        height: 0,\r\n    }\r\n\r\n    _onLayout(event) {\r\n        const {\r\n            nativeEvent: {\r\n                layout: { width, height },\r\n            },\r\n        } = event\r\n\r\n        if (width !== this.state.width) {\r\n            this.setState({ width, height })\r\n        }\r\n    }\r\n\r\n    _getX(domain) {\r\n        const {\r\n            scale,\r\n            spacingInner,\r\n            spacingOuter,\r\n            contentInset: { left = 0, right = 0 },\r\n        } = this.props\r\n\r\n        const { width } = this.state\r\n\r\n        const x = scale()\r\n            .domain(domain)\r\n            .range([left, width - right])\r\n\r\n        if (scale === d3Scale.scaleBand) {\r\n            x.paddingInner([spacingInner]).paddingOuter([spacingOuter])\r\n\r\n            //add half a bar to center label\r\n            return (value) => x(value) + x.bandwidth() / 2\r\n        }\r\n\r\n        return x\r\n    }\r\n\r\n    render() {\r\n        const { style, scale, data, xAccessor, formatLabel, numberOfTicks, svg, children, min, max } = this.props\r\n\r\n        const { height, width } = this.state\r\n\r\n        if (data.length === 0) {\r\n            return <View style={style} />\r\n        }\r\n\r\n        const values = data.map((item, index) => xAccessor({ item, index }))\r\n        const extent = array.extent(values)\r\n        const domain = scale === d3Scale.scaleBand ? values : [min || extent[0], max || extent[1]]\r\n\r\n        const x = this._getX(domain)\r\n        const ticks = numberOfTicks ? x.ticks(numberOfTicks) : values\r\n\r\n        const extraProps = {\r\n            x,\r\n            ticks,\r\n            width,\r\n            height,\r\n            formatLabel,\r\n        }\r\n\r\n        return (\r\n            <View style={style}>\r\n                <View style={{ flexGrow: 1 }} onLayout={(event) => this._onLayout(event)}>\r\n                    {/*invisible text to allow for parent resizing*/}\r\n                    <Text\r\n                        style={{\r\n                            opacity: 0,\r\n                            fontSize: svg.fontSize,\r\n                            fontFamily: svg.fontFamily,\r\n                            fontWeight: svg.fontWeight,\r\n                        }}\r\n                    >\r\n                        {formatLabel(ticks[0], 0)}\r\n                    </Text>\r\n                    {height > 0 && width > 0 && (\r\n                        <Svg\r\n                            style={{\r\n                                position: 'absolute',\r\n                                top: 0,\r\n                                left: 0,\r\n                                height: height,\r\n                                width: width,\r\n                            }}\r\n                        >\r\n                            <G>\r\n                                {React.Children.map(children, (child) => {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                })}\r\n                                {// don't render labels if width isn't measured yet,\r\n                                // causes rendering issues\r\n                                width > 0 &&\r\n                                    ticks.map((value, index) => {\r\n                                        const { svg: valueSvg = {} } = data[index] || {}\r\n\r\n                                        return (\r\n                                            <SVGText\r\n                                                textAnchor={'middle'}\r\n                                                originX={x(value)}\r\n                                                alignmentBaseline={'hanging'}\r\n                                                {...svg}\r\n                                                {...valueSvg}\r\n                                                key={index}\r\n                                                y={0}\r\n                                                x={x(value)}\r\n                                                \r\n                                            >\r\n                                                {formatLabel(value, index)}\r\n                                            </SVGText>\r\n                                        )\r\n                                    })}\r\n                            </G>\r\n                        </Svg>\r\n                    )}\r\n                </View>\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nXAxis.propTypes = {\r\n    data: PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.number, PropTypes.object])).isRequired,\r\n    spacingInner: PropTypes.number,\r\n    spacingOuter: PropTypes.number,\r\n    formatLabel: PropTypes.func,\r\n    contentInset: PropTypes.shape({\r\n        left: PropTypes.number,\r\n        right: PropTypes.number,\r\n    }),\r\n    scale: PropTypes.func,\r\n    numberOfTicks: PropTypes.number,\r\n    xAccessor: PropTypes.func,\r\n    svg: PropTypes.object,\r\n    min: PropTypes.any,\r\n    max: PropTypes.any,\r\n}\r\n\r\nXAxis.defaultProps = {\r\n    spacingInner: 0.05,\r\n    spacingOuter: 0.05,\r\n    contentInset: {},\r\n    svg: {},\r\n    xAccessor: ({ index }) => index,\r\n    scale: d3Scale.scaleLinear,\r\n    formatLabel: (value) => value,\r\n}\r\n\r\nexport default XAxis\r\n","import React, { PureComponent } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Text, View } from 'react-native'\r\nimport { Svg, G, Text as SVGText } from 'react-native-svg'\r\nimport * as d3Scale from 'd3-scale'\r\nimport * as array from 'd3-array'\r\n\r\nclass YAxis extends PureComponent {\r\n    state = {\r\n        height: 0,\r\n        width: 0,\r\n    }\r\n\r\n    _onLayout(event) {\r\n        const {\r\n            nativeEvent: {\r\n                layout: { height, width },\r\n            },\r\n        } = event\r\n        this.setState({ height, width })\r\n    }\r\n\r\n    getY(domain) {\r\n        const {\r\n            scale,\r\n            spacingInner,\r\n            spacingOuter,\r\n            contentInset: { top = 0, bottom = 0 },\r\n        } = this.props\r\n\r\n        const { height } = this.state\r\n\r\n        const y = scale()\r\n            .domain(domain)\r\n            .range([height - bottom, top])\r\n\r\n        if (scale === d3Scale.scaleBand) {\r\n            // use index as domain identifier instead of value since\r\n            // same value can occur at several places in dataPoints\r\n            y\r\n                // set range top to bottom - we are not sorting on values in scaleBand\r\n                .range([top, height - bottom])\r\n                .paddingInner([spacingInner])\r\n                .paddingOuter([spacingOuter])\r\n\r\n            //add half a bar to center label\r\n            return (value) => y(value) + y.bandwidth() / 2\r\n        }\r\n\r\n        return y\r\n    }\r\n\r\n    render() {\r\n        const { style, data, scale, yAccessor, numberOfTicks, formatLabel, svg, children } = this.props\r\n\r\n        const { height, width } = this.state\r\n\r\n        if (data.length === 0) {\r\n            return <View style={style} />\r\n        }\r\n\r\n        const values = data.map((item, index) => yAccessor({ item, index }))\r\n\r\n        const extent = array.extent(values)\r\n\r\n        const { min = extent[0], max = extent[1] } = this.props\r\n\r\n        const domain = scale === d3Scale.scaleBand ? values : [min, max]\r\n\r\n        //invert range to support svg coordinate system\r\n        const y = this.getY(domain)\r\n\r\n        const ticks = scale === d3Scale.scaleBand ? values : y.ticks(numberOfTicks)\r\n\r\n        const longestValue = ticks\r\n            .map((value, index) => formatLabel(value, index))\r\n            .reduce((prev, curr) => (prev.toString().length > curr.toString().length ? prev : curr), 0)\r\n\r\n        const extraProps = {\r\n            y,\r\n            ticks,\r\n            width,\r\n            height,\r\n            formatLabel,\r\n        }\r\n\r\n        return (\r\n            <View style={[style]}>\r\n                <View style={{ flexGrow: 1 }} onLayout={(event) => this._onLayout(event)}>\r\n                    {/*invisible text to allow for parent resizing*/}\r\n                    <Text\r\n                        style={{\r\n                            opacity: 0,\r\n                            fontSize: svg.fontSize,\r\n                            fontFamily: svg.fontFamily,\r\n                            fontWeight: svg.fontWeight,\r\n                        }}\r\n                    >\r\n                        {longestValue}\r\n                    </Text>\r\n                    {height > 0 && width > 0 && (\r\n                        <Svg\r\n                            style={{\r\n                                position: 'absolute',\r\n                                top:0,\r\n                                left: 0,\r\n                                height: height,\r\n                                width: width,\r\n                            }}\r\n                        >\r\n                            <G>\r\n                                {React.Children.map(children, (child) => {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                })}\r\n                                {// don't render labels if width isn't measured yet,\r\n                                // causes rendering issues\r\n                                height > 0 &&\r\n                                    ticks.map((value, index) => {\r\n                                        return (\r\n                                            <SVGText\r\n                                                originY={y(value)}\r\n                                                textAnchor={'middle'}\r\n                                                x={'50%'}\r\n                                                alignmentBaseline={'middle'}\r\n                                                {...svg}\r\n                                                key={y(value)}\r\n                                                y={y(value)}\r\n                                                //opacity={index % 2 ? 0 : 1}\r\n                                            >\r\n                                                {formatLabel(value, index, ticks.length)}\r\n                                            </SVGText>\r\n                                        )\r\n                                    })}\r\n                            </G>\r\n                        </Svg>\r\n                    )}\r\n                </View>\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nYAxis.propTypes = {\r\n    data: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.object), PropTypes.arrayOf(PropTypes.number)]).isRequired,\r\n    svg: PropTypes.object,\r\n    style: PropTypes.any,\r\n    numberOfTicks: PropTypes.number,\r\n    formatLabel: PropTypes.func,\r\n    contentInset: PropTypes.shape({\r\n        top: PropTypes.number,\r\n        bottom: PropTypes.number,\r\n    }),\r\n    min: PropTypes.number,\r\n    max: PropTypes.number,\r\n    yAccessor: PropTypes.func,\r\n    scale: PropTypes.func,\r\n    spacingInner: PropTypes.number,\r\n    spacingOuter: PropTypes.number,\r\n}\r\n\r\nYAxis.defaultProps = {\r\n    numberOfTicks: 8,\r\n    spacingInner: 0.05,\r\n    spacingOuter: 0.05,\r\n    contentInset: {},\r\n    svg: {},\r\n    scale: d3Scale.scaleLinear,\r\n    formatLabel: (value) => value && value.toString(),\r\n    yAccessor: ({ item }) => item,\r\n}\r\n\r\nexport default YAxis\r\n","import React from 'react'\r\nimport { Line } from 'react-native-svg'\r\n\r\nclass HorizontalLine extends React.Component {\r\n    render() {\r\n        const { y, value, ...other } = this.props\r\n        return <Line x1={'0%'} x2={'100%'} y1={y(value)} y2={y(value)} {...other} />\r\n    }\r\n}\r\n\r\nHorizontalLine.defaultProps = {\r\n    stroke: 'black',\r\n}\r\n\r\nexport default HorizontalLine\r\n","import PropTypes from 'prop-types'\r\nimport React from 'react'\r\nimport { Circle } from 'react-native-svg'\r\n\r\nconst Point = ({ x, y, value, index, radius, color }) => {\r\n    if (isNaN(value)) {\r\n        return <Circle />\r\n    }\r\n\r\n    return <Circle cx={x(index)} cy={y(value)} r={radius} stroke={color} fill={'white'} />\r\n}\r\n\r\nPoint.propTypes = {\r\n    x: PropTypes.func.isRequired,\r\n    y: PropTypes.func.isRequired,\r\n    value: PropTypes.number,\r\n    radius: PropTypes.number,\r\n    index: PropTypes.number,\r\n    color: PropTypes.string,\r\n}\r\n\r\nPoint.defaultProps = {\r\n    radius: 4,\r\n    color: 'black',\r\n}\r\n\r\nexport default Point\r\n","import PropTypes from 'prop-types'\r\nimport React from 'react'\r\nimport { Circle, G, Line, Rect, Text } from 'react-native-svg'\r\n\r\nconst Tooltip = ({ x, y, value, index, height, text, stroke, pointStroke }) => {\r\n    return (\r\n        <G>\r\n            <Line x1={x(index)} y1={height} x2={x(index)} y2={20} stroke={stroke} />\r\n            <Circle cx={x(index)} cy={y(value)} r={4} stroke={pointStroke} strokeWidth={2} fill={'white'} />\r\n            <G x={x(index) < 40 ? 40 : x(index)} y={10}>\r\n                <Rect x={-40} y={1} width={80} height={20} fill={'rgba(0, 0, 0, 0.2)'} rx={2} ry={2} />\r\n                <Rect x={-40} y={0} width={80} height={20} fill={'white'} rx={2} ry={2} />\r\n                <Text fontSize='12' textAnchor='middle'>\r\n                    {text}\r\n                </Text>\r\n            </G>\r\n        </G>\r\n    )\r\n}\r\n\r\nTooltip.propTypes = {\r\n    x: PropTypes.func.isRequired,\r\n    y: PropTypes.func.isRequired,\r\n    value: PropTypes.number,\r\n    index: PropTypes.number,\r\n    height: PropTypes.number,\r\n    stroke: PropTypes.string,\r\n    pointStroke: PropTypes.string,\r\n    text: PropTypes.string,\r\n}\r\n\r\nexport default Tooltip\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { G, Line } from 'react-native-svg'\r\n \r\nconst Horizontal = ({ ticks = [], y, svg }) => {\r\n    return (\r\n        <G>\r\n            {ticks.map((tick) => (\r\n                <Line\r\n                    key={tick}\r\n                    x1={'0%'}\r\n                    x2={'100%'}\r\n                    y1={y(tick)}\r\n                    y2={y(tick)}\r\n                    strokeWidth={1}\r\n                    stroke={'rgba(0,0,0,0.2)'}\r\n                    {...svg}\r\n                />\r\n            ))}\r\n        </G>\r\n    )\r\n}\r\n\r\nconst Vertical = ({ ticks = [], x, svg }) => {\r\n    return (\r\n        <G>\r\n            {ticks.map((tick, index) => (\r\n                <Line\r\n                    key={index}\r\n                    y1={'0%'}\r\n                    y2={'100%'}\r\n                    x1={x(tick)}\r\n                    x2={x(tick)}\r\n                    strokeWidth={1}\r\n                    stroke={'rgba(0,0,0,0.2)'}\r\n                    {...svg}\r\n                />\r\n            ))}\r\n        </G>\r\n    )\r\n}\r\n\r\nconst Both = (props) => {\r\n    return (\r\n        <G>\r\n            <Horizontal {...props} />\r\n            <Vertical {...props} />\r\n        </G>\r\n    )\r\n}\r\n\r\nVertical.propTypes = {\r\n    x: PropTypes.func,\r\n    dataPoints: PropTypes.array,\r\n    svg: PropTypes.object,\r\n}\r\n\r\nHorizontal.propTypes = {\r\n    y: PropTypes.func,\r\n    ticks: PropTypes.array,\r\n}\r\n\r\nBoth.propTypes = {\r\n    ...Vertical.propTypes,\r\n    ...Horizontal.propTypes,\r\n}\r\n\r\nconst Direction = {\r\n    VERTICAL: 'VERTICAL',\r\n    HORIZONTAL: 'HORIZONTAL',\r\n    BOTH: 'BOTH',\r\n}\r\n\r\nconst Grid = ({ direction, ...props }) => {\r\n    if (direction === Direction.VERTICAL) {\r\n        return <Vertical {...props} />\r\n    } else if (direction === Direction.HORIZONTAL) {\r\n        return <Horizontal {...props} />\r\n    } else if (direction === Direction.BOTH) {\r\n        return <Both {...props} />\r\n    }\r\n\r\n    return null\r\n}\r\n\r\nGrid.Direction = Direction\r\n\r\nGrid.propTypes = {\r\n    direction: PropTypes.oneOf(Object.values(Direction)),\r\n    belowChart: PropTypes.bool,\r\n    svg: PropTypes.object,\r\n}\r\n\r\nGrid.defaultProps = {\r\n    direction: Direction.HORIZONTAL,\r\n    belowChart: true,\r\n}\r\n\r\nexport default Grid\r\n","import React, { useEffect, useRef, useState } from 'react';\r\n// import * as React from 'react'\r\n\r\nimport { chartColors, row, sizes } from \"../style\";\r\nimport {\r\n    PanResponder,\r\n    Dimensions,\r\n    Text,\r\n    TouchableOpacity,\r\n    View,\r\n} from 'react-native';\r\nimport { LineChart, XAxis, YAxis } from '../charts-js/';\r\nimport {\r\n    Circle,\r\n    Defs,\r\n    G,\r\n    Line,\r\n    LinearGradient,\r\n    Path,\r\n    Rect,\r\n    Stop,\r\n    Text as SvgText,\r\n} from 'react-native-svg';\r\nimport * as shape from 'd3-shape';\r\nimport { toDollarsAndCents, toDateMonthYear, toDateDayMonth } from '../utils/misc';\r\n\r\n\r\nexport default InteractiveChart;\r\n\r\nfunction InteractiveChart(props: any) {\r\n    const apx = (size = 0) => {\r\n        let width = Dimensions.get('window').width; //useDimensions\r\n        if (width > 680) width = 680\r\n        return (width / 750) * size;\r\n    };\r\n    \r\n    if (!props.data) {\r\n        props = {data: [{date: String(new Date()), return: 2}, {date: String(new Date(\"9/1/2022\")) , return: 1}]}\r\n    }\r\n    //console.log(props.data.map((a: any) => a.date));\r\n    const dateList = props.data.map((a: any) => a.x);\r\n    //const [dateList, setDateList] = useState([]);\r\n\r\n\r\n    const priceList = props.data.map((a: any) => a.y)\r\n    //const [priceList, setPriceList] = useState([]);\r\n    \r\n    const size = useRef(dateList.length);\r\n    size.current = dateList.length;\r\n    \r\n    \r\n    const [positionX, setPositionX] = useState(-1);// The currently selected X coordinate position\r\n\r\n    const panResponder = useRef(\r\n        PanResponder.create({\r\n            // 要求成为响应者：\r\n            onStartShouldSetPanResponder: (evt, gestureState) => true,\r\n            onStartShouldSetPanResponderCapture: (evt, gestureState) => true,\r\n            onMoveShouldSetPanResponder: (evt, gestureState) => true,\r\n            onMoveShouldSetPanResponderCapture: (evt, gestureState) => true,\r\n            onPanResponderTerminationRequest: (evt, gestureState) => true,\r\n\r\n            onPanResponderGrant: (evt, gestureState) => {\r\n                updatePosition(evt.nativeEvent.locationX);\r\n                return true;\r\n            },\r\n            onPanResponderMove: (evt, gestureState) => {\r\n                updatePosition(evt.nativeEvent.locationX);\r\n                return true;\r\n            },\r\n            onPanResponderRelease: () => {\r\n                setPositionX(-1);\r\n            },\r\n        })\r\n    );\r\n\r\n    const updatePosition = (x: any) => {\r\n        const YAxisWidth = apx(130);\r\n        const x0 = apx(0);// x0 position\r\n        const chartWidth = apx(750) - YAxisWidth - x0;\r\n        const xN = x0 + chartWidth;//xN position\r\n        const xDistance = chartWidth / size.current;// The width of each coordinate point\r\n\r\n        \r\n        if (x <= x0) {\r\n            x = x0;\r\n        }\r\n        if (x >= xN) {\r\n            x = xN;\r\n        }\r\n\r\n        // console.log((x - x0) )\r\n\r\n        // The selected coordinate x :\r\n        // (x - x0)/ xDistance = value\r\n        let value = Number(((x - x0) / xDistance).toFixed(0));\r\n        if (value >= size.current - 1) {\r\n            value = size.current - 1; // Out of chart range, automatic correction\r\n        }\r\n\r\n        setPositionX(Number(value));\r\n    };\r\n\r\n    const CustomGrid = ( props: {x: any, y: any, ticks: any, performance: Boolean} ) => (\r\n\r\n        <G>\r\n            {\r\n                // Horizontal grid\r\n                props.ticks.map((tick: any) => (\r\n                    \r\n                    <Line\r\n                        key={tick}\r\n                        x1=\"0%\"\r\n                        x2=\"100%\"\r\n                        y1={props.y(1)}\r\n                        y2={props.y(1)}\r\n                        strokeWidth={props.performance ? 0.5 : 0}\r\n                        stroke=\"#35A265\"\r\n                        \r\n                    />\r\n                ))\r\n            }\r\n            {\r\n                // Vertical grid\r\n                /*\r\n                priceList.map((_, index) => (\r\n                    <Line\r\n                        key={index.toString()}\r\n                        y1=\"0%\"\r\n                        y2=\"0%\"\r\n                        x1={props.x(index)}\r\n                        x2={props.x(index)}\r\n                        stroke=\"#EEF3F6\"\r\n                    />\r\n                ))\r\n                */\r\n            }\r\n        </G>\r\n    );\r\n\r\n    const CustomLine = ( line: any ) => (\r\n        <Path\r\n            key=\"line\"\r\n            d={line}\r\n            stroke=\"#FEBE18\"\r\n            strokeWidth={apx(6)}\r\n            fill=\"none\"\r\n        />\r\n    );\r\n\r\n    const CustomGradient = () => (\r\n        <Defs key=\"gradient\">\r\n            <LinearGradient id=\"gradient\" x1=\"0\" x2=\"0%\" y2=\"100%\">\r\n                {/* <Stop offset=\"0%\" stopColor=\"rgb(134, 65, 244)\" /> */}\r\n                {/* <Stop offset=\"100%\" stopColor=\"rgb(66, 194, 244)\" /> */}\r\n\r\n                <Stop offset=\"0%\" stopColor=\"#FEBE18\" stopOpacity={0.25} />\r\n                <Stop offset=\"100%\" stopColor=\"#FEBE18\" stopOpacity={0} />\r\n            </LinearGradient>\r\n        </Defs>\r\n    );\r\n\r\n    const Tooltip = ( props: {x: any, y: any, ticks: any} ) => {\r\n        if (positionX < 0) {\r\n            return null;\r\n        }\r\n        const date = dateList[positionX];\r\n\r\n        return (\r\n            <G x={props.x(positionX)} key=\"tooltip\">\r\n                <G\r\n                    x={positionX > size.current / 2 ? -apx(300 + 10) : apx(10)}\r\n                    y={props.y(priceList[positionX]) - apx(10)}>\r\n                    <Rect\r\n                        y={-apx(24 + 24 + 20) / 2}\r\n                        rx={apx(12)} // borderRadius\r\n                        ry={apx(12)} // borderRadius\r\n                        width={apx(300)}\r\n                        height={apx(96)}\r\n                        stroke=\"rgba(254, 190, 24, 0.27)\"\r\n                        fill=\"rgba(255, 255, 255, 0.8)\"\r\n                    />\r\n\r\n                    <SvgText x={apx(20)} fill=\"#617485\" opacity={0.65} fontSize={apx(24)}>\r\n                        {(new Date(date)).toLocaleDateString()}\r\n                    </SvgText>\r\n                    <SvgText\r\n                        x={apx(20)}\r\n                        y={apx(24 + 20)}\r\n                        fontSize={apx(24)}\r\n                        fontWeight=\"bold\"\r\n                        fill=\"rgba(224, 188, 136, 1)\">\r\n                        {toDollarsAndCents(priceList[positionX])}\r\n                    </SvgText>\r\n                </G>\r\n\r\n                <G x={props.x}>\r\n                    <Line\r\n                        y1={props.ticks[0]}\r\n                        y2={props.ticks[Number(props.ticks.length)]}\r\n                        stroke=\"#FEBE18\"\r\n                        strokeWidth={apx(4)}\r\n                        strokeDasharray={[6, 3]}\r\n                    />\r\n\r\n                    <Circle\r\n                        cy={props.y(priceList[positionX])}\r\n                        r={apx(20 / 2)}\r\n                        stroke=\"#fff\"\r\n                        strokeWidth={apx(2)}\r\n                        fill=\"#FEBE18\"\r\n                    />\r\n                </G>\r\n            </G>\r\n        );\r\n    };\r\n\r\n    const verticalContentInset = { top: 10, bottom: 10 };\r\n\r\n    return (\r\n        <View\r\n            style={{\r\n                backgroundColor: '#fff',\r\n                alignItems: 'stretch',\r\n                borderWidth: 1, \r\n                borderRadius: sizes.rem0_5 / 2,\r\n                borderColor: \"#ccc\",\r\n                padding: sizes.rem0_5,\r\n                //aspectRatio: 16 / 9,\r\n            }}>\r\n            <View\r\n                style={{\r\n                    flexDirection: 'row',\r\n                    width: \"100%\",\r\n                    //height: apx(570),\r\n                    aspectRatio: 16 / 9,\r\n                    alignSelf: 'stretch',\r\n                    \r\n                }}>\r\n                <View style={{ flex: 1 }} {...panResponder.current.panHandlers}>\r\n                    <LineChart\r\n                        style={{ flex: 1 }}\r\n                        data={priceList}\r\n                        //curve={shape.curveNatural}\r\n                        curve={shape.curveMonotoneX}\r\n                        contentInset={{ ...verticalContentInset }}\r\n                        svg={{ stroke: \"#11146F\" }}>\r\n                        {/*<CustomLine />*/}\r\n                        <CustomGrid x={undefined} y={undefined} ticks={undefined} performance={props.performance} />\r\n                        <CustomGradient />\r\n                        <Tooltip x={undefined} y={undefined} ticks={undefined} />\r\n                    </LineChart>\r\n                </View>\r\n\r\n                <YAxis\r\n                    style={{ width: \"12%\" }}\r\n                    data={priceList}\r\n                    contentInset={verticalContentInset}\r\n                    svg={{ fontSize: apx(18), fill: '#617485',\r\n                }}\r\n                    numberOfTicks={5}\r\n                    \r\n                    formatLabel={(value: any, index: any) => `$${String(value).split('.')[0].length > 2 ? value.toFixed(1) : value.toFixed(2)}`}\r\n                />\r\n            </View>\r\n            <XAxis\r\n                style={{\r\n                    alignSelf: 'stretch',\r\n                    // marginTop: apx(57),\r\n                    width: \"100%\",\r\n                    height: apx(70),\r\n                }}\r\n                numberOfTicks={props.period === '1D' ? 1 : 5}\r\n                data={priceList}\r\n                formatLabel={(value: any, index: any) => ['1D', '1W', '1M'].includes(props.period) ? toDateDayMonth(dateList[value]) : toDateMonthYear(dateList[value])}\r\n                contentInset={{\r\n                    left: apx(46),\r\n                    right: apx(100),\r\n                }}\r\n                svg={{\r\n                    fontSize: apx(18),\r\n                    fill: '#617485',\r\n                    y: apx(20),\r\n                    rotation: 30,\r\n                    textAnchor:'start'\r\n                    // originY: 30,\r\n                }}\r\n            />\r\n        </View>\r\n    );\r\n}","import { Button, ButtonGroup as UI_ButtonGroup, ButtonGroupProps, ButtonProps, Text } from \"@ui-kitten/components\"\r\nimport React, { useState } from \"react\"\r\nimport { sizes } from \"../style\"\r\n\r\nexport const ButtonGroup = <T extends string>(props: {\r\n    value: T | undefined,\r\n    onValueChange: (value: T) => void\r\n    items: { label: string, value: T }[],\r\n    unselectedStyle?: ButtonProps[\"style\"],\r\n    style?: ButtonGroupProps[\"style\"]\r\n}) => {\r\n    return <UI_ButtonGroup style={[{ width: \"100%\", marginBottom: sizes.rem1 }, props.style]}>\r\n        {\r\n            props.items.map((v, idx, arr) => {\r\n                const isSelected = props.value === v.value;\r\n                const opacity = isSelected ? 1 : 0.5;\r\n                //console.log(`Button at idx ${idx} isSelected: ${isSelected} with opacity of ${opacity}`);\r\n\r\n                return <Button key={'button_' + idx + \"_\" + isSelected}\r\n                    style={[\r\n                        {\r\n                            backgroundColor: isSelected ? \"green\" : \"#777\",\r\n                            width: 100 / arr.length + \"%\",\r\n                            minWidth: 100 / arr.length + \"%\",\r\n                            opacity\r\n                        }, isSelected ? props.unselectedStyle : undefined]\r\n                    }\r\n                    onPress={() => props.onValueChange(v.value)}>\r\n                        {evaProps => \r\n                            <Text {...evaProps} style={{ color: 'white', fontSize: 14 }}>\r\n                                {v.label}\r\n                            </Text>}\r\n                    </Button>\r\n            })\r\n        }\r\n    </UI_ButtonGroup>\r\n\r\n}\r\n\r\n\r\n","import React, { PropsWithChildren, useEffect, useRef, useState, Component } from \"react\"\r\nimport { NavigationProp, useNavigation } from \"@react-navigation/native\"\r\nimport { Avatar, Icon } from \"@ui-kitten/components\"\r\nimport { View, Text, Pressable, ScrollView, useWindowDimensions, Animated, FlatList, NativeSyntheticEvent, NativeScrollEvent } from \"react-native\"\r\nimport { ElevatedSection, Section, Subsection } from \"./Section\"\r\nimport { NoteEditor, SecPressable } from \"../screens/WatchlistViewerScreen\"\r\nimport { fonts, sizes } from \"../style\"\r\nimport { AppColors } from \"../constants/Colors\"\r\nimport { toDollars, toDollarsAndCents, toNumber1, toPercent1 } from \"../utils/misc\"\r\n\r\nexport const HoldingRenderItem = (props: {item: any, byId: any, isOwner: boolean}) => {\r\n    const { item, byId } = props\r\n    const secId = item.item.security_id;\r\n    //const intradayChange = item.item.price ? item.item.price.price - item.item.price.open : 0\r\n    //const hideEmptyNote = watchlist?.user[0].id !== appUser?.id\r\n    return (\r\n        <ElevatedSection title=\"\" style={{flex: 1, marginBottom: sizes.rem1_5 / 2, marginHorizontal: sizes.rem1_5 / 4, paddingHorizontal: sizes.rem0_5, paddingVertical: sizes.rem0_5}}>\r\n        <View style={{flexDirection: 'row', justifyContent: 'center'}}>\r\n            <SecPressable securityId={byId[secId] ? (byId[secId].symbol === 'USD:CUR' ? -1 : secId) : -1}>                                        \r\n                <Avatar\r\n                    style={{borderWidth: 1, borderColor: '#ccc'}}\r\n                    resizeMode={'contain'}\r\n                    size=\"large\"\r\n                    shape=\"rounded\"\r\n                    source={\r\n                        (() => {\r\n                            let output: { uri: string } | undefined;\r\n                            output = byId[secId] ? { uri: byId[secId].logo_url  } : undefined\r\n                            return output;\r\n                        })()}\r\n                    />\r\n            </SecPressable>\r\n            <View style={{flex: 1, alignItems: 'center'}}>\r\n                <Text style={{flex: 1, fontWeight: '900', color: '#454545'}}>\r\n                            {byId[secId] ? (byId[secId].symbol === 'USD:CUR' ? 'Cash' : byId[secId].symbol) : ''}\r\n                </Text>\r\n                <Text style={[item.item.optionInfo ? {display: 'flex'} : {display: 'none'}, {fontSize: fonts.xSmall}]}>\r\n                        {item.item.optionInfo && `${String(item.item.optionInfo[0].type).toLowerCase() === 'call' ? 'C' : 'P'}${toNumber1(item.item.optionInfo[0].strike_price)} ${new Date(item.item.optionInfo[0].expiration).toLocaleDateString()}`}\r\n                    </Text>\r\n                <Text style={[{flex: 1, color: '#606060'}, byId[secId] ? (byId[secId].symbol === 'USD:CUR' ? {display: 'none'} : {display: 'flex'}) : {display: 'none'}]}>\r\n                    {toDollarsAndCents(item.item.price)}\r\n                </Text>\r\n            </View>\r\n\r\n        </View>\r\n        <View style={{flex: 1, alignContent: 'space-between', marginTop: sizes.rem0_5, flexDirection: 'row'}}>\r\n            <View style={{flex: 1, alignItems: 'center', flexDirection: 'row'}}>\r\n                <View style={{flex: 1, alignItems: 'center'}}>\r\n                    <Text style={{fontSize: fonts.medium / 2, color: '#9D9D9D'}}>\r\n                        {props.isOwner ? 'Market Value' : '% Portfolio'}\r\n                    </Text>\r\n                    <Text style={{fontSize: fonts.small, color: '#606060'}}>\r\n                        {props.isOwner ? `${toDollars(item.item.value)}` : `${toPercent1(item.item.value)}`}\r\n                    </Text>\r\n                </View>\r\n                <View style={[{flex: 1, alignItems: 'center'}, byId[secId] ? (byId[secId].symbol === 'USD:CUR' ? {display: 'none'} : {display: 'flex'}) : {display: 'none'}]}>\r\n                    <Text style={{fontSize: fonts.medium / 2, color: '#9D9D9D'}}>\r\n                        {'Cost'}\r\n                    </Text>\r\n                    <Text style={{fontSize: fonts.small, color: '#606060'}}>\r\n                        {`${toDollarsAndCents(item.item.cost_basis)}`}\r\n                    </Text>                                                    \r\n                </View>\r\n            </View>\r\n        </View>\r\n        <View style={[{flex: 1, flexDirection: 'row'}, props.isOwner ? {display: 'flex'} : {display: 'none'}]}>\r\n            <View style={[{flex: 1, alignItems: 'center'}, byId[secId] ? (byId[secId].symbol === 'USD:CUR' ? {display: 'none'} : {display: 'flex'}) : {display: 'none'}]}>\r\n                <Text style={{fontSize: fonts.medium / 2, color: '#9D9D9D'}}>\r\n                    {'Profit/Loss'}\r\n                </Text>\r\n                <Text style={[{fontSize: fonts.small}, \r\n                               item.item.pnl >= 0 ? (item.item.pnl === 0 ? {color: 'black'} : {color: 'green'}) : {color: 'red'}]}>\r\n                    {`${toDollars(item.item.pnl)}`}\r\n                </Text>\r\n            </View>\r\n\r\n        </View>\r\n    </ElevatedSection>\r\n    )\r\n}","import React, { PropsWithChildren, useEffect, useRef, useState, Component } from \"react\"\r\nimport { NavigationProp, useNavigation } from \"@react-navigation/native\"\r\nimport { Avatar, Icon } from \"@ui-kitten/components\"\r\nimport { View, Text, Pressable, ScrollView, useWindowDimensions, Animated, FlatList, NativeSyntheticEvent, NativeScrollEvent } from \"react-native\"\r\nimport { ElevatedSection, Section, Subsection } from \"./Section\"\r\nimport { NoteEditor, SecPressable } from \"../screens/WatchlistViewerScreen\"\r\nimport { fonts, sizes } from \"../style\"\r\nimport { AppColors } from \"../constants/Colors\"\r\nimport { toDollars, toDollarsAndCents, toFormatedDateTime, toNumber1 } from \"../utils/misc\"\r\n\r\nexport const TradeRenderItem = (props: {item: any, byId: any, isOwner: boolean}) => {\r\n    const { item, byId } = props\r\n    const secId = item.item.security_id || item.item.securityId;\r\n    //const intradayChange = item.item.price ? item.item.price.price - item.item.price.open : 0\r\n    //const hideEmptyNote = watchlist?.user[0].id !== appUser?.id\r\n    return (\r\n        <ElevatedSection title=\"\" style={{flex: 1, marginBottom: sizes.rem1_5 / 2, marginHorizontal: sizes.rem1_5 / 4, paddingHorizontal: sizes.rem0_5, paddingVertical: sizes.rem0_5}}>\r\n            <View style={{flexDirection: 'row', justifyContent: 'center'}}>\r\n                <SecPressable securityId={secId}>                                        \r\n                    <Avatar\r\n                        style={{borderWidth: 1, borderColor: '#ccc'}}\r\n                        resizeMode={'contain'}\r\n                        size=\"large\"\r\n                        shape=\"rounded\"\r\n                        source={\r\n                            (() => {\r\n                                let output: { uri: string } | undefined;\r\n                                output = byId[secId] ? { uri: byId[secId].logo_url  } : undefined\r\n                                return output;\r\n                            })()}\r\n                        />\r\n                </SecPressable>\r\n                <View style={{flex: 1, alignItems: 'center'}}>\r\n                    <Text style={{flex: 1, fontWeight: '900', color: '#454545'}}>\r\n                                {byId[secId] ? (byId[secId].symbol === 'USD:CUR' ? 'Cash' : `${item.item.type.slice(0,1).toUpperCase() + item.item.type.slice(1) } ${byId[secId].symbol}`) : ''}\r\n                    </Text>\r\n                    <Text style={[item.item.optionInfo ? {display: 'flex'} : {display: 'none'}, {fontSize: fonts.xSmall}]}>\r\n                        {item.item.optionInfo && `${String(item.item.optionInfo[0].type).toLowerCase() === 'call' ? 'C' : 'P'}${toNumber1(item.item.optionInfo[0].strike_price)} ${new Date(item.item.optionInfo[0].expiration).toLocaleDateString()}`}\r\n                    </Text>\r\n                    <Text style={{flex: 1, color: '#606060'}}>\r\n                        {`@ ${toDollarsAndCents(item.item.price)}`}\r\n                    </Text>\r\n                </View>\r\n            </View>\r\n            <View style={{flex: 1, alignContent: 'space-between', marginTop: sizes.rem0_5, flexDirection: 'row'}}>\r\n                <View style={[{flex: 1, alignItems: 'center', flexDirection: 'row'}, props.isOwner ? {display: 'flex'} : {display: 'none'}]}>\r\n                    <View style={{flex: 1, alignItems: 'center'}}>\r\n                        <Text style={{fontSize: fonts.medium / 2, color: '#9D9D9D'}}>\r\n                            {'Quantity'}\r\n                        </Text>\r\n                        <Text style={{fontSize: fonts.small, color: '#606060'}}>\r\n                            {`${item.item.quantity}`}\r\n                        </Text>\r\n                    </View>\r\n                    <View style={{flex: 1, alignItems: 'center'}}>\r\n                        <Text style={{fontSize: fonts.medium / 2, color: '#9D9D9D'}}>\r\n                            {'Market Value'}\r\n                        </Text>\r\n                        <Text style={{fontSize: fonts.small, color: '#606060'}}>\r\n                            {`${toDollars(item.item.amount)}`}\r\n                        </Text>                                                    \r\n                    </View>\r\n                </View>\r\n            </View>\r\n            <View style={{flex: 1, flexDirection: 'row'}}>\r\n            <View style={{flex: 1, alignItems: 'center'}}>\r\n                <Text style={{fontSize: fonts.medium / 2, color: '#9D9D9D'}}>\r\n                    {'Trade Date'}\r\n                </Text>\r\n                <Text style={[{fontSize: fonts.xSmall}]}>\r\n                    {`${(new Date(item.item.date)).getUTCHours() !== 12 ? toFormatedDateTime(String(item.item.date)) : (new Date(item.item.date)).toLocaleDateString()}`}\r\n                </Text>\r\n            </View>\r\n        </View>\r\n        </ElevatedSection>\r\n    )\r\n}","import React, {ReactElement, ReactNode, useEffect, useRef, useState} from \"react\";\r\nimport {Api} from '@tradingpost/common/api'\r\nimport {Tab, TabBar, TabView, Text} from \"@ui-kitten/components\";\r\n//import { ensureCurrentUser } from \"../apis/Authentication\";\r\nimport {ProfileBanner, profileImageSize, profileImageSmall, useProfileBannerSize} from \"../components/ProfileBanner\";\r\n//import { IAmiraUser } from \"../interfaces/IUser\";\r\n//import { DashboardScreen, DashProps, fullDashOptions, IDashboard } from \"../layouts/DashboardLayout\";\r\n//import { } from 'react-native-linear-gradient'\r\nimport {flex, fonts, paddView, row, sizes} from \"../style\";\r\nimport {\r\n    Animated,\r\n    View,\r\n    ScrollView,\r\n    NativeScrollEvent,\r\n    NativeSyntheticEvent,\r\n    useWindowDimensions,\r\n    Alert,\r\n    FlatList,\r\n    ViewStyle\r\n} from \"react-native\";\r\nimport {AwaitedReturn, DEV_ONLY, toPercent2, toDollarsAndCents, toThousands} from \"../utils/misc\";\r\nimport {SecondaryButton} from \"../components/SecondaryButton\";\r\nimport {ElevatedSection, Section, Subsection} from \"../components/Section\";\r\n//import { PostList, usePostLoader } from \"../components/PostList\";\r\n//import { getCompetitionsPast } from \"../apis/CompetitionApi\";\r\nimport {stringyDate, Table} from \"../components/Table\";\r\n//import { ChipPicker } from \"../components/ChipBar\";\r\nimport {PieHolder} from \"../components/PieHolder\";\r\nimport {WatchlistSection} from \"../components/WatchlistSection\";\r\n//import { TabScreenProps } from \"../navigation\";\r\nimport {IUserGet} from \"@tradingpost/common/api/entities/interfaces\";\r\nimport {useToast} from \"react-native-toast-notifications\";\r\nimport {FeedPart} from \"./FeedScreen\";\r\nimport {AppColors} from \"../constants/Colors\";\r\nimport {useMakeSecurityFields} from \"./WatchlistViewerScreen\";\r\nimport {PrimaryChip} from \"../components/PrimaryChip\";\r\nimport {useAppUser} from \"../Authentication\";\r\nimport InteractiveChart from \"../components/InteractiveGraph\";\r\nimport {ButtonGroup} from \"../components/ButtonGroup\";\r\nimport {RootStackScreenProps} from \"../navigation/pages\";\r\nimport { List } from \"../components/List\";\r\nimport { HoldingRenderItem } from \"../components/HoldingRenderItem\";\r\nimport { useSecuritiesList } from \"../SecurityList\";\r\nimport { TradeRenderItem } from \"../components/TradeRenderItem\";\r\n//import { screens } from \"../navigationComponents\";\r\n//import { getUser } from \"../apis/UserApi\";\r\n\r\n//May need to be changed for ios\r\nconst TabPanelSize = 48;\r\nconst StatusBarsize = 20;\r\nconst ButtonMargin = 8;\r\nconst ButtonBarsize = 43;\r\nconst titles = 27 + 17;\r\nconst tabBarMargin = sizes.rem1;\r\nconst clampBuffer = 4;\r\n\r\nconst collapseShift = 2 * ButtonMargin;\r\n\r\nconst periods: { [key: string]: number } = {\r\n    \"1D\": 1,\r\n    \"1W\": 5,\r\n    \"1M\": 20,\r\n    \"3M\": 60,\r\n    \"1Y\": 252,\r\n    \"2Y\": 504,\r\n    \"Max\": 1000\r\n}\r\n\r\nexport function ProfileScreen(props: RootStackScreenProps<'Profile'>) {\r\n    const userId = props.route?.params?.userId;\r\n\r\n    const [user, setUser] = useState<IUserGet>(),\r\n        [watchlists, setWatchlists] = useState<AwaitedReturn<typeof Api.User.extensions.getWatchlists>>(),\r\n        [summary, setSummary] = useState<AwaitedReturn<typeof Api.User.extensions.getPortfolio>>(),\r\n        [holdings, setHoldings] = useState<AwaitedReturn<typeof Api.User.extensions.getHoldings>>(),\r\n        [returns, setReturns] = useState<AwaitedReturn<typeof Api.User.extensions.getReturns>>(),\r\n        [twReturns, settwReturns] = useState<{ x: string, y: number }[]>(),\r\n        [portPeriod, setPortPeriod] = useState(\"1Y\"),\r\n        translateHeaderY = useRef(new Animated.Value(0)).current;\r\n\r\n    const dim = useWindowDimensions();\r\n    const scrollRef = useRef<FlatList>(null);\r\n    const bannerHeight = useProfileBannerSize(),\r\n        headerHeight = bannerHeight + TabPanelSize + ButtonBarsize + ButtonMargin * 2 + titles + tabBarMargin;\r\n\r\n    const clampMax = bannerHeight - profileImageSmall;\r\n    const minViewHeightCollapsed = dim.height - clampMax - StatusBarsize - headerHeight + bannerHeight + 2 * titles;\r\n    const minViewHeight = dim.height - headerHeight;\r\n    const [collapsed, setCollapsed] = useState(false);\r\n    const [isMaxed, setIsMaxed] = useState(false);\r\n    const translation = translateHeaderY.interpolate({\r\n        inputRange: [0, clampMax],\r\n        outputRange: [0, -clampMax],\r\n        extrapolate: 'clamp',\r\n    });\r\n    const manager = useRef<boolean[]>([]).current;\r\n    const {loginState} = useAppUser(),\r\n        appUser = loginState?.appUser\r\n\r\n\r\n    useEffect(() => {\r\n        translation.addListener((v: { value: number }) => {\r\n            const c = Math.abs(v.value + clampMax) < profileImageSize - profileImageSmall + 8;\r\n            const isMaxed = -v.value === clampMax;\r\n            setCollapsed(c);\r\n            setIsMaxed(isMaxed);\r\n        });\r\n        return () => translation.removeAllListeners();\r\n    }, [translation, clampMax]);\r\n\r\n    const [tab, setTab] = useState(0);\r\n    //const dashRef = useRef<any>()\r\n    const toast = useToast();\r\n\r\n    useEffect(() => {\r\n\r\n        if (userId && !user) {\r\n            (async () => {\r\n                try {\r\n                    const [user, holdingsP, watchlists] = await Promise.all([\r\n                        Api.User.get(userId),\r\n                        Api.User.extensions.getHoldings({userId: userId as string}),\r\n                        Api.User.extensions.getWatchlists({userId: userId as string})\r\n                    ]);\r\n                    setWatchlists(watchlists);\r\n                    setHoldings(holdingsP);\r\n                    setUser(user);\r\n                    let today = new Date();\r\n                    const summary = await Api.User.extensions.getPortfolio({userId: userId as string});\r\n                    setSummary(summary);\r\n                    const returns = await Api.User.extensions.getReturns({\r\n                        userId: userId as string,\r\n                        startDate: new Date(today.setDate(today.getDate() - 1001)),\r\n                        endDate: new Date()\r\n                    })\r\n                    setReturns(returns);\r\n                    if (returns.length) {\r\n                        let twr: { x: string, y: number }[] = [];\r\n                        const day = new Date(String(returns.slice(returns.length - periods[portPeriod])[0].date))\r\n                        twr.push({x: (new Date(day.setDate(day.getDate() - 1))).toUTCString(), y: 1})\r\n\r\n                        returns.slice(returns.length - periods[portPeriod]).forEach((r, i) => {\r\n                            twr.push({x: new Date(String(r.date)).toUTCString(), y: twr[i].y * (1 + r.return)})\r\n                        })\r\n                        settwReturns(twr);\r\n                    }\r\n                } catch (ex: any) {\r\n                    toast.show(ex.message);\r\n                }\r\n            })()\r\n        }\r\n    }, [userId, user])\r\n\r\n    useEffect(() => {\r\n        if (returns?.length) {\r\n            let twr: { x: string, y: number }[] = [];\r\n            const day = new Date(String(returns.slice(returns.length - periods[portPeriod])[0].date))\r\n            twr.push({x: (new Date(day.setDate(day.getDate() - 1))).toUTCString(), y: 1})\r\n\r\n            returns?.slice(returns.length - periods[portPeriod]).forEach((r, i) => {\r\n                twr.push({x: new Date(String(r.date)).toUTCString(), y: twr[i].y * (1 + r.return)})\r\n            })\r\n            settwReturns(twr);\r\n        }\r\n    }, [portPeriod])\r\n    const { securities: { bySymbol, byId } } = useSecuritiesList();\r\n    const displayHoldings = appUser?.id === user?.id || (user?.settings?.portfolio_display.holdings && user.subscription.is_subscribed)\r\n    const displayTrades = appUser?.id === user?.id || (user?.settings?.portfolio_display.trades && user.subscription.is_subscribed)\r\n    const displayPerformance = appUser?.id === user?.id || (user?.settings?.portfolio_display.performance && user.subscription.is_subscribed)\r\n    return <View style={[flex]}>\r\n        <Animated.FlatList\r\n            data={[\r\n                <ProfilePage key={'top_level_user_feed'} style={{paddingHorizontal: 0}} index={0}\r\n                             minViewHeight={minViewHeight} manager={manager} currentIndex={tab}>\r\n                    <FeedPart\r\n                        key={'user_feed'}\r\n                        userId={userId}\r\n                    />\r\n                </ProfilePage>,\r\n                <ProfilePage key={'top_level_performance_holdings'} index={1} minViewHeight={minViewHeight}\r\n                             manager={manager} currentIndex={tab}>\r\n                    <ElevatedSection title=\"Performance\">\r\n                        <View style={(appUser?.id === user?.id && !twReturns) ? {display: 'none'} : {display: 'flex'}}>\r\n                            <View style={displayPerformance ? {display: 'none'} : {\r\n                                justifyContent: \"center\",\r\n                                alignItems: 'center'\r\n                            }}>\r\n                                <Text style={{fontSize: fonts.medium, fontWeight: '500', color: '#ccc'}}>\r\n                                    {`@${user?.handle} does not display their investment performance.`}\r\n                                </Text>\r\n                            </View>\r\n                            <View style={displayPerformance ? {\r\n                                display: 'flex',\r\n                                marginBottom: sizes.rem1\r\n                            } : {display: 'none'}}>\r\n                                <View style={{marginBottom: sizes.rem1}}>\r\n                                    <InteractiveChart data={twReturns} period={portPeriod} performance={true}/>\r\n                                </View>\r\n                                <ButtonGroup key={\"period\"}\r\n                                             items={[\"1D\", \"1W\", \"1M\", \"3M\", \"1Y\", \"2Y\", \"Max\"].map(v => ({\r\n                                                 label: v,\r\n                                                 value: v\r\n                                             }))} onValueChange={(v) => setPortPeriod(v)} value={portPeriod}/>\r\n                            </View>\r\n                        </View>\r\n                        <Text\r\n                            style={[!(appUser?.id === user?.id && !twReturns) ? {display: 'none'} : {display: 'flex'}, {\r\n                                fontSize: fonts.medium,\r\n                                fontWeight: '500',\r\n                                color: '#ccc'\r\n                            }]}>\r\n                            {\"You haven't linked a brokerage to TradingPost. Go to your Account page in the Side Menu and Link one today!\"}\r\n                        </Text>\r\n                    </ElevatedSection>\r\n                    <Section title=\"Holdings\" style={{backgroundColor: AppColors.background}}>\r\n                        <View style={(appUser?.id === user?.id && !twReturns) ? {display: 'none'} : {display: 'flex'}}>\r\n                            <View style={displayHoldings ? {display: 'none'} : {\r\n                                justifyContent: \"center\",\r\n                                alignItems: 'center'\r\n                            }}>\r\n                                <Text style={{fontSize: fonts.medium, fontWeight: '500', color: '#ccc'}}>\r\n                                    {`@${user?.handle} does not display their investment holdings.`}\r\n                                </Text>\r\n                            </View>\r\n                            <View style={displayHoldings ? {\r\n                                display: 'flex',\r\n                                marginBottom: sizes.rem1\r\n                            } : {display: 'none'}}>\r\n                                <List\r\n                                    listKey=\"holdingsList\"\r\n                                    datasetKey={`holdings_id_${holdings?.length}`}\r\n                                    data={holdings}\r\n                                    loadingMessage={\" \"}\r\n                                    noDataMessage={\" \"}\r\n                                    loadingItem={undefined}\r\n                                    numColumns={2}\r\n                                    renderItem={(item) => {\r\n                                        return (\r\n                                            <HoldingRenderItem \r\n                                                item={item}\r\n                                                byId={byId}\r\n                                                isOwner={appUser?.id === user?.id}\r\n                                                />\r\n                                        )\r\n                                    }}\r\n                                />\r\n                            </View>\r\n                        </View>\r\n                        <Text\r\n                            style={[!(appUser?.id === user?.id && !twReturns) ? {display: 'none'} : {display: 'flex'}, {\r\n                                fontSize: fonts.medium,\r\n                                fontWeight: '500',\r\n                                color: '#ccc'\r\n                            }]}>\r\n                            {\"You haven't linked a brokerage to TradingPost. Go to your Account page in the Side Menu and Link one today!\"}\r\n                        </Text>\r\n                    </Section>\r\n                    <WatchlistSection title=\"Watchlists\" watchlists={watchlists}/>\r\n                </ProfilePage>,\r\n                <ProfilePage key={'top_level_trades'} index={2} minViewHeight={minViewHeight} manager={manager}\r\n                             currentIndex={tab}>\r\n                    <View style={displayTrades ? {display: 'none'} : {\r\n                        display: 'flex',\r\n                        height: '100%',\r\n                        justifyContent: \"center\",\r\n                        alignItems: 'center'\r\n                    }}>\r\n                        <Text style={{fontSize: fonts.medium, fontWeight: '500', color: '#ccc'}}>\r\n                            {`@${user?.handle} does not display their trades.`}\r\n                        </Text>\r\n                    </View>\r\n                    <Section title=\"\" style={[displayTrades ? {display: 'flex'} : {display: 'none'}, {backgroundColor: AppColors.background}]}>\r\n                        <List\r\n                            listKey={'trades_table'}\r\n                            loadingMessage={\" \"}\r\n                            noDataMessage={\" \"}\r\n                            loadingItem={undefined}\r\n                            numColumns={2}\r\n                            keyExtractor={(item, idx) => {\r\n                                return item ? \"trade_\" + idx : \"empty\";\r\n                            }}\r\n                            data={(async (a, $page) => {\r\n                                const newArr = a || [];\r\n                                newArr.push(...(await Api.User.extensions.getTrades({\r\n                                    $page,\r\n                                    $limit: 10,\r\n                                    settings: {userId: userId as string}\r\n                                })));\r\n                                //console.log(JSON.stringify(newArr))\r\n                                return newArr;\r\n                            })}\r\n                            renderItem={(item)=> {\r\n\r\n                                return (<TradeRenderItem \r\n                                    item={item}\r\n                                    byId={byId}\r\n                                    isOwner={appUser?.id === user?.id }\r\n                                />)\r\n                            }}\r\n                        />\r\n                    </Section>\r\n                </ProfilePage>,\r\n                <ProfilePage key={'top_level_about'} index={3} minViewHeight={minViewHeight} manager={manager}\r\n                             currentIndex={tab}>\r\n                    <ElevatedSection title=\"General\">\r\n                        <Subsection title=\"Biography\" alt={true}>\r\n                            <Text>{user?.bio}</Text>\r\n                        </Subsection>\r\n                        <View style={row}>\r\n                            <Subsection title=\"Strategy\" alt={true} style={flex}>\r\n                                <Text>{user?.analyst_profile?.investment_strategy}</Text>\r\n                            </Subsection>\r\n                            <Subsection title=\"Benchmark\" alt={true} style={flex}>\r\n                                <Text>{user?.analyst_profile?.benchmark}</Text>\r\n                            </Subsection>\r\n                        </View>\r\n                        <Subsection title=\"Interest &amp; Specialities\" alt={true} style={flex}>\r\n                            <View style={{flexDirection: \"row\"}}>\r\n                                {(user?.analyst_profile?.interests || [\"No\", \"Tags\", \"Here\"]).map((chip, i) =>\r\n                                    <PrimaryChip isAlt key={i} label={chip} style={{flex: 1}}/>)}\r\n                            </View>\r\n                        </Subsection>\r\n                    </ElevatedSection>\r\n                    <ElevatedSection title=\"Social Analytics\">\r\n                        <Text>\r\n                            Coming soon!\r\n                        </Text>\r\n                    </ElevatedSection>\r\n                </ProfilePage>\r\n            ]}\r\n            renderItem={(info) => {\r\n                return info.item;\r\n            }}\r\n            ref={scrollRef} contentContainerStyle={[{paddingTop: headerHeight}]} nestedScrollEnabled\r\n            onMomentumScrollEnd={(ev) => {\r\n                if (collapsed && !isMaxed) {\r\n                    scrollRef.current?.scrollToOffset({offset: clampMax, animated: true});\r\n                    setIsMaxed(true);\r\n                }\r\n            }}\r\n            onScroll={Animated.event<NativeSyntheticEvent<NativeScrollEvent>>([\r\n                {nativeEvent: {contentOffset: {y: translateHeaderY}}}\r\n            ], {useNativeDriver: true})}>\r\n        </Animated.FlatList>\r\n        <Animated.View style={{\r\n            position: \"absolute\",\r\n            top: 0,\r\n            backgroundColor: AppColors.background,\r\n            transform: [{translateY: translation}],\r\n            alignItems: \"stretch\",\r\n            width: \"100%\"\r\n        }}>\r\n            <ProfileBanner\r\n                subscriberCount={user?.subscription?.count}\r\n                navigator={props.navigation}\r\n                profilePic={user?.profile_url}\r\n                collapse={collapsed}\r\n                bannerPic={\"\"}\r\n                extraMarginTop={collapseShift}\r\n                platforms={user?.claims ? user?.claims.map(c => c.platform) : []}\r\n\r\n            />\r\n            <View style={[collapsed ? row : undefined, {width: \"100%\", alignItems: \"center\"}]}>\r\n                <View style={{marginHorizontal: collapsed ? sizes.rem1 : 0}}>\r\n                    <Text style={{\r\n                        color: \"black\",\r\n                        textAlign: !collapsed ? \"center\" : \"left\",\r\n                        fontSize: fonts.small\r\n                    }}>@{user?.handle || \"\"}</Text>\r\n                    <Text style={{\r\n                        color: \"black\",\r\n                        textAlign: !collapsed ? \"center\" : \"left\",\r\n                        fontSize: fonts.medium\r\n                    }}>{user?.display_name}</Text>\r\n                </View>\r\n                {appUser && user && <SecondaryButton\r\n                    {...(() => {\r\n                        let children: string;\r\n                        let onPress: () => void;\r\n                        let style;\r\n                        if (appUser && user && user?.id !== appUser?.id) {\r\n                            if (!user.subscription?.is_subscribed && !user.subscription?.is_pending) {\r\n                                children = `Subscribe ${(user.subscription?.cost as any) !== \"$0.00\" ? `${user.subscription.cost}/mo.` : \"(Free)\"}`\r\n                                onPress = async () => {\r\n                                    await Api.Subscriber.extensions.insertWithNotification({\r\n                                        subscription_id: user.subscription.id,\r\n                                        //TODO: this should be moved to the server side \r\n                                        start_date: new Date(),\r\n                                        user_id: user.id,\r\n                                        approved: !user.subscription.settings.approve_new\r\n                                    });\r\n                                    setUser(undefined);\r\n                                }\r\n                                style = {backgroundColor: \"#35A265\", borderColor: \"#35A265\"}\r\n                            } else {\r\n                                children = user.subscription.is_pending ? 'Pending' : 'Subscribed',\r\n                                    onPress = async () => {\r\n                                        await Api.Subscriber.extensions.removeSubscription({\r\n                                            subscriptionId: user.subscription?.id\r\n                                        });\r\n                                        setUser(undefined);\r\n                                    }\r\n                                style = user.subscription.is_pending ? {\r\n                                    backgroundColor: \"#FFCE31\",\r\n                                    borderColor: \"#FFCE31\"\r\n                                } : {backgroundColor: \"#EC5328\", borderColor: \"#EC5328\"}\r\n                            }\r\n                        } else {\r\n                            if (user?.subscription?.id) {\r\n                                children = 'Manage Subscriptions'\r\n                                onPress = () => props.navigation.navigate(\"Subscription\")\r\n                            } else {\r\n                                children = 'Become An Analyst'\r\n                                onPress = () => props.navigation.navigate(\"SubscriptionSettings\")\r\n                            }\r\n                        }\r\n                        return {\r\n                            children,\r\n                            onPress,\r\n                            style\r\n                        }\r\n                    })()}\r\n                />}\r\n            </View>\r\n            <ElevatedSection title=\"\" style={{marginHorizontal: sizes.rem1, marginTop: tabBarMargin}}>\r\n                <TabBar\r\n                    indicatorStyle={{\r\n                        marginTop: 26,\r\n                        marginHorizontal: 0\r\n                    }}\r\n                    style={{width: \"100%\", marginHorizontal: 0}}\r\n                    key={\"tabbar\"}\r\n                    selectedIndex={tab}\r\n                    onSelect={t => {\r\n                        if (collapsed)\r\n                            scrollRef.current?.scrollToOffset({offset: clampMax, animated: false});\r\n\r\n                        setTab(t);\r\n                    }}>\r\n                    {[\"Posts\", \"Portfolio\", \"Trades\", \"About\"].map(t => <Tab style={{marginTop: -4}} title={t}/>)}\r\n                </TabBar>\r\n            </ElevatedSection>\r\n        </Animated.View>\r\n    </View>\r\n}\r\n\r\nfunction ProfilePage(props: { manager: boolean[], index: number, currentIndex: number, minViewHeight: number, children?: ReactNode, style?: ViewStyle }) {\r\n    props.manager[props.currentIndex] = true;\r\n    return (props.index === props.currentIndex || props.manager[props.index]) ?\r\n        <View style={[paddView, {\r\n            minHeight: props.minViewHeight,\r\n            display: props.currentIndex === props.index ? \"flex\" : \"none\",\r\n\r\n        }, props.style]}>\r\n            {props.children}\r\n        </View> : null\r\n}","import { ButtonProps } from \"@ui-kitten/components\";\r\nimport React from \"react\";\r\nimport { Alert, View } from \"react-native\";\r\nimport Animated from \"react-native-reanimated\";\r\n//import { ButtonProps, View } from \"react-native-ui-lib\";\r\n//import AuthApi from \"../api/entities/apis/AuthApi\";\r\n\r\n//import { screens } from \"../layouts/BaseLayout\";\r\n//import CreateAccountScreen from \"../screens/CreateAccountScreen\";\r\nimport { PrimaryButton } from \"./PrimaryButton\";\r\nimport { SecondaryButton } from \"./SecondaryButton\";\r\n\r\nexport const LoginButtons = (props: { createAccountProps: Partial<ButtonProps>, loginProps: Partial<ButtonProps> }) => {\r\n    return <View style={{ flexDirection: \"row\", justifyContent: \"space-between\" }}>\r\n        <SecondaryButton style={{ alignSelf: \"center\", width: \"48%\" }} \r\n            {...props.createAccountProps}\r\n        //onPress={() => {\r\n        //  screens.push(componentId, \"CreateAccount\")\r\n\r\n        //}}\r\n        //disabled={loggingIn}\r\n        >Create Account</SecondaryButton>\r\n        <PrimaryButton\r\n         \r\n            //disabled={loggingIn}\r\n            // onPress={async () => {\r\n\r\n            //   //  setLoggingIn(true);\r\n            //     // try {\r\n            //     //     const val = userRef.current?.field.current?.validate();\r\n            //     //     const passVal = passRef.current?.field.current?.validate();\r\n            //     //     if (val && passVal) {\r\n            //     //         const user = await AuthApi.login(username, password);// signInWithPassword(username, password);\r\n\r\n            //     //         if (user.verified)\r\n            //     //             Alert.alert(\"VERIFIED\")\r\n            //     //         //SetDashboardLayout();\r\n            //     //         else\r\n            //     //             screens.push(componentId, \"CreateAccount\")\r\n\r\n\r\n\r\n\r\n            //     //         // Navigation.push(props.componentId, {\r\n            //     //         //     component: screens.getComponent(\"App\")\r\n            //     //         // });\r\n            //     //     }\r\n            //     //     else\r\n            //     //         throw new Error(userRef.current?.errorMessage)\r\n            //     // }\r\n            //     // catch (ex: any) {\r\n            //     //     passRef.current?.field.current?.clear();\r\n            //     //     dashboardRef.current?.toastMessage(ex.message);\r\n            //     // }\r\n            //     // finally {\r\n            //     //     setLoggingIn(false);\r\n            //     // }\r\n\r\n            // }}\r\n            style={{ alignSelf: \"center\", width: \"48%\" }}\r\n            {...props.loginProps}\r\n        >Sign In</PrimaryButton>\r\n    </View>\r\n}","import React, { Children, ReactElement, useEffect, useRef } from \"react\";\r\nimport { AppTitle, SplashWelcome } from \"../images\";\r\nimport { bannerText, fonts, paddView, sizes } from '../style'\r\nimport { G, GProps, Path, SvgProps } from \"react-native-svg\";\r\nimport { Link } from \"../components/Link\";\r\nimport { Animated, Platform, View, StyleSheet, Alert, Pressable } from \"react-native\";\r\nimport { LoginButtons } from \"../components/LoginButtons\";\r\nimport { useLinkTo } from \"@react-navigation/native\";\r\nimport { Text, TabView, Tab } from \"@ui-kitten/components\";\r\nimport { useState } from \"react\";\r\nimport { ITextField, TextField } from \"../components/TextField\";\r\nimport { Section } from \"../components/Section\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { useAppUser } from \"../Authentication\";\r\nimport { PrimaryButton } from \"../components/PrimaryButton\";\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { RootStackScreenProps } from \"../navigation/pages\";\r\nimport { useInitialRoute } from '../navigation/RootNavigator';\r\nimport { getCallBackUrl } from \"@tradingpost/common/api/entities/static/EntityApiBase\";\r\n\r\n\r\nexport type WelcomeScreenProps = { title: string }\r\n\r\nconst ensureG = (child: ReactElement): child is ReactElement<GProps> => {\r\n    return child.type === G;\r\n}\r\n\r\n//Test function will move out into helper later \r\nconst SvgMagic: React.FC<{ children: ReactElement<SvgProps> }> = (props) => {\r\n    const reportChildren = (children: ReactElement) => {\r\n        Children.forEach(children, (child) => {\r\n            if (ensureG(child))\r\n                console.log(\"FOUND G WITH ID:::::::\" + child.props.id);\r\n            else {\r\n                console.log(\"FOUND SOMETHING:::::::\" + (child.type as any).name);\r\n                console.log(\"FOUND SOMETHINGS CHIULDREN:::::::\" + (JSON.stringify(child.props)));\r\n            }\r\n            reportChildren(child.props.children);\r\n        })\r\n    };\r\n\r\n    reportChildren(props.children);\r\n\r\n    return props.children;\r\n}\r\n\r\n\r\nexport default ({ navigation }: RootStackScreenProps<\"Root\">) => {\r\n    const linkTo = useLinkTo();\r\n    const cleanUp = useRef<number>(),\r\n        [selectedIndex, setSelectedIndex] = useState(0);\r\n    const route = useInitialRoute();\r\n\r\n    useEffect(() => {\r\n        return () => clearInterval(cleanUp.current);\r\n    }, [])\r\n\r\n    const\r\n        userRef = useRef<ITextField>(null),\r\n        passRef = useRef<ITextField>(null),\r\n        [username, setUsername] = useState<string>(''),\r\n        [password, setPassword] = useState<string>(''),\r\n        intervalRef = useRef<any>(),\r\n        opacityAnim = useRef(new Animated.Value(0)).current,\r\n        toast = useToast(),\r\n        [isLoggingIn, setIsLoggingIn] = useState(false),\r\n        { signIn } = useAppUser();\r\n\r\n\r\n    useEffect(() => {\r\n        if (route !== \"Root\")\r\n            navigation.replace(route);\r\n    }, [route])\r\n\r\n    return <><View style={[...paddView, { justifyContent: \"center\", backgroundColor: \"white\" }]}>\r\n        <AppTitle style={{ marginVertical: sizes.rem1, alignSelf: \"center\", width: \"100%\", aspectRatio: 5 }} />\r\n\r\n        <TabView\r\n            selectedIndex={selectedIndex}\r\n            onSelect={index => setSelectedIndex(isNaN(index) ? 0 : index)}\r\n            style={{ width: \"100%\" }}\r\n            indicatorStyle={{ height: 0 }}\r\n            tabBarStyle={{ height: 0 }}\r\n        >\r\n            <Tab>\r\n                <WTF_View\r\n                    onReady={(item) => {\r\n                        if (Platform.OS === \"web\" && item instanceof HTMLDivElement) {\r\n                            const stonks = [\"fb\", \"tsla\", \"nvda\", \"btc\", \"ether\", \"doge\"].map((n) => item.querySelector<SVGGElement>(`[id=${n}]`));\r\n                            stonks.forEach((s) => {\r\n                                if (s)\r\n                                    s.style.opacity = \"0\";\r\n                            });\r\n\r\n                            let lastItem: SVGGElement | null = null;\r\n                            let lastItem2: SVGGElement | null = null;\r\n\r\n                            if (intervalRef.current)\r\n                                clearInterval(intervalRef.current);\r\n\r\n                            intervalRef.current = setInterval(() => {\r\n                                const index = Math.floor(Math.random() * (9));\r\n                                const index2 = Math.floor(Math.random() * (9));\r\n\r\n                                if (lastItem)\r\n                                    lastItem.style.opacity = \"0\";\r\n\r\n                                if (lastItem2)\r\n                                    lastItem2.style.opacity = \"0\";\r\n\r\n\r\n                                lastItem = stonks[index];\r\n                                lastItem2 = stonks[index2];\r\n                                if (lastItem)\r\n                                    lastItem.style.opacity = \"1\";\r\n                                if (lastItem2)\r\n                                    lastItem2.style.opacity = \"1\";\r\n                            }, 1000)\r\n                        }\r\n                    }}\r\n                />\r\n            </Tab>\r\n            <Tab>\r\n                <Section title=\"Login\">\r\n                    <TextField placeholder='Email Address' returnKeyType=\"next\"\r\n                        onChangeText={(name) => setUsername(name)}\r\n                        textInputRef={userRef}\r\n                        style={{ marginVertical: sizes.rem1 }}\r\n                    />\r\n                    <TextField\r\n                        onChangeText={(pass) => setPassword(pass)}\r\n                        placeholder='Password'\r\n                        style={{ marginVertical: sizes.rem1 }}\r\n                        secureTextEntry textInputRef={passRef} />\r\n                    <Link style={{ paddingTop: 4, paddingBottom: 16, alignSelf: \"flex-end\" }} onPress={() => {\r\n                        setSelectedIndex(2)\r\n                    }}>Forgot Password?</Link>\r\n                </Section>\r\n            </Tab>\r\n            <Tab>\r\n                <View>\r\n                    <Text>Please enter your email address to recover your password:</Text>\r\n                    <TextField style={{ marginVertical: sizes.rem1 }} value={username} placeholder=\"Email Address\"\r\n                        onChangeText={(t) => {\r\n                            setUsername(t);\r\n                        }} />\r\n                    <PrimaryButton onPress={async () => {\r\n                        if (username && /(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])/.test(username)) {\r\n                            Api.Auth.forgotPassword(username, getCallBackUrl());\r\n                            toast.show(\"Recovery Email has been sent\");\r\n                        } else {\r\n                            toast.show(\"Please enter a valid email address\");\r\n                        }\r\n                    }}>Recover Password</PrimaryButton>\r\n                </View>\r\n            </Tab>\r\n        </TabView>\r\n\r\n        <Animated.Text style={[bannerText, {\r\n            opacity: !selectedIndex ? 1 : opacityAnim\r\n        }]}> {!selectedIndex ? \"Welcome to the team!\" : \"Hey... Welcome Back!\"}</Animated.Text>\r\n        <LoginButtons\r\n            createAccountProps={{ onPress: () => { linkTo(\"/create/logininfo\"); } }}\r\n            loginProps={{\r\n                onPress: async () => {\r\n                    if (selectedIndex !== 1) {\r\n                        setSelectedIndex(1);\r\n                        Animated.timing(\r\n                            opacityAnim,\r\n                            {\r\n                                delay: 0.75,\r\n                                toValue: 1,\r\n                                duration: 2000,\r\n                                useNativeDriver: true\r\n                            }).start();\r\n                    } else {\r\n                        if (!isLoggingIn) {\r\n                            try {\r\n                                setIsLoggingIn(true);\r\n                                await signIn(username, password);\r\n                                toast.hideAll();\r\n                                setIsLoggingIn(false);\r\n\r\n                            } catch (ex: any) {\r\n                                setIsLoggingIn(false);\r\n                                toast.show(ex.message);\r\n                            }\r\n                        }\r\n                        else {\r\n                            toast.show(\"Still working on logging you in....\", {\r\n                                duration: 5000\r\n                            })\r\n                        }\r\n                    }\r\n                }\r\n            }}\r\n        />\r\n\r\n    </View>\r\n        {!selectedIndex && Platform.OS !== \"web\" && <Pressable\r\n            onPress={() => {\r\n                navigation.navigate('AppInformation')\r\n            }}>\r\n            <Text style={{\r\n                textAlign: \"right\",\r\n                position: \"absolute\",\r\n                bottom: sizes.rem1,\r\n                right: sizes.rem1,\r\n                fontSize: fonts.large,\r\n                lineHeight: fonts.large * 1.5\r\n            }}>\r\n                What is TradingPost{\">>\"}\r\n            </Text>\r\n        </Pressable>}\r\n    </>\r\n\r\n}\r\n\r\nconst WTF_View = (props: {\r\n    onReady: (item: any) => void\r\n}) => {\r\n    return <View style={{ width: \"100%\", aspectRatio: 1.5 }}>\r\n        <SplashWelcome\r\n            onReady={props.onReady}\r\n        />\r\n    </View>\r\n}","import React, { ReactChild, useLayoutEffect, useState } from \"react\";\r\nimport { Text } from \"@ui-kitten/components\";\r\nimport { View, Image, Pressable } from \"react-native\";\r\n//import { ensureCurrentUser, signOut, useCurrentUser } from \"../apis/Authentication\";\r\nimport { LogoImage } from \"./LogoImage\";\r\nimport { font, fonts, rounded, sizes } from \"../style\";\r\nimport { Link } from \"./Link\";\r\n//import { SetPublicLayout, screens } from \"../layouts/BaseLayout\";\r\nimport { SvgProps } from \"react-native-svg\";\r\nimport { sideMenu } from \"../images\";\r\n//import { parts, screens } from \"../navigationComponents\";\r\n//import { Navigation } from \"react-native-navigation\";\r\n//import { DashProps, fullDashOptions } from \"../layouts/DashboardLayout\";\r\nimport { TBI } from \"../utils/misc\";\r\n//import Clipboard from '@react-native-clipboard/clipboard'\r\n//import { openProfileScreen } from \"../screens/ProfileScreen\";\r\nimport { useData } from \"../lds\";\r\nimport { SvgExpo } from \"./SvgExpo\";\r\n//import { useEnsureUser } from \"./EnsureUser\";\r\nimport { useRef } from \"react\";\r\n\r\nimport { useAppUser } from '../Authentication';\r\nimport { NavigationProp } from \"@react-navigation/native\";\r\nimport { DrawerContentComponentProps, DrawerContentScrollView, DrawerItem } from \"@react-navigation/drawer\";\r\n\r\nimport { ProfileButton } from \"./ProfileButton\";\r\nimport { useLinkTo } from \"@react-navigation/native\";\r\nimport { versionCode } from \"@tradingpost/common/api/entities/static/EntityApiBase\";\r\n\r\n\r\n\r\nconst padSmall = { marginBottom: sizes.rem1 / 8 };\r\n\r\nexport function SideMenu(props: DrawerContentComponentProps) {\r\n    //const { value: currentUser } = useData(\"currentUser\");\r\n    //const { value: loginResult } = useData(\"loginResult\");\r\n    const [activeTabIndex, setActiveTab] = useState(2);\r\n\r\n    // useLayoutEffect(() => {\r\n    //     const sub1 = Navigation.events().registerBottomTabSelectedListener(({ selectedTabIndex, unselectedTabIndex }) => {\r\n    //         setActiveTab(selectedTabIndex);\r\n    //     })\r\n    //     return () => sub1.remove();\r\n    // }, [])\r\n    //const { setValue: setHasAuthed } = useData(\"hasAuthed\");\r\n    const activeTabId = `BottomTabs_${activeTabIndex}`\r\n    const { signOut, loginState } = useAppUser();\r\n    const linkTo = useLinkTo<any>();\r\n    //Not sure if the issue here but this seems to work for now.\r\n    //const { EnsureUser, appUser, signOut } = useEnsureUser(props.navigation as any as NavigationProp<any>);\r\n    const currentUser = loginState?.appUser;\r\n    if (!currentUser) return;\r\n\r\n    return <DrawerContentScrollView contentContainerStyle={{ flexGrow: 1 }} style={{ flexGrow: 1, backgroundColor: \"white\" }}>\r\n        <View style={{ alignSelf: \"center\", alignItems: \"center\", backgroundColor: \"transparent\" }}>\r\n            <Pressable\r\n                style={{ alignItems: \"center\" }}>\r\n                <View\r\n                    style={[{ marginTop: sizes.rem1 }, padSmall]}\r\n                >\r\n                    <ProfileButton size={80} profileUrl={currentUser?.profile_url || \"\"} userId={currentUser?.id} />\r\n                </View>\r\n                <Text style={[font(\"xSmall\", \"black\", true), padSmall]} >@{currentUser.handle}</Text>\r\n                <Text style={[font(\"medium\", \"black\", true), padSmall]} >{currentUser.display_name}</Text>\r\n            </Pressable>\r\n            <Text style={[font(\"xSmall\", \"darkgray\", true), padSmall]} >Subscribers: {currentUser.subscription?.count}</Text>\r\n            <Link onPress={() => {\r\n\r\n                props.navigation.navigate(\"Subscription\");\r\n\r\n            }} style={{ fontSize: fonts.xSmall, fontWeight: \"bold\" }}\r\n            // onPress={() =>\r\n            //      screens.push(activeTabId, \"ManageSubscriptions\", {\r\n            //     options: fullDashOptions,\r\n            //     passProps: { isFullscreen: true } as DashProps\r\n            // })}\r\n            >Manage Subscriptions</Link>\r\n        </View>\r\n        {([{\r\n            label: \"Profile\",\r\n            onPress: () => props.navigation.navigate(\"Profile\", {\r\n                userId: currentUser.id\r\n            }),\r\n            icon: sideMenu.Profile\r\n        },\r\n        {\r\n            label: \"Watchlists\",\r\n            onPress: () => props.navigation.navigate(\"Watchlist\"),\r\n            //onPress: () => linkTo('/create/watchlist'),\r\n            icon: sideMenu.Watchlist,\r\n        },\r\n        {\r\n            label: \"Bookmarks\",\r\n            onPress: () => props.navigation.navigate(\"Feed\", {\r\n                bookmarkedOnly: \"true\"\r\n            }),\r\n            icon: sideMenu.BookmarkActiveBlue,\r\n        },\r\n        {\r\n            label: \"App Features\",\r\n            onPress: () => props.navigation.navigate(\"AppInformation\"),\r\n\r\n            icon: sideMenu.Information,\r\n        },\r\n        {\r\n            label: \"Settings\",\r\n            //onPress: () => props.navigation.navigate(\"Create\"),\r\n            onPress: () => props.navigation.navigate(\"AccountInformation\"),\r\n            icon: sideMenu.Account,\r\n        },\r\n        {\r\n            label: \"Link Brokerage!\",\r\n            //onPress: () => props.navigation.navigate(\"Create\"),\r\n            onPress: () => props.navigation.navigate(\"BrokeragePicker\"),\r\n            icon: sideMenu.Bank_Link,\r\n        },\r\n        {\r\n            label: \"Logout\",\r\n            onPress: () => {\r\n                signOut();\r\n                //TODO: Investigate why this is needed and linkto doesn't seem to work.\r\n                //props.navigation.getParent()?.replace(\"Root\");\r\n\r\n            },\r\n            icon: sideMenu.LogOut\r\n        }] as { onPress?: () => void, label: string, icon: React.FC<SvgProps> }[]).map((item, index, array) => {\r\n            return <MenuItem\r\n                key={\"SM_\" + index}\r\n                icon={item.icon}\r\n                size={\"10%\"}\r\n                onPress={item.onPress || TBI}\r\n                navigation={props.navigation}\r\n                isLast={index === array.length - 1}\r\n            >{item.label}</MenuItem>\r\n        })}\r\n        <Text style={{ textAlign: \"center\" }}>Api Version: {versionCode}</Text>\r\n    </DrawerContentScrollView>\r\n}\r\n\r\nfunction MenuItem(props: { navigation: DrawerContentComponentProps[\"navigation\"], children: string, icon: React.FC<SvgProps>, onPress?: () => void, isLast?: boolean, size?: string | number }) {\r\n    const { icon: SvgElement } = props\r\n    return <DrawerItem\r\n        style={props.isLast ? { marginTop: \"auto\" } : undefined}\r\n        label={props.children}\r\n        icon={(props) => <SvgExpo height={props.size} width={props.size} style={{ height: props.size, width: props.size }}>\r\n            <SvgElement />\r\n        </SvgExpo>}\r\n        onPress={() => {\r\n            props.onPress?.call(undefined);\r\n            props.navigation.closeDrawer();\r\n        }\r\n        }\r\n        labelStyle={{ marginLeft: -16, }}\r\n\r\n    />\r\n    /* <Text style={{ fontSize: fonts.small, marginLeft: 16 }}>{}</Text> */\r\n}","import React, {useEffect, useState} from \"react\";\r\nimport {Pressable} from \"react-native\";\r\nimport {View} from \"react-native\";\r\nimport {Layout, Text} from '@ui-kitten/components';\r\nimport {List} from \"../components/List\";\r\nimport {flex, fonts, sizes} from \"../style\";\r\nimport {Api} from '@tradingpost/common/api';\r\nimport {ListAlertsResponse} from \"@tradingpost/common/api/entities/interfaces\";\r\nimport {ElevatedSection} from \"../components/Section\";\r\nimport {NavigationProp, useNavigation} from \"@react-navigation/native\";\r\nimport {SecondaryButton} from \"../components/SecondaryButton\";\r\n\r\nlet seen = false;\r\n\r\nexport const NotificationScreen = () => {\r\n    const [notifs, setNotifs] = useState([] as ListAlertsResponse[]);\r\n    useEffect(() => {\r\n        if (seen) {\r\n            const run = async () => {\r\n                const ids = notifs.filter(n => !n.seen).map(n => n.id);\r\n                const res = await Api.Notification.extensions.seenNotifications({notificationIds: ids});\r\n            }\r\n            run();\r\n            return\r\n        }\r\n\r\n        let timer = setTimeout(async () => {\r\n            const ids = notifs.filter(n => !n.seen).map(n => n.id);\r\n            await Api.Notification.extensions.seenNotifications({notificationIds: ids});\r\n        }, 1500)\r\n\r\n        seen = true;\r\n        return () => {\r\n            clearTimeout(timer)\r\n        };\r\n    }, [notifs])\r\n\r\n    return <View style={{flex: 1, backgroundColor: \"#F7f8f8\"}}>\r\n        <View>\r\n            <Layout style={{\r\n                backgroundColor: \"#ffffff\",\r\n                paddingBottom: '2%',\r\n                paddingTop: '2%',\r\n                borderBottomColor: '#11146F',\r\n                borderStyle: 'solid',\r\n                borderBottomWidth: 2,\r\n                marginBottom: 10\r\n            }}>\r\n                <Text style={{\r\n                    margin: 2,\r\n                    textAlign: 'center',\r\n                    fontSize: 20,\r\n                    fontWeight: '600',\r\n                    color: '#11146F',\r\n                }}>Notifications</Text>\r\n            </Layout>\r\n            <List\r\n                key={\"STATIC\"}\r\n                datasetKey={\"__________\"}\r\n                getItemLayout={(items, index, sizeCache) => {\r\n                    const curItem = items?.[index];\r\n                    return typeof curItem === 'object' ? sizeCache[index] : {\r\n                        index,\r\n                        offset: sizeCache[index - 1].offset + sizeCache[index - 1].length,\r\n                        length: 10\r\n                    };\r\n                }}\r\n                data={async (allItems: any, page: number, sizeCache: any[]): Promise<ListAlertsResponse[]> => {\r\n                    const notifications = (await Api.Notification.extensions.listAlerts({\r\n                        page,\r\n                    }));\r\n                    const newNotifications = [...(allItems || []), ...notifications];\r\n                    setNotifs(newNotifications);\r\n                    newNotifications.forEach((item, index) => {\r\n                        if (!sizeCache[index]) {\r\n                            sizeCache[index] = {\r\n                                index,\r\n                                offset: index ? sizeCache[index - 1].offset + sizeCache[index - 1].length : 0,\r\n                                length: 0,\r\n                            }\r\n                        }\r\n                    });\r\n                    return newNotifications;\r\n                }}\r\n                keyExtractor={(item: any, index) => typeof item === 'string' ? \"loadingtext\" : (index + \"_\" + item._id)}\r\n                preloadOffset={1}\r\n                renderItem={(item) => {\r\n                    if (typeof item.item === \"string\") {\r\n                        return <Text style={{textAlign: \"center\", fontSize: fonts.large}}>Loading More...</Text>\r\n                    }\r\n                    switch (item.item.type) {\r\n                        case \"NEW_USER_INTERACTION\":\r\n                            return <UserInteractionNotification response={item.item}/>;\r\n                        case \"NEW_TRADES\":\r\n                            return <NewTradeNotification response={item.item}/>\r\n                        case \"NEW_SUBSCRIPTION\":\r\n                            return <SubscriptionNotification response={item.item}/>\r\n                        default:\r\n                            console.error(`Follow Type: ${item.item.type} not registered`);\r\n                            return <DefaultNotification response={item.item}/>\r\n                    }\r\n                }}\r\n                noDataMessage={\"No Notifications Available\"}\r\n                loadingItem={\" \"}\r\n            />\r\n        </View>\r\n    </View>\r\n}\r\n\r\nconst NotificationTab: React.FC<any> = (props: any) => {\r\n    return <ElevatedSection title={\"\"} style={{marginHorizontal: sizes.rem2 / 2, marginBottom: sizes.rem1}}>\r\n        <View style={{marginBottom: -sizes.rem0_5, paddingVertical: 6}}>\r\n            <View style={{flexDirection: \"row\", width: \"100%\", marginBottom: sizes.rem0_5}}>\r\n                <View style={[flex, {marginLeft: sizes.rem0_5}]}>\r\n                    {props.children}\r\n                </View>\r\n            </View>\r\n        </View>\r\n    </ElevatedSection>\r\n}\r\n\r\nconst NewTradeNotification = (props: { response: ListAlertsResponse }): JSX.Element => {\r\n    const dt = new Date(props.response.dateTime);\r\n    const dtFmt = `${dt.getMonth()}/${dt.getDay()}/${dt.getFullYear() % 100}`\r\n\r\n    const nav = useNavigation<NavigationProp<any>>();\r\n    const openTrades = () => {\r\n        nav.navigate(\"NotificationTrade\")\r\n    }\r\n\r\n    return <NotificationTab>\r\n        <Pressable onPress={openTrades}>\r\n            <View style={{flex: 1, flexWrap: 'wrap'}}>\r\n                <View style={{flexDirection: 'row'}}>\r\n                    <Text style={{marginRight: 10, fontFamily: \"K2D\"}}>\r\n                        {dtFmt}\r\n                    </Text>\r\n                    <Text style={{flex: 1, flexWrap: 'wrap'}}>\r\n                        {props.response.data.message} <Text style={{fontWeight: 'bold'}}>Click to learn more.</Text>\r\n                    </Text>\r\n                </View>\r\n            </View>\r\n        </Pressable>\r\n    </NotificationTab>\r\n}\r\n\r\nconst UserInteractionNotification = (props: { response: ListAlertsResponse }): JSX.Element => {\r\n    const nav = useNavigation<NavigationProp<any>>();\r\n    const openProfile = () => {\r\n        if (props.response.data?.userId) {\r\n            nav.navigate(\"Profile\", {\r\n                userId: props.response.data?.userId\r\n            });\r\n        }\r\n    }\r\n\r\n    const dt = new Date(props.response.dateTime);\r\n    const dtFmt = `${dt.getMonth()}/${dt.getDay()}/${dt.getFullYear() % 100}`\r\n    return <NotificationTab>\r\n        <Pressable\r\n            onPress={openProfile}>\r\n            <View style={{flex: 1}}>\r\n                <View style={{flexDirection: 'row'}}>\r\n                    <Text style={{marginRight: 10}}>\r\n                        {dtFmt}\r\n                    </Text>\r\n                    <Text>\r\n                        <Text\r\n                            style={{fontWeight: \"bold\"}}>@{props.response.data.handle}</Text>{' '}{props.response.data.message}\r\n                    </Text>\r\n                </View>\r\n            </View>\r\n        </Pressable>\r\n    </NotificationTab>\r\n}\r\nconst SubscriptionNotification = (props: { response: ListAlertsResponse }): JSX.Element => {\r\n    const nav = useNavigation<NavigationProp<any>>();\r\n    const openProfile = () => {\r\n        if (props.response.data?.userId) {\r\n            nav.navigate(\"Profile\", {\r\n                userId: props.response.data?.userId\r\n            });\r\n        }\r\n    }\r\n    const [approval, setApproval] = useState(props.response.data.approved)\r\n\r\n    const dt = new Date(props.response.dateTime);\r\n    const dtFmt = `${dt.getMonth() + 1}/${dt.getDate()}/${dt.getFullYear() % 100}`\r\n    return <NotificationTab>\r\n        <Pressable\r\n            onPress={openProfile}>\r\n            <View style={{flex: 1}}>\r\n                <View style={{flexDirection: 'row'}}>\r\n                    <Text style={{marginRight: 10}}>\r\n                        {dtFmt}\r\n                    </Text>\r\n                    <Text style={{flex: 1, flexWrap: 'wrap'}}>\r\n                        <Text\r\n                            style={{fontWeight: \"bold\"}}>@{props.response.data.handle}</Text>{' '}{props.response.data.message}\r\n                    </Text>\r\n                    <SecondaryButton\r\n                        children={'Approve'}\r\n                        style={{\r\n                            display: approval ? 'none' : 'flex',\r\n                            backgroundColor: \"#35A265\", borderColor: \"#35A265\",\r\n                            minHeight: 26,\r\n                            height: 26,\r\n                            minWidth: 70,\r\n                            alignSelf: \"center\",\r\n                            paddingTop: 0,\r\n                            paddingBottom: 0,\r\n                            paddingLeft: 0,\r\n                            paddingRight: 0\r\n                        }}\r\n                        onPress={async () => {\r\n                            try {\r\n                                await Api.Subscriber.update(props.response.data.subscriber_id, {\r\n                                    approved: true,\r\n                                });\r\n                                console.log('past first call')\r\n                                await Api.Notification.extensions.updateNotification({\r\n                                    id: props.response.id,\r\n                                    dateTime: props.response.dateTime,\r\n                                    data: {\r\n                                        ...props.response.data,\r\n                                        approved: true\r\n                                    },\r\n                                    seen: true,\r\n                                    type: props.response.type\r\n                                });\r\n                                setApproval(true)\r\n                            } catch (e) {\r\n                                console.error(e)\r\n                            }\r\n                            \r\n                        }}\r\n                    />\r\n                </View>\r\n            </View>\r\n        </Pressable>\r\n    </NotificationTab>\r\n}\r\n\r\nconst DefaultNotification = (props: { response: ListAlertsResponse }): JSX.Element => {\r\n    return <NotificationTab>\r\n        <Text>\r\n            {props.response.data.message}\r\n        </Text>\r\n    </NotificationTab>\r\n}","import React from \"react\"\r\nimport { List } from \"../components/List\"\r\nimport { View } from 'react-native'\r\nimport { Text } from '@ui-kitten/components'\r\nimport { AllPages, TabScreenProps } from \"../navigation\"\r\nimport { NavigationProp, useNavigation } from \"@react-navigation/native\"\r\nimport { Link } from \"../components/Link\"\r\nimport { flex, paddView, paddViewWhite } from \"../style\"\r\nimport { ElevatedSection, Section } from \"../components/Section\"\r\nimport { Header } from \"../components/Headers\"\r\nimport { AppColors } from \"../constants/Colors\"\r\n\r\n\r\nexport function LimitedBlockList<T>(props: {\r\n    maxPage?: number,\r\n    \r\n    listKey: string,\r\n    title: string,\r\n    listProps: Omit<Parameters<typeof List>[0], \"maxPage\">\r\n}) {\r\n    const nav = useNavigation();\r\n    return <View style={[{}]}>\r\n        <View>\r\n            <List {...props.listProps} listKey={props.listKey} maxPage={props.maxPage} />\r\n        </View>\r\n        <Link\r\n            style={{\r\n                marginLeft: \"auto\"\r\n            }}\r\n            onPress={() => {\r\n                nav.navigate(\"BlockListModal\", {\r\n                    listProps: props.listProps as any,\r\n                    title: props.title\r\n                })\r\n            }}>View All</Link>\r\n    </View>\r\n}\r\n\r\nexport function BlockListModalScreen<T>(props: TabScreenProps<{ title: string, listProps: Parameters<typeof List>[0] }>) {\r\n    return (\r\n        props.route?.params?.listProps ? \r\n        <View style={paddView}>\r\n            <Section title={props.route.params.title} style={{backgroundColor: AppColors.background}}>\r\n                <List {...props.route?.params?.listProps} />\r\n            </Section>\r\n        </View> : \r\n        <Text>Error</Text>\r\n        )\r\n}","import { Api } from \"@tradingpost/common/api\";\r\nimport { AllWatchlists, IWatchlistGet, IWatchlistList } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Animated, ScrollView, TextStyle, View } from \"react-native\";\r\nimport { AddButton, EditButton } from \"../components/AddButton\";\r\nimport { Avatar, Icon, Text } from '@ui-kitten/components'\r\nimport { ElevatedSection, Section, Subsection } from \"../components/Section\";\r\nimport { Table } from \"../components/Table\";\r\nimport { DataOrQuery, List } from '../components/List'\r\n\r\nimport { flex, fonts, paddView, sizes } from \"../style\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { SecPressable, useMakeSecurityFields, useWatchlistItemColumns } from \"./WatchlistViewerScreen\";\r\nimport { AwaitedReturn, toPercent, toPercent2, toThousands, toDollarsAndCents, toDollars, toNumber2, toNumber1, toFormatedDateTime } from \"../utils/misc\";\r\nimport { WatchlistSection } from \"../components/WatchlistSection\";\r\nimport Theme from '../theme-light.json'\r\nimport { LimitedTable } from \"./TableModalScreen\";\r\nimport { ButtonGroup } from \"../components/ButtonGroup\";\r\nimport { LineHolder, PieHolder } from \"../components/PieHolder\";\r\nimport { AppColors } from \"../constants/Colors\";\r\nimport { LineChart } from \"../components/LineChart\";\r\nimport InteractiveChart from \"../components/InteractiveGraph\";\r\nimport { DashTabScreenProps, RootStackScreenProps } from \"../navigation/pages\";\r\nimport { TooltipComponent } from \"../components/ToolTip\";\r\nimport { useSecuritiesList } from \"../SecurityList\";\r\nimport { Header } from \"../components/Headers\";\r\nimport { WatchlistItemRenderItem } from \"../components/WatchlistItemRenderItem\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\nimport { HoldingRenderItem } from \"../components/HoldingRenderItem\";\r\nimport { TradeRenderItem } from \"../components/TradeRenderItem\";\r\nimport { LimitedBlockList } from \"./BlockListModalScreen\";\r\n\r\nconst styles = {\r\n    stateLabel: {\r\n        color: Theme[\"color-info-800\"],\r\n        textAlign: \"center\"\r\n    } as TextStyle,\r\n    stateValue: {\r\n        // color: AppColors.primary,\r\n        textAlign: \"center\",\r\n        marginBottom: sizes.rem0_5\r\n    } as TextStyle,\r\n}\r\ntype TradeReturnType = AwaitedReturn<typeof Api.User.extensions.getTrades>\r\n\r\nconst periods: { [key: string]: number } = {\r\n    \"1D\": 1,\r\n    \"1W\": 5,\r\n    \"1M\": 20,\r\n    \"3M\": 60,\r\n    \"1Y\": 252,\r\n    \"2Y\": 504,\r\n    \"Max\": 1000\r\n}\r\nexport const PortfolioScreen = (props: DashTabScreenProps<\"Portfolio\">) => {\r\n    const nav = useNavigation();\r\n    const [watchlists, setWatchlists] = useState<AllWatchlists>()\r\n    const [quickWatchlist, setQuickWatchlist] = useState<IWatchlistGet>()\r\n    const [shownMap, setShownMap] = useState<Record<string, boolean>>({})\r\n    const toast = useToast();//const [trades, setTrades] = useState<AwaitedReturn<typeof Api.User.extensions.getTrades>>();\r\n    const [holdings, setHoldings] = useState<AwaitedReturn<typeof Api.User.extensions.getHoldings>>();\r\n    const [trades, setTrades] = useState<AwaitedReturn<typeof Api.User.extensions.getTrades>>();\r\n    const [portfolio, setPortfolio] = useState<AwaitedReturn<typeof Api.User.extensions.getPortfolio>>();\r\n    const [returns, setReturns] = useState<AwaitedReturn<typeof Api.User.extensions.getReturns>>();\r\n    const [twReturns, settwReturns] = useState<{ x: string, y: number }[]>();\r\n    const [portPeriod, setPortPeriod] = useState(\"1Y\")\r\n    const [focus, setFocus] = useState(false);\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                const [lists, holdings] = await Promise.all([\r\n                    Api.Watchlist.extensions.getAllWatchlists(),\r\n                    Api.User.extensions.getHoldings({})\r\n                ]);\r\n                \r\n                //KEeping apart for now .. seems to have an error\r\n                try {\r\n                    const portfolio = await Api.User.extensions.getPortfolio({});\r\n                    setPortfolio(portfolio);\r\n                } catch (ex) {\r\n                    console.error(ex);\r\n                }\r\n\r\n                if (lists.quick.id) {\r\n                    setQuickWatchlist(await Api.Watchlist.get(lists.quick.id));\r\n                }\r\n                else {\r\n                    setQuickWatchlist({\r\n                        id: 0,\r\n                        items: [],\r\n                        name: \"\",\r\n                        saved_by_count: 0,\r\n                        type: \"primary\",\r\n                        user: [],\r\n                        is_saved: false\r\n                    })\r\n                }\r\n                setWatchlists(lists);\r\n                setHoldings(holdings);\r\n                setFocus((f) => !f)\r\n            }\r\n            catch (ex: any) {\r\n                toast.show(ex.message);\r\n            }\r\n        })()\r\n    }, [])\r\n\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                let today = new Date();\r\n                const returns = await Api.User.extensions.getReturns({\r\n                    startDate: new Date(today.setDate(today.getDate() - 1001)),\r\n                    endDate: new Date()\r\n                })\r\n                setReturns(returns);\r\n                if (!returns.length)\r\n                    return\r\n                let twr: { x: string, y: number }[] = [];\r\n                const day = new Date(String(returns.slice(returns.length - periods[portPeriod])[0].date))\r\n                twr.push({ x: (new Date(day.setDate(day.getDate() - 1))).toUTCString(), y: 1 })\r\n                //twr.push(JSON.parse(JSON.stringify(returns[returns.length - periods[portPeriod]])));\r\n                //twr[0].return = 1;\r\n                //const day = new Date(String(twr[0].date))\r\n                //twr[0].date = new Date(day.setDate(day.getDate() - 1));\r\n                returns?.slice(returns.length - periods[portPeriod]).forEach((r, i) => {\r\n                    twr.push({ x: new Date(String(r.date)).toUTCString(), y: twr[i].y * (1 + r.return) })\r\n                    //twr.push(JSON.parse(JSON.stringify(r)));\r\n                    //twr[i+1].return = twr[i].return * (1 + r.return);\r\n                })\r\n\r\n                settwReturns(twr);\r\n\r\n            } catch (err) {\r\n                console.error(err)\r\n            }\r\n        })()\r\n    }, [])\r\n    useEffect(() => {\r\n        if (!returns || !returns.length) {\r\n            return\r\n        }\r\n\r\n        let twr: { x: string, y: number }[] = [];\r\n        const day = new Date(String(returns.slice(returns.length - periods[portPeriod])[0].date))\r\n        twr.push({ x: (new Date(day.setDate(day.getDate() - 1))).toUTCString(), y: 1 })\r\n        //twr.push(JSON.parse(JSON.stringify(returns[returns.length - periods[portPeriod]])));\r\n        //twr[0].return = 1;\r\n        //const day = new Date(String(twr[0].date))\r\n        //twr[0].date = new Date(day.setDate(day.getDate() - 1));\r\n        returns?.slice(returns.length - periods[portPeriod]).forEach((r, i) => {\r\n            twr.push({ x: new Date(String(r.date)).toUTCString(), y: twr[i].y * (1 + r.return) })\r\n            //twr.push(JSON.parse(JSON.stringify(r)));\r\n            //twr[i+1].return = twr[i].return * (1 + r.return);\r\n        })\r\n        settwReturns(twr);\r\n\r\n    }, [portPeriod])\r\n\r\n    let cummReturn = 0;\r\n    const { securities: { bySymbol, byId } } = useSecuritiesList();\r\n\r\n    if (twReturns) cummReturn = twReturns[twReturns.length - 1].y - 1;\r\n    const { columns: watchlistItemColumns } = useWatchlistItemColumns(true)\r\n    return <View style={[paddView]}>\r\n        <Animated.FlatList\r\n            key={'top_level_portfolio_screen'}\r\n            data={[\r\n                <View key={\"portfolio_\"} >\r\n                    <Header text=\"Performance\"/>\r\n                    <ElevatedSection key={'pertformance_chart_section'} alt={true} title=\"\" style={(twReturns === undefined) ? { display: 'none' } : { display: 'flex' }}>\r\n                        <View key={'performance_chart'} style={{ marginBottom: sizes.rem1 }} >\r\n                            {/*<LineHolder data={twReturns} />*/}\r\n                            <InteractiveChart data={twReturns} period={portPeriod} performance={true} />\r\n                        </View>\r\n                        <ButtonGroup key={\"period\"} items={[\"1D\", \"1W\", \"1M\", \"3M\", \"1Y\", \"2Y\", \"Max\"].map(v => ({ label: v, value: v }))} onValueChange={(v) => setPortPeriod(v)} value={portPeriod} />\r\n                        <View key={'portfolio_stats'} style={[portfolio ? { display: 'flex' } : { display: 'none' }, { borderColor: \"#ccc\", borderWidth: 1, backgroundColor: \"#f5f5f5\", padding: sizes.rem0_5 / 2, borderRadius: 4, marginBottom: 12 }]}>\r\n                            \r\n                            <View key={\"returns\"} style={{ flexDirection: \"row\" }}>\r\n                                {[\r\n                                    { title: \"Total Return\", value: toPercent2(cummReturn) },\r\n                                    { title: \"Beta\", value: toNumber2(portfolio?.beta || 0) },\r\n                                    { title: \"Sharpe Ratio\", value: toPercent2(portfolio?.sharpe || 0) }]\r\n                                    .map((item, idx) => {\r\n                                        return <View key={\"key_\" + idx} style={flex}>\r\n                                            <Text style={styles.stateLabel} >{item.title}</Text>\r\n                                            <Text style={styles.stateValue}>{item.value}</Text>\r\n                                        </View>\r\n                                    })}\r\n                            </View>\r\n                            <View key=\"exposures\" style={{ flexDirection: \"row\" }}>\r\n                                {[\r\n                                    { title: \"Long\", value: portfolio?.exposure?.long || 0 },\r\n                                    { title: \"Short\", value: portfolio?.exposure?.short || 0 },\r\n                                    { title: \"Gross\", value: portfolio?.exposure?.gross || 0 },\r\n                                    { title: \"Net\", value: portfolio?.exposure?.net || 0 }]\r\n                                    .map((item, idx) => {\r\n                                        return <View key={\"key_\" + idx} style={flex}>\r\n                                            <Text style={styles.stateLabel} >{item.title}</Text>\r\n                                            <Text style={styles.stateValue}>{toPercent(item.value)}</Text>\r\n                                        </View>\r\n                                    })}\r\n                            </View>\r\n                            <View style={{flex: 1, paddingHorizontal: sizes.rem1}}>\r\n                                <Text style={{fontSize: fonts.xSmall}}>{\"Return calculations are in beta. The more feedback you can provide us, the better we can do!\"}</Text>\r\n                            </View>\r\n                        </View>\r\n                    </ElevatedSection>\r\n                    <Section key=\"holdings\" alt={true} title=\"Holdings\" style={[holdings && holdings.length > 0 ? { display: 'flex' } : { display: 'none' }, {backgroundColor: AppColors.background}]}>{\r\n                        <List\r\n                            listKey=\"holdingsList\"\r\n                            datasetKey={`holdings_id_${holdings?.length}`}\r\n                            data={holdings}\r\n                            loadingMessage={\" \"}\r\n                            noDataMessage={\" \"}\r\n                            loadingItem={undefined}\r\n                            numColumns={2}\r\n                            renderItem={(item) => {\r\n                                return (\r\n                                    <HoldingRenderItem \r\n                                        item={item}\r\n                                        byId={byId}\r\n                                        isOwner={true}\r\n                                        />\r\n                                )\r\n                            }}\r\n                        />\r\n                    }</Section>\r\n                    <Section key=\"trades\" alt={true} title=\"Trades\" style={[!(holdings && twReturns && portfolio) ? { display: 'none' } : { display: 'flex' }, {backgroundColor: AppColors.background}]}>\r\n                        <LimitedBlockList \r\n                            listKey=\"portfolio_trades_table\"\r\n                            key={'trades_table'}\r\n                            maxPage={0}\r\n                            title={'All Trades'}\r\n                            listProps={{\r\n                                keyExtractor: (item: any, idx) => {\r\n                                    return item ? \"trade_\" + item.securityId + item.date : \"empty\";\r\n                                },\r\n                                datasetKey: `trades_id_`,\r\n                                data: async (a, $page, $limit) => {\r\n                                    const newArr = a || [];\r\n                                    newArr.push(... (await Api.User.extensions.getTrades({ $page, settings: {} })))\r\n                                    return newArr;\r\n                                } ,\r\n                                loadingMessage: \" \",\r\n                                noDataMessage: \" \",\r\n                                loadingItem: undefined,\r\n                                numColumns: 2,\r\n                                renderItem: (item: any) => {\r\n                                    return (\r\n                                        <TradeRenderItem\r\n                                            item={item}\r\n                                            byId={byId}\r\n                                            isOwner={true}\r\n                                            />\r\n                                    )\r\n                                }}\r\n                                }\r\n                            \r\n                            />\r\n\r\n                    </Section>\r\n                    <Text style={[(holdings && twReturns && portfolio) ? { display: 'none' } : { display: 'flex' },\r\n                    { fontSize: fonts.medium, fontWeight: '500', color: '#ccc' }]}>\r\n                        {\"You haven't linked a brokerage to TradingPost. Go to your Account page in the Side Menu and Link one today!\"}\r\n                    </Text>\r\n                </View>,\r\n                <View>\r\n                    <View style={{flex: 1, flexDirection: 'row'}}>\r\n                        <Header key={\"quick_watch\"} text=\"Quick Watch\" style={{flex: 1}}/>\r\n                        <View style={{marginBottom: sizes.rem0_5 / 2, marginHorizontal: 6}}> \r\n                            {  \r\n                                watchlists?.quick.id ?\r\n                                    <EditButton\r\n                                        height={24}\r\n                                        width={24} \r\n                                        onPress={() => {\r\n                                            nav.navigate(\"WatchlistEditor\", {\r\n                                                watchlistId: watchlists?.quick.id\r\n                                            })\r\n                                    }} /> :\r\n                                    <AddButton\r\n                                        height={24}\r\n                                        width={24} \r\n                                        onPress={() => {\r\n                                            nav.navigate(\"WatchlistEditor\", {\r\n                                                watchlistId: -1\r\n                                            })\r\n                                    }} />\r\n                                }\r\n                        </View>\r\n                    </View>\r\n                    \r\n                    <List\r\n                        datasetKey={`quick_watch_${focus}`}\r\n                        listKey=\"quick_watch_list\"\r\n                        loadingMessage={\" \"}\r\n                        noDataMessage={\" \"}\r\n                        loadingItem={undefined}\r\n                        numColumns={2}\r\n                        data={quickWatchlist?.items}\r\n                        renderItem={(item) => {                   \r\n                            const hideEmptyNote = false\r\n                            return (\r\n                                <WatchlistItemRenderItem\r\n                                    item={item}\r\n                                    bySymbol={bySymbol}\r\n                                    byId={byId}\r\n                                    hideEmptyNote={hideEmptyNote}\r\n                                    setShownMap={setShownMap}\r\n                                    shownMap={shownMap}\r\n                                    watchlist={quickWatchlist}\r\n                                        />\r\n                            )\r\n                        }}\r\n                    />\r\n\r\n                </View>\r\n                ,\r\n                <WatchlistSection\r\n                    datasetKey={`my_watchlist_${focus}`}\r\n                    title=\"My Watchlists\"\r\n                    key={\"my_watchlist\"}\r\n                    watchlists={watchlists?.created}\r\n                    showAddButton\r\n                    hideNoteOnEmpty\r\n                />,\r\n                <WatchlistSection\r\n                    datasetKey={`shared_watch_${focus}`}\r\n                    title=\"Shared Watchlists\"\r\n                    key={\"shared_watchlist\"}\r\n                    watchlists={watchlists?.saved}\r\n                    shared\r\n                />\r\n            ]}\r\n            renderItem={(info) => {\r\n                return info.item;\r\n            }}\r\n        >\r\n        </Animated.FlatList>\r\n    </View >\r\n\r\n}","import { Icon, Input } from \"@ui-kitten/components\";\r\nimport React, { useRef } from \"react\";\r\nimport { ImageProps, ViewStyle, TextInputProps, Image, ViewProps, Pressable } from \"react-native\";\r\nimport { ITextField, TextField } from \"../components/TextField\";\r\nimport { navIcons } from \"../images\";\r\n\r\nexport const SearchBar = (props: { onTextChange: (text: string) => void, placeholder?: string } & Pick<ViewProps, \"onLayout\">) => {\r\n    const tfRef = useRef<ITextField>(null)\r\n\r\n    return <TextField\r\n        textInputRef={tfRef}\r\n        onLayout={props.onLayout}\r\n        //enableErrors={false}\r\n        //hideUnderline\r\n        accessoryLeft={\r\n            () => {\r\n                return <Image source={navIcons.Search.inactive} style={{\r\n                    height: 20,\r\n                    width: 20,\r\n                    padding: 8,\r\n                    marginHorizontal: 12,\r\n                    transform: [\r\n                        { scaleX: -1 }\r\n                    ]\r\n                }} />\r\n            }\r\n        }\r\n        accessoryRight={\r\n            () => {\r\n                return <Pressable onPress={() => {\r\n                    tfRef.current?.field.current?.clear();\r\n                    props.onTextChange(\"\");\r\n                }}><Icon name=\"close-outline\" style={{\r\n                    height: 20,\r\n                    width: 20,\r\n                    padding: 8,\r\n                    marginHorizontal: 12,\r\n                    transform: [\r\n                        { scaleX: -1 }\r\n                    ]\r\n                }} /></Pressable>\r\n            }\r\n        }\r\n        // style={{\r\n\r\n        // } as ViewStyle} containerStyle={{\r\n        //     marginBottom: 0,\r\n        //     borderBottomColor: \"#d5d5d5\",\r\n        //     borderBottomWidth: 1,\r\n        //     paddingVertical: 16\r\n        // } as ViewStyle}\r\n        {\r\n        ...{\r\n            placeholder: props.placeholder || \"Search...\",\r\n            clearButtonMode: \"while-editing\",\r\n            onChangeText: (text) => {\r\n                props.onTextChange(text);\r\n            }\r\n        } as TextInputProps} />\r\n}","import {createBottomTabNavigator} from \"@react-navigation/bottom-tabs\";\r\nimport {NavigationProp} from \"@react-navigation/native\";\r\nimport React, {useEffect, useState} from \"react\";\r\nimport {ImageBackground, ImageSourcePropType} from \"react-native\";\r\nimport {NavIconKeys, navIcons, NavIconTypeOverride} from \"../images\";\r\nimport {FeedScreen} from \"../screens/FeedScreen\";\r\nimport {NotificationScreen} from \"../screens/NotificationScreen\";\r\nimport {PortfolioScreen} from \"../screens/PortfolioScreen\";\r\nimport {SearchScreen} from \"../screens/SearchScreen\";\r\nimport {Api} from \"@tradingpost/common/api\";\r\n\r\nconst BottomTab = createBottomTabNavigator<any>();\r\nconst DashComponents: Record<keyof typeof navIcons, { c: React.ComponentType<any>, p?: any, headerRight?: (props: { navigation: NavigationProp<any>, route: any }) => React.ReactNode }> = {\r\n    Portfolio: {\r\n        c: PortfolioScreen\r\n    },\r\n    Feed: {\r\n        c: FeedScreen\r\n    },\r\n    Search: {\r\n        c: SearchScreen,\r\n    },\r\n    Notification: {\r\n        c: NotificationScreen,\r\n    }\r\n}\r\n\r\nexport function BottomTabNavigator() {\r\n    const [hasNotifications, setHasNotifications] = useState(false);\r\n    useEffect(() => {\r\n        const t = async () => {\r\n            const notificationCount = await Api.Notification.extensions.hasNotifications();\r\n            setHasNotifications(notificationCount.unseenCount > 0);\r\n        }\r\n\r\n        t();\r\n        //We should just use the notification networks... either a notification is received when the app is open...\r\n        // or when the app opens it checks for notifications \r\n            \r\n        const interval = setInterval(async () => {\r\n            const notificationCount = await Api.Notification.extensions.hasNotifications();\r\n            setHasNotifications(notificationCount.unseenCount > 0);\r\n        }, 5000);\r\n\r\n        return () => {\r\n            clearInterval(interval)\r\n        }\r\n    }, []);\r\n\r\n    return <BottomTab.Navigator\r\n        initialRouteName=\"Feed\"\r\n        screenOptions={{\r\n            //tabBarActiveTintColor: Colors[colorScheme].tint,\r\n            headerShown: false\r\n        }}>\r\n        {Object.keys(navIcons).map((n) =>\r\n            <BottomTab.Screen\r\n                key={n}\r\n                name={n}\r\n                options={({navigation, route}) => ({\r\n                    //TODO: this makes things a bit choppy .. shoudl change in the future\r\n                    unmountOnBlur: true,\r\n                    tabBarShowLabel: false,\r\n                    lazy: true,\r\n                    tabBarIcon: ({color, focused, size}) => {\r\n                        const activeType = focused ? \"active\" : \"inactive\";\r\n                        let navIcon: ImageSourcePropType = navIcons[n as keyof typeof navIcons][activeType];\r\n                        if (NavIconTypeOverride[n as keyof typeof navIcons]) {\r\n                            if (hasNotifications) {\r\n                                navIcon = NavIconTypeOverride[n as keyof typeof navIcons][\"has\"][activeType];\r\n                            }\r\n                        }\r\n\r\n                        return <ImageBackground\r\n                            source={navIcon}\r\n                            resizeMode=\"contain\" style={{height: size, width: size}}/>\r\n                    },\r\n                })}\r\n                component={DashComponents[n as keyof typeof navIcons].c}\r\n                initialParams={{...DashComponents[n as keyof typeof navIcons]?.p}}\r\n            />)}\r\n    </BottomTab.Navigator>\r\n}\r\n","import {NavigationProp} from \"@react-navigation/native\";\r\nimport { Api, Interface } from \"@tradingpost/common/api\";\r\nimport { Avatar, Text } from \"@ui-kitten/components\";\r\nimport { SecPressable } from './WatchlistViewerScreen'\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { View } from \"react-native\";\r\nimport { ButtonGroup } from \"../components/ButtonGroup\";\r\nimport { Header, Subheader } from \"../components/Headers\";\r\nimport { List } from \"../components/List\";\r\nimport { NoDataPanel } from \"../components/NoDataPanel\";\r\nimport { ProfileBar } from \"../components/ProfileBar\";\r\nimport { SearchBar } from \"../components/SearchBar\";\r\nimport { ElevatedSection } from \"../components/Section\";\r\nimport { useSecuritiesList } from \"../SecurityList\";\r\nimport { flex, fonts, sizes } from \"../style\";\r\nimport { FeedPart } from \"./FeedScreen\";\r\nimport { FlatList } from \"react-native-gesture-handler\";\r\n\r\n\r\nexport const SearchScreen = (props: { navigation: NavigationProp<any> } & { route: { params: {} } }) => {\r\n    const [searchText, setSearchText] = useState(\"\"),\r\n        [searchType, setSearchType] = useState<\"posts\" | \"people\">(\"posts\"),\r\n        [people, setPeople] = useState<Interface.IUserList[]>(),\r\n        [searchSecurities, setSearchSecurities] = useState<Interface.ISecurityList[]>(),\r\n        debounceRef = useRef<any>(),\r\n        { securities: { list: securities } } = useSecuritiesList();\r\n    useEffect(() => {\r\n        clearTimeout(debounceRef.current);\r\n            if (searchText.length >= 3) {\r\n                debounceRef.current = setTimeout(async () => {\r\n                    try {\r\n                        setPeople(await Api.User.extensions.search({\r\n                            term: searchText\r\n                        }));\r\n                    }\r\n                    catch (ex) {\r\n                        console.error(ex);\r\n                    }\r\n                    try {\r\n                        const output: Interface.ISecurityList[] = []\r\n                        \r\n                        const modSearch = searchText.slice(0,1) === '$' ? searchText.slice(1) : searchText;\r\n                        const regex = new RegExp(`^${modSearch}`, \"i\");\r\n                        securities.forEach((item) => {\r\n                            if ((regex.test(item.company_name) || regex.test(item.symbol ))) {\r\n                                output.push(item)\r\n                            }\r\n                                \r\n                        })\r\n                        setSearchSecurities(output)\r\n                    } catch (ex) {\r\n                        console.error(ex)\r\n                    }\r\n                }, 500)\r\n            }\r\n            else if (searchText.length > 0) {\r\n                try {\r\n                    setPeople(undefined);\r\n                    const output: Interface.ISecurityList[] = []\r\n                    const modSearch = searchText.slice(0,1) === '$' ? searchText.slice(1) : searchText;\r\n                    const regex = new RegExp(`^${modSearch}`, \"i\");\r\n                    securities.forEach((item) => {\r\n                        if ((regex.test(item.symbol ))) {\r\n                            output.push(item)\r\n                        }\r\n                    })\r\n                    setSearchSecurities(output)\r\n                } catch (ex) {\r\n                    console.error(ex)\r\n                }\r\n            }\r\n            else {\r\n                setPeople(undefined);\r\n                setSearchSecurities(undefined)\r\n            }\r\n        \r\n    }, [searchText, searchType])\r\n\r\n    return (\r\n        <View style={[flex, { backgroundColor: \"#F7f8f8\" }]}>\r\n            <View style={{width: '90%', alignSelf: 'center', marginBottom: sizes.rem0_5}}>\r\n                <SearchBar \r\n                    placeholder=\"Search... ($AAPL, Tim, Tesla, etc.)\"\r\n                    onTextChange={(v) => {\r\n                        setSearchText(v);\r\n                    }} \r\n                />\r\n            </View>\r\n            <FlatList\r\n                data={[\r\n                    <View key={`id_${(people?.length || 0) + (searchSecurities?.length || 0)}`} style={{ marginLeft: sizes.rem1}}>            \r\n                    <View style={[people?.length ? {display: 'flex'} : {display: 'none'}, ]}>\r\n                        <Header text=\"Analysts\" />\r\n                        <List\r\n                            listKey=\"people\"\r\n                            datasetKey={`people_id_${people?.length}`}\r\n                            horizontal\r\n                            data={people}\r\n                            loadingMessage={\" \"}\r\n                            noDataMessage={\" \"}\r\n                            loadingItem={undefined}\r\n                            renderItem={(item) => {\r\n                                return <ElevatedSection title=\"\" style={{flex: 1}}>\r\n                                    <ProfileBar user={item.item} style={{marginBottom:-sizes.rem0_5}} />\r\n                                </ElevatedSection>\r\n                            }}\r\n                        />\r\n                    </View>\r\n                    <View style={[searchSecurities?.length ? {display: 'flex'} : {display: 'none'}]}>\r\n                        <Header text=\"Companies\"/>\r\n                        <List\r\n                            listKey=\"companies\"\r\n                            datasetKey={`company_id_${searchSecurities?.length}`}\r\n                            horizontal\r\n                            data={searchSecurities}\r\n                            loadingMessage={\" \"}\r\n                            noDataMessage={\" \"}\r\n                            loadingItem={undefined}\r\n                            //numColumns={2}\r\n                            renderItem={(item) => {\r\n                                const regex = new RegExp('placeholder.png', \"i\");\r\n                                if (regex.test(item.item.logo_url)) {\r\n                                    return (\r\n                                        <ElevatedSection title=\"\" style={{flexShrink: 1, marginBottom: 6, paddingHorizontal: 2, paddingVertical: 2, justifyContent: 'center'}}>\r\n                                            <Text style={{textAlign: 'center', fontSize: 12}}>\r\n                                                {item.item.company_name}\r\n                                            </Text>\r\n                                        </ElevatedSection>\r\n                                    )\r\n                                }\r\n                                else {\r\n                                    return (\r\n                                    <ElevatedSection title=\"\" style={{flex: 1, marginBottom: 6, paddingHorizontal: sizes.rem0_5, paddingVertical: sizes.rem0_5}}>\r\n                                        <SecPressable securityId={item.item.id}>                            \r\n                                                <Avatar\r\n                                                    style={{ borderRadius: 5 }}\r\n                                                    shape={'square'}\r\n                                                    resizeMode={'cover'}\r\n                                                    source={ {uri: item.item.logo_url} }\r\n                                                    size=\"giant\"\r\n                                                />\r\n                                        </SecPressable>\r\n                                </ElevatedSection>)\r\n                                }\r\n                            }}\r\n                        />\r\n                    </View>\r\n                    <View style={[searchText !== \"\" ? {display: 'flex'} : {display: 'none'}]}>\r\n                        <Header text=\"Posts\" />\r\n                    </View>\r\n                    </View>,\r\n                    <View>\r\n                        {(searchText !== \"\") ? <FeedPart searchText={searchText} /> : <NoDataPanel message={'Search for Analysts, Posts, or Companies!'} />}\r\n                    </View>\r\n                \r\n                ]}\r\n                renderItem={(info) => {\r\n                    return info.item\r\n                }}\r\n                contentContainerStyle={[{ paddingTop: 10 }]} \r\n                nestedScrollEnabled\r\n                >\r\n            </FlatList>\r\n        </View>\r\n    );\r\n}\r\n","import { createDrawerNavigator } from \"@react-navigation/drawer\";\r\nimport { getFocusedRouteNameFromRoute, useNavigationState } from \"@react-navigation/native\";\r\nimport React from \"react\";\r\nimport { Keyboard, Pressable } from \"react-native\";\r\nimport { useAppUser } from \"../Authentication\";\r\nimport { IconButton } from \"../components/IconButton\";\r\nimport { IconifyIcon } from \"../components/IconfiyIcon\";\r\nimport { SideMenu } from \"../components/SideMenu\";\r\nimport { SvgExpo } from \"../components/SvgExpo\";\r\nimport { BookmarkActiveBlue, BookmarkIcons, LogoNoBg } from \"../images\";\r\nimport { sizes } from \"../style\";\r\nimport { useIsKeyboardVisible } from \"../utils/hooks\";\r\nimport { BottomTabNavigator } from \"./BottomTabNavigator\";\r\nimport KeyboardClose from '../assets/@iconify/keyboard-close'\r\n\r\nexport const Drawer = createDrawerNavigator();\r\n\r\n\r\nconst HeaderTp = () => {\r\n    return <SvgExpo style={{ height: \"100%\", aspectRatio: 1 }}>\r\n        <LogoNoBg />\r\n    </SvgExpo>\r\n}\r\n\r\nexport function DrawerPart() {\r\n    const { loginState } = useAppUser();\r\n\r\n    console.log(\"Running Drawer Navigation\")\r\n    return loginState?.appUser ? <Drawer.Navigator useLegacyImplementation={true} drawerContent={(props) => <SideMenu  {...props} />}\r\n        screenOptions={({ route, navigation }) => ({\r\n            headerTitleAlign: \"center\",\r\n            headerTitle: HeaderTp,\r\n            headerRight: (() => {\r\n                const routeName = getFocusedRouteNameFromRoute(route);\r\n                const state = useNavigationState((state) => {\r\n                    return (((state.routes[0]?.state?.routes as any[])?.find(r => r.name === \"Feed\").params as any)?.bookmarkedOnly || \"false\") as \"true\" | \"false\"\r\n                });\r\n\r\n                const { isKeyboardVisible } = useIsKeyboardVisible();\r\n\r\n                if (isKeyboardVisible) {\r\n                    return <Pressable\r\n                        onPress={() => {\r\n                            Keyboard.dismiss();\r\n                        }}\r\n                    ><IconifyIcon\r\n                            currentColor=\"black\"\r\n                            icon={KeyboardClose}\r\n                            svgProps={{\r\n                                height: 24,\r\n                                width: 24,\r\n                            }}\r\n                            style={{\r\n                                height: 24,\r\n                                width: 24,\r\n                                marginRight: sizes.rem1\r\n                            }}\r\n                        />\r\n                    </Pressable>\r\n                }\r\n\r\n                switch (routeName) {\r\n                    case \"Feed\":\r\n                        const isMarked = state === \"true\";\r\n                        return <Pressable onPress={() => {\r\n                            navigation.navigate(\"Feed\", {\r\n                                bookmarkedOnly: isMarked ? \"false\" : \"true\"\r\n                            })\r\n                        }}>\r\n                            {!isMarked ? <IconButton\r\n                                iconSource={isMarked ? BookmarkIcons.active : BookmarkIcons.inactive}\r\n                                style={{\r\n                                    height: 28,\r\n                                    width: 28,\r\n                                    marginRight: sizes.rem1\r\n                                }} />\r\n                                : <BookmarkActiveBlue style={{\r\n                                    height: 28,\r\n                                    width: 28,\r\n                                    marginLeft: \"auto\",\r\n                                    marginRight: (sizes.rem1_5 + sizes.rem1) / 2\r\n                                }} />\r\n                            }\r\n                        </Pressable>\r\n                    default:\r\n                        console.log(routeName);\r\n                        return undefined;\r\n                }\r\n            })\r\n        })}>\r\n        <Drawer.Screen name=\"Root\" component={BottomTabNavigator} />\r\n    </Drawer.Navigator> : null;\r\n}\r\n","import React, { useEffect, useState, useRef } from \"react\"\r\nimport { IconifyIcon } from \"../components/IconfiyIcon\"\r\nimport { Section, Subsection } from \"../components/Section\"\r\nimport { SwitchField } from \"../components/SwitchField\"\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { CreateAccountProps, sideMargin } from \"./create_account/shared\"\r\n//import { SetDashboardLayout } from \"../../layouts/DashboardLayout\"\r\n//import { deleteAccount, UpdateUserProfile } from \"../../apis/Authenticfation\"\r\nimport { /*bindSwitch,*/ useReadonlyEntity } from \"../utils/hooks\"\r\nimport { ScrollWithButtons } from \"../components/ScrollWithButtons\"\r\nimport { View, Animated } from \"react-native\"\r\nimport { useLinkTo } from \"@react-navigation/native\"\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { openBrowserAsync } from 'expo-web-browser';\r\nimport { Icon, Text } from \"@ui-kitten/components\";\r\nimport { AddButton, EditButton } from \"../components/AddButton\";\r\nimport { Table } from \"../components/Table\";\r\nimport { bannerText, flex, paddView, paddViewWhite, sizes, thinBannerText } from \"../style\";\r\nimport { PrimaryButton } from \"../components/PrimaryButton\"\r\nimport { useAppUser } from \"../Authentication\"\r\nimport { RootStackScreenProps } from \"../navigation/pages\";\r\nimport { SecondaryButton } from \"../components/SecondaryButton\";\r\n\r\n\r\nexport function AccountSettingsScreen(props: RootStackScreenProps<\"AccountSettings\">) {\r\n    const { loginState, signIn } = useAppUser();\r\n    const appUser = loginState?.appUser, authToken = loginState?.authToken\r\n    const [mentionCheck, setMentionCheck] = useState<boolean>(appUser?.settings?.push_notifications.mentions === undefined ? true : appUser?.settings?.push_notifications.mentions),\r\n        [upvotesCheck, setUpvotesCheck] = useState<boolean>(appUser?.settings?.push_notifications.upvotes === undefined ? true : appUser?.settings?.push_notifications.upvotes),\r\n        [watchlistChangeCheck, setWatchlistChangeCheck] = useState<boolean>(appUser?.settings?.push_notifications.watchlist_changes === undefined ? true : appUser?.settings?.push_notifications.watchlist_changes),\r\n        [performanceCheck, setPerformanceCheck] = useState<boolean>(appUser?.settings?.portfolio_display.performance === undefined ? false : appUser?.settings?.portfolio_display.performance),\r\n        [holdingsCheck, setHoldingsCheck] = useState<boolean>(appUser?.settings?.portfolio_display.holdings === undefined ? false : appUser?.settings?.portfolio_display.holdings),\r\n        [tradesCheck, setTradesCheck] = useState<boolean>(appUser?.settings?.portfolio_display.trades === undefined ? false : appUser?.settings?.portfolio_display.trades),\r\n        [analystCheck, setAnalystCheck] = useState<boolean>(appUser?.settings?.analyst === undefined ? false : appUser?.settings?.analyst),\r\n        linkTo = useLinkTo<any>()\r\n\r\n    const onMentionCheckChanged = (isMentionChecked: boolean) => {\r\n        setMentionCheck(isMentionChecked);\r\n    }\r\n    const onUpvoteCheckChanged = (isUpvoteChecked: boolean) => {\r\n        setUpvotesCheck(isUpvoteChecked);\r\n    }\r\n    const onWatchlistChangeCheckChanged = (isWatchlistChangeChecked: boolean) => {\r\n        setWatchlistChangeCheck(isWatchlistChangeChecked);\r\n    }\r\n    const onPerformanceCheckChanged = (isPerformanceChecked: boolean) => {\r\n        setPerformanceCheck(isPerformanceChecked);\r\n    }\r\n    const onHoldingsCheckChanged = (isHoldingsChecked: boolean) => {\r\n        setHoldingsCheck(isHoldingsChecked);\r\n    }\r\n    const onTradesCheckChanged = (isTradesChecked: boolean) => {\r\n        setTradesCheck(isTradesChecked);\r\n    }\r\n    const onAnalystCheckChanged = (isAnalystChecked: boolean) => {\r\n        setAnalystCheck(isAnalystChecked);\r\n    }\r\n\r\n    const opacityAnim = useRef(new Animated.Value(0)).current;\r\n    const [accounts, setAccounts] = useState<Awaited<ReturnType<typeof Api.User.extensions.getBrokerageAccounts>>>()\r\n    const intervalRef = useRef<any>();\r\n    const [needsRefresh, setNeedsRefresh] = useState<{}>();\r\n    const openLink = async () => {\r\n        const browserName = \"finicity_auth\";\r\n        await openBrowserAsync(brokerLink, { \"windowName\": browserName });\r\n        clearInterval(intervalRef.current);\r\n\r\n        intervalRef.current = setInterval(async () => {\r\n            console.log(\"WTF\");\r\n            if (await AsyncStorage.getItem(\"auth-finicity-code\")) {\r\n                console.log(\"CODE HAS BEEN FOUND\");\r\n                setAccounts(await Api.User.extensions.getBrokerageAccounts())\r\n            }\r\n        }, 5000)\r\n    }\r\n    //cleanup\r\n    useEffect(() => {\r\n        AsyncStorage.removeItem(\"auth-finicity-code\");\r\n        return () => {\r\n            clearInterval(intervalRef.current);\r\n            AsyncStorage.removeItem(\"auth-finicity-code\");\r\n        }\r\n    }, [])\r\n\r\n\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n    const [brokerLink, setLink] = useState(\"\");\r\n    useEffect(() => {\r\n        Api.User.extensions.generateBrokerageLink(undefined).then(({ link }) => {\r\n            setLink(link)\r\n        })\r\n    }, [needsRefresh])\r\n\r\n    useEffect(() => {\r\n        Api.User.extensions.getBrokerageAccounts()\r\n            .then((r: any) => {\r\n                setAccounts(r);\r\n            })\r\n    }, [])\r\n\r\n    return <ScrollWithButtons\r\n        buttons={{\r\n            left: {\r\n                text: 'Cancel',\r\n                onPress: async () => {\r\n                    try {\r\n                        //      await UpdateUserProfile({ status_setup: true });\r\n                        //    SetDashboardLayout();\r\n                        linkTo('/dash/feed')\r\n                    }\r\n                    catch (ex) {\r\n                    }\r\n                }\r\n            },\r\n            right: {\r\n                text: 'Save',\r\n                onPress: async () => {\r\n                    try {\r\n                        if (appUser?.id)\r\n                            await Api.User.update(appUser.id, {\r\n                                settings: {\r\n                                    analyst: analystCheck,\r\n                                    push_notifications: {\r\n                                        mentions: mentionCheck,\r\n                                        upvotes: upvotesCheck,\r\n                                        watchlist_changes: watchlistChangeCheck,\r\n                                    },\r\n                                    portfolio_display: {\r\n                                        performance: performanceCheck,\r\n                                        holdings: holdingsCheck,\r\n                                        trades: tradesCheck\r\n                                    }\r\n                                }\r\n                            })\r\n\r\n                        authToken ? await signIn(\"\", authToken) : {};\r\n\r\n                        linkTo('/dash/feed');\r\n\r\n                    }\r\n                    catch (ex) {\r\n                    }\r\n                }\r\n            }\r\n        }}>\r\n        <View style={{ margin: sideMargin }}>\r\n            <Section title=\"\" style={{ padding: 10 }}>\r\n                <SwitchField label='Analyst' checked={analystCheck} onChange={onAnalystCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n            </Section>\r\n            <Section title='Display' style={{ padding: 10 }}>\r\n                <SwitchField label='Performance' checked={performanceCheck} onChange={onPerformanceCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n                <SwitchField label='Portfolio' checked={holdingsCheck} onChange={onHoldingsCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n                <SwitchField label='Trades' checked={tradesCheck} onChange={onTradesCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n            </Section>\r\n            <Section style={{ padding: 10 }} title=\"Link Brokerage Accounts\" button={(props) => accounts?.length ? <EditButton\r\n                onPress={() => {\r\n                    openLink();\r\n                }}\r\n                height={35}\r\n                width={35}\r\n            /> : <AddButton\r\n                onPress={() => openLink()}\r\n                height={35}\r\n                width={35}\r\n            />} >\r\n                <Table datasetKey={accounts?.map(a => a.id).join(\",\") || \"none\"} columns={[{ alias: \"Brokerage\", field: \"broker_name\", align: \"left\" }, { alias: \"Account #\", field: \"account_number\", align: \"left\" }]} data={accounts} noDataMessage=\"You have no linked accounts\" />\r\n            </Section>\r\n            <Section title='Payment' style={{ padding: 10 }}>\r\n                <Text>\r\n                    Stripe\r\n                </Text>\r\n            </Section>\r\n            <Section title='Notifications' style={{ padding: 10 }}>\r\n                <Subsection title='Posts' alt={true}>\r\n                    <SwitchField label='Mentions' checked={mentionCheck} onChange={onMentionCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n                    <SwitchField label='Upvotes' checked={upvotesCheck} onChange={onUpvoteCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n                </Subsection>\r\n                <Subsection title='Watchlists' alt={true}>\r\n                    {/*<SwitchField label='Price Movement' checked={watchlistPxCheck} onChange={onWatchlistPxCheckChanged} viewStyle={{flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5}} toggleStyle={{}} textStyle={{fontSize: 14, alignSelf: 'center'}}/>*/}\r\n                    <SwitchField label='Changes' checked={watchlistChangeCheck} onChange={onWatchlistChangeCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n                </Subsection>\r\n            </Section>\r\n            <Section title='Management' style={{ padding: 10 }}>\r\n                <View style={{ flexDirection: 'row', justifyContent: 'space-between', marginVertical: 5 }}>\r\n                    <Text style={{ fontSize: 14, alignSelf: 'center' }}>\r\n                        Delete Account\r\n                    </Text>\r\n                    <PrimaryButton style={{ width: \"40%\", backgroundColor: \"#D81222\", borderColor: \"#D81222\" }} onPress={() => { }}>\r\n                        FOREVER\r\n                    </PrimaryButton>\r\n                </View>\r\n            </Section>\r\n        </View>\r\n    </ScrollWithButtons>\r\n}","import React, { useState, useMemo, useEffect } from \"react\"\r\nimport { ElevatedSection, Section, Subsection } from \"../components/Section\"\r\nimport { SwitchField } from \"../components/SwitchField\"\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { sideMargin } from \"./create_account/shared\"\r\nimport { ScrollWithButtons } from \"../components/ScrollWithButtons\"\r\nimport { View, Pressable, Alert, Platform } from \"react-native\"\r\nimport { useLinkTo, useNavigation } from \"@react-navigation/native\"\r\nimport { useSecuritiesList } from '../SecurityList'\r\nimport { Autocomplete, AutocompleteItem, Icon, IndexPath, Text, TabView, Tab } from \"@ui-kitten/components\";\r\nimport { AddButton, EditButton } from \"../components/AddButton\";\r\nimport { flex, sizes, fonts } from \"../style\";\r\nimport { PrimaryButton } from \"../components/PrimaryButton\"\r\nimport { useAppUser } from \"../Authentication\"\r\nimport { investmentStrats, questionStyle, gicsAC } from './create_account/InvestmentInterestSection'\r\nimport { KeyboardAvoidingInput } from \"../components/KeyboardAvoidingInput\";\r\nimport { Picker } from \"../components/Picker\";\r\nimport { ProfileButton } from \"../components/ProfileButton\";\r\nimport { Slider } from \"../components/Slider\";\r\nimport { AppColors } from \"../constants/Colors\";\r\nimport { YourContentComponent } from \"../components/YourContentComponent\";\r\nimport { IUserGet, IUserUpdate } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport { Log } from \"../utils/logger\";\r\nimport { LinkBrokerageComponent } from \"../components/LinkBrokerageComponent\";\r\nimport { SecondaryButton } from \"../components/SecondaryButton\";\r\n\r\nexport function AccountInfoScreen(props?: any) {\r\n    const { loginState, signIn, signOut } = useAppUser(),\r\n        [index, setIndex] = useState(0),\r\n        linkTo = useLinkTo<any>()\r\n\r\n    const definedOrValue = (test: boolean | undefined, d: boolean) => {\r\n        return test === undefined ? d : test\r\n    }\r\n    const appUser = loginState?.appUser;\r\n    const [accountUpdates, setAccountUpdates] = useState<IUserUpdate>({\r\n        bio: appUser?.bio,\r\n        analyst_profile: appUser?.analyst_profile || {\r\n            investment_strategy: \"\",\r\n            portfolio_concentration: 50,\r\n            benchmark: \"\",\r\n            interests: []\r\n        },\r\n        profile_url: appUser?.profile_url,\r\n        settings: {\r\n            analyst: appUser?.settings?.analyst || false,\r\n            portfolio_display: {\r\n                holdings: definedOrValue(appUser?.settings?.portfolio_display.holdings, false),\r\n                performance: definedOrValue(appUser?.settings?.portfolio_display.performance, false),\r\n                trades: definedOrValue(appUser?.settings?.portfolio_display.trades, false)\r\n            },\r\n            push_notifications: {\r\n                mentions: definedOrValue(appUser?.settings?.push_notifications.mentions, true),\r\n                upvotes: definedOrValue(appUser?.settings?.push_notifications.upvotes, true),\r\n                watchlist_changes: definedOrValue(appUser?.settings?.push_notifications.watchlist_changes, true)\r\n            }\r\n        },\r\n        is_deleted: appUser?.is_deleted\r\n    })\r\n    //HACK: think through a better way of doing this.\r\n    useEffect(() => {\r\n        setAccountUpdates((a) => {\r\n            const clone = { ...a };\r\n            clone.profile_url = appUser?.profile_url;\r\n            return clone;\r\n        });\r\n    }, [loginState?.updated.toString(), appUser?.profile_url])\r\n\r\n    return (\r\n        <ScrollWithButtons\r\n            buttons={{\r\n                left: {\r\n                    text: 'Cancel',\r\n                    onPress: async () => {\r\n                        try {\r\n                            linkTo('/dash/feed')\r\n                        }\r\n                        catch (ex) {\r\n                        }\r\n                    }\r\n                },\r\n                right: {\r\n                    text: 'Save',\r\n                    onPress: async () => {\r\n                        await Log.tryCatch(async () => {\r\n                            if (appUser?.id && loginState?.authToken) {\r\n                                await Api.User.update(appUser?.id || '', accountUpdates);\r\n                                await signIn(\"\", loginState?.authToken);\r\n                            }\r\n                        })\r\n\r\n                        try {\r\n                            linkTo('/dash/feed')\r\n                        }\r\n                        catch (ex) {\r\n                            console.error(ex);\r\n                        }\r\n                    }\r\n                }\r\n            }}>\r\n            <View style={[flex, { margin: sideMargin, marginTop: 12 }]} >\r\n                <TabView indicatorStyle={{ marginTop: 26 }}\r\n                    style={{ marginVertical: sizes.rem0_5 }}\r\n                    tabBarStyle={{ backgroundColor: AppColors.background, borderColor: AppColors.background }}\r\n                    selectedIndex={index}\r\n                    onSelect={(idx) => {\r\n                        console.log(\"Setting index \" + idx);\r\n                        setIndex(idx);\r\n                    }}>\r\n                    <Tab key={\"A\"} title={'Account Info'} style={{ backgroundColor: AppColors.background, borderColor: AppColors.background }} >\r\n                        <AccountInfoContent setUpdates={setAccountUpdates} updates={accountUpdates} />\r\n                    </Tab>\r\n                    <Tab key={\"B\"} title={'Your Content'} style={{ backgroundColor: AppColors.background, borderColor: AppColors.background }}>\r\n                        <YourContentComponent key={props?.route?.params?.newTwitterHandle} newTwitterhandle={props?.route?.params?.newTwitterHandle} />\r\n                    </Tab>\r\n                    <Tab key={\"C\"} title={'Advanced'} style={{ backgroundColor: AppColors.background, borderColor: AppColors.background }}>\r\n                        <AdvancedTabContent signOut={signOut} appUser={appUser} setUpdates={setAccountUpdates} updates={accountUpdates} />\r\n\r\n                    </Tab>\r\n                </TabView>\r\n\r\n            </View>\r\n        </ScrollWithButtons>\r\n    )\r\n}\r\nconst AccountInfoContent = (props: { updates: IUserUpdate, setUpdates: (updates: IUserUpdate) => void }) => {\r\n    const { updates, setUpdates } = props;\r\n    const [sliderWidth, setSliderWidth] = useState(10),\r\n        [acText, setAcText] = useState(\"\"),\r\n        { securities: { list: securities } } = useSecuritiesList();\r\n\r\n    const acValues = useMemo(() => {\r\n        const r = new RegExp(acText, \"i\");\r\n        return acText ? gicsAC.filter((g, i) => r.test(g)) : [];\r\n    }, [acText])\r\n    const addIfMissing = (value: string) => {\r\n        if (value && !updates.analyst_profile?.interests?.find((int: any) => int.toLowerCase() === value.toLowerCase())) {\r\n            const _updates = { ...updates }\r\n            _updates.analyst_profile!.interests = [..._updates.analyst_profile!.interests, value]\r\n            setUpdates(_updates);\r\n        }\r\n        setAcText(\"\");\r\n    }\r\n    const benches = securities.filter(s => s.is_benchmark).sort((a, b) => a.symbol.localeCompare(b.symbol)).map((value) => ({\r\n        label: `${value.symbol} - ${value.security_name}`,\r\n        value: value.symbol,\r\n        iconUrl: value.logo_url\r\n    }))\r\n    const { loginState } = useAppUser();\r\n\r\n    return <ElevatedSection\r\n        title=\"\">\r\n        <Text style={[questionStyle, { marginTop: sizes.rem0_5, textAlign: 'center' }]}>Tap to Modify Profile Picture</Text>\r\n        <ProfileButton key={loginState?.updated.toString()} userId={''} profileUrl={updates.profile_url || ''} size={sizes.rem8} editable />\r\n        <Text style={[questionStyle, { marginTop: sizes.rem0_5 }]}>Bio</Text>\r\n        <KeyboardAvoidingInput\r\n            value={updates.bio}\r\n            displayButton={false}\r\n            numLines={3}\r\n            placeholder={'Tell people about yourself'}\r\n            setValue={(text: string) => {\r\n                const _updates = { ...updates }\r\n                _updates.bio = text;\r\n                setUpdates(_updates);\r\n            }}\r\n        />\r\n        <Text style={questionStyle}>What is your investment strategy?</Text>\r\n        <Picker\r\n            placeholder='Select Strategy'\r\n            value={updates?.analyst_profile?.investment_strategy}\r\n            items={investmentStrats.map((value) => ({\r\n                label: value,\r\n                value\r\n            }))}\r\n            onSelect={(v) => {\r\n                if (v) {\r\n                    const _updates = { ...updates }\r\n                    _updates.analyst_profile!.investment_strategy = investmentStrats[v.row];\r\n                    setUpdates(_updates);\r\n                }\r\n            }}\r\n        />\r\n        <Text style={questionStyle}>How concentrated is your portfolio?</Text>\r\n        <Slider\r\n            containerStyle={{\r\n                //marginLeft: sliderWidth * 0.05\r\n            }}\r\n            min={0}\r\n            max={100}\r\n            step={25}\r\n            //sliderLength={sliderWidth * 0.9}\r\n            values={[updates.analyst_profile!.portfolio_concentration]}\r\n            onValuesChange={(v) => {\r\n                const _updates = { ...updates }\r\n                _updates.analyst_profile!.portfolio_concentration = v[0]\r\n                setUpdates(_updates);\r\n            }}\r\n        />\r\n        <View style={{ flexDirection: \"row\", justifyContent: \"space-between\", marginBottom: 16 }}>\r\n            <Text>Highly Diversified</Text>\r\n            <Text>Very Concentrated</Text>\r\n        </View>\r\n        <Text style={questionStyle}>What benchmark do you follow?</Text>\r\n        <Picker\r\n            value={updates.analyst_profile?.benchmark}\r\n            placeholder='Select Benchmark'\r\n            items={benches}\r\n            onSelect={(v) => {\r\n                if (v) {\r\n                    const _updates = { ...updates }\r\n                    _updates.analyst_profile!.benchmark = benches[v.row].value;\r\n                    setUpdates(_updates);\r\n                }\r\n            }}\r\n        />\r\n        <Text style={questionStyle}>Pick a few interest and specialties</Text>\r\n        <View>\r\n            <Autocomplete\r\n                value={acText || \"\"}\r\n                onChangeText={setAcText}\r\n                placeholder=\"Interest &amp; Specialties\"\r\n                placement=\"bottom\"\r\n                accessoryRight={\r\n                    (props) => <AddButton\r\n                        onPress={() => addIfMissing(acText)}\r\n                        height={(props?.style as any)?.height}\r\n                        width={(props?.style as any)?.width}\r\n\r\n                    />\r\n                }\r\n                onSelect={(idx) => addIfMissing(acValues[idx])}>{\r\n                    acValues.map((v, i) => <AutocompleteItem key={i} title={v} />)\r\n                }\r\n            </Autocomplete>\r\n        </View>\r\n        {\r\n            updates.analyst_profile?.interests.map((v, i) => <View style={{ padding: sizes.rem0_5, flexDirection: \"row\" }}>\r\n                <Text style={{ textAlign: \"left\", flex: 1 }}>{v}</Text><Pressable onPress={() => {\r\n                    const newInterest = [...updates.analyst_profile!.interests];\r\n                    newInterest.splice(i, 1);\r\n                    const _updates = { ...updates }\r\n                    _updates.analyst_profile!.interests = newInterest;\r\n                    setUpdates(_updates);\r\n                }}><Icon name=\"close-outline\" style={{ height: 24, aspectRatio: 1 }} /></Pressable>\r\n            </View>)\r\n        }\r\n    </ElevatedSection>\r\n\r\n}\r\n\r\nconst AdvancedTabContent = (props: { appUser: IUserGet | undefined, signOut: any, updates: IUserUpdate, setUpdates: (updates: IUserUpdate) => void }) => {\r\n\r\n    const nav = useNavigation();\r\n    const updates = props.updates;\r\n\r\n    const onMentionCheckChanged = (isMentionChecked: boolean) => {\r\n        const _updates = { ...updates }\r\n        _updates.settings!.push_notifications.mentions = isMentionChecked;\r\n        props.setUpdates(_updates)\r\n    }\r\n    const onUpvoteCheckChanged = (isUpvoteChecked: boolean) => {\r\n        const _updates = { ...updates }\r\n        _updates.settings!.push_notifications.upvotes = isUpvoteChecked\r\n        props.setUpdates(_updates)\r\n    }\r\n    const onWatchlistChangeCheckChanged = (isWatchlistChangeChecked: boolean) => {\r\n        const _updates = { ...updates }\r\n        _updates.settings!.push_notifications.watchlist_changes = isWatchlistChangeChecked\r\n        props.setUpdates(_updates)\r\n\r\n    }\r\n    const onPerformanceCheckChanged = (isPerformanceChecked: boolean) => {\r\n        const _updates = { ...updates }\r\n        _updates.settings!.portfolio_display.performance = isPerformanceChecked;\r\n        props.setUpdates(_updates)\r\n    }\r\n    const onHoldingsCheckChanged = (isHoldingsChecked: boolean) => {\r\n        const _updates = { ...updates }\r\n        _updates.settings!.portfolio_display.holdings = isHoldingsChecked\r\n        props.setUpdates(_updates)\r\n    }\r\n    const onTradesCheckChanged = (isTradesChecked: boolean) => {\r\n        const _updates = { ...updates }\r\n        _updates.settings!.portfolio_display.trades = isTradesChecked;\r\n        props.setUpdates(_updates)\r\n    }\r\n    const onAnalystCheckChanged = (isAnalystChecked: boolean) => {\r\n        const _updates = { ...updates }\r\n        _updates.settings!.analyst = isAnalystChecked;\r\n        props.setUpdates(_updates)\r\n    }\r\n    //@ts-ignore\r\n    const alertPolyfill = (title, description, options, extra) => {\r\n        const result = window.confirm([title, description].filter(Boolean).join('\\n'))\r\n\r\n        if (result) {\r\n            //@ts-ignore\r\n            const confirmOption = options.find(({ style }) => style !== 'cancel')\r\n            confirmOption && confirmOption.onPress()\r\n        } else {\r\n            //@ts-ignore\r\n            const cancelOption = options.find(({ style }) => style === 'cancel')\r\n            cancelOption && cancelOption.onPress()\r\n        }\r\n    }\r\n\r\n    const alert = Platform.OS === 'web' ? alertPolyfill : Alert.alert;\r\n    const linkTo = useLinkTo();\r\n\r\n    return <ElevatedSection title=\"\" style={{ padding: 5 }}>\r\n        <View>\r\n            <SwitchField label='Analyst'\r\n                toolTipText={`Becoming an analyst allows you to display your portfolio to subscribers, customize your profile and enable you to post premium content on TP.`}\r\n                toolTipStyle={{ alignItems: 'flex-start' }}\r\n                checked={props.updates.settings?.analyst}\r\n                onChange={onAnalystCheckChanged}\r\n                viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5, padding: 5 }}\r\n                toggleStyle={{}}\r\n                textStyle={{ fontSize: fonts.large, fontWeight: '500', alignSelf: 'center', color: AppColors.primary }}\r\n            />\r\n        </View>\r\n        <Section title='Display To Subscribers' style={{ padding: 5 }}>\r\n            <SwitchField label='Performance' checked={props.updates.settings?.portfolio_display.performance} onChange={onPerformanceCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n            <SwitchField label='Portfolio' checked={props.updates.settings?.portfolio_display.holdings} onChange={onHoldingsCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n            <SwitchField label='Trades' checked={props.updates.settings?.portfolio_display.trades} onChange={onTradesCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n            <View style={{ flexDirection: 'row', justifyContent: 'center', marginVertical: 15 }}>\r\n                <PrimaryButton style={{ width: \"60%\", paddingHorizontal: 4, backgroundColor: AppColors.secondary, borderColor: AppColors.secondary }} onPress={() => {\r\n                    nav.navigate('Subscription')\r\n                }}>\r\n                    {evaProps => <Text {...evaProps} style={{ textAlign: 'center', color: 'white', paddingHorizontal: 6 }}>Manage Subscriptions</Text>}\r\n\r\n                </PrimaryButton>\r\n            </View>\r\n        </Section>\r\n        <LinkBrokerageComponent />\r\n        <Section title='Payment' style={{ padding: 10 }}>\r\n            <Text>\r\n                Coming Soon!\r\n            </Text>\r\n        </Section>\r\n        <Section title='Notifications' style={{ padding: 10 }}>\r\n            <Subsection title='Posts' alt={true}>\r\n                <SwitchField label='Mentions' checked={props.updates.settings?.push_notifications.mentions} onChange={onMentionCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n                <SwitchField label='Upvotes' checked={props.updates.settings?.push_notifications.upvotes} onChange={onUpvoteCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n            </Subsection>\r\n            <Subsection title='Watchlists' alt={true}>\r\n                {/*<SwitchField label='Price Movement' checked={watchlistPxCheck} onChange={onWatchlistPxCheckChanged} viewStyle={{flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5}} toggleStyle={{}} textStyle={{fontSize: 14, alignSelf: 'center'}}/>*/}\r\n                <SwitchField label='Changes' checked={props.updates.settings?.push_notifications.watchlist_changes} onChange={onWatchlistChangeCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n            </Subsection>\r\n        </Section>\r\n        <Section title='Management' style={{ padding: 10 }}>\r\n            <View style={{ flexDirection: 'row', justifyContent: 'space-between', marginVertical: 5 }}>\r\n                <Text style={{ fontSize: 14, alignSelf: 'center' }}>\r\n                    Blocked Users\r\n                </Text>\r\n                <SecondaryButton style={{ width: \"40%\" }} onPress={() => {\r\n                    linkTo(\"/blocked\")\r\n                }}>\r\n                    View\r\n                </SecondaryButton>\r\n            </View>\r\n            <View style={{ flexDirection: 'row', justifyContent: 'space-between', marginVertical: 5 }}>\r\n                <Text style={{ fontSize: 14, alignSelf: 'center' }}>\r\n                    Delete Account\r\n                </Text>\r\n                <PrimaryButton style={{ width: \"40%\", backgroundColor: \"#D81222\", borderColor: \"#D81222\" }} onPress={async () => {\r\n                    return alert(\r\n                        `Are you sure you want to delete your account?`,\r\n                        '',\r\n                        [\r\n                            {\r\n                                text: \"Yes\",\r\n                                onPress: async () => {\r\n                                    const _updates = { ...updates }\r\n                                    _updates.is_deleted = true;\r\n                                    props.setUpdates(_updates)\r\n                                    await Api.User.update(props.appUser?.id || '', _updates);\r\n                                    props.signOut();\r\n                                }\r\n                            },\r\n                            {\r\n                                text: \"No\"\r\n                            }\r\n                        ]\r\n                    )\r\n                }}>\r\n                    FOREVER\r\n                </PrimaryButton>\r\n            </View>\r\n\r\n        </Section>\r\n    </ElevatedSection>\r\n\r\n}","import AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport { Text } from '@ui-kitten/components'\r\nimport { useEffect } from 'react';\r\nimport { View } from 'react-native';\r\nimport { RootStackScreenProps } from '../navigation/pages';\r\n\r\nexport const AuthScreen = (props: RootStackScreenProps<\"Auth\">) => {\r\n    const nav = useNavigation()\r\n    const platform = props.route?.params?.platform;\r\n    const code = props.route?.params?.code;\r\n    console.log(\"############################## LOADED THE AUTH SCREEN ########################################\");\r\n    useEffect(() => {\r\n        console.log(\"SETTING THE PLATFORM CODE\");\r\n        if (platform === \"twitter\" && code) {\r\n            AsyncStorage.setItem(`auth-${platform}-code`, code);\r\n        }\r\n        else if (platform === \"youtube\" && code) {\r\n            AsyncStorage.setItem(`auth-${platform}-code`, code);\r\n        }\r\n        //redundant but I may change this\r\n        else if (platform === \"finicity\") {\r\n            AsyncStorage.setItem(`auth-${platform}-code`, \"DONE!\");\r\n        }\r\n        if (nav.canGoBack())\r\n            nav.goBack()\r\n\r\n    }, [platform, code]);\r\n    return (\r\n        <View>\r\n            <Text>You have been authorized to {platform || \"Missing platform\"}</Text>\r\n        </View>\r\n        )\r\n}","import { Button } from \"@ui-kitten/components\";\r\nimport React, { useState } from \"react\";\r\nimport { View } from \"react-native\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { PrimaryButton } from \"../components/PrimaryButton\";\r\nimport { ElevatedSection } from \"../components/Section\";\r\nimport { TextField } from \"../components/TextField\";\r\nimport { Api } from '@tradingpost/common/api'\r\nimport { useAppUser } from \"../Authentication\";\r\nimport { RootStackScreenProps } from \"../navigation/pages\";\r\n\r\nexport const ChangePasswordScreen = (props: RootStackScreenProps<\"ResetPassword\">) => {\r\n    const\r\n        [oldPass, setOldPass] = useState<string>(),\r\n        [newPass, setNewPass] = useState<string>(),\r\n        [confirm, setConfirm] = useState<string>(),\r\n        toast = useToast(),\r\n        hasToken = Boolean(props.route.params.token),\r\n        { loginState } = useAppUser()\r\n\r\n    return <View>\r\n        <ElevatedSection title={\"Reset Password\"}>\r\n            {!hasToken && <TextField label=\"Old Pass\" value={oldPass} onChangeText={(t) => setOldPass(t)} />}\r\n            <TextField label=\"New Pass\" value={newPass} onChangeText={(t) => setNewPass(t)} />\r\n            <TextField label=\"Confirm Pass\" value={confirm} onChangeText={(t) => setConfirm(t)} />\r\n            <PrimaryButton\r\n                onPress={async () => {\r\n                    try {\r\n                        if (!hasToken && !oldPass)\r\n                            throw new Error(\"Please provide a value for your old password\");\r\n                        if (newPass && newPass !== confirm)\r\n                            throw new Error(\"Please make sure your new passwords match\")\r\n                        if ((newPass?.length || 0) < 8)\r\n                            throw new Error(\"Please make sure your password is at least 8 characters long\")\r\n\r\n\r\n                        await Api.Auth.resetPassword(\r\n                            loginState?.appUser?.email || \"\",\r\n                            props.route.params.token || oldPass || \"\",\r\n                            !hasToken,\r\n                            newPass || \"\")\r\n\r\n                        props.navigation.replace(\"Root\");\r\n\r\n                    }\r\n                    catch (ex: any) {\r\n                        toast.show(ex.message)\r\n                    }\r\n\r\n                }}\r\n            >Change Password</PrimaryButton>\r\n        </ElevatedSection>\r\n    </View>\r\n\r\n}","import { Api, Interface } from \"@tradingpost/common/api\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { Animated, FlatList, NativeSyntheticEvent, ScrollView, View, NativeScrollEvent, useWindowDimensions } from \"react-native\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { Avatar, Text } from '@ui-kitten/components'\r\nimport { elevated, flex, fonts, paddView, row, sizes } from \"../style\";\r\nimport { ElevatedSection } from \"../components/Section\";\r\nimport { Tab, TabBar } from \"@ui-kitten/components\";\r\nimport { FavButton } from \"../components/AddButton\";\r\nimport { toDollarsAndCents, toPercent2 } from \"../utils/misc\";\r\nimport InteractiveChart from \"../components/InteractiveGraph\";\r\nimport { ButtonGroup } from \"../components/ButtonGroup\";\r\nimport { FeedPart } from \"./FeedScreen\";\r\nimport { RootStackScreenProps } from \"../navigation/pages\";\r\nimport { AppColors } from \"../constants/Colors\";\r\n\r\nconst periods: { [key: string]: number } = {\r\n    \"1D\": 1,\r\n    \"1W\": 5,\r\n    \"1M\": 20,\r\n    \"3M\": 60,\r\n    \"1Y\": 252,\r\n    \"2Y\": 252 * 2,\r\n    \"5Y\": 252 * 5,\r\n    \"Max\": 252 * 10\r\n}\r\nconst tabBarMargin = sizes.rem1;\r\n\r\nexport const CompanyScreen = (props: RootStackScreenProps<\"Company\">) => {\r\n\r\n    const [security, setSecurity] = useState<Interface.ISecurityGet>();\r\n    const [securityPrices, setSecurityPrices] = useState<{ x: string, y: number }[]>();\r\n    const { securityId } = props.route.params\r\n    const toast = useToast();\r\n    const [isFav, setIsFav] = useState(false);\r\n    const [description, setDescription] = useState<string>();\r\n    const [portPeriod, setPortPeriod] = useState(\"1Y\")\r\n    const [tab, setTab] = useState(0);\r\n    const scrollRef = useRef<FlatList>(null);\r\n    const translateHeaderY = useRef(new Animated.Value(0)).current;\r\n    /*\r\n    \r\n    let headerHeight =  sizes.rem0_5 * 3 +  fonts.small * 2 + \r\n                        sizes.rem0_5 * 3 + sizes.rem1 * 2 + fonts.small * 2 + ((9 / 16) * windowWidth) + sizes.rem0_5 + sizes.rem1 + 42 +\r\n                        ( Number(elevated.paddingVertical) + Number(elevated.marginBottom) + sizes.rem1 + fonts.large ) + (description ? 100 : 0) + sizes.rem1 + sizes.rem0_5\r\n    //const headerHeight = 680;\r\n    const minViewHeight = windowHeight - headerHeight;\r\n    const [collapsed, setCollapsed] = useState(false);\r\n    const [isMaxed, setIsMaxed] = useState(false);\r\n    const clampMax = headerHeight //- ( Number(elevated.paddingVertical) + Number(elevated.marginBottom) + sizes.rem1 + fonts.large ) ; \r\n    //console.log(clampMax);\r\n    const translation = translateHeaderY.interpolate({\r\n        inputRange: [0, clampMax],\r\n        outputRange: [0, -clampMax],\r\n        extrapolate: 'clamp',\r\n    });\r\n    \r\n    useEffect(() => {\r\n        translation.addListener((v: { value: number }) => {\r\n            const c = Math.abs(v.value + clampMax) < 40;\r\n            const isMaxed = -v.value === clampMax;\r\n            setCollapsed(c);\r\n            setIsMaxed(isMaxed);\r\n        });\r\n        return () => translation.removeAllListeners();\r\n    }, [translation, clampMax]);\r\n    */\r\n    useEffect(() => {\r\n        Api.Security.get(securityId)\r\n            .then((s) => {\r\n                setSecurity(s)\r\n                s.description ? setDescription(s.description.substring(0, 300) + '...') : '';\r\n                setIsFav(s.isOnQuickWatch || false)\r\n            })\r\n            .catch((ex) => toast.show(ex.message))\r\n        Api.Security.extensions.getPrices({ securityId: securityId, includeIntraday: false, includeHistorical: true })\r\n            .then((p) => {\r\n                const prices = p.historical.slice(p.historical.length - periods[portPeriod]).map((a: any) => {\r\n                    return { x: a.date, y: a.close }\r\n                })\r\n                setSecurityPrices(prices);\r\n\r\n            })\r\n            .catch((ex) => toast.show(ex.message))\r\n\r\n    }, [securityId, portPeriod])\r\n    const pxChange =  security?.price?.price || security?.price?.open ? (security?.price?.price - security?.price?.open) / security?.price?.open : 0\r\n    return <View style={flex}>\r\n        <Animated.FlatList\r\n            data={[\r\n                <View style={{ paddingTop: sizes.rem0_5, backgroundColor: AppColors.background, \r\n                    //transform: [{ translateY: translation }], \r\n                    alignItems: \"stretch\", width: \"100%\" }}>\r\n                    <View style={[\r\n                        //collapsed ? {display: 'none'} : {display: 'flex'}, \r\n                        { paddingHorizontal: sizes.rem1, backgroundColor: AppColors.background }]}>\r\n                        <ElevatedSection key={\"Company\"} title=\"\">\r\n                            <View style={[row, { marginVertical: sizes.rem0_5 }]}>\r\n                                <Avatar source={{ uri: security?.logo_url }} style={{ marginRight: sizes.rem0_5, overflow: 'visible', borderRadius: 5 }} shape={'square'} resizeMode={'cover'}  />\r\n                                <View style={flex}>\r\n                                    <Text>{security?.symbol}</Text>\r\n                                    <Text>{security?.company_name}</Text>\r\n                                </View>\r\n                                <View>\r\n                                    <FavButton height={24} width={24} isSelected={isFav}  onPress={() => {\r\n                                    if (security) {\r\n                                        Api.Security.extensions.quickadd({\r\n                                            add: !isFav,\r\n                                            ticker: security?.symbol\r\n                                        })\r\n                                        setIsFav(!isFav);\r\n                                    }\r\n                                }} />\r\n                                <View style={{flexDirection: 'row'}}>\r\n                                    <Text style={[pxChange ? pxChange >= 0 ? { color: 'green'} : {color: 'red'} : {} ,{marginRight: sizes.rem0_5}]}>{toPercent2(pxChange)}</Text>\r\n                                    <Text>{toDollarsAndCents(security?.price?.price)}</Text>\r\n                                </View>\r\n                                </View>\r\n                            </View>\r\n                            <View style={[row, { marginVertical: sizes.rem0_5 }]}>\r\n                                <Text style={flex} category={\"label\"}>Open</Text>\r\n                                <Text style={flex} category={\"c1\"}>{toDollarsAndCents(security?.price?.open)}</Text>\r\n                                <Text style={flex} category={\"label\"}>52 Wk High</Text>\r\n                                <Text style={flex} category={\"c1\"}>{toDollarsAndCents(security?.week_52_high)}</Text>\r\n                            </View>\r\n                            <View style={[row, { marginBottom: sizes.rem1 }]}>\r\n                                <Text style={flex} category={\"label\"}>Close</Text>\r\n                                <Text style={flex} category={\"c1\"}>{toDollarsAndCents(security?.price?.price)}</Text>\r\n                                <Text style={flex} category={\"label\"}>52 Wk Low</Text>\r\n                                <Text style={flex} category={\"c1\"}>{toDollarsAndCents(security?.week_52_low)}</Text>\r\n                            </View>\r\n                            <View style={{ marginBottom: sizes.rem1 }} >\r\n                                <InteractiveChart data={securityPrices} performance={false} />\r\n                            </View>\r\n\r\n                            <ButtonGroup key={\"period\"} \r\n                                items={[\"1D\", \"1W\", \"1M\", \"3M\", \"1Y\", \"5Y\", \"Max\"].map(v => ({ label: v, value: v }))} \r\n                                onValueChange={(v) => setPortPeriod(v)} \r\n                                value={portPeriod} \r\n                            />\r\n                            <Text numberOfLines={5} style={{}}>{description}</Text>\r\n                        </ElevatedSection >\r\n                    </View>\r\n                    <View style={[\r\n                        //collapsed ? {display: 'flex'} : {display: 'flex'},\r\n                        { paddingHorizontal: sizes.rem1, backgroundColor: AppColors.background }]}>\r\n                        <ElevatedSection title=\"\" style={{marginBottom: sizes.rem0_5}} >\r\n                            <TabBar\r\n                                key={\"company_tabBar\"}\r\n                                indicatorStyle={{\r\n                                    marginTop: 26,\r\n                                    marginHorizontal: 10\r\n                                }}\r\n                                style={{width: \"100%\", marginHorizontal: 0 }}\r\n                                selectedIndex={tab}\r\n                                onSelect={t => {\r\n                                    //setTab(t);\r\n                                }}>\r\n                                {[\"Posts\", \"Analysts\"].map(t => <Tab key={\"tab_id\" + t} style={{ marginTop: -4 }} title={t} />)}\r\n                            </TabBar>\r\n                        </ ElevatedSection>\r\n                    </View>\r\n                </View>,\r\n                <View style={[{ paddingHorizontal: 0 }]}>\r\n                    {security && <FeedPart searchText={`$${security?.symbol}`} />}\r\n                </View>\r\n            ]}\r\n            renderItem={(info) => {\r\n                return info.item;\r\n            }}\r\n            ref={scrollRef} contentContainerStyle={[{ paddingTop: 0 }]} nestedScrollEnabled\r\n            /*\r\n            onMomentumScrollEnd={(ev) => {\r\n                if (collapsed && !isMaxed) {\r\n                    scrollRef.current?.scrollToOffset({ offset: clampMax, animated: true });\r\n                    setIsMaxed(true);\r\n                }\r\n            }}\r\n            </View>\r\n            */\r\n            onScroll={Animated.event<NativeSyntheticEvent<NativeScrollEvent>>([\r\n                { nativeEvent: { contentOffset: { y: translateHeaderY } } }\r\n            ], { useNativeDriver: true })}\r\n            >\r\n        </Animated.FlatList>\r\n        \r\n    </View >\r\n\r\n\r\n}","import React, {useEffect, useLayoutEffect, useState} from \"react\";\r\nimport {Image, Text, Button, Animated, ImageBackground, useWindowDimensions, View, Alert, Platform} from \"react-native\";\r\nimport {TabScreenProps} from \"../navigation\";\r\nimport {ImageEditor} from 'expo-image-editor'\r\nimport {flex} from \"../style\";\r\nimport * as ImagePicker from 'expo-image-picker'\r\nimport {PrimaryButton} from \"../components/PrimaryButton\";\r\nimport {Api} from \"@tradingpost/common/api\";\r\nimport {manipulateAsync, SaveFormat} from 'expo-image-manipulator'\r\nimport {useAppUser} from '../Authentication';\r\nimport {useData} from '../lds';\r\n\r\n//import { ImageManipulator } from 'expo-image-crop'\r\n//const imageCrop = require('expo-image-crop')\r\n//const ImageManipulator = imageCrop.ImageManipulator;\r\n\r\nconsole.log(\"Loading IMAGE PICKER\")\r\nexport const ImagePickerScreen = (props: TabScreenProps<{ onComplete: (data: any) => void }>) => {\r\n    const {loginState, updateState} = useAppUser();\r\n    const appUser = loginState?.appUser;\r\n    console.log(\"Loading inside picker\")\r\n    const [imageUri, setImageUri] = useState<string>(),\r\n        [editorVisible, setEditorVisible] = useState(false),\r\n        [imageData, setImageData] = useState<{ uri: string }>();\r\n    // const pickImage = async () => {\r\n    //     // No permissions request is necessary for launching the image library\r\n    //     let result = await launchImageLibraryAsync({\r\n    //         mediaTypes: MediaTypeOptions.All,\r\n    //         allowsEditing: true,\r\n    //         aspect: [4, 3],\r\n    //         quality: 1,\r\n    //     });\r\n\r\n    //     console.log(result);\r\n\r\n    //     if (!result.cancelled) {\r\n    //         setImageUri(result.uri);\r\n    //     }\r\n    // };\r\n\r\n    const selectPhoto = async () => {\r\n        // Get the permission to access the camera roll\r\n        const response = await ImagePicker.requestMediaLibraryPermissionsAsync();\r\n        // If they said yes then launch the image picker\r\n        if (response.granted) {\r\n            const pickerResult = await ImagePicker.launchImageLibraryAsync({\r\n                base64: true\r\n            });\r\n            // Check they didn't cancel the picking\r\n            console.log(\"PHOTO HAS BEEN SELECTED\");\r\n            if (!pickerResult.cancelled) {\r\n                launchEditor(pickerResult.uri);\r\n            }\r\n        } else {\r\n            // If not then alert the user they need to enable it\r\n            Alert.alert(\r\n                \"Please enable camera roll permissions for this app in your settings.\"\r\n            );\r\n        }\r\n    };\r\n\r\n    const launchEditor = (uri: string) => {\r\n        console.log(\"WTF\")\r\n        // Then set the image uri\r\n        setImageUri(uri);\r\n        // And set the image editor to be visible\r\n        console.log(\"SHOWING EDITOR\");\r\n        setEditorVisible(true);\r\n    };\r\n\r\n    return <View style={flex}>\r\n        <Image\r\n            style={{height: 300, width: 300}}\r\n            source={{uri: imageData?.uri}}\r\n        />\r\n        <Button title=\"Select Photo\" onPress={() => selectPhoto()}/>\r\n\r\n        {imageData?.uri &&\r\n            <PrimaryButton onPress={async () => {\r\n                try {\r\n                    await Api.User.extensions.uploadProfilePic({\r\n                        image: imageData.uri\r\n                    })\r\n                    if (appUser)\r\n                        appUser.profile_url = imageData.uri;\r\n                    updateState();\r\n                    console.log(\"TRIGGERING\");\r\n                    props.navigation.goBack();\r\n                } catch (ex) {\r\n                    console.error(ex);\r\n                }\r\n\r\n            }}>Upload Photo</PrimaryButton>}\r\n\r\n        <ImageEditor\r\n            //asView={Platform.OS === \"web\"}\r\n            visible={editorVisible}\r\n            onCloseEditor={() => {\r\n                setEditorVisible(false)\r\n            }}\r\n            imageUri={imageUri}\r\n            fixedCropAspectRatio={1}\r\n            lockAspectRatio={true}\r\n            minimumCropDimensions={{\r\n                width: 100,\r\n                height: 100,\r\n            }}\r\n            onEditingComplete={(result) => {\r\n                (async () => {\r\n                    console.log(\"DONE EDITTINGS\")\r\n                    const resizeResult = await manipulateAsync(result.uri, [{\r\n                        resize: {\r\n                            height: 512\r\n                        }\r\n                    }], {\r\n                        base64: true,\r\n                        format: SaveFormat.JPEG\r\n                    })\r\n                    setImageData({\r\n                        uri: \"data:image/jpeg;base64,\" + resizeResult.base64\r\n                    });\r\n                })()\r\n            }}\r\n            mode=\"crop-only\"\r\n        />\r\n    </View>\r\n\r\n    // const [imageUri, setImageUri] = useState(\"'https://i.pinimg.com/originals/39/42/a1/3942a180299d5b9587c2aa8e09d91ecf.jpg'\")\r\n    // // useLayoutEffect(() => {\r\n    // //     requestMediaLibraryPermissionsAsync().then(async (r) => {\r\n    // //         if (r.granted) {\r\n    // //             const img = await launchImageLibraryAsync();\r\n    // //             setImageUri((img as ImageInfo).uri);\r\n    // //         }\r\n    // //         else {\r\n    // //             props.navigation.goBack();\r\n    // //         }\r\n    // //     });\r\n    // // }, [])\r\n    // const [isVisible, setIsVisisble] = useState(false);\r\n    // const { width, height } = useWindowDimensions();\r\n    // return <ImageBackground\r\n    //     resizeMode=\"contain\"\r\n    //     style={[flex, {\r\n    //         justifyContent: 'center', padding: 20, alignItems: 'center', height, width, backgroundColor: 'black',\r\n    //     }]}\r\n    //     source={{ uri: imageUri }}\r\n    // >\r\n    //     <Button title=\"Open Image Editor\" onPress={() => setIsVisisble(true)} />\r\n    //     <ImageManipulator\r\n    //         photo={{ uri: imageUri }}\r\n    //         isVisible={isVisible}\r\n    //         onPictureChoosed={(p: { uri: string }) => setImageUri(p.uri)}\r\n    //         onToggleModal={() => setIsVisisble(v => !v)}\r\n    //     />\r\n    // </ImageBackground>\r\n}\r\n\r\n","import {View, Text, ScrollView, Pressable} from \"react-native\";\r\nimport {Api} from \"@tradingpost/common/api\";\r\nimport {ListTradesResponse} from \"@tradingpost/common/api/entities/interfaces\";\r\nimport {ElevatedSection} from \"../components/Section\";\r\nimport {NavigationProp, useNavigation} from \"@react-navigation/native\";\r\nimport {Avatar, Icon, Layout} from \"@ui-kitten/components\"\r\nimport {List} from \"../components/List\";\r\nimport {flex, fonts, sizes} from \"../style\";\r\nimport {AppColors} from \"../constants/Colors\";\r\nimport React from \"react\";\r\n\r\nexport const NotificationTradeScreen = (props: any) => {\r\n    return (\r\n        <View style={{flex: 1, backgroundColor: \"#F7f8f8\"}}>\r\n            <View>\r\n                <Layout style={{\r\n                    backgroundColor: \"#ffffff\",\r\n                    paddingBottom: '2%',\r\n                    paddingTop: '2%',\r\n                    borderBottomColor: '#11146F',\r\n                    borderStyle: 'solid',\r\n                    borderBottomWidth: 2,\r\n                    marginBottom: 10\r\n                }}>\r\n                    <Text style={{\r\n                        margin: 2,\r\n                        textAlign: 'center',\r\n                        fontSize: 20,\r\n                        fontWeight: '600',\r\n                        color: '#11146F',\r\n                    }}>Trade Alerts</Text>\r\n                </Layout>\r\n                <List\r\n                    style={{\r\n                        marginTop: '0.25rem'\r\n                    }}\r\n                    key={\"STATIC\"}\r\n                    datasetKey={\"__________\"}\r\n                    getItemLayout={(items, index, sizeCache) => {\r\n                        const curItem = items?.[index];\r\n                        return typeof curItem === 'object' ? sizeCache[index] : {\r\n                            index,\r\n                            offset: sizeCache[index - 1].offset + sizeCache[index - 1].length,\r\n                            length: 10\r\n                        };\r\n                    }}\r\n                    data={async (allItems: any, page: number, sizeCache: any[]): Promise<ListTradesResponse[]> => {\r\n                        const trades = (await Api.Notification.extensions.listTrades({\r\n                            page\r\n                        }));\r\n\r\n                        const newTrades = [...(allItems || []), ...trades];\r\n                        newTrades.forEach((item, index) => {\r\n                            if (!sizeCache[index]) {\r\n                                sizeCache[index] = {\r\n                                    index,\r\n                                    offset: index ? sizeCache[index - 1].offset + sizeCache[index - 1].length : 0,\r\n                                    length: 0,\r\n                                }\r\n                            }\r\n                        });\r\n                        return newTrades;\r\n                    }}\r\n                    keyExtractor={(item: any, index: number) => typeof item === 'string' ? 'loadingtext' : (index + \"_\" + item._id)}\r\n                    preloadOffset={1}\r\n                    renderItem={(item) => {\r\n                        if (typeof item.item === 'string') {\r\n                            return <Text style={{textAlign: \"center\", fontSize: fonts.large}}>Loading More...</Text>\r\n                        }\r\n\r\n                        const dt = new Date(item.item.dateTime);\r\n                        const dtFmt = `${dt.getMonth()+1}/${dt.getDay()}/${dt.getFullYear() % 100}`\r\n\r\n                        switch (item.item.type) {\r\n\r\n                            case \"sell\":\r\n                                return <ElevatedSection title={\"\"} style={{paddingTop: '0.5rem', paddingBottom: '0.5rem', marginHorizontal: sizes.rem2/2, marginVertical: sizes.rem1/2,}}>\r\n                                    <View style={{marginBottom: -sizes.rem0_5}}>\r\n                                        <View style={{flexDirection: \"row\", width: \"100%\", marginBottom: sizes.rem0_5}}>\r\n                                            <View style={[flex, {marginLeft: sizes.rem0_5}]}>\r\n                                                <Pressable onPress={() => {\r\n                                                }}>\r\n                                                    <View style={{flex: 1}}>\r\n                                                        <View style={{\r\n                                                            flexDirection: 'row',\r\n                                                            justifyContent: \"space-between\"\r\n                                                        }}>\r\n                                                            <Text style={{width: '15%'}}>\r\n                                                                {dtFmt}\r\n                                                            </Text>\r\n                                                            <Text style={{width: '30%'}}>\r\n                                                                @{item.item.handle}\r\n                                                            </Text>\r\n                                                            <Text style={{color: \"#22DDAA\", fontWeight: \"bold\", width: '20%'}}>\r\n                                                                Bought\r\n                                                            </Text>\r\n                                                            <Text style={{width: '12%'}}>\r\n                                                                {item.item.symbol}\r\n                                                            </Text>\r\n                                                            <Text style={{width: '20%'}}>\r\n                                                                ${toTwoDecimals(item.item.price)}\r\n                                                            </Text>\r\n                                                            <View style={{width: '8%'}}>\r\n                                                                <Icon style={{ opacity: 1, height: 16, width: 32 }} name={\"file-text-outline\"}\r\n                                                                      fill={AppColors.primary}\r\n                                                                />\r\n                                                            </View>\r\n                                                        </View>\r\n                                                    </View>\r\n                                                </Pressable>\r\n                                            </View>\r\n                                        </View>\r\n                                    </View>\r\n                                </ElevatedSection>\r\n                            case \"buy\":\r\n                                return <ElevatedSection title={\"\"} style={{paddingTop: '0.5rem', paddingBottom: '0.5rem', marginHorizontal: sizes.rem2/2, marginVertical: sizes.rem1/2,}}>\r\n                                    <View style={{marginBottom: -sizes.rem0_5}}>\r\n                                        <View style={{flexDirection: \"row\", width: \"100%\", marginBottom: sizes.rem0_5}}>\r\n                                            <View style={[flex, {marginLeft: sizes.rem0_5}]}>\r\n                                                <Pressable onPress={() => {\r\n                                                }}>\r\n                                                    <View style={{flex: 1}}>\r\n                                                        <View style={{\r\n                                                            flexDirection: 'row',\r\n                                                            justifyContent: \"space-between\"\r\n                                                        }}>\r\n                                                            <Text style={{width: '15%'}}>\r\n                                                                {dtFmt}\r\n                                                            </Text>\r\n                                                            <Text style={{width: '30%'}}>\r\n                                                                @{item.item.handle}\r\n                                                            </Text>\r\n                                                            <Text style={{color: \"#F4452D\", fontWeight: \"bold\", width: '20%'}}>\r\n                                                                Closed\r\n                                                            </Text>\r\n                                                            <Text style={{width: '12%'}}>\r\n                                                                {item.item.symbol}\r\n                                                            </Text>\r\n                                                            <Text style={{width: '20%'}}>\r\n                                                                ${toTwoDecimals(item.item.price)}\r\n                                                            </Text>\r\n                                                            <View style={{width: '8%'}}>\r\n                                                                <Icon style={{ opacity: 1, height: 16, width: 32 }} name={\"file-text-outline\"}\r\n                                                                      fill={AppColors.primary}\r\n                                                                />\r\n                                                            </View>\r\n                                                        </View>\r\n                                                    </View>\r\n                                                </Pressable>\r\n                                            </View>\r\n                                        </View>\r\n                                    </View>\r\n                                </ElevatedSection>\r\n                            default:\r\n                                return <ElevatedSection title={\"\"} style={{marginHorizontal: sizes.rem2/2, marginVertical: sizes.rem1/2, paddingTop: '0.5rem', paddingBottom: '0.5rem'}}>\r\n                                    <View style={{marginBottom: -sizes.rem0_5}}>\r\n                                        <View style={{flexDirection: \"row\", width: \"100%\", marginBottom: sizes.rem0_5}}>\r\n                                            <View style={[flex, {marginLeft: sizes.rem0_5}]}>\r\n                                                <Pressable onPress={() => {\r\n                                                }}>\r\n                                                    <View style={{flex: 1}}>\r\n                                                        <View style={{\r\n                                                            flexDirection: 'row',\r\n                                                            justifyContent: \"space-between\"\r\n                                                        }}>\r\n                                                            <Text style={{width: '15%'}}>\r\n                                                                {dtFmt}\r\n                                                            </Text>\r\n                                                            <Text style={{width: '30%'}}>\r\n                                                                @{item.item.handle}\r\n                                                            </Text>\r\n                                                            <Text style={{fontWeight: \"bold\", width: '20%'}}>\r\n                                                                {toUpperCase(item.item.type)}\r\n                                                            </Text>\r\n                                                            <Text style={{width: '12%'}}>\r\n                                                                {item.item.symbol}\r\n                                                            </Text>\r\n                                                            <Text style={{width: '20%'}}>\r\n                                                                ${toTwoDecimals(item.item.price)}\r\n                                                            </Text>\r\n                                                            <View style={{width: '8%'}}>\r\n                                                                <Icon style={{ opacity: 1, height: 16, width: 32 }} name={\"file-text-outline\"}\r\n                                                                      fill={AppColors.primary}\r\n                                                                />\r\n                                                            </View>\r\n                                                        </View>\r\n                                                    </View>\r\n                                                </Pressable>\r\n                                            </View>\r\n                                        </View>\r\n                                    </View>\r\n                                </ElevatedSection>\r\n                        }\r\n                    }}\r\n                    noDataMessage={\"No Trades Available\"}\r\n                    loadingItem={\" \"}\r\n                />\r\n            </View>\r\n        </View>\r\n    )\r\n}\r\n\r\nconst toUpperCase = (ss: string) => {\r\n    const s = ss.trim().toLowerCase();\r\n    return s.charAt(0).toUpperCase() + s.slice(1);\r\n}\r\n\r\nconst toTwoDecimals = (ss: string): string => {\r\n    const f = parseFloat(ss);\r\n    return f.toFixed(2);\r\n}","//react-native-pell-rich-editor\r\nimport pell, { exec } from 'pell'\r\nimport React from 'react'\r\nimport { useRef } from 'react'\r\nimport { useEffect } from 'react'\r\nimport { MutableRefObject, PropsWithRef, useState } from 'react'\r\nimport './TextEditor.css'\r\n//import \"../css/pell.css\"\r\n// export const TextEditor = (props: {\r\n//     editorRef: MutableRefObject<any>\r\n// }) => {\r\n//     return <div ref={props.editorRef} />\r\n// }\r\n\r\n\r\n\r\n\r\nexport const TextEditor = (props: PropsWithRef<{\r\n    editorRef: MutableRefObject<any>,\r\n    html: string,\r\n    onChangeHtml: (text: string) => void\r\n}>) => {\r\n    const [html, setHtml] = useState(props.html)\r\n    const divRef = useRef<HTMLDivElement>(null);\r\n    useEffect(() => {\r\n        if (divRef.current) {\r\n            const editor = pell.init({\r\n                element: divRef.current,\r\n                onChange: (html: string) => {\r\n                    //(props.editorRef.current as HTMLDivElement).innerHTML = html;\r\n                    props.onChangeHtml(html);\r\n                    setHtml(html);\r\n\r\n                },\r\n                actions: ['bold',\r\n                    'underline',\r\n                    'olist',\r\n                    'ulist',\r\n                    'italic',\r\n                    {\r\n                        name: 'backColor',\r\n                        icon: '<div style=\"background-color:yellow;\">A</div>',\r\n                        title: 'Highlight Color',\r\n                        result: () => exec('backColor', 'pink')\r\n                    },\r\n                    // {\r\n                    //     name: 'image',\r\n                    //     result: () => {\r\n                    //         const url = window.prompt('Enter the image URL')\r\n                    //         if (url) exec('insertImage', url)\r\n                    //     }\r\n                    // },\r\n                    {\r\n                        name: 'link',\r\n                        result: () => {\r\n                            const url = window.prompt('Enter the link URL')\r\n                            if (url) exec('createLink', url)\r\n                        }\r\n                    }]\r\n            })\r\n            editor.content.innerHTML = html\r\n        }\r\n    }, []);\r\n\r\n\r\n    return <div placeholder='Test' style={{\r\n        backgroundColor: \"#fefefe\",\r\n        display: \"flex\",\r\n        flexGrow: 1,\r\n        flexDirection: \"column\"\r\n    }} className='pell-holder' ref={divRef}></div>\r\n}","import { Api } from \"@tradingpost/common/api\";\r\nimport React, { useRef, useState } from \"react\";\r\nimport { KeyboardAvoidingView, Platform, ScrollView, View } from \"react-native\";\r\nimport { RichEditor, RichToolbar } from \"react-native-pell-rich-editor\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { Header } from \"../components/Headers\";\r\nimport { Label } from \"../components/Label\";\r\nimport { ButtonPanel } from \"../components/ScrollWithButtons\";\r\nimport { TextEditor } from \"../components/TextEditor\";\r\nimport { TextField } from \"../components/TextField\";\r\nimport { Text } from \"@ui-kitten/components\";\r\nimport { ButtonGroup } from \"../components/ButtonGroup\";\r\n//import Navigation, {DashScreenProps, TabScreenProps} from \"../navigation\";\r\nimport { sizes, flex, fonts } from \"../style\";\r\nimport { bindTextInput, bindTextInputBase, useReadonlyEntity } from \"../utils/hooks\";\r\n\r\nexport const PostEditorScreen = (props: any) => {\r\n    const [subLevel, setSubLevel] = useState('standard')\r\n    const postEntity = useReadonlyEntity({\r\n        content: \"\",\r\n        title: \"\",\r\n        subscription_level: \"standard\",\r\n        height: 0,\r\n        width: 0,\r\n        photos: []\r\n    }),\r\n        [locked, setLocked] = useState(false),\r\n        editorRef = useRef<any>(null),\r\n        toast = useToast(),\r\n        [contentFocused, setContentFocused] = useState(false)\r\n\r\n    return <View style={{ backgroundColor: \"white\", flexGrow: 1 }}>\r\n        <Header text='+ New Post' style={{ marginBottom: 0, marginTop: 4, marginLeft: sizes.rem1, color: \"black\" }} />\r\n        <View style={{ width: '90%' }}>\r\n            <ButtonGroup\r\n                style={{ margin: sizes.rem1 }}\r\n                unselectedStyle={{\r\n                    backgroundColor: \"#35A265\",\r\n                }}\r\n                value={subLevel}\r\n                onValueChange={(value) => {\r\n                    setSubLevel(value);\r\n                    postEntity.update({ subscription_level: value })\r\n\r\n                }}\r\n                items={[{ label: \"Free\", value: \"standard\" }, { label: \"Premium\", value: \"premium\" }]} />\r\n        </View>\r\n        <View style={{ marginHorizontal: sizes.rem1, marginTop: sizes.rem1 }}>\r\n            <TextField\r\n                label='Post Title' placeholder='Add a title to your post'  {...bindTextInput(postEntity, \"title\", null)}\r\n                markRequired />\r\n        </View>\r\n        <View style={{ flex: 1, marginHorizontal: sizes.rem1 / 5 }}>\r\n            <ScrollView\r\n                onTouchEnd={(ev) => {\r\n                    if (!contentFocused) {\r\n                        editorRef.current?.focusContentEditor();\r\n                    }\r\n                }}\r\n                style={[flex, {}]}\r\n                contentContainerStyle={{ minHeight: \"100%\", maxHeight: \"100%\", height: \"100%\" }}>\r\n                <Text style={{ fontSize: fonts.medium, marginHorizontal: sizes.rem1, marginVertical: sizes.rem1 }}>Post</Text>\r\n                {Platform.OS === 'web' && <TextEditor html={postEntity.data.content} onChangeHtml={function (text: string): void {\r\n                    postEntity.update({\r\n                        \"content\": text\r\n                    })\r\n                }} />\r\n                }\r\n                {Platform.OS !== 'web' && <RichEditor\r\n                    onLayout={(event) => {\r\n                        postEntity.update({ height: event.nativeEvent.layout.width / event.nativeEvent.layout.height, width: event.nativeEvent.layout.width })\r\n                    }}\r\n                    onFocus={() => {\r\n                        setContentFocused(true)\r\n                    }} onBlur={() =>\r\n                        setContentFocused(false)} containerStyle={{ minHeight: 1 }}\r\n                    initialContentHTML={postEntity.data.content} ref={editorRef}\r\n                    placeholder={\"Add content to your post\"}\r\n                    {...bindTextInputBase(postEntity, \"content\", null, { \"onChangeTextKey\": \"onChange\" })} />}\r\n            </ScrollView>\r\n        </View>\r\n\r\n        {/* //TODO: add are you sure if dirty  */}\r\n        <KeyboardAvoidingView style={{ flex: 1 }} behavior={Platform.OS === \"ios\" ? \"padding\" : \"height\"}>\r\n            {Platform.OS !== \"web\" && <RichToolbar editor={editorRef} />}\r\n            <ButtonPanel\r\n\r\n                locked={locked}\r\n                left={{\r\n                    onPress: () => {\r\n                        props.navigation.goBack();\r\n                    },\r\n                    \"text\": \"Cancel\"\r\n                }}\r\n                right={{\r\n                    onPress: async () => {\r\n\r\n\r\n                        setLocked(true);\r\n                        if (!postEntity.data.content || !postEntity.data.title) {\r\n                            toast.show(\"Please provide a title and content for your post\");\r\n                            setLocked(false);\r\n                        } else {\r\n                            try {\r\n                                //const { id: postId } = \r\n                                await Api.Post.extensions.create(postEntity.data);\r\n                                // Navigation.pop(props.componentId);\r\n                                // const posts = await getPosts([postId]);\r\n                                // screens.push(props.componentId, \"Post\",\r\n                                //     { passProps: { post: posts[0] } });\r\n                                props.navigation.goBack();\r\n\r\n                            } catch (ex: any) {\r\n                                toast.show(ex.message);\r\n                                setLocked(false);\r\n                            }\r\n                        }\r\n                    }\r\n                    ,\r\n                    \"text\": \"Create\"\r\n                }}\r\n            />\r\n        </KeyboardAvoidingView>\r\n\r\n    </View>\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { RootStackParamList } from '../navigation/pages'\r\nimport { NavigationProp, useNavigation } from \"@react-navigation/native\"\r\nimport { Alert, Image, ImageBackground, Linking, PixelRatio, Platform, Pressable, ScrollView, StyleSheet, Text, TouchableOpacity, View } from 'react-native'\r\nimport { flex, fonts, paddView, row, shadow, sizes } from '../style'\r\nimport { Api, Interface } from '@tradingpost/common/api'\r\nimport { Header, Subheader } from './Headers'\r\nimport { useWindowDimensions } from 'react-native'\r\nimport { useAppUser } from '../Authentication'\r\nimport { toFormatedDateTime } from '../utils/misc'\r\nimport { ProfileButton } from './ProfileButton'\r\n\r\nconst commentTotalVerticalMargin = sizes.rem1;\r\nconst commentTotalHorizontalMargin = sizes.rem2;\r\nconst commentSidePad = sizes.rem2;\r\nconst commentTotalBorder = 2;\r\nconst spaceOnSide = commentTotalHorizontalMargin + commentTotalBorder + commentSidePad\r\n\r\nexport function CommentView(props: {comment: Interface.ICommentPlus}) {\r\n    const { comment } = props;\r\n    const { loginState } = useAppUser()\r\n    \r\n    const nav = useNavigation<NavigationProp<RootStackParamList>>();\r\n    \r\n    return <View style={[{marginVertical: sizes.rem0_5 / 2}, ]}>\r\n                <View style={[{alignItems: 'center'}, props.comment.user_id === loginState?.appUser?.id ? { flexDirection: 'row'} : { flexDirection: 'row-reverse'}]}>\r\n                    <Pressable\r\n                        onPress={() => {\r\n                            if (props.comment.user_id)\r\n                                nav.navigate(\"Profile\", {\r\n                                    userId: props.comment.user_id\r\n                                } as any);\r\n                        }} style={[row, {\r\n                            alignItems: \"center\",\r\n                            overflow: \"hidden\",\r\n                            //borderBottomColor: \"#ccc\",\r\n                            //borderBottomWidth: 1,\r\n                            padding: sizes.rem1 / 2\r\n                        }]}>\r\n                        {\r\n                            <ProfileButton userId={comment.user_id}\r\n                                profileUrl={comment.profile_url || \"\"} size={48} />\r\n                        }\r\n                    </Pressable>\r\n                    <View style={{width: '80%', paddingBottom: 6}}>\r\n                        <View style={[shadow, { backgroundColor: \"white\", borderRadius: sizes.borderRadius * 4, borderColor: \"#ccc\", borderWidth: commentTotalBorder / 2, justifyContent: 'center', minHeight: 48 }]}>\r\n                            {/*<View style={[flex, { borderBottomWidth: 1, borderBottomColor: \"#ccc\", padding: sizes.rem0_5 }]}>\r\n                            </View>*/}\r\n                            {/*<Text style={{fontWeight: '500',padding: sizes.rem0_5, borderBottomWidth: 1, borderBottomColor: '#ccc'}}>\r\n                                {`@${comment.handle}`}\r\n                            </Text>*/}\r\n                            <Text style={{padding: sizes.rem0_5, fontSize: 14}}>\r\n                                {comment.comment}\r\n                            </Text>\r\n                        </View>\r\n                    </View>\r\n                </View>\r\n                <Text style={[{fontSize: fonts.medium / 2 , paddingHorizontal: sizes.rem1, color: '#9D9D9D'},  props.comment.user_id === loginState?.appUser?.id ? {} : {textAlign: 'right'}]}>\r\n                    {`@${comment.handle}   ${toFormatedDateTime(String(comment.created_at))}`}\r\n                </Text>\r\n           </View>\r\n}","import { Interface } from \"@tradingpost/common/api\";\r\nimport { useState } from \"react\";\r\nimport { Text } from 'react-native'\r\nimport { DataOrQuery, List } from \"./List\";\r\nimport { fonts, sizes } from \"../style\";\r\nimport { CommentView } from \"./CommentView\";\r\nimport { Section } from \"./Section\";\r\nimport React from \"react\";\r\n\r\nexport function CommentsList(props: {comments: Interface.ICommentPlus[]}) {\r\n    \r\n    return (\r\n    <Section title=\"Comments\" style={{flex: 1, backgroundColor: 'transparent',marginHorizontal: sizes.rem1 }}>\r\n        <List \r\n            getItemLayout={(items, index, sizeCache) => {\r\n                const curItem = items?.[index];\r\n                const length = 20;\r\n                const output = typeof curItem === \"object\" ? \r\n                        (sizeCache[index] ? \r\n                            sizeCache[index] : \r\n                            {index, \r\n                            offset: length * index, \r\n                            length: length }) : \r\n                    {index, \r\n                    offset: sizeCache[index - 1].offset + sizeCache[index - 1].length, \r\n                    length: 40 };\r\n                return output;\r\n            }}\r\n            key={\"id\" + String(props.comments.length)}\r\n            datasetKey={\"___\"}\r\n            data={props.comments}\r\n            keyExtractor={(item, index) => typeof item === \"string\" ? \"loadingtext\" : (index + \"_\" + item.id)}\r\n            preloadOffset={2}\r\n            renderItem={(item) => {\r\n                \r\n                if (typeof item.item === \"string\") {\r\n                    return <Text style={{ textAlign: \"center\", fontSize: fonts.large }}>Loading More...</Text>\r\n                }\r\n                else {\r\n                    return <CommentView key={item.index + \"_\" + item.item.id} comment={item.item} />\r\n                }\r\n            }}\r\n            noDataMessage={\"No Comments Available\"}\r\n            loadingItem={\"  \"}\r\n            />\r\n    </Section>)\r\n}","import React, { useEffect, useState } from \"react\";\r\nimport { Keyboard, View } from \"react-native\";\r\n//import { DashProps } from \"../layouts/DashboardLayout\";\r\nimport { flex } from \"../style\";\r\nimport { CommentIcon, SendIcon } from \"../images\";\r\nimport { Input } from \"@ui-kitten/components\";\r\nimport { PostView } from \"../components/PostView\";\r\nimport { Api, Interface } from \"@tradingpost/common/api\";\r\nimport { CommentsList } from \"../components/CommentList\";\r\nimport { KeyboardAvoidingInput } from \"../components/KeyboardAvoidingInput\";\r\nimport { AwaitedReturn } from \"../utils/misc\";\r\nimport { RootStackScreenProps } from \"../navigation/pages\";\r\n\r\nexport function PostScreen(props: RootStackScreenProps<\"PostScreen\">) {\r\n    //https://m.tradingpostapp.com/post?\r\n\r\n\r\n    const [post, setPost] = useState(props.route.params.post);\r\n\r\n    useEffect(() => {\r\n        if (!post) {\r\n            //lookup posts \r\n            Api.Post.extensions.feed({\r\n                page: 0,\r\n                postId: props.route.params.id\r\n            }).then((r) => {\r\n                setPost(r[0]);\r\n            }).catch(ex => {\r\n                console.error(ex);\r\n            })\r\n\r\n        }\r\n    }, [props.route.params.id, post])\r\n\r\n\r\n    const [postCommments, setPostComments] = useState<AwaitedReturn<typeof Api.Comment.extensions.postList>>([]);\r\n    const [newComment, setNewComment] = useState('');\r\n    const [commentAdded, setCommentAdded] = useState(0);\r\n    useEffect(() => {\r\n        if (post) {\r\n            Api.Comment.extensions.postList({ type: \"post\", id: post._source.id })\r\n                .then((r) => {\r\n                    const data = r.sort((a, b) => {\r\n                        const diff = (new Date(String(a.created_at))).valueOf() - (new Date(String(b.created_at))).valueOf()\r\n                        return diff\r\n                    })\r\n                    setPostComments(data);\r\n                })\r\n        }\r\n    }, [post])\r\n    useEffect(() => {\r\n        if (post)\r\n            Api.Comment.extensions.postList({ type: \"post\", id: post._source.id })\r\n                .then((r) => {\r\n                    const data = r.sort((a, b) => {\r\n                        const diff = (new Date(String(a.created_at))).valueOf() - (new Date(String(b.created_at))).valueOf()\r\n                        return diff\r\n                    })\r\n                    setPostComments(data);\r\n                })\r\n    }, [commentAdded, post])\r\n\r\n    return (<View style={{ height: \"100%\" }}>\r\n        {post && <PostView\r\n            post={post} />}\r\n        <CommentsList\r\n            comments={postCommments ? postCommments : []} />\r\n        <KeyboardAvoidingInput\r\n            value={newComment}\r\n            placeholder={'Leave your comment'}\r\n            rightIcon={(props: any) => <SendIcon height={24}\r\n                width={24}\r\n                style={{ height: 24, width: 24, alignContent: 'center' }}\r\n            />\r\n            }\r\n            setValue={setNewComment}\r\n            displayButton={true}\r\n            numLines={1}\r\n            item_id={post?._source.id}\r\n            clicked={[commentAdded, setCommentAdded]}\r\n            onClick={(r: any, s: any, t: any) => {\r\n\r\n                if (r.length && post)\r\n                    Api.Comment.insert({ user_id: post._source.user.id, related_type: 'post', comment: r, related_id: t })\r\n                Keyboard.dismiss()\r\n                s('')\r\n            }}\r\n        />\r\n    </View>)\r\n\r\n}","import React from \"react\"\r\nimport { Table } from \"../components/Table\"\r\nimport { View } from 'react-native'\r\nimport { Text } from '@ui-kitten/components'\r\nimport { AllPages, TabScreenProps } from \"../navigation\"\r\nimport { NavigationProp, useNavigation } from \"@react-navigation/native\"\r\nimport { Link } from \"../components/Link\"\r\nimport { flex, paddView, paddViewWhite } from \"../style\"\r\nimport { ElevatedSection } from \"../components/Section\"\r\n\r\n\r\nexport function LimitedTable<T>(props: {\r\n    maxPage: number,\r\n    listKey: string,\r\n    title: string,\r\n    tableProps: Omit<Parameters<typeof Table<T>>[0], \"maxPage\">\r\n}) {\r\n    const nav = useNavigation();\r\n    return <View style={[{}]}>\r\n        <View>\r\n            <Table {...props.tableProps} listKey={props.listKey} maxPage={props.maxPage} />\r\n        </View>\r\n        <Link\r\n            style={{\r\n                marginLeft: \"auto\"\r\n            }}\r\n            onPress={() => {\r\n                nav.navigate(\"TableModal\", {\r\n                    tableProps: props.tableProps as any,\r\n                    title: props.title\r\n                })\r\n            }}>View All</Link>\r\n    </View>\r\n}\r\n\r\nexport function TableModalScreen<T>(props: TabScreenProps<{ title: string, tableProps: Parameters<typeof Table<T>>[0] }>) {\r\n    return (\r\n        props.route?.params?.tableProps ? \r\n        <View style={paddView}>\r\n            <ElevatedSection title={props.route.params.title} >\r\n                <Table {...props.route?.params?.tableProps} />\r\n            </ElevatedSection>\r\n        </View> : \r\n        <Text>Error</Text>\r\n        )\r\n}","import React, { useEffect, useState } from \"react\"\r\nimport { View } from \"react-native\"\r\nimport { useAppUser } from \"../Authentication\"\r\nimport { ElevatedSection } from \"../components/Section\"\r\nimport { Text } from '@ui-kitten/components'\r\nimport { RootStackScreenProps } from \"../navigation/pages\"\r\nimport { Link } from \"../components/Link\"\r\nimport { Api } from '@tradingpost/common/api'\r\nimport { ButtonPanel } from \"../components/ScrollWithButtons\"\r\nimport { paddView, sizes } from \"../style\"\r\nimport { useToast } from \"react-native-toast-notifications\"\r\nimport { useLinkTo } from \"@react-navigation/native\"\r\n\r\n\r\nexport const VerificationScreen = (props: RootStackScreenProps<\"VerifyAccount\">) => {\r\n    const { loginState, signIn } = useAppUser();\r\n    const verificationToken = props.route.params?.token;\r\n    const toast = useToast();\r\n    const linkTo = useLinkTo();\r\n    console.log(\"I'm on the verification screennnn....\")\r\n    const [imVerified, setImVerified] = useState(false);\r\n    useEffect(() => {\r\n        if (imVerified) {\r\n            if (loginState?.loginResult?.verified)\r\n                linkTo(\"/dash/feed\");\r\n            else {\r\n                toast.show(\"You account is still unverified. Please check your email for details.\")\r\n                setImVerified(false);\r\n            }\r\n        }\r\n    }, [imVerified, loginState?.loginResult])\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            if (verificationToken && !loginState?.appUser) {\r\n                if (loginState?.authToken) {\r\n                    try {\r\n                        console.log(\"SIGNING IN.....\");\r\n                        await signIn(\"\", loginState.authToken);\r\n                        setImVerified(true);\r\n\r\n                    } catch (ex: any) {\r\n                        console.log(ex.message);\r\n                    }\r\n                } else {\r\n                    console.log(\"I CANT FIND THE TOKEN.....\");\r\n                    props.navigation.replace(\"Root\", {});\r\n                }\r\n            }\r\n        })()\r\n    }, [\r\n        loginState?.authToken,\r\n        verificationToken, loginState?.appUser\r\n    ])\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n\r\n            if (verificationToken && loginState?.appUser) {\r\n                try {\r\n\r\n                    await Api.User.extensions.validateUser({\r\n                        verificationToken\r\n                    })\r\n                    if (loginState?.authToken)\r\n                        await signIn(\"\", loginState?.authToken);\r\n\r\n\r\n                } catch (ex: any) {\r\n                    toast.show(ex.message);\r\n                }\r\n            }\r\n        })()\r\n    }, [verificationToken, toast, loginState?.authToken, loginState?.appUser, imVerified])\r\n    return <View style={paddView}>\r\n        <ElevatedSection title=\"Verify Your Email\">\r\n            <Text style={{ textAlign: \"center\", paddingVertical: sizes.rem1 }}>{loginState?.appUser?.email}</Text>\r\n            <ButtonPanel\r\n                left={{\r\n                    onPress: async () => {\r\n                        if (loginState?.authToken)\r\n                            await signIn(\"\", loginState?.authToken);\r\n                        linkTo(\"/dash/feed\")\r\n                        //props.navigation.navigate(\"Dash\");\r\n                    },\r\n                    text: \"Skip\"\r\n                }}\r\n                right={{\r\n                    onPress: async () => {\r\n                        //try auth signin\r\n                        if (loginState?.authToken)\r\n                            await signIn(\"\", loginState?.authToken);\r\n                        setImVerified(true);\r\n                    },\r\n                    text: \"I'm Verified\"\r\n                }}\r\n            />\r\n            <Link\r\n                style={{ textAlign: \"center\", paddingVertical: sizes.rem1 }}\r\n                onPress={async () => {\r\n                    try {\r\n                        await Api.User.extensions.sendEmailValidation();\r\n                        toast.show(\"Verification Email has been sent\")\r\n                    } catch (ex: any) {\r\n                        console.log(ex.message);\r\n                    }\r\n                }}>[Resend Verification Email]</Link>\r\n            <Text>{props.route.params?.token}</Text>\r\n        </ElevatedSection>\r\n    </View>\r\n}","import React, { ReactNode } from \"react\";\r\nimport { View, ScrollView, FlatList } from \"react-native\";\r\nimport { AppColors } from \"../constants/Colors\";\r\n\r\nimport { flex } from \"../style\";\r\nimport { useIsKeyboardVisible } from \"../utils/hooks\";\r\nimport { PrimaryButton } from \"./PrimaryButton\";\r\nimport { SecondaryButton } from \"./SecondaryButton\";\r\n\r\nexport function VirtualListWithButtons(props: { children?: ReactNode, buttons?: ButtonPanelProps, fillHeight?: boolean }) {\r\n    const { isKeyboardVisible } = useIsKeyboardVisible();\r\n    const listChildren = props.children;\r\n    return <View style={[flex,]} >\r\n        <View style={[flex, { backgroundColor: AppColors.background }]} >\r\n            <FlatList nestedScrollEnabled contentContainerStyle={props.fillHeight ? { maxHeight: \"100%\", height: \"100%\"} : {}}\r\n                data={[\r\n                    <View style={[!isKeyboardVisible ? {display: 'flex'} : {display: 'none'}, { height: 0 }]} ></View>,\r\n                    <View>{listChildren}</View>\r\n                ]}\r\n                renderItem={(info) => {\r\n                    return info.item;\r\n                }}\r\n            >\r\n                {/* This is here to force layout of the content. Seems like a but with enxted scrollview content */}\r\n                \r\n                \r\n            </FlatList>\r\n        </View>\r\n        {props.buttons && <ButtonPanel {...props.buttons} />}\r\n    </View>\r\n}\r\n\r\nexport type ButtonPanelProps = {\r\n    locked?: boolean,\r\n    left?: {\r\n        text: string,\r\n        onPress: () => void\r\n    },\r\n    right: {\r\n        text: string,\r\n        onPress: () => void\r\n    }\r\n}\r\nexport function ButtonPanel(props: ButtonPanelProps) {\r\n    return <View style={[{ borderTopColor: \"#ccc\", borderTopWidth: 1, flexDirection: \"row\", \r\n    paddingTop: 8,\r\n     paddingBottom: 8, \r\n     \r\n     justifyContent: \"space-evenly\", zIndex: 1000 }]}>\r\n        {props.left && <SecondaryButton style={{ width: \"48%\" }} onPress={props.left.onPress} disabled={props.locked} >{props.left.text}</SecondaryButton>}\r\n        <PrimaryButton style={{ width: props.left ? \"48%\" : \"96%\" }} onPress={props.right.onPress} disabled={props.locked} >{props.right.text}</PrimaryButton>\r\n    </View>\r\n}\r\n","import { useNavigation } from \"@react-navigation/native\";\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { sleep } from \"@tradingpost/common/utils/sleep\";\r\nimport { Button, } from \"@ui-kitten/components\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { View, Text } from \"react-native\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { ButtonGroup } from \"../components/ButtonGroup\";\r\nimport { ScrollWithButtons } from \"../components/ScrollWithButtons\";\r\nimport { ElevatedSection, Section } from \"../components/Section\";\r\nimport { SwitchField } from \"../components/SwitchField\";\r\nimport { TextField } from \"../components/TextField\";\r\nimport { VirtualListWithButtons } from \"../components/VirtualListWithButtons\";\r\nimport { useWatchlistPicker, WatchlistPicker } from \"../components/WatchlistPicker\";\r\nimport { setValue } from \"../lds\";\r\nimport { DashScreenProps, TabScreenProps } from \"../navigation\";\r\nimport { flex, paddView, paddViewWhite, sizes } from \"../style\";\r\ntype WLTypes = \"public\" | \"primary\" | \"private\";\r\n\r\nexport const WatchlistEditorScreen = (props: TabScreenProps<{ watchlistId?: number }>) => {\r\n    const pickerProps = useWatchlistPicker();\r\n    const [name, setName] = useState(\"\");\r\n    const [note, setNote] = useState<string>();\r\n    const [type, setWatchlistType] = useState<WLTypes>(\"public\");\r\n\r\n    const watchlistId = props.route?.params?.watchlistId;\r\n    //TODO: HACK need to clean this u\r\n    const nav = useNavigation()\r\n    const [magic, setMagic] = useState(true);\r\n    const toast = useToast();\r\n    useEffect(() => {\r\n        (async ()=> {\r\n            const converter = pickerProps.symbolConverter.current;\r\n            if (watchlistId && converter){\r\n                if (watchlistId > 0) {\r\n                    Api.Watchlist.get(watchlistId).then((watchlist) => {\r\n                        //TODO: need to deal with settings for primary watchlist\r\n                        setName(watchlist.name);\r\n                        setWatchlistType(watchlist.type as WLTypes);\r\n                        setNote(watchlist.note);\r\n                        const selectedItems = converter(watchlist.items.map((s) => s.symbol));\r\n                        pickerProps.onSelectedItemschanged(selectedItems);\r\n    \r\n                        //TODO:: need to cache items notes since this is an delete and insert style update\r\n    \r\n                    }).catch((ex) => {\r\n                        toast.show(ex.message);\r\n                    })\r\n                }\r\n                else {\r\n                    setName(\"Primary Watchlists\")\r\n                    setWatchlistType(\"primary\");\r\n                }\r\n            }\r\n        })()\r\n        \r\n    }, [watchlistId, Boolean(pickerProps.symbolConverter.current)])\r\n\r\n\r\n    return <View style={paddView}>\r\n        <VirtualListWithButtons\r\n            buttons={{\r\n                right: {\r\n                    text: props.route?.params?.watchlistId ? \"Update Watchlist\" : \"Create Watchlist\",\r\n                    onPress: async () => {\r\n                        if (name && pickerProps.selectionConverter.current) {\r\n                            const items = pickerProps.selectionConverter.current(pickerProps.selectedItems);\r\n                            if (items.length < 2)\r\n                                toast.show(\"Please select at least 2 securities\");\r\n                            else {\r\n                                const watchlistData = {\r\n                                    items: items.map(i => ({\r\n                                        symbol: i.symbol,\r\n                                        date_added: new Date()\r\n                                    })),\r\n                                    name: name,\r\n                                    note,\r\n                                    type: type\r\n                                }\r\n\r\n                                if (props.route?.params?.watchlistId && props.route.params.watchlistId > 0) await Api.Watchlist.update(props.route.params.watchlistId, watchlistData)\r\n                                else await Api.Watchlist.insert(watchlistData)\r\n\r\n                                nav.goBack()\r\n                            }\r\n                        }\r\n                        else {\r\n                            toast.show(\"Please name your watchlist\");\r\n                        }\r\n                    }\r\n                }\r\n            }}>\r\n            <View>\r\n                {type !== \"primary\" &&\r\n                    <ElevatedSection title={(props.route?.params?.watchlistId ? \"Edit\" : \"Create\") + \" Watchlist\"} >\r\n                        <View style={{ flexDirection: \"column\", margin: sizes.rem0_5 }}>\r\n                            <ButtonGroup value={type} onValueChange={(value) => {\r\n                                setWatchlistType(value);\r\n                            }}\r\n                                items={[{ label: \"Public\", value: \"public\" }, { label: \"Private\", value: \"private\" }]}\r\n                            />\r\n                            <TextField value={name} onChangeText={(v) => setName(v || \"\")} placeholder=\"Watchlist Name\" style={{ marginBottom: sizes.rem0_5 }} />\r\n                            <TextField value={note} onChangeText={(v) => setNote(v || \"\")} placeholder=\"Watchlist Note\" style={{}} />\r\n                        </View>\r\n                    </ElevatedSection>\r\n                }\r\n                <ElevatedSection style={{ height: \"100%\" }} title={type === \"primary\" ? \"Quick Watchlist\" : \"Watchlist Securities\"}>\r\n                    <WatchlistPicker {...pickerProps} securitiesLoaded={() => {\r\n                        console.log(\"Securities are available...\");\r\n                        setMagic(m => !m)\r\n                    }} />\r\n                </ElevatedSection>\r\n            </View>\r\n        </VirtualListWithButtons>\r\n    </View >\r\n\r\n}\r\n","import { Api } from \"@tradingpost/common/api\";\r\nimport { AllWatchlists, IWatchlistGet, IWatchlistList } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport { Pressable, ScrollView, TextStyle, View } from \"react-native\";\r\nimport { AddButton, EditButton } from \"../components/AddButton\";\r\nimport { Avatar, Icon, Text } from '@ui-kitten/components'\r\nimport { ElevatedSection, Section, Subsection } from \"../components/Section\";\r\nimport { WatchlistItemRenderItem } from '../components/WatchlistItemRenderItem'\r\nimport { Table } from \"../components/Table\";\r\nimport { DataOrQuery } from '../components/List'\r\n//import { DashScreenProps, TabScreenProps } from \"../navigation\";\r\nimport { flex, fonts, paddView, sizes } from \"../style\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { NoteEditor, SecPressable, useMakeSecurityFields, useWatchlistItemColumns } from \"./WatchlistViewerScreen\";\r\nimport { AwaitedReturn, toDollarsAndCents, toPercent, toPercent2, toThousands } from \"../utils/misc\";\r\nimport { WatchlistSection } from \"../components/WatchlistSection\";\r\nimport Theme from '../theme-light.json'\r\nimport { FlatList } from \"react-native-gesture-handler\";\r\nimport { List } from \"../components/List\"\r\nimport { useFocusEffect, useNavigation } from \"@react-navigation/native\";\r\nimport { useSecuritiesList } from \"../SecurityList\";\r\nimport { Header } from \"../components/Headers\";\r\nimport { AppColors } from \"../constants/Colors\";\r\n\r\nexport const WatchlistScreen = (props: any) => {\r\n    const nav = useNavigation();\r\n    const [watchlists, setWatchlists] = useState<AllWatchlists>()\r\n    const [shownMap, setShownMap] = useState<Record<string, boolean>>({})\r\n    const [quickWatchlist, setQuickWatchlist] = useState<IWatchlistGet>()\r\n    const toast = useToast();//const [trades, setTrades] = useState<AwaitedReturn<typeof Api.User.extensions.getTrades>>();\r\n    const [focus, setFocus] = useState(false);\r\n    const scrollRef = useRef<FlatList>(null);\r\n    useFocusEffect(useCallback(()=> {\r\n        \r\n        (async () => {\r\n            try {\r\n                const lists = await Api.Watchlist.extensions.getAllWatchlists();\r\n\r\n                if (lists.quick.id) {\r\n                    setQuickWatchlist(await Api.Watchlist.get(lists.quick.id));\r\n                }\r\n                else {\r\n                    setQuickWatchlist({\r\n                        id: 0,\r\n                        items: [],\r\n                        name: \"\",\r\n                        saved_by_count: 0,\r\n                        type: \"primary\",\r\n                        user: [],\r\n                        is_saved: false\r\n                    })\r\n                }\r\n                setFocus((f) => !f)\r\n                setWatchlists(lists);\r\n\r\n            }\r\n            catch (ex: any) {\r\n                toast.show(ex.message);\r\n            }\r\n        })()\r\n        \r\n    },[]))\r\n\r\n    const { columns: watchlistItemColumns } = useWatchlistItemColumns(true)\r\n    const { securities: { bySymbol, byId } } = useSecuritiesList();\r\n    const hideEmptyNote = false;\r\n    return <View style={[paddView]}>\r\n        <FlatList\r\n            listKey=\"top_level_watchlist\"\r\n            data={[\r\n                <View>\r\n                    <View style={{flex: 1, flexDirection: 'row'}}>\r\n                        <Header key={\"quick_watch\"} text=\"Quick Watch\" style={{flex: 1}}/>\r\n                        <View style={{marginHorizontal: 6}}> \r\n                            {  \r\n                                watchlists?.quick.id ?\r\n                                    <EditButton\r\n                                        height={24}\r\n                                        width={24} \r\n                                        onPress={() => {\r\n                                            nav.navigate(\"WatchlistEditor\", {\r\n                                                watchlistId: watchlists?.quick.id\r\n                                            })\r\n                                    }} /> :\r\n                                    <AddButton\r\n                                        height={24}\r\n                                        width={24} \r\n                                        onPress={() => {\r\n                                            nav.navigate(\"WatchlistEditor\", {\r\n                                                watchlistId: -1\r\n                                            })\r\n                                    }} />\r\n                                }\r\n                        </View>\r\n                    </View>\r\n                \r\n                <List\r\n                    datasetKey={`${focus}`}\r\n                    listKey={`quick_watch_list${focus}`}\r\n                    loadingMessage={\" \"}\r\n                    noDataMessage={\" \"}\r\n                    loadingItem={undefined}\r\n                    numColumns={2}\r\n                    data={quickWatchlist?.items}\r\n                    renderItem={(item) => {                        \r\n                        return (\r\n                            <WatchlistItemRenderItem\r\n                                item={item}\r\n                                bySymbol={bySymbol}\r\n                                byId={byId}\r\n                                hideEmptyNote={hideEmptyNote}\r\n                                setShownMap={setShownMap}\r\n                                shownMap={shownMap}\r\n                                watchlist={quickWatchlist}\r\n                                    />\r\n                        )\r\n                    }}\r\n                />\r\n            </View>,\r\n            <WatchlistSection\r\n                datasetKey={`my_watchlist_${focus}`}\r\n                title=\"My Watchlists\"\r\n                key={`my_watchlist${focus}`}\r\n                watchlists={watchlists?.created}\r\n                showAddButton\r\n                hideNoteOnEmpty\r\n            />,\r\n            <WatchlistSection\r\n                datasetKey={`shared_watchlist_${focus}`}\r\n                title=\"Shared Watchlists\"\r\n                key={`shared_watchlist${focus}`}\r\n                watchlists={watchlists?.saved}\r\n                shared\r\n            />\r\n            ]}\r\n            renderItem={(info) => {\r\n                return info.item;\r\n            }}\r\n            ref={scrollRef} contentContainerStyle={[{ paddingTop: 0}]} nestedScrollEnabled         \r\n\r\n            >\r\n        </FlatList>\r\n    </View >\r\n\r\n}","import React, { useEffect, useState } from \"react\";\r\nimport { ScrollView, useWindowDimensions, View, Text } from \"react-native\";\r\nimport { Api, Interface } from \"@tradingpost/common/api\";\r\nimport { elevated, flex, fonts, paddView, sizes } from \"../style\";\r\nimport { ClimbingMountain, Studying, Debate, Analyze } from \"../images\";\r\nimport { AppColors } from \"../constants/Colors\";\r\nimport { ExitButton } from \"../components/AddButton\";\r\nimport { useLinkTo } from \"@react-navigation/native\";\r\nimport { useData } from \"../lds\";\r\nimport { SecondaryButton } from \"../components/SecondaryButton\";\r\n\r\nexport function AppInformationScreen(props: any) {\r\n    \r\n    const [sliderState, setSliderState] = useState({ currentPage: 0 });\r\n    let { width: widthOg, height } = useWindowDimensions();\r\n    let width = Math.min(widthOg, 680);\r\n    const { value: result, setValue: setResult } = useData('loginResult')\r\n    const linkTo = useLinkTo<any>();\r\n    const setSliderPage = (event: any) => {\r\n        const { currentPage } = sliderState;\r\n        const { x } = event.nativeEvent.contentOffset;\r\n        const indexOfNextScreen = Math.floor((x + 1) / width);\r\n        if (indexOfNextScreen !== currentPage) {\r\n            setSliderState({\r\n                ...sliderState,\r\n                currentPage: indexOfNextScreen,\r\n            });\r\n        }\r\n    };\r\n    const paragraphSize = height >= 760 ? fonts.medium : fonts.small\r\n    const { currentPage: pageIndex } = sliderState;\r\n\r\n    return <View>\r\n        <View style={{ zIndex: 1, position: 'absolute', top: 50, left: 10, flexDirection: 'row', alignItems: 'center' }}>\r\n            <ExitButton height={36} width={36} color={'#708090'} style={{ height: 36, width: 36, }}\r\n                onPress={() => {\r\n                    if (result) {\r\n                        if (result.verified)\r\n                            linkTo('/dash/feed')\r\n                        else\r\n                            linkTo('/verifyaccount');\r\n                    }\r\n                    else {\r\n                        linkTo('/login')\r\n                    }\r\n                }} />\r\n            <Text style={{ color: '#708090', marginLeft: 10 }}>{\"Exit Introduction\"}</Text>\r\n        </View>\r\n        <ScrollView\r\n          \r\n            horizontal={true}\r\n            scrollEventThrottle={16}\r\n            pagingEnabled={true}\r\n            showsHorizontalScrollIndicator={false}\r\n            onScroll={(event: any) => {\r\n                setSliderPage(event);\r\n            }}\r\n        >\r\n            <View style={{ width, height, justifyContent: 'space-between' }}>\r\n                <ClimbingMountain height={'45%'} width={'98%'} style={{ marginTop: '5%', marginHorizontal: '1%', height: '45%', width: '100%' }} />\r\n                <View style={[elevated, {\r\n                    marginHorizontal: sizes.rem1_5,\r\n                    height: '50%',\r\n                    justifyContent: 'flex-start',\r\n                    alignItems: 'center',\r\n                    paddingVertical: sizes.rem1\r\n                    //marginVertical: 30,\r\n                }]}>\r\n                    <View style={{ justifyContent: 'center', alignItems: 'center', height: 65, }}>\r\n                        <Text style={{ fontSize: fonts.large, fontFamily: 'K2D', textAlign: 'center', color: AppColors.primary }}>\r\n                            {\"Customized Feed\"}\r\n                        </Text>\r\n                    </View>\r\n\r\n                    <Text style={{ padding: sizes.rem1, fontSize: paragraphSize, fontFamily: 'K2D', textAlign: 'center', }}>\r\n                        {\"Stock market research from every corner of the internet, all in one place.\\n\\nContent from Twitter, Substack, Spotify and more curated for you based on stocks you own and are interested in.\"}\r\n                    </Text>\r\n                </View>\r\n            </View>\r\n            <View style={{ width, height, justifyContent: 'space-between' }}>\r\n                <Studying height={'37%'} width={'98%'} style={{ marginTop: '15%', marginHorizontal: '1%', height: '37%', width: '100%' }} />\r\n                <View style={[elevated, {\r\n                    marginHorizontal: sizes.rem1_5,\r\n                    height: '50%',\r\n                    justifyContent: 'flex-start',\r\n                    alignItems: 'center',\r\n                    paddingVertical: sizes.rem1\r\n                    //marginVertical: 30,\r\n                }]}>\r\n                    <View style={{ justifyContent: 'center', alignItems: 'center', height: 65, }}>\r\n                        <Text style={{ fontSize: fonts.large, fontFamily: 'K2D', textAlign: 'center', color: AppColors.primary }}>\r\n                            {\"Follow Expert\\nTraders and Investors\"}\r\n                        </Text>\r\n                    </View>\r\n                    <Text style={{ padding: sizes.rem1, fontSize: paragraphSize, fontFamily: 'K2D', textAlign: 'center', }}>\r\n                        {\"Subscribe to experts on the platform to learn how they invest and trade.\\n\\nGain access to articles, charts, trades, and watchlists so you can grow your skills and your wealth.\"}\r\n                    </Text>\r\n                </View>\r\n            </View>\r\n            <View style={{ width, height, justifyContent: 'space-between' }}>\r\n                <Debate height={'45%'} width={'98%'} style={{ marginTop: '0%', marginHorizontal: '1%', height: '45%', width: '100%' }} />\r\n                <View style={[elevated, {\r\n                    marginHorizontal: sizes.rem1_5,\r\n                    height: '50%',\r\n                    justifyContent: 'flex-start',\r\n                    alignItems: 'center',\r\n                    paddingVertical: sizes.rem1\r\n                    //marginVertical: 30,\r\n                }]}>\r\n                    <View style={{ justifyContent: 'center', alignItems: 'center', height: 65, }}>\r\n                        <Text style={{ fontSize: fonts.large, fontFamily: 'K2D', textAlign: 'center', color: AppColors.primary }}>\r\n                            {\"Connect Your\\nInvestment Accounts\"}\r\n                        </Text>\r\n                    </View>\r\n                    <Text style={{ padding: sizes.rem1, fontSize: paragraphSize, fontFamily: 'K2D', textAlign: 'center', }}>\r\n                        {\"Connect your portfolio to TradingPost and control who can view your articles, charts, trades, and watchlists.\\n\\nMake it public or share with friends and family.\"}\r\n                    </Text>\r\n                </View>\r\n            </View>\r\n            <View style={{ width, height, justifyContent: 'space-between' }}>\r\n                <Analyze height={'45%'} width={'100%'} style={{ marginTop: '5%', marginHorizontal: 2, height: '45%', width: '100%' }} />\r\n                <View style={[elevated, {\r\n                    marginHorizontal: sizes.rem1_5,\r\n                    height: '50%',\r\n                    justifyContent: 'flex-start',\r\n                    alignItems: 'center',\r\n                    paddingVertical: sizes.rem1\r\n                    //marginVertical: 30,\r\n                }]}>\r\n                    <View style={{ justifyContent: 'center', alignItems: 'center', height: 65, }}>\r\n                        <Text style={{ fontSize: fonts.large, fontFamily: 'K2D', textAlign: 'center', color: AppColors.primary }}>\r\n                            {\"Search for Content\\nthat Matters to You\"}\r\n                        </Text>\r\n                    </View>\r\n                    <Text style={{ padding: sizes.rem1, fontSize: paragraphSize, fontFamily: 'K2D', textAlign: 'center', }}>\r\n                        {\"Explore TradingPost's powerful search tool that utilizes cutting edge tech from industry leader ElasticSearch.\"}\r\n                    </Text>\r\n                    <SecondaryButton style={[result ? { display: 'none' } : { display: 'flex' }, { alignSelf: \"center\", width: \"65%\", height: '15%', marginTop: '8%' }]}\r\n                        onPress={() => {\r\n                            linkTo(\"/create/logininfo\");\r\n                        }}>\r\n                        {\"Create an Account\"}\r\n                    </SecondaryButton>\r\n                </View>\r\n            </View>\r\n        </ScrollView>\r\n        <View style={{\r\n            position: 'relative',\r\n            bottom: '10%',\r\n            left: 0,\r\n            right: 0,\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n            flexDirection: 'row',\r\n        }}\r\n        >\r\n            {Array.from(Array(4).keys()).map((key, index) => (\r\n                <View style={[{\r\n                    height: 10,\r\n                    width: 10,\r\n                    borderRadius: 10 / 2,\r\n                    backgroundColor: AppColors.secondary,\r\n                    marginLeft: 10,\r\n                    opacity: pageIndex === index ? 1 : 0.3\r\n                }]}\r\n                    key={index}\r\n                />\r\n            ))}\r\n        </View>\r\n    </View>\r\n}","import React, { useEffect, useState, useMemo, useRef } from \"react\"\r\nimport { View, Text, Animated, Pressable, Image } from \"react-native\"\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { openBrowserAsync } from 'expo-web-browser';\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { elevated, flex, fonts, paddView, paddViewWhite, row, sizes } from \"../style\"\r\nimport { ElevatedSection, Section, Subsection } from \"../components/Section\"\r\nimport { Bank, IBKR, RobinhoodLogo } from '../images'; \r\nimport { Header, Subheader } from \"../components/Headers\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\n\r\n\r\nexport function BrokeragePickerScreen() {\r\n    const nav = useNavigation();\r\n    const opacityAnim = useRef(new Animated.Value(0)).current;\r\n    const [accounts, setAccounts] = useState<Awaited<ReturnType<typeof Api.User.extensions.getBrokerageAccounts>>>()\r\n    const intervalRef = useRef<any>();\r\n\r\n    const openLink = async () => {\r\n        await Api.User.extensions.generateBrokerageLink(undefined).then(({ link }) => {\r\n            setLink(link)\r\n        })\r\n        const browserName = \"finicity_auth\";\r\n        await openBrowserAsync(brokerLink, { \"windowName\": browserName });\r\n        clearInterval(intervalRef.current);\r\n\r\n        intervalRef.current = setInterval(async () => {\r\n            console.log(\"WTF\");\r\n            if (await AsyncStorage.getItem(\"auth-finicity-code\")) {\r\n                console.log(\"CODE HAS BEEN FOUND\");\r\n                setAccounts(await Api.User.extensions.getBrokerageAccounts())\r\n            }\r\n        }, 5000)\r\n    }\r\n    //cleanup\r\n    useEffect(() => {\r\n        AsyncStorage.removeItem(\"auth-finicity-code\");\r\n        return () => {\r\n            clearInterval(intervalRef.current);\r\n            AsyncStorage.removeItem(\"auth-finicity-code\");\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n    const [brokerLink, setLink] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        Api.User.extensions.getBrokerageAccounts().then((r) => {\r\n            setAccounts(r);\r\n        })\r\n    }, [])\r\n\r\n\r\n    return (<View style={flex}>\r\n    <View style={[flex, {margin: sizes.rem1, justifyContent: 'center'}]}>\r\n        <View style={{marginBottom: 10}}>\r\n            <Header text=\"Choose your Brokerage\" />\r\n        </View>\r\n        <View style={{flex: 0.3, flexDirection: 'row'}}>\r\n            <Pressable style={{flex: 1}} onPress={()=> {\r\n               nav.navigate(\"IbkrInfo\")\r\n                }}>\r\n                <ElevatedSection style={{justifyContent: 'center', flex: 1, marginRight: sizes.rem1 / 2}} title=\"\">\r\n                    <Subheader text='Interactive Brokers' style={{ textAlign: 'center', marginBottom: 10, color: 'black'}} />\r\n                    <View style={{borderRadius: 20, overflow: 'hidden', aspectRatio: 1, height: '75%', justifyContent: 'center', alignSelf: 'center'}}>\r\n                        <IBKR style={{}}  height={\"100%\"} width={'100%'}/>\r\n                    </View>\r\n                </ElevatedSection>\r\n            </Pressable>\r\n            <Pressable style={{flex: 1 }} onPress={()=> {\r\n                nav.navigate(\"RobinhoodLogin\")\r\n            }}>\r\n                <ElevatedSection style={{justifyContent: 'center', flex: 1, marginLeft: sizes.rem1 / 2}} title=\"\">\r\n                    <Subheader text='Robinhood' style={{ textAlign: 'center', marginBottom: 10, color: 'black'}} />\r\n                    <View style={{borderRadius: 20, overflow: 'hidden', aspectRatio: 1, height: '75%', justifyContent: 'center', alignSelf: 'center'}}>\r\n                        <RobinhoodLogo style={{}}  height={\"100%\"} width={'100%'}/>\r\n                    </View>\r\n                </ElevatedSection>\r\n            </Pressable>\r\n        </View>\r\n        <View style={{ flex: 0.5}}>\r\n            <Pressable style={{flex: 1}} onPress={()=> {\r\n                openLink();\r\n            }}>\r\n                <ElevatedSection style={{justifyContent: 'center', flex: 0.5}} title=\"\">\r\n                    <Subheader text='All other brokerages' style={{ textAlign: 'center',marginBottom: 0,  color: 'black'}} />\r\n                    <Text style={{ textAlign: 'center', marginBottom: 10}}>\r\n                        {\"(Finicity, a Mastercard Company)\"}\r\n                    </Text>\r\n                    <Bank height={\"70%\"} />\r\n                </ElevatedSection>\r\n            </Pressable>\r\n        </View>\r\n        </View>\r\n    </View>)\r\n\r\n}","import React, {useEffect, useState, useMemo, useRef} from \"react\"\r\nimport {View, Animated, Pressable, Linking} from \"react-native\"\r\nimport {Api, Interface} from \"@tradingpost/common/api\"\r\n//import { LinkBrokerageComponent } from \"../components/LinkBrokerageComponent\";\r\nimport {elevated, flex, fonts, paddView, paddViewWhite, row, sizes} from \"../style\"\r\nimport {ElevatedSection, Section, Subsection} from \"../components/Section\"\r\nimport {Autocomplete, AutocompleteItem, Button, Icon, IndexPath, Text, Layout} from \"@ui-kitten/components\"\r\nimport {AddButton} from \"../components/AddButton\";\r\nimport {useIsKeyboardVisible, useReadonlyEntity} from \"../utils/hooks\";\r\nimport {ButtonPanel, ScrollWithButtons} from \"../components/ScrollWithButtons\";\r\nimport {getHivePool} from \"@tradingpost/common/db\";\r\nimport {IBKR} from \"../images\"\r\nimport {useNavigation} from \"@react-navigation/native\"\r\nimport {ScrollView} from \"react-native-gesture-handler\"\r\n\r\n\r\nexport function IbkrInfoScreen(props: any) {\r\n    const nav = useNavigation();\r\n    const [acText, setAcText] = useState('')\r\n    let [submittedText, setSubmittedText] = useState('')\r\n    //const [accountIds, setAccountIds] = useState<string[]>([]);\r\n\r\n    const accountIds = useReadonlyEntity<{ ids: string[] }>({\r\n        ids: []\r\n    })\r\n    useEffect(() => {\r\n        (async () => {\r\n            if (submittedText === '') {\r\n                return\r\n            }\r\n\r\n            accountIds.update({ids: [...accountIds.data.ids, submittedText]});\r\n            console.log('use effect')\r\n            console.log(accountIds)\r\n            setSubmittedText('')\r\n        })()\r\n\r\n    }, [submittedText])\r\n    const {isKeyboardVisible} = useIsKeyboardVisible();\r\n    return (\r\n\r\n        <View style={[flex, {margin: sizes.rem1}]}>\r\n            <View style={{\r\n                borderRadius: 20,\r\n                overflow: 'hidden',\r\n                aspectRatio: 1,\r\n                height: '15%',\r\n                justifyContent: 'center',\r\n                alignSelf: 'center'\r\n            }}>\r\n                <IBKR height={\"100%\"} width={'100%'}/>\r\n            </View>\r\n            <View style={{marginVertical: 20}}>\r\n                <Text>\r\n                    {instructions}\r\n                </Text>\r\n            </View>\r\n            <View>\r\n                <Autocomplete\r\n                    value={acText || \"\"}\r\n                    onChangeText={setAcText}\r\n                    placeholder=\"Account Ids\"\r\n                    placement=\"bottom\"\r\n                    onSubmitEditing={() => {\r\n                        console.log('button press')\r\n                        setSubmittedText(acText)\r\n                        setAcText('')\r\n\r\n                    }}\r\n\r\n                    accessoryRight={\r\n                        (props) => <AddButton\r\n                            onPress={() => {\r\n                                console.log('button press')\r\n                                setSubmittedText(acText)\r\n                                setAcText('')\r\n\r\n                            }}\r\n\r\n                            height={(props?.style as any)?.height * 1.5}\r\n                            width={(props?.style as any)?.width * 1.5}\r\n\r\n                        />\r\n                    }\r\n                >\r\n\r\n                </Autocomplete>\r\n            </View>\r\n            <View style={{\r\n                height: '20%',\r\n                borderWidth: 1,\r\n                borderColor: '#ccc',\r\n                marginVertical: sizes.rem0_5,\r\n                borderRadius: sizes.rem0_5\r\n            }}>\r\n                <ScrollView key={`view_id_${accountIds.data.ids.length}`}>\r\n                    {\r\n                        accountIds.data.ids.map((v, i) => <View key={`id_${i}`} style={{\r\n                            padding: sizes.rem0_5,\r\n                            flexDirection: \"row\"\r\n                        }}><Text style={{textAlign: \"left\", flex: 1}}>{v}</Text></View>)\r\n                    }\r\n                </ScrollView>\r\n            </View>\r\n\r\n            <View key='1' style={[isKeyboardVisible ? {height: 0} : {}, {position: 'absolute', bottom: 0}]}>\r\n                <Text style={{textAlign: 'left', fontSize: fonts.xSmall}}>\r\n                    {note}\r\n                </Text>\r\n                <Text style={{color: '#0000EE', marginVertical: 10, fontSize: fonts.xSmall}}\r\n                      onPress={() =>\r\n                          Linking.openURL('https://guides.interactivebrokers.com/ibrit/topics/reporting_integration_process.htm')}>\r\n                    {'IBKR Reporting Integration Process'}\r\n                </Text>\r\n                <ButtonPanel\r\n                    viewProps={{\r\n                        borderTopWidth: 0,\r\n                        flexDirection: \"row\",\r\n                        paddingTop: sizes.rem1,\r\n                        paddingBottom: 0,\r\n                        justifyContent: \"space-evenly\",\r\n                        zIndex: 1000\r\n                    }}\r\n                    left={{\r\n                        text: 'Go back',\r\n                        onPress: async () => {\r\n                            nav.goBack();\r\n                        }\r\n                    }}\r\n                    right={{\r\n                        text: 'Continue',\r\n                        onPress: async () => {\r\n                            try {\r\n                                if (!accountIds.data.ids.length) {\r\n                                    return\r\n                                }\r\n                                await Api.Brokerage.extensions.createIbkrAccounts({account_ids: accountIds.data.ids});\r\n                                const body = emailBody(accountIds.data.ids);\r\n                                Linking.openURL(`mailto:reportingintegration@interactivebrokers.com?subject=IBKR/TradingPost Reporting Integration&body=${body}`)\r\n                            } catch (e) {\r\n                                console.error(e);\r\n                            }\r\n                        }\r\n                    }}\r\n                />\r\n            </View>\r\n        </View>\r\n    )\r\n\r\n}\r\n\r\nconst emailBody = (accountIds: string[]) => {\r\n    return `To Whom It May Concern,\r\n\r\nI would like to integrate my Interactive Brokers reporting data with the TradingPost feed.\r\n\r\nI would like to include a historical position and transactions file.\r\n\r\nI would like to include the accounts under the below advisory account #:\r\n${accountIds.join('\\n')}\r\n\r\nBest,\r\n\r\n[Enter your legal name here]`\r\n}\r\n\r\nconst instructions = `In order to link your IBKR account to TradingPost, we need you to send an email to IBKR indicating that you would give TradingPost permission to reports on your historical positions and trades.\\n\\nPlease enter the Account IDs that you would like to link to TradingPost below. \\n\\nAfter entering them in, when you click \"Continue\" we will generate the necessary email for you to send to IBKR's Reporting Integration Team.`\r\n\r\nconst note = `Note:\r\nGranting us this access in no way gives us any authority over your account.\r\n\r\nYou can check out the below IBKR link if you have any concerns:`","import React, { useEffect, useState, useMemo, useRef } from \"react\"\r\nimport { View, Animated, Pressable, Linking } from \"react-native\"\r\nimport { ITextField, TextField } from '../components/TextField';\r\nimport { Api, Interface } from \"@tradingpost/common/api\"\r\nimport { sleep } from \"@tradingpost/common/utils/sleep\"\r\n//import { LinkBrokerageComponent } from \"../components/LinkBrokerageComponent\";\r\nimport { elevated, flex, fonts, paddView, paddViewWhite, row, sizes } from \"../style\"\r\nimport { ElevatedSection, Section, Subsection } from \"../components/Section\"\r\nimport { Autocomplete, AutocompleteItem, Button, Icon, IndexPath, Text, Layout, TabView, Tab } from \"@ui-kitten/components\"\r\nimport { AddButton } from \"../components/AddButton\";\r\nimport { useIsKeyboardVisible, useReadonlyEntity } from \"../utils/hooks\";\r\nimport { ButtonPanel, ScrollWithButtons } from \"../components/ScrollWithButtons\";\r\nimport { getHivePool } from \"@tradingpost/common/db\";\r\nimport { PrimaryButton } from \"../components/PrimaryButton\";\r\nimport { RobinhoodLogo } from '../images'; \r\nimport { Header, Subheader } from \"../components/Headers\";\r\nimport { SecondaryButton } from \"../components/SecondaryButton\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\nimport { RobinhoodLoginResponse, RobinhoodLoginStatus } from \"@tradingpost/common/api/entities/extensions/Brokerage\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { AppColors } from \"../constants/Colors\";\r\n\r\nexport function RobhinhoodLoginScreen(props: any) {\r\n    const nav = useNavigation();\r\n    const [username, setUsername] = useState<string>(''),\r\n        [password, setPassword] = useState<string>(''),\r\n        [multifactor, setMultifactor] = useState<string>(''),\r\n        [selectedIndex, setSelectedIndex] = useState(0),\r\n        [deviceToken, setDeviceToken] = useState<string>(''),\r\n        [challengeResponseId, setChallengeResponseId] = useState<string>(''),\r\n        toast = useToast();\r\n    useEffect(()=> {\r\n        if (selectedIndex === 2) {\r\n            (async () => {\r\n                console.log(challengeResponseId);\r\n                let counter = 0;\r\n                let response = await Api.Brokerage.extensions.hoodPing({requestId: challengeResponseId});\r\n                console.log(`initial response - ${response}`);\r\n                console.log(`logic check - ${response.challengeStatus !== 'redeemed' && response.challengeStatus !== 'validated' && counter < 24}`)\r\n                while (response.challengeStatus !== 'redeemed' && response.challengeStatus !== 'validated' && counter < 24) {\r\n                    response = await Api.Brokerage.extensions.hoodPing({requestId: challengeResponseId});\r\n                    counter += 1;\r\n                    await sleep(5000)\r\n                }\r\n                if (response.challengeStatus === 'redeemed' || response.challengeStatus === 'validated') {\r\n                    await Api.Brokerage.extensions.robinhoodLogin({username: username, password: password, mfaCode: null, challengeResponseId: challengeResponseId})\r\n                    toast.show(\"You've successfully linked your Robinhood account to TradingPost!\")\r\n                    nav.navigate('BrokeragePicker');\r\n                    \r\n                }\r\n                else {\r\n                    setSelectedIndex(0)\r\n                    toast.show(\"Login failed, please login again and make sure to go to the Robinhood app complete your multifactor authentication.\")\r\n                }\r\n                \r\n            })()\r\n        }\r\n\r\n    }, [selectedIndex])\r\n\r\n    \r\n    return (\r\n        <View style={paddView}>\r\n            <TabView\r\n                \r\n                selectedIndex={selectedIndex}\r\n                onSelect={index => setSelectedIndex(isNaN(index) ? 0 : index)}\r\n                style={{ width: \"100%\" }}\r\n                indicatorStyle={{ height: 0 }}\r\n                tabBarStyle={{ height: 0 }}\r\n            >\r\n                <Tab>\r\n                    <ElevatedSection title=\"\" style={{padding: sizes.rem1}}>\r\n                        <View style={{padding: sizes.rem1, borderRadius: 20, overflow: 'hidden', aspectRatio: 1, height: '40%', justifyContent: 'center', alignSelf: 'center'}}>\r\n                            <RobinhoodLogo style={{}}  height={\"100%\"} width={'100%'}/>\r\n                        </View>\r\n                        <View>\r\n                            <Header text=\"Robinhood Login\"/>\r\n                            <TextField\r\n                                //label=\"Robhinhood Username\" \r\n                                value={username}\r\n                                placeholder=\"Robinhood Username\"\r\n                                onChangeText={(name: string) => setUsername(name)}\r\n                                />\r\n                            <TextField\r\n                                //label=\"Robhinhood Password\" \r\n                                value={password}\r\n                                secureTextEntry\r\n                                placeholder=\"Robinhood Password\"\r\n                                onChangeText={(pass: string) => setPassword(pass)}\r\n                                />\r\n                        </View>\r\n                            <ButtonPanel\r\n                                viewProps={{borderTopWidth: 0,\r\n                                            flexDirection: \"row\", \r\n                                            paddingTop: sizes.rem1,\r\n                                            paddingBottom: 0,\r\n                                            justifyContent: \"space-evenly\", \r\n                                            zIndex: 1000\r\n                                        }}\r\n                                left={{\r\n                                    text: 'Go back',\r\n                                    onPress: async () => {\r\n                                        nav.goBack();\r\n                                    }\r\n                                }}\r\n                                right={{\r\n                                    text: 'Login',\r\n                                    onPress: async () => {\r\n                                        //Api call, on success go on to the MFA page\r\n                                        let initialLogin = {} as RobinhoodLoginResponse\r\n                                        if (!username || !password) {\r\n                                            toast.show('Please enter username and password')\r\n                                            return\r\n                                        }\r\n                                        else {\r\n                                            initialLogin = await Api.Brokerage.extensions.robinhoodLogin({username: username, password: password, mfaCode: null, challengeResponseId: null})\r\n                                            \r\n                                        }\r\n                                        if (initialLogin.status === 'MFA' as RobinhoodLoginStatus) {\r\n                                            setSelectedIndex(1);\r\n                                        }\r\n                                        else if (initialLogin.status === 'DEVICE_APPROVAL' as RobinhoodLoginStatus) {\r\n                                            setChallengeResponseId(initialLogin.challengeResponseId || '');\r\n                                            setSelectedIndex(2);\r\n                                        }\r\n                                        else if (initialLogin.status === 'ERROR' as RobinhoodLoginStatus) {\r\n                                            toast.show('Login failed, please re-enter username and password!')\r\n                                            setPassword('')\r\n                                            console.log('failed login!')\r\n                                        }\r\n                                        else if (initialLogin.status === 'SUCCESS' as RobinhoodLoginStatus) {\r\n                                            toast.show(`This Robinhood account is already connected to TradingPost!`)\r\n                                            setPassword('')\r\n                                        }\r\n                                    }\r\n                                }}\r\n                                />\r\n                    </ElevatedSection>\r\n                </Tab>\r\n                <Tab>\r\n                    <ElevatedSection title=\"\" style={{padding: sizes.rem1}}>\r\n                        <View style={{padding: sizes.rem1, borderRadius: 20, overflow: 'hidden', aspectRatio: 1, height: '40%', justifyContent: 'center', alignSelf: 'center'}}>\r\n                            <RobinhoodLogo style={{}}  height={\"100%\"} width={'100%'}/>\r\n                        </View>\r\n                        <Header text=\"Robinhood Multifactor Authentication\"/>\r\n                        <TextField\r\n                            //label=\"Robhinhood Password\" \r\n                            placeholder=\"Robinhood Multifactor Auth Code\"\r\n                            onChangeText={(mfa: string) => setMultifactor(mfa)}\r\n                        />\r\n                        <View style={{paddingVertical: sizes.rem1, alignItems: 'center'}}>\r\n                            <PrimaryButton \r\n                                style={{width: '50%'}}\r\n                                onPress={async () => {\r\n                                    //Api call, on success go on to the MFA page\r\n                                    const mfaLogin = await Api.Brokerage.extensions.robinhoodLogin({username: username, password: password, mfaCode: multifactor, challengeResponseId: null})\r\n                                    if (mfaLogin.status === 'SUCCESS' as RobinhoodLoginStatus) {\r\n                                        toast.show(\"You've successfully linked your Robinhood account to TradingPost!\")\r\n                                        nav.navigate('BrokeragePicker')\r\n                                    }\r\n                                    else if (mfaLogin.status === 'ERROR' as RobinhoodLoginStatus) {\r\n                                        toast.show(\"An error has occurred in connecting your Robinhood account to Tradingpost. Please try again!\")\r\n                                        setSelectedIndex(0)\r\n                                    }\r\n                                }}\r\n                            >\r\n                                Submit\r\n                            </PrimaryButton>\r\n                        </View>\r\n                       \r\n                    </ElevatedSection>\r\n                </Tab>\r\n                <Tab>\r\n                    <ElevatedSection title=\"Robinhood Multifactor Authentication\" style={{padding: sizes.rem1}}>\r\n                        <View>\r\n                            <Subheader text={'Please go to the Robinhood app and confirm that it is you logging into your account. Once you have done this, please click \"Confirmed\" below.'} \r\n                                       style={{color: 'black'}}\r\n                            />\r\n                            <PrimaryButton\r\n                                onPress={async ()=> {\r\n                                    let response = await Api.Brokerage.extensions.hoodPing({requestId: challengeResponseId});\r\n                                    if (response.challengeStatus === 'redeemed' || response.challengeStatus === 'validated') {\r\n                                        await Api.Brokerage.extensions.robinhoodLogin({username: username, password: password, mfaCode: null, challengeResponseId: challengeResponseId})\r\n                                        toast.show(\"You've successfully linked your Robinhood account to TradingPost!\")\r\n                                        nav.navigate('BrokeragePicker');\r\n                                        \r\n                                    }\r\n                                    else if (response.challengeStatus === 'issued') {\r\n                                        toast.show(\"Confirmation has not been received. Please go to the Robinhood app complete your multifactor authentication.\")\r\n                                    }\r\n                                    else {\r\n                                        setSelectedIndex(0)\r\n                                        toast.show(\"Login failed, please login again and make sure to go to the Robinhood app complete your multifactor authentication.\")\r\n                                    }\r\n                                }}>\r\n                                Confirmed\r\n                            </PrimaryButton>\r\n                        </View>\r\n                    </ElevatedSection>\r\n                </Tab>\r\n            </TabView>\r\n        </View>\r\n    )\r\n\r\n\r\n}","import React, { useEffect, useState, useRef, useCallback } from \"react\"\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { View } from \"react-native\"\r\nimport { useAppUser } from \"../Authentication\"\r\nimport { ElevatedSection } from \"../components/Section\"\r\nimport { Text } from '@ui-kitten/components'\r\nimport { RootStackScreenProps } from \"../navigation/pages\"\r\nimport { Link } from \"../components/Link\"\r\nimport { Api } from '@tradingpost/common/api'\r\nimport { ButtonPanel } from \"../components/ScrollWithButtons\"\r\nimport { paddView, sizes } from \"../style\"\r\nimport { useToast } from \"react-native-toast-notifications\"\r\nimport { useLinkTo, useNavigation } from \"@react-navigation/native\"\r\nimport { useTwitterAuth } from \"../utils/third-party/twitter\";\r\nimport { getCallBackUrl } from \"@tradingpost/common/api/entities/static/EntityApiBase\";\r\nimport { HtmlView } from \"../components/HtmlView\"\r\nimport * as tURL from \"url\";\r\nimport uuid from 'react-native-uuid';\r\n\r\nconst clientId = \"cm9mUHBhbVUxZzcyVGJNX0xrc2E6MTpjaQ\";\r\nconst platform = \"twitter\",\r\n    redirectUriText = `${getCallBackUrl()}/auth/${platform}`,\r\n    redirectUri = new URL(redirectUriText),\r\n    authUrlText = \"https://twitter.com/i/oauth2/authorize\"\r\n\r\nexport const TwitterAuthWebViewScreen = (props?: any) => {\r\n    let intervalHandler = useRef<any>()\r\n    const { loginState, signIn, signOut } = useAppUser()\r\n    const toast = useToast();\r\n    const nav = useNavigation()\r\n    const linkTo = useLinkTo<any>();\r\n    const state = useRef<string>(uuid.v4() as string);\r\n\r\n    \r\n    const _challenge = Math.random().toString().substring(2, 10);\r\n    const authUrl = new URL(authUrlText);\r\n    authUrl.searchParams.append(\"response_type\", \"code\");\r\n    authUrl.searchParams.append(\"client_id\", clientId);\r\n    authUrl.searchParams.append(\"redirect_uri\", redirectUriText);\r\n    authUrl.searchParams.append(\"state\", state.current);\r\n    authUrl.searchParams.append(\"scope\", \"users.read tweet.read offline.access\");\r\n    authUrl.searchParams.append(\"code_challenge\", _challenge);\r\n    authUrl.searchParams.append(\"code_challenge_method\", \"plain\");\r\n\r\n    \r\n    return <View style={paddView}>\r\n        <HtmlView isUrl={true} allowFileAccess={true} \r\n            onNavigationStateChange={(e: any) => {\r\n                if (e.url !== undefined) {\r\n                    const url = tURL.parse(e.url, true);\r\n                    const baseURL = 'https://' + (url.hostname || '') + (url.pathname || '') \r\n                    if (baseURL === redirectUriText && url.path) {\r\n                        //AsyncStorage.setItem(`auth-${platform}-code`, String(url.query.code));\r\n                        const code = String(url.query.code);\r\n                        Api.User.extensions.linkSocialAccount({ callbackUrl: getCallBackUrl(), platform, code, challenge: _challenge})\r\n                            .then((handle) => {\r\n                                if (props?.route?.params) {\r\n                                    toast.show(`You've successfully claimed your Twitter account!`)\r\n                                    linkTo('/create/addclaims')\r\n                                } else nav.navigate('AccountInformation', {newTwitterHandle: handle})\r\n                            })\r\n                            .catch((err) => {\r\n                                toast.show('This Twitter account has already been claimed! If you think this is a mistake, please reach out to help@tradingpostapp.com.')\r\n                                if (props?.route?.params) linkTo('/create/addclaims')\r\n                                else nav.navigate('AccountInformation')\r\n                            })\r\n                    }\r\n                }\r\n            }} \r\n        >\r\n            {String(authUrl)}\r\n        </HtmlView>\r\n    </View>\r\n}","import { useEffect, useRef, useState } from \"react\"\r\nimport { View, Text, Pressable } from \"react-native\"\r\nimport { List } from \"../components/List\"\r\nimport { ElevatedSection } from \"../components/Section\"\r\nimport { flex, paddView } from \"../style\"\r\nimport { Api, Interface } from '@tradingpost/common/api'\r\nimport { ProfileButton } from \"../components/ProfileButton\"\r\nimport { useToast } from \"react-native-toast-notifications\"\r\nimport { IUserList } from \"@tradingpost/common/api/entities/interfaces\"\r\n\r\nexport const BlockScreen = () => {\r\n    const [blockedUsers, setBlockedUsers] = useState<Interface.IUserList[]>()\r\n    useEffect(() => {\r\n        if (!blockedUsers)\r\n            Api.User.extensions.getBlocked().then((blockedUsers) => {\r\n                setBlockedUsers(blockedUsers)\r\n            })\r\n    }, [blockedUsers])\r\n    const toast = useToast();\r\n    const currentRef = useRef<string>()\r\n    return <View style={[paddView]}>\r\n        <ElevatedSection title=\"Blocked Users\" style={flex}>\r\n            <List\r\n                data={blockedUsers}\r\n                loadingItem={\"\"}\r\n                renderItem={(u) => {\r\n                    return typeof u.item === \"string\" ? <Text>Loading</Text> : <Pressable\r\n                        onPress={() => {\r\n                            if (currentRef.current !== (u.item as IUserList).id) {\r\n                                currentRef.current = (u.item as IUserList).id;\r\n                                toast.show(`Tap again to unblock ${(u.item as IUserList).handle}`)\r\n                                setTimeout(() => {\r\n                                    currentRef.current = undefined;\r\n                                }, 3000)\r\n                            }\r\n                            else {\r\n                                const id = currentRef.current;\r\n                                currentRef.current = undefined;\r\n                                Api.User.extensions.setBlocked({\r\n                                    userId: id || \"\",\r\n                                    block: false\r\n                                }).then(() => {\r\n                                    setBlockedUsers(undefined);\r\n                                })\r\n                            }\r\n                        }}\r\n                        style={{ flexDirection: \"row\" }}>\r\n                        <ProfileButton userId={u.item.id} profileUrl={u.item.profile_url || \"\"} size={32} />\r\n                        <View>\r\n                            <Text>{u.item.display_name || \"No Display Name\"}</Text>\r\n                            <Text>{u.item.handle}</Text>\r\n                        </View>\r\n                    </Pressable>\r\n                }}\r\n            />\r\n        </ElevatedSection>\r\n\r\n    </View>\r\n}","import { createNativeStackNavigator } from \"@react-navigation/native-stack\";\r\nimport { useState } from \"react\";\r\nimport { Keyboard, Pressable, View } from \"react-native\";\r\nimport { AppTitle } from \"../images\";\r\nimport CreateAccountScreen from \"../screens/CreateAccountScreen\";\r\nimport NotFoundScreen from \"../screens/NotFoundScreen\";\r\nimport { ProfileScreen } from \"../screens/ProfileScreen\";\r\nimport WelcomeScreen from \"../screens/WelcomeScreen\";\r\nimport { sizes } from \"../style\";\r\nimport { DrawerPart } from \"./DrawerNavigator\";\r\nimport { RootStackParamList } from \"./pages\";\r\nimport { AccountSettingsScreen } from \"../screens/AccountSettingsScreen\"\r\nimport { AccountInfoScreen } from \"../screens/AccountInfoScreen\";\r\nimport { AuthScreen } from \"../screens/AuthScreen\"\r\nimport { ChangePasswordScreen } from \"../screens/ChangePasswordScreen\"\r\nimport { CompanyScreen } from \"../screens/CompanyScreen\"\r\nimport { ImagePickerScreen } from \"../screens/ImagePicker\"\r\nimport { NotificationTradeScreen } from \"../screens/NotificationTradeScreen\"\r\nimport { PostEditorScreen } from \"../screens/PostEditorScreen\"\r\nimport { PostScreen } from \"../screens/PostScreen\"\r\nimport { SubscriptionScreen, SubscriptionSettingsScreen } from \"../screens/SubscriptionScreen\"\r\nimport { TableModalScreen } from \"../screens/TableModalScreen\"\r\nimport { BlockListModalScreen } from \"../screens/BlockListModalScreen\";\r\nimport { VerificationScreen } from \"../screens/VerificationScreen\"\r\nimport { WatchlistEditorScreen } from \"../screens/WatchlistEditorScreen\"\r\nimport { WatchlistScreen } from \"../screens/WatchlistScreen\"\r\nimport { WatchlistViewerScreen } from \"../screens/WatchlistViewerScreen\"\r\nimport { AppInformationScreen } from \"../screens/AppInformationScreen\";\r\nimport * as Notifications from 'expo-notifications';\r\nimport { useIsKeyboardVisible } from \"../utils/hooks\";\r\nimport { IconifyIcon } from \"../components/IconfiyIcon\";\r\nimport KeyboardClose from '../assets/@iconify/keyboard-close'\r\nimport { useAppUser } from \"../Authentication\";\r\nimport { Log } from \"../utils/logger\";\r\nimport { BrokeragePickerScreen } from \"../screens/BrokeragePickerScreen\";\r\nimport { IbkrInfoScreen } from \"../screens/IbkrInfoScreen\";\r\nimport { RobhinhoodLoginScreen } from \"../screens/RobinhoodLoginScreen\";\r\nimport { TwitterAuthWebViewScreen } from \"../screens/TwitterAuthSceen\";\r\nimport { ExtendedMenuModal } from \"../components/ExtendedMenuModal\";\r\nimport { Icon } from \"@ui-kitten/components\";\r\nimport { BlockScreen } from '../screens/BlockListScreen'\r\nimport { useRoute } from \"@react-navigation/native\";\r\n\r\nNotifications.setNotificationHandler({\r\n    handleNotification: async () => ({\r\n        shouldShowAlert: true,\r\n        shouldPlaySound: false,\r\n        shouldSetBadge: false\r\n    }),\r\n});\r\n\r\nexport const Stack = createNativeStackNavigator<RootStackParamList>();\r\n\r\nexport const useInitialRoute = () => {\r\n    let { loginState } = useAppUser();\r\n    let initialRoute: keyof RootStackParamList;\r\n    if (loginState?.appUser)\r\n        //TODO: Should refactor this so that it is more related... settings + settings.analyst + analyst_profile\r\n        if (loginState.setupStatus?.needsAnalystSettings || loginState.setupStatus?.needsSettings)\r\n            initialRoute = \"Create\"\r\n        else if (!loginState.loginResult?.verified)\r\n            initialRoute = \"VerifyAccount\"\r\n        else\r\n            initialRoute = \"Dash\"\r\n    else if (loginState?.loginResult)\r\n        initialRoute = \"Create\"\r\n\r\n    else\r\n        initialRoute = \"Root\"\r\n\r\n    Log.verbose(`Initial Route Is : '${initialRoute}'`);\r\n    return initialRoute;\r\n}\r\n\r\nexport function RootNavigator() {\r\n    console.log(\"Running Root Navigation\");\r\n    return <Stack.Navigator\r\n        initialRouteName={useInitialRoute()}\r\n        screenOptions={{\r\n            headerTitle: () => <AppTitle height={\"100%\"}\r\n                style={{ marginTop: sizes.rem0_5, height: sizes.rem2, aspectRatio: 5.77 }}\r\n            />,\r\n            headerTitleAlign: \"center\",\r\n            headerBackVisible: false,\r\n            headerRight: () => {\r\n                const { isKeyboardVisible } = useIsKeyboardVisible();\r\n                if (isKeyboardVisible) {\r\n                    return <Pressable\r\n                        onPress={() => {\r\n                            Keyboard.dismiss();\r\n                        }}\r\n                    ><IconifyIcon\r\n                            currentColor=\"black\"\r\n                            icon={KeyboardClose}\r\n                            svgProps={{\r\n                                height: 24,\r\n                                width: 24,\r\n                            }}\r\n                            style={{\r\n                                height: 24,\r\n                                width: 24,\r\n                                marginRight: sizes.rem1\r\n                            }} />\r\n                    </Pressable>\r\n                }\r\n                // else if () {\r\n\r\n                // }\r\n                else return undefined;\r\n            }\r\n        }}>\r\n        <Stack.Screen name=\"Root\" component={WelcomeScreen} options={{ headerShown: false }} />\r\n        <Stack.Screen name=\"Create\" component={CreateAccountScreen}\r\n            options={{ headerShown: false, headerBackVisible: false }} />\r\n        <Stack.Screen name=\"Dash\" component={DrawerPart} options={{\r\n            headerShown: false,\r\n        }} />\r\n        <Stack.Screen name=\"NotFound\" component={NotFoundScreen} options={{ title: 'Oops!' }} />\r\n        <Stack.Group screenOptions={{\r\n            headerBackVisible: true,\r\n        }}>\r\n            <Stack.Screen name=\"ResetPassword\" component={ChangePasswordScreen} />\r\n            <Stack.Screen name=\"VerifyAccount\" component={VerificationScreen} />\r\n            <Stack.Screen name=\"Auth\" component={AuthScreen} />\r\n            <Stack.Screen name=\"Subscription\" component={SubscriptionScreen} />\r\n            <Stack.Screen name=\"AccountSettings\" component={AccountSettingsScreen} />\r\n            <Stack.Screen name=\"AccountInformation\" component={AccountInfoScreen} />\r\n            <Stack.Screen name=\"AppInformation\" component={AppInformationScreen} options={{ headerShown: false }} />\r\n            <Stack.Screen name=\"SubscriptionSettings\" component={SubscriptionSettingsScreen} />\r\n            <Stack.Screen name=\"WatchlistEditor\" component={WatchlistEditorScreen} />\r\n            <Stack.Screen name=\"PostScreen\" component={PostScreen} />\r\n            <Stack.Screen name=\"PostEditor\" component={PostEditorScreen} />\r\n            <Stack.Screen name=\"WatchlistViewer\" component={WatchlistViewerScreen} />\r\n            <Stack.Screen name=\"Watchlist\" component={WatchlistScreen} />\r\n            <Stack.Screen name=\"ImagePicker\" component={ImagePickerScreen} />\r\n            <Stack.Screen name=\"Company\" component={CompanyScreen} />\r\n            <Stack.Screen name=\"TableModal\" component={TableModalScreen} />\r\n            <Stack.Screen name=\"BlockListModal\" component={BlockListModalScreen} />\r\n            <Stack.Screen name=\"NotificationTrade\" component={NotificationTradeScreen} />\r\n            <Stack.Screen name=\"BrokeragePicker\" component={BrokeragePickerScreen} />\r\n            <Stack.Screen name=\"IbkrInfo\" component={IbkrInfoScreen} />\r\n            <Stack.Screen name=\"RobinhoodLogin\" component={RobhinhoodLoginScreen} />\r\n            <Stack.Screen name=\"BlockedUsers\" component={BlockScreen} />\r\n            <Stack.Screen name=\"TwitterAuthWebView\" component={TwitterAuthWebViewScreen} options={{ headerShown: false }} />\r\n        </Stack.Group>\r\n        <Stack.Group screenOptions={{\r\n            headerStyle: {\r\n                backgroundColor: \"transparent\"\r\n            },\r\n            headerBackVisible: true,\r\n            headerTintColor: \"white\",\r\n            headerBackground: () => <View></View>,\r\n            headerTitle: \"\",\r\n            contentStyle: {\r\n                marginTop: -64\r\n            }\r\n        }}>\r\n            <Stack.Screen options={{\r\n                headerRight: () => {\r\n                    const route = useRoute();\r\n                    // const buildLink = useLinkBuilder()\r\n                    // const url = buildLink(route.name, route.params);\r\n                    const [modalVisible, setModalVisible] = useState(false);\r\n                    return <Pressable\r\n                        onPress={() => {\r\n                            setModalVisible(true);\r\n                        }}\r\n                    >\r\n                        <ExtendedMenuModal userId={(route.params as any)?.userId || \"\"} onShouldClose={(blocked) => {\r\n                            setModalVisible(false);\r\n                        }} visible={modalVisible} />\r\n                        <Icon style={{ marginRight: 8, height: 32, width: 32, }} fill=\"white\" name=\"more-horizontal\" />\r\n                    </Pressable>\r\n                }\r\n            }} name=\"Profile\" component={ProfileScreen} />\r\n        </Stack.Group>\r\n    </Stack.Navigator>\r\n}\r\n\r\n\r\n\r\n\r\n","/**\r\n * If you are not familiar with React Navigation, refer to the \"Fundamentals\" guide:\r\n * https://reactnavigation.org/docs/getting-started\r\n *\r\n */\r\n\r\nimport {\r\n  getFocusedRouteNameFromRoute,\r\n  NavigationContainer,\r\n  DefaultTheme,\r\n  DarkTheme,\r\n  NavigationProp,\r\n  useNavigationState\r\n} from '@react-navigation/native';\r\nimport { createNativeStackNavigator } from '@react-navigation/native-stack';\r\n\r\nimport { createDrawerNavigator } from '@react-navigation/drawer';\r\nimport { SideMenu } from '../components/SideMenu';\r\n\r\nimport * as React from 'react';\r\n\r\nimport { ColorSchemeName } from 'react-native';\r\n//import { RootStackParamList, RootTabParamList, RootTabScreenProps } from '../types';\r\nimport LinkingConfiguration from './LinkingConfiguration';\r\nimport { SafeAreaProvider } from 'react-native-safe-area-context';\r\nimport { RootNavigator } from './RootNavigator';\r\n\r\nexport default function Navigation({ colorScheme }: { colorScheme: ColorSchemeName }) {\r\n  return (\r\n    <SafeAreaProvider>\r\n      <NavigationContainer\r\n        linking={LinkingConfiguration}\r\n        theme={colorScheme === 'dark' ? DarkTheme : DefaultTheme}\r\n      ><RootNavigator />\r\n      </NavigationContainer>\r\n    </SafeAreaProvider>\r\n  );\r\n}","import {configApi} from '@tradingpost/common/api/entities/static/EntityApiBase'\r\nimport Constants, {AppOwnership} from 'expo-constants'\r\nimport {useURL} from 'expo-linking'\r\nimport {parse} from 'url'\r\n\r\nif (!__DEV__) {\r\n    configApi({\r\n        apiBaseUrl: \"https://api.tradingpostapp.com\"\r\n    })\r\n} else if (__DEV__ && (AppOwnership.Expo === Constants.appOwnership || AppOwnership.Standalone === Constants.appOwnership || !Constants.appOwnership)) {\r\n\r\n    if (Constants.manifest?.hostUri) {\r\n        configApi({\r\n            apiBaseUrl: `http://${Constants.manifest?.hostUri?.split(\":\")[0]}:8082`\r\n        })\r\n    } else {\r\n\r\n        //manual ip for api server... have been trying to find a way to avoid this...\r\n        configApi({\r\n            apiBaseUrl: `http://${Constants.expoConfig?.extra?.localIp || \"localhost\"}:8082`\r\n        })\r\n    }\r\n}\r\n\r\nif (__DEV__ && Platform.OS === \"web\")\r\n    configApi({\r\n        callbackUrl: \"http://localhost:19006\"\r\n    })\r\n\r\n\r\nimport {StatusBar} from 'expo-status-bar';\r\nimport useCachedResources from './hooks/useCachedResources';\r\nimport useColorScheme from './hooks/useColorScheme';\r\nimport Navigation from './navigation';\r\nimport * as eva from '@eva-design/eva';\r\nimport {ApplicationProvider, Layout, Button, IconRegistry} from '@ui-kitten/components';\r\nimport theme from \"./theme-light.json\"; // <-- Import app theme\r\nimport {ToastProvider} from 'react-native-toast-notifications';\r\nimport React, {useEffect,} from 'react';\r\n\r\n\r\nimport {EvaIconsPack} from '@ui-kitten/eva-icons';\r\n\r\nimport {getSecurityList} from './SecurityList'\r\nimport {Platform} from 'react-native'\r\n\r\nexport default function App() {\r\n    console.log(\"Started\")\r\n    const {isLoadingComplete} = useCachedResources();\r\n    //const colorScheme = useColorScheme();\r\n    const colorScheme = 'light';\r\n    useEffect(() => {\r\n        if (isLoadingComplete) {\r\n            getSecurityList();\r\n        }\r\n    }, [isLoadingComplete])\r\n    const url = useURL();\r\n    if (__DEV__ && url) {\r\n\r\n        const urlParsed = parse(url, true);\r\n\r\n        //com.tradingpostapp://expo-development-client/?url=http%3A%2F%2F10.0.0.94%3A8081 need to parse and set the api url the first run through\r\n        if (urlParsed.hostname === \"expo-development-client\") {\r\n            configApi({\r\n                apiBaseUrl: \"http://\" + (urlParsed.query[\"url\"] as string)?.split(\":\")[1] + \":8082\"\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    return !isLoadingComplete ? null : <ApplicationProvider {...eva} theme={{...eva.light, ...theme}}>\r\n        <IconRegistry icons={EvaIconsPack}/>\r\n        <ToastProvider>\r\n            <Navigation colorScheme={colorScheme}/>\r\n            <StatusBar/>\r\n        </ToastProvider>\r\n    </ApplicationProvider>\r\n}\r\n\r\n\r\n\r\n","import { registerRootComponent } from 'expo';\r\n\r\nimport App from './App';\r\n\r\n// registerRootComponent calls AppRegistry.registerComponent('main', () => App);\r\n// It also ensures that whether you load the app in Expo Go or in a native build,\r\n// the environment is set up appropriately\r\nregisterRootComponent(App);\r\n","import { FontAwesome } from '@expo/vector-icons';\r\nimport * as Font from 'expo-font';\r\nimport * as SplashScreen from 'expo-splash-screen';\r\nimport { useEffect, useState } from 'react';\r\nimport { initLds, setValue } from '../lds';\r\nimport { Authentication } from '../Authentication';\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { registerDeviceForNotifications } from \"../utils/notifications\";\r\n\r\nimport '../SecurityList'\r\nimport { Log } from '../utils/logger';\r\n\r\nexport default function useCachedResources() {\r\n    const [isLoadingComplete, setLoadingComplete] = useState(false);\r\n\r\n    // Load any resources or data that we need prior to rendering the app\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n\r\n                SplashScreen.preventAutoHideAsync();\r\n                // Load fonts\r\n                await Font.loadAsync({\r\n                    ...FontAwesome.font,\r\n                    'space-mono': require('../assets/fonts/SpaceMono-Regular.ttf'),\r\n                    'K2D': require('../assets/fonts/K2D-Regular.ttf'),\r\n                });\r\n\r\n                const lds = await initLds();\r\n                if (lds.authToken) {\r\n                    Log.verbose(\"There IS AN AUTH TOKEN\");\r\n                    try {\r\n                        const results = await Authentication.signIn(\"\", lds.authToken);\r\n                        lds.loginResult = results.loginResult;\r\n                        lds.currentUser = results.currentUser;\r\n                        Log.verbose(`CU: ${JSON.stringify(lds.currentUser)} LR: ${JSON.stringify(lds.loginResult)}`);\r\n                        setValue(\"loginResult\", results.loginResult);\r\n                        setValue(\"currentUser\", results.currentUser);\r\n\r\n                        if (results.currentUser?.email)\r\n                            await registerDeviceForNotifications();\r\n\r\n                    } catch (ex) {\r\n                        //TODO: make this remove the authtoken if the exception actually is related to the auth token being invalid \r\n                        setValue(\"authToken\", undefined);\r\n                        console.error(ex);\r\n                    }\r\n                }\r\n                else\r\n                    Log.verbose(\"There is no auth token.\");\r\n\r\n\r\n            } catch (e) {\r\n                // We might want to provide this error information to an error reporting service\r\n                console.error(e);\r\n            } finally {\r\n                setLoadingComplete(true);\r\n                SplashScreen.hideAsync();\r\n            }\r\n        })()\r\n    }, []);\r\n\r\n\r\n    return {\r\n        isLoadingComplete,\r\n    }\r\n}\r\n","const data = {\r\n\t\"width\": 24,\r\n\t\"height\": 24,\r\n\t\"body\": \"<path fill=\\\"currentColor\\\" d=\\\"m12 23l4-4H8M19 8h-2V6h2m0 5h-2V9h2m-3-1h-2V6h2m0 5h-2V9h2m0 6H8v-2h8M7 8H5V6h2m0 5H5V9h2m1 0h2v2H8m0-5h2v2H8m3 1h2v2h-2m0-5h2v2h-2m9-5H4c-1.11 0-2 .89-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2Z\\\"/>\"\r\n};\r\nexports.__esModule = true;\r\nexports.default = data;\r\n","module.exports = __webpack_public_path__ + \"static/media/bookmark-active.d96ac9da.svg\";","module.exports = __webpack_public_path__ + \"static/media/bookmark-active-blue.fdca270d.svg\";","module.exports = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cGF0aCBkPSJNNjQgOEMzMy4wNzUgOCA4IDMzLjA3NSA4IDY0QzggOTQuOTI1IDMzLjA3NSAxMjAgNjQgMTIwQzk0LjkyNSAxMjAgMTIwIDk0LjkyNSAxMjAgNjRDMTIwIDMzLjA3NSA5NC45MjUgOCA2NCA4Wk02NCAxMTAuNUMzOC4zMjUgMTEwLjUgMTcuNSA4OS42NzUgMTcuNSA2NEMxNy41IDM4LjMyNSAzOC4zMjUgMTcuNSA2NCAxNy41Qzg5LjY3NSAxNy41IDExMC41IDM4LjMyNSAxMTAuNSA2NEMxMTAuNSA4OS42NzUgODkuNjc1IDExMC41IDY0IDExMC41WiIgZmlsbD0iYmxhY2siLz4NCjxwYXRoIGQ9Ik01OCA0MkM1OCA0My41OTEzIDU4LjYzMjEgNDUuMTE3NCA1OS43NTc0IDQ2LjI0MjZDNjAuODgyNiA0Ny4zNjc5IDYyLjQwODcgNDggNjQgNDhDNjUuNTkxMyA0OCA2Ny4xMTc0IDQ3LjM2NzkgNjguMjQyNiA0Ni4yNDI2QzY5LjM2NzkgNDUuMTE3NCA3MCA0My41OTEzIDcwIDQyQzcwIDQwLjQwODcgNjkuMzY3OSAzOC44ODI2IDY4LjI0MjYgMzcuNzU3NEM2Ny4xMTc0IDM2LjYzMjEgNjUuNTkxMyAzNiA2NCAzNkM2Mi40MDg3IDM2IDYwLjg4MjYgMzYuNjMyMSA1OS43NTc0IDM3Ljc1NzRDNTguNjMyMSAzOC44ODI2IDU4IDQwLjQwODcgNTggNDJWNDJaTTY3IDU2SDYxQzYwLjQ1IDU2IDYwIDU2LjQ1IDYwIDU3VjkxQzYwIDkxLjU1IDYwLjQ1IDkyIDYxIDkySDY3QzY3LjU1IDkyIDY4IDkxLjU1IDY4IDkxVjU3QzY4IDU2LjQ1IDY3LjU1IDU2IDY3IDU2WiIgZmlsbD0iYmxhY2siLz4NCjwvc3ZnPg0K\"","module.exports = __webpack_public_path__ + \"static/media/logo.9bb3fb31.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo-no-bg.9cd8c523.svg\";","module.exports = __webpack_public_path__ + \"static/media/notification-active.ead2911b.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAoCAYAAACSN4jeAAAACXBIWXMAAAsTAAALEwEAmpwYAAACr0lEQVRYhe2Ye28SQRTFf6C1+KSliliMtVZqrNpUjI9qfVSjprSk+ABbFhb6/b+EGXPGjBtcFthH/+hJboDduTOH+5o7A9PjMrAK1IEPwFfJJ+AFsA4skDByzvcysAP8AHrAABiOkD7QEdG7/5krFlIF4DVwDPiSLvBNlnoPvAM+A4fAkTOup+eluEndAFqyglmkDbwCloH5EVaYk86W9HqSX0AtLlIVTehJjFWKE8wzrzg8lr4huDErqUXFiaeJNwJjxsWL+74K/JT7Dbl7I8ZEQh7Y0yRdZRlTTuaGRFt/tD2h5f9O8tiJqfqUhFxY3RX90b7KzEQoKNuMckPWiwOW3Lbm7iqG3XehiutS9FRExypOiKJc6asERcauCmdTqZ8E3mqNljw0FgUNHqhWxW2tnD7XHHeWo6xTUtXuO5kYJzGL6846tbB17MObTiGshinMiKvab41nNqMQW3aq/K0whRlxSZlviD2NQqyaIrGWiNWjEjNuPCPGmcUSjLFTFfx5p1ykEfwXHWK2XIQ2C7czsNizsIErapsPtFV42jaSwpyIefo0jcPDoNW21IIMJCcimTSeOGta2bXkKk773NKZ0fT250gHq2ocG/LUQN0zz/XDbKhLAaUkYivsNLUnz31BbIeKrayxIyPtmx+PxPJIabugnmwxJSmp1a7peOfb+LYdq68M6agfT1M6znnTU0/4ByUFn6eO0s9AesB3la1/kFdBNe30gwzkjhLg1CIX9mKU2IpcVtYcOFtWPjDW4IrSvukcaoLjgjITlhSoJ6rcdkEC3yuK1+G4U1BcyDmXLYfajEfho3OXdi1JQpaUwX3nRrEh65zXNlbU7WJXY+yhOTVsq0r3dHfWVOx19MyXZS+QATblKhtLRuwu8ibr9DfZZ+qQaQZeqjOYuY/7DbN2cxBGpVy8AAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/store-front-logo2-alt.7ad935b2.svg\";","module.exports = __webpack_public_path__ + \"static/media/store-front.5d28ee3a.svg\";","module.exports = __webpack_public_path__ + \"static/media/app-title.a87bb585.svg\";","module.exports = __webpack_public_path__ + \"static/media/splash-welcome.0edc3aee.svg\";","module.exports = __webpack_public_path__ + \"static/media/ClimbingMountain.4dedba75.svg\";","module.exports = __webpack_public_path__ + \"static/media/Debate.d0700537.svg\";","module.exports = __webpack_public_path__ + \"static/media/Studying.63530cae.svg\";","module.exports = __webpack_public_path__ + \"static/media/analyze.13c5c9ae.svg\";","module.exports = __webpack_public_path__ + \"static/media/bank.76a3b142.svg\";","module.exports = __webpack_public_path__ + \"static/media/IBKR.cfa56b4d.svg\";","module.exports = __webpack_public_path__ + \"static/media/robinhood_logo.d70982fc.svg\";","module.exports = __webpack_public_path__ + \"static/media/robinhood_logo_long.a5900aa8.svg\";","module.exports = __webpack_public_path__ + \"static/media/plus.cdc95c1f.svg\";","module.exports = __webpack_public_path__ + \"static/media/upvote.d5439e23.svg\";","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgODIgODIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cGF0aCBkPSJNNDguMjYxMiAyOS4yMDY0TDQyLjUyNTMgMjMuNDc0NkwyNi42NjI0IDM5LjMxN1Y0NS4wNDg4SDMyLjM5NDJMNDguMjYxMiAyOS4yMDY0WiIgZmlsbD0iI0Y0NDUyRCIvPg0KPHBhdGggZD0iTTQ5LjYwMTcgMTYuMzk5NEw1NS4zMzM2IDIyLjEzMTJMNTAuOTU4OCAyNi41MDU5TDQ1LjIyNzEgMjAuNzc0MUw0OS42MDE3IDE2LjM5OTRaIiBmaWxsPSIjRjQ0NTJEIi8+DQo8cGF0aCBkPSJNNzMuOCAwSDguMkMzLjY3NzcgMCAwIDMuNjc3NyAwIDguMlY4MkwyMS44NjUzIDY1LjZINzMuOEM3OC4zMjIzIDY1LjYgODIgNjEuOTIyMyA4MiA1Ny40VjguMkM4MiAzLjY3NzcgNzguMzIyMyAwIDczLjggMFpNNzMuOCA1Ny40SDE5LjEzNDdMOC4yIDY1LjZWOC4ySDczLjhWNTcuNFoiIGZpbGw9IiNGNDQ1MkQiLz4NCjwvc3ZnPg0K\"","module.exports = __webpack_public_path__ + \"static/media/bookmark.1ebaa1ce.svg\";","module.exports = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCA1MCA1MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0zOCAzNUgzNlYxN0MzNiAxNi40IDM1LjYgMTYgMzUgMTZIMThWMTRIMzVDMzYuNyAxNCAzOCAxNS4zIDM4IDE3VjM1WiIgZmlsbD0iYmxhY2siLz4NCjxwYXRoIGQ9Ik0zNyAzNi41TDMwLjIgMjguN0wzMS44IDI3LjNMMzcgMzMuNUw0Mi4yIDI3LjNMNDMuOCAyOC43TDM3IDM2LjVaTTMyIDM2SDE1QzEzLjMgMzYgMTIgMzQuNyAxMiAzM1YxNUgxNFYzM0MxNCAzMy42IDE0LjQgMzQgMTUgMzRIMzJWMzZaIiBmaWxsPSJibGFjayIvPg0KPHBhdGggZD0iTTE4LjIwMDIgMjIuN0wxMy4wMDAyIDE2LjVMNy44MDAyIDIyLjdMNi4yMDAyIDIxLjNMMTMuMDAwMiAxMy41TDE5LjgwMDIgMjEuM0wxOC4yMDAyIDIyLjdaIiBmaWxsPSJibGFjayIvPg0KPC9zdmc+DQo=\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQyIDI0MiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF8yNzkyXzI0NSkiPg0KPHBhdGggZD0iTTEyMSAwQzU0LjE3MzUgMCAwIDU0LjE3MzUgMCAxMjFDMCAxODcuODI2IDU0LjE3MzUgMjQyIDEyMSAyNDJDMTg3LjgyNiAyNDIgMjQyIDE4Ny44MjYgMjQyIDEyMUMyNDIgNTQuMTczNSAxODcuODI2IDAgMTIxIDBaTTEyMS43OTggNDIuMzMyM0wxNDAuODY2IDEwMS44NzJMMjAzLjM2MSAxMDMuMjc1TDE1Mi42MjQgMTM5Ljc4OEwxNzAuNiAxOTkuNjY4TDEyMC4xODggMTYyLjY5N0w2OC44MDEgMTk4LjMwOUw4OC4zODY3IDEzOC45MzFMMzguNjM5NSAxMDEuMDZMMTAxLjE2MyAxMDEuMzQxTDEyMS43OTggNDIuMzMyM1Y0Mi4zMzIzWiIgZmlsbD0iIzM1QTI2NSIvPg0KPC9nPg0KPGRlZnM+DQo8Y2xpcFBhdGggaWQ9ImNsaXAwXzI3OTJfMjQ1Ij4NCjxyZWN0IHdpZHRoPSIyNDIiIGhlaWdodD0iMjQyIiBmaWxsPSJ3aGl0ZSIvPg0KPC9jbGlwUGF0aD4NCjwvZGVmcz4NCjwvc3ZnPg0K\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjUiIGhlaWdodD0iNjIiIHZpZXdCb3g9IjAgMCA2NSA2MiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik02Mi40MTk1IDI3Ljk4MzZMNS43NTI4NyAxLjMxNjk4QzUuMTgyMzEgMS4wNDcwMyA0LjU0Njc5IDAuOTQ0ODAzIDMuOTIwMzYgMS4wMjIyQzMuMjkzOTMgMS4wOTk2MSAyLjcwMjQgMS4zNTM0NSAyLjIxNDcxIDEuNzU0MTVDMS43MjcwMiAyLjE1NDg1IDEuMzYzMjYgMi42ODU5MSAxLjE2NTgxIDMuMjg1NDNDMC45NjgzNzQgMy44ODQ5NSAwLjk0NTM4NyA0LjUyODIzIDEuMDk5NTMgNS4xNDAzMUw3LjU2Mjg3IDMxLjAwMDNMMS4wOTk1MyA1Ni44NjAzQzAuOTQzOTQ1IDU3LjQ3MjYgMC45NjU5MjYgNTguMTE2NiAxLjE2MjkxIDU4LjcxNjhDMS4zNTk4OSA1OS4zMTcxIDEuNzIzNzMgNTkuODQ4OSAyLjIxMTg2IDYwLjI0OTlDMi42OTk5OSA2MC42NTEgMy4yOTIyMyA2MC45MDQ4IDMuOTE5MzEgNjAuOTgxNkM0LjU0NjM5IDYxLjA1ODQgNS4xODIzNyA2MC45NTUxIDUuNzUyODcgNjAuNjgzNkw2Mi40MTk1IDM0LjAxN0M2Mi45OTIyIDMzLjc0NzggNjMuNDc2NCAzMy4zMjEyIDYzLjgxNTYgMzIuNzg3QzY0LjE1NDcgMzIuMjUyOCA2NC4zMzQ4IDMxLjYzMzEgNjQuMzM0OCAzMS4wMDAzQzY0LjMzNDggMzAuMzY3NSA2NC4xNTQ3IDI5Ljc0NzggNjMuODE1NiAyOS4yMTM3QzYzLjQ3NjQgMjguNjc5NSA2Mi45OTIyIDI4LjI1MjggNjIuNDE5NSAyNy45ODM2VjI3Ljk4MzZaTTkuMjY5NTMgNTEuNjU3TDEyLjA2NjIgNDAuNDY3TDMwLjk5OTUgMzEuMDAwM0wxMi4wNjYyIDIxLjUzMzZMOS4yNjk1MyAxMC4zNDM2TDUzLjE2OTUgMzEuMDAwM0w5LjI2OTUzIDUxLjY1N1oiIGZpbGw9IiMzNUEyNjUiLz4NCjwvc3ZnPg0K\"","module.exports = __webpack_public_path__ + \"static/media/material-symbols_error-circle-rounded-outline.9f0d6099.svg\";","module.exports = __webpack_public_path__ + \"static/media/ph_dots-three-bold.2b3e0f04.svg\";","module.exports = __webpack_public_path__ + \"static/media/Account.9d5b65c9.svg\";","module.exports = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAxIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDEwMSAxMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cGF0aCBkPSJNNS45NDExOCAwLjIzNTI5MVYxMDcuMTc2SDBWMTE5LjA1OUgyMy43NjQ3VjEwNy4xNzZIMTcuODIzNVY3Ny40NzA2SDk1LjA1ODhDOTYuNjM0NSA3Ny40NzA2IDk4LjE0NTcgNzYuODQ0NiA5OS4yNTk5IDc1LjczMDRDMTAwLjM3NCA3NC42MTYzIDEwMSA3My4xMDUxIDEwMSA3MS41Mjk0VjEyLjExNzZDMTAxIDEwLjU0MTkgMTAwLjM3NCA5LjAzMDc4IDk5LjI1OTkgNy45MTY2Qzk4LjE0NTcgNi44MDI0MSA5Ni42MzQ1IDYuMTc2NDcgOTUuMDU4OCA2LjE3NjQ3SDE3LjgyMzVWMC4yMzUyOTFINS45NDExOFpNMjkuNzA1OSAxOC4wNTg4VjI5Ljk0MTJINDEuNTg4MlYxOC4wNTg4SDUzLjQ3MDZWMjkuOTQxMkg2NS4zNTI5VjE4LjA1ODhINzcuMjM1M1YyOS45NDEySDg5LjExNzZWNDEuODIzNUg3Ny4yMzUzVjUzLjcwNTlIODkuMTE3NlY2NS41ODgySDc3LjIzNTNWNTMuNzA1OUg2NS4zNTI5VjY1LjU4ODJINTMuNDcwNlY1My43MDU5SDQxLjU4ODJWNjUuNTg4MkgyOS43MDU5VjUzLjcwNTlIMTcuODIzNVY0MS44MjM1SDI5LjcwNTlWMjkuOTQxMkgxNy44MjM1VjE4LjA1ODhIMjkuNzA1OVoiIGZpbGw9ImJsYWNrIi8+DQo8cGF0aCBkPSJNMjkuNzA1NiA0MS44MjMySDQxLjU4NzlWNTMuNzA1NkgyOS43MDU2VjQxLjgyMzJaTTUzLjQ3MDMgNDEuODIzMkg2NS4zNTI2VjUzLjcwNTZINTMuNDcwM1Y0MS44MjMyWk00MS41ODc5IDI5Ljk0MDlINTMuNDcwM1Y0MS44MjMySDQxLjU4NzlWMjkuOTQwOVpNNjUuMzUyNiAyOS45NDA5SDc3LjIzNVY0MS44MjMySDY1LjM1MjZWMjkuOTQwOVoiIGZpbGw9ImJsYWNrIi8+DQo8L3N2Zz4NCg==\"","module.exports = __webpack_public_path__ + \"static/media/Feedback.22ef3824.svg\";","module.exports = __webpack_public_path__ + \"static/media/Help.6a3a2895.svg\";","module.exports = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI5IiBoZWlnaHQ9IjEwNiIgdmlld0JveD0iMCAwIDEyOSAxMDYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cGF0aCBkPSJNNS4yNSAxNy42NzVDNS4yNSAxNy42NzUgMTQuMTU2MiA1LjggMzQuOTM3NSA1LjhDNTUuNzE4OCA1LjggNjQuNjI1IDE3LjY3NSA2NC42MjUgMTcuNjc1VjEwMC44QzY0LjYyNSAxMDAuOCA1NS43MTg4IDk0Ljg2MjUgMzQuOTM3NSA5NC44NjI1QzE0LjE1NjIgOTQuODYyNSA1LjI1IDEwMC44IDUuMjUgMTAwLjhWMTcuNjc1WiIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIxMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8cGF0aCBkPSJNNjQuNjI1IDE3LjY3NUM2NC42MjUgMTcuNjc1IDczLjUzMTIgNS44IDk0LjMxMjUgNS44QzExNS4wOTQgNS44IDEyNCAxNy42NzUgMTI0IDE3LjY3NVYxMDAuOEMxMjQgMTAwLjggMTE1LjA5NCA5NC44NjI1IDk0LjMxMjUgOTQuODYyNUM3My41MzEyIDk0Ljg2MjUgNjQuNjI1IDEwMC44IDY0LjYyNSAxMDAuOFYxNy42NzVaIiBzdHJva2U9ImJsYWNrIiBzdHJva2Utd2lkdGg9IjEwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjwvc3ZnPg0K\"","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyNi4zLjEsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHZpZXdCb3g9IjAgMCAxNjQgMTkyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxNjQgMTkyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8cGF0aCBmaWxsPSJibGFjayIgZD0iTTE1MC4zLDAuOWgtODJjLTMuNiwwLTcuMSwxLjQtOS43LDRjLTIuNiwyLjYtNCw2LTQsOS42djIwLjRoMTMuN1YxNC41aDgydjE2My4zaC04MnYtMjAuNEg1NC43djIwLjRjMCwzLjYsMS40LDcuMSw0LDkuNg0KCWMyLjYsMi42LDYsNCw5LjcsNGg4MmMzLjYsMCw3LjEtMS40LDkuNy00YzIuNi0yLjYsNC02LDQtOS42VjE0LjVjMC0zLjYtMS40LTcuMS00LTkuNkMxNTcuNCwyLjMsMTU0LDAuOSwxNTAuMywwLjl6Ii8+DQo8cGF0aCBmaWxsPSJibGFjayIgIGQ9Ik01MC43LDY0LjlMMjYuMiw4OS4zSDEyM3YxMy42SDI2LjJsMjQuNSwyNC40bC05LjcsOS42TDAsOTYuMWw0MS00MC44TDUwLjcsNjQuOXoiLz4NCjwvc3ZnPg0K\"","module.exports = __webpack_public_path__ + \"static/media/Profile.39f7f989.svg\";","module.exports = __webpack_public_path__ + \"static/media/Watchlist.e35b45e7.svg\";","module.exports = __webpack_public_path__ + \"static/media/bank-link-icon.73f705c3.svg\";","const data = {\r\n\t\"width\": 256,\r\n\t\"height\": 180,\r\n\t\"body\": \"<path fill=\\\"red\\\" d=\\\"M250.346 28.075A32.18 32.18 0 0 0 227.69 5.418C207.824 0 127.87 0 127.87 0S47.912.164 28.046 5.582A32.18 32.18 0 0 0 5.39 28.24c-6.009 35.298-8.34 89.084.165 122.97a32.18 32.18 0 0 0 22.656 22.657c19.866 5.418 99.822 5.418 99.822 5.418s79.955 0 99.82-5.418a32.18 32.18 0 0 0 22.657-22.657c6.338-35.348 8.291-89.1-.164-123.134Z\\\"/><path fill=\\\"#FFF\\\" d=\\\"m102.421 128.06l66.328-38.418l-66.328-38.418z\\\"/>\"\r\n};\r\nexports.__esModule = true;\r\nexports.default = data;\r\n","const data = {\r\n\t\"width\": 256,\r\n\t\"height\": 256,\r\n\t\"body\": \"<path fill=\\\"#1ED760\\\" d=\\\"M128 0C57.308 0 0 57.309 0 128c0 70.696 57.309 128 128 128c70.697 0 128-57.304 128-128C256 57.314 198.697.007 127.998.007l.001-.006Zm58.699 184.614c-2.293 3.76-7.215 4.952-10.975 2.644c-30.053-18.357-67.885-22.515-112.44-12.335a7.981 7.981 0 0 1-9.552-6.007a7.968 7.968 0 0 1 6-9.553c48.76-11.14 90.583-6.344 124.323 14.276c3.76 2.308 4.952 7.215 2.644 10.975Zm15.667-34.853c-2.89 4.695-9.034 6.178-13.726 3.289c-34.406-21.148-86.853-27.273-127.548-14.92c-5.278 1.594-10.852-1.38-12.454-6.649c-1.59-5.278 1.386-10.842 6.655-12.446c46.485-14.106 104.275-7.273 143.787 17.007c4.692 2.89 6.175 9.034 3.286 13.72v-.001Zm1.345-36.293C162.457 88.964 94.394 86.71 55.007 98.666c-6.325 1.918-13.014-1.653-14.93-7.978c-1.917-6.328 1.65-13.012 7.98-14.935C93.27 62.027 168.434 64.68 215.929 92.876c5.702 3.376 7.566 10.724 4.188 16.405c-3.362 5.69-10.73 7.565-16.4 4.187h-.006Z\\\"/>\"\r\n};\r\nexports.__esModule = true;\r\nexports.default = data;\r\n","const data = {\r\n\t\"width\": 256,\r\n\t\"height\": 209,\r\n\t\"body\": \"<path fill=\\\"#55acee\\\" d=\\\"M256 25.45a105.04 105.04 0 0 1-30.166 8.27c10.845-6.5 19.172-16.793 23.093-29.057a105.183 105.183 0 0 1-33.351 12.745C205.995 7.201 192.346.822 177.239.822c-29.006 0-52.523 23.516-52.523 52.52c0 4.117.465 8.125 1.36 11.97c-43.65-2.191-82.35-23.1-108.255-54.876c-4.52 7.757-7.11 16.78-7.11 26.404c0 18.222 9.273 34.297 23.365 43.716a52.312 52.312 0 0 1-23.79-6.57c-.003.22-.003.44-.003.661c0 25.447 18.104 46.675 42.13 51.5a52.592 52.592 0 0 1-23.718.9c6.683 20.866 26.08 36.05 49.062 36.475c-17.975 14.086-40.622 22.483-65.228 22.483c-4.24 0-8.42-.249-12.529-.734c23.243 14.902 50.85 23.597 80.51 23.597c96.607 0 149.434-80.031 149.434-149.435c0-2.278-.05-4.543-.152-6.795A106.748 106.748 0 0 0 256 25.45\\\"/>\"\r\n};\r\nexports.__esModule = true;\r\nexports.default = data;\r\n","const data = {\r\n\t\"width\": 256,\r\n\t\"height\": 256,\r\n\t\"body\": \"<path fill=\\\"#0A66C2\\\" d=\\\"M218.123 218.127h-37.931v-59.403c0-14.165-.253-32.4-19.728-32.4c-19.756 0-22.779 15.434-22.779 31.369v60.43h-37.93V95.967h36.413v16.694h.51a39.907 39.907 0 0 1 35.928-19.733c38.445 0 45.533 25.288 45.533 58.186l-.016 67.013ZM56.955 79.27c-12.157.002-22.014-9.852-22.016-22.009c-.002-12.157 9.851-22.014 22.008-22.016c12.157-.003 22.014 9.851 22.016 22.008A22.013 22.013 0 0 1 56.955 79.27m18.966 138.858H37.95V95.967h37.97v122.16ZM237.033.018H18.89C8.58-.098.125 8.161-.001 18.471v219.053c.122 10.315 8.576 18.582 18.89 18.474h218.144c10.336.128 18.823-8.139 18.966-18.474V18.454c-.147-10.33-8.635-18.588-18.966-18.453\\\"/>\"\r\n};\r\nexports.__esModule = true;\r\nexports.default = data;\r\n","const data = {\r\n\t\"width\": 24,\r\n\t\"height\": 24,\r\n\t\"body\": \"<path fill=\\\"currentColor\\\" d=\\\"M22.539 8.242H1.46V5.406h21.08v2.836zM1.46 10.812V24L12 18.11L22.54 24V10.812H1.46zM22.54 0H1.46v2.836h21.08V0z\\\"/>\"\r\n};\r\nexports.__esModule = true;\r\nexports.default = data;\r\n","module.exports = __webpack_public_path__ + \"static/media/analyze2.def492bc.svg\";","module.exports = __webpack_public_path__ + \"static/media/analytics.96f2c1d2.svg\";","const data = {\r\n\t\"width\": 24,\r\n\t\"height\": 24,\r\n\t\"body\": \"<path fill=\\\"currentColor\\\" d=\\\"M12 4a4 4 0 0 1 4 4a4 4 0 0 1-4 4a4 4 0 0 1-4-4a4 4 0 0 1 4-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4Z\\\"/>\"\r\n};\r\nexports.__esModule = true;\r\nexports.default = data;\r\n","const data = {\n\t\"width\": 24,\n\t\"height\": 24,\n\t\"body\": \"<path fill=\\\"currentColor\\\" d=\\\"M18 22q-1.25 0-2.125-.875T15 19q0-.175.025-.363q.025-.187.075-.337l-7.05-4.1q-.425.375-.95.587Q6.575 15 6 15q-1.25 0-2.125-.875T3 12q0-1.25.875-2.125T6 9q.575 0 1.1.212q.525.213.95.588l7.05-4.1q-.05-.15-.075-.337Q15 5.175 15 5q0-1.25.875-2.125T18 2q1.25 0 2.125.875T21 5q0 1.25-.875 2.125T18 8q-.575 0-1.1-.213q-.525-.212-.95-.587L8.9 11.3q.05.15.075.337Q9 11.825 9 12t-.025.362q-.025.188-.075.338l7.05 4.1q.425-.375.95-.588Q17.425 16 18 16q1.25 0 2.125.875T21 19q0 1.25-.875 2.125T18 22Z\\\"/>\"\n};\nexports.__esModule = true;\nexports.default = data;\n","const data = {\r\n\t\"width\": 24,\r\n\t\"height\": 24,\r\n\t\"body\": \"<path fill=\\\"currentColor\\\" d=\\\"M17 13h-4v4h-2v-4H7v-2h4V7h2v4h4m-5-9A10 10 0 0 0 2 12a10 10 0 0 0 10 10a10 10 0 0 0 10-10A10 10 0 0 0 12 2Z\\\"/>\"\r\n};\r\nexports.__esModule = true;\r\nexports.default = data;\r\n","module.exports = __webpack_public_path__ + \"./fonts/SpaceMono-Regular.ttf\";","module.exports = __webpack_public_path__ + \"./fonts/K2D-Regular.ttf\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAIBAMAAAA7P9P/AAAAFVBMVEUAAAAAAAAAAABHcEwAAAAAAAAAAAAsXusGAAAABnRSTlPUFhUAxLV788luAAAAQ0lEQVQI12MIUTY2NjZyZXBjAtIKKQwCCcrGRmyMDIZsTMYKCcIMxgIJSmyMxgzGhmwMCcJA2lggjdEYRBu5CBsbAwA6HgmSu7c8IwAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADfSURBVHgB3ZVhDYMwEIVfMDAkzMEszMEqoRJwAA6oA+ZgszAFzEEzBZuDrc1oUkjbO0p/8SXvz+XuHeXKAeyd2qgxuhlpo++kcYpJbEAYvT3TmHROo55hvFTLNW8zzJ16ylwSBsroSuSIVANNFDtSOXZudc7TcxtYNS6x8oouKMc51OCIcpxCweUxB/BRiLzOKlH0AZ8DJ4m6QWuGPLpE/wRPlOMVavBAOe6hoP04qOXmoJZfFEEUD6AXoQSBAj3EmDow6TLMFVYiwbu6dm4CG5D4/x5HzAdpY3ap1dg1PyNVyJlgDEwbAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAAAcklEQVRIDWNgGAWjIYAcAgqGtltBGFmMEJuFkAIU+f//vVD4RHCYiFBDkZJRCwgGHyM2FeCUQmqEMjJue3D+sDe6eVSLA8b/DP/RDSeZr2Bg8x+ESdFINR/gsnTUAlwhAxcnrSwCJkWqpBa49aOMYRECANa7E7ZM1CXvAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/has-notification-active.b9317cb3.png\";","module.exports = __webpack_public_path__ + \"static/media/has-notification.76af1056.png\";","module.exports = __webpack_public_path__ + \"static/media/portfolio-active.efe3924c.png\";","module.exports = __webpack_public_path__ + \"static/media/portfolio.e8bf12f0.png\";","module.exports = __webpack_public_path__ + \"static/media/feed-active.7796425f.png\";","module.exports = __webpack_public_path__ + \"static/media/feed.31fac6f4.png\";","module.exports = __webpack_public_path__ + \"static/media/search-active.cc2d6f99.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAoCAYAAAB99ePgAAAACXBIWXMAAAsTAAALEwEAmpwYAAADFklEQVRYhc2YC08TQRSFv4IgCGhriIGqIIKCD/CBAopgwkOpgFAUKC3bxP//J8wkZ/RmAu3udDfhJJNtd/feOXPv3Mcs9IZS8H8QuA9MAbMa7ncZGOgiWwj6gWlgAzgGzoEmcKnR1L0j4DPwGOgrioxd8QywD7QMmQRo62rHpRk/ZNGrdPZM7DawaSzT0jgBtoBlYBFYAj4A28Cv4H33e924uyeCXngM+ClrNDTJN+ApMNRBfhiYA2qSaUiHs+JIHgRHtK9assAp8OyahdgRPnupfXghoociHw23ifeMa46ASjBpN9h3xoG6IbgbYzkv8E4b3Smry71pSV2ns6x9eiHdb2J0lo0b3JjogVhIsGr0ujnuZVW0atLBSg7EQoIfTRpyc6XGHaUBFwS/gVHyx6iCqyk3D6dd1ROTPNcKIFbS9ZOZZyat0Ipx6XTwLA94XdPyTibXbkngLEgdRbk2UVLvilvK4Imqgus6isKgkrGb6yBNczBoStVhkd0E/5N8Wwm+qyEGtIpEAs6SRaFfdbctg4T935XYFbmTgtKIx5DqdqI2LFUUrUvA5aDJ4FmeqJhOxQVhR3gCCyZ7LwXP8oDXNW/meZtlRefKQfvaG0Vgx3Q83kOpsC3BlprKvGvrpOmQ99NmBS88ZVZl811eBL9Lt3Ppixjd3npubF6xgFgsm4UfxKarssqL71xXIgnad1/JlX5PVyP0/cOCyDVEcEMnMTvxdYrt/T6dyjyxtskEUVhVQXbtelMkW9qDsynd4Qg+Ck5gbRGNxqKUtVX/5uView51++W9Jh9Txh/SiW1COvbMyc3LufuZ4d0wJxLnunrzV0xu8mkmkUVPdQiqm32amMO3L1HVXog91Ap9WXGRFWJKkezJJx3GhVz6PDaZl8y58swQczW2EyoKmDU1CzUNl8O+AK+BB0FgZIpK//Jdc568VCFOE4VERG7mjzQHZn/UMnxsKUU+S4U+ucRH4XFeH1nywNcg4io3hdiq+azVyOmTQy5YEjFf49xB+kYQWzDEoluWojCubP1HdfPGYazXrqAI/AWJsGc6P11vXQAAAABJRU5ErkJggg==\"","module.exports = __webpack_public_path__ + \"static/media/bookmark-active.a74f9155.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAoCAYAAAAPOoFWAAAACXBIWXMAAAsTAAALEwEAmpwYAAABbklEQVRYhe2XTU8CMRRFT1E3LiWRja4QBFyqgAqGOLIxEfnQ//9XzCO3SR0HKcwMcTEveXlhBu55vW1JC9AEJsC4xJyIwxRYKj9LyKXSOCTAB3AHdIGbArMrXdN/8TAj1ykn6tL/AWvopSsI4lQbh4SdZ8HsYQWLCada2ZgrnGplY65wqpWNucKpVjbmCqda2fg/bDw9FKwHzIB22bAesBDM6nVZsBA0VZ3/McK9YV0JL3TCPQJu9Xm+ARgFS0dHgpb91Lt7Ae143drw++iRtYMRDTK6TgOvdh2Z/1JLAiY03LJw+gGwGQPzx2/UoQc9RO69QQZw61k/BD0CtQgQamiYAfwFWwFnwGUwR08BKPay4eSEB15Id+Vhr9oztqTf1MVIy3sXkI+aHFlKz18GkxD2ro7GOUAuBVxId+ZhiR6Yfc/A8Z4gMoA2FaZr+muY/fV8FQRKA80hmxLTX1/gbdXYPjkpCJQG2gBs43e+AWheWzD4nGQdAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAoCAYAAAC4h3lxAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB6UlEQVRYhe2YPS8EURSGn5lllyg0QkFBKCQ+ExoKwg/wFa3KPxBaBYVGo9ZR6UQiVin+gZVoSUQnQmR9zO5cmTizublGrEJyRvYkT+7s3Fu8Z+45956z8GmejA1APzAMDClkEGjGsVj8MnALlIBARk0EMt4D664TS4BJGRv2DlzJy3cgVE4gWh+BtsiBdvlhnIVGIaHDRORAE3AnC0rOQm3CDVCW5yhaeuMw2pbJQCY08yZaj+wkzgIHCr60qZJzoNU9RiObBlaAVcXMWJor2j3HkTSYl/TSB+qAjFLqZKxZzf4qKTKCr5SM8CWBo8m0me8+tACbwAlwCuRl1EDe0rMD9LhOdALXCm5YUyXPwLi9HYcy8SL1kGZeRWshzoUW6XLsSk9bNWoSSulI6wjSFDwkLDLKHQiBsTiEzqwQKinnTbTeAI2xA6NAUcFXNr9g0T1G+6UnuJAEibhUREE4BqZEs5d0kUUVX06aHE3kgPqki8x+kYZS1U9p5VCz9JXUGaX434lPU2J43zX13cAcsKCYAceRim1Z17RmQmBP7oWKrVkLSsopi87dWHzWamYCBX+fhz8QO1CURowO4MkpWTWHT2gx+S92ICkHysoxdg7Yp9C7gjAxVbDvnkKxdQGzct7OK6XP0ut9AF3v9ga2MivCAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/flatgrad.0b9cb975.png\";","var api = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../node_modules/css-loader/dist/cjs.js!./TextEditor.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".pell-content {\\r\\n    flex: 1;\\r\\n    margin:8px;\\r\\n    border:1px solid #ccc;\\r\\n    padding:8px;\\r\\n}\\r\\n\\r\\n.pell-holder{\\r\\n    margin: 0 16px;\\r\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n"],"sourceRoot":""}
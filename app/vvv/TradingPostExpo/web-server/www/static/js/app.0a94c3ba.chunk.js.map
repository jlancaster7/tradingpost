{"version":3,"sources":["lds.tsx","Authentication.tsx","SecurityList.ts","utils/logger.ts","utils/notifications.ts","components/SvgExpo.web.tsx","images.tsx","constants/Colors.ts","style.ts","utils/hooks.tsx","components/LabeledField.tsx","components/PrimaryButton.tsx","components/SecondaryButton.tsx","components/ButtonField.tsx","components/TextField.tsx","utils/validators.ts","components/ScrollWithButtons.tsx","utils/misc.tsx","screens/create_account/shared.ts","components/Link.tsx","screens/create_account/AccountInfoSection.tsx","components/Headers.tsx","components/Section.tsx","components/Picker.tsx","components/Slider.tsx","components/AddButton.tsx","components/KeyboardAvoidingInput.tsx","screens/create_account/InvestmentInterestSection.tsx","components/IconfiyIcon.tsx","utils/third-party/twitter.ts","utils/third-party/youtube.ts","utils/third-party/shared.ts","components/YourContentComponent.tsx","components/ProfileButton.tsx","components/NoDataPanel.tsx","components/List.tsx","components/WatchlistPicker.tsx","components/Themed.tsx","hooks/useColorScheme.ts","screens/create_account/AnalystStartSection.tsx","components/Table.tsx","components/LinkBrokerageComponent.tsx","components/ToolTip.tsx","components/SwitchField.tsx","screens/SubscriptionScreen.tsx","components/HtmlView.web.tsx","screens/CreateAccountScreen.tsx","screens/create_account/BasicInfoSection.tsx","screens/create_account/PickWatchlistSection.tsx","screens/create_account/LinkBrokerageSection.tsx","screens/create_account/YourContentSection.tsx","screens/create_account/SubscrpitionCostSection.tsx","screens/create_account/ProfileIconSection.tsx","screens/create_account/TermsScreen.tsx","screens/create_account/PrivacyScreen.tsx","navigation/LinkingConfiguration.ts","screens/NotFoundScreen.tsx","components/ProfileBanner.tsx","components/ProfileBar.tsx","components/PrimaryChip.tsx","components/IconButton.tsx","components/AsyncPressable.tsx","components/ShareButton.tsx","components/PostView.tsx","components/PostList.tsx","components/MultiTermFeed.tsx","components/WatchlistItemRenderItem.tsx","screens/WatchlistViewerScreen.tsx","components/WatchlistSection.tsx","components/PlusContentButton.tsx","screens/FeedScreen.tsx","charts-js/animated-path.js","charts-js/chart/chart.js","charts-js/area-chart.js","charts-js/stacked-area-chart.js","charts-js/bar-chart/bar-chart.js","charts-js/bar-chart/bar-chart-grouped.js","charts-js/stacked-bar-chart/stacked-bar-chart.js","charts-js/stacked-bar-chart/stacked-bar-grouped.js","charts-js/line-chart/line-chart.js","charts-js/chart/chart-grouped.js","charts-js/line-chart/line-chart-grouped.js","charts-js/line-chart/index.js","charts-js/progress-circle.js","charts-js/x-axis.js","charts-js/y-axis.js","charts-js/chart-decorators/horizontal-line.js","charts-js/chart-decorators/point.js","charts-js/chart-decorators/tooltip.js","charts-js/grid.js","components/InteractiveGraph.tsx","components/ButtonGroup.tsx","components/HoldingRenderItem.tsx","components/TradeRenderItem.tsx","screens/ProfileScreen.tsx","components/LoginButtons.tsx","screens/WelcomeScreen.tsx","components/SideMenu.tsx","screens/NotificationScreen.tsx","screens/BlockListModalScreen.tsx","screens/PortfolioScreen.tsx","components/SearchBar.tsx","navigation/BottomTabNavigator.tsx","screens/SearchScreen.tsx","navigation/DrawerNavigator.tsx","screens/AccountSettingsScreen.tsx","screens/AccountInfoScreen.tsx","screens/AuthScreen.tsx","screens/ChangePasswordScreen.tsx","screens/CompanyScreen.tsx","screens/ImagePicker.tsx","screens/NotificationTradeScreen.tsx","components/TextEditor.web.tsx","screens/PostEditorScreen.tsx","components/CommentView.tsx","components/CommentList.tsx","screens/PostScreen.tsx","screens/TableModalScreen.tsx","screens/VerificationScreen.tsx","components/VirtualListWithButtons.tsx","screens/WatchlistEditorScreen.tsx","screens/WatchlistScreen.tsx","screens/AppInformationScreen.tsx","screens/BrokeragePickerScreen.tsx","screens/IbkrInfoScreen.tsx","screens/RobinhoodLoginScreen.tsx","screens/TwitterAuthSceen.tsx","navigation/RootNavigator.tsx","navigation/index.tsx","App.tsx","index.js","hooks/useCachedResources.ts","assets/@iconify/keyboard-close.js","assets/post-feed/bookmark-active.svg","assets/post-feed/bookmark-active-blue.svg","assets/side-menu/Information.svg","assets/logo.svg","assets/logo-no-bg.svg","assets/nav-bar/notification-active.png","assets/nav-bar/notification.png","assets/store-front-logo2-alt.svg","assets/store-front.svg","assets/app-title.svg","assets/splash-welcome.svg","assets/ClimbingMountain.svg","assets/Debate.svg","assets/Studying.svg","assets/analyze.svg","assets/bank.svg","assets/IBKR.svg","assets/robinhood_logo.svg","assets/robinhood_logo_long.svg","assets/misc/plus.svg","assets/post-feed/upvote.svg","assets/post-feed/comment.svg","assets/post-feed/bookmark.svg","assets/post-feed/ei_retweet.svg","assets/post-feed/PremiumStar.svg","assets/post-feed/SendIcon.svg","assets/side-menu/Account.svg","assets/side-menu/Competition.svg","assets/side-menu/Feedback.svg","assets/side-menu/Help.svg","assets/side-menu/Learn.svg","assets/side-menu/Log Out.svg","assets/side-menu/Profile.svg","assets/side-menu/Watchlist.svg","assets/bank-link-icon.svg","assets/@iconify/youtube-icon.js","assets/@iconify/spotify-icon.js","assets/@iconify/twitter.js","assets/@iconify/linkedin-icon.js","assets/@iconify/substack.js","assets/analyze2.svg","assets/analytics.svg","assets/@iconify/user.js","assets/@iconify/share.js","assets/@iconify/plus-circle.js","assets/fonts/SpaceMono-Regular.ttf","assets/fonts/K2D-Regular.ttf","assets/rnui/chevronDown.png","assets/rnui/add.png","assets/rnui/plus.png","assets/nav-bar/has-notification-active.png","assets/nav-bar/has-notification.png","assets/nav-bar/portfolio-active.png","assets/nav-bar/portfolio.png","assets/nav-bar/feed-active.png","assets/nav-bar/feed.png","assets/nav-bar/search-active.png","assets/nav-bar/search.png","assets/nav-bar/bookmark-active.png","assets/nav-bar/bookmark.png","assets/nav-bar/menu.png","assets/post-feed/flatgrad.png","webpack:///./components/TextEditor.css?ebe6","components/TextEditor.css"],"names":["lds","isCachedMap","authToken","hasAuthed","isExplirable","securities","duration","useData","key","expireCheck","cachedAt","Date","now","setValue","undefined","useState","value","_setValue","useEffect","sub","EventRegister","addEventListener","data","removeEventListener","useCallback","v","cachedLds","Object","keys","forEach","k","AsyncStorage","setItem","JSON","stringify","emit","initLds","result","getItem","parse","securityListTask","useAppUser","tracker","_appUser","setAppUser","_loginResult","setLoginResult","setAuthToken","nav","useNavigation","createLoginState","currentUser","loginResult","updated","appUser","user_id","token","setupStatus","needsSettings","settings","length","needsAnalystSettings","Boolean","analyst","analyst_profile","loginState","setLoginState","console","log","forceTrigger","updateState","signIn","email","pass","Authentication","signOut","Auth","navigate","login","User","get","enableVerbose","error","err","tryCatch","action","ex","Log","enabled","verbose","msg","registerDeviceForNotifications","Device","existingStatus","Notifications","status","finalStatus","Api","Notification","extensions","registerUserDevice","provider","Platform","OS","deviceId","timezone","Localization","name","importance","MAX","vibrationPattern","lightColor","fetchSecurities","list","Security","byId","bySymbol","r","id","symbol","getSecurityList","useSecuritiesList","setErr","setSecurities","localValue","setLocalValue","then","catch","SvgExpo","props","url","children","type","lastRef","useRef","onReadyRef","onReady","current","divRef","svgData","setSvgData","fetch","ok","statusText","text","setTimeout","View","style","ref","height","width","justifyContent","alignContent","alignItems","display","dangerouslySetInnerHTML","__html","sideMenu","Account","Competition","Feedback","Information","Help","Learn","LogOut","Profile","Watchlist","Bank_Link","BookmarkActive","_BookmarkActive","BookmarkInactive","_BookmarkInactive","BookmarkActiveBlue","_BookmarkActiveBlue","makeExpoSvg","Svg","AppTitle","_AppTitle","SplashWelcome","_SplashWelcome","ClimbingMountain","_ClimbingMountain","Debate","_Debate","Studying","_Studying","Analyze","_Analyze","Bank","_Bank","IBKR","_IBKR","RobinhoodLogo","_RobinhoodLogo","Retweet","_RobinhoodLogoLong","_IconBg","_IconNoBg","_PlusIcon","_Retweet","UpvoteIcon","_UpvoteIcon","CommentIcon","_CommentIcon","SendIcon","_SendIcon","InfoIcon","PremiumStar","_PremiumStar","NavIconTypeOverride","require","no","active","inactive","has","navIcons","BookmarkIcons","social","TwitterLogo","LinkedInLogo","YouTubeLogo","SubstackLogo","SpotifyLogo","light","background","tint","tabIconDefault","tabIconSelected","dark","AppColors","flex","row","flexDirection","shadow","elevation","shadowOffset","shadowColor","shadowOpacity","shadowRadius","noMargin","marginTop","marginRight","marginBottom","marginLeft","fonts","xSmall","small","medium","large","xLarge","font","size","color","isBold","fontSize","fontWeight","sizes","paddView","padding","backgroundColor","elevated","marginHorizontal","paddingVertical","borderColor","borderWidth","borderRadius","bannerText","textAlign","margin","lineHeight","thinBannerText","marginVertical","textInputWiz","useOpacityAnim","opacityAnim","Animated","Value","timing","delay","toValue","useNativeDriver","start","useMemo","BannerText","Text","opacity","AppearView","styleProp","Symbol","iterator","unshift","useReadonlyEntity","seedValue","setData","hasChanged","setHasChanged","resetData","d","update","updates","_entity","bindTextInput","entity","converter","onChangeText","bindTextInputBase","valueKey","onChangeTextKey","bindKeys","output","fromType","toType","bindPicker","onSelect","item","useIsKeyboardVisible","isKeyboardVisible","setIsKeyboardVisible","useLayoutEffect","showSubscription","Keyboard","addListener","hideSubscription","remove","LabeledField","sz","compact","leftElement","label","PrimaryButton","AltPrimaryButton","SecondaryButton","AltSecondaryButton","ButtonField","_isActive","setIsActive","buttonLabel","disabled","disabledText","activeText","inactiveText","isActive","bProps","onPress","ev","a","secondary","TextField","rnuRef","caption","setCaption","valueTracker","setValueTracker","validate","textInputRef","errorMessage","field","numberOfLines","spellCheck","autoCorrect","editable","accessoryLeft","accessoryRight","onSubmitEditing","textProps","markRequired","t","validateOnChange","newCaption","category","secureTextEntry","returnKeyType","placeholder","isValidEmail","test","isRequired","replace","ScrollWithButtons","ScrollView","nestedScrollEnabled","contentContainerStyle","fillHeight","maxHeight","buttons","ButtonPanel","viewProps","borderTopColor","borderTopWidth","paddingTop","paddingBottom","zIndex","left","locked","right","TBI","warn","toPercent","number","numeral","format","toPercent2","toNumber1","toFormatedDateTime","dateTimeString","m","getMonth","getDate","y","getFullYear","h","getHours","min","getMinutes","ampm","String","toDollars","toDollarsAndCents","split","sideMargin","Link","Pressable","AccountBasicInfo","refs","isAuthed","agreeToTerms","setAgreeToTerms","agreeToPrivacy","setAgreeToPrivacy","linkTo","useLinkTo","loginEntity","confirm","c","password","checked","onChange","Header","Subheader","Section","title","useSubHeading","alt","button","Subsection","ElevatedSection","paddingHorizontal","Picker","Array","items","map","filter","join","find","selectedIndex","multiSelect","i","idx","_item","IndexPath","findIndex","Image","source","uri","iconUrl","Slider","MultiSlider","AddButton","fill","EditButton","SettingsButton","DeleteButton","ExitButton","FavButton","isSelected","KeyboardAvoidingInput","KeyboardAvoidingView","behavior","multiline","numLines","nextValue","paddingLeft","displayButton","clicked","onClick","item_id","rightIcon","investmentStrats","questionStyle","gicsAC","sort","IconifyIcon","DEBUG","icon","xml","currentColor","body","svg","svgProps","pressableProps","clientId","redirectUriText","getCallBackUrl","authUrlText","URL","platform","AppOwnership","Expo","Constants","appOwnership","manifest","hostUri","makeRedirectUrl","YourContentComponent","toast","useToast","inputMessage","setInputMessage","inputPlatform","setInputPlatform","inputValue","setInputValue","getTwitterTokenOther","state","uuid","v4","intervalHandler","openAuth","removeItem","_challenge","Math","random","toString","substring","authUrl","searchParams","append","openBrowserAsync","code","Promise","res","rej","clearInterval","setInterval","linkSocialAccount","callbackUrl","challenge","useTwitterAuth","getGoogleToken","googleUrl","encodeURIComponent","useGoogleAuth","userClaims","claims","handle","twitterHandle","setTwitterHandle","substackUsername","setsubstackUsername","spotifyShow","setSpotifyShow","youtubeChannel","setYoutubeChannel","useFocusEffect","newTwitterhandle","isNewAccount","show","iconPadd","socialStyling","s","platform_idenifier","finally","HandleButton","fontStyle","ProfileButton","userId","alignSelf","overflow","profileUrl","NoDataPanel","message","List","internalData","setInternalData","preloadOffset","datasetKey","currentPage","setCurrentPage","pagesDone","setPagesDone","isLoadingRef","maxItem","setMaxItem","setTriggerHack","sizeCache","datasetKeyRef","maxPage","hack","nextPage","originalLength","newData","vp","viewabilityConfig","itemVisiblePercentThreshold","onViewableItemsChanged","max","viewableItems","vi","index","curMax","needsSplice","maxDisaplyCount","FlatList","listKey","horizontal","getItemLayout","b","numColumns","ListHeaderComponent","ListFooterComponent","maxDisaplyText","stickyHeaderIndices","loadingItem","slice","keyExtractor","renderItem","viewabilityConfigCallbackPairs","noDataMessage","loadingMessage","cellStyle","flexGrow","aspectRatio","flexBasis","empty","useWatchlistPicker","selectedItems","setSelectedItems","selectionConverter","onSelectedItemschanged","symbolConverter","WatchlistPicker","searchText","setSearchText","setDatasetKey","securitiesLoaded","_selectedItems","_symbols","_s","delayRef","clearTimeout","RegExp","security_name","aStartsWith","bStartsWith","localeCompare","gap","from","push","isSec","onPressed","selectedClone","SecurityCell","innerSelected","setInnerSelected","shape","logo_url","resizeMode","position","bottom","top","useThemeColor","colorName","theme","_useColorScheme","colorFromProps","Colors","darkColor","otherProps","Table","columns","rowPressed","columnStyle","headerStyle","headerAlias","columnDynamicStyle","columnsToString","align","Theme","alias","dynamicStyle","hideHeader","info","elevatedView","colStyle","FieldElem","evaluatedStyle","evaluatedValue","renderAuxItem","alert","description","options","extra","window","confirmOption","cancelOption","Alert","LinkBrokerageComponent","accounts","setAccounts","intervalRef","needsRefresh","brokerLink","setLink","removeAccount","generateBrokerageLink","link","getBrokerageAccounts","accountId","brokerage","Brokerage","scheduleForDeletion","React","buttonProps","acc","broker_name","TooltipComponent","visible","setVisible","anchor","appearance","minHeight","minWidth","translateY","translateX","backdropStyle","placement","onBackdropPress","SwitchField","viewStyle","toggleStyle","toolTipText","textStyle","SubscriptionScreen","setIndex","mySubscriptionsCall","Subscriber","getBySubscriber","mySubscribersCall","getByOwner","subscriptions","setSubscriptions","subscribers","setSubscribers","buttonClick","setButtonClick","subtionTask","suberTask","all","p","navigation","indicatorStyle","subscription","user","profile_url","cost","toLocaleDateString","approved","flexShrink","removeSubscription","subscriptionId","subscription_id","SubscriptionSettingsScreen","SubscriptionSettingsView","call","Subscription","getByUserId","submit","insert","goBack","submitRef","pow","approve_new","HtmlView","scrolling","src","isUrl","srcDoc","screens","lockButtons","setLockButtons","setAgrreeToPrivacy","first","last","username","buttonConfig","canGoBack","screen","errors","val","toastMessage","Error","createLogin","json","policy","setFirstTime","createUser","first_name","last_name","converterRef","WatchlistApi","push_notifications","mentions","upvotes","watchlist_changes","portfolio_display","performance","holdings","trades","anaylistProfile","investment_strategy","portfolio_concentration","benchmark","interests","bio","setBio","sliderWidth","setSliderWidth","acText","setAcText","acValues","g","addIfMissing","int","toLowerCase","benches","is_benchmark","onLayout","nativeEvent","layout","containerStyle","step","sliderLength","values","onValuesChange","newInterest","splice","screenKeys","subScreen","userState","display_name","tags","route","params","resolvedIndex","caProps","insets","useSafeAreaInsets","swipeEnabled","tabBarStyle","shouldLoadComponent","Screen","ConfigOverride","path","linking","prefixes","Linking","config","Root","Create","Dash","PostScreen","AccountInformation","VerifyAccount","ResetPassword","NotificationTrade","WatchlistViewer","Modal","NotFound","getStateFromPath","routes","$replace","getActionFromState","NotFoundScreen","styles","container","TouchableOpacity","linkText","StyleSheet","create","profileImageSize","profileImageSmall","actionPanelSize","profileImageStyle","profileImageSmallStyle","bannerAspectRatio","ProfileBanner","profilePic","collapse","extraMarginTop","maxWidth","transform","subscriberCount","platforms","ProfilePic","editMode","navigator","onProfilePicked","SocialBar","logoName","logo","UserLogo","ProfileBar","openProfile","PrimaryChip","isAlt","IconButton","iconSource","AsyncPressable","isDisabled","setIsDisabled","ShareButton","Share","share","ShareIcon","postTotalVerticalMargin","postTotalHorizontalMargin","postSidePad","spaceOnSide","postInnerHeight","itm","windowWidth","_source","postType","resolvePostContent","postUrl","content","htmlBody","matches","exec","PostView","post","ext","is_bookmarked","isBookmarked","setIsBookmarked","is_upvoted","isUpvoted","setIsUpvoted","upvoteCount","setUpvoteCount","showStatus","setShowStatus","postTotalBorder","borderBottomColor","borderBottomWidth","showsHorizontalScrollIndicator","chip","resp","Post","setBookmarked","_id","includes","paddingRight","evaProps","setUpvoted","count","parseHtmlEnteties","str","match","numStr","num","parseInt","fromCharCode","PostContentView","useWindowDimensions","availWidth","scale","openURL","socialStyle","fontFamily","parsedText","platformCreatedAt","SubstackView","subscription_level","tradingpostCreatedAt","PostList","offset","posts","MultiTermFeedPart","allItems","page","multitermfeed","terms","newItems","WatchlistItemRenderItem","secId","intradayChange","price","open","securityId","shownMap","watchlist","note","onChangeNote","canEdit","hideEmptyNote","ticker","watchlistId","useNoteField","setShownMap","column","SecPressable","useWatchlistItemColumns","getIdValue","useMakeSecurityFields","iconField","secField","change","WatchlistViewerScreen","setWatchlist","isSaved","setIsFav","watchlistTickers","setWatchlistTickers","translateHeaderY","scrollRef","w","is_saved","toUpperCase","saveWatchlist","f","onScroll","event","contentOffset","NoteEditor","isEdit","setIsEdit","setNote","WatchlistSection","setFocus","fields","shared","hideNoteOnEmpty","showAddButton","watchlists","PlusContentButton","plusCircle","FeedPart","bookmarkedOnly","feed","AnimatedPath","this","newD","animate","oldD","interpolator","interpolate","_animate","cancelAnimationFrame","animation","_clearInteraction","requestAnimationFrame","timestamp","InteractionManager","createInteractionHandle","delta","animationDuration","component","setNativeProps","setState","clearInteractionHandle","Component","propTypes","PropTypes","bool","renderPlaceholder","func","Path","defaultProps","Chart","xAccessor","yAccessor","yScale","xScale","numberOfTicks","contentInset","gridMax","gridMin","clampX","clampY","mappedData","x","yValues","xValues","yExtent","array","xExtent","yMin","yMax","xMin","xMax","domain","range","clamp","paths","createPaths","ticks","extraProps","_onLayout","Children","child","belowChart","cloneElement","PureComponent","oneOfType","arrayOf","object","any","curve","AreaChart","area","y0","y1","defined","line","AreaStack","colors","order","svgs","series","areas","serie","_","string","showGrid","strokeWidth","BarChart","spacingInner","spacingOuter","paddingInner","paddingOuter","bar","_index","bandwidth","x0","x1","obj","extent","calcExtent","indexes","calcIndexes","xDomain","yDomain","calcXScale","calcYScale","calcAreas","barSvg","GroupedBarChart","_data","barWidth","collectionIndex","valueIndex","dataExtent","keyIndex","entry","entryIndex","isNaN","valueAccessor","getSeries","showZeroAxis","StackedBarGrouped","coordinatesToPathCommands","showTopBorder","showBottomBorder","commands","marker","topLeft1","topLeft2","bottomLeft1","bottomLeft2","bottomRight1","bottomRight2","topRight1","topRight2","commandsToSvgPath","command","trim","initialBorderRadius","innerBarSpace","stack","stackIndex","leftMargin","barHeight","mergedValues","stacks","indexStack","areaIndex","indexArea","LineChart","ChartGrouped","dataArray","pathSvg","LineChartGrouped","lines","LineChartGate","hasOwnProperty","ProgressCircle","progressColor","startAngle","endAngle","animateDuration","cornerRadius","progress","outerDiameter","isFinite","arcs","outerRadius","innerRadius","PI","XAxis","d3Scale","formatLabel","_getX","valueSvg","textAnchor","originX","alignmentBaseline","YAxis","getY","longestValue","reduce","prev","curr","originY","HorizontalLine","other","x2","y2","stroke","Point","radius","cx","cy","Tooltip","pointStroke","rx","ry","Horizontal","tick","Vertical","Both","dataPoints","Direction","VERTICAL","HORIZONTAL","BOTH","Grid","direction","oneOf","InteractiveChart","apx","Dimensions","date","return","dateList","priceList","positionX","setPositionX","panResponder","PanResponder","onStartShouldSetPanResponder","evt","gestureState","onStartShouldSetPanResponderCapture","onMoveShouldSetPanResponder","onMoveShouldSetPanResponderCapture","onPanResponderTerminationRequest","onPanResponderGrant","updatePosition","locationX","onPanResponderMove","onPanResponderRelease","YAxisWidth","chartWidth","xN","xDistance","Number","toFixed","verticalContentInset","panHandlers","stopColor","stopOpacity","strokeDasharray","period","dateString","toDateString","toDateMonthYear","rotation","ButtonGroup","arr","unselectedStyle","onValueChange","HoldingRenderItem","security_id","optionInfo","strike_price","expiration","isOwner","cost_basis","pnl","TradeRenderItem","quantity","amount","getUTCHours","tabBarMargin","periods","ProfileScreen","setUser","setWatchlists","setSummary","setHoldings","returns","setReturns","twReturns","settwReturns","portPeriod","setPortPeriod","dim","bannerHeight","useProfileBannerSize","headerHeight","ButtonMargin","clampMax","minViewHeight","collapsed","setCollapsed","isMaxed","setIsMaxed","translation","inputRange","outputRange","extrapolate","manager","abs","removeAllListeners","tab","setTab","getHoldings","getWatchlists","holdingsP","today","summary","getPortfolio","getReturns","startDate","setDate","endDate","twr","day","toUTCString","displayHoldings","is_subscribed","displayTrades","displayPerformance","ProfilePage","currentIndex","$page","newArr","getTrades","$limit","onMomentumScrollEnd","scrollToOffset","animated","bannerPic","is_pending","insertWithNotification","start_date","LoginButtons","createAccountProps","loginProps","cleanUp","setSelectedIndex","useInitialRoute","userRef","passRef","setUsername","setPassword","isLoggingIn","setIsLoggingIn","HTMLDivElement","stonks","n","querySelector","lastItem","lastItem2","floor","index2","forgotPassword","hideAll","WTF_View","padSmall","SideMenu","DrawerContentScrollView","MenuItem","isLast","versionCode","SvgElement","DrawerItem","closeDrawer","labelStyle","seen","NotificationTab","NewTradeNotification","dt","response","dateTime","dtFmt","getDay","flexWrap","UserInteractionNotification","SubscriptionNotification","approval","setApproval","subscriber_id","updateNotification","e","DefaultNotification","LimitedBlockList","listProps","BlockListModalScreen","stateLabel","stateValue","SearchBar","tfRef","Search","scaleX","clear","onTextChange","clearButtonMode","BottomTab","createBottomTabNavigator","DashComponents","Portfolio","quickWatchlist","setQuickWatchlist","portfolio","setPortfolio","focus","getAllWatchlists","lists","quick","saved_by_count","cummReturn","beta","sharpe","exposure","long","short","gross","net","created","saved","Feed","searchType","people","setPeople","searchSecurities","setSearchSecurities","debounceRef","search","term","modSearch","regex","company_name","notifs","setNotifs","timer","ids","seenNotifications","notificationIds","run","borderStyle","notifications","listAlerts","newNotifications","BottomTabNavigator","hasNotifications","setHasNotifications","notificationCount","unseenCount","interval","Navigator","initialRouteName","screenOptions","headerShown","unmountOnBlur","tabBarShowLabel","lazy","tabBarIcon","focused","activeType","navIcon","ImageBackground","initialParams","Drawer","createDrawerNavigator","HeaderTp","DrawerPart","useLegacyImplementation","drawerContent","headerTitleAlign","headerTitle","headerRight","routeName","getFocusedRouteNameFromRoute","useNavigationState","dismiss","KeyboardClose","isMarked","AccountSettingsScreen","mentionCheck","setMentionCheck","upvotesCheck","setUpvotesCheck","watchlistChangeCheck","setWatchlistChangeCheck","performanceCheck","setPerformanceCheck","holdingsCheck","setHoldingsCheck","tradesCheck","setTradesCheck","analystCheck","setAnalystCheck","openLink","isAnalystChecked","isPerformanceChecked","isHoldingsChecked","isTradesChecked","isMentionChecked","isUpvoteChecked","isWatchlistChangeChecked","AccountInfoScreen","definedOrValue","is_deleted","accountUpdates","setAccountUpdates","clone","setUpdates","newTwitterHandle","AccountInfoContent","_updates","AdvancedTabContent","toolTipStyle","AuthScreen","ChangePasswordScreen","oldPass","setOldPass","newPass","setNewPass","setConfirm","hasToken","resetPassword","CompanyScreen","security","setSecurity","securityPrices","setSecurityPrices","isFav","setDescription","isOnQuickWatch","getPrices","includeIntraday","includeHistorical","prices","historical","close","pxChange","quickadd","add","week_52_high","week_52_low","ImagePickerScreen","imageUri","setImageUri","editorVisible","setEditorVisible","imageData","setImageData","selectPhoto","ImagePicker","granted","pickerResult","base64","cancelled","launchEditor","Button","uploadProfilePic","image","onCloseEditor","fixedCropAspectRatio","lockAspectRatio","minimumCropDimensions","onEditingComplete","resizeResult","manipulateAsync","resize","SaveFormat","JPEG","mode","NotificationTradeScreen","listTrades","newTrades","toTwoDecimals","ss","charAt","parseFloat","TextEditor","html","setHtml","pell","init","element","onChangeHtml","actions","prompt","innerHTML","className","PostEditorScreen","subLevel","setSubLevel","postEntity","photos","setLocked","editorRef","contentFocused","setContentFocused","onTouchEnd","focusContentEditor","onFocus","onBlur","initialContentHTML","editor","CommentView","comment","commentTotalBorder","created_at","CommentsList","comments","setPost","postId","postCommments","setPostComments","newComment","setNewComment","commentAdded","setCommentAdded","Comment","postList","valueOf","related_type","related_id","TableModalScreen","tableProps","VerificationScreen","verificationToken","imVerified","setImVerified","verified","validateUser","sendEmailValidation","VirtualListWithButtons","listChildren","WatchlistEditorScreen","pickerProps","setName","setWatchlistType","setMagic","watchlistData","date_added","WatchlistScreen","AppInformationScreen","sliderState","setSliderState","widthOg","paragraphSize","pageIndex","scrollEventThrottle","pagingEnabled","indexOfNextScreen","setSliderPage","BrokeragePickerScreen","IbkrInfoScreen","submittedText","setSubmittedText","accountIds","instructions","createIbkrAccounts","account_ids","emailBody","RobhinhoodLoginScreen","multifactor","setMultifactor","challengeResponseId","setChallengeResponseId","counter","hoodPing","requestId","challengeStatus","sleep","robinhoodLogin","mfaCode","initialLogin","mfa","mfaLogin","TwitterAuthWebViewScreen","allowFileAccess","onNavigationStateChange","tURL","hostname","pathname","query","handleNotification","shouldShowAlert","shouldPlaySound","shouldSetBadge","Stack","createNativeStackNavigator","initialRoute","RootNavigator","headerBackVisible","WelcomeScreen","CreateAccountScreen","Group","headerTintColor","headerBackground","contentStyle","useRoute","useLinkBuilder","buildLink","Navigation","colorScheme","NavigationContainer","LinkingConfiguration","DarkTheme","DefaultTheme","configApi","apiBaseUrl","registerRootComponent","isLoadingComplete","setLoadingComplete","SplashScreen","Font","FontAwesome","results","useCachedResources","useURL","eva","icons","EvaIconsPack","StatusBar","exports","__esModule","default","module","api","locals","___CSS_LOADER_API_IMPORT___"],"mappings":"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","file":"static/js/app.0a94c3ba.chunk.js","sourcesContent":["import {useCallback, useEffect, useState} from 'react';\r\nimport {EventRegister} from 'react-native-event-listeners'\r\nimport {LoginResult} from \"@tradingpost/common/api/entities/static/AuthApi\";\r\nimport {IUserGet, ISecurityList} from \"@tradingpost/common/api/entities/interfaces\";\r\nimport AsyncStorage, {useAsyncStorage} from '@react-native-async-storage/async-storage'\r\n\r\n//current_user\r\n//token \r\nexport interface LDS {\r\n    currentUser: IUserGet | undefined,\r\n    loginResult: LoginResult | undefined\r\n    authToken: string | undefined,\r\n    hasAuthed: boolean | undefined,\r\n    firstTime: boolean | undefined,\r\n    securities: {\r\n        list: ISecurityList[],\r\n        byId: Record<number, ISecurityList>,\r\n        bySymbol: Record<string, ISecurityList>\r\n    } | undefined,\r\n}\r\n\r\n\r\nlet lds: Partial<Record<keyof LDS, any>> = {}\r\nlet isCachedMap: Partial<Record<keyof LDS, true>> = {\r\n    authToken: true,\r\n    hasAuthed: true\r\n}\r\n\r\nlet isExplirable: Partial<Record<keyof LDS, { duration: number, cachedAt?: number }>> = {\r\n    securities: {\r\n        duration: 4/*hours*/ * 60 * 60 * 1000\r\n    }\r\n}\r\n\r\n\r\nconst LDS_CACHE_KEY = \"lds\"\r\nconst ldsChangedEvenName = \"lds_changed\";\r\n\r\nexport const useData = <T extends keyof LDS>(key: T) => {\r\n    const expireCheck = isExplirable[key]\r\n    if (expireCheck?.cachedAt && expireCheck.duration <= (Date.now() - expireCheck.cachedAt)) {\r\n        setValue(key, undefined);\r\n    }\r\n\r\n    const [value, _setValue] = useState<LDS[T]>(lds[key]);\r\n\r\n    useEffect(() => {\r\n        const sub = EventRegister.addEventListener(ldsChangedEvenName, (data) => {\r\n\r\n            if (data.key === key) {\r\n                _setValue(lds[key])\r\n            }\r\n\r\n        });\r\n        return () => {\r\n            EventRegister.removeEventListener(sub as string)\r\n        };\r\n    }, [key])\r\n    return {\r\n        value,\r\n        setValue: useCallback(async (v: typeof value) => {\r\n            await setValue(key, v)\r\n        }, [key])\r\n    }\r\n\r\n}\r\n\r\nexport const setValue = async <T extends keyof LDS>(key: T, v: LDS[T]) => {\r\n    lds[key] = v;\r\n    if (isCachedMap[key]) {\r\n        const cachedLds: Partial<LDS> = {...lds}\r\n        Object.keys(lds).forEach((k) => {\r\n            if (!isCachedMap[k as keyof LDS]) {\r\n                //console.log(\"DELETING KEY:\" + k);\r\n                delete cachedLds[k as keyof LDS]\r\n            } else {\r\n                //console.log(\"CACHING KEY\" + k)\r\n            }\r\n        })\r\n        await AsyncStorage.setItem(LDS_CACHE_KEY, JSON.stringify(cachedLds));\r\n    }\r\n    EventRegister.emit(ldsChangedEvenName, {key})\r\n}\r\n\r\nexport const initLds = async () => {\r\n    //load all cached values\r\n    //console.log(\"Initing LDS\");\r\n    const result = await AsyncStorage.getItem(LDS_CACHE_KEY);\r\n    if (result) {\r\n        //console.log(\"Results\" + result);\r\n        lds = JSON.parse(result);\r\n        Object.keys(lds).forEach((k) =>\r\n            EventRegister.emit(ldsChangedEvenName, {k}));\r\n    }\r\n    return lds;\r\n};","import Auth from '@tradingpost/common/api/entities/static/AuthApi';\r\nimport { useCallback, useEffect } from \"react\";\r\nimport User from '@tradingpost/common/api/entities/apis/UserApi';\r\nimport { useData } from \"./lds\";\r\nimport { useState } from 'react';\r\nimport { EventRegister } from 'react-native-event-listeners';\r\nimport { Log } from './utils/logger';\r\nimport { useNavigation } from '@react-navigation/native';\r\n\r\n\r\n// if (email !== '') {\r\n//     try {\r\n//         await registerDeviceForNotifications();\r\n//     }\r\n//     catch (ex) {\r\n//         console.error(ex);\r\n//     }\r\n// }\r\n\r\n\r\nconst loginStateChangedEventName = \"LOGIN_STATE_CAHNGED\";\r\n\r\n\r\n\r\nexport const useAppUser = (tracker?: string) => {\r\n\r\n    const { value: _appUser, setValue: setAppUser } = useData(\"currentUser\");\r\n    const { value: _loginResult, setValue: setLoginResult } = useData(\"loginResult\");\r\n    const { value: _authToken, setValue: setAuthToken } = useData(\"authToken\");\r\n    const [toggleRefresh, setToggleRefresh] = useState(true);\r\n    const nav = useNavigation();\r\n    type LoginState = {\r\n        appUser: typeof _appUser,\r\n        loginResult: typeof _loginResult,\r\n        authToken: typeof _authToken,\r\n        //TODO: stop gap... but we should make this resolved on the server probably \r\n        setupStatus?: {\r\n            needsSettings: boolean,\r\n            needsAnalystSettings: boolean\r\n        },\r\n        updated: Date\r\n    };\r\n\r\n    const createLoginState = (currentUser: typeof _appUser, loginResult: typeof _loginResult): LoginState => {\r\n        return {\r\n            updated: new Date(),\r\n            appUser: currentUser,\r\n            authToken: loginResult?.user_id ? loginResult.token : undefined,\r\n            loginResult: loginResult,\r\n            setupStatus: currentUser ? {\r\n                needsSettings: !currentUser.settings || !Object.keys(currentUser.settings).length,\r\n                needsAnalystSettings: Boolean(currentUser.settings?.analyst) && !currentUser.analyst_profile\r\n            } : undefined\r\n        }\r\n    }\r\n\r\n    const [loginState, setLoginState] = useState(_appUser || _loginResult ? createLoginState(_appUser, _loginResult) : undefined)\r\n\r\n    useEffect(() => {\r\n        if (tracker)\r\n            console.log(\"CREATING WITH A TRACKER OF \" + tracker);\r\n        const sub = EventRegister.addEventListener(loginStateChangedEventName, (data) => {\r\n            if (tracker)\r\n                console.log(\"TRIGGERED TRACKER OF \" + tracker);\r\n            setLoginState(data);\r\n        });\r\n        return () => {\r\n            EventRegister.removeEventListener(sub as string)\r\n        };\r\n    }, [tracker])\r\n\r\n    return {\r\n        loginState,\r\n        forceTrigger: () => {\r\n            if (_loginResult) {\r\n                setLoginResult({ ..._loginResult });\r\n            }\r\n        },\r\n        updateState: () => {\r\n            if (_loginResult) {\r\n                setLoginResult({ ..._loginResult });\r\n            }\r\n            if (loginState) {\r\n                setLoginState({ ...loginState, updated: new Date() })\r\n            }\r\n        },\r\n        signIn: useCallback(async (email: string, pass: string) => {\r\n            setLoginState(undefined);\r\n            const value = await Authentication.signIn(email, pass)\r\n            setLoginResult(value.loginResult);\r\n            setAppUser(value.currentUser);\r\n            if (value.loginResult.user_id)\r\n                setAuthToken(value.loginResult.token);\r\n\r\n            EventRegister.emit(loginStateChangedEventName, createLoginState(value.currentUser, value.loginResult))\r\n\r\n        }, []),\r\n        signOut: useCallback(() => {\r\n            Auth.signOut();\r\n            setAuthToken(undefined);\r\n            setLoginResult(undefined);\r\n            setAppUser(undefined);\r\n            setLoginState(undefined);\r\n            EventRegister.emit(loginStateChangedEventName, undefined);\r\n            nav.navigate('Root');\r\n        }, [])\r\n    }\r\n}\r\n\r\nexport const Authentication = {\r\n    signIn: async (email: string, pass: string) => {\r\n        const result = await Auth.login(email, pass);\r\n        return {\r\n            loginResult: result,\r\n            currentUser: result.user_id ? await User.get(result.user_id) : undefined\r\n        }\r\n    }\r\n}\r\n\r\n","import { Api } from \"@tradingpost/common/api\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useData } from \"./lds\";\r\n\r\nconst fetchSecurities = async () => {\r\n    console.log(\"I'm getting securities\");\r\n    const list = await Api.Security.extensions.list(),\r\n        byId: Record<number, typeof list[0]> = {},\r\n        bySymbol: Record<string, typeof list[0]> = {}\r\n    list.forEach((r) => {\r\n        byId[r.id] = r;\r\n        bySymbol[r.symbol] = r;\r\n    })\r\n    return {\r\n        list,\r\n        byId,\r\n        bySymbol\r\n    }\r\n}\r\nlet securityListTask: ReturnType<typeof fetchSecurities>\r\nexport const getSecurityList = () => securityListTask || (securityListTask = fetchSecurities())\r\n\r\n\r\nexport const useSecuritiesList = () => {\r\n\r\n    const [err, setErr] = useState<any>()\r\n    const { value: securities, setValue: setSecurities } = useData(\"securities\");\r\n    const [localValue, setLocalValue] = useState(securities)\r\n\r\n\r\n    useEffect(() => {\r\n        if (!securities)\r\n            getSecurityList()\r\n                .then((r) => {\r\n                    setSecurities(r)\r\n                    setLocalValue(r);\r\n                }).catch(ex => setErr(ex));\r\n    }, [securities])\r\n\r\n    return {\r\n        err,\r\n        securities: localValue || {\r\n            byId: {},\r\n            bySymbol: {},\r\n            list: []\r\n        }\r\n    }\r\n}\r\n","//Should change this to a process.env\r\nlet enableVerbose = true;\r\n\r\nconst verbose = (msg: string) => {\r\n    if (enableVerbose) {\r\n        console.log(msg);\r\n    }\r\n}\r\nconst error = (err: string | Error | unknown) => {\r\n    console.error(err);\r\n}\r\nconst tryCatch = async <T>(action: () => T) => {\r\n    try {\r\n        return await action();\r\n    } catch (ex) {\r\n        error(ex)\r\n    }\r\n}\r\n\r\nexport const Log = {\r\n    enableVerbose: (enabled: boolean) => {\r\n        enableVerbose = enabled\r\n    },\r\n    verbose,\r\n    error,\r\n    tryCatch\r\n}\r\n","// Render message if can send notifications\r\n// Pass along user device id to database and platform\r\n// Should be done in Settings / Login / Sign Up(After a user creates their email / password) & its accepted\r\nimport * as Notifications from 'expo-notifications';\r\nimport * as Device from 'expo-device';\r\nimport { Platform } from 'react-native';\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport * as Localization from 'expo-localization';\r\nimport { Log } from './logger';\r\n\r\nexport const registerDeviceForNotifications = async () => {\r\n    return await Log.tryCatch(async () => {\r\n        let token;\r\n        if (Device.isDevice) {\r\n            const { status: existingStatus } = await Notifications.getPermissionsAsync();\r\n            let finalStatus = existingStatus;\r\n            if (existingStatus === 'undetermined') {\r\n                const { status } = await Notifications.requestPermissionsAsync();\r\n                finalStatus = status;\r\n            }\r\n\r\n            if (finalStatus !== 'granted') {\r\n                return;\r\n            }\r\n            token = await (await Notifications.getDevicePushTokenAsync()).data;\r\n            await Api.Notification.extensions.registerUserDevice({\r\n                provider: Platform.OS,\r\n                deviceId: token,\r\n                timezone: Localization.timezone\r\n            });\r\n        }\r\n\r\n        if (Platform.OS === 'android') {\r\n            await Notifications.setNotificationChannelAsync('default', {\r\n                name: 'default',\r\n                importance: Notifications.AndroidImportance.MAX,\r\n                vibrationPattern: [0, 250, 250, 250],\r\n                lightColor: '#282869',\r\n            });\r\n        }\r\n        return token;\r\n    })\r\n}","import React, { PropsWithChildren, useEffect, useRef, useState } from \"react\";\r\nimport { View, Image } from \"react-native\";\r\nimport { SvgProps } from \"react-native-svg\";\r\n\r\n\r\nexport const SvgExpo = (props: SvgProps & { onReady?: (parent: any) => void }) => {\r\n    const url = (props.children as any).type;\r\n    const lastRef = useRef(\"\");;\r\n    const onReadyRef = useRef(props.onReady);\r\n    onReadyRef.current = props.onReady;\r\n    const divRef = useRef<HTMLDivElement>(null);\r\n\r\n    const [svgData, setSvgData] = useState(\"\");\r\n    useEffect(() => {\r\n\r\n\r\n        lastRef.current = url;\r\n        fetch(url, {}).then((data) => {\r\n            if (data.ok) {\r\n                data.text().then((result) => {\r\n                    if (lastRef.current === url)\r\n                        setSvgData(result);\r\n                    // //hacky right now ... will fix later \r\n\r\n                    setTimeout(() => {\r\n                        if (onReadyRef.current)\r\n                            onReadyRef.current(divRef.current)\r\n                    }, 222)\r\n                });\r\n            }\r\n            else throw data.statusText;\r\n        }).catch(ex => console.log(ex));\r\n\r\n\r\n    }), [url]\r\n\r\n\r\n\r\n    //hacky but gotta convert \r\n    return <View style={props.style}>\r\n        <div ref={divRef} style={{ height: \"100%\", width: \"100%\", justifyContent: \"center\", alignContent: \"center\", alignItems: \"center\", display:\"flex\" }} dangerouslySetInnerHTML={{ __html: svgData }} />\r\n    </View>\r\n}","import _IconNoBg from './assets/store-front-logo2-alt.svg'\r\nimport _IconBg from './assets/store-front.svg'\r\nimport _AppTitle from './assets/app-title.svg'\r\nimport _SplashWelcome from './assets/splash-welcome.svg'\r\nimport _ClimbingMountain from './assets/ClimbingMountain.svg'\r\nimport _Debate from './assets/Debate.svg'\r\nimport _Studying from './assets/Studying.svg'\r\nimport _Analyze from './assets/analyze.svg'\r\nimport _Bank from './assets/bank.svg'\r\nimport _IBKR from './assets/IBKR.svg'\r\nimport _RobinhoodLogo from './assets/robinhood_logo.svg'\r\nimport _RobinhoodLogoLong from './assets/robinhood_logo_long.svg'\r\n\r\n\r\n\r\nimport Logo from './assets/logo.svg'\r\nimport LogoNoBg from './assets/logo-no-bg.svg'\r\n\r\n// import MenuIcon from './assets/side-menu/menu-icon.svg';\r\nimport _PlusIcon from './assets/misc/plus.svg';\r\nimport _UpvoteIcon from './assets/post-feed/upvote.svg'\r\nimport _CommentIcon from './assets/post-feed/comment.svg'\r\nimport _BookmarkActive from './assets/post-feed/bookmark-active.svg'\r\nimport _BookmarkActiveBlue from './assets/post-feed/bookmark-active-blue.svg'\r\nimport _BookmarkInactive from './assets/post-feed/bookmark.svg'\r\nimport _Retweet from './assets/post-feed/ei_retweet.svg'\r\nimport _PremiumStar from './assets/post-feed/PremiumStar.svg'\r\nimport _SendIcon from './assets/post-feed/SendIcon.svg'\r\n\r\n// /** Side Menu Icons */\r\nimport Account from './assets/side-menu/Account.svg'\r\nimport Competition from './assets/side-menu/Competition.svg'\r\nimport Feedback from './assets/side-menu/Feedback.svg'\r\nimport Help from './assets/side-menu/Help.svg'\r\nimport Information from './assets/side-menu/Information.svg'\r\nimport Learn from './assets/side-menu/Learn.svg'\r\nimport LogOut from './assets/side-menu/Log Out.svg'\r\nimport Profile from './assets/side-menu/Profile.svg'\r\nimport Watchlist from './assets/side-menu/Watchlist.svg'\r\nimport Bank_Link from './assets/bank-link-icon.svg'\r\n\r\nimport YouTubeLogo from './assets/@iconify/youtube-icon'\r\nimport SpotifyLogo from './assets/@iconify/spotify-icon'\r\n\r\nimport TwitterLogo from './assets/@iconify/twitter'\r\n\r\nimport LinkedInLogo from './assets/@iconify/linkedin-icon'\r\n\r\nimport SubstackLogo from './assets/@iconify/substack'\r\n\r\nimport React, { Component } from 'react'\r\nimport { SvgExpo } from './components/SvgExpo'\r\nimport { SvgProps } from 'react-native-svg'\r\n\r\nexport const sideMenu = {\r\n    Account,\r\n    Competition,\r\n    Feedback,\r\n    Information,\r\n    Help,\r\n    Learn,\r\n    LogOut,\r\n    Profile,\r\n    Watchlist,\r\n    Bank_Link,\r\n    BookmarkActive: _BookmarkActive,\r\n    BookmarkInactive: _BookmarkInactive,\r\n    BookmarkActiveBlue: _BookmarkActiveBlue\r\n}\r\n\r\nfunction makeExpoSvg(Svg: React.FC<SvgProps>) {\r\n    return (props: SvgProps & { onReady?: (parent: any) => void }) => <SvgExpo {...props}><Svg /></SvgExpo>\r\n}\r\n\r\nexport const AppTitle = makeExpoSvg(_AppTitle)\r\nexport const SplashWelcome = makeExpoSvg(_SplashWelcome)\r\n\r\nexport const ClimbingMountain = makeExpoSvg(_ClimbingMountain)\r\nexport const Debate = makeExpoSvg(_Debate)\r\nexport const Studying = makeExpoSvg(_Studying)\r\nexport const Analyze = makeExpoSvg(_Analyze);\r\nexport const Bank = makeExpoSvg(_Bank);\r\nexport const IBKR = makeExpoSvg(_IBKR);\r\nexport const RobinhoodLogo = makeExpoSvg(_RobinhoodLogo);\r\nexport const RobinhoodLogoLong = makeExpoSvg(_RobinhoodLogoLong);\r\n//export const Bank_Link = makeExpoSvg(_Bank_Link);\r\n\r\nexport const IconBg = makeExpoSvg(_IconBg)\r\nexport const IconNoBg = makeExpoSvg(_IconNoBg)\r\nexport const PlusIcon = makeExpoSvg(_PlusIcon)\r\n\r\nexport const Retweet = makeExpoSvg(_Retweet);\r\n\r\n\r\n// IconBg,\r\n// IconNoBg,\r\n// MenuIcon,\r\n// PlusIcon,\r\nexport const UpvoteIcon = makeExpoSvg(_UpvoteIcon);\r\nexport const CommentIcon = makeExpoSvg(_CommentIcon);\r\nexport const SendIcon = makeExpoSvg(_SendIcon);\r\nexport const InfoIcon = makeExpoSvg(Information);\r\nexport const BookmarkActive = makeExpoSvg(_BookmarkActive);\r\nexport const BookmarkActiveBlue = makeExpoSvg(_BookmarkActiveBlue);\r\nexport const PremiumStar = makeExpoSvg(_PremiumStar);\r\n\r\n\r\nexport { Logo, LogoNoBg };\r\n\r\n\r\nexport const rnui = {\r\n    chevronDown: require('./assets/rnui/chevronDown.png'),\r\n    add: require('./assets/rnui/add.png'),\r\n    plus: require('./assets/rnui/plus.png')\r\n}\r\nexport type NavIconKeys = \"Portfolio\" | \"Search\" | \"Feed\" | \"Notification\"; //| \"Bookmark\";\r\n\r\nexport const NavIconTypeOverride: Partial<Record<NavIconKeys, any>> = {\r\n    Notification: {\r\n        no: {\r\n            active: require('./assets/nav-bar/notification-active.png'),\r\n            inactive: require('./assets/nav-bar/notification.png'),\r\n        },\r\n        has: {\r\n            active: require('./assets/nav-bar/has-notification-active.png'),\r\n            inactive: require('./assets/nav-bar/has-notification.png')\r\n        }\r\n    }\r\n}\r\n\r\nexport const navIcons: Record<NavIconKeys, { active: number, inactive: number }> = {\r\n    \"Portfolio\": {\r\n        active: require(\"./assets/nav-bar/portfolio-active.png\"),\r\n        inactive: require(\"./assets/nav-bar/portfolio.png\")\r\n    },\r\n    \"Feed\": {\r\n        active: require(\"./assets/nav-bar/feed-active.png\"),\r\n        inactive: require(\"./assets/nav-bar/feed.png\")\r\n    },\r\n    \"Search\": {\r\n        active: require(\"./assets/nav-bar/search-active.png\"),\r\n        inactive: require(\"./assets/nav-bar/search.png\")\r\n    },\r\n    // \"Bookmark\": {\r\n    //     active: require(\"./assets/nav-bar/bookmark-active.png\"),\r\n    //     inactive: require(\"./assets/nav-bar/bookmark.png\")\r\n    // },\r\n    \"Notification\": {\r\n        active: require(\"./assets/nav-bar/notification-active.png\"),\r\n        inactive: require(\"./assets/nav-bar/notification.png\")\r\n    },\r\n}\r\n\r\nexport const BookmarkIcons = {\r\n    active: require(\"./assets/nav-bar/bookmark-active.png\"),\r\n    inactive: require(\"./assets/nav-bar/bookmark.png\")\r\n}\r\n\r\n\r\nexport const topBarIcons = {\r\n    menu: require('./assets/nav-bar/menu.png')\r\n}\r\n\r\nexport const social = {\r\n    TwitterLogo,\r\n    LinkedInLogo,\r\n    YouTubeLogo,\r\n    SubstackLogo,\r\n    SpotifyLogo,\r\n}\r\n\r\n\r\nexport const postBg = require(\"./assets/post-feed/flatgrad.png\");","const tintColorLight = '#2f95dc';\r\nconst tintColorDark = '#fff';\r\n\r\nexport default {\r\n  light: {\r\n    text: '#000',\r\n    background: '#fff',\r\n    tint: tintColorLight,\r\n    tabIconDefault: '#ccc',\r\n    tabIconSelected: tintColorLight,\r\n  },\r\n  dark: {\r\n    text: '#fff',\r\n    background: '#000',\r\n    tint: tintColorDark,\r\n    tabIconDefault: '#ccc',\r\n    tabIconSelected: tintColorDark,\r\n  },\r\n};\r\n\r\nexport const AppColors  = {\r\n  primary : \"#11146F\",\r\n  secondary:\"#35A265\",\r\n  background :\"#F7f8f8\"\r\n}\r\n\r\n\r\n","import { FlexStyle, TextStyle, ViewStyle } from \"react-native\";\r\nimport { AppColors } from \"./constants/Colors\";\r\n\r\nexport const flex = { flex: 1 } as ViewStyle\r\nexport const row: ViewStyle = { flexDirection: \"row\" }\r\nexport const shadow: ViewStyle = {\r\n    elevation: 4,\r\n    shadowOffset: { height: 2, width: 2 },\r\n    shadowColor: \"black\",\r\n    shadowOpacity: 0.125,\r\n    shadowRadius: 0.25,\r\n}\r\n\r\nexport const noMargin = {\r\n    marginTop: 0,\r\n    marginRight: 0,\r\n    marginBottom: 0,\r\n    marginLeft: 0,\r\n}\r\n\r\nexport function rounded(size: number) {\r\n    return {\r\n        height: size,\r\n        width: size,\r\n        borderRadius: size / 2\r\n    }\r\n}\r\n\r\nexport const fonts = {\r\n    xSmall: 12,\r\n    small: 16,\r\n    medium: 20,\r\n    large: 24,\r\n    xLarge: 32\r\n}\r\n\r\nexport function font(size: keyof typeof fonts, color: string = \"black\", isBold: boolean = false) {\r\n    return {\r\n        fontSize: fonts[size],\r\n        fontWeight: isBold ? \"bold\" : undefined,\r\n        color: color\r\n    } as TextStyle\r\n}\r\n\r\n\r\nexport const sizes = {\r\n    rem0_5: 8,\r\n    rem1: 16,\r\n    rem1_5: 24,\r\n    rem2: 32,\r\n    rem4: 64,\r\n    rem6: 96,\r\n    rem7: 112,\r\n    rem8: 128,\r\n    rem9: 144,\r\n    rem10: 160,\r\n    rem12: 192,\r\n    rem16: 256,\r\n    borderRadius: 2\r\n}\r\n\r\n\r\n\r\nexport const paddView = [flex, { padding: sizes.rem1, backgroundColor: AppColors.background }]\r\nexport const paddViewWhite = [...paddView, { backgroundColor: \"white\" }]\r\n\r\nexport const elevated =\r\n{\r\n    marginHorizontal: 2,\r\n    paddingVertical: 8,\r\n    backgroundColor: \"white\",\r\n    borderColor: \"#ccc\",\r\n    borderWidth: 1,\r\n    borderRadius: 4,\r\n    marginBottom: 16,\r\n    ...shadow\r\n}\r\n\r\n\r\nexport const chartColors = [\r\n    '#2dadf4',\r\n    '#f5523b',\r\n    '#66a1fa',\r\n    '#ff4a6b',\r\n    '#9891f4',\r\n    '#f95399',\r\n    '#c37de1',\r\n    '#e567c1']\r\n\r\n\r\nexport const social = {\r\n    substackColor: '#ff7731'\r\n}\r\n\r\nexport const bannerText = {\r\n    textAlign: \"center\", margin: sizes.rem2, fontSize: fonts.large, lineHeight: fonts.large * 1.5,\r\n} as TextStyle\r\nexport const thinBannerText = [bannerText, {\r\n    marginHorizontal: 0, marginVertical: sizes.rem0_5\r\n} as TextStyle]\r\n\r\n\r\n\r\nexport const textInputWiz = {\r\n    marginVertical: sizes.rem0_5\r\n} as ViewStyle","import { getActionFromState, getStateFromPath, LinkingContext, NavigationContainerRefContext, useLinkTo } from \"@react-navigation/native\";\r\nimport { To } from \"@react-navigation/native/lib/typescript/src/useLinkTo\";\r\nimport { IndexPath } from \"@ui-kitten/components\";\r\nimport React from \"react\";\r\nimport { useCallback, useEffect, useLayoutEffect, useMemo, useRef, useState } from \"react\";\r\nimport { Animated, Keyboard, TextProps, ViewProps } from \"react-native\";\r\nimport { PickerProps } from \"../components/Picker\";\r\n\r\nimport { bannerText } from \"../style\";\r\n\r\n\r\nexport interface IEntity<T> {\r\n    data: Readonly<T>,\r\n    update(updates: Partial<T>): void,\r\n    hasChanged: boolean,\r\n    resetData(newData: T): void\r\n}\r\n\r\n\r\nconst ensureIterable = (value: any): value is Iterable<any> => {\r\n    return Symbol.iterator in Object(value);\r\n}\r\n\r\n\r\nexport const useOpacityAnim = () => {\r\n    const opacityAnim = useRef(new Animated.Value(0)).current\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n    return useMemo(() => ({\r\n        opacityAnim,\r\n        BannerText: (props: Omit<TextProps, \"style\">) => {\r\n            return <Animated.Text\r\n                style={[bannerText, { opacity: opacityAnim }]}\r\n                {...props}\r\n            />\r\n        },\r\n        AppearView: (props: Animated.AnimatedProps<ViewProps>) => {\r\n            const styleProp = [{ opacity: opacityAnim } as Animated.AnimatedProps<ViewProps>[\"style\"]]\r\n            if (props.style) {\r\n                if (ensureIterable(props.style))\r\n                    styleProp.unshift(...props.style as any)\r\n                else\r\n                    styleProp.unshift(props.style)\r\n            }\r\n\r\n            return <Animated.View {...props} style={[styleProp]} />\r\n        }\r\n    }), [opacityAnim])\r\n}\r\n\r\nexport function useReadonlyEntity<T>(seedValue: T): IEntity<T> {\r\n    const [data, setData] = useState<Readonly<T>>(seedValue)\r\n    const [hasChanged, setHasChanged] = useState(false);\r\n    return {\r\n        data,\r\n        hasChanged,\r\n        resetData: useCallback(function (d) {\r\n            setHasChanged(false);\r\n            setData(d);\r\n        }, []),\r\n        update: useCallback((updates: Partial<T>) => {\r\n            setHasChanged(true);\r\n            setData((_entity) => ({\r\n                ..._entity,\r\n                ...updates\r\n            }))\r\n        }, [])\r\n    }\r\n}\r\n\r\ntype EnsureTypeFrom<T, U extends keyof T, S> = T[U] extends (S) ? (((v: S) => S) | undefined | null) : (v: S) => T[U]\r\ntype EnsureTypeTo<T, U extends keyof T, S> = T[U] extends (S) ? (((v: S) => S) | undefined | null) : (v: T[U]) => S\r\n\r\ntype ConvertType<T, U extends keyof T, S> = {\r\n    toType: EnsureTypeTo<T, U, S>\r\n    fromType: EnsureTypeFrom<T, U, S>\r\n}\r\n\r\ntype EnsureConverter<T, U extends keyof T, S> = T[U] extends (S) ? (ConvertType<T, U, S> | undefined | null) : ConvertType<T, U, S>\r\n\r\nexport function bindTextInput<T, U extends keyof T>(entity: IEntity<T>, key: U, converter: EnsureConverter<T, U, string | undefined>, onChangeText?: (text: string) => void) {\r\n    return bindTextInputBase(entity, key, converter, {\r\n        valueKey: \"value\",\r\n        onChangeTextKey: \"onChangeText\"\r\n    }, onChangeText)\r\n}\r\n\r\nexport function bindTextInputBase<T, U extends keyof T>(entity: IEntity<T>, key: U, converter: EnsureConverter<T, U, string | undefined>, bindKeys: { valueKey?: string, onChangeTextKey: string }, onChangeText?: (text: string) => void) {\r\n    const output = {\r\n        [bindKeys.onChangeTextKey]: (v: string) => {\r\n            const update: Partial<T> = {};\r\n            entity.update({\r\n                [key]: converter?.fromType ? converter.fromType(v) : v\r\n            } as any)\r\n            if (onChangeText) {\r\n                onChangeText(v);\r\n            }\r\n        }\r\n    };\r\n    if (bindKeys.valueKey)\r\n        output[bindKeys.valueKey] = converter?.toType ? converter.toType(entity.data[key] as any) : (entity.data[key] as any)\r\n    return output;\r\n}\r\n\r\nexport function bindPicker<T, U extends keyof T>(entity: IEntity<T>, key: U, converter: EnsureConverter<T, U, IndexPath | undefined>, onSelect?: (item: IndexPath) => void) {\r\n\r\n    return {\r\n        //value: converter?.toType ? converter.toType(entity.data[key] as any) : (entity.data[key] as any),\r\n        onSelect: (item) => {\r\n            const update: Partial<T> = {};\r\n            //console.log(item);\r\n            entity.update({\r\n                [key]: converter?.fromType ? converter.fromType(item) : item\r\n            } as any)\r\n\r\n            if (onSelect)\r\n                onSelect(item)\r\n        },\r\n        // onChangeText: (v: string) => {\r\n        //     const update: Partial<T> = {};\r\n        //     entity.update({\r\n        //         [key]: converter?.fromString ? converter.fromString(v) : v\r\n        //     } as any)\r\n        //     if (onChangeText) {\r\n        //         onChangeText(v);\r\n        //     }\r\n        // }\r\n    } as Partial<PickerProps<false>>\r\n}\r\n// export function bindMultiPicker<T, U extends keyof T>(entity: IEntity<T>, key: U, converter: EnsureConverter<T, U, (number | string)[] | undefined>, onChange?: (item: (string | number)[]) => void) {\r\n//     return {\r\n//         value: converter?.toType ? converter.toType(entity.data[key] as any) : (entity.data[key] as any),\r\n//         onChange: (item) => {\r\n//             //const update: Partial<T> = {};\r\n//             //console.log(item);\r\n//             entity.update({\r\n//                 [key]: converter?.fromType ? converter.fromType(item) : item\r\n//             } as any)\r\n\r\n//             if (onChange)\r\n//                 onChange(item)\r\n//         },\r\n//         // onChangeText: (v: string) => {\r\n//         //     const update: Partial<T> = {};\r\n//         //     entity.update({\r\n//         //         [key]: converter?.fromString ? converter.fromString(v) : v\r\n//         //     } as any)\r\n//         // if (onChangeText) {\r\n//         //     onChangeText(v);\r\n//         // }\r\n//         //  }\r\n//     } as Partial<PickerProps<true>>\r\n// }\r\n\r\n// export function bindSwitch<T, U extends keyof T>(entity: IEntity<T>, key: U, converter: EnsureConverter<T, U, boolean | undefined>, invert?: boolean, onChange?: (item: boolean) => void) {\r\n//     let calcedValue = converter?.toType ? converter.toType(entity.data[key] as any) : (entity.data[key] as any);\r\n//     if (invert)\r\n//         calcedValue = !calcedValue;\r\n\r\n//     return {\r\n//         value: calcedValue,\r\n//         onValueChange: (item) => {\r\n//             let itemCalced = converter?.fromType ? converter.fromType(item) : item;\r\n//             if (invert)\r\n//                 itemCalced = !itemCalced;\r\n\r\n//             const update: Partial<T> = {};\r\n//             entity.update({\r\n//                 [key]: itemCalced\r\n//             } as any)\r\n\r\n//             if (onChange)\r\n//                 onChange(item)\r\n//         },\r\n\r\n//     } as SwitchProps\r\n// }\r\n\r\n\r\nexport function useIsKeyboardVisible() {\r\n    const [isKeyboardVisible, setIsKeyboardVisible] = useState(false);\r\n\r\n    useLayoutEffect(() => {\r\n        const showSubscription = Keyboard.addListener(\"keyboardDidShow\", () => {\r\n            setIsKeyboardVisible(true);\r\n        });\r\n        const hideSubscription = Keyboard.addListener(\"keyboardDidHide\", () => {\r\n            setIsKeyboardVisible(false)\r\n        });\r\n\r\n        return () => {\r\n            showSubscription.remove();\r\n            hideSubscription.remove();\r\n        };\r\n    }, []);\r\n    return {\r\n        isKeyboardVisible\r\n    }\r\n}\r\n\r\nexport default function useLinkToExt<\r\n    ParamList extends ReactNavigation.RootParamList\r\n>() {\r\n    const navigation = React.useContext(NavigationContainerRefContext);\r\n    const linking = React.useContext(LinkingContext);\r\n    const _linkTo = useLinkTo();\r\n    const linkTo = useCallback((to: To<ParamList>, replace?: boolean) => {\r\n\r\n        if (navigation === undefined) {\r\n            throw new Error(\r\n                \"Couldn't find a navigation object. Is your component inside NavigationContainer?\"\r\n            );\r\n        }\r\n\r\n        if (typeof to !== 'string') {\r\n            // @ts-expect-error: This is fine\r\n            navigation.navigate(to.screen, to.params);\r\n            return;\r\n        }\r\n\r\n        if (!to.startsWith('/')) {\r\n            throw new Error(`The path must start with '/' (${to}).`);\r\n        }\r\n\r\n        const { options } = linking;\r\n\r\n        const state = options?.getStateFromPath\r\n            ? options.getStateFromPath(to, options.config)\r\n            : getStateFromPath(to, options?.config);\r\n\r\n        if (state) {\r\n            const action = getActionFromState(state, options?.config);\r\n            if (action !== undefined) {\r\n                navigation.dispatch(action);\r\n            } else {\r\n                navigation.reset(state);\r\n            }\r\n        } else {\r\n            throw new Error('Failed to parse the path to a navigation state.');\r\n        }\r\n\r\n    }, [linking, navigation])\r\n\r\n\r\n    return linkTo;\r\n}\r\n","import React, { ReactElement, useLayoutEffect, useState } from \"react\";\r\nimport { flex, fonts, row, sizes } from \"../style\";\r\nimport { AltPrimaryButton, PrimaryButton } from \"./PrimaryButton\";\r\nimport { Text } from '@ui-kitten/components'\r\nimport { View } from 'react-native'\r\nexport function LabeledField(props: { compact?: boolean, children?: ReactElement, label?: string, leftElement?: (props: { width: number, height: number }) => ReactElement }) {\r\n\r\n    const sz = props.compact ? sizes.rem1 : sizes.rem2\r\n    return <View style={[row, { alignItems: \"center\", marginBottom: sz }]}>\r\n        {props.leftElement && props.leftElement({ height: sz, width: sz })}\r\n        <Text style={[flex, { fontSize: props.compact ? fonts.small : fonts.medium }]}>{props.label}</Text>\r\n        {props.children}\r\n    </View>\r\n\r\n}\r\n\r\n","import React from 'react'\r\n//import { ButtonProps } from \"react-native-ui-lib\";\r\nimport { Button, ButtonProps } from '@ui-kitten/components'\r\nimport { AppColors } from '../constants/Colors'\r\n//import Button from \"react-native-ui-lib/button\";\r\n\r\nexport function PrimaryButton(props: ButtonProps) {\r\n    return <Button\r\n        //backgroundColor={Colors.primary} \r\n        {...props} />\r\n}\r\n\r\nexport function AltPrimaryButton(props: ButtonProps) {\r\n    return <Button\r\n        //backgroundColor={Colors.white} \r\n        //color={AppColors.primary}\r\n        // outlineColor={AppColors.primary}\r\n        {...props} />\r\n}","import { Button, ButtonProps } from '@ui-kitten/components';\r\nimport React from 'react'\r\n//import { ButtonProps } from \"react-native\";\r\n//import Button from \"react-native-ui-lib/button\";\r\n//import { Colors } from 'react-native-ui-lib'\r\nimport { PressableButton } from './PressableButton';\r\n\r\n\r\nexport function SecondaryButton(props: ButtonProps) {\r\n    return <Button\r\n        status={'success'} {...props} />\r\n}\r\nexport function AltSecondaryButton(props: ButtonProps) {\r\n    return <Button status={'success'} {...props} />\r\n}","import React, { ReactElement, ReactNode, useLayoutEffect, useState } from \"react\";\r\nimport { Button, ButtonProps, Text } from \"@ui-kitten/components\";\r\nimport { flex, fonts, row, sizes } from \"../style\";\r\nimport { LabeledField } from \"./LabeledField\";\r\nimport { AltPrimaryButton, PrimaryButton } from \"./PrimaryButton\";\r\nimport { AltSecondaryButton, SecondaryButton } from \"./SecondaryButton\";\r\n//import { PlaidLink, PlaidLinkComponentProps } from 'react-native-plaid-link-sdk'\r\n\r\nexport function ButtonField(props: {\r\n    compact?: boolean, secondary?: boolean, label?: string, activeText?: string, disabledText?: string, inactiveText?: string, isActive?: boolean, leftElement?: (props: { width: number, height: number }) => ReactElement\r\n}\r\n    & Pick<ButtonProps, \"onPress\" | \"disabled\">) {\r\n    const [_isActive, setIsActive] = useState(false)\r\n    const buttonLabel =\r\n        (props.disabled && props.disabledText) ?\r\n            props.disabledText :\r\n            (_isActive ?\r\n                (props.activeText || \"Active\") :\r\n                (props.inactiveText || \"Inactive\"))\r\n\r\n    useLayoutEffect(() => {\r\n        setIsActive(props.isActive || false)\r\n    }, [props.isActive])\r\n    const bProps: ButtonProps = {\r\n        style:\r\n        {\r\n            width: sizes.rem9,\r\n            height: sizes.rem2,\r\n            padding: 0,\r\n\r\n        },\r\n        // labelStyle:\r\n        // {\r\n        //     height: sizes.rem1_5,\r\n        //     top: 0\r\n        // },\r\n        children: buttonLabel,\r\n        onPress(ev) {\r\n            setIsActive((a) => props.isActive === undefined ? !a : props.isActive)\r\n            if (props.onPress) {\r\n                props.onPress(ev)\r\n            }\r\n        }\r\n    };\r\n    return <LabeledField compact={props.compact} label={props.label} leftElement={props.leftElement}>\r\n        {_isActive ?\r\n            (!props.secondary ? <PrimaryButton {...bProps} /> : <SecondaryButton {...bProps} />) :\r\n            (!props.secondary ? <AltPrimaryButton {...bProps} /> : <AltSecondaryButton {...bProps} />)}\r\n    </LabeledField>\r\n\r\n}\r\nexport function PlaidButtonField(props: {\r\n    plaidProps: {},// Omit<PlaidLinkComponentProps, \"children\">,\r\n    compact?: boolean, secondary?: boolean, label?: string, activeText?: string, disabledText?: string, inactiveText?: string, isActive?: boolean, leftElement?: (props: { width: number, height: number }) => ReactElement\r\n}\r\n    & Pick<ButtonProps, \"onPress\" | \"disabled\">) {\r\n    const [_isActive, setIsActive] = useState(false)\r\n    const buttonLabel =\r\n        (props.disabled && props.disabledText) ?\r\n            props.disabledText :\r\n            (_isActive ?\r\n                (props.activeText || \"Active\") :\r\n                (props.inactiveText || \"Inactive\"))\r\n\r\n    useLayoutEffect(() => {\r\n        setIsActive(props.isActive || false)\r\n    }, [props.isActive])\r\n    const bProps: ButtonProps = {\r\n        style:\r\n        {\r\n            width: sizes.rem9,\r\n            height: sizes.rem2,\r\n            padding: 0,\r\n        },\r\n        // labelStyle:\r\n        // {\r\n        //     height: sizes.rem1_5,\r\n        //     top: 0\r\n\r\n        // },\r\n        children: buttonLabel,\r\n        onPress(ev) {\r\n            setIsActive((a) => props.isActive === undefined ? !a : props.isActive)\r\n            if (props.onPress) {\r\n                props.onPress(ev)\r\n            }\r\n        }\r\n    };\r\n    return <LabeledField compact={props.compact} label={props.label} leftElement={props.leftElement}>\r\n        <Text>BROKEN</Text>\r\n        {/* <PlaidLink {...props.plaidProps}>\r\n        <View pointerEvents=\"none\">\r\n            {_isActive ?\r\n                (!props.secondary ? <PrimaryButton {...bProps} /> : <SecondaryButton {...bProps} />) :\r\n                (!props.secondary ? <AltPrimaryButton {...bProps} /> : <AltSecondaryButton {...bProps} />)}\r\n        </View>\r\n    </PlaidLink> */}\r\n    </LabeledField >\r\n\r\n}\r\n\r\n\r\n\r\n","import React, { MutableRefObject, RefObject, useEffect, useRef, useState } from 'react';\r\nimport { ViewStyle, TextInputProps } from 'react-native';\r\n//import { Colors } from 'react-native-ui-lib';\r\nimport { Text, Input, InputProps } from '@ui-kitten/components'\r\n\r\n\r\n// interface IRnField {\r\n//     focus(): void,\r\n//     clear(): void\r\n// }\r\nexport interface ITextField {\r\n    field: RefObject<Input>,\r\n    errorMessage?: string\r\n    validate: () => boolean\r\n}\r\nexport function TextField(props: {\r\n    label?: string,\r\n    textInputRef?: MutableRefObject<ITextField | null>\r\n    disabled?: boolean\r\n    validate?: (value: string | undefined) => boolean,\r\n    validateOnChange?: boolean\r\n    errorMessage?: string,\r\n    //defaulted this to false... which is the right way to to a positive assetion...  \r\n    spellCheck?: boolean,\r\n    //defaulted this to false... which is the right way to to a positive assetion...  \r\n    autoCorrect?: boolean,\r\n    markRequired?: boolean\r\n    //caption?: InputProps[\"caption\"],\r\n\r\n} & TextInputProps & Pick<InputProps, \"caption\" | \"accessoryLeft\" | \"accessoryRight\">) {\r\n    const rnuRef = useRef<Input>(null);\r\n    const [caption, setCaption] = useState<InputProps[\"caption\"]>();\r\n    const [valueTracker, setValueTracker] = useState<string>();\r\n\r\n    useEffect(() => {\r\n        setCaption(props.caption);\r\n    }, [props.caption])\r\n    useEffect(() => {\r\n        setValueTracker(props.value);\r\n    }, [props.value])\r\n    const { validate } = props;\r\n    if (props.textInputRef) {\r\n        props.textInputRef.current = {\r\n            errorMessage: /* props.errorMessage instanceof Array ? props.errorMessage.join(\",\") :*/ props.errorMessage,\r\n            validate: () => validate ? validate(valueTracker) : true,\r\n            field: rnuRef\r\n        }\r\n    }\r\n\r\n    //const tt = { spellCheck: true, autoCorrect:false } as TextInputProps\r\n\r\n    return <Input\r\n        ref={rnuRef}\r\n\r\n        numberOfLines={props.numberOfLines}\r\n        spellCheck={props.spellCheck || false}\r\n        autoCorrect={props.autoCorrect || false}\r\n        editable={!props.disabled}\r\n        //disabledColor={props.disabledColor || Colors.grey20}\r\n        //placeholder=\"Enter Email...\"\r\n        //validateOnChange={props.validateOnChange}\r\n        caption={caption}\r\n        accessoryLeft={props.accessoryLeft}\r\n        accessoryRight={props.accessoryRight}\r\n        //validate={props.validate}\r\n        //errorMessage={props.errorMessage}\r\n        value={props.value}\r\n        //markRequired={props.markRequired}\r\n        //ref={props.textInputRef?.current?.field}\r\n        onSubmitEditing={props.onSubmitEditing}\r\n        label={(textProps) => {\r\n            return props.label ? <Text {...textProps}>{props.label}{<Text {...textProps} style={[\r\n                textProps?.style,\r\n                {\r\n                    color: \"red\"\r\n                }]}  >{props.markRequired ? \"*\" : \"\"}</Text>}</Text> :\r\n                <Text></Text>\r\n        }}\r\n        onChangeText={(t) => {\r\n            setValueTracker(t);\r\n            if (validate && props.validateOnChange) {\r\n                let errorMessage: string | undefined = undefined;\r\n                let newCaption: InputProps[\"caption\"] = undefined;\r\n                if (!validate(t)) {\r\n                    errorMessage = props.errorMessage;\r\n                    newCaption = () => <Text category={\"c1\"} style={{ color: \"red\" }}>{errorMessage}</Text>;\r\n                }\r\n\r\n                if (props.textInputRef?.current) {\r\n                    props.textInputRef.current.errorMessage = errorMessage;\r\n                    //props.textInputRef.current.validate = () => validate(t);\r\n                }\r\n                setCaption(() => newCaption);\r\n            }\r\n\r\n            if (props.onChangeText)\r\n                props.onChangeText(t);\r\n        }}\r\n        secureTextEntry={props.secureTextEntry}\r\n        returnKeyType={props.returnKeyType}\r\n        placeholder={props.placeholder}\r\n        //error={props.error}\r\n        style={props.style}\r\n    //hideUnderline={props.disabled}\r\n    //containerStyle={props.containerStyle}\r\n    />\r\n}\r\n","export function isValidEmail(email: string | undefined) {\r\n    return /^[-!#$%&'*+\\/0-9=?A-Z^_a-z`{|}~](\\.?[-!#$%&'*+\\/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-*\\.?[a-zA-Z0-9])*\\.[a-zA-Z](-?[a-zA-Z0-9])+$/.test(email || \"\")\r\n}\r\n\r\nexport function isRequired(value: string | undefined) {\r\n    return (value || \"\").replace(/ /gi, '').length > 0;\r\n}\r\n\r\nexport function isAlphaNumeric(value: string | undefined) {\r\n    return /^[a-z0-9\\_]+$/i.test(value||\"\")\r\n}","import React, { ReactNode } from \"react\";\r\nimport { View, ScrollView, ViewProps, ViewComponent, ViewStyle, StyleProp } from \"react-native\";\r\nimport { AppColors } from \"../constants/Colors\";\r\n\r\nimport { flex } from \"../style\";\r\nimport { useIsKeyboardVisible } from \"../utils/hooks\";\r\nimport { PrimaryButton } from \"./PrimaryButton\";\r\nimport { SecondaryButton } from \"./SecondaryButton\";\r\n\r\nexport function ScrollWithButtons(props: { children?: ReactNode, buttons?: ButtonPanelProps, fillHeight?: boolean }) {\r\n    const { isKeyboardVisible } = useIsKeyboardVisible();\r\n    return <View style={[flex,]} >\r\n        <View style={[flex, { backgroundColor: AppColors.background }]} >\r\n            <ScrollView nestedScrollEnabled contentContainerStyle={props.fillHeight ? { maxHeight: \"100%\", height: \"100%\"} : {}}>\r\n                {/* This is here to force layout of the content. Seems like a but with enxted scrollview content */}\r\n                {!isKeyboardVisible && <View style={{ height: 0 }} ></View>}\r\n                {props.children}\r\n            </ScrollView>\r\n        </View>\r\n        {props.buttons && <ButtonPanel {...props.buttons} />}\r\n    </View>\r\n}\r\n\r\nexport type ButtonPanelProps = {\r\n    locked?: boolean,\r\n    left?: {\r\n        text: string,\r\n        onPress: () => void\r\n    },\r\n    right: {\r\n        text: string,\r\n        onPress: () => void\r\n    }\r\n    viewProps?: StyleProp<ViewStyle> \r\n}\r\nexport function ButtonPanel(props: ButtonPanelProps) {\r\n    return <View style={ props.viewProps && Object.keys(props.viewProps).length ? props.viewProps : { borderTopColor: \"#ccc\", borderTopWidth: 1, flexDirection: \"row\", \r\n    paddingTop: 8,\r\n     paddingBottom: 8, \r\n     \r\n     justifyContent: \"space-evenly\", zIndex: 1000 }}>\r\n        {props.left && <SecondaryButton style={{ width: \"48%\" }} onPress={props.left.onPress} disabled={props.locked} >{props.left.text}</SecondaryButton>}\r\n        <PrimaryButton style={{ width: props.left ? \"48%\" : \"96%\" }} onPress={props.right.onPress} disabled={props.locked} >{props.right.text}</PrimaryButton>\r\n    </View>\r\n}\r\n","import React from 'react';\r\nimport { Alert } from \"react-native\";\r\nimport numeral, {} from 'numeral'\r\n//import { AmiraError } from '../AmiraError';\r\n\r\nexport type AwaitedReturn<T extends (...args: any[]) => Promise<any>> = Awaited<ReturnType<T>>\r\n\r\nexport function TBI() {\r\n    return console.warn(\"Method has not been implemented\");\r\n}\r\n\r\nexport function randomPrice() {\r\n    return Math.round(Math.random() * 100 * 100) / 100;\r\n}\r\n\r\n\r\nexport function random(maxExclusive: number) {\r\n    return Math.floor(Math.random() * maxExclusive);\r\n}\r\n\r\n\r\nexport function randomArray(maxExclusive: number) {\r\n    return Array.from(new Array(random(maxExclusive) + 1))\r\n}\r\nexport function randomName() {\r\n    return [\"JoshL\", \"LJames\", \"JodyH\"][random(3)]\r\n}\r\n\r\nexport function randomText() {\r\n    const texts = [\"gaping\",\r\n        \"woebegone\",\r\n        \"sticky\",\r\n        \"friendly\",\r\n        \"fine\",\r\n        \"free\",\r\n        \"accessible\",\r\n        \"subsequent\",\r\n        \"labored\",\r\n        \"tan\",\r\n        \"curious\",\r\n        \"brash\",\r\n        \"cautious\",\r\n        \"sassy\",\r\n        \"mushy\",\r\n        \"foreign\",\r\n        \"rightful\",\r\n        \"bad\",\r\n        \"psychological\",\r\n        \"talented\",\r\n        \"grieving\",\r\n        \"scrawny\",\r\n        \"familiar\",\r\n        \"thoughtless\",\r\n        \"daily\",\r\n        \"ritzy\",\r\n        \"elite\",\r\n        \"cool\",\r\n        \"shrill\",\r\n        \"skinny\",\r\n        \"living\",\r\n        \"opposite\",\r\n        \"right\",\r\n        \"red\",\r\n        \"slippery\",\r\n        \"mammoth\",\r\n        \"great\",\r\n        \"spooky\",\r\n        \"polite\",\r\n        \"spotted\",\r\n        \"educated\",\r\n        \"private\",\r\n        \"six\",\r\n        \"belligerent\",\r\n        \"amuck\",\r\n        \"successful\",\r\n        \"exotic\",\r\n        \"guilty\",\r\n        \"prickly\",\r\n        \"shiny\",\r\n    ]\r\n    return texts[random(texts.length)]\r\n}\r\n\r\nexport function randomDateString(pastDate?: boolean) {\r\n    return new Date(new Date().valueOf() + (pastDate ? -1 : 1) * random(31536000)).toUTCString()\r\n}\r\n\r\n\r\nexport function DEV_ONLY(code: () => void) {\r\n    if (!__DEV__)\r\n        throw new Error(\"DEVELOPMENT CODE IS RUNNING IN PRODUCTION\");\r\n    //throw new AmiraError(-1,\"DEVELOPMENT CODE IS RUNNING IN PRODUCTION\");\r\n    else\r\n        code();\r\n}\r\n\r\ntype All<T> = {\r\n    [K in keyof T]-?: T[K]\r\n}\r\n\r\nexport type Undefinable<T> = {\r\n    [K in keyof All<T>]: (T[K] | undefined)\r\n}\r\n\r\nexport function badDate() {\r\n    return toAmiraDate(new Date())\r\n}\r\n\r\n//const pctFormatter = numeral()\r\n\r\n//NumberFormat('en-US', {\r\n  //  style: 'percent',\r\n//})\r\n/**** All of these should be moved to a formatter file */\r\n\r\nexport function toAmiraDate(date: Date) {\r\n    return date.toISOString().replace(/Z/gi, '');\r\n}\r\nexport function fromAmiraDate(date: string) {\r\n    return new Date(date + 'Z');\r\n}\r\n\r\n// const pct2Formatter = NumberFormat('en-US', {\r\n//     style: 'percent',\r\n//     minimumFractionDigits: 2\r\n// })\r\n\r\nexport function toPercent(number: number) {\r\n    return (number === undefined || number === null) ? \"\" : numeral(number).format('0%')\r\n}\r\nexport function toPercent1(number: number) {\r\n    return (number === undefined || number === null) ? \"\" : numeral(number).format('0.0%')\r\n}\r\nexport function toPercent2(number: number) {\r\n    return (number === undefined || number === null) ? \"\" : numeral(number).format('0.00%')\r\n}\r\n// const thousandFormatter = NumberFormat('en-US', {\r\n//     maximumSignificantDigits: 3\r\n// })\r\nexport function toThousands(number: number) {\r\n    return    numeral(number).format('0,0');\r\n}\r\nexport function toNumber1(number: number) {\r\n    return (number === undefined || number === null) ? \"\" : numeral(number).format('0.0')\r\n}\r\nexport function toNumber2(number: number) {\r\n    return (number === undefined || number === null) ? \"\" : numeral(number).format('0.00')\r\n}\r\n// const currencyFormatter = NumberFormat('en-US', {\r\n//     style: 'currency',\r\n//     currency: \"USD\",\r\n// })\r\n\r\nexport function isoToDate(dateString: string) {\r\n    return dateString.split(\"T\")[0];\r\n}\r\nexport function toFormatedDateTime(dateTimeString: string) {\r\n    const m = new Date(dateTimeString).getMonth() + 1;\r\n    const d = new Date(dateTimeString).getDate();\r\n    const y = new Date(dateTimeString).getFullYear() % 100;\r\n    let h = new Date(dateTimeString).getHours();\r\n    let min: string | number = new Date(dateTimeString).getMinutes();\r\n    let ampm = 'am'\r\n    if ( h >= 12 ) {\r\n        ampm = 'pm';\r\n        h = h === 12 ? h : h - 12;\r\n    }\r\n    if ( h === 0 ) {\r\n        h = 12\r\n    }\r\n    if ( min < 10 ) {\r\n        min = String(`0${min}`)\r\n    }\r\n    return `${h}:${min} ${ampm} ${m}/${d}/${y}`\r\n}\r\nexport function toDateMonthYear(dateString: string) {\r\n    const m = (new Date(dateString).toDateString().slice(4,7));\r\n    const y = String((new Date(dateString).getFullYear())).slice(2);\r\n    return `${m}-${y}`;\r\n}\r\nexport function toDateDayMonth(dateString: string) {\r\n    const d = (new Date(dateString).toDateString().slice(8,11));\r\n    const m = (new Date(dateString).toDateString().slice(4,7));\r\n    return `${d} ${m}`;\r\n}\r\nexport function toDollars(number: number) {\r\n    return toDollarsAndCents(number).split(\".\")[0];\r\n}\r\nexport function toDollarsAndCents(number: number | undefined | null) {\r\n    return  (number === undefined || number === null) ? \"\" : numeral(number).format('$0,0.00') //currencyFormatter.format(number);\r\n}\r\n","import { NavigationProp } from \"@react-navigation/native\";\r\nimport { IUserGet } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport { Dispatch, SetStateAction, useState, useEffect } from \"react\";\r\nimport { sizes } from \"../../style\";\r\nimport { IEntity } from \"../../utils/hooks\";\r\n\r\nexport const sideMargin = sizes.rem1_5;\r\n\r\nexport type CreateAccountProps = {\r\n    user: IEntity<IUserGet>,\r\n    toastMessage: (msg: string, delay?: number | undefined) => void\r\n};\r\n\r\n","import React from \"react\";\r\nimport { Pressable, PressableProps, Text, TextProps } from \"react-native\";\r\nimport { AppColors } from \"../constants/Colors\";\r\n//import { Colors, Text, TextProps, TouchableOpacity, TouchableOpacityProps } from 'react-native-ui-lib'\r\n\r\nexport function Link(props: Pick<PressableProps, \"onPress\"> & Pick<TextProps, \"style\" | \"children\">) {\r\n    return <Pressable onPress={props.onPress}>\r\n        <Text style={[{ color: AppColors.primary }, props.style]}>{props.children}</Text>\r\n    </Pressable>\r\n}","import React, { useRef, useEffect, RefObject, useMemo, useState } from \"react\";\r\nimport { Image, View, Animated } from \"react-native\";\r\nimport { CheckBox, Text } from \"@ui-kitten/components\";\r\nimport { ButtonField } from \"../../components/ButtonField\";\r\nimport { TextField, ITextField } from \"../../components/TextField\";\r\nimport { bannerText, flex, sizes, textInputWiz } from \"../../style\";\r\nimport { bindTextInput, IEntity, useReadonlyEntity } from \"../../utils/hooks\";\r\nimport { isRequired, isValidEmail } from \"../../utils/validators\";\r\n\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\";\r\n\r\nimport { TBI } from \"../../utils/misc\";\r\nimport { AppColors } from \"../../constants/Colors\";\r\nimport Auth from '@tradingpost/common/api/entities/static/AuthApi'\r\nimport { useAppUser } from \"../../Authentication\";\r\nimport { useData } from \"../../lds\";\r\nimport { useLinkTo, useNavigation } from \"@react-navigation/native\";\r\nimport { CreateAccountProps, sideMargin } from \"./shared\";\r\nimport { Link } from \"../../components/Link\";\r\n\r\n\r\ntype FieldRefs = {\r\n    first: RefObject<ITextField>,\r\n    last: RefObject<ITextField>,\r\n    email: RefObject<ITextField>,\r\n    username: RefObject<ITextField>,\r\n    pass: RefObject<ITextField>,\r\n    confirm: RefObject<ITextField>\r\n}\r\ntype LoginInfo = { email?: string, password?: string };\r\n\r\nexport function AccountInfoSection(props: CreateAccountProps) {\r\n\r\n\r\n    const\r\n        [lockButtons, setLockButtons] = useState(false),\r\n        { setValue: setLoginResult } = useData(\"loginResult\"),\r\n        loginEntity = useReadonlyEntity<LoginInfo>({}),\r\n        linkTo = useLinkTo<any>(),\r\n        nav = useNavigation(),\r\n        [agreeToTerms, setAgreeToTerms] = useState(false),\r\n        [agreeToPrivacy, setAgrreeToPrivacy] = useState(false),\r\n        refs: FieldRefs = {\r\n            first: useRef<ITextField>(null),\r\n            last: useRef<ITextField>(null),\r\n            email: useRef<ITextField>(null),\r\n            username: useRef<ITextField>(null),\r\n            pass: useRef<ITextField>(null),\r\n            confirm: useRef<ITextField>(null),\r\n        },\r\n        buttonConfig = {\r\n            locked: lockButtons,\r\n            left: ({\r\n                text: \"Cancel\",\r\n                onPress: () => {\r\n                    if (nav.canGoBack()) {\r\n                        nav.goBack()\r\n                    } else {\r\n                        linkTo({\r\n                            screen: \"/login\"\r\n                        });\r\n                    }\r\n                }\r\n            }),\r\n            right: {\r\n                text: \"Create\",\r\n                onPress: async () => {\r\n                    setLockButtons(true);\r\n                    const errors: string[] = [];\r\n                    try {\r\n                        for (const k in refs) {\r\n                            const val = refs[k as keyof typeof refs];\r\n                            if (val.current && !val.current.validate()) {\r\n                                errors.push(val.current.errorMessage || \"\");\r\n                            }\r\n                        }\r\n                        if (!agreeToPrivacy || !agreeToTerms) {\r\n                            errors.push(\"You must agree to terms and privacy policy\");\r\n                        }\r\n\r\n                        if (errors.length) {\r\n                            errors.unshift(\"Please fix the following issues:\");\r\n                            props.toastMessage(errors.join(\"\\r\\n\"));\r\n                            setLockButtons(false);\r\n                        } else if (!false) {  //create new user\r\n                            if (loginEntity.data.email && loginEntity.data.password) {\r\n                                const login = await Auth.createLogin(loginEntity.data.email, loginEntity.data.password);\r\n                                await setLoginResult(login);\r\n                                linkTo('/create/basicinfo')\r\n                            } else {\r\n                                throw new Error(\"Something is very wrong.\" + JSON.stringify(loginEntity.data))\r\n                            }\r\n                            setLockButtons(false);\r\n                        } else { //patch authed user\r\n\r\n                            //await UpdateUserProfile(props.user.data);\r\n                            TBI();\r\n                            props.user.resetData(props.user.data);\r\n                            linkTo('/create/basicinfo')\r\n                        }\r\n                    } catch (ex: any) {\r\n                        if (ex.json) {\r\n                            props.toastMessage(`${ex.json.name}:\\r\\n${ex.json.policy || ex.json.description}`);\r\n                        } else if (typeof ex.message === \"string\") {\r\n                            props.toastMessage(ex.message);\r\n                        } else props.toastMessage(JSON.stringify(ex.message));\r\n                        setLockButtons(false);\r\n                    }\r\n\r\n                }\r\n            }\r\n        }\r\n\r\n    return <ScrollWithButtons\r\n        buttons={buttonConfig}>\r\n        {\r\n            <AccountBasicInfo agreeToPrivacy={agreeToPrivacy} setAgreeToPrivacy={setAgrreeToPrivacy} agreeToTerms={agreeToTerms} setAgreeToTerms={setAgreeToTerms} refs={refs} isAuthed={false} loginEntity={loginEntity} {...props} />\r\n        }\r\n    </ScrollWithButtons>\r\n}\r\n\r\nfunction AccountBasicInfo(props: CreateAccountProps & { refs: FieldRefs, isAuthed: boolean, loginEntity: IEntity<LoginInfo>, agreeToTerms: boolean, setAgreeToTerms: (a: boolean) => void, agreeToPrivacy: boolean, setAgreeToPrivacy: (a: boolean) => void }) {\r\n    const { refs, isAuthed } = props,\r\n        opacityAnim = useRef(new Animated.Value(0)).current,\r\n        { agreeToTerms, setAgreeToTerms, agreeToPrivacy, setAgreeToPrivacy } = props,\r\n        linkTo = useLinkTo<any>();\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n\r\n    return <View>\r\n        <View style={[flex, { margin: sideMargin }]}>\r\n            <Animated.Text\r\n                style={[bannerText, { opacity: opacityAnim }]}>\r\n                Let's start with some login information\r\n            </Animated.Text>\r\n            {/* <Section title={'Personal Information'}>\r\n                <TextField label='Name'\r\n                    validate={isRequired}\r\n                    errorMessage={\"`Name` is required\"}\r\n                    textInputRef={refs.first}\r\n                    validateOnChange placeholder='First Name' returnKeyType=\"none\" {...bindTextInput(props.user, \"first_name\", null)} />\r\n                <TextField\r\n                    label='Last'\r\n                    errorMessage={\"`Last Name` is required\"}\r\n                    textInputRef={refs.last}\r\n                    validate={isRequired}\r\n                    validateOnChange placeholder='Last Name' returnKeyType=\"none\"  {...bindTextInput(props.user, \"last_name\", null)} />\r\n            </Section> */}  \r\n            {/* <Section title={'Login Information'} > */}\r\n            <TextField\r\n                //label='Email'\r\n                style={textInputWiz}\r\n                textInputRef={refs.email}\r\n                errorMessage={\"`Email Address` is invalid\"}\r\n                disabled={isAuthed}\r\n                validate={isValidEmail}\r\n                validateOnChange placeholder='Email Address'\r\n                returnKeyType=\"none\" {...bindTextInput(props.loginEntity, \"email\", null)}\r\n            />\r\n\r\n            {\r\n                isAuthed ?\r\n                    <ButtonField\r\n                        compact\r\n                        isActive\r\n                        label='Password'\r\n                        activeText='Change'\r\n                    />\r\n                    : <>\r\n                        <TextField\r\n                            //label='Password'\r\n                            style={textInputWiz}\r\n                            textInputRef={refs.pass}\r\n                            validate={isRequired}\r\n                            validateOnChange\r\n                            errorMessage={\"`Password` is required.\"}\r\n                            placeholder='Account Password' returnKeyType=\"none\" secureTextEntry\r\n                            {...bindTextInput(props.loginEntity, \"password\", null)} />\r\n                        <TextField\r\n                            //label='Confirm'\r\n                            style={textInputWiz}\r\n                            textInputRef={refs.confirm}\r\n                            placeholder='Confirm Password'\r\n                            returnKeyType=\"none\"\r\n                            errorMessage={\"'Confirm' does not match.\"}\r\n                            validateOnChange\r\n                            validate={(c) => Boolean(c) && c === props.loginEntity.data.password}\r\n                            secureTextEntry\r\n                        />\r\n                        <View\r\n                            style={[textInputWiz, { flexDirection: \"row\" }]}\r\n                        >\r\n                            <CheckBox checked={agreeToTerms} onChange={setAgreeToTerms} style={{marginRight: 10}}/>\r\n                            <Text>Agree To </Text>\r\n                            <Link onPress={() => {\r\n                                linkTo('/create/terms')\r\n                            }} >Terms Of Use</Link>\r\n                        </View>\r\n                        <View\r\n                            style={[textInputWiz, { flexDirection: \"row\" }]}\r\n                        >\r\n                            <CheckBox checked={agreeToPrivacy} onChange={setAgreeToPrivacy} style={{marginRight: 10}} />\r\n                            <Text>Agree To </Text>\r\n                            <Link onPress={() => {\r\n                                linkTo('/create/privacy')\r\n                            }}>Privacy Policy</Link>\r\n                        </View>\r\n                    </>\r\n            }\r\n            {/* </Section> */}\r\n        </View>\r\n    </View>\r\n}\r\n","import React from 'react'\r\nimport { TextStyle, ViewStyle } from 'react-native';\r\nimport { Text } from \"@ui-kitten/components\";\r\nimport { fonts, sizes } from '../style';\r\nimport { AppColors } from '../constants/Colors';\r\n\r\nexport function Header(props: { text: string, style?: TextStyle }) {\r\n    return <Text\r\n        style={[{ color: AppColors.primary, fontSize: fonts.large, marginBottom: sizes.rem0_5 }, props.style]}\r\n    >{props.text}{ }</Text>\r\n}\r\n\r\n\r\nexport function Subheader(props: { text: string, style?: TextStyle }) {\r\n    return <Text\r\n        //color={Colors.primary}\r\n        style={[{ color:AppColors.secondary, fontSize: fonts.small, marginBottom: sizes.rem0_5 }, props.style]}\r\n    >{props.text}{ }</Text>\r\n}","import React, { ReactElement, ReactNode } from 'react'\r\nimport { View, ViewProps, ViewStyle } from 'react-native';\r\n\r\nimport { elevated, sizes } from '../style';\r\nimport { Header, Subheader } from './Headers'\r\n\r\ninterface SecitonProps {\r\n    title: string,\r\n    useSubHeading?: boolean,\r\n    children?: ReactNode,\r\n    button?: (props: { height: number, width: number }) => ReactElement,\r\n    alt?: boolean\r\n    style?: ViewProps[\"style\"],\r\n    \r\n}\r\n\r\nexport function Section(props: SecitonProps) {\r\n    const { title, children, useSubHeading} = props;\r\n    return (\r\n        <View  style={[{ backgroundColor: \"white\", marginBottom: sizes.rem1 }, props.style]}>\r\n            <View style={{ flexDirection: \"row\", justifyContent: \"space-between\" }}>\r\n                {Boolean(title) && (useSubHeading ? <Subheader text={title} style={{ color: props.alt ? \"#434343\" : undefined }} /> : <Header text={title} />)}\r\n                {props.button && props.button({ height: sizes.rem1_5, width: sizes.rem1_5 })}\r\n            </View>\r\n            {children}\r\n        </View>\r\n    )\r\n}\r\n\r\nexport function Subsection(props: Omit<SecitonProps, 'useSubHeading'>) {\r\n    return <Section useSubHeading {...props} />\r\n}\r\n\r\nexport const ElevatedSection = (props: Parameters<typeof Section>[0]) => {\r\n    const style = [[elevated, { paddingHorizontal: sizes.rem1 }], props.style]\r\n    return <Section {...props} style={style} />\r\n}","import React, { useLayoutEffect, useState } from 'react'\r\n\r\n//import { rnui } from '../images'\r\nimport { Text, Image } from 'react-native'\r\nimport { IndexPath, Select, SelectItem, SelectProps } from '@ui-kitten/components'\r\n\r\nexport type PickerProps<T extends boolean> = Omit<SelectProps, \"children\" | \"mode\" | \"onSelect\" | \"value\" | \"migrate\" | \"spellCheck\" | \"selectedIndex\"> & {\r\n    selectionLimit?: number, multiSelect?: T,\r\n    // selectedIndex?: (T extends false ? (IndexPath) : (IndexPath)[]),\r\n    items: { label: string, value: string | number, iconUrl?: string }[],\r\n    value?: T extends false ? (string | number) : (string | number)[]\r\n    onSelect?: (item: (T extends false ? IndexPath : IndexPath[])) => void\r\n}\r\n\r\nexport function Picker<T extends boolean = false>(props: PickerProps<T>) {\r\n\r\n    //const [_value, setValues] = useState<PickerProps<T>[\"value\"]>(props.value);\r\n\r\n    // useLayoutEffect(() => {\r\n    //     setValues();\r\n    // }, [props.value])\r\n\r\n    return <Select\r\n        //rightIconSource={rnui.chevronDown}\r\n        //spellCheck={false} \r\n        //migrate \r\n        //selectionLimit={props.selectionLimit}\r\n        //multiSelect={props.multiSelect}\r\n        //mode={props.multiSelect ? \"MULTI\" : \"SINGLE\"}\r\n        {...props}\r\n        //value={(p) => <Text {...p}></Text>}\r\n        value={props.value instanceof Array ? props.items.map((item) => \"TEST\").filter(v => v).join(\",\") : props.items.find((v) => v.value === props.value)?.label || props.placeholder}\r\n\r\n        onSelect={(v) => {\r\n            // if (v instanceof Array) {\r\n            //     setValues(v.map((v) => props.items[v.row].value) as any);\r\n            // }\r\n            // else {\r\n            //     // console.log(\"TESTTTTT::::::\" + props.items[v.row].value as any);\r\n            //     setValues(props.items[v.row].value as any);\r\n            // }\r\n\r\n            if (props.onSelect)\r\n                props.onSelect(v as any);\r\n        }}\r\n        selectedIndex={\r\n            props.multiSelect ? props.items.map((i, idx) =>\r\n                Boolean((props.value as any[]).find(_item => _item.value === i.value)) ?\r\n                    new IndexPath(idx) : null).filter(v => v) as IndexPath[] :\r\n                new IndexPath(props.items.findIndex((i, idx) => i.value === props.value))\r\n        }>\r\n        {props.items.map(i => <SelectItem accessoryLeft={(props) => <Image {...props} source={{ uri: i.iconUrl }} />} title={i.label} key={i.value} />)}\r\n    </Select >\r\n}","import React from 'react';\r\nimport MultiSlider, { MultiSliderProps } from '@ptomasroos/react-native-multi-slider';\r\n\r\nexport function Slider(props: MultiSliderProps) {\r\n    return <MultiSlider\r\n\r\n        //thumbTintColor={Colors.primary}\r\n        //maximumTrackTintColor={Colors.grey50}\r\n        //minimumTrackTintColor={Colors.grey50} \r\n        {...props} />\r\n}","import { Icon } from \"@ui-kitten/components\";\r\nimport React from \"react\";\r\nimport { Pressable, PressableProps, StyleProp, ViewStyle } from \"react-native\";\r\nimport { AppColors } from \"../constants/Colors\";\r\n\r\nexport const AddButton = (props: Pick<PressableProps, \"onPress\"> & Pick<ViewStyle, \"height\" | \"width\">) => {\r\n    return <Pressable onPress={props.onPress} style={{ justifyContent: \"center\" }} ><Icon\r\n        //fill={AppColors.secondary}\r\n        fill={AppColors.secondary}\r\n        height={props.height}\r\n        width={props.width}\r\n        name=\"plus-square\" style={{\r\n            height: props.height,\r\n            width: props.width\r\n        }} /></Pressable>\r\n}\r\n\r\nexport const EditButton = (props: Pick<PressableProps, \"onPress\"> & Pick<ViewStyle, \"height\" | \"width\"> & { style?: ViewStyle }) => {\r\n    return <Pressable onPress={props.onPress} style={[{ justifyContent: \"center\" }, props.style]}><Icon\r\n        //fill={AppColors.secondary}\r\n        fill={\"#708090\"}\r\n        name=\"edit-outline\" style={{\r\n            height: props.height,\r\n            width: props.width\r\n        }} /></Pressable>\r\n}\r\n\r\nexport const SettingsButton = (props: Pick<PressableProps, \"onPress\"> & Pick<ViewStyle, \"height\" | \"width\"> & { style?: ViewStyle }) => {\r\n    return <Pressable onPress={props.onPress} style={[{ justifyContent: \"center\" }, props.style]}><Icon\r\n        //fill={AppColors.secondary}\r\n        fill={\"#708090\"}\r\n        name=\"settings-2-outline\" style={{\r\n            height: props.height,\r\n            width: props.width\r\n        }} /></Pressable>\r\n}\r\nexport const DeleteButton = (props: Pick<PressableProps, \"onPress\"> & Pick<ViewStyle, \"height\" | \"width\" > & { style?: ViewStyle, color?: string }) => {\r\n    return <Pressable onPress={props.onPress} style={[{ justifyContent: \"center\" }, props.style]}><Icon\r\n        //fill={AppColors.secondary}\r\n        fill={props.color ? props.color : \"#708090\"}\r\n        name=\"close-circle-outline\" style={{\r\n            height: props.height,\r\n            width: props.width\r\n            \r\n        }} /></Pressable>\r\n}\r\nexport const ExitButton = (props: Pick<PressableProps, \"onPress\"> & Pick<ViewStyle, \"height\" | \"width\" > & { style?: ViewStyle, color?: string }) => {\r\n    return <Pressable onPress={props.onPress} style={[{ justifyContent: \"center\" }, props.style]}><Icon\r\n        //fill={AppColors.secondary}\r\n        fill={props.color ? props.color : \"#708090\"}\r\n        name=\"close-circle-outline\" style={{\r\n            height: props.height,\r\n            width: props.width\r\n            \r\n        }} /></Pressable>\r\n}\r\nexport const FavButton = (props: Pick<PressableProps, \"onPress\"> & Pick<ViewStyle, \"height\" | \"width\"> & { isSelected?: boolean }) => {\r\n    return <Pressable onPress={props.onPress} style={{ justifyContent: \"center\", alignItems: 'center' }}><Icon\r\n        //fill={AppColors.secondary}\r\n        fill={props.isSelected ? \"#F6BE00\" : \"#708090\"}\r\n        name={props.isSelected ? \"star\" : \"star-outline\"} style={{\r\n            height: props.height,\r\n            width: props.width\r\n        }} /></Pressable>\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { View, KeyboardAvoidingView, Platform } from \"react-native\";\r\nimport { Input } from \"@ui-kitten/components\";\r\nimport { Button, Icon } from '@ui-kitten/components'\r\nimport { sizes } from \"../style\";\r\n\r\nexport function KeyboardAvoidingInput(props: any) {\r\n    return (\r\n    <KeyboardAvoidingView\r\n        behavior={Platform.OS === \"ios\" ? \"padding\" : \"height\"}\r\n        style={{display: \"flex\", flexDirection: \"column\", alignContent: \"flex-end\"}}\r\n        >\r\n        <View style={{display: \"flex\", flexDirection: \"row\", alignItems: 'center'}}>\r\n        <Input \r\n            placeholder={props.placeholder}\r\n            value={props.value}\r\n            multiline={true}\r\n            numberOfLines={props.numLines}\r\n            style={{flex: 1,\r\n                    borderColor: '#ccc',\r\n                    //paddingVertical: sizes.rem0_5, paddingLeft: sizes.rem0_5,\r\n                    padding: sizes.rem0_5\r\n                }}\r\n            onChangeText={nextValue => props.setValue(nextValue)}\r\n        />\r\n        <Button \r\n            style={{backgroundColor: 'transparent',\r\n                    borderColor: 'transparent',\r\n                    padding: sizes.rem0_5,\r\n                    paddingLeft: 0,\r\n                    display: props.displayButton ? 'flex' : 'none'}}\r\n            onPress={() => {\r\n                if (props.clicked) {\r\n                    props.clicked[1](props.clicked[0] + 1)\r\n                }\r\n                props.onClick(props.value, props.setValue, props.item_id)\r\n            }}            \r\n            //onPress={props.onClick(props.value, props.setValue, props.item_id)}\r\n            accessoryRight={props.rightIcon}\r\n                        />\r\n        \r\n        </View>\r\n    </KeyboardAvoidingView>);\r\n}","import React, { useEffect, useMemo, useState } from \"react\"\r\nimport { Autocomplete, AutocompleteItem, Button, Icon, IndexPath, Text, Layout } from \"@ui-kitten/components\"\r\n//import { referenceData } from \"../../apis/ReferenceData\"\r\nimport { ElevatedSection, Section } from \"../../components/Section\"\r\nimport { PlusIcon } from \"../../images\"\r\nimport { bannerText, flex, noMargin, paddView, sizes, thinBannerText } from \"../../style\"\r\nimport { Picker } from '../../components/Picker'\r\nimport {\r\n    CreateAccountProps,\r\n    sideMargin\r\n} from \"./shared\"\r\n\r\nimport {\r\n    //bindMultiPicker,\r\n    bindPicker,\r\n    useOpacityAnim,\r\n    useReadonlyEntity\r\n} from \"../../utils/hooks\"\r\nimport { useSecuritiesList } from '../../SecurityList'\r\n//import { UpdateUserProfile } from \"../../apis/Authentication\"\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\"\r\nimport { Alert, Pressable, TextStyle, View } from \"react-native\"\r\nimport { Slider } from \"../../components/Slider\"\r\nimport { AppColors } from \"../../constants/Colors\"\r\nimport { Api } from \"@tradingpost/common/api\"\r\nimport { AddButton } from \"../../components/AddButton\"\r\nimport { useLinkTo } from \"@react-navigation/native\";\r\nimport { KeyboardAvoidingInput } from \"../../components/KeyboardAvoidingInput\"\r\n\r\n//import { AppConfig } from \"../../apis/ApplicationApi\"\r\n\r\n\r\nexport const investmentStrats = [\r\n    'Buy & Hold',\r\n    'Growth-Focused',\r\n    'Swing Trading',\r\n    'Momentum',\r\n    'Day Trading',\r\n    'Index Investing',\r\n    'Value-Focused',\r\n    'Long/Short',\r\n    'Opportunistic ',\r\n    'Concetrated',\r\n    'Diversified'\r\n];\r\nexport const questionStyle = { fontSize: 16, marginBottom: sizes.rem1, marginTop: sizes.rem1_5 } as TextStyle;\r\n\r\nexport const gicsAC = ['SaaS',\r\n    'Biotech',\r\n    'AdTech',\r\n    'Tech',\r\n    'Fintech',\r\n    'Specialty Finance',\r\n    'Aero/Defense',\r\n    'Industrial',\r\n    'Medtech',\r\n    'Cloud',\r\n    'Consumer',\r\n    'Banks',\r\n    'Industrials',\r\n    'Healthcare',\r\n    'Housing',\r\n    'Electric Vehicles',\r\n    'Renewable Energy',\r\n    'Oil and Gas',\r\n    'Metals and Mining',\r\n    'Semiconductors',\r\n    'Cybersecurity',\r\n    'Metaverse',\r\n    'Crypto',\r\n    'Transportation',\r\n    'Airlines',\r\n    'Auto',\r\n    'Healthcare',\r\n    'Retail',\r\n    'E-commerce',\r\n    'Insurance',\r\n    'Gambling',\r\n    'Quality',\r\n    'Deep Dives',\r\n    'General Market',\r\n    'Valuation',\r\n    'Technicals',\r\n    'Investment Process',\r\n    'Small Caps',\r\n    'Macro',\r\n    'News',\r\n    'Venture Capital',\r\n    'Emerging Markets',\r\n    'Portfolio Management',\r\n    'Data Driven',\r\n    'Industry Expert',\r\n    'Financial Coach',\r\n    'Businesses',\r\n    'Special Situations',\r\n    'Activist'].sort()\r\n\r\n\r\nexport function InvestmentInterestSection(props: CreateAccountProps) {\r\n    const { AppearView } = useOpacityAnim();\r\n    const anaylistProfile = useReadonlyEntity(props.user.data.analyst_profile || {\r\n        investment_strategy: \"\",\r\n        portfolio_concentration: 50,\r\n        benchmark: \"\",\r\n        interests: []\r\n    });\r\n    //props.user.data.investment_interests || { interestLevel: 50 }\r\n    const { securities: { list: securities } } = useSecuritiesList(),\r\n        [lockButtons, setLockButtons] = useState(false),\r\n        [bio, setBio] = useState(''),\r\n        [sliderWidth, setSliderWidth] = useState(100),\r\n        linkTo = useLinkTo<any>(),\r\n        [acText, setAcText] = useState(\"\");\r\n    const acValues = useMemo(() => {\r\n        const r = new RegExp(acText, \"i\");\r\n        return acText ? gicsAC.filter((g, i) => r.test(g)) : [];\r\n    }, [acText])\r\n    const addIfMissing = (value: string) => {\r\n        if (value && !anaylistProfile.data.interests.find((int) => int.toLowerCase() === value.toLowerCase())) {\r\n            anaylistProfile.update({\r\n                \"interests\": [...anaylistProfile.data.interests, value]\r\n            })\r\n        }\r\n        setAcText(\"\");\r\n    }\r\n    const benches = securities.filter(s => s.is_benchmark).sort((a, b) => a.symbol.localeCompare(b.symbol)).map((value) => ({\r\n        label: `[${value.symbol}] ${value.security_name}`,\r\n        value: value.symbol,\r\n        iconUrl: value.logo_url\r\n    }))\r\n    return <ScrollWithButtons\r\n        buttons={\r\n            {\r\n                locked: lockButtons,\r\n                left: {\r\n                    text: \"Nevermind\",\r\n                    onPress: async () => {\r\n                        const defaultSettings = {\r\n                            analyst: false,\r\n                            push_notifications: {\r\n                                mentions: true,\r\n                                upvotes: true,\r\n                                watchlist_changes: true,\r\n                            },\r\n                            portfolio_display: {\r\n                                performance: false,\r\n                                holdings: false,\r\n                                trades: false\r\n                            }\r\n                        }\r\n                        await Api.User.update(props.user.data.id, {\r\n                            settings: defaultSettings\r\n                        })\r\n                        linkTo('/create/profilepicture')\r\n                    }\r\n                },\r\n                right: {\r\n                    text: \"Continue\",\r\n                    onPress: async () => {\r\n                        setLockButtons(true);\r\n                        try {\r\n                            await Api.User.update(props.user.data.id, {\r\n                                bio: bio,\r\n                                analyst_profile: anaylistProfile.data\r\n                            });\r\n                            anaylistProfile.resetData(anaylistProfile.data);\r\n                            props.user.resetData(props.user.data);\r\n\r\n\r\n                            linkTo('/create/linkbrokerage')\r\n                        } catch (ex: any) {\r\n                            console.error(ex);\r\n                            props.toastMessage(\"Unable to update profile\");\r\n                            setLockButtons(false);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }>\r\n        <View style={[paddView, { paddingBottom: 0 }]}>\r\n            <ElevatedSection title=\"\" style={{ paddingVertical: 4 }}>\r\n                <AppearView onLayout={(ev) => {\r\n                    setSliderWidth(ev.nativeEvent.layout.width)\r\n                }} style={[flex]}>\r\n                    <Text style={[thinBannerText, { marginHorizontal: 0, marginTop: sizes.rem0_5 }]}>Welcome Analyst! Tell us a bit about yourself</Text>\r\n                    <Text style={[questionStyle, { marginTop: sizes.rem0_5 }]}>Bio</Text>\r\n                    <KeyboardAvoidingInput\r\n                        value={bio}\r\n                        displayButton={false}\r\n                        numLines={3}\r\n                        placeholder={'Tell people about yourself'}\r\n                        //rightIcon=\r\n                        setValue={setBio}\r\n                    //item_id={props.route.params.post._source.id}\r\n                    //clicked={[commentAdded, setCommentAdded]}\r\n                    //onClick={() => {}}\r\n                    />\r\n                    <Text style={questionStyle}>What is your investment strategy?</Text>\r\n                    <Picker\r\n                        placeholder='Select Strategy'\r\n                        value={anaylistProfile.data.investment_strategy}\r\n                        items={investmentStrats.map((value) => ({\r\n                            label: value,\r\n                            value\r\n                        }))}\r\n                        {...bindPicker(anaylistProfile, \"investment_strategy\", {\r\n                            fromType: (v) => {\r\n                                if (v) {\r\n                                    return investmentStrats[v.row]\r\n                                }\r\n                                return \"\";\r\n                            },\r\n                            toType: (v) => {\r\n                                return new IndexPath(investmentStrats.findIndex(v => v === v));\r\n                            }\r\n                        })}\r\n                    />\r\n                    <Text style={questionStyle}>How concentrated is your portfolio?</Text>\r\n                    <Slider\r\n                        containerStyle={{\r\n                            marginLeft: sliderWidth * 0.05\r\n                        }}\r\n                        min={0}\r\n                        max={100}\r\n                        step={25}\r\n                        sliderLength={sliderWidth * 0.9}\r\n                        values={[anaylistProfile.data.portfolio_concentration || 50]}\r\n                        onValuesChange={(v) => {\r\n                            anaylistProfile.update({\r\n                                portfolio_concentration: v[0]\r\n                            })\r\n                        }\r\n                        }\r\n                    />\r\n                    <View style={{ flexDirection: \"row\", justifyContent: \"space-between\", marginBottom: 16 }}>\r\n                        <Text>Highly Diversified</Text>\r\n                        <Text>Very Concentrated</Text>\r\n                    </View>\r\n                    <Text style={questionStyle}>What benchmark do you follow?</Text>\r\n                    <Picker\r\n                        value={anaylistProfile.data.benchmark}\r\n                        placeholder='Select Benchmark'\r\n                        items={benches}\r\n                        {...bindPicker(anaylistProfile, \"benchmark\", {\r\n                            fromType: (v) => {\r\n                                if (v) {\r\n                                    return benches[v.row].value\r\n                                }\r\n                                return \"\";\r\n                            },\r\n                            toType: (v) => {\r\n                                return new IndexPath(benches.findIndex(v => v === v));\r\n                            }\r\n                        })}\r\n                    />\r\n                    <Text style={questionStyle}>Pick a few interest and specialties</Text>\r\n                    <View>\r\n                        <Autocomplete\r\n                            value={acText || \"\"}\r\n                            onChangeText={setAcText}\r\n                            placeholder=\"Interest &amp; Specialties\"\r\n                            placement=\"bottom\"\r\n                            accessoryRight={\r\n                                (props) => <AddButton\r\n                                    onPress={() => addIfMissing(acText)}\r\n                                    height={(props?.style as any)?.height}\r\n                                    width={(props?.style as any)?.width}\r\n\r\n                                />\r\n                            }\r\n                            onSelect={(idx) => addIfMissing(acValues[idx])}>{\r\n                                acValues.map((v, i) => <AutocompleteItem key={i} title={v} />)\r\n                            }\r\n                        </Autocomplete>\r\n                    </View>\r\n                    {\r\n                        anaylistProfile.data.interests.map((v, i) => <View style={{ padding: sizes.rem0_5, flexDirection: \"row\" }}>\r\n                            <Text style={{ textAlign: \"left\", flex: 1 }}>{v}</Text><Pressable onPress={() => {\r\n                                const newInterest = [...anaylistProfile.data.interests];\r\n                                newInterest.splice(i, 1);\r\n                                anaylistProfile.update({\r\n                                    interests: newInterest\r\n                                })\r\n                            }}><Icon name=\"close-outline\" style={{ height: 24, aspectRatio: 1 }} /></Pressable>\r\n                        </View>)\r\n                    }\r\n                </AppearView>\r\n            </ElevatedSection>\r\n        </View>\r\n    </ScrollWithButtons>\r\n}\r\n\r\n","import React, {useEffect} from 'react'\r\nimport {Text, View, Pressable, PressableProps, ViewStyle, Platform} from 'react-native'\r\nimport {SvgProps, SvgXml} from 'react-native-svg'\r\n\r\n// think about just making an image source converter \r\nexport interface IIconifyIcon {\r\n    body: string;\r\n    left?: number;\r\n    top?: number;\r\n    width?: number;\r\n    height?: number;\r\n    rotate?: number;\r\n    hFlip?: boolean;\r\n    vFlip?: boolean;\r\n}\r\n\r\nexport interface IconProps {\r\n    icon: IIconifyIcon,\r\n    style?: ViewStyle,\r\n    svgProps?: SvgProps,\r\n    DEBUG?: boolean,\r\n    // Hack for right now... shoudl htink about this...    \r\n    currentColor?: string\r\n    pressableProps?: Omit<PressableProps, \"style\">\r\n}\r\n\r\nexport function IconifyIcon(props: IconProps) {\r\n    useEffect(() => {\r\n        if (props.DEBUG) {\r\n            console.log(JSON.stringify(props.icon));\r\n        }\r\n    }, [props.icon, props.DEBUG])\r\n\r\n    const xml = `<svg fill=\"black\" ${Platform.OS === \"web\" ? 'style=\"height:100%;width:100%;\"' : \"\"} width=\"${props.icon.width || 0}\" height=\"${props.icon.height || 0}\" viewBox=\"0 0 ${props.icon.width || 0} ${props.icon.height || 0}\">${props.currentColor ? props.icon.body.replace(/\"currentColor\"/gi, `\"${props.currentColor}\"`) : props.icon.body}</svg>`;\r\n    const svg =\r\n        Platform.OS === \"web\" ? <View style={props.svgProps?.style}>\r\n                <div style={{height: \"100%\", width: \"100%\"}} dangerouslySetInnerHTML={{__html: xml}}/>\r\n            </View> :\r\n            <SvgXml height={\"100%\"} width={\"100%\"} xml={xml}  {...props.svgProps} />\r\n\r\n    return props.pressableProps ?\r\n        <Pressable style={props.style} {...props.pressableProps}>{svg}</Pressable> :\r\n        <View style={props.style}>{svg}</View>\r\n}","import AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { getCallBackUrl } from \"@tradingpost/common/api/entities/static/EntityApiBase\";\r\nimport { openBrowserAsync, WebBrowserResultType } from \"expo-web-browser\";\r\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { Linking } from \"react-native\";\r\nimport { EventRegister } from \"react-native-event-listeners\";\r\nimport uuid from 'react-native-uuid';\r\nimport { initLds } from \"../../lds\";\r\n//TODO: SHould put this all in the app later as a generate link \r\nconst clientId = \"cm9mUHBhbVUxZzcyVGJNX0xrc2E6MTpjaQ\";\r\nconst platform = \"twitter\",\r\n    redirectUriText = `${getCallBackUrl()}/auth/${platform}`,\r\n    redirectUri = new URL(redirectUriText),\r\n    authUrlText = \"https://twitter.com/i/oauth2/authorize\"\r\n//state = `amira_${platform}`;\r\n\r\nexport interface ITokenResponse {\r\n    \"token_type\": \"bearer\",\r\n    \"expires_in\": number,\r\n    \"access_token\": string,\r\n    \"scope\": string\r\n}\r\n\r\nexport interface TwitterMe {\r\n    id: string,\r\n    name: string\r\n    username: string\r\n}\r\n\r\nexport function useTwitterAuthWebView() {\r\n    const state = useRef<string>(uuid.v4() as string);\r\n    let intervalHandler = useRef<any>()\r\n    const nav = useNavigation()\r\n    const openAuth = useCallback(async () => {\r\n        await AsyncStorage.removeItem(\"auth-twitter-code\");\r\n        const _challenge = Math.random().toString().substring(2, 10);\r\n        const authUrl = new URL(authUrlText);\r\n        authUrl.searchParams.append(\"response_type\", \"code\");\r\n        authUrl.searchParams.append(\"client_id\", clientId);\r\n        authUrl.searchParams.append(\"redirect_uri\", redirectUriText);\r\n        authUrl.searchParams.append(\"state\", state.current);\r\n        authUrl.searchParams.append(\"scope\", \"users.read tweet.read offline.access\");\r\n        authUrl.searchParams.append(\"code_challenge\", _challenge);\r\n        authUrl.searchParams.append(\"code_challenge_method\", \"plain\");\r\n        console.log(\"OPENING BRWOSER\")\r\n        //const openResult = await openBrowserAsync(authUrl.toString());\r\n        \r\n        nav.navigate(\"TwitterAuthWebView\", {\r\n            url: authUrl.toString(),\r\n            challenge: _challenge\r\n        })\r\n        \r\n    \r\n    }, []);\r\n\r\n    //Clean up interval if its dangling \r\n    useEffect(()=>{\r\n        return ()=> clearInterval(intervalHandler.current)\r\n    },[])\r\n\r\n    return openAuth\r\n}\r\n\r\n\r\nexport function useTwitterAuth() {\r\n    const state = useRef<string>(uuid.v4() as string);\r\n    let intervalHandler = useRef<any>()\r\n    \r\n    const openAuth = useCallback(async () => {\r\n        await AsyncStorage.removeItem(\"auth-twitter-code\");\r\n        const _challenge = Math.random().toString().substring(2, 10);\r\n        const authUrl = new URL(authUrlText);\r\n        authUrl.searchParams.append(\"response_type\", \"code\");\r\n        authUrl.searchParams.append(\"client_id\", clientId);\r\n        authUrl.searchParams.append(\"redirect_uri\", redirectUriText);\r\n        authUrl.searchParams.append(\"state\", state.current);\r\n        authUrl.searchParams.append(\"scope\", \"users.read tweet.read offline.access\");\r\n        authUrl.searchParams.append(\"code_challenge\", _challenge);\r\n        authUrl.searchParams.append(\"code_challenge_method\", \"plain\");\r\n        console.log(\"OPENING BRWOSER\")\r\n        const openResult = await openBrowserAsync(authUrl.toString());\r\n        \r\n        const code = await new Promise<string>((res,rej)=>{\r\n        //HACK: will look for a better solution later \r\n            //TODO: Also need to check state here just in case no matter what ... \r\n            clearInterval(intervalHandler.current);       \r\n            intervalHandler.current =setInterval(async ()=>{\r\n                const code = await AsyncStorage.getItem(\"auth-twitter-code\");\r\n                console.log(\"########## LOOKING FOR THE CODE ##########\");\r\n                if(code){{\r\n                    res(code);\r\n                    console.log(\"########## I FOUND THE CODE ##########\");\r\n                }\r\n                clearInterval(intervalHandler.current);\r\n                }\r\n            },1000);\r\n        })\r\n        \r\n        // let respTest = await resp.text();\r\n        // if (!resp.ok)\r\n        //     throw new Error(respTest)\r\n        // else {\r\n        //     //respTest = await resp.text();\r\n        //     console.log(respTest);\r\n        // }\r\n        //const auth    //: ITokenResponse =  JSON.parse(respTest);  //await resp.json();\r\n        return await Api.User.extensions.linkSocialAccount({ callbackUrl: getCallBackUrl(), platform,code, challenge:_challenge}) ;        \r\n    }, []);\r\n\r\n    //Clean up interval if its dangling \r\n    useEffect(()=>{\r\n        return ()=> clearInterval(intervalHandler.current)\r\n    },[])\r\n\r\n    return openAuth\r\n}\r\n\r\n// export const getToken = async (info: {\r\n//     code: string\r\n// }) => {\r\n//     try {\r\n        \r\n//         // const meResp = await fetch(\"https://api.twitter.com/2/users/me\", {\r\n//         //     method: \"GET\",\r\n//         //     headers: {\r\n//         //         Authorization: `Bearer ${auth.access_token}`\r\n//         //     }\r\n//         // });\r\n\r\n//         // if (!meResp.ok)\r\n//         //     throw new Error(await meResp.text())\r\n\r\n//         // const meData: {\r\n//         //     data: TwitterMe\r\n\r\n//         // } = await meResp.json();\r\n\r\n\r\n//     })\r\n\r\n// }","import AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { getCallBackUrl } from \"@tradingpost/common/api/entities/static/EntityApiBase\";\r\nimport { openBrowserAsync, WebBrowserResultType } from \"expo-web-browser\";\r\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { Linking } from \"react-native\";\r\nimport { EventRegister } from \"react-native-event-listeners\";\r\nimport uuid from 'react-native-uuid';\r\nimport { makeRedirectUrl } from \"./shared\";\r\n\r\n//TODO: SHould put this all in the app later as a generate link \r\nconst clientId = \"408632420955-7gsbtielmra10pj4sdccgml20tphfujk.apps.googleusercontent.com\";\r\nconst platform = \"youtube\",\r\n    redirectUriText = makeRedirectUrl(platform),// `http://localhost:19006/auth/${platform}`,\r\n    redirectUri = new URL(redirectUriText),\r\n    authUrlText = \"https://accounts.google.com/o/oauth2/v2/auth\"\r\n//state = `amira_${platform}`;\r\n\r\nexport interface ITokenResponse {\r\n    \"token_type\": \"bearer\",\r\n    \"expires_in\": number,\r\n    \"access_token\": string,\r\n    \"scope\": string\r\n}\r\n\r\nexport interface TwitterMe {\r\n    id: string,\r\n    name: string\r\n    username: string\r\n}\r\n\r\nexport function useGoogleAuth() {\r\n    const state = useRef<string>(uuid.v4() as string);\r\n    let intervalHandler = useRef<any>()\r\n    \r\n    const openAuth = useCallback(async () => {\r\n        await AsyncStorage.removeItem(\"auth-youtube-code\");\r\n        const _challenge = Math.random().toString().substring(2, 10);\r\n        //const authUrl = new URL(authUrlText);\r\n        // authUrl.searchParams.append(\"response_type\", \"code\");\r\n        // authUrl.searchParams.append(\"client_id\", clientId);\r\n        // authUrl.searchParams.append(\"redirect_uri\", redirectUriText);\r\n        // authUrl.searchParams.append(\"state\", state.current);\r\n        // authUrl.searchParams.append(\"scope\", \"https://www.googleapis.com/auth/youtube\");\r\n        // authUrl.searchParams.append(\"code_challenge\", _challenge);\r\n        // authUrl.searchParams.append(\"code_challenge_method\", \"plain\");\r\n    //https://www.googleapis.com/auth/youtubepartner-channel-audit\r\n        const googleUrl = `https://accounts.google.com/o/oauth2/v2/auth?`+\r\n        `scope=https%3A//www.googleapis.com/auth/youtube%20https%3A//www.googleapis.com/auth/youtubepartner-channel-audit&`+\r\n        `include_granted_scopes=true&`+\r\n        `response_type=code&`+\r\n        `state=state_parameter_passthrough_value&`+\r\n        `redirect_uri=${encodeURIComponent(redirectUriText)}&`+\r\n        `client_id=${clientId}`;\r\n\r\n        const openResult = await openBrowserAsync(googleUrl);\r\n        \r\n        const code = await new Promise<string>((res,rej)=>{\r\n        //HACK: will look for a better solution later \r\n            //TODO: Also need to check state here just in case no matter what ... \r\n            clearInterval(intervalHandler.current);       \r\n            intervalHandler.current =setInterval(async ()=>{\r\n                const code = await AsyncStorage.getItem(\"auth-youtube-code\");\r\n                if(code){\r\n                    res(code);\r\n                clearInterval(intervalHandler.current);\r\n                }\r\n            },1000);\r\n        })\r\n        \r\n        // let respTest = await resp.text();\r\n        // if (!resp.ok)\r\n        //     throw new Error(respTest)\r\n        // else {\r\n        //     //respTest = await resp.text();\r\n        //     console.log(respTest);\r\n        // }\r\n        //const auth    //: ITokenResponse =  JSON.parse(respTest);  //await resp.json();\r\n        return await Api.User.extensions.linkSocialAccount({platform,code, challenge:_challenge, callbackUrl:getCallBackUrl()});\r\n    }, []);\r\n\r\n    //Clean up interval if its dangling \r\n    useEffect(()=>{\r\n        return ()=> clearInterval(intervalHandler.current)\r\n    },[])\r\n\r\n    return openAuth\r\n}\r\n\r\n// export const getToken = async (info: {\r\n//     code: string\r\n// }) => {\r\n//     try {\r\n        \r\n//         // const meResp = await fetch(\"https://api.twitter.com/2/users/me\", {\r\n//         //     method: \"GET\",\r\n//         //     headers: {\r\n//         //         Authorization: `Bearer ${auth.access_token}`\r\n//         //     }\r\n//         // });\r\n\r\n//         // if (!meResp.ok)\r\n//         //     throw new Error(await meResp.text())\r\n\r\n//         // const meData: {\r\n//         //     data: TwitterMe\r\n\r\n//         // } = await meResp.json();\r\n\r\n\r\n//     })\r\n\r\n// }","\r\nimport { getCallBackUrl } from '@tradingpost/common/api/entities/static/EntityApiBase';\r\nimport Constants, { AppOwnership } from 'expo-constants'\r\n\r\nexport const makeRedirectUrl = (platform: string) => {\r\n    let baseUrl = AppOwnership.Expo === Constants.appOwnership ? Constants.manifest?.hostUri : \"\";\r\n    return `${getCallBackUrl()}/auth/${platform}`\r\n}","import React, { useEffect, useState, useMemo, useRef, useCallback } from \"react\"\r\nimport { IconifyIcon, IIconifyIcon } from \"./IconfiyIcon\"\r\nimport { ElevatedSection, Section, Subsection } from \"./Section\"\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { View, Animated, Pressable, PressableProps, Platform } from \"react-native\"\r\nimport { useFocusEffect, useLinkTo, useNavigation } from \"@react-navigation/native\"\r\nimport { Autocomplete, AutocompleteItem, Icon, IndexPath, Text, TabView, Tab } from \"@ui-kitten/components\";\r\nimport { bannerText, elevated, flex, paddView, paddViewWhite, sizes, thinBannerText, social as socialStyling, fonts } from \"../style\";\r\nimport { useAppUser } from \"../Authentication\"\r\nimport { KeyboardAvoidingInput } from \"./KeyboardAvoidingInput\";\r\nimport { useTwitterAuth, useTwitterAuthWebView } from \"../utils/third-party/twitter\";\r\nimport { social } from \"../images\";\r\nimport { AppColors } from \"../constants/Colors\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { useGoogleAuth } from \"../utils/third-party/youtube\";\r\nimport { getCallBackUrl } from \"@tradingpost/common/api/entities/static/EntityApiBase\";\r\n\r\n\r\nexport function YourContentComponent(props?: any) {\r\n    let { loginState, signIn, updateState } = useAppUser(),\r\n        toast = useToast(),\r\n        [inputMessage, setInputMessage] = useState(''),\r\n        [inputPlatform, setInputPlatform] = useState(''),\r\n        [inputValue, setInputValue] = useState('');\r\n    const nav = useNavigation();\r\n\r\n    let appUser = loginState?.appUser;\r\n    const authToken = loginState?.authToken\r\n    \r\n    const getTwitterTokenOther = useTwitterAuth();\r\n    const getGoogleToken = useGoogleAuth();\r\n\r\n    let userClaims = appUser?.claims;\r\n\r\n    let [twitterHandle, setTwitterHandle] = useState(userClaims ? userClaims.find(c => c.platform === \"twitter\")?.claims?.handle : '')\r\n    let [substackUsername, setsubstackUsername] = useState(userClaims ? userClaims.find(c => c.platform === \"substack\")?.claims?.handle : '')\r\n    let [spotifyShow, setSpotifyShow] = useState(userClaims ? userClaims.find(c => c.platform === \"spotify\")?.claims?.handle : '')\r\n    let [youtubeChannel, setYoutubeChannel] = useState(userClaims ? userClaims.find(c => c.platform === \"youtube\")?.claims?.handle : '')\r\n    useFocusEffect(useCallback(() => {\r\n        if (props?.newTwitterhandle) setTwitterHandle(props.newTwitterhandle);\r\n    },[props]))\r\n    return (\r\n        <ElevatedSection title=\"\" style={{ padding: 5 }}>\r\n            <Text style={[thinBannerText, { fontSize: fonts.medium, lineHeight: fonts.medium * 1.5 }]}>TradingPost aggregates content across several social platforms.</Text>\r\n            <View style={{ flexDirection: \"row\", marginHorizontal: sizes.rem2, marginBottom: sizes.rem1 }}>\r\n                <HandleButton\r\n                    key={`${twitterHandle}`}\r\n                    title={twitterHandle}\r\n                    icon={social.TwitterLogo}\r\n                    onPress={() => {\r\n                        if (Platform.OS === 'android') {\r\n                            nav.navigate('TwitterAuthWebView', props?.isNewAccount)\r\n                        }\r\n                        else {\r\n                            getTwitterTokenOther()\r\n                                .then((handle) => setTwitterHandle(handle))\r\n                                .catch((err) => {\r\n                                    console.error(err)\r\n                                    toast.show('This Twitter account has already been claimed! If you think this is a mistake, please reach out to help@tradingpostapp.com.')\r\n                                })\r\n                        }\r\n                        setInputPlatform('twitter')\r\n                    }}\r\n                    iconPadd={sizes.rem1}\r\n                />\r\n                <HandleButton title={youtubeChannel} icon={social.YouTubeLogo}\r\n                    iconPadd={sizes.rem1}\r\n                    onPress={() => {\r\n                        getGoogleToken().then((handle) => {\r\n                            setYoutubeChannel(handle)\r\n                        }).catch((err) => {\r\n                            console.error(err)\r\n                            toast.show('This YouTube account has already been claimed! If you think this is a mistake, please reach out to help@tradingpostapp.com.')\r\n                        })\r\n                        setInputPlatform('youtube')\r\n                        //await Api.User.extensions.linkSocialAccount({platform: 'substack', platform_idenifier: ''}) ;  \r\n                    }}\r\n                />\r\n            </View>\r\n            <View style={{ flexDirection: \"row\", marginHorizontal: sizes.rem2, marginBottom: sizes.rem1 }}>\r\n                <HandleButton title={substackUsername} icon={social.SubstackLogo}\r\n                    iconPadd={sizes.rem1}\r\n                    currentColor={socialStyling.substackColor}\r\n                    onPress={() => {\r\n                        setInputMessage('Please enter your Substack username as it appears in your profile URL');\r\n                        setInputPlatform('substack')\r\n                        //await Api.User.extensions.linkSocialAccount({platform: 'substack', platform_idenifier: ''}) ;  \r\n                    }}\r\n                />\r\n                <HandleButton title={spotifyShow} icon={social.SpotifyLogo}\r\n                    iconPadd={sizes.rem0_5}\r\n                    onPress={() => {\r\n                        setInputMessage(\"Please enter your Spotify Podcast's Profile URL.\\nIn the Spotify App, this can be found by going to your Podcasts's Profile Page, clicking the 'Share' Icon and clicking 'Copy Link'.\");\r\n                        setInputPlatform('spotify')\r\n                        //await Api.User.extensions.linkSocialAccount({platform: 'substack', platform_idenifier: ''}) ;  \r\n                    }}\r\n                />\r\n            </View>\r\n            <Text style={[thinBannerText, { fontSize: fonts.medium, lineHeight: fonts.medium * 1.5 }]}>Sign in to your account(s) above to claim or add your content.</Text>\r\n            <View style={(inputPlatform === '' || inputPlatform === 'twitter') ? { display: 'none' } : { display: 'flex' }}>\r\n                <Text>\r\n                    {inputMessage}\r\n                </Text>\r\n                <KeyboardAvoidingInput\r\n                    placeholder={'Enter here'}\r\n                    value={inputValue}\r\n                    setValue={setInputValue}\r\n                    displayButton={true}\r\n                    numLines={2}\r\n                    rightIcon={(props: any) => <Icon\r\n                        fill={AppColors.secondary}\r\n                        name=\"plus-square\" height={35} width={35} style={{ height: 35, width: 35, padding: 0, alignContent: 'center' }} />}\r\n\r\n                    onClick={(r: any, s: any, t: any) => {\r\n                        Api.User.extensions.linkSocialAccount({ callbackUrl: getCallBackUrl(), platform: inputPlatform, platform_idenifier: r })\r\n                            .then((result) => {\r\n                                if (inputPlatform === 'substack') setsubstackUsername(result)\r\n                                else if (inputPlatform === 'spotify') setSpotifyShow(result)\r\n                            })\r\n                            .catch((err) => {\r\n                                console.error(err);\r\n                                toast.show(`${inputPlatform} Account Link Failed. Please try again or email contact@tradingpostapp.com for assistance.`)\r\n                            })\r\n                            .finally(() =>{\r\n                                s('')\r\n                                authToken ? signIn(\"\", authToken) : {};\r\n                            }\r\n                            )\r\n                        \r\n                        \r\n                    }}\r\n                />\r\n            </View>\r\n        </ElevatedSection>)\r\n\r\n}\r\n\r\nexport const HandleButton = (props: { title: string | undefined, icon: IIconifyIcon, currentColor?: string, iconPadd?: number } & Pick<PressableProps, \"onPress\">) => {\r\n    return <Pressable onPress={props.onPress} style={{ flex: 1, height: sizes.rem8, opacity: props.title ? 1 : 0.25 }}>\r\n        <IconifyIcon icon={props.icon} style={{ width: \"100%\", flex: 1, justifyContent: \"space-around\" }} svgProps={{ style: { paddingVertical: props.iconPadd, height: \"100%\" } }} currentColor={props.currentColor} />\r\n        <Text numberOfLines={1} style={{ fontStyle: !props.title ? \"italic\" : undefined, color: \"black\", textAlign: \"center\" }}>{props.title || \"Unclaimed\"}</Text>\r\n    </Pressable>\r\n}","\r\nimport { NavigationProp, useNavigation } from \"@react-navigation/native\"\r\nimport { Icon } from \"@ui-kitten/components\"\r\nimport React from \"react\"\r\nimport { Pressable, Image } from \"react-native\"\r\nimport { AppColors } from \"../constants/Colors\"\r\nimport { sizes } from \"../style\"\r\n\r\nexport const ProfileButton = (props: { userId: string, profileUrl: string, size: number, editable?: boolean }) => {\r\n    const nav = useNavigation<NavigationProp<any>>();\r\n\r\n    return <Pressable\r\n        onPress={props.editable ? async () => {\r\n            nav.navigate(\"ImagePicker\");\r\n        } : () => {\r\n            if (props.userId)\r\n                nav.navigate(\"Profile\", {\r\n                    userId: props.userId\r\n                });\r\n        }}\r\n        style={{\r\n            backgroundColor: \"gray\",\r\n            width: props.size,\r\n            height: props.size,\r\n            borderRadius: props.size / 2,\r\n            alignSelf: \"center\",\r\n            borderWidth: props.size / 32,\r\n            borderColor: \"#ccc\",\r\n            overflow: \"hidden\"\r\n        }}>\r\n        {props.profileUrl ? <Image style={{ height: \"100%\", width: \"100%\" }} source={{ uri: props.profileUrl }} /> : <Icon height={\"100%\"} width={\"100%\"} name=\"person\" />}\r\n    </Pressable>\r\n}","import React from \"react\";\r\nimport { Text } from \"@ui-kitten/components\";\r\nimport { View } from 'react-native'\r\nimport { flex, fonts, sizes } from \"../style\";\r\n\r\nexport function NoDataPanel(props: { message?: string }) {\r\n    return <View style={[{ justifyContent: \"center\", alignContent: \"center\", margin: sizes.rem1 }]}>\r\n        <Text style={{ fontSize: fonts.large, color: \"lightgray\", textAlign: \"center\" }}>\r\n            {props.message || \"No Items\"}\r\n        </Text>\r\n    </View>\r\n}","import React, { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { Text, FlatList, FlatListProps, ListRenderItem, ScrollView, View, ViewToken } from \"react-native\";\r\nimport { flex } from \"../style\";\r\nimport { TBI } from \"../utils/misc\";\r\nimport { Link } from \"./Link\";\r\nimport { NoDataPanel } from \"./NoDataPanel\";\r\n\r\n\r\nexport type DataOrQuery<T> = T[] | ((data: T[] | undefined, page: number, sizeCache: SizeParts[]) => Promise<T[]>);\r\nexport type ListProps<T> = {\r\n    data?: DataOrQuery<T>,\r\n    noDataMessage?: string,\r\n    loadingMessage?: string,\r\n    maxDisaplyCount?: number,\r\n    maxDisaplyText?: string\r\n    datasetKey?: string | number,\r\n    keyExtractor?: FlatListProps<T>[\"keyExtractor\"]\r\n}\r\ntype HasU<T, U> = U extends undefined | null ? T : (T | U);\r\nexport type SizeParts = { index: number, length: number, offset: number };\r\nexport function List<T, U>(props: {\r\n    //    data: ReadonlyArray<T> | null | undefined\r\n    maxPage?: number,\r\n    listKey?: string,\r\n    renderItem: ListRenderItem<HasU<T, U>> | null | undefined\r\n    nestedScrollEnabled?: boolean,\r\n    preloadOffset?: number,\r\n    loadingItem: U,\r\n    getItemLayout?: ((\r\n        data: Array<HasU<T, U>> | null | undefined,\r\n        index: number,\r\n        sizeCache: SizeParts[]\r\n    ) => { length: number; offset: number; index: number }) | undefined;\r\n} & ListProps<T> & Pick<FlatListProps<HasU<T, U>>, \"style\" | \"contentContainerStyle\" | \"numColumns\" | \"ListHeaderComponent\" | \"StickyHeaderComponent\" | \"keyExtractor\" | \"horizontal\">) {\r\n\r\n    const [internalData, setInternalData] = useState<T[]>(),\r\n        { data, preloadOffset, datasetKey } = props,\r\n        [currentPage, setCurrentPage] = useState(0),\r\n        [pagesDone, setPagesDone] = useState(false),\r\n        isLoadingRef = useRef(true),\r\n        [maxItem, setMaxItem] = useState(-1),\r\n        [triggertHack, setTriggerHack] = useState(false),\r\n        sizeCache = useRef<SizeParts[]>([]).current,\r\n        datasetKeyRef = useRef(props.datasetKey);\r\n\r\n    datasetKeyRef.current = props.datasetKey;\r\n\r\n    useEffect(() => {\r\n        setPagesDone(false);\r\n\r\n        (async () => {\r\n            if (typeof data == \"function\") {\r\n                const result = await data(undefined, 0, sizeCache);\r\n\r\n                if (!result.length || props.maxPage === 0) {\r\n                    setPagesDone(true);\r\n                }\r\n\r\n                if (datasetKey === datasetKeyRef.current) {\r\n                    isLoadingRef.current = false;\r\n                    setInternalData(result);\r\n                }\r\n\r\n\r\n            }\r\n            else {\r\n                isLoadingRef.current = false;\r\n                setInternalData(data);\r\n                setPagesDone(true);\r\n            }\r\n        })()\r\n    }, [datasetKey, Boolean(data), props.maxPage])\r\n\r\n    useEffect(() => {\r\n        if (!pagesDone && typeof data === 'function' && internalData) {\r\n            if (!isLoadingRef.current) {\r\n                const remaining = (internalData.length - 1) - maxItem;\r\n                if (remaining <= (preloadOffset || 1)) {\r\n                    isLoadingRef.current = true;\r\n                    setTriggerHack((hack) => !hack);\r\n                    const nextPage = currentPage + 1;\r\n                    const originalLength = internalData.length\r\n\r\n                    if (datasetKey === datasetKeyRef.current) {\r\n                        data(internalData, nextPage, sizeCache).then((newData) => {\r\n                            if (newData.length === originalLength || props.maxPage === nextPage) {\r\n                                isLoadingRef.current = false;\r\n                                setPagesDone(true);\r\n                            }\r\n                            else {\r\n                                setInternalData(newData);\r\n                                setCurrentPage(nextPage);\r\n                                isLoadingRef.current = false;\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n                else {\r\n                    //console.log(\"NOPE\");\r\n                }\r\n            }\r\n            else {\r\n                //console.log(\"WHAT UP\");\r\n            }\r\n        }\r\n\r\n    }, [maxItem, datasetKey, internalData, preloadOffset, currentPage, props.maxPage])\r\n\r\n    const vp = useMemo(() => [\r\n        {\r\n            viewabilityConfig: {\r\n                itemVisiblePercentThreshold: 20\r\n            },\r\n            onViewableItemsChanged: (ev: { viewableItems: Array<ViewToken>; changed: Array<ViewToken> }) => {\r\n                let max = 0;\r\n                ev.viewableItems.forEach((vi) => {\r\n                    max = Math.max(max, vi.index || 0);\r\n                });\r\n                setMaxItem((curMax) =>\r\n                    Math.max(max, curMax));\r\n            },\r\n        },\r\n    ], []);\r\n    const needsSplice = internalData && props.maxDisaplyCount && internalData.length > props.maxDisaplyCount;\r\n\r\n    return !internalData?.length ? <NoDataPanel message={internalData ? props.noDataMessage : (props.loadingMessage || \"Loading...\")} /> :\r\n        <FlatList\r\n            listKey={props.listKey}\r\n            horizontal={props.horizontal}\r\n            style={[{\r\n                //    height: \"100%\" \r\n            }, props.style]}\r\n            // contentContainerStyle={[{ height: \"100%\" }, props.contentContainerStyle]}\r\n            getItemLayout={props.getItemLayout ? (a, b) => (props.getItemLayout as any)(a, b, sizeCache) : undefined}\r\n            numColumns={props.numColumns}\r\n            ListHeaderComponent={props.ListHeaderComponent}\r\n            ListFooterComponent={needsSplice ? () => {\r\n                return <Link onPress={TBI} style={{ marginLeft: \"auto\" }}>{props.maxDisaplyText || \"View All\"}</Link>\r\n            } : undefined}\r\n            stickyHeaderIndices={props.ListHeaderComponent ? [0] : undefined}\r\n            data={(isLoadingRef.current ? [...internalData, props.loadingItem] : (needsSplice ? internalData.slice(0, props.maxDisaplyCount) : internalData)) as HasU<T, U>[]}\r\n            keyExtractor={props.keyExtractor}\r\n            renderItem={props.renderItem}\r\n            nestedScrollEnabled={props.nestedScrollEnabled}\r\n            viewabilityConfigCallbackPairs={vp}\r\n        />\r\n\r\n    // return <ScrollView nestedScrollEnabled>\r\n    //     <View\r\n    //         style={{ backgroundColor: \"purple\", height: 1000, borderColor: \"yellow\", borderWidth: 2 }}\r\n    //     ></View>\r\n    // </ScrollView>\r\n}","import React, { MutableRefObject, useEffect, useRef, useState } from \"react\";\r\nimport { Pressable, View, ViewStyle, Text } from \"react-native\";\r\nimport { useSecuritiesList } from '../SecurityList'\r\nimport { SearchBar } from \"./SearchBar\";\r\nimport { Interface } from \"@tradingpost/common/api\"\r\nimport { ISecurityList } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport { Avatar, Icon } from \"@ui-kitten/components\";\r\nimport { List } from \"./List\";\r\nimport { flex } from \"../style\";\r\nimport { KeyboardAvoidingInput } from \"./KeyboardAvoidingInput\";\r\nimport { useIsKeyboardVisible } from \"../utils/hooks\";\r\n\r\nconst cellStyle = { flexGrow: 1, aspectRatio: 1, justifyContent: \"center\", marginVertical: 4, alignItems: \"center\", flexBasis: 20 } as ViewStyle;\r\nconst numItemsPerRow = 4;\r\n//TODO: Need to optimize security load\r\nconst empty = {};\r\ntype SecOrEmpty = ISecurityList | {};\r\n\r\nexport type SelectionConverterRef = MutableRefObject<((selectedItems: Record<number, true>) => ISecurityList[]) | null>;\r\n//helper until i  lean this up\r\nexport const useWatchlistPicker = () => {\r\n    const [selectedItems, setSelectedItems] = useState<Record<number, true>>({})\r\n    return {\r\n        selectionConverter: useRef<(selectedItems: Record<number, true>) => ISecurityList[]>(null),\r\n        selectedItems,\r\n        onSelectedItemschanged: setSelectedItems,\r\n        symbolConverter: useRef<(symbols: string[]) => Record<number, true>>(null),\r\n    }\r\n}\r\nexport const WatchlistPicker = (props: { selectedItems: Record<number, true>, securitiesLoaded?: () => void, onSelectedItemschanged: (selectedItems: Record<number, true>) => void, selectionConverter: SelectionConverterRef, symbolConverter: MutableRefObject<((symbols: string[]) => Record<number, true>) | null> }) => {\r\n\r\n    const [searchText, setSearchText] = useState(\"\"),\r\n        { selectedItems } = props,\r\n        [data, setData] = useState<(Interface.ISecurityList | {})[]>([]),\r\n        [datasetKey, setDatasetKey] = useState(\"\"),\r\n        { securities: {\r\n            list: securities\r\n        } } = useSecuritiesList()\r\n\r\n    //    if (props.selectionConverter) {\r\n\r\n\r\n    //This is a all part of just getting done quickly.. need ot clean this up \r\n    useEffect(() => {\r\n        if (securities.length && props.securitiesLoaded) {\r\n            props.securitiesLoaded()\r\n        }\r\n\r\n    }, [securities.length, Boolean(props.securitiesLoaded)])\r\n    props.selectionConverter.current = securities.length ? (_selectedItems) => securities.filter((s) => _selectedItems[s.id]) : null;\r\n    props.symbolConverter.current = securities.length ? (_symbols) => {\r\n        const output: Record<number, true> = {}\r\n        securities.forEach((s) => {\r\n            if (_symbols.find((_s) => _s === s.symbol))\r\n                output[s.id] = true;\r\n        })\r\n        return output;\r\n    } : null\r\n    //}\r\n    //  else if (props.selectionConverter)\r\n    const delayRef = useRef(0);\r\n\r\n    const selectedItemCount = Object.keys(selectedItems).length;\r\n    useEffect(() => {\r\n        if (delayRef.current)\r\n            clearTimeout(delayRef.current);\r\n\r\n        delayRef.current = setTimeout(() => {\r\n\r\n            const items: (ISecurityList | {})[] = securities.filter((s, i) =>\r\n                (!searchText && (i < 25 || selectedItems[s.id])) ||\r\n                ((searchText.length >= 3 && new RegExp(searchText, \"gi\").test(s.security_name))) ||\r\n                (searchText.length && (new RegExp(searchText, \"gi\")).test(s.symbol))\r\n            ).sort((a, b) => {\r\n                if (selectedItems[a.id] && !selectedItems[b.id])\r\n                    return -1\r\n                else if (selectedItems[b.id] && !selectedItems[a.id])\r\n                    return 1\r\n                else {\r\n                    return (() => {\r\n\r\n                        if (searchText) {\r\n                            if (searchText.length <= 3) {\r\n                                const aStartsWith = new RegExp(\"^\" + searchText, \"gi\").test(a.symbol);\r\n                                const bStartsWith = new RegExp(\"^\" + searchText, \"gi\").test(b.symbol);\r\n\r\n                                if (aStartsWith && !bStartsWith)\r\n                                    return -1\r\n                                else if (!aStartsWith && bStartsWith)\r\n                                    return 1\r\n                                else\r\n                                    return a.symbol.localeCompare(b.symbol)\r\n\r\n                            }\r\n                            else\r\n                                return a.symbol.localeCompare(b.symbol)\r\n                        }\r\n                        else\r\n                            return 0\r\n                    })()\r\n\r\n\r\n\r\n                }\r\n\r\n\r\n                //? a.symbol.localeCompare(b.symbol) : \r\n                //                (selectedItems[a.id] ? -1 : -1)\r\n            });\r\n\r\n            const gap = Array.from({ length: numItemsPerRow - (items.length % numItemsPerRow) }, () => empty);\r\n            if (gap.length !== 4)\r\n                items.push(...gap);\r\n\r\n            setData(items)\r\n            setDatasetKey(searchText);\r\n        }, 333) as any;\r\n    }, [searchText, securities, selectedItems])\r\n\r\n\r\n\r\n    return <View\r\n        style={flex}\r\n    >\r\n        <View style={{ padding: 8 }}>\r\n            <KeyboardAvoidingInput\r\n                value={searchText}\r\n                displayButton={false}\r\n                numLines={1}\r\n                placeholder={'Searching...'}\r\n                setValue={setSearchText}\r\n            />\r\n        </View>\r\n        <View style={flex}>\r\n            <List\r\n                numColumns={numItemsPerRow}\r\n                data={data}\r\n                datasetKey={datasetKey ? datasetKey : data.filter(d => d !== empty).length}\r\n                renderItem={(i) => {\r\n                    return <SecurityCell\r\n                        item={i.item}\r\n                        isSelected={isSec(i.item) ? (selectedItems[i.item.id] || false) : false}\r\n                        onPressed={(isSelected) => {\r\n                            if (isSec(i.item)) {\r\n                                const selectedClone = { ...selectedItems };\r\n                                if (isSelected)\r\n                                    selectedClone[i.item.id] = true;\r\n                                else\r\n                                    delete selectedClone[i.item.id];\r\n\r\n\r\n                                props.onSelectedItemschanged(selectedClone)\r\n                                //setSelectedItems(selectedClone);\r\n                                return true\r\n                            }\r\n                            return false;\r\n                        }} />\r\n\r\n                }}\r\n                loadingItem={undefined} />\r\n        </View>\r\n    </View >\r\n}\r\n\r\n\r\nconst isSec = (item: SecOrEmpty): item is ISecurityList => {\r\n    return item !== empty;\r\n}\r\n\r\nconst SecurityCell = (props: { item: ISecurityList | {}, isSelected: boolean, onPressed: (isSelected: boolean) => boolean }) => {\r\n    const { item, onPressed, isSelected } = props;\r\n    const [innerSelected, setInnerSelected] = useState(isSelected)\r\n\r\n    return <Pressable\r\n        onPress={() => {\r\n            if (onPressed(!innerSelected)) {\r\n                setInnerSelected(!innerSelected);\r\n            }\r\n        }}\r\n        style={cellStyle}>\r\n        {isSec(item) ? <><View>\r\n            <Avatar shape='square' source={{ uri: item.logo_url }} size=\"large\" style={{ }} resizeMode={'contain'} />\r\n            {innerSelected && <View style={{ position: \"absolute\", width: \"40%\", aspectRatio: 1, zIndex: 50000, right: \"-10%\", bottom: \"-10%\" } as ViewStyle}>\r\n                <View style={{ backgroundColor: \"white\", position: \"absolute\", left: \"25%\", top: \"25%\", height: \"50%\", width: \"50%\" }} />\r\n                <Icon name=\"checkmark-circle-2\" fill=\"green\" style={{ height: \"100%\", width: \"100%\" }} />\r\n            </View>}\r\n        </View>\r\n            <Text>{item.symbol}</Text>\r\n        </> : null\r\n        }\r\n    </Pressable>\r\n}","/**\r\n * Learn more about Light and Dark modes:\r\n * https://docs.expo.io/guides/color-schemes/\r\n */\r\n\r\nimport { Text as DefaultText, View as DefaultView } from 'react-native';\r\n\r\nimport Colors from '../constants/Colors';\r\nimport useColorScheme from '../hooks/useColorScheme';\r\n\r\nexport function useThemeColor(\r\n  props: { light?: string; dark?: string },\r\n  colorName: keyof typeof Colors.light & keyof typeof Colors.dark\r\n) {\r\n  const theme = useColorScheme();\r\n  const colorFromProps = props[theme];\r\n\r\n  if (colorFromProps) {\r\n    return colorFromProps;\r\n  } else {\r\n    return Colors[theme][colorName];\r\n  }\r\n}\r\n\r\ntype ThemeProps = {\r\n  lightColor?: string;\r\n  darkColor?: string;\r\n};\r\n\r\nexport type TextProps = ThemeProps & DefaultText['props'];\r\nexport type ViewProps = ThemeProps & DefaultView['props'];\r\n\r\nexport function Text(props: TextProps) {\r\n  const { style, lightColor, darkColor, ...otherProps } = props;\r\n  const color = useThemeColor({ light: lightColor, dark: darkColor }, 'text');\r\n\r\n  return <DefaultText style={[{ color }, style]} {...otherProps} />;\r\n}\r\n\r\nexport function View(props: ViewProps) {\r\n  const { style, lightColor, darkColor, ...otherProps } = props;\r\n  const backgroundColor = useThemeColor({ light: lightColor, dark: darkColor }, 'background');\r\n\r\n  return <DefaultView style={[{ backgroundColor }, style]} {...otherProps} />;\r\n}\r\n","import { ColorSchemeName, useColorScheme as _useColorScheme } from 'react-native';\r\n\r\n// The useColorScheme value is always either light or dark, but the built-in\r\n// type suggests that it can be null. This will not happen in practice, so this\r\n// makes it a bit easier to work with.\r\nexport default function useColorScheme(): NonNullable<ColorSchemeName> {\r\n  return _useColorScheme() as NonNullable<ColorSchemeName>;\r\n}\r\n","import { Icon, Text } from \"@ui-kitten/components\";\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\"\r\nimport { AppColors } from \"../../constants/Colors\";\r\nimport { bannerText, flex, fonts, paddView, sizes, thinBannerText } from \"../../style\";\r\nimport Analytics from '../../assets/analytics.svg'\r\nimport { SvgExpo } from \"../../components/SvgExpo\";\r\nimport { useEffect, useRef } from \"react\";\r\nimport { Animated } from \"react-native\";\r\nimport { View } from \"../../components/Themed\";\r\nimport { ElevatedSection } from \"../../components/Section\";\r\nimport { useLinkTo } from \"@react-navigation/native\";\r\nimport { CreateAccountProps } from \"./shared\";\r\nimport { Api } from \"@tradingpost/common/api\"\r\nimport React from \"react\";\r\n\r\n\r\nexport const AnalystStartSection = (props: CreateAccountProps) => {\r\n\r\n    const opacityAnim = useRef(new Animated.Value(0)).current,\r\n        linkTo = useLinkTo<any>();\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n\r\n    return <ScrollWithButtons\r\n        fillHeight\r\n        buttons={{\r\n            right: {\r\n                text: \"I'm An Analyst\",\r\n                onPress: async () => {\r\n                    const defaultSettings = {\r\n                        analyst: true,\r\n                        push_notifications: {\r\n                            mentions: true,\r\n                            upvotes: true,\r\n                            watchlist_changes: true,\r\n                        },\r\n                        portfolio_display: {\r\n                            performance: true,\r\n                            holdings: true,\r\n                            trades: true\r\n                        }\r\n                    }\r\n                    await Api.User.update(props.user.data.id, {\r\n                        settings: defaultSettings\r\n                    })\r\n                    linkTo(\"/create/analystinterest\");\r\n                }\r\n            },\r\n            left: {\r\n                text: \"Not Now\",\r\n                onPress: async () => {\r\n                    const defaultSettings = {\r\n                        analyst: false,\r\n                        push_notifications: {\r\n                            mentions: true,\r\n                            upvotes: true,\r\n                            watchlist_changes: true,\r\n                        },\r\n                        portfolio_display: {\r\n                            performance: false,\r\n                            holdings: false,\r\n                            trades: false\r\n                        }\r\n                    }\r\n                    await Api.User.update(props.user.data.id, {\r\n                        settings: defaultSettings\r\n                    })\r\n                    linkTo(\"/create/profilepicture\");\r\n                }\r\n            }\r\n        }}\r\n    >\r\n        <View style={[paddView, { justifyContent: \"center\" }]}>\r\n            <ElevatedSection title=\"\">\r\n                <Animated.View style={[{ opacity: opacityAnim }]}>\r\n                    <Text style={[thinBannerText]}>Are you a Market Analyst?</Text>\r\n                    <View style={{ padding: sizes.rem1 }}>\r\n                        <SvgExpo style={{ width:\"100%\", aspectRatio:1.5}}>\r\n                            <Analytics />\r\n                        </SvgExpo>\r\n                    </View>\r\n                    <Text style={[thinBannerText, { fontSize: fonts.medium }]}>Select Analyst if you actively post fundamental or technical research related to stocks, commodities, crypto, etc. and would like to bolster your content.</Text>\r\n                </Animated.View>\r\n            </ElevatedSection>\r\n        </View>\r\n    </ScrollWithButtons>\r\n}","import React, { ReactComponentElement, ReactElement, useEffect, useState } from \"react\";\r\nimport { Text, Pressable, TextStyle, View, ListRenderItem } from \"react-native\";\r\n// import { LinearGradient, SvgFromXml } from \"react-native-svg\";\r\nimport { AppColors } from \"../constants/Colors\";\r\n//import { Colors, Fader, Text, View } from \"react-native-ui-lib\";\r\nimport { fonts, row, sizes, elevated as elevatedView } from \"../style\";\r\nimport { List, ListProps } from \"./List\";\r\nimport { NoDataPanel } from \"./NoDataPanel\";\r\nimport Theme from '../theme-light.json'\r\n//TODO: needs to be re-named... itsm misleading\r\ntype RowFunction<T, R> = (value: any, key: (keyof T) | undefined, item: T, index: number) => R\r\n\r\ntype EntireRowFunction<T, R> = (item: T, index: number) => R\r\n\r\n\r\ninterface TableColumnProps {\r\n    alias?: string,\r\n    width?: number | string,\r\n    align?: \"left\" | \"right\" | undefined\r\n}\r\n//This about if yo ucan infer this in the future\r\ntype FieldElement<T> = (props: {\r\n    item: T,\r\n    index: number\r\n    style?: (TextStyle | undefined)[]\r\n} & TableColumnProps) => ReactElement;\r\n\r\n\r\n\r\nexport type ITableColumn<T> = {\r\n    field?: (keyof T) | FieldElement<T>,\r\n    style?: TextStyle\r\n    headerStyle?: TextStyle\r\n    dynamicStyle?: RowFunction<T, TextStyle>,\r\n    stringify?: RowFunction<T, string>\r\n} & TableColumnProps\r\n\r\nfunction ensureString<T>(item?: (keyof T) | FieldElement<T>): item is (keyof T) | undefined {\r\n    return typeof item === \"string\" || !item;\r\n}\r\n\r\n// //helper to create strongly typed table column definitions\r\n// export class TableColumn<T, K extends keyof T> implements ITableColumn<T>{\r\n//     field: K;\r\n//     width?: number;\r\n//     style?: TextStyle;\r\n//     toString?: ((value: any, key: keyof T, item: T, index: number) => string);\r\n//     constructor(field: K, props: Omit<ITableColumn<T>, \"field\" | \"toString\"> & { toString: (value: T[K], key: K, item: T, index: number) => string }) {\r\n//         this.field = field\r\n//         this.style = props.style;\r\n//         this.width = props.width;\r\n//         this.toString = props.toString\r\n//     }\r\n\r\n// }\r\n\r\n// export function makeTableColumn<T>(field: keyof T, props: //Pick<ITableColumn<T>, \"width\" | \"style\"|\"toString\"> &\r\n//     { toString?(value: T[typeof field], key: typeof field, item: T, index: number): string }\r\n\r\n// ): ITableColumn<T> {\r\n//     return {\r\n//         field,\r\n//         //width: props.width,\r\n//         //style: props.style,\r\n//         toString: props.toString as ((value: any, key: keyof T, item: T, index: number) => string)\r\n//     }\r\n// }\r\n\r\nexport const stringyDate = (dts?: string) => {\r\n    const v = dts ? new Date(dts) : new Date();\r\n    return `${v?.getMonth() + 1}/${v?.getDate()}/${v?.getFullYear().toString().substring(2, 4)}`\r\n}\r\n\r\n\r\nexport type TableProps<T> = {\r\n    maxPage?: number,\r\n    listKey?: string,\r\n    columns: ITableColumn<T>[],\r\n    elevated?: boolean,\r\n    nestedScrollEnabled?: boolean,\r\n    rowPressed?: EntireRowFunction<T, void>,\r\n    hideHeader?: boolean,\r\n    renderAuxItem?: ListRenderItem<T> | null | undefined\r\n} & ListProps<T>\r\n\r\nexport function Table<T>(\r\n    props: TableProps<T>) {\r\n\r\n    const\r\n        { data, columns, nestedScrollEnabled, elevated, rowPressed } = props,\r\n        columnStyle: Partial<Record<number, (TextStyle | undefined)[]>> = {},\r\n        headerStyle: Partial<Record<number, (TextStyle | undefined)[]>> = {},\r\n        headerAlias: Partial<Record<number, string>> = {},\r\n        columnDynamicStyle: Partial<Record<number, RowFunction<T, TextStyle>>> = {},\r\n        columnsToString: Partial<Record<number, RowFunction<T, string>>> = {};\r\n\r\n    columns.forEach((c, i) => {\r\n        columnStyle[i] = [{\r\n            fontSize: fonts.xSmall,\r\n            lineHeight: fonts.medium,\r\n            width: c.width,\r\n            flex: c.width === undefined ? 1 : undefined,\r\n            textAlign: c.align || \"center\",\r\n            marginLeft: c.align === \"left\" ? 0 : undefined\r\n\r\n        }, c.style,];\r\n\r\n        headerStyle[i] = [{\r\n            fontSize: fonts.small,\r\n            width: c.width,\r\n            flex: c.width === undefined ? 1 : undefined,\r\n            textAlign: c.align || \"center\",\r\n            color: Theme[\"color-info-800\"],\r\n            //paddingBottom: 16\r\n        }, c.headerStyle]\r\n\r\n        if (c.alias)\r\n            headerAlias[i] = c.alias;\r\n\r\n        if (c.dynamicStyle)\r\n            columnDynamicStyle[i] = c.dynamicStyle;\r\n\r\n        if (c.stringify)\r\n            columnsToString[i] = c.stringify;\r\n\r\n    })\r\n\r\n    return <List\r\n        maxPage={props.maxPage}\r\n        maxDisaplyCount={props.maxDisaplyCount}\r\n        maxDisaplyText={props.maxDisaplyText}\r\n        keyExtractor={props.keyExtractor}\r\n        listKey={props.listKey}\r\n        ListHeaderComponent={props.hideHeader ? undefined : () => {\r\n            return <View key={\"table_header\"} style={{ alignItems: \"stretch\" }}>\r\n                <View style={[row, { backgroundColor: \"white\" }]}>\r\n                    {columns.map((c, i) => {\r\n                        return <Text key={`header_${i}`} numberOfLines={1} style={headerStyle[i]} >{headerAlias[i] || c.field?.toString()}</Text>\r\n                    })}\r\n                </View>\r\n                {/**Was just for testing... **/}\r\n                <View style={{ height: 16 }}>\r\n                    {/* <Fader size={16} position={Fader.position.TOP} /> */}\r\n                </View>\r\n            </View>\r\n        }}\r\n        nestedScrollEnabled={nestedScrollEnabled}\r\n        data={data}\r\n        datasetKey={props.datasetKey}\r\n        noDataMessage={props.noDataMessage}\r\n        loadingItem={null}\r\n        renderItem={(info) => {\r\n            //return <View><Text>{JSON.stringify(info.item)}</Text></View>\r\n            return info.item ?\r\n                <Pressable\r\n                    onPress={rowPressed ? () => {\r\n                        rowPressed(info.item, info.index)\r\n                    } : undefined}\r\n                    key={`row_${info.index}`}\r\n                    style={[props.elevated ? elevatedView : { paddingVertical: 8, marginHorizontal: 4, overflow: 'visible' }]}>\r\n                    <View style={row}>\r\n                        {\r\n                            props.columns.map((c, i) => {\r\n                                const key = `column_${i}`,\r\n                                    colStyle = columnStyle[i];\r\n\r\n                                if (ensureString(c.field)) {\r\n                                    const toString = columnsToString[i],\r\n                                        dynamicStyle = columnDynamicStyle[i],\r\n                                        evaluatedStyle = dynamicStyle ? [...[colStyle || []], dynamicStyle(c.field ? info.item[c.field] : undefined, c.field, info.item, info.index)] : colStyle,\r\n                                        evaluatedValue = toString ? toString(c.field ? info.item?.[c.field] : undefined, c.field, info.item, info.index) : (c.field ? info.item?.[c.field] : undefined)\r\n                                    return <Text key={key} numberOfLines={1} style={evaluatedStyle} >{evaluatedValue}</Text>\r\n                                }\r\n                                else {\r\n                                    const FieldElem = c.field;\r\n                                    return <FieldElem key={key} item={info.item} index={info.index} width={c.width} alias={c.alias} style={colStyle} />\r\n                                }\r\n                            })\r\n                        }\r\n                    </View>\r\n                    {props.renderAuxItem && props.renderAuxItem(info)}\r\n                </Pressable> :\r\n                <Text>Loading...</Text>\r\n        }} />\r\n}","import {flex, sizes} from \"../style\";\r\n\r\nimport React, {useEffect, useRef, useState} from \"react\";\r\nimport {Animated, Pressable, Text, Alert, Platform} from \"react-native\";\r\nimport {Icon} from \"@ui-kitten/components\";\r\n\r\nimport {Api} from \"@tradingpost/common/api\";\r\nimport {Section} from \"./Section\";\r\nimport {Table} from \"./Table\";\r\nimport {AddButton, EditButton} from \"./AddButton\";\r\nimport {openBrowserAsync} from 'expo-web-browser';\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport {useFocusEffect, useNavigation} from \"@react-navigation/native\";\r\nimport {DirectBrokeragesType} from \"@tradingpost/common/brokerage/interfaces\";\r\n\r\n//@ts-ignore\r\nconst alertPolyfill = (title, description, options, extra) => {\r\n    const result = window.confirm([title, description].filter(Boolean).join('\\n'))\r\n\r\n    if (result) {\r\n        //@ts-ignore\r\n        const confirmOption = options.find(({style}) => style !== 'cancel')\r\n        confirmOption && confirmOption.onPress()\r\n    } else {\r\n        //@ts-ignore\r\n        const cancelOption = options.find(({style}) => style === 'cancel')\r\n        cancelOption && cancelOption.onPress()\r\n    }\r\n}\r\n\r\nconst alert = Platform.OS === 'web' ? alertPolyfill : Alert.alert;\r\nexport const LinkBrokerageComponent = () => {\r\n    const nav = useNavigation();\r\n    const opacityAnim = useRef(new Animated.Value(0)).current;\r\n    const [accounts, setAccounts] = useState<Awaited<ReturnType<typeof Api.User.extensions.getBrokerageAccounts> | null>>()\r\n    const intervalRef = useRef<any>();\r\n    const [needsRefresh, setNeedsRefresh] = useState<{}>();\r\n    const [brokerLink, setLink] = useState(\"\");\r\n\r\n    const openLink = async () => {\r\n        await Api.User.extensions.generateBrokerageLink(undefined).then(({link}) => {\r\n            setLink(link)\r\n        })\r\n        const browserName = \"finicity_auth\";\r\n        await openBrowserAsync(brokerLink, {\"windowName\": browserName});\r\n        clearInterval(intervalRef.current);\r\n\r\n        intervalRef.current = setInterval(async () => {\r\n            console.log(\"WTF\");\r\n            if (await AsyncStorage.getItem(\"auth-finicity-code\")) {\r\n                console.log(\"CODE HAS BEEN FOUND\");\r\n                setAccounts(await Api.User.extensions.getBrokerageAccounts())\r\n            }\r\n        }, 5000)\r\n    }\r\n\r\n    const removeAccount = async (accountId: number, brokerage: DirectBrokeragesType) => {\r\n        await Api.Brokerage.extensions.scheduleForDeletion({brokerage, accountId});\r\n        if (!accounts) return\r\n        setAccounts(accounts.filter(a => a.id !== accountId));\r\n    }\r\n\r\n    //cleanup\r\n    useEffect(() => {\r\n        AsyncStorage.removeItem(\"auth-finicity-code\");\r\n        return () => {\r\n            clearInterval(intervalRef.current);\r\n            AsyncStorage.removeItem(\"auth-finicity-code\");\r\n        }\r\n    }, [])\r\n\r\n\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n    }, [needsRefresh])\r\n\r\n    useFocusEffect(\r\n        React.useCallback(() => {\r\n            setAccounts(null);\r\n            Api.User.extensions.getBrokerageAccounts().then((r) => {\r\n                setAccounts(r);\r\n            });\r\n        }, [])\r\n    );\r\n\r\n    return (\r\n        <Section style={flex} title=\"Link Brokerage Account\" button={(buttonProps) => accounts?.length ? <EditButton\r\n            onPress={() => {\r\n                nav.navigate(\"BrokeragePicker\")\r\n            }}\r\n            height={buttonProps.height}\r\n            width={buttonProps.width}\r\n        /> : <AddButton\r\n            onPress={() => nav.navigate(\"BrokeragePicker\")}\r\n            height={buttonProps.height}\r\n            width={buttonProps.width}\r\n        />}>\r\n            <Table datasetKey={accounts?.map(a => a.id).join(\",\") || \"none\"}\r\n                   columns={[\r\n                       {alias: \"Brokerage\", field: \"broker_name\"},\r\n                       {alias: \"Account #\", field: \"account_number\"},\r\n                       {alias: \" \", field: \"remove\", width: '10%', align: 'left'}\r\n                   ]}\r\n                   data={accounts?.map(acc => {\r\n                       return {\r\n                           ...acc,\r\n                           remove: <Pressable\r\n                               onPress={() => {\r\n                                   return alert(\r\n                                       `Removing ${acc.broker_name} Account?`,\r\n                                       `Are you sure you want to remove this brokerage account?`,\r\n                                       [\r\n                                           {\r\n                                               text: \"Yes\",\r\n                                               onPress: async () => {\r\n                                                   await removeAccount(acc.id, acc.broker_name as DirectBrokeragesType)\r\n                                               }\r\n                                           },\r\n                                           {\r\n                                               text: \"No\"\r\n                                           }\r\n                                       ]\r\n                                   )\r\n\r\n                               }}>\r\n                               <Icon\r\n                                   fill={\"#E74C3C\"}\r\n                                   name={\"trash-outline\"}\r\n                                   style={{\r\n                                       height: sizes.rem1,\r\n                                       width: sizes.rem1,\r\n                                   }}\r\n                               />\r\n                           </Pressable>\r\n                       }\r\n                   })}\r\n                   noDataMessage=\"You have no linked accounts\"\r\n            />\r\n        </Section>)\r\n}","import React, { useState } from 'react';\r\nimport { Pressable, View } from 'react-native';\r\nimport { Button, Layout, Tooltip, Text } from '@ui-kitten/components';\r\nimport { InfoIcon } from '../images';\r\n\r\nexport const TooltipComponent = (props: {text: string}) => {\r\n\r\n  const [visible, setVisible] = useState(false);\r\n\r\n  const renderToggleButton = () => {\r\n    return (\r\n        <Button \r\n            appearance='ghost'\r\n            accessoryLeft={<InfoIcon height={24} width={24}  style={{ marginHorizontal: 0 }} />}\r\n            style={{paddingHorizontal: 0, paddingVertical: 0, minHeight: 0, minWidth: 0}}\r\n            onPress={() => setVisible(true)}>\r\n            {''}\r\n        </Button>\r\n\r\n  ) as React.ReactElement};\r\n  return (\r\n    <View style={{justifyContent: 'center',\r\n                    alignItems: 'flex-start',\r\n                    flex: 1\r\n                    }}>\r\n        <Tooltip\r\n            anchor={renderToggleButton}\r\n            style={{ translateY: 37,  translateX: -15, width: '70%', height: '130%'}}\r\n            backdropStyle={{backgroundColor: 'rgba(0, 0, 0, 0.5)'}}\r\n            placement={'right'}\r\n            visible={visible}\r\n            onBackdropPress={() => setVisible(false)}\r\n            >\r\n            <Text>{props.text}</Text>\r\n        </Tooltip>\r\n    </View>\r\n  );\r\n};","import React, { ReactElement } from \"react\";\r\nimport { Toggle } from \"@ui-kitten/components\";\r\nimport { Icon, Text } from \"@ui-kitten/components\";\r\nimport { View, Animated } from \"react-native\"\r\nimport { TooltipComponent } from \"./ToolTip\";\r\nimport { sizes } from \"../style\";\r\n\r\n\r\nexport function SwitchField(props: any) {\r\n    return <View style={props.viewStyle}>\r\n        <Toggle\r\n            style={props.toggleStyle}\r\n            checked={props.checked}\r\n            onChange={props.onChange} />\r\n        <View style={[props.toolTipText ? {display: 'flex'} : {display: 'none'}, {justifyContent: 'center', flex: 1}]}>\r\n            <TooltipComponent text={props.toolTipText}/>\r\n        </View>\r\n        <Text style={props.textStyle}>\r\n            {props.label}\r\n        </Text>\r\n    </View> \r\n    \r\n\r\n}\r\n\r\n","import { NavigationProp } from \"@react-navigation/native\";\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { ISubscriberList, IUserGet } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport { Text, Tab, TabView, Avatar } from \"@ui-kitten/components\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { View } from \"react-native\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { useAppUser } from \"../Authentication\";\r\nimport { DeleteButton, EditButton, SettingsButton } from \"../components/AddButton\";\r\nimport { Picker } from \"../components/Picker\";\r\nimport { PrimaryButton } from \"../components/PrimaryButton\";\r\nimport { ProfileButton } from \"../components/ProfileButton\";\r\nimport { SecondaryButton } from \"../components/SecondaryButton\";\r\nimport { ElevatedSection } from \"../components/Section\";\r\nimport { SwitchField } from \"../components/SwitchField\";\r\nimport { Table } from \"../components/Table\";\r\nimport { RootStackScreenProps } from \"../navigation/pages\";\r\nimport { paddView, sizes } from \"../style\";\r\nimport { useReadonlyEntity } from \"../utils/hooks\";\r\nimport { AwaitedReturn } from \"../utils/misc\";\r\n\r\nexport const SubscriptionScreen = (props: RootStackScreenProps<\"Subscription\">) => {\r\n    const [index, setIndex] = useState(0);\r\n    //const [] = useState<  >()\r\n    //  useEffect(()=>{},[])\r\n    const mySubscriptionsCall = Api.Subscriber.extensions.getBySubscriber,\r\n        mySubscribersCall = Api.Subscriber.extensions.getByOwner,\r\n        [subscriptions, setSubscriptions] = useState<AwaitedReturn<typeof mySubscriptionsCall>>(),\r\n        [subscribers, setSubscribers] = useState<AwaitedReturn<typeof mySubscribersCall>>(),\r\n        [buttonClick, setButtonClick] = useState(false);\r\n    const { loginState } = useAppUser();\r\n    const appUser = loginState?.appUser;\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                const subtionTask = mySubscriptionsCall();\r\n                const suberTask = mySubscribersCall();\r\n                const [subscriptions, subscribers] = await Promise.all([subtionTask, suberTask])\r\n                setSubscriptions(subscriptions);\r\n                setSubscribers(subscribers);\r\n            }\r\n            catch (ex) {\r\n                console.error(ex);\r\n            }\r\n        })()\r\n\r\n    }, [])\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                const subtionTask = mySubscriptionsCall();\r\n                const suberTask = mySubscribersCall();\r\n                const [subscriptions, subscribers] = await Promise.all([subtionTask, suberTask])\r\n                setSubscriptions(subscriptions);\r\n                setSubscribers(subscribers);\r\n            }\r\n            catch (ex) {\r\n                console.error(ex);\r\n            }\r\n        })()\r\n\r\n    }, [buttonClick])\r\n\r\n    return <View style={paddView}><ElevatedSection title=\"Manage Subscriptions\"\r\n        button={(p) => <SettingsButton onPress={() => {\r\n            if (appUser?.settings?.analyst) {\r\n                props.navigation.navigate(\"SubscriptionSettings\");\r\n            }\r\n        }} {...p} />}\r\n    ><TabView\r\n        indicatorStyle={{\r\n            marginTop: 26\r\n        }} style={{ marginVertical: sizes.rem0_5 }} selectedIndex={index} onSelect={appUser?.settings?.analyst ? setIndex : undefined}>\r\n            <Tab title=\"Subscriptions\">\r\n                <Table\r\n                    rowPressed={(r) => {\r\n                        props.navigation.navigate(\"Profile\", {\r\n                            userId: r.subscription?.[0].user_id\r\n                        })\r\n                    }}\r\n                    data={subscriptions}\r\n                    columns={\r\n                        [\r\n                            {\r\n                                headerStyle: {\r\n                                    height: 20,\r\n                                    width: 20,\r\n                                    flex: 0,\r\n                                    flexBasis: 22\r\n                                },\r\n                                alias: \" \",\r\n                                field: (item) => {\r\n                                    const user = item.item.subscription[0].user[0];\r\n                                    return <ProfileButton userId={user.id} size={20} profileUrl={user.profile_url || \"\"} />\r\n                                }\r\n                            },\r\n                            {\r\n                                alias: \"Analyst\",\r\n                                align: \"left\",\r\n                                field: \"subscription\",\r\n                                style: {\r\n                                    paddingLeft: 4\r\n                                },\r\n                                stringify: (k: ISubscriberList[\"subscription\"]) => {\r\n                                    return '@' + k[0].user[0].handle\r\n                                }\r\n                            },\r\n                            {\r\n                                alias: \"Cost\",\r\n                                align: \"left\",\r\n                                field: \"subscription\",\r\n                                headerStyle: {\r\n                                    textAlign: 'center'\r\n                                },\r\n                                style: {\r\n                                    textAlign: 'center',\r\n                                    //paddingLeft: 6\r\n                                },\r\n                                stringify: (k: ISubscriberList[\"subscription\"]) => {\r\n                                    return String(String(k[0].cost) === '$0.00' ? 'Free' : k[0].cost)\r\n                                }\r\n                            },\r\n                            {\r\n                                alias: \"Since\",\r\n                                field: \"start_date\",\r\n                                stringify: (k: ISubscriberList[\"start_date\"]) => {\r\n                                    return new Date(k).toLocaleDateString();\r\n                                }\r\n                            }\r\n                        ]\r\n                    }\r\n                />\r\n            </Tab>\r\n            <Tab title=\"Subscribers\">\r\n                <Table\r\n                    rowPressed={(r) => {\r\n                        props.navigation.navigate(\"Profile\", {\r\n                            userId: r.subscription?.[0].user_id\r\n                        })\r\n                    }}\r\n                    data={subscribers}\r\n                    columns={\r\n                        [\r\n                            {\r\n                                headerStyle: {\r\n                                    height: 20,\r\n                                    width: 20,\r\n                                    flex: 0,\r\n                                    flexBasis: 22\r\n                                },\r\n                                alias: \" \",\r\n                                field: (item) => {\r\n                                    const user = item.item.user[0];\r\n                                    return <ProfileButton userId={user.id} size={20} profileUrl={user.profile_url || \"\"} />\r\n                                }\r\n                            },\r\n                            {\r\n                                alias: \"Subscriber\",\r\n                                align: \"left\",\r\n                                field: \"user\",\r\n                                style: {\r\n                                    paddingLeft: 4\r\n                                },\r\n                                stringify: (k: ISubscriberList[\"user\"]) => {\r\n                                    return '@' + k[0].handle\r\n                                }\r\n                            },\r\n                            {\r\n                                alias: \"Status\",\r\n                                field: (item) => {\r\n                                    if (item.item.approved) {\r\n                                        return <Text>Approved</Text>;\r\n                                    }\r\n                                    else {\r\n                                        return <SecondaryButton\r\n                                            children={'Approve'}\r\n                                            style={{\r\n                                                backgroundColor: \"#35A265\", borderColor: \"#35A265\",\r\n                                                minHeight: 26,\r\n                                                height: 26,\r\n                                                minWidth: 70,\r\n                                                width: 70\r\n                                            }}\r\n                                            onPress={async () => {\r\n                                                item.item.approved = true;\r\n                                                await Api.Subscriber.update(item.item.id, {\r\n                                                    approved: true\r\n                                                })\r\n                                                setButtonClick(!buttonClick);\r\n                                            }}\r\n                                        />\r\n                                    }\r\n                                },\r\n                                style: { color: '#35A265' }\r\n                                /*\r\n                                stringify: (k: ISubscriberList[\"approved\"]) => {\r\n                                    if (k) {\r\n                                        return 'Approved'\r\n                                    }\r\n                                    else {\r\n\r\n                                        return ''\r\n                                    }\r\n                                }\r\n                                */\r\n                            },\r\n                            {\r\n                                alias: \"Since\",\r\n                                field: \"start_date\",\r\n                                stringify: (k: ISubscriberList[\"start_date\"]) => {\r\n                                    return new Date(k).toLocaleDateString();\r\n                                }\r\n                            },\r\n                            {\r\n                                headerStyle: {\r\n                                    flexGrow: 0,\r\n                                    flexShrink: 0,\r\n                                    flexBasis: '9%'\r\n\r\n                                },\r\n                                alias: ' ',\r\n                                field: (item) => {\r\n                                    return <DeleteButton\r\n                                        onPress={async () => {\r\n                                            await Api.Subscriber.extensions.removeSubscription({\r\n                                                userId: item.item.user_id,\r\n                                                subscriptionId: item.item.subscription_id\r\n                                            })\r\n                                            setButtonClick(!buttonClick);\r\n                                        }}\r\n                                        width={26}\r\n                                        //height={'auto'}\r\n                                        color={'#EC5328'}\r\n                                    />\r\n                                },\r\n                                style: { marginLeft: -10 }\r\n                            }\r\n                        ]\r\n                    }\r\n                />\r\n\r\n            </Tab>\r\n        </TabView>\r\n    </ElevatedSection>\r\n    </View>\r\n}\r\n\r\nexport const SubscriptionSettingsScreen = (props: RootStackScreenProps<\"SubscriptionSettings\">) => {\r\n\r\n\r\n    return <View style={paddView}>\r\n        <SubscriptionSettingsView navigation={props.navigation} />\r\n    </View>\r\n}\r\n\r\nexport const SubscriptionSettingsView = (props: { navigation?: NavigationProp<any>, submitRef?: React.MutableRefObject<{ submit: () => Promise<void> }> }) => {\r\n\r\n    const call = Api.Subscription.extensions.getByUserId;\r\n    const subscription = useReadonlyEntity<AwaitedReturn<typeof call>>(null)\r\n    const toast = useToast();\r\n    //const [approveSubs, setApproveSubs] = useState(subscription.data?.settings.approve_new === undefined ? false : subscription.data?.settings.approve_new);\r\n\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                subscription.resetData(await call());\r\n            }\r\n            catch (ex: any) {\r\n                toast.show(ex.message)\r\n            }\r\n        })()\r\n    }, [])\r\n\r\n    const submit = async () => {\r\n        if (subscription.data?.id) {\r\n            await Api.Subscription.update(subscription.data.id, {\r\n                cost: subscription?.data?.cost || 0,\r\n                settings: subscription.data.settings\r\n            })\r\n        }\r\n        else {\r\n            await Api.Subscription.insert({\r\n                name: \"Basic Subscription\",\r\n                cost: subscription?.data?.cost || 0,\r\n                settings: subscription?.data?.settings || false,\r\n                user_id: ''\r\n            })\r\n        }\r\n        props.navigation?.goBack();\r\n    };\r\n    if (props.submitRef)\r\n        props.submitRef.current.submit = submit;\r\n\r\n    return <ElevatedSection title=\"Primary Subscription\">\r\n        <Text style={{ marginVertical: sizes.rem1 }}>\r\n            Set a cost associated with subscribing to your account.\r\n        </Text>\r\n        <Picker\r\n            style={{ marginBottom: sizes.rem1 }}\r\n            value={subscription?.data?.cost || 0}\r\n            onSelect={(item) => {\r\n                subscription.update({\r\n                    cost: item.row ? Math.pow(5, item.row) : 0\r\n                })\r\n            }}\r\n            items={[...Array.from({ length: 1 }).map((v, i) => {\r\n                const cost = i ? Math.pow(5, i) : 0;\r\n                return {\r\n                    label: cost ? `${cost}/month` : \"Free\",\r\n                    value: cost\r\n                }\r\n            })]}\r\n        />\r\n        <SwitchField label='Approve New Subscribers?'\r\n            checked={subscription.data?.settings.approve_new}\r\n            onChange={() => { subscription.update({ settings: { approve_new: !subscription.data?.settings.approve_new } }) }}\r\n            viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', padding: 4, paddingVertical: 30 }}\r\n            toggleStyle={{}}\r\n            textStyle={{ fontSize: 16, fontWeight: '500', alignSelf: 'center' }} />\r\n        {/* Codes will go here   */}\r\n        {!props.submitRef?.current && <PrimaryButton disabled={!subscription.hasChanged} onPress={submit} >Apply</PrimaryButton>}\r\n    </ElevatedSection>\r\n}","import React from \"react\"\r\nimport { View, Text } from \"react-native\"\r\nimport { HtmlViewProps } from \"./HtmlView.interface\"\r\n\r\nexport const HtmlView = (props: HtmlViewProps) => {\r\n    return <View style={props.style}><iframe\r\n        //marginwidth=\"0\"\r\n        //marginheight=\"0\"\r\n        //hspace=\"0\"\r\n        //vspace=\"0\"\r\n        //frameborder=\"0\"\r\n        name=\"_MYFIRAME\" scrolling=\"no\"\r\n        src={props.isUrl ? props.children : undefined}\r\n        srcDoc={!props.isUrl ? props.children : undefined}\r\n        style={{ position: \"absolute\", top: 0, bottom: 0, height: \"100%\", width: \"100%\", borderWidth: 0 }} />\r\n    </View>\r\n}","import React, { useLayoutEffect, useState } from 'react';\r\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\r\nimport { Tab, TabView } from '@ui-kitten/components';\r\nimport { useReadonlyEntity } from '../utils/hooks'\r\nimport { AccountInfoSection } from './create_account/AccountInfoSection';\r\nimport { InvestmentInterestSection } from './create_account/InvestmentInterestSection';\r\nimport { YourContent } from './create_account/YourContentSection';\r\nimport { useData } from '../lds';\r\nimport { IUserGet } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport { useToast, } from 'react-native-toast-notifications'\r\nimport { BasicInfoSection } from './create_account/BasicInfoSection';\r\nimport { ProfileIconSection } from './create_account/ProfileIconSection';\r\nimport { PickWatchlistSection } from './create_account/PickWatchlistSection';\r\nimport { useAppUser } from '../Authentication';\r\nimport { AnalystStartSection } from './create_account/AnalystStartSection';\r\nimport { LinkBrokerageSection } from './create_account/LinkBrokerageSection';\r\nimport { AppColors } from '../constants/Colors';\r\nimport { SubscriptionCostSection } from './create_account/SubscrpitionCostSection';\r\nimport { Log } from '../utils/logger';\r\nimport { PrivacyScreen } from './create_account/PrivacyScreen';\r\nimport { TermsScreen } from './create_account/TermsScreen';\r\n\r\nexport const screens = {\r\n    'LoginInfo': AccountInfoSection,\r\n    'BasicInfo': BasicInfoSection,\r\n    'Watchlist': PickWatchlistSection,\r\n    'AnalystStart': AnalystStartSection,\r\n    'AnalystInterest': InvestmentInterestSection,\r\n    'LinkBrokerage': LinkBrokerageSection,\r\n    'AddClaims': YourContent,\r\n    'SubscriptionCost': SubscriptionCostSection,\r\n    'ProfilePicture': ProfileIconSection,\r\n    'Terms': TermsScreen,\r\n    'Privacy':PrivacyScreen\r\n}\r\n\r\n\r\nconst screenKeys = Object.keys(screens);\r\n\r\n\r\n\r\nexport default (props: any) => {\r\n    /**\r\n     * State & hooks\r\n     */\r\n    const { loginState } = useAppUser(\"CREATE_ACCOUNT_SCREEN\"),\r\n        appUser = loginState?.appUser, userState = loginState?.setupStatus,\r\n        user = useReadonlyEntity<IUserGet>(appUser || {\r\n            profile_url: \"\",\r\n            first_name: \"\",\r\n            last_name: \"\",\r\n            handle: \"\",\r\n            email: \"\",\r\n            bio: \"\",\r\n            claims: [],\r\n            display_name: \"\",\r\n            id: \"\",\r\n            tags: [],\r\n            subscription: null as any,\r\n        }),\r\n        toast = useToast()\r\n\r\n    /** Updates user data is the current user changes **/\r\n    useLayoutEffect(() => {\r\n        if (appUser)\r\n            user.resetData(appUser);\r\n    }, [appUser]);\r\n\r\n    /**\r\n     * Sub Screen resolution based on parameters \r\n     */\r\n    let subScreen: keyof typeof screens;\r\n\r\n\r\n    if (props?.route?.params?.params?.screen)\r\n        subScreen = props?.route?.params?.params?.screen\r\n\r\n    else if (userState?.needsSettings)\r\n        subScreen = \"AnalystStart\"\r\n    else if (userState?.needsAnalystSettings)\r\n        subScreen = \"AnalystInterest\"\r\n    else if (loginState?.loginResult)\r\n        subScreen = \"BasicInfo\"\r\n    else subScreen = \"LoginInfo\"\r\n\r\n    let resolvedIndex = screenKeys.findIndex((k) => k === subScreen);\r\n    if (resolvedIndex < 0) {\r\n        resolvedIndex = 0;\r\n        Log.error(new Error(`Invalid create subscreen key :'${subScreen}'. Defaulting to index 0`));\r\n    }\r\n\r\n\r\n\r\n\r\n    const caProps = {\r\n        user,\r\n        toastMessage: (msg: string, delay: number | undefined) => {\r\n            toast.show(msg, {\r\n                duration: delay,\r\n                placement: \"top\"\r\n            });\r\n        }\r\n    }\r\n\r\n    const insets = useSafeAreaInsets();\r\n\r\n    return <TabView\r\n        style={{\r\n            paddingTop: insets.top / 2,\r\n            backgroundColor: AppColors.background,\r\n            flexGrow: 1,\r\n            maxHeight: \"100%\",\r\n        }}\r\n        swipeEnabled={false}\r\n        selectedIndex={resolvedIndex}\r\n        indicatorStyle={{\r\n            height: 0\r\n        }}\r\n        tabBarStyle={{\r\n            height: 0,\r\n            padding: 0,\r\n            paddingBottom: 0,\r\n            paddingTop: 0\r\n        }}\r\n        shouldLoadComponent={(index) => index === resolvedIndex}\r\n    >\r\n        {screenKeys.map((v, i) => {\r\n            const Screen = screens[screenKeys[i] as keyof typeof screens];\r\n            return <Tab key={\"TAB_\" + i}>\r\n                <Screen {...caProps} />\r\n            </Tab>\r\n        })}\r\n    </TabView>\r\n\r\n\r\n}\r\n\r\n","import React, { useState, useRef, useEffect, RefObject, useMemo } from \"react\";\r\nimport { Alert, TouchableOpacity, Image, ImageStyle, ViewStyle, View, Animated } from \"react-native\";\r\n//import { Navigation } from \"react-native-navigation\";\r\n//import { Nav } from '@react-navigation/native'\r\nimport { CheckBox, Input, Text, } from \"@ui-kitten/components\";\r\n//import { signOut, getStoredCreds, CreateAuth0User, UpdateUserProfile, signInStoredCreds } from \"../../apis/Authentication\";\r\nimport { ButtonField } from \"../../components/ButtonField\";\r\nimport { IconifyIcon } from \"../../components/IconfiyIcon\";\r\nimport { Section } from \"../../components/Section\";\r\nimport { TextField, ITextField } from \"../../components/TextField\";\r\nimport { bannerText, flex, sizes, textInputWiz } from \"../../style\";\r\nimport { bindTextInput, IEntity, useReadonlyEntity } from \"../../utils/hooks\";\r\nimport { isRequired, isValidEmail, isAlphaNumeric } from \"../../utils/validators\";\r\nimport { CreateAccountProps, sideMargin } from \"./shared\";\r\n\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\";\r\nimport { useData } from \"../../lds\";\r\nimport { Label } from \"../../components/Label\";\r\nimport { TBI } from \"../../utils/misc\";\r\nimport { AppColors } from \"../../constants/Colors\";\r\nimport Auth from '@tradingpost/common/api/entities/static/AuthApi'\r\nimport UserApi from '@tradingpost/common/api/entities/apis/UserApi'\r\nimport { IUserGet } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport { useAppUser } from \"../../Authentication\";\r\nimport { useLinkTo, useNavigation } from \"@react-navigation/native\";\r\nimport { registerDeviceForNotifications } from \"../../utils/notifications\";\r\nimport { Link } from \"../../components/Link\";\r\n\r\n\r\ntype FieldRefs = {\r\n    first: RefObject<ITextField>,\r\n    last: RefObject<ITextField>,\r\n    username: RefObject<ITextField>\r\n}\r\n\r\nexport function BasicInfoSection(props: CreateAccountProps) {\r\n    const\r\n        nav = useNavigation(),\r\n        [lockButtons, setLockButtons] = useState(false),\r\n        opacityAnim = useRef(new Animated.Value(0)).current,\r\n        { signIn, loginState } = useAppUser(),\r\n        appUser = loginState?.appUser,\r\n        [agreeToTerms, setAgreeToTerms] = useState(false),\r\n        [agreeToPrivacy, setAgrreeToPrivacy] = useState(false),\r\n        refs: FieldRefs = {\r\n            first: useRef<ITextField>(null),\r\n            last: useRef<ITextField>(null),\r\n            username: useRef<ITextField>(null),\r\n        },\r\n        linkTo = useLinkTo<any>(),\r\n        { value: firstTime, setValue: setFirstTime } = useData('firstTime'),\r\n        buttonConfig = {\r\n            locked: lockButtons,\r\n            left: {\r\n                text: \"Sign Out\",\r\n                onPress: async () => {\r\n                    Auth.signOut();\r\n                    nav.goBack();\r\n                }\r\n            }\r\n            // : (props.saveOnly ? undefined : {\r\n            //     text: \"Cancel\",\r\n            //     onPress: () => props.navigation.goBack()//Navigation.pop(props.componentId)\r\n            // })\r\n            ,\r\n            right: {\r\n                text: \"Next\",\r\n                onPress: async () => {\r\n                    setLockButtons(true);\r\n                    const errors: string[] = [];\r\n                    try {\r\n                        for (const k in refs) {\r\n                            const val = refs[k as keyof typeof refs];\r\n                            if (val.current && !val.current.validate()) {\r\n                                errors.push(val.current.errorMessage || \"\");\r\n                            }\r\n                        }\r\n                        if (errors.length) {\r\n\r\n                            errors.unshift(\"Please fix the following issues:\");\r\n                            props.toastMessage(errors.join(\"\\r\\n\"));\r\n\r\n                            setLockButtons(false);\r\n                        } else {\r\n                            setFirstTime(true);\r\n                            const { token } = await Auth.createUser(props.user.data.first_name, props.user.data.last_name, props.user.data.handle);\r\n                            await signIn(\"\", token);\r\n                            await registerDeviceForNotifications();\r\n                            linkTo('/create/watchlist')\r\n                            //props.next();                            \r\n                            //props.navigation.navigate(\"Root\");\r\n                            //setLockButtons(false);\r\n                        }\r\n\r\n                    } catch (ex: any) {\r\n                        if (ex.json) {\r\n                            props.toastMessage(`${ex.json.name}:\\r\\n${ex.json.policy || ex.json.description}`);\r\n                        } else if (typeof ex.message === \"string\") {\r\n                            props.toastMessage(ex.message);\r\n                        } else props.toastMessage(JSON.stringify(ex.message));\r\n                        setLockButtons(false);\r\n                    }\r\n\r\n                }\r\n            }\r\n        }\r\n\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n\r\n\r\n    return <ScrollWithButtons\r\n        buttons={buttonConfig}>\r\n        <View>\r\n            <View style={[flex, { margin: sideMargin }]}>\r\n                <Animated.Text\r\n                    style={[bannerText, { opacity: opacityAnim }]}>\r\n                    Let's keep setting up your account\r\n                </Animated.Text>\r\n                <TextField\r\n                    style={textInputWiz}\r\n                    textInputRef={refs.first}\r\n                    errorMessage={\"`First Name` is required\"}\r\n                    validate={isRequired}\r\n                    validateOnChange placeholder='First Name'\r\n                    returnKeyType=\"none\" {...bindTextInput(props.user, \"first_name\", null)}\r\n                />\r\n                <TextField\r\n                    style={textInputWiz}\r\n                    textInputRef={refs.last}\r\n                    errorMessage={\"`Last Name` is required\"}\r\n                    validate={isRequired}\r\n                    validateOnChange placeholder='Last Name'\r\n                    returnKeyType=\"none\" {...bindTextInput(props.user, \"last_name\", null)}\r\n                />\r\n                <TextField\r\n                    style={textInputWiz}\r\n                    textInputRef={refs.username}\r\n                    errorMessage={\"`Username` is required\"}\r\n                    validate={isRequired}\r\n                    validateOnChange placeholder='Username'\r\n                    returnKeyType=\"none\" {...bindTextInput(props.user, \"handle\", null)}\r\n                />\r\n            </View>\r\n        </View>\r\n    </ScrollWithButtons>\r\n}\r\n","import React, { useRef, useEffect, RefObject, useState } from \"react\";\r\nimport { View, Animated, Pressable } from \"react-native\";\r\n//import { Navigation } from \"react-native-navigation\";\r\n//import { Nav } from '@react-navigation/native'\r\nimport { Avatar, Icon, Input, Text, } from \"@ui-kitten/components\";\r\n//import { signOut, getStoredCreds, CreateAuth0User, UpdateUserProfile, signInStoredCreds } from \"../../apis/Authentication\";\r\nimport { TextField, ITextField } from \"../../components/TextField\";\r\nimport { bannerText, flex, noMargin, paddView, sizes, textInputWiz, thinBannerText } from \"../../style\";\r\nimport { CreateAccountProps, sideMargin } from \"./shared\";\r\n\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\";\r\n\r\nimport WatchlistApi from '@tradingpost/common/api/entities/apis/WatchlistApi'\r\nimport { SvgExpo } from \"../../components/SvgExpo\";\r\nimport AnalyzeImage from '../../assets/analyze2.svg'\r\nimport { useWatchlistPicker, WatchlistPicker } from \"../../components/WatchlistPicker\";\r\nimport { ElevatedSection } from \"../../components/Section\";\r\nimport { useLinkTo, useNavigation } from \"@react-navigation/native\";\r\nimport { RootStackScreenProps } from \"../../navigation/pages\";\r\n\r\ntype FieldRefs = {\r\n    first: RefObject<ITextField>,\r\n    last: RefObject<ITextField>,\r\n    username: RefObject<ITextField>\r\n}\r\n\r\n\r\nexport function PickWatchlistSection(props: CreateAccountProps) {\r\n    const nav = useNavigation<RootStackScreenProps<\"Create\">[\"navigation\"]>();\r\n    const\r\n        [lockButtons, setLockButtons] = useState(false),\r\n        opacityAnim = useRef(new Animated.Value(0)).current,\r\n        { selectionConverter: converterRef, selectedItems, onSelectedItemschanged: setSelectedItems, symbolConverter } = useWatchlistPicker(),\r\n        linkTo = useLinkTo<any>(),\r\n        buttonConfig = {\r\n            locked: lockButtons,\r\n            left: {\r\n                text: \"Not Now\",\r\n                onPress: () => {\r\n                    linkTo('/create/analyststart');\r\n\r\n                }\r\n            },\r\n            right: {\r\n                text: \"Apply\",\r\n                onPress: async () => {\r\n                    if (!Object.keys(selectedItems).length) {\r\n                        props.toastMessage(\"Please select at least one security of interest\");\r\n                    }\r\n                    else {\r\n                        setLockButtons(true);\r\n                        try {\r\n                            await WatchlistApi.insert({\r\n                                items: (converterRef.current ? converterRef.current(selectedItems) : []).map((s) => ({\r\n                                    symbol: s.symbol\r\n                                })),\r\n                                name: \"Primary Watchlist\",\r\n                                type: \"primary\" //primary | private | public \r\n                            })\r\n                            linkTo('/create/analyststart');\r\n                        }\r\n                        catch (ex: any) {\r\n                            props.toastMessage(ex.message);\r\n                            setLockButtons(false);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 1500,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n\r\n\r\n    return <ScrollWithButtons\r\n        fillHeight\r\n        buttons={buttonConfig}\r\n\r\n    >\r\n        <View style={paddView}>\r\n            <ElevatedSection title=\"\" style={[flex, noMargin]}>\r\n                <Animated.View style={{ opacity: opacityAnim }}>\r\n                    <Pressable onPress={() => {\r\n                        nav.navigate(\"OverlayModal\");\r\n                    }}><Text\r\n                        style={[thinBannerText, { marginVertical: sizes.rem0_5 }]}>\r\n                            Help us get to know you.\r\n                        </Text>\r\n                    </Pressable>\r\n                    <SvgExpo style={{ width: \"100%\", aspectRatio: 1.5 }}>\r\n                        <AnalyzeImage />\r\n                    </SvgExpo>\r\n                    <Text\r\n                        style={[bannerText, { marginHorizontal: 0, marginVertical: sizes.rem0_5 }]}>\r\n                        Pick a few companies to help us tailor to your interests\r\n                    </Text>\r\n                </Animated.View>\r\n\r\n                <WatchlistPicker\r\n                    selectionConverter={converterRef}\r\n                    selectedItems={selectedItems}\r\n                    symbolConverter={symbolConverter}\r\n                    onSelectedItemschanged={(_selectedItems) => {\r\n                        setSelectedItems(_selectedItems)\r\n                        //TODO:::: need to put this logic back in \r\n                        // if (selectedItemCount === 5 && isSelected) {\r\n                        //     props.toastMessage(\"You can only select up to 5 companies\");\r\n                        //     return false;\r\n                        // }\r\n                        // else \r\n                        // return false;\r\n                    }}\r\n                />\r\n            </ElevatedSection>\r\n        </View>\r\n    </ScrollWithButtons>\r\n}\r\n\r\n","import { Icon, Text } from \"@ui-kitten/components\";\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\"\r\nimport { AppColors } from \"../../constants/Colors\";\r\nimport { bannerText, flex, paddView, paddViewWhite, sizes, thinBannerText } from \"../../style\";\r\nimport { CreateAccountProps } from \"./shared\"\r\nimport { Bank } from '../../images'\r\nimport { SvgExpo } from \"../../components/SvgExpo\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { Animated, Pressable } from \"react-native\";\r\nimport { View } from \"../../components/Themed\";\r\nimport { ElevatedSection, Section } from \"../../components/Section\";\r\nimport { useLinkTo } from \"@react-navigation/native\";\r\nimport { LinkBrokerageComponent } from '../../components/LinkBrokerageComponent';\r\n\r\nexport const LinkBrokerageSection = (props: CreateAccountProps) => {\r\n\r\n    const opacityAnim = useRef(new Animated.Value(0)).current;\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n\r\n    const linkTo = useLinkTo<any>()\r\n    return <ScrollWithButtons\r\n        fillHeight\r\n        buttons={{\r\n            right: {\r\n                text: \"I'm Done Linking Accounts\",\r\n                onPress: () => {\r\n                    linkTo('/create/addclaims')\r\n                }\r\n            }\r\n        }}\r\n    >\r\n        <Animated.View style={[paddView, { opacity: opacityAnim }]}>\r\n            <ElevatedSection title={\"\"} style={flex}>\r\n                <Text style={[thinBannerText]}>Link Your Brokerage Accounts.</Text>\r\n                <View style={[{ padding: sizes.rem1 }, flex]}>\r\n                    <Bank />\r\n                </View>\r\n                <Text style={{ marginVertical: sizes.rem1 }}>TradingPost links directly with your bank accounts to ....</Text>\r\n                <View style={flex}> \r\n                    <LinkBrokerageComponent />\r\n                </View>\r\n                \r\n            </ElevatedSection>\r\n        </Animated.View>\r\n    </ScrollWithButtons >\r\n}","import { useLinkTo } from \"@react-navigation/native\";\r\nimport React from \"react\";\r\nimport { View } from \"react-native\";\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\";\r\nimport { YourContentComponent } from \"../../components/YourContentComponent\";\r\nimport { AppColors } from \"../../constants/Colors\";\r\nimport { flex } from \"../../style\";\r\nimport { sideMargin } from \"./shared\";\r\n\r\n//import { claimPlatform, createPlatform, Platform } from \"../../apis/UserApi\"\r\n//import { AmiraError } from \"../../AmiraError\"\r\n\r\nexport function YourContent(props?: any) {\r\n    const linkTo = useLinkTo<any>()\r\n    return (\r\n        <ScrollWithButtons\r\n            \r\n            fillHeight\r\n            buttons={{\r\n                right: {\r\n                    text: \"I'm Done Linking Accounts\",\r\n                    onPress: () => {\r\n                        linkTo('/create/subscriptioncost')\r\n                    }\r\n                }\r\n            }}>\r\n            <View style={[flex, { margin: sideMargin, marginTop: 12 }]} >\r\n                <YourContentComponent isNewAccount={true} />\r\n            </View>\r\n    </ScrollWithButtons>\r\n    )\r\n}\r\n\r\n","import { Icon, Text } from \"@ui-kitten/components\";\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\"\r\nimport { AppColors } from \"../../constants/Colors\";\r\nimport { bannerText, flex, paddView, paddViewWhite, sizes, thinBannerText } from \"../../style\";\r\nimport { CreateAccountProps } from \"./shared\"\r\nimport Bank from '../../assets/bank.svg'\r\nimport { SvgExpo } from \"../../components/SvgExpo\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { Animated, Pressable } from \"react-native\";\r\nimport { View } from \"../../components/Themed\";\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { ElevatedSection, Section } from \"../../components/Section\";\r\nimport { Table } from \"../../components/Table\";\r\nimport { AddButton, EditButton } from \"../../components/AddButton\";\r\nimport { openBrowserAsync } from 'expo-web-browser';\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { useLinkTo } from \"@react-navigation/native\";\r\nimport { SubscriptionSettingsScreen, SubscriptionSettingsView } from \"../SubscriptionScreen\";\r\n\r\nexport const SubscriptionCostSection = (props: CreateAccountProps) => {\r\n    // useEffect(() => {\r\n    //     Animated.timing(\r\n    //         opacityAnim,\r\n    //         {\r\n    //             delay: 0.75,\r\n    //             toValue: 1,\r\n    //             duration: 2000,  \r\n    //             useNativeDriver: true\r\n    //         }).start();\r\n    // }, [])\r\n    const submitRef = useRef<{ submit: () => Promise<void> }>({ submit: async () => { } });\r\n    const linkTo = useLinkTo();\r\n    return <ScrollWithButtons\r\n        fillHeight\r\n        buttons={{\r\n            right: {\r\n                text: \"Apply Subscription\",\r\n                onPress: async () => {\r\n                    await submitRef.current.submit();\r\n                    linkTo('/create/profilepicture')\r\n                }\r\n            }\r\n        }}\r\n    >\r\n        <View style={[paddView,{alignItems:\"center\", alignContent:\"center\"}]}>\r\n            <SubscriptionSettingsView submitRef={submitRef} />\r\n        </View>\r\n    </ScrollWithButtons >\r\n}","import { Icon, Text } from \"@ui-kitten/components\";\r\nimport { useEffect, useRef } from \"react\";\r\nimport { Animated, Pressable, View } from \"react-native\";\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\"\r\nimport { AppColors } from \"../../constants/Colors\";\r\nimport { bannerText, sizes, thinBannerText } from \"../../style\";\r\nimport { CreateAccountProps, sideMargin } from \"./shared\"\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { ProfileButton } from \"../../components/ProfileButton\";\r\nimport { ElevatedSection } from \"../../components/Section\";\r\nimport { useData } from \"../../lds\";\r\nimport { useLinkTo, useNavigation } from \"@react-navigation/native\";\r\nimport React from \"react\";\r\nimport { useAppUser } from \"../../Authentication\";\r\nexport const ProfileIconSection = (props: CreateAccountProps) => {\r\n    const opacityAnim = useRef(new Animated.Value(0)).current;\r\n    const { value: hasAuthed, setValue } = useData(\"hasAuthed\");\r\n    const { loginState } = useAppUser();\r\n    const nav = useNavigation();\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n\r\n    return <ScrollWithButtons\r\n        buttons={{\r\n            right: {\r\n                text: \"Go To Trading Post!\",\r\n                onPress: () => {\r\n                    setValue(true);\r\n                    nav.navigate(\"AppInformation\");\r\n\r\n                    //linkTo('/dash/feed')\r\n                }\r\n            },\r\n\r\n        }}\r\n    >\r\n        <Animated.View style={{ opacity: opacityAnim, padding: sideMargin }} >\r\n            <ElevatedSection title=\"\">\r\n                <Text style={[thinBannerText]}>Tap to Modify Profile Picture</Text>\r\n                <ProfileButton userId={props.user.data.id} profileUrl={loginState?.appUser?.profile_url || \"\"} size={sizes.rem16} editable />\r\n                <Text style={[thinBannerText]}>Tip: Profile pictures will help others quickly identify you when on the platform.</Text>\r\n            </ElevatedSection>\r\n        </Animated.View>\r\n    </ScrollWithButtons>\r\n}","import React, { useState, useRef, useEffect, RefObject, useMemo } from \"react\";\r\nimport { Alert, TouchableOpacity, Image, ImageStyle, ViewStyle, View, Animated } from \"react-native\";\r\n//import { Navigation } from \"react-native-navigation\";\r\n//import { Nav } from '@react-navigation/native'\r\nimport { Input, Text, } from \"@ui-kitten/components\";\r\n//import { signOut, getStoredCreds, CreateAuth0User, UpdateUserProfile, signInStoredCreds } from \"../../apis/Authentication\";\r\nimport { ButtonField } from \"../../components/ButtonField\";\r\nimport { IconifyIcon } from \"../../components/IconfiyIcon\";\r\nimport { Section } from \"../../components/Section\";\r\nimport { TextField, ITextField } from \"../../components/TextField\";\r\nimport { bannerText, flex, sizes, textInputWiz } from \"../../style\";\r\nimport { bindTextInput, IEntity, useReadonlyEntity } from \"../../utils/hooks\";\r\nimport { isRequired, isValidEmail, isAlphaNumeric } from \"../../utils/validators\";\r\nimport { CreateAccountProps, sideMargin } from \"./shared\";\r\n\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\";\r\nimport { useData } from \"../../lds\";\r\nimport { Label } from \"../../components/Label\";\r\nimport { TBI } from \"../../utils/misc\";\r\nimport { AppColors } from \"../../constants/Colors\";\r\nimport Auth from '@tradingpost/common/api/entities/static/AuthApi'\r\nimport UserApi from '@tradingpost/common/api/entities/apis/UserApi'\r\nimport { IUserGet } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport { useAppUser } from \"../../Authentication\";\r\nimport { useLinkTo, useNavigation } from \"@react-navigation/native\";\r\nimport { registerDeviceForNotifications } from \"../../utils/notifications\";\r\nimport { HtmlView } from \"../../components/HtmlView\";\r\n\r\n\r\n\r\n\r\nexport function TermsScreen(props: CreateAccountProps) {\r\n    const\r\n        nav = useNavigation(),\r\n        [lockButtons, setLockButtons] = useState(false),\r\n        opacityAnim = useRef(new Animated.Value(0)).current,\r\n        linkTo = useLinkTo(),\r\n        buttonConfig = {\r\n            locked: lockButtons,\r\n            right: {\r\n                text: \"Go Back\",\r\n                onPress: async () => {\r\n                    linkTo(\"/create/logininfo\")\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n\r\n\r\n    return <ScrollWithButtons\r\n        fillHeight\r\n        buttons={buttonConfig}>\r\n        <HtmlView\r\n            style={{ flex: 1 }}\r\n            isUrl\r\n        >{\"https://tradingpostapp.com/terms-of-service\"}</HtmlView>\r\n    </ScrollWithButtons>\r\n}\r\n","import React, { useState, useRef, useEffect, RefObject, useMemo } from \"react\";\r\nimport { Alert, TouchableOpacity, Image, ImageStyle, ViewStyle, View, Animated } from \"react-native\";\r\n//import { Navigation } from \"react-native-navigation\";\r\n//import { Nav } from '@react-navigation/native'\r\nimport { Input, Text, } from \"@ui-kitten/components\";\r\n//import { signOut, getStoredCreds, CreateAuth0User, UpdateUserProfile, signInStoredCreds } from \"../../apis/Authentication\";\r\nimport { ButtonField } from \"../../components/ButtonField\";\r\nimport { IconifyIcon } from \"../../components/IconfiyIcon\";\r\nimport { Section } from \"../../components/Section\";\r\nimport { TextField, ITextField } from \"../../components/TextField\";\r\nimport { bannerText, flex, sizes, textInputWiz } from \"../../style\";\r\nimport { bindTextInput, IEntity, useReadonlyEntity } from \"../../utils/hooks\";\r\nimport { isRequired, isValidEmail, isAlphaNumeric } from \"../../utils/validators\";\r\nimport { CreateAccountProps, sideMargin } from \"./shared\";\r\n\r\nimport { ScrollWithButtons } from \"../../components/ScrollWithButtons\";\r\nimport { useData } from \"../../lds\";\r\nimport { Label } from \"../../components/Label\";\r\nimport { TBI } from \"../../utils/misc\";\r\nimport { AppColors } from \"../../constants/Colors\";\r\nimport Auth from '@tradingpost/common/api/entities/static/AuthApi'\r\nimport UserApi from '@tradingpost/common/api/entities/apis/UserApi'\r\nimport { IUserGet } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport { useAppUser } from \"../../Authentication\";\r\nimport { useLinkTo, useNavigation } from \"@react-navigation/native\";\r\nimport { registerDeviceForNotifications } from \"../../utils/notifications\";\r\nimport { HtmlView } from \"../../components/HtmlView\";\r\n\r\n\r\n\r\n\r\nexport function PrivacyScreen(props: CreateAccountProps) {\r\n    const\r\n        nav = useNavigation(),\r\n        [lockButtons, setLockButtons] = useState(false),\r\n        opacityAnim = useRef(new Animated.Value(0)).current,\r\n        linkTo = useLinkTo(),\r\n        buttonConfig = {\r\n            locked: lockButtons,\r\n            right: {\r\n                text: \"Go Back\",\r\n                onPress: async () => {\r\n                    linkTo(\"/create/logininfo\")\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n\r\n\r\n    return <ScrollWithButtons\r\n        fillHeight\r\n        buttons={buttonConfig}>\r\n        <HtmlView\r\n            style={{ flex: 1 }}\r\n            isUrl\r\n        >{\"https://tradingpostapp.com/privacy-policy\"}</HtmlView>\r\n    </ScrollWithButtons>\r\n}\r\n","/**\r\n * Learn more about deep linking with React Navigation\r\n * https://reactnavigation.org/docs/deep-linking\r\n * https://reactnavigation.org/docs/configuring-links\r\n */\r\n\r\nimport { getActionFromState, getStateFromPath, LinkingOptions } from '@react-navigation/native';\r\nimport * as Linking from 'expo-linking';\r\nimport { NavIconKeys, navIcons } from '../images';\r\nimport { screens } from '../screens/CreateAccountScreen';\r\n\r\nconst ConfigOverride: Partial<Record<NavIconKeys, any>> = {\r\n    Notification: {\r\n        path: \"dash/notification\",\r\n    }\r\n};\r\n\r\nconst linking: LinkingOptions<any> = {\r\n    prefixes: [Linking.createURL('/'), \"https://m.tradingpostapp.com\"],\r\n    config: {\r\n        screens: {\r\n            Root: \"login\",\r\n            Create: {\r\n                screens: {\r\n                    Root: {\r\n                        screens: (() => {\r\n                            const output: Record<string, string> = {}\r\n                            Object.keys(screens).map((k) => {\r\n                                output[k] = \"create/\" + k.toLowerCase();\r\n                            })\r\n                            return output;\r\n                        })()\r\n                    }\r\n                }\r\n            },\r\n            Dash: {\r\n                screens: {\r\n                    Root: {\r\n                        screens: (() => {\r\n                            const output: Record<string, string> = {}\r\n                            Object.keys(navIcons).map((k) => {\r\n                                output[k] = ConfigOverride[k as NavIconKeys] || \"dash/\" + k.toLowerCase();\r\n                            })\r\n                            return output;\r\n                        })()\r\n                    }\r\n                }\r\n            },\r\n            Profile: \"profile\",\r\n            PostScreen: \"post\",\r\n            AccountInformation: \"account\",\r\n            VerifyAccount: \"verifyaccount\",\r\n            ResetPassword: \"resetpassword\",\r\n            NotificationTrade: \"dash/notification/trade\",\r\n            Auth: \"auth/:platform\",\r\n            WatchlistViewer: \"WatchlistViewer/:watchlistId\",\r\n            Modal: 'modal',\r\n            NotFound: '*',\r\n        },\r\n    },\r\n    getStateFromPath: (path, options) => {\r\n        const state = getStateFromPath(path, options);\r\n        // Replaces the current screen if $replace is in the parameter\r\n        // ...not sure if this will work properly in all navigation situations\r\n        // maybe need to make this only work if the navigator is a dash? or look for the last dash navigator\r\n        if (state && (state.routes?.[state.routes.length - 1]?.params as any)?.$replace && state.routes.length > 1) {\r\n            console.log(\"Running a replace ....\");\r\n            delete (state.routes?.[state.routes.length - 1]?.params as any).$replace;\r\n            state.routes.splice(state.routes.length - 2, 1);\r\n        }\r\n\r\n        return state;\r\n\r\n    },\r\n    getActionFromState: (state, options) => {\r\n        const action = getActionFromState(state, options);\r\n        return action;\r\n    }\r\n};\r\n\r\nexport default linking;\r\n","import { StyleSheet, TouchableOpacity } from 'react-native';\r\n\r\nimport { Text, View } from '../components/Themed';\r\nimport { RootStackScreenProps } from '../types';\r\n\r\nexport default function NotFoundScreen({ navigation }: RootStackScreenProps<'NotFound'>) {\r\n  return (\r\n    <View style={styles.container}>\r\n      <Text style={styles.title}>This screen doesn't exist.</Text>\r\n      <TouchableOpacity onPress={() => navigation.replace('Root')} style={styles.link}>\r\n        <Text style={styles.linkText}>Go to home screen!</Text>\r\n      </TouchableOpacity>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    padding: 20,\r\n  },\r\n  title: {\r\n    fontSize: 20,\r\n    fontWeight: 'bold',\r\n  },\r\n  link: {\r\n    marginTop: 15,\r\n    paddingVertical: 15,\r\n  },\r\n  linkText: {\r\n    fontSize: 14,\r\n    color: '#2e78b7',\r\n  },\r\n});\r\n","import { View, Animated, ImageStyle, Pressable, ViewStyle } from \"react-native\";\r\nimport React, { useEffect, useRef } from \"react\";\r\nimport { Text, Image } from \"react-native\";\r\nimport { IconifyIcon } from \"./IconfiyIcon\";\r\nimport UserLogo from '../assets/@iconify/user'\r\n\r\nimport { flex, row, sizes } from \"../style\";\r\nimport { useWindowDimensions } from \"react-native\";\r\nimport { social } from \"../images\";\r\n//import { ImageResultCallback, openImagePicker } from \"../screens/ImagePickerScreen\";\r\nimport ProfileBg from '../assets/profile/profileBg.png'\r\nimport { NavigationProp } from \"@react-navigation/native\";\r\nimport { AppColors } from \"../constants/Colors\";\r\nimport { Interface } from \"@tradingpost/common/api\";\r\n\r\n\r\n\r\nexport const profileImageSize = sizes.rem6;\r\nexport const profileImageSmall = sizes.rem4;\r\nexport const actionPanelSize = sizes.rem2;\r\nconst profileImageStyle = {\r\n    height: profileImageSize,\r\n    width: profileImageSize,\r\n    position: \"absolute\",\r\n    borderRadius: profileImageSize / 2,\r\n    backgroundColor: \"darkgray\",\r\n    bottom: 0\r\n}\r\n\r\nconst profileImageSmallStyle = {\r\n    height: profileImageSmall,\r\n    width: profileImageSmall,\r\n    borderRadius: profileImageSmall / 2,\r\n    backgroundColor: \"darkgray\",\r\n    position: \"absolute\",\r\n    left: sizes.rem1,\r\n    bottom: 0\r\n}\r\n\r\n\r\nexport function useProfileBannerSize() {\r\n    const dim = useWindowDimensions();\r\n    return Math.min(dim.width, 680) / bannerAspectRatio + actionPanelSize;\r\n}\r\n\r\nconst bannerAspectRatio = 21 / 9;//16 / 9;\r\nconst viewStyle: ViewStyle = {\r\n    backgroundColor: \"lightgray\",\r\n    aspectRatio: bannerAspectRatio,\r\n    width: \"100%\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"flex-end\"\r\n};\r\n\r\ntype ImageResultCallback = (a: any, b: any) => void;\r\n\r\nexport function ProfileBanner<T extends boolean>(props: { subscriberCount: number | undefined, profilePic: string | undefined, bannerPic: string | undefined, editMode?: T, collapse?: boolean, extraMarginTop?: number, navigator: NavigationProp<any>, platforms: string[] } &\r\n    (T extends true ? {\r\n        onBannerPicked: ImageResultCallback,\r\n        onProfilePicked: ImageResultCallback\r\n\r\n    } : { onBannerPicked?: ImageResultCallback, onProfilePicked?: ImageResultCallback })\r\n) {\r\n    const { profilePic, collapse } = props;\r\n\r\n    return <View style={{ alignItems: \"center\", width: \"100%\" }}>\r\n        <Pressable\r\n            key=\"imagepart\"\r\n\r\n            style={[viewStyle, { backgroundColor: AppColors.primary }, collapse ? { marginTop: actionPanelSize / 2 + (props.extraMarginTop || 0) } : undefined]}\r\n        >\r\n            {/* <Image style={{ width: \"100%\", height: \"100%\", position: \"absolute\" }} source={ProfileBg} /> */}\r\n            {\r\n                /*</> :\r\n                <View style={[row, { backgroundColor: \"blue\", width: \"100%\" }]}>\r\n                    <ProfilePic profilePic={profilePic} collapse={collapse} editMode={props.editMode} />\r\n                </View>\r\n                */\r\n            }\r\n        </Pressable>\r\n        {!collapse && <View key=\"uncollapseFoot\" style={[row, {\r\n            width: \"100%\",\r\n            alignSelf: \"stretch\",\r\n            height: actionPanelSize,\r\n            backgroundColor: \"white\",\r\n            alignContent: \"center\",\r\n            alignItems: \"center\"\r\n        }]}>\r\n            <Text style={[flex, {\r\n                maxWidth: '48%', // some weird ness here where the  social bar/ this container is weider than the screen so creating a horizontial scroll bar\r\n                textAlign: \"center\", transform: [{\r\n                    translateX: -profileImageSize / 4,\r\n                }]\r\n            }]}>Subscribers {props.subscriberCount || \"-\"}</Text>\r\n            <View style={[row, flex, {\r\n                justifyContent: \"center\",\r\n                height: sizes.rem1_5,\r\n                maxWidth: '50%',\r\n                transform: [{\r\n                    translateX: profileImageSize / 4\r\n                }]\r\n            }]}>\r\n                <SocialBar claims={props.platforms} />\r\n            </View>\r\n        </View>}\r\n        {collapse && <View key=\"collapseFoot\" style={[{\r\n            width: \"100%\",\r\n            alignSelf: \"stretch\",\r\n            height: actionPanelSize,\r\n            backgroundColor: \"white\",\r\n            alignContent: \"center\",\r\n            alignItems: \"center\"\r\n        }]}>\r\n            <View style={[row, { height: \"100%\", alignSelf: \"flex-end\", marginRight: sizes.rem1 }]}>\r\n                <SocialBar claims={props.platforms} />\r\n            </View>\r\n        </View>}\r\n        <ProfilePic profilePic={profilePic} collapse={collapse} editMode={props.editMode} navigator={props.navigator}\r\n            onProfilePicked={props.onProfilePicked} />\r\n    </View>\r\n}\r\n\r\nconst SocialBar = (props: { claims: string[] }) => {\r\n    //{social.TwitterLogo, social.LinkedInLogo, social.YouTubeLogo}\r\n    return <>\r\n        {[\"Twitter\", \"YouTube\", \"Spotify\"].map((logoName, i) => {\r\n            //social.TwitterLogo, social.LinkedInLogo, social.YouTubeLogo\r\n            //social.TwitterLogo, social.LinkedInLogo, social.YouTubeLogo\r\n            const logo = social[logoName + \"Logo\" as keyof typeof social];\r\n            return props.claims.find((c) => c.toLowerCase() === logoName.toLowerCase()) ?\r\n                <View key={`socialV_${i}`} style={{ height: \"100%\", aspectRatio: 1 }}>\r\n                    <IconifyIcon key={`social_${i}`} icon={logo} svgProps={{ height: \"75%\" }}\r\n                        style={{ height: \"75%\", margin: \"12.5%\", aspectRatio: 1 }} />\r\n                </View> : undefined\r\n        })}\r\n    </>\r\n}\r\n\r\nfunction ProfilePic(props: { profilePic: string | undefined, collapse: boolean | undefined, editMode: boolean | undefined, navigator: NavigationProp<any>, onProfilePicked?: ImageResultCallback }) {\r\n    const { profilePic, collapse, editMode } = props;\r\n    const style = collapse ? profileImageSmallStyle : profileImageStyle\r\n    return <Pressable disabled={!editMode} style={style as ViewStyle}\r\n    // onPress={() =>\r\n    //     openImagePicker(props.componentId, {\r\n    //     onImagePicked: props.onProfilePicked,\r\n    //     cropSettings: {\r\n    //         height: 256 * 4,\r\n    //         width: 256 * 4\r\n    //     }\r\n    // })}\r\n\r\n    >\r\n        {profilePic ? <Image source={{ uri: profilePic }} style={[style as ImageStyle, { left: 0 }]} /> :\r\n            <IconifyIcon\r\n                style={{ height: \"120%\", width: \"120%\", left: \"-10%\" }}\r\n                icon={UserLogo}\r\n                currentColor='black'\r\n            />}\r\n    </Pressable>\r\n}","import {NavigationProp, useNavigation} from \"@react-navigation/native\"\r\nimport {Interface} from \"@tradingpost/common/api\"\r\nimport {Avatar, Text} from \"@ui-kitten/components\"\r\nimport React from \"react\"\r\nimport {Pressable, View, ViewStyle} from \"react-native\"\r\nimport {flex, sizes} from \"../style\"\r\nimport {ProfileButton} from \"./ProfileButton\"\r\n\r\nexport const ProfileBar = (props: {\r\n    user?: Interface.IUserList,\r\n    style?: ViewStyle\r\n}) => {\r\n    const nav = useNavigation<NavigationProp<any>>();\r\n    const openProfile = () => {\r\n        if (props.user?.id) {\r\n            nav.navigate(\"Profile\", {\r\n                userId: props.user.id\r\n            });\r\n        }\r\n    }\r\n\r\n    return <View style={props.style}><View style={{flexDirection: \"row\", width: \"100%\", marginBottom: sizes.rem0_5}}>\r\n        <ProfileButton userId={props.user?.id || \"\"} profileUrl={props.user?.profile_url || \"\"} size={sizes.rem6 / 2}/>\r\n        <View style={[flex, {marginLeft: sizes.rem0_5, justifyContent: 'center', alignItems: 'flex-start'}]}>\r\n            <Pressable style={props.user?.display_name.length && props.user?.display_name.length > 1 ? {display: 'flex'} : {display: 'none'}} onPress={openProfile}><Text category={\"s1\"}>{props.user?.display_name}</Text></Pressable>\r\n            <Pressable onPress={openProfile}><Text category={\"s2\"}>{\"@\" + props.user?.handle}</Text></Pressable>\r\n        </View>\r\n    </View>\r\n    </View>\r\n}","import React from \"react\";\r\nimport { Button } from \"@ui-kitten/components\";\r\nimport { AppColors } from \"../constants/Colors\";\r\nimport { sizes } from \"../style\";\r\nimport { Text, ViewStyle } from 'react-native'\r\nexport function PrimaryChip(props: { label: string, isAlt?: boolean, style?: ViewStyle }) {\r\n    const color = props.isAlt ? AppColors.secondary : AppColors.primary\r\n    return <Button\r\n        key={props.label}\r\n        size={'tiny'}\r\n        style={[{ borderRadius: 16, backgroundColor: color, borderColor: color, marginRight: sizes.rem1 / 4, height: sizes.rem2, minHeight: sizes.rem2 }, props.style]}\r\n    //label={props.label}\r\n    ><Text numberOfLines={1} style={{ color: \"white\" }}>{props.label}</Text></Button>\r\n}","import React from \"react\";\r\nimport { Image, ImageBackground, ImageStyle } from \"react-native\";\r\nimport { sizes } from \"../style\";\r\n\r\nexport function IconButton(props: { iconSource: number, style?: ImageStyle }) {\r\n    return <Image source={props.iconSource} resizeMode=\"contain\" style={[ {height:24}, props.style]}/>\r\n} ","import React, { ReactNode, useState } from \"react\";\r\nimport { Pressable } from \"react-native\";\r\n\r\nexport const AsyncPressable = (props: { children: ReactNode, onPress?: () => Promise<void> }) => {\r\n    const [isDisabled, setIsDisabled] = useState(false);\r\n    const { onPress, children } = props;\r\n    return <Pressable disabled={isDisabled} onPress={async () => {\r\n        setIsDisabled(true);\r\n\r\n        if (onPress)\r\n            await onPress();\r\n\r\n        setIsDisabled(false);\r\n\r\n    }}>{children}</Pressable>\r\n}","import React from \"react\"\r\nimport { Share, Pressable, ViewStyle } from \"react-native\"\r\nimport ShareIcon from '../assets/@iconify/share'\r\nimport { IconifyIcon } from \"./IconfiyIcon\"\r\n\r\nexport const ShareButton = (props: { style?: ViewStyle, title: string, url: string, color?: string }) => {\r\n    return <Pressable onPress={() => {\r\n        Share.share({\r\n            title: props.url,\r\n            url: props.url,\r\n            message: props.title\r\n\r\n        }, {\r\n\r\n        })\r\n\r\n    }}>\r\n        <IconifyIcon icon={ShareIcon} style={props.style} currentColor={props.color || \"black\"} />\r\n    </Pressable>\r\n}","import React, { useEffect, useState } from 'react'\r\nimport {\r\n    Alert,\r\n    Image,\r\n    ImageBackground,\r\n    Linking,\r\n    PixelRatio,\r\n    Platform,\r\n    Pressable,\r\n    ScrollView,\r\n    StyleSheet,\r\n    Text,\r\n    TouchableOpacity,\r\n    View\r\n} from 'react-native'\r\nimport { Button, Icon } from '@ui-kitten/components'\r\n\r\nimport { flex, fonts, row, shadow, sizes } from '../style'\r\n\r\nimport { IconifyIcon } from './IconfiyIcon'\r\nimport { Header, Subheader } from './Headers'\r\nimport { PrimaryChip } from './PrimaryChip'\r\nimport { BookmarkActive, BookmarkIcons, CommentIcon, navIcons, postBg, social, UpvoteIcon, Retweet, PremiumStar } from '../images'\r\nimport { social as socialStyle } from '../style'\r\nimport { IconButton } from './IconButton'\r\n//import { IPostList } from '../api/entities/interfaces'\r\nimport { LogoImage } from './LogoImage'\r\n//import { ensureCurrentUser } from '../apis/Authentication'\r\n//import { WebView } from 'react-native-webview';\r\nimport { color } from 'react-native-reanimated'\r\n//import { screens } from '../navigationComponents'\r\n//import { fullDashOptions } from '../layouts/DashboardLayout'\r\nimport { toFormatedDateTime } from '../utils/misc'\r\nimport { AsyncPressable } from './AsyncPressable'\r\nimport { AppColors } from '../constants/Colors'\r\nimport { Api, Interface } from '@tradingpost/common/api'\r\nimport { HtmlView } from './HtmlView'\r\nimport { useWindowDimensions } from 'react-native'\r\nimport { ProfileButton } from './ProfileButton'\r\nimport { useToast } from 'react-native-toast-notifications'\r\nimport { NavigationProp, useNavigation } from \"@react-navigation/native\"\r\nimport { RootStackParamList } from '../navigation/pages'\r\n\r\n//import { setBookmarked } from '../apis/PostApi'\r\n//import { openProfileScreen } from '../screens/ProfileScreen'\r\nimport { WebView } from \"react-native-webview\";\r\nimport { ShareButton } from './ShareButton'\r\n\r\n\r\nconst postTotalVerticalMargin = sizes.rem1;\r\nconst postTotalHorizontalMargin = sizes.rem2;\r\nconst postSidePad = sizes.rem2;\r\nconst postTotalBorder = 2//4;\r\nexport const spaceOnSide = postTotalHorizontalMargin + postTotalBorder + postSidePad\r\n\r\nexport const postInnerHeight = (itm: Interface.IElasticPost | undefined, windowWidth: number) => {\r\n    const size = (itm as Interface.IElasticPost | undefined)?._source.size\r\n    if (itm?._source.postType === \"substack\") {\r\n        return 200;\r\n    } else if (itm?._source.postType === \"tradingpost\" && size) {\r\n        return (windowWidth / size.aspectRatio) * (fonts.small / fonts.xSmall) + fonts.medium\r\n    } else if (size) {\r\n        return windowWidth / size.aspectRatio + (itm?._source.postType === \"tweet\" ? 20 * windowWidth / itm._source.size.maxWidth : 0);\r\n    } else if (itm?._source.postType === \"youtube\") {\r\n        return windowWidth / (390 / 230);\r\n    } else if (itm?._source.postType === \"spotify\") {\r\n        return windowWidth / (360 / 162);\r\n    } else {\r\n        return 200;\r\n    }\r\n}\r\nexport const resolvePostContent = (itm: Interface.IElasticPost | undefined, windowWidth: number) => {\r\n    switch (itm?._source.postType) {\r\n        case \"youtube\":\r\n            return \"https:\" + itm._source.postUrl.replace(\"https://www.youtube.com/watch?v=\", \"//www.youtube.com/embed/\");\r\n        case 'tweet':\r\n            return `<html><head>\r\n            <style>\r\n            .blink_me {\r\n                animation: blinker 1s linear infinite;\r\n              }\r\n              \r\n              @keyframes blinker {\r\n                50% {\r\n                  opacity: 0;\r\n                }\r\n              }\r\n            </style>\r\n            <script>                \r\n                const tracker = setInterval(()=>{\r\n                    if(document.querySelector(\".twitter-tweet-rendered\")){\r\n                        clearInterval(tracker);  \r\n                        document.getElementById(\"wrapper\").style.opacity=1;\r\n                        document.getElementById(\"loader\").style.opacity=0.99;\r\n                        setTimeout(()=>{\r\n                            document.getElementById(\"loader\").style.display=\"none\";\r\n                        },2000)\r\n                    }\r\n                },333)    \r\n\r\n            </script><meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0\"></meta></head>\r\n            <body style=\"margin:0; padding:0;width:${itm._source.size.maxWidth}px;transform: scale(${windowWidth / itm._source.size.maxWidth});transform-origin: top left;\">\r\n            <div id=\"loader\" style=\"background-color:white; position:absolute; height:100%; width:100%\">\r\n             <img class=\"blink_me\" style=\"position:absolute; margin:auto; left:0; right:0; top:0; bottom:0; height:40px; width:40px\" src=\"data:image/svg+xml,%3c%3fxml version='1.0' encoding='UTF-8'%3f%3e %3csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' viewBox='0 0 248 204'%3e%3cpath fill='%231d9bf0' d='M221.95 51.29c.15 2.17.15 4.34.15 6.53 0 66.73-50.8 143.69-143.69 143.69v-.04c-27.44.04-54.31-7.82-77.41-22.64 3.99.48 8 .72 12.02.73 22.74.02 44.83-7.61 62.72-21.66-21.61-.41-40.56-14.5-47.18-35.07 7.57 1.46 15.37 1.16 22.8-.87-23.56-4.76-40.51-25.46-40.51-49.5v-.64c7.02 3.91 14.88 6.08 22.92 6.32C11.58 63.31 4.74 33.79 18.14 10.71c25.64 31.55 63.47 50.73 104.08 52.76-4.07-17.54 1.49-35.92 14.61-48.25 20.34-19.12 52.33-18.14 71.45 2.19 11.31-2.23 22.15-6.38 32.07-12.26-3.77 11.69-11.66 21.62-22.2 27.93 10.01-1.18 19.79-3.86 29-7.95-6.78 10.16-15.32 19.01-25.2 26.16z'/%3e%3c/svg%3e\" />\r\n            </div>\r\n            <div id=\"wrapper\" style=\"opacity:0; min-height:${itm._source.size.maxWidth / itm._source.size.aspectRatio}px\">\r\n            ${itm._source.content.htmlBody}\r\n            </div>\r\n            </body></html>`\r\n        case 'spotify':\r\n            const matches = /src=\"(.*)\"/.exec(itm._source.content.body);\r\n            return matches?.[1] || \"\";\r\n        case 'tradingpost':\r\n            return `\r\n                <html><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n                    <body>\r\n                        <div style=\"font-size: ${fonts.medium}px; font-weight: 600px; line-height: ${fonts.medium * 1}px; margin-bottom: 10px\">${itm._source.content.title}</div>\r\n                        <div style=\"font-size: ${fonts.small}px; margin: 0px 3px 0px\">${itm._source.content.body}</div>\r\n                    </body>    \r\n                </html>\r\n                `\r\n        case 'substack':\r\n        //return SubstackView({post: itm});\r\n\r\n        /*\r\n        return `<html><head><meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0\"></meta></head>\r\n        <body style=\"margin:0; padding:0;width:${itm?._source.size.maxWidth}px;transform: scale(${windowWidth / itm._source.size.maxWidth});transform-origin: top left;\">\r\n        <h1>${itm?._source.content.title}</h1>\r\n        <p>${itm?._source.content.body}</p>\r\n        </body></html>`\r\n        */\r\n\r\n\r\n        default:\r\n            return itm?._source.content.htmlBody || \"\";\r\n    }\r\n}\r\n\r\nexport function PostView(props: { post: Interface.IElasticPostExt }) {\r\n    const { post } = props\r\n    const nav = useNavigation<NavigationProp<RootStackParamList>>();\r\n\r\n    const [isBookmarked, setIsBookmarked] = useState(Boolean(post.ext.is_bookmarked));\r\n    const [isUpvoted, setIsUpvoted] = useState(Boolean(post.ext.is_upvoted));\r\n    const [upvoteCount, setUpvoteCount] = useState(post.ext.upvoteCount || 0);\r\n    // useEffect(() => {\r\n    //     Api.Post.extensions.getUpvotes({id: props.post._source.id, count: 0})\r\n    //         .then((r) => {\r\n    //             setUpvoteCount(r.count);\r\n    //         })\r\n    // }, [])\r\n    const [showStatus, setShowStatus] = useState(false);\r\n    return <View style={{ marginHorizontal: postTotalHorizontalMargin / 2, marginVertical: postTotalVerticalMargin / 2 }}>\r\n        <View\r\n            style={[shadow, {\r\n                backgroundColor: \"white\",\r\n                borderRadius: sizes.borderRadius * 4,\r\n                borderColor: \"#ccc\",\r\n                borderWidth: postTotalBorder / 2\r\n            }]}>\r\n            <Pressable\r\n                onPress={() => {\r\n                    //openProfileScreen(props.parentComponentId, props.post.creator.id_creator);\r\n                }} style={[row, {\r\n                    alignItems: \"center\",\r\n                    overflow: \"hidden\",\r\n                    borderBottomColor: \"#ccc\",\r\n                    borderBottomWidth: 1,\r\n                    padding: sizes.rem1 / 2\r\n                }]}>\r\n                {\r\n                    <ProfileButton userId={props.post._source.user.id}\r\n                        profileUrl={props.post.ext.user?.profile_url || \"\"} size={48} />\r\n                }\r\n                <View style={[flex, { marginLeft: sizes.rem1 }]}>\r\n                    <Pressable onPress={() => {\r\n                        if (props.post._source.user.id)\r\n                            nav.navigate(\"Profile\", {\r\n                                userId: props.post._source.user.id\r\n                            } as any);\r\n                    }}\r\n                    >\r\n                        <Subheader text={\"@\" + (props.post.ext.user?.handle || \"NoUserAttached\")}\r\n                            style={{ color: \"black\", fontWeight: \"bold\" }} />\r\n                    </Pressable>\r\n                    <View style={{ marginRight: 10 }}>\r\n                        <ScrollView nestedScrollEnabled horizontal showsHorizontalScrollIndicator={false}>\r\n                            <View style={[row, props.post.ext.user?.tags ? { display: 'flex' } : { display: 'none' }]}>\r\n                                {props.post.ext.user?.tags && (props.post.ext.user?.tags).map((chip, i) =>\r\n                                    <PrimaryChip isAlt key={i} label={chip} />)}\r\n                            </View>\r\n                        </ScrollView>\r\n                    </View>\r\n                </View>\r\n                <AsyncPressable\r\n                    onPress={async () => {\r\n                        try {\r\n                            const resp = await Api.Post.extensions.setBookmarked({\r\n                                id: props.post._id,\r\n                                is_bookmarked: !isBookmarked\r\n                            });\r\n                            setIsBookmarked(Boolean(resp.is_bookmarked));\r\n                        } catch (ex) {\r\n                            console.error(ex);\r\n                        }\r\n                    }}>\r\n                    {!isBookmarked && <IconButton iconSource={BookmarkIcons.inactive}\r\n                        style={{ height: 28, width: 28, marginLeft: \"auto\" }} />}\r\n                    {isBookmarked && <BookmarkActive\r\n                        style={{ height: 28, width: 28, marginLeft: \"auto\", marginRight: sizes.rem0_5 / 2 }} />}\r\n                </AsyncPressable>\r\n            </Pressable>\r\n            {\r\n                [\"substack\", \"tradingpost\"].includes(post._source.postType) ?\r\n                    <Pressable onPress={() => {\r\n                        nav.navigate(\"PostScreen\", {\r\n                            post,\r\n                            id: post._id\r\n                        })\r\n\r\n                    }} style={{ paddingHorizontal: postSidePad / 2 }}>\r\n                        <PostContentView post={post} />\r\n                    </Pressable> :\r\n                    <View style={{ paddingHorizontal: postSidePad / 2 }}>\r\n                        <PostContentView post={post} />\r\n                    </View>\r\n            }\r\n\r\n            {(props.post._source.postType !== \"tweet\") &&\r\n                <View\r\n                    style={[row, { alignItems: \"center\", marginTop: \"auto\", borderTopColor: \"#ccc\", borderTopWidth: 1 }]}>\r\n                    {showStatus && <View style={{\r\n                        position: \"absolute\",\r\n                        backgroundColor: \"black\",\r\n                        //   opacity: 0.6,\r\n                        width: 100,\r\n                        margin: \"auto\",\r\n                        top: 12,\r\n                        left: 0,\r\n                        borderRadius: 8,\r\n                        right: 0,\r\n                        padding: 4\r\n                    }}><Text style={{ width: \"100%\", textAlign: \"center\", color: \"white\" }}>Upvoted!</Text></View>}\r\n                    <Button\r\n                        style={{ marginLeft: \"auto\", paddingLeft: 10, paddingRight: 0 }}\r\n                        appearance={'ghost'}\r\n                        accessoryLeft={(props: any) =>\r\n                            <CommentIcon height={24} width={24} style={{ height: 24, width: 24, }} />\r\n                        }\r\n                        onPress={() => {\r\n                            nav.navigate(\"PostScreen\", {\r\n                                post, id: post._id\r\n                            })\r\n                        }}\r\n                    >\r\n                        {evaProps => <Text {...evaProps}\r\n                            style={{\r\n                                fontWeight: 'normal',\r\n                                paddingLeft: sizes.rem1,\r\n                                paddingRight: sizes.rem0_5,\r\n                                color: '#9D9D9D'\r\n                            }}>\r\n                            {'-'}\r\n                        </Text>}\r\n                    </Button>\r\n                    {<Button\r\n                        style={{ paddingLeft: 10, paddingRight: 0 }}\r\n                        onPress={() => {\r\n                            if (!isUpvoted)\r\n                                setShowStatus(true);\r\n                            Api.Post.extensions.setUpvoted({\r\n                                id: post._id,\r\n                                is_upvoted: !isUpvoted,\r\n                                count: upvoteCount // return number of upvotes. \r\n                            }).then((r) => {\r\n                                if (r.is_upvoted)\r\n                                    setTimeout(() => {\r\n                                        setShowStatus(false)\r\n                                    }, 1333);\r\n                                setUpvoteCount(r.count);\r\n                                setIsUpvoted(r.is_upvoted);\r\n                            });\r\n                        }}\r\n                        accessoryLeft={(props: any) => <UpvoteIcon height={24} width={24} style={{\r\n                            height: 24,\r\n                            width: 24,\r\n                            // opacity: isUpvoted ? 1 : 0.25\r\n                        }} />} appearance={\"ghost\"}>\r\n                        {evaProps => <Text {...evaProps} style={{\r\n                            fontWeight: 'normal',\r\n                            paddingHorizontal: sizes.rem1,\r\n                            color: '#9D9D9D'\r\n                        }}>{upvoteCount}</Text>}\r\n                    </Button>}\r\n                    <ShareButton url={\"https://m.tradingpostapp.com/post?id=\" + props.post._id} title={\"https://m.tradingpostapp.com/post?id=\" + props.post._id} style={{\r\n                        height: 24,\r\n                        width: 24, marginRight: 10\r\n                    }} />\r\n                </View>}\r\n        </View>\r\n    </View>\r\n}\r\n\r\nconst SubstackView = (props: { post: Interface.IElasticPost }) => {\r\n    const { post } = props;\r\n    return <View style={{ marginVertical: sizes.rem1 / 2, marginHorizontal: sizes.rem0_5 }}>\r\n        <View key=\"profile\">\r\n            {/* <Image style={{ aspectRatio: 0.9, marginRight: sizes.rem1 / 2 }} source={{ uri: post.platform_profile_url }} /> */}\r\n            <Pressable onPress={() => {\r\n                Linking.openURL(post._source.postUrl)\r\n            }}\r\n                style={{\r\n                    marginBottom: sizes.rem0_5,\r\n                    display: \"flex\",\r\n                    flexDirection: \"row\",\r\n                    alignItems: 'center'\r\n                }}>\r\n                <IconifyIcon style={{ width: 30, height: 30, marginTop: 2, marginRight: sizes.rem1 / 1.5 }}\r\n                    svgProps={{ style: { margin: \"auto\" } }} icon={social.SubstackLogo}\r\n                    currentColor={socialStyle.substackColor} />\r\n                {<Subheader text={post._source.content.title || \"\"} style={{\r\n                    marginBottom: 0,\r\n                    display: \"flex\",\r\n                    color: \"black\",\r\n                    fontSize: fonts.medium,\r\n                    fontWeight: \"600\",\r\n                    fontFamily: \"K2D\",\r\n                    maxWidth: \"85%\"\r\n                }}></Subheader>}\r\n            </Pressable>\r\n        </View>\r\n        {<Text key=\"content\" style={{ fontSize: fonts.small }}>\r\n            {(() => {\r\n                const parsedText = parseHtmlEnteties(post._source.content.description);\r\n                return parsedText?.length > 300 ?\r\n                    `${parsedText.substring(0, 300)}...` :\r\n                    parsedText\r\n            })()}\r\n        </Text>}\r\n        {<Text key=\"date\" style={{\r\n            fontSize: fonts.xSmall,\r\n            fontFamily: \"K2D\",\r\n            paddingVertical: 5\r\n        }}>{toFormatedDateTime(post._source.platformCreatedAt)}</Text>}\r\n    </View>\r\n}\r\n\r\nconst TradingPostView = (props: { post: Interface.IElasticPost }) => {\r\n    const { post } = props;\r\n    return <View style={{ marginVertical: sizes.rem1 / 2, marginHorizontal: sizes.rem0_5 }}>\r\n        <View key=\"profile\">\r\n            {/* <Image style={{ aspectRatio: 0.9, marginRight: sizes.rem1 / 2 }} source={{ uri: post.platform_profile_url }} /> */}\r\n\r\n            <Subheader text={post._source.content.title || \"\"} style={{\r\n                marginBottom: 0,\r\n                display: \"flex\",\r\n                color: \"black\",\r\n                fontSize: fonts.medium,\r\n                fontWeight: \"600\",\r\n                fontFamily: \"K2D\",\r\n                maxWidth: \"85%\"\r\n            }}></Subheader>\r\n\r\n        </View>\r\n        <HtmlView key=\"content\" isUrl={false} style={{ height: props.post._source.size.aspectRatio }}>\r\n            {`<html><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n                <body style=\"font-size: ${fonts.small}px\">${post._source.content.body}</body></html>`}\r\n            {/*(() => {\r\n                const parsedText = parseHtmlEnteties(post._source.content.body);\r\n                return parsedText?.length > 300 ?\r\n                    `${parsedText.substring(0, 300)}...` :\r\n                    parsedText\r\n            })()*/}\r\n        </HtmlView>\r\n        {<Text key=\"date\" style={{\r\n            fontSize: fonts.xSmall,\r\n            fontFamily: \"K2D\",\r\n            paddingVertical: 5\r\n        }}>{new Date(Date.parse(post._source.platformCreatedAt)).toLocaleString('en-US', {\r\n            dateStyle: 'medium',\r\n            timeStyle: 'short'\r\n        })}</Text>}\r\n    </View>\r\n}\r\nconst parseHtmlEnteties = (str: string) => {\r\n    return str?.replace(/&#([0-9]{1,4});/gi, function (match, numStr) {\r\n        var num = parseInt(numStr, 10); // read num as normal number\r\n        return String.fromCharCode(num);\r\n    });\r\n}\r\n\r\nconst PostContentView = (props: { post: Interface.IElasticPost }) => {\r\n    const { width: windowWidth, scale } = useWindowDimensions(),\r\n        availWidth = Math.min(windowWidth, 680) - spaceOnSide\r\n\r\n    if (props.post._source.postType === 'substack') {\r\n        return SubstackView(props)\r\n    }\r\n\r\n    return <View>\r\n        <View style={{\r\n            display: (props.post._source.postType === 'tweet' && props.post._source.content.body.slice(0, 2) === 'RT') ? 'flex' : 'none',\r\n            flexDirection: 'row',\r\n            alignItems: 'center',\r\n            marginTop: 2,\r\n            marginBottom: -5\r\n        }}>\r\n            <Retweet width={30} height={30} style={{ width: 30, height: 30 }} />\r\n            <Text style={{\r\n                fontWeight: '500',\r\n                marginLeft: 2\r\n            }}>\r\n                {'Retweet'}\r\n            </Text>\r\n        </View>\r\n        <View>\r\n            {props.post._source.subscription_level === 'premium' && <PremiumStar style={{ height: 24, width: 24, marginBottom: 5, marginTop: 10 }} />}\r\n        </View>\r\n        <View style={{\r\n            height: postInnerHeight(props.post, availWidth),\r\n            paddingVertical: ['spotify', 'youtube'].includes(props.post._source.postType) ? sizes.rem0_5 : 0\r\n            //height: postInnerHeight(props.post, availWidth),\r\n            //justifyContent: ['spotify', 'youtube'].includes(props.post._source.postType) ? 'center' : undefined\r\n        }}>\r\n            <HtmlView style={{\r\n                height: ['spotify', 'youtube'].includes(props.post._source.postType) ? postInnerHeight(props.post, availWidth) : postInnerHeight(props.post, availWidth),\r\n                //height: postInnerHeight(props.post, availWidth)\r\n                //marginTop: ['spotify', 'youtube'].includes(props.post._source.postType) ? 8 : 0,\r\n                //marginBottom: ['youtube', 'spotify'].includes(props.post._source.postType) ? 8 : 0\r\n            }}\r\n                isUrl={props.post._source.postType === \"youtube\" || props.post._source.postType === \"spotify\"}>\r\n                {resolvePostContent(props.post, availWidth)}\r\n            </HtmlView>\r\n        </View>\r\n        <View>\r\n            {props.post._source.postType === 'tradingpost' &&\r\n                <Text style={{ fontSize: fonts.xSmall, marginVertical: 10, marginLeft: 10 }}>\r\n                    {toFormatedDateTime(props.post._source.tradingpostCreatedAt)}\r\n                </Text>}\r\n\r\n        </View>\r\n    </View>\r\n\r\n}\r\n","import { Interface } from \"@tradingpost/common/api\";\r\nimport { IElasticPost } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport React, { useRef, useState } from \"react\";\r\nimport { ScrollView, Text } from \"react-native\";\r\n\r\n//import { Bookmark, getPosts } from \"../apis/PostApi\";\r\n//import { FeedType, IPost, IPostWithHtmlAndBk } from \"../interfaces/IPost\";\r\nimport { fonts } from \"../style\";\r\n//import { toAmiraDate, fromAmiraDate } from \"../utils/misc\";\r\nimport { DataOrQuery, List } from \"./List\";\r\nimport { PostView } from \"./PostView\";\r\nimport { View } from \"./Themed\";\r\n\r\n\r\n\r\nexport function PostList(props: { posts?: DataOrQuery<Interface.IElasticPostExt>, datasetKey?: string }) {\r\n    return <List\r\n        //style={{ borderColor: \"orange\", borderWidth: 5 }}\r\n        // contentContainerStyle={{ height:\"auto\", borderColor: \"blue\", borderWidth: 5 }}\r\n        listKey={props.datasetKey || 'STATIC'}\r\n        getItemLayout={(items, index, sizeCache) => {\r\n            const curItem = items?.[index];\r\n            const output = typeof curItem === \"object\" ? sizeCache[index] : { index, offset: sizeCache[index - 1].offset + sizeCache[index - 1].length, length: 40 };\r\n            return output;\r\n        }}\r\n        data={props.posts}\r\n        keyExtractor={(item, index) => typeof item === \"string\" ? \"loadingtext\" : (index + \"_\" + item._id)}\r\n        preloadOffset={2}\r\n        datasetKey={props.datasetKey}\r\n        renderItem={(item) => {\r\n            if (typeof item.item === \"string\") {\r\n                return <Text style={{ textAlign: \"center\", fontSize: fonts.large }}>Loading More...</Text>\r\n            }\r\n            else {\r\n                return <PostView key={item.index + \"_\" + item.item._id} post={item.item} />\r\n            }\r\n        }}\r\n        noDataMessage={\"No Posts Available\"}\r\n        loadingItem={\"  \"}\r\n    />\r\n\r\n}\r\n\r\n\r\n//Keeping this commented to emphasise how ridiculous it was lol!!!!!!!!!!!\r\n// export function usePostLoader(pageSize: number, bookmarks: Bookmark[] | undefined, isBookMarked?: boolean, creatorId?: string, errorHandler?: (message: string) => void) {\r\n//     const feedTypeRef = useRef<{\r\n//         response: FeedType,\r\n//         subscriber_min_time?: number\r\n//         disco_min_time?: number,\r\n//         creator_min_time?: number\r\n//     }>({\r\n//         response: creatorId ? \"creator\" : \"subscriber\"\r\n//     })\r\n//     console.log(\"FEED TYPE BASE:\" + feedTypeRef.current.response);\r\n\r\n//     return bookmarks ? async (existingData: IPostWithHtmlAndBk[] | undefined, currentPage: number) => {\r\n//         const output: IPostWithHtmlAndBk[] = [];\r\n\r\n//         try {\r\n//             if (existingData)\r\n//                 output.push(...existingData);\r\n//             let newPosts: IPostWithHtmlAndBk[] = [];\r\n\r\n//             const bod: FeedRequestBody = {\r\n//                 feed_type: feedTypeRef.current.response,\r\n//                 //discovery_feed_last_loaded_post_id: existingData?.length ? existingData[existingData.length - 1]?.id : undefined\r\n//                 creator_id: creatorId,\r\n//                 subscriber_feed_last_loaded_date: feedTypeRef.current.subscriber_min_time ? toAmiraDate(new Date(feedTypeRef.current.subscriber_min_time)) : undefined,\r\n//                 discovery_feed_last_loaded_date: feedTypeRef.current.disco_min_time ? toAmiraDate(new Date(feedTypeRef.current.disco_min_time)) : undefined,\r\n//                 creator_feed_last_loaded_date: feedTypeRef.current.creator_min_time ? toAmiraDate(new Date(feedTypeRef.current.creator_min_time)) : undefined\r\n//             };\r\n\r\n//             if (!isBookMarked) {\r\n//                 const resp = (await getFeed(String(pageSize), bod));\r\n\r\n//                 let curLastMin: number | undefined;\r\n//                 let output: number[] = [];\r\n\r\n//                 resp.posts.forEach((p) => {\r\n//                     const val = fromAmiraDate(p.created_at as string).valueOf();\r\n//                     output.push(val)\r\n//                     if (!curLastMin) {\r\n//                         curLastMin = val;\r\n//                     }\r\n//                     else {\r\n//                         curLastMin = Math.min(val, curLastMin);\r\n//                     }\r\n//                 });\r\n\r\n//                 feedTypeRef.current.response = resp.feed_type;\r\n\r\n//                 if (feedTypeRef.current.response === \"subscriber\")\r\n//                     feedTypeRef.current.subscriber_min_time = curLastMin;\r\n//                 else if (feedTypeRef.current.response === \"discovery\")\r\n//                     feedTypeRef.current.disco_min_time = curLastMin;\r\n//                 else if (feedTypeRef.current.response === \"creator\") {\r\n//                     feedTypeRef.current.creator_min_time = curLastMin;\r\n//                 }\r\n//                 console.log(\"FEED TYPE:\" + JSON.stringify(feedTypeRef.current));\r\n//                 newPosts = resp.posts;\r\n//             }\r\n//             else if (currentPage === 0)\r\n//                 newPosts = await getPosts(bookmarks.map((b) => b.post_id) || []);\r\n\r\n//             // newPosts.forEach((p) => {\r\n//             //     p.bookmarkId = bookmarks.find(b => b.post_id === p.id)?.id;\r\n//             // });\r\n\r\n//             if (newPosts.length)\r\n//                 console.log(`${newPosts[0].id}->${newPosts[newPosts.length - 1].id}`);\r\n\r\n//             output.push(...newPosts);\r\n//         } catch (ex) {\r\n//             if (errorHandler) {\r\n//                 errorHandler(\"Something went wrong.\")\r\n//             }\r\n//         }\r\n//         return output;\r\n\r\n\r\n//     } : undefined\r\n// }","import { NavigationProp } from \"@react-navigation/native\";\r\nimport { Api, Interface } from \"@tradingpost/common/api\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useWindowDimensions } from \"react-native\";\r\nimport { View, Text } from \"react-native\";\r\nimport { SizeParts } from './List'\r\nimport { PlusContentButton } from \"../components/PlusContentButton\";\r\nimport { PostList } from \"../components/PostList\";\r\nimport { spaceOnSide, postInnerHeight, PostView } from \"../components/PostView\";\r\nimport { DashTabScreenProps } from \"../navigation/pages\";\r\n\r\nexport const MultiTermFeedPart = (props: { searchText?: string[] }) => {\r\n    const { width: windowWidth, height: windowHeight } = useWindowDimensions();\r\n    const { searchText } = props\r\n    return <PostList\r\n        key={\"STATIC\"}\r\n        datasetKey={\"____________\"}\r\n\r\n        posts={async (allItems, page, sizeCache) => {\r\n            console.log(page)\r\n            const posts = (await Api.Post.extensions.multitermfeed({\r\n                page,\r\n                data: searchText ? {\r\n                    terms: searchText\r\n                } : undefined\r\n            }));\r\n\r\n            const newItems = [...(allItems || []), ...posts]\r\n            newItems.forEach((itm, index) => {\r\n                if (!sizeCache[index]) {\r\n                    sizeCache[index] = {\r\n                        index,\r\n                        offset: index ? sizeCache[index - 1].offset + sizeCache[index - 1].length : 0,\r\n                        length: postInnerHeight(itm, Math.min(windowWidth, 680) - spaceOnSide)\r\n                    }\r\n                }\r\n            })\r\n            return newItems;\r\n        }}\r\n    />\r\n}\r\n/*\r\nexport const CreateMultiTermQuery = (searchTerms: string | string[]) => {\r\n    if (typeof searchTerms === 'string' ) searchTerms = [searchTerms];\r\n    let multiMatchQueryPart= [];\r\n    for (let d of searchTerms) {\r\n        const queryPart = {\r\n            \"multi_match\": {\r\n                \"fields\": [\"content.body\", \"content.title\"],\r\n                \"query\": `${d}`,\r\n                \"analyzer\": \"synonym_analyzer\",\r\n                \"boost\": 1\r\n            }\r\n        }\r\n        multiMatchQueryPart.push(queryPart)\r\n    }\r\n    let query ={\"bool\": {\r\n        \"should\": [\r\n        {\r\n            \"function_score\": {\r\n                \"query\": { \r\n                \"bool\": {\r\n                    \"must\": [\r\n                        {\r\n                        \"bool\": {\r\n                            \"should\": `${multiMatchQueryPart}`,\r\n                                \"minimum_should_match\": 1,\r\n                                \"boost\": 1\r\n                            }\r\n                            }\r\n                        ,\r\n                        {\r\n                            \"match\": {\r\n                            \"postType\": \"youtube\"\r\n                        }}\r\n                        ]\r\n                }\r\n                },\r\n                \"functions\": [\r\n                    {\r\n                    \"exp\": {\r\n                        \"platformCreatedAt\": {\r\n                        \"origin\": \"now\",\r\n                        \"scale\": \"7d\"\r\n                        }\r\n                    },\r\n                    \"weight\": 1.2\r\n                    }\r\n                ],\r\n                \"boost_mode\": \"replace\"\r\n            }\r\n        },\r\n        {\r\n            \"function_score\": {\r\n                \"query\": { \r\n                \"bool\": {\r\n                    \"must\": [\r\n                        {\r\n                        \"bool\": {\r\n                            \"should\": `${multiMatchQueryPart}`,\r\n                                \"minimum_should_match\": 1,\r\n                                \"boost\": 1\r\n                            }\r\n                            }\r\n                        ,\r\n                        {\r\n                            \"match\": {\r\n                            \"postType\": \"tweet\"\r\n                        }}\r\n                        ]\r\n                }},\r\n                \"functions\": [\r\n                    {\r\n                    \"exp\": {\r\n                        \"platformCreatedAt\": {\r\n                        \"origin\": \"now\",\r\n                        \"scale\": \"12h\"\r\n                        }\r\n                    },\r\n                    \"weight\": 1\r\n                    }\r\n                ],\r\n                \"boost_mode\": \"replace\"\r\n            }\r\n        },\r\n        {\r\n            \"function_score\": {\r\n                \"query\": { \r\n                \"bool\": {\r\n                    \"must\": [\r\n                        {\r\n                        \"bool\": {\r\n                            \"should\": `${multiMatchQueryPart}`,\r\n                                \"minimum_should_match\": 1,\r\n                                \"boost\": 1\r\n                            }\r\n                            }\r\n                        ,\r\n                        {\r\n                            \"match\": {\r\n                            \"postType\": \"substack\"\r\n                        }}\r\n                        ]\r\n                }},\r\n                \"functions\": [\r\n                    {\r\n                    \"exp\": {\r\n                        \"platformCreatedAt\": {\r\n                        \"origin\": \"now\",\r\n                        \"scale\": \"7d\"\r\n                        }\r\n                    },\r\n                    \"weight\": 1.2\r\n                    }\r\n                ],\r\n                \"boost_mode\": \"replace\"\r\n            }\r\n        },\r\n        {\r\n            \"function_score\": {\r\n                \"query\": { \r\n                \"bool\": {\r\n                    \"must\": [\r\n                        {\r\n                        \"bool\": {\r\n                            \"should\": `${multiMatchQueryPart}`,\r\n                                \"minimum_should_match\": 1,\r\n                                \"boost\": 1\r\n                            }\r\n                            }\r\n                        ,\r\n                        {\r\n                            \"match\": {\r\n                            \"postType\": \"spotify\"\r\n                        }}\r\n                        ]\r\n                }},\r\n                \"functions\": [\r\n                    {\r\n                    \"exp\": {\r\n                        \"platformCreatedAt\": {\r\n                        \"origin\": \"now\",\r\n                        \"scale\": \"7d\"\r\n                        }\r\n                    },\r\n                    \"weight\": 1.2\r\n                    }\r\n                ],\r\n                \"boost_mode\": \"replace\"\r\n            }\r\n        }\r\n        ],\r\n        \"minimum_should_match\": 1,\r\n        \"boost\": 1\r\n    }\r\n    }\r\n    return query;\r\n    \r\n} \r\n*/","import React, { PropsWithChildren, useEffect, useRef, useState, Component } from \"react\"\r\nimport { NavigationProp, useNavigation } from \"@react-navigation/native\"\r\nimport { Avatar, Icon } from \"@ui-kitten/components\"\r\nimport { View, Text, Pressable, ScrollView, useWindowDimensions, Animated, FlatList, NativeSyntheticEvent, NativeScrollEvent } from \"react-native\"\r\nimport { ElevatedSection, Section, Subsection } from \"./Section\"\r\nimport { NoteEditor, SecPressable } from \"../screens/WatchlistViewerScreen\"\r\nimport { fonts, sizes } from \"../style\"\r\nimport { AppColors } from \"../constants/Colors\"\r\nimport { toDollarsAndCents } from \"../utils/misc\"\r\n\r\nexport const WatchlistItemRenderItem = (props: {item: any, bySymbol: any, byId: any, hideEmptyNote: boolean, setShownMap: any, shownMap: any, watchlist: any}) => {\r\n    const symbol = props.item.item.symbol;\r\n    const secId = props.bySymbol[symbol] ? props.bySymbol[symbol].id : 0;\r\n    const intradayChange = props.item.item.price ? props.item.item.price.price - props.item.item.price.open : 0\r\n    //const hideEmptyNote = watchlist?.user[0].id !== appUser?.id\r\n    return (\r\n        <ElevatedSection title=\"\" style={{flex: 1, marginBottom: sizes.rem1_5 / 2, marginHorizontal: sizes.rem1_5 / 4, paddingHorizontal: sizes.rem0_5, paddingVertical: sizes.rem0_5}}>\r\n            <View style={{flex: 1, flexDirection: 'row', justifyContent: 'center'}}>\r\n                \r\n                <SecPressable securityId={secId}>                                        \r\n                    <Avatar\r\n                        style={{borderWidth: 1, borderColor: '#ccc'}}\r\n                        resizeMode={'contain'}\r\n                        size=\"medium\"\r\n                        shape=\"rounded\"\r\n                        source={\r\n                            (() => {\r\n                                let output: { uri: string } | undefined;\r\n                                \r\n                                output = props.bySymbol[symbol] ? { uri: props.bySymbol[symbol].logo_url  } : undefined\r\n                                return output;\r\n                            })()}\r\n                        />\r\n                </SecPressable>\r\n                <View style={{flex: 1, alignItems: 'center'}}>\r\n                    <View style={{flex: 1, flexDirection: 'row', alignItems: 'center'}}>\r\n                        <Text style={{ fontWeight: '900', color: '#454545'}}>\r\n                                    {props.byId[secId] ? (props.byId[secId].symbol === 'USD:CUR' ? 'Cash' : props.byId[secId].symbol) : ''}\r\n                        </Text>\r\n                        {/*<Pressable onPress={() => {\r\n                            if (props.item.item.note || !props.hideEmptyNote) {\r\n                                props.setShownMap({\r\n                                    ...props.shownMap,\r\n                                    [props.item.index]: !props.shownMap[props.item.index]\r\n                                })\r\n                            }\r\n                            }}\r\n                            style={{marginLeft: 10, justifyContent: 'flex-end'}}\r\n                            >\r\n                            <Icon style={{ opacity: (props.item.item.note || !props.hideEmptyNote) ? (props.item.item.note ? 1 : 0.5) : 0, height: 16 , width: 22 , }} \r\n                                name={!props.shownMap[props.item.index] ? \"file-text-outline\" : \"close-outline\"}\r\n                                fill={AppColors.primary}\r\n                                />\r\n                        </Pressable>\r\n                        */}\r\n                    </View>\r\n                    <View style={{flex: 1, flexDirection: 'row', alignItems: 'center'}}>\r\n                        <Text style={[{ color: '#606060', fontSize: fonts.xSmall, marginRight: 4}, intradayChange >= 0 ? (!intradayChange ? {color: 'black'} : {color: 'green'}) : {color: 'red'}]}>\r\n                            {`${toDollarsAndCents(intradayChange)}`}\r\n                        </Text>\r\n                        <Text style={{ color: '#606060', fontSize: fonts.xSmall}}>\r\n                            {`${toDollarsAndCents(props.item.item.price?.price)}`}\r\n                        </Text>\r\n\r\n\r\n                    </View>\r\n\r\n                </View>\r\n                \r\n            \r\n            </View>\r\n            <View>\r\n                {props.shownMap[props.item.index] && props.watchlist ?\r\n                    <NoteEditor note={props.item.item.note} \r\n                                onChangeNote={(note) => {\r\n                                    props.item.item.note = note;\r\n                                }} \r\n                                canEdit={!props.hideEmptyNote} \r\n                                ticker={props.item.item.symbol} \r\n                                watchlistId={props.watchlist.id} /> \r\n                                : null\r\n                                }\r\n            </View>\r\n        </ElevatedSection>\r\n    )\r\n}","import { NavigationProp, useFocusEffect, useNavigation } from \"@react-navigation/native\"\r\nimport { Api, Interface } from \"@tradingpost/common/api\"\r\nimport WatchlistApi from \"@tradingpost/common/api/entities/apis/WatchlistApi\"\r\nimport { IWatchlistGetExt } from \"@tradingpost/common/api/entities/extensions/Watchlist\"\r\nimport { ISecurityList } from \"@tradingpost/common/api/entities/interfaces\"\r\nimport { Avatar, Icon } from \"@ui-kitten/components\"\r\nimport React, { PropsWithChildren, useEffect, useRef, useState, Component, useCallback } from \"react\"\r\nimport { Header, Subheader } from \"../components/Headers\";\r\nimport { View, Text, Pressable, ScrollView, useWindowDimensions, Animated, FlatList, NativeSyntheticEvent, NativeScrollEvent } from \"react-native\"\r\nimport { useToast } from \"react-native-toast-notifications\"\r\nimport { useAppUser } from \"../Authentication\"\r\nimport { DeleteButton, EditButton, FavButton } from \"../components/AddButton\"\r\nimport { ProfileBar } from \"../components/ProfileBar\"\r\nimport { ElevatedSection, Section, Subsection } from \"../components/Section\"\r\nimport { ITableColumn, Table } from \"../components/Table\"\r\nimport { TextField } from \"../components/TextField\"\r\nimport { AppColors } from \"../constants/Colors\"\r\nimport { elevated, flex, fonts, paddView, paddViewWhite, row, sizes } from \"../style\"\r\nimport { useSecuritiesList } from '../SecurityList'\r\nimport { toDollarsAndCents, toNumber1, toPercent, toPercent1, toPercent2 } from \"../utils/misc\"\r\nimport { MultiTermFeedPart } from \"../components/MultiTermFeed\"\r\nimport { List } from \"../components/List\"\r\nimport { WatchlistItemRenderItem } from \"../components/WatchlistItemRenderItem\"\r\nimport { PrimaryChip } from \"../components/PrimaryChip\"\r\nimport { sleep } from \"@tradingpost/common/utils/sleep\"\r\n\r\n\r\nexport const useNoteField = (hideEmptyNote?: boolean) => {\r\n    const [shownMap, setShownMap] = useState<Record<string, boolean>>({})\r\n    return {\r\n        shownMap,\r\n        column: {\r\n            field: (info: { index: number, item: { note?: string } }) => {\r\n                return <Pressable onPress={() => {\r\n                    if (info.item.note || !hideEmptyNote) {\r\n                        setShownMap({\r\n                            ...shownMap,\r\n                            [info.index]: !shownMap[info.index]\r\n                        })\r\n                    }\r\n                }}>\r\n                    <Icon style={{ opacity: (info.item.note || !hideEmptyNote) ? (info.item.note ? 1 : 0.25) : 0, height: 16, width: 22 }} name={!shownMap[info.index] ? \"file-text-outline\" : \"close-outline\"}\r\n                        fill={AppColors.primary}\r\n                    /></Pressable>\r\n            }, alias: \" \", width: 32\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport const SecPressable = (props: PropsWithChildren<{ securityId: number }>) => {\r\n    const nav = useNavigation<NavigationProp<AllPages>>();\r\n    return <Pressable onPress={() => {\r\n        if (props.securityId !== -1) {\r\n        nav.navigate(\"Company\", {\r\n            securityId: props.securityId\r\n        })\r\n        }\r\n    }}>{props.children}</Pressable>\r\n}\r\n\r\nexport const useMakeSecurityFields = (getIdValue: (itm: any) => string | number) => {\r\n    const { securities: { bySymbol, byId } } = useSecuritiesList();\r\n    return [{\r\n        field: (a: any) => {\r\n            const value = getIdValue(a.item);\r\n            return (\r\n                <View style={{ overflow: 'visible' }}>\r\n                    <SecPressable securityId={\r\n                        (() => {\r\n                            if (typeof value === \"string\")\r\n                                return bySymbol[value]?.id || -1\r\n                            else\r\n                                return byId[value]?.id || -1\r\n                        })()\r\n                    }>\r\n                        <Avatar style={{ marginRight: sizes.rem0_5 }}\r\n                                resizeMode={'contain'}\r\n                                source={\r\n                                    (() => {\r\n                                        let output: { uri: string } | undefined;\r\n                                        if (typeof value === \"string\")\r\n                                            output = bySymbol[value] ? { uri: bySymbol[value].logo_url } : undefined\r\n                                        else\r\n                                            output = byId[value] ? { uri: byId[value].logo_url  } : undefined\r\n                                        return output;\r\n                                    })()}\r\n                                size=\"tiny\"\r\n                        />\r\n\r\n                    </SecPressable>\r\n                </View>\r\n            )\r\n        },\r\n        headerStyle: {\r\n            width: sizes.rem10 / 2,\r\n            //marginRight: sizes.rem0_5,\r\n            overflow: \"visible\" as \"visible\"\r\n        },\r\n        alias: \"Ticker\",\r\n        align: \"left\" as \"left\",\r\n        width: sizes.rem2\r\n    },\r\n    {\r\n        alias: \"\",\r\n        width: sizes.rem6 / 2,\r\n        align: \"left\" as \"left\",\r\n        style: { lineHeight: sizes.rem1_5 },\r\n        headerStyle: {\r\n            width: 0,\r\n        },\r\n        stringify: (value: any, key: any, item: any) => {\r\n            const v = getIdValue(item);\r\n            if (typeof v === \"string\")\r\n                return bySymbol[v]?.symbol === 'USD:CUR' ? 'Cash' : bySymbol[v]?.symbol || \"\"\r\n            else\r\n                return byId[v]?.symbol === 'USD:CUR' ? 'Cash' : byId[v]?.symbol || \"\"\r\n        }\r\n    }\r\n    ]\r\n}\r\n\r\nexport const useWatchlistItemColumns = (hideEmptyNote?: boolean) => {\r\n\r\n    const [iconField, secField] = useMakeSecurityFields((item) => item.symbol);\r\n    const { column, shownMap } = useNoteField(hideEmptyNote);\r\n    return {\r\n        shownMap,\r\n        columns: [\r\n            iconField,\r\n            secField,\r\n            {\r\n                alias: \"Price\",\r\n                field: (a) => {\r\n                    const change = a.item.price?.price || a.item.price?.open ? (a.item.price?.price - a.item.price?.open) / a.item.price?.open : 0\r\n                    return (\r\n                        <View style={{ justifyContent: 'center', flexDirection: 'row', flex: 1 }}>\r\n                            <Text style={[change ? change >= 0 ? { color: 'green' } : { color: 'red' } : {}, { marginRight: sizes.rem0_5 }]}>{`(${toPercent2(change)})`}</Text>\r\n                            <Text>{toDollarsAndCents(a.item.price?.price)}</Text>\r\n                        </View>\r\n                    )\r\n                },\r\n                //align: 'left' as 'left',\r\n                //width: sizes.rem6\r\n                /*\r\n                stringify: (a, b, c) => {\r\n                    if (c.price?.price) {\r\n                        return toDollarsAndCents(c.price.price);\r\n                    }\r\n                    else\r\n                        return \"-\"\r\n                }\r\n                */\r\n            }/*,\r\n            {\r\n                alias: \"Date Added\",\r\n                stringify: (a, b, c) => {\r\n                    if (c.price?.time) {\r\n                        return (new Date(c.date_added)).toLocaleDateString() || \"-\"\r\n                    }\r\n                    else {\r\n                        return \"-\";\r\n                    }\r\n                }\r\n            }*/,\r\n            column\r\n            //        { field: \"symbol\", align: \"left\", style: { lineHeight: sizes.rem1_5 } },\r\n        ] as ITableColumn<IWatchlistGetExt[\"items\"][number]>[]\r\n    }\r\n}\r\n\r\n\r\nexport const WatchlistViewerScreen = (props: TabScreenProps<{ watchlistId: number }>) => {\r\n    const [watchlist, setWatchlist] = useState<IWatchlistGetExt>()\r\n    const watchlistId = props.route?.params?.watchlistId;\r\n    const [isSaved, setIsFav] = useState(false)\r\n    const [watchlistTickers, setWatchlistTickers] = useState<string[]>();\r\n    const { loginState } = useAppUser();\r\n    const appUser = loginState?.appUser;\r\n    const translateHeaderY = useRef(new Animated.Value(0)).current;\r\n    const scrollRef = useRef<FlatList>(null);\r\n\r\n    const toast = useToast();\r\n    useFocusEffect(useCallback(() => {\r\n        (async () => {\r\n            try {\r\n                if (watchlistId) {\r\n                    const w = await WatchlistApi.get(watchlistId)\r\n                    setIsFav(w.is_saved)\r\n                    setWatchlist(w as IWatchlistGetExt);\r\n                }\r\n                if (watchlist) {\r\n                    setWatchlistTickers(watchlist.items.map(a => `$${a.symbol}`))\r\n                }\r\n            } catch (err) {\r\n                console.error(err);\r\n            }\r\n        })()\r\n    }, []))\r\n    useFocusEffect(useCallback(() => {\r\n        (async () => {\r\n            try {\r\n                if (watchlist) {\r\n                    setWatchlistTickers(watchlist.items.map(a => `$${a.symbol}`))\r\n                }\r\n            } catch (err) {\r\n                console.error(err);\r\n            }\r\n        })()\r\n    }, [watchlist]))\r\n\r\n    useFocusEffect(useCallback(() => {\r\n        (async () => {\r\n            try {\r\n                if (watchlistId) {\r\n                    const w = await WatchlistApi.get(watchlistId)\r\n                    setIsFav(w.is_saved)\r\n                    setWatchlist(w as IWatchlistGetExt);\r\n                }\r\n                if (watchlist) {\r\n                    setWatchlistTickers(watchlist.items.map(a => `$${a.symbol}`))\r\n                }\r\n            } catch (err) {\r\n                console.error(err);\r\n            }\r\n        })()\r\n    }, [watchlistId]))\r\n\r\n    const { securities: { bySymbol, byId } } = useSecuritiesList();\r\n    const [shownMap, setShownMap] = useState<Record<string, boolean>>({})\r\n    return <View style={[flex]}>\r\n        <Animated.FlatList\r\n            data={[\r\n                <View\r\n                    style={{\r\n                        paddingTop: sizes.rem0_5, backgroundColor: AppColors.background,\r\n                        alignItems: \"stretch\", width: \"100%\"\r\n                    }}\r\n                >\r\n                    <View style={[\r\n                        //collapsed ? {display: 'none'} : {display: 'flex'},\r\n                        { paddingHorizontal: sizes.rem1, backgroundColor: AppColors.background }]}>\r\n                        <Header text={watchlist?.name || \"\"} />\r\n                        <ElevatedSection title={\"\"}>\r\n                            <View style={{flex: 1, flexDirection: 'row', alignContent: 'center'}}>\r\n                                <ProfileBar style={{flex: 1}} user={watchlist?.user[0]} />\r\n                                <View style={{flex: 1, alignContent: 'center', justifyContent: 'center'}}>\r\n                                    <PrimaryChip style={{width: '50%'}} isAlt key={watchlist?.id} label={watchlist?.type ? watchlist.type.slice(0,1).toUpperCase() + watchlist.type.slice(1) : ''} />\r\n                                </View>\r\n                                {watchlist?.user[0].id === appUser?.id ? \r\n                                    <EditButton\r\n                                        height={24}\r\n                                        width={24} \r\n                                        onPress={() => {\r\n                                            props.navigation.navigate(\"WatchlistEditor\", {\r\n                                                watchlistId: watchlistId\r\n                                            })\r\n                                        }} /> : \r\n                                    <FavButton\r\n                                        height={24}\r\n                                        width={24}\r\n                                        isSelected={isSaved}\r\n                                        onPress={() => {\r\n                                            try {\r\n                                                if (watchlistId) {\r\n                                                    Api.Watchlist.extensions.saveWatchlist({\r\n                                                        id: watchlistId,\r\n                                                        is_saved: !isSaved\r\n                                                    })\r\n                                                    setIsFav(f => !f);\r\n                                                    toast.show(\"Watchlist Added\")\r\n                                                }\r\n                                            } catch (err) {\r\n                                                console.error(err);\r\n                                            }\r\n                                        }}\r\n                                    />}\r\n                            </View>\r\n                            \r\n                            <Text style={[{ marginVertical: sizes.rem0_5 }, !watchlist?.note ? { color: \"#ccc\", fontStyle: \"italic\" } : undefined]}>\r\n                                {watchlist?.note || \"No Notes\"}\r\n                            </Text>\r\n                            \r\n                        </ElevatedSection>\r\n                    </View>\r\n                    <View style={[\r\n                        //collapsed ? {display: 'none'} : {display: 'flex'},\r\n                        { paddingHorizontal: sizes.rem1, backgroundColor: AppColors.background }]}>\r\n                        <Section title=\"Stocks\"\r\n                                 style={{backgroundColor: AppColors.background}}>\r\n                                 \r\n                            <List   \r\n                                listKey={`watchlist_id}`}\r\n                                datasetKey={`watchlist_id_${watchlist?.items.length}`}\r\n                                data={watchlist?.items}\r\n                                loadingMessage={\" \"}\r\n                                noDataMessage={\" \"}\r\n                                loadingItem={undefined}\r\n                                numColumns={2}\r\n                                renderItem={(item)=> {\r\n                                    const symbol = item.item.symbol;\r\n                                    const secId = bySymbol[symbol] ? bySymbol[symbol].id : 0;\r\n                                    const intradayChange = item.item.price ? item.item.price.price - item.item.price.open : 0\r\n                                    const hideEmptyNote = watchlist?.user[0].id !== appUser?.id\r\n                                    return (\r\n                                        <WatchlistItemRenderItem \r\n                                            item={item}\r\n                                            bySymbol={bySymbol}\r\n                                            byId={byId}\r\n                                            hideEmptyNote={hideEmptyNote}\r\n                                            setShownMap={setShownMap}\r\n                                            shownMap={shownMap}\r\n                                            watchlist={watchlist}/>\r\n                                    )\r\n                                }}\r\n                                />\r\n                        </Section>\r\n                    </View>\r\n                    <View style={[{ paddingHorizontal: sizes.rem1, backgroundColor: AppColors.background }]}>\r\n                        <Header text=\"Watchlist Posts\" />\r\n                    </View>\r\n                </View>,\r\n                <View style={[{ paddingHorizontal: 0 }]}\r\n                >\r\n                    {watchlistTickers && <MultiTermFeedPart key={watchlistTickers ? watchlistTickers.join() : \"___\"} searchText={watchlistTickers} />}\r\n                </View>\r\n            ]}\r\n            renderItem={(info) => {\r\n                return info.item;\r\n            }}\r\n            ref={scrollRef} contentContainerStyle={[{ paddingTop: 0 }]} nestedScrollEnabled\r\n            onScroll={Animated.event<NativeSyntheticEvent<NativeScrollEvent>>([\r\n                { nativeEvent: { contentOffset: { y: translateHeaderY } } }\r\n            ], { useNativeDriver: true })}>\r\n        </Animated.FlatList>\r\n    </View>\r\n}\r\n\r\nexport const NoteEditor = (props: { canEdit: boolean, note: string | undefined, ticker: string, watchlistId: number, onChangeNote: (note: string) => void }) => {\r\n    const [isEdit, setIsEdit] = useState(!props.note && props.canEdit);\r\n    const [note, setNote] = useState(props.note)\r\n\r\n    return (!props.canEdit || (!isEdit && note)) ?\r\n        <View style={{ flexDirection: \"row\", alignItems: \"center\" }}><Text><Text style={{ fontWeight: \"bold\" }}>Note:</Text>{note}</Text>\r\n            {props.canEdit && <EditButton\r\n                style={{ marginLeft: \"auto\" }}\r\n                height={24} width={24} onPress={() => {\r\n                    setIsEdit(true);\r\n                }}\r\n            />}\r\n\r\n        </View> :\r\n        <View style={[row, { alignItems: \"center\" }]}><TextField placeholder=\"Add a note\" style={flex} value={note} onChangeText={(t) => {\r\n            setNote(t);\r\n        }} /><Pressable onPress={() => {\r\n            props.onChangeNote(note || \"\");\r\n            setIsEdit(false)\r\n        }\r\n        }><Icon name=\"checkmark-outline\" fill={AppColors.primary} style={{\r\n            height: 24,\r\n            width: 24\r\n        }} />\r\n            </Pressable>\r\n        </View>\r\n\r\n}\r\n/*\r\nclass WrappedView extends Component<finishedLoadingProp> {\r\n    finishedLoading: boolean;\r\n    constructor(props: finishedLoadingProp) {\r\n        super(props)\r\n        this.finishedLoading = props.finishedLoading\r\n    }\r\n    shouldComponentUpdate(nextProps: Readonly<ViewProps>, nextState: Readonly<{}>, nextContext: any): boolean {\r\n        if (this.finishedLoading){\r\n            return false;\r\n        }\r\n        else {\r\n            return true\r\n        }\r\n    }\r\n    render(): React.ReactNode {\r\n        let {style, children} = this.props\r\n        return (\r\n            <View style={style}>\r\n                {children}\r\n            </View>\r\n        )\r\n    }\r\n}\r\nexport interface finishedLoadingProp extends ViewProps {\r\n    finishedLoading: boolean\r\n}\r\n\r\n\r\nclass WrappedAnimatedView extends Component<finishedLoadingProp> {\r\n    finishedLoading: boolean;\r\n    constructor(props: finishedLoadingProp) {\r\n        super(props)\r\n        this.finishedLoading = props.finishedLoading\r\n    }\r\n    shouldComponentUpdate(nextProps: Readonly<ViewProps>, nextState: Readonly<{}>, nextContext: any): boolean {\r\n        if (this.finishedLoading){\r\n            return false;\r\n        }\r\n        else {\r\n            return true\r\n        }\r\n    }\r\n    render(): React.ReactNode {\r\n        let {style, children} = this.props\r\n        return (\r\n            <Animated.View style={style}>\r\n                {children}\r\n            </Animated.View>\r\n        )\r\n    }\r\n}\r\n*/","import { useFocusEffect, useNavigation } from \"@react-navigation/native\"\r\nimport { Interface } from \"@tradingpost/common/api\"\r\nimport { IWatchlistList } from \"@tradingpost/common/api/entities/interfaces\"\r\nimport React, { useCallback, useEffect, useState } from \"react\"\r\nimport { Pressable, Text, View } from \"react-native\"\r\nimport { AppColors } from \"../constants/Colors\"\r\nimport { PlusIcon } from \"../images\"\r\nimport { useNoteField } from \"../screens/WatchlistViewerScreen\"\r\nimport { fonts, row, sizes } from \"../style\"\r\nimport { AddButton } from \"./AddButton\"\r\nimport { List } from \"./List\"\r\nimport { ElevatedSection, Section } from \"./Section\"\r\nimport { ITableColumn, Table } from \"./Table\"\r\n\r\n\r\nexport function WatchlistSection(props: { title: string, watchlists: Interface.IWatchlistList[] | undefined, showAddButton?: boolean, shared?: boolean, hideNoteOnEmpty?: boolean, datasetKey?: string }) {\r\n    const nav = useNavigation<any>();\r\n    const [focus, setFocus] = useState(false);\r\n    useFocusEffect(useCallback(()=> {\r\n        setFocus((f) => !f)\r\n    },[]))\r\n    const fields: ITableColumn<IWatchlistList>[] = !props.shared ?\r\n        [{ field: \"name\", alias: \"Name\", align: \"left\" },\r\n        { field: \"item_count\", alias: \"Items\" },\r\n        { field: \"saved_by_count\", alias: \"Saves\" },\r\n        { field: \"type\", alias: \"Type\" }] :\r\n\r\n        [{ field: \"name\", alias: \"Name\", align: \"left\" },\r\n        {field: \"user\", align: \"left\", alias: \"Analyst\", stringify: (user: IWatchlistList[\"user\"], key, item) => {return user[0].handle}}]\r\n    const { column, shownMap } = useNoteField(props.hideNoteOnEmpty);\r\n    return <Section title={props.title} style={{backgroundColor: AppColors.background}} button={props.showAddButton ? (p) => <AddButton height={p.height} width={p.width} onPress={() => {\r\n        nav.navigate(\"WatchlistEditor\")\r\n    }} /> : undefined}>\r\n        <List \r\n            datasetKey={`${props.datasetKey ? props.datasetKey : props.watchlists?.length}`}\r\n            listKey={props.title}\r\n            loadingMessage={\" \"}\r\n            noDataMessage={\" \"}\r\n            loadingItem={undefined}\r\n            numColumns={1}\r\n            data={props.watchlists}\r\n            ListHeaderComponent={() => {\r\n                return <View key={\"table_header\"} style={{marginHorizontal: sizes.rem1_5 / 4, paddingHorizontal: sizes.rem0_5, marginBottom: sizes.rem1 / 2}}>\r\n                <View style={[row]}>\r\n                    {fields.map((c, i) => {\r\n                        return <Text key={`header_${i}`} numberOfLines={1} style={{flex: 1, textAlign: 'center', fontSize: fonts.small, color: '#9D9D9D'}} >{c.alias}</Text>\r\n                    })}\r\n                </View>\r\n            </View>\r\n            }}\r\n            renderItem={(item)=> {\r\n                return (\r\n                    <ElevatedSection title=\"\" style={{flex: 1, marginBottom: sizes.rem1_5 / 2, marginHorizontal: sizes.rem1_5 / 4, paddingHorizontal: sizes.rem0_5, paddingVertical: sizes.rem0_5}}>\r\n                        <Pressable\r\n                            onPress={() => {\r\n                                nav.navigate(\"WatchlistViewer\", {\r\n                                    watchlistId: item.item.id\r\n                                })\r\n                        }}>\r\n                            <View style={{flex: 1, flexDirection: 'row', justifyContent: 'space-around'}}>\r\n                                {\r\n                                fields.map((c, i) => { \r\n                                    return (\r\n                                        <Text style={{flex: 1, textAlign: 'center'}}> \r\n                                            {c.field ? \r\n                                                (c.field === 'user' ? item.item[c.field][0].handle : \r\n                                                    (c.field === 'type' ? item.item[c.field].slice(0,1).toUpperCase() + item.item[c.field].slice(1) : item.item[c.field])) : \r\n                                                ''} \r\n                                        </Text>\r\n                                        )\r\n                                        }\r\n                                    )\r\n                                }\r\n                            </View>\r\n                        </Pressable>\r\n                    </ElevatedSection>\r\n\r\n                )\r\n            }}\r\n        \r\n        />\r\n        {/*<Table\r\n            listKey={props.title}\r\n            datasetKey={`${focus}`}\r\n            noDataMessage={props.shared ? \"No Shared Watchlists\" : \"No Watchlists\"}\r\n            columns={[\r\n                ...fields,\r\n                column\r\n            ]}\r\n            rowPressed={(item, idx) => {\r\n                nav.navigate(\"WatchlistViewer\", {\r\n                    watchlistId: item.id\r\n                })\r\n            }}\r\n            renderAuxItem={(info) => shownMap[info.index] ? <Text><Text style={{ fontWeight: \"bold\" }}>Details: </Text>{info.item.note}</Text> : null}\r\n            data={props.watchlists}\r\n        />*/}\r\n    </Section>\r\n}\r\n","import React from \"react\"\r\nimport { Pressable } from \"react-native\"\r\nimport { shadow } from \"../style\"\r\nimport { IconifyIcon } from \"./IconfiyIcon\"\r\nimport plusCircle from '../assets/@iconify/plus-circle'\r\nimport { AppColors } from \"../constants/Colors\"\r\n\r\n/**\r\n * This component assumes it will be placed in the bottom right corner of its parent.\r\n * @param props \r\n * @returns \r\n */\r\nexport const PlusContentButton = (props: {\r\n    onPress: () => void\r\n}) => {\r\n\r\n    return <Pressable style={[shadow, {\r\n        position: \"absolute\",\r\n        bottom: 10,\r\n        right: 10,\r\n        backgroundColor: \"blue\",\r\n        height: 62, aspectRatio: 1,\r\n        borderRadius: 34,\r\n        overflow: \"hidden\"\r\n    }]} onPress={props.onPress}>\r\n        <IconifyIcon icon={plusCircle} currentColor=\"green\" style={{ height: 64 * 1.2, width: 64 * 1.2, aspectRatio: 1, margin: 0, padding: 0, backgroundColor: \"white\" }} svgProps={{\r\n            style: {\r\n                height: 64 * 1.2,\r\n                width: 64 * 1.2,\r\n                marginTop: \"-10%\",\r\n                marginLeft: \"-10%\"\r\n            }\r\n        }} />\r\n    </Pressable>\r\n}","import {NavigationProp, useNavigation} from \"@react-navigation/native\";\r\nimport {Api, Interface} from \"@tradingpost/common/api\";\r\nimport React, {useEffect, useState} from \"react\";\r\nimport {useWindowDimensions} from \"react-native\";\r\nimport {View, Text} from \"react-native\";\r\nimport {PlusContentButton} from \"../components/PlusContentButton\";\r\nimport {PostList} from \"../components/PostList\";\r\nimport {spaceOnSide, postInnerHeight, PostView} from \"../components/PostView\";\r\nimport {DashTabScreenProps} from \"../navigation/pages\";\r\n\r\nexport const FeedScreen = (props: DashTabScreenProps<'Feed'>) => {\r\n    const [searchText, setSearchText] = useState(\"\")\r\n    const nav = useNavigation();\r\n\r\n    //useEffect(()=>{\r\n    //props.navigation.setOptions({\r\n    //headerRight:\r\n    //  })\r\n    // return <Pressable onPress={() => {\r\n    //     navigation.setParams({\r\n    //       bookmarkedOnly: true\r\n    //     })\r\n    //   }}>\r\n    //     <IconButton iconSource={BookmarkIcons.inactive} style={{ height: 24, width: 24 }} />\r\n    //   </Pressable>\r\n    //},[])\r\n\r\n    return (\r\n        <View style={{flex: 1, backgroundColor: \"#F7f8f8\"}}>\r\n            <FeedPart bookmarkedOnly={props.route.params.bookmarkedOnly === \"true\"} searchText={searchText}/>\r\n            <PlusContentButton onPress={() => {\r\n                nav.navigate(\"PostEditor\")\r\n            }}/>\r\n        </View>\r\n    );\r\n}\r\n\r\n\r\nexport const FeedPart = (props: {\r\n    bookmarkedOnly?: boolean,\r\n    searchText?: string,\r\n    userId?: string\r\n}) => {\r\n    const {width: windowWidth} = useWindowDimensions();\r\n    const {searchText, bookmarkedOnly, userId} = props\r\n    return <PostList\r\n        key={bookmarkedOnly ? String(Date.now()) : \"STATIC\"}\r\n        datasetKey={searchText ? searchText : \"____________\"}\r\n        posts={async (allItems, page, sizeCache) => {\r\n            console.log(\"PAGE: \", page)\r\n            const posts = (await Api.Post.extensions.feed({\r\n                page,\r\n                bookmarkedOnly: bookmarkedOnly,\r\n                userId,\r\n                data: searchText ? {\r\n                    terms: (() => {\r\n                        if (searchText[0] === '$') {\r\n                            console.log('lowercasing')\r\n                            return searchText.toLowerCase()\r\n                        } else {\r\n                            return searchText\r\n                        }\r\n                    })()\r\n                } : undefined\r\n            }));\r\n\r\n            const newItems = [...(allItems || []), ...posts]\r\n            newItems.forEach((itm, index) => {\r\n                if (!sizeCache[index]) {\r\n                    sizeCache[index] = {\r\n                        index,\r\n                        offset: index ? sizeCache[index - 1].offset + sizeCache[index - 1].length : 0,\r\n                        length: postInnerHeight(itm,  Math.min(windowWidth, 680) - spaceOnSide)\r\n                    }\r\n                }\r\n            })\r\n            return newItems;\r\n        }}\r\n    />\r\n}","import React, { Component } from 'react'\r\nimport { InteractionManager } from 'react-native'\r\nimport PropTypes from 'prop-types'\r\nimport { Path } from 'react-native-svg'\r\nimport * as interpolate from 'd3-interpolate-path'\r\n\r\nclass AnimatedPath extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = { d: props.d }\r\n    }\r\n\r\n    componentDidUpdate(props) {\r\n        const { d: newD, animate } = this.props\r\n        const { d: oldD } = props\r\n\r\n        this.newD = newD\r\n\r\n        if (newD === oldD) {\r\n            return\r\n        }\r\n\r\n        if (!animate || newD === null || oldD === null) {\r\n            return\r\n        }\r\n\r\n        this.newD = newD\r\n        this.interpolator = interpolate.interpolatePath(oldD, newD)\r\n\r\n        this._animate()\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        cancelAnimationFrame(this.animation)\r\n        this._clearInteraction()\r\n    }\r\n\r\n    _animate(start) {\r\n        cancelAnimationFrame(this.animation)\r\n        this.animation = requestAnimationFrame((timestamp) => {\r\n            if (!start) {\r\n                this._clearInteraction()\r\n                this.handle = InteractionManager.createInteractionHandle()\r\n\r\n                start = timestamp\r\n            }\r\n\r\n            // Get the delta on how far long in our animation we are.\r\n            const delta = (timestamp - start) / this.props.animationDuration\r\n\r\n            // If we're above 1 then our animation should be complete.\r\n            if (delta > 1) {\r\n                // Just to be safe set our final value to the new graph path.\r\n                this.component.setNativeProps({ d: this.newD })\r\n                // Stop our animation loop.\r\n                this._clearInteraction()\r\n                return\r\n            }\r\n\r\n            const d = this.interpolator(delta)\r\n            this.component.setNativeProps({ d })\r\n            // console.log(this.interpolator)\r\n            // this.tween && console.log(this.tween.tween(delta))\r\n            // Tween the SVG path value according to what delta we're currently at.\r\n\r\n            // Update our state with the new tween value and then jump back into\r\n            // this loop.\r\n            this.setState(this.state, () => {\r\n                this._animate(start)\r\n            })\r\n        })\r\n    }\r\n\r\n    _clearInteraction() {\r\n        if (this.handle) {\r\n            InteractionManager.clearInteractionHandle(this.handle)\r\n            this.handle = null\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Path\r\n                ref={(ref) => (this.component = ref)}\r\n                {...this.props}\r\n                d={this.props.animate ? this.state.d : this.props.d}\r\n            />\r\n        )\r\n    }\r\n}\r\n\r\nAnimatedPath.propTypes = {\r\n    animate: PropTypes.bool,\r\n    animationDuration: PropTypes.number,\r\n    renderPlaceholder: PropTypes.func,\r\n    ...Path.propTypes,\r\n}\r\n\r\nAnimatedPath.defaultProps = {\r\n    animate: false,\r\n    animationDuration: 300,\r\n    renderPlaceholder: () => null,\r\n}\r\n\r\nexport default AnimatedPath\r\n","import * as array from 'd3-array'\r\nimport * as scale from 'd3-scale'\r\nimport * as shape from 'd3-shape'\r\nimport PropTypes from 'prop-types'\r\nimport React, { PureComponent } from 'react'\r\nimport { View } from 'react-native'\r\nimport Svg from 'react-native-svg'\r\nimport Path from '../animated-path'\r\n\r\nclass Chart extends PureComponent {\r\n    state = {\r\n        width: 0,\r\n        height: 0,\r\n    }\r\n\r\n    _onLayout(event) {\r\n        const {\r\n            nativeEvent: {\r\n                layout: { height, width },\r\n            },\r\n        } = event\r\n        this.setState({ height, width })\r\n    }\r\n\r\n    createPaths() {\r\n        throw 'Extending \"Chart\" requires you to override \"createPaths'\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            data,\r\n            xAccessor,\r\n            yAccessor,\r\n            yScale,\r\n            xScale,\r\n            style,\r\n            animate,\r\n            animationDuration,\r\n            numberOfTicks,\r\n            contentInset: { top = 0, bottom = 0, left = 0, right = 0 },\r\n            gridMax,\r\n            gridMin,\r\n            clampX,\r\n            clampY,\r\n            svg,\r\n            children,\r\n        } = this.props\r\n\r\n        const { width, height } = this.state\r\n\r\n        if (data.length === 0) {\r\n            return <View style={style} />\r\n        }\r\n\r\n        const mappedData = data.map((item, index) => ({\r\n            y: yAccessor({ item, index }),\r\n            x: xAccessor({ item, index }),\r\n        }))\r\n\r\n        const yValues = mappedData.map((item) => item.y)\r\n        const xValues = mappedData.map((item) => item.x)\r\n\r\n        const yExtent = array.extent([...yValues, gridMin, gridMax])\r\n        const xExtent = array.extent([...xValues])\r\n\r\n        const { yMin = yExtent[0], yMax = yExtent[1], xMin = xExtent[0], xMax = xExtent[1] } = this.props\r\n\r\n        //invert range to support svg coordinate system\r\n        const y = yScale()\r\n            .domain([yMin, yMax])\r\n            .range([height - bottom, top])\r\n            .clamp(clampY)\r\n\r\n        const x = xScale()\r\n            .domain([xMin, xMax])\r\n            .range([left, width - right])\r\n            .clamp(clampX)\r\n\r\n        const paths = this.createPaths({\r\n            data: mappedData,\r\n            x,\r\n            y,\r\n        })\r\n\r\n        const ticks = y.ticks(numberOfTicks)\r\n\r\n        const extraProps = {\r\n            x,\r\n            y,\r\n            data,\r\n            ticks,\r\n            width,\r\n            height,\r\n            ...paths,\r\n        }\r\n\r\n        return (\r\n            <View style={style}>\r\n                <View style={{ flex: 1 }} onLayout={(event) => this._onLayout(event)}>\r\n                    {height > 0 && width > 0 && (\r\n                        <Svg style={{ height, width }}>\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                            <Path\r\n                                fill={'none'}\r\n                                {...svg}\r\n                                d={paths.path}\r\n                                animate={animate}\r\n                                animationDuration={animationDuration}\r\n                            />\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && !child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                        </Svg>\r\n                    )}\r\n                </View>\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nChart.propTypes = {\r\n    data: PropTypes.oneOfType([\r\n        PropTypes.arrayOf(PropTypes.object),\r\n        PropTypes.arrayOf(PropTypes.number),\r\n        PropTypes.arrayOf(PropTypes.array),\r\n    ]).isRequired,\r\n    svg: PropTypes.object,\r\n\r\n    style: PropTypes.any,\r\n\r\n    animate: PropTypes.bool,\r\n    animationDuration: PropTypes.number,\r\n\r\n    curve: PropTypes.func,\r\n    contentInset: PropTypes.shape({\r\n        top: PropTypes.number,\r\n        left: PropTypes.number,\r\n        right: PropTypes.number,\r\n        bottom: PropTypes.number,\r\n    }),\r\n    numberOfTicks: PropTypes.number,\r\n\r\n    gridMin: PropTypes.number,\r\n    gridMax: PropTypes.number,\r\n\r\n    yMin: PropTypes.any,\r\n    yMax: PropTypes.any,\r\n    xMin: PropTypes.any,\r\n    xMax: PropTypes.any,\r\n    clampX: PropTypes.bool,\r\n    clampY: PropTypes.bool,\r\n\r\n    xScale: PropTypes.func,\r\n    yScale: PropTypes.func,\r\n\r\n    xAccessor: PropTypes.func,\r\n    yAccessor: PropTypes.func,\r\n}\r\n\r\nChart.defaultProps = {\r\n    svg: {},\r\n    width: 100,\r\n    height: 100,\r\n    curve: shape.curveLinear,\r\n    contentInset: {},\r\n    numberOfTicks: 10,\r\n    xScale: scale.scaleLinear,\r\n    yScale: scale.scaleLinear,\r\n    xAccessor: ({ index }) => index,\r\n    yAccessor: ({ item }) => item,\r\n}\r\n\r\nexport default Chart\r\n","import * as shape from 'd3-shape'\r\nimport PropTypes from 'prop-types'\r\nimport Chart from './chart/chart'\r\n\r\nclass AreaChart extends Chart {\r\n    createPaths({ data, x, y }) {\r\n        const { curve, start } = this.props\r\n\r\n        const area = shape\r\n            .area()\r\n            .x((d) => x(d.x))\r\n            .y0(y(start))\r\n            .y1((d) => y(d.y))\r\n            .defined((item) => typeof item.y === 'number')\r\n            .curve(curve)(data)\r\n\r\n        const line = shape\r\n            .line()\r\n            .x((d) => x(d.x))\r\n            .y((d) => y(d.y))\r\n            .defined((item) => typeof item.y === 'number')\r\n            .curve(curve)(data)\r\n\r\n        return {\r\n            path: area,\r\n            area,\r\n            line,\r\n        }\r\n    }\r\n}\r\n\r\nAreaChart.propTypes = {\r\n    ...Chart.propTypes,\r\n    start: PropTypes.number,\r\n}\r\n\r\nAreaChart.defaultProps = {\r\n    ...Chart.defaultProps,\r\n    start: 0,\r\n}\r\n\r\nexport default AreaChart\r\n","import PropTypes from 'prop-types'\r\nimport * as array from 'd3-array'\r\nimport * as scale from 'd3-scale'\r\nimport * as shape from 'd3-shape'\r\nimport React, { PureComponent } from 'react'\r\nimport { View } from 'react-native'\r\nimport { Svg } from 'react-native-svg'\r\nimport Path from './animated-path'\r\n\r\nclass AreaStack extends PureComponent {\r\n    static extractDataPoints(data, keys, order = shape.stackOrderNone, offset = shape.stackOffsetNone) {\r\n        const series = shape\r\n            .stack()\r\n            .keys(keys)\r\n            .order(order)\r\n            .offset(offset)(data)\r\n\r\n        //double merge arrays to extract just the values\r\n        return array.merge(array.merge(series))\r\n    }\r\n\r\n    state = {\r\n        height: 0,\r\n        width: 0,\r\n    }\r\n\r\n    _onLayout(event) {\r\n        const {\r\n            nativeEvent: {\r\n                layout: { height, width },\r\n            },\r\n        } = event\r\n        this.setState({ height, width })\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            data,\r\n            keys,\r\n            colors,\r\n            animate,\r\n            animationDuration,\r\n            style,\r\n            curve,\r\n            numberOfTicks,\r\n            contentInset: { top = 0, bottom = 0, left = 0, right = 0 },\r\n            gridMin,\r\n            gridMax,\r\n            children,\r\n            offset,\r\n            order,\r\n            svgs,\r\n            xAccessor,\r\n            xScale,\r\n            clampY,\r\n            clampX,\r\n        } = this.props\r\n\r\n        const { height, width } = this.state\r\n\r\n        if (data.length === 0) {\r\n            return <View style={style} />\r\n        }\r\n\r\n        const series = shape\r\n            .stack()\r\n            .keys(keys)\r\n            .order(order)\r\n            .offset(offset)(data)\r\n\r\n        //double merge arrays to extract just the yValues\r\n        const yValues = array.merge(array.merge(series))\r\n        const xValues = data.map((item, index) => xAccessor({ item, index }))\r\n\r\n        const yExtent = array.extent([...yValues, gridMin, gridMax])\r\n        const xExtent = array.extent(xValues)\r\n\r\n        const { yMin = yExtent[0], yMax = yExtent[1], xMin = xExtent[0], xMax = xExtent[1] } = this.props\r\n\r\n        //invert range to support svg coordinate system\r\n        const y = scale\r\n            .scaleLinear()\r\n            .domain([yMin, yMax])\r\n            .range([height - bottom, top])\r\n            .clamp(clampY)\r\n\r\n        const x = xScale()\r\n            .domain([xMin, xMax])\r\n            .range([left, width - right])\r\n            .clamp(clampX)\r\n\r\n        const ticks = y.ticks(numberOfTicks)\r\n\r\n        const areas = series.map((serie, index) => {\r\n            const path = shape\r\n                .area()\r\n                .x((d, index) => x(xAccessor({ item: d.data, index })))\r\n                .y0((d) => y(d[0]))\r\n                .y1((d) => y(d[1]))\r\n                .curve(curve)(data.map((_, index) => serie[index]))\r\n\r\n            return {\r\n                path,\r\n                key: keys[index],\r\n                color: colors[index],\r\n            }\r\n        })\r\n\r\n        const extraProps = {\r\n            x,\r\n            y,\r\n            width,\r\n            height,\r\n            ticks,\r\n            areas,\r\n        }\r\n\r\n        return (\r\n            <View style={style}>\r\n                <View style={{ flex: 1 }} onLayout={(event) => this._onLayout(event)}>\r\n                    {height > 0 && width > 0 && (\r\n                        <Svg style={{ height, width }}>\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                            {areas.map((area, index) => (\r\n                                <Path\r\n                                    key={area.key}\r\n                                    fill={area.color}\r\n                                    {...svgs[index]}\r\n                                    animate={animate}\r\n                                    animationDuration={animationDuration}\r\n                                    d={area.path}\r\n                                />\r\n                            ))}\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && !child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                        </Svg>\r\n                    )}\r\n                </View>\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nAreaStack.propTypes = {\r\n    data: PropTypes.arrayOf(PropTypes.object).isRequired,\r\n    keys: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n    colors: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n    svgs: PropTypes.arrayOf(PropTypes.object),\r\n    offset: PropTypes.func,\r\n    order: PropTypes.func,\r\n    style: PropTypes.any,\r\n    animate: PropTypes.bool,\r\n    animationDuration: PropTypes.number,\r\n    contentInset: PropTypes.shape({\r\n        top: PropTypes.number,\r\n        left: PropTypes.number,\r\n        right: PropTypes.number,\r\n        bottom: PropTypes.number,\r\n    }),\r\n    numberOfTicks: PropTypes.number,\r\n    showGrid: PropTypes.bool,\r\n    xScale: PropTypes.func,\r\n    xAccessor: PropTypes.func,\r\n\r\n    yMin: PropTypes.any,\r\n    yMax: PropTypes.any,\r\n    xMin: PropTypes.any,\r\n    xMax: PropTypes.any,\r\n    clampX: PropTypes.bool,\r\n    clampY: PropTypes.bool,\r\n}\r\n\r\nAreaStack.defaultProps = {\r\n    curve: shape.curveLinear,\r\n    offset: shape.stackOffsetNone,\r\n    order: shape.stackOrderNone,\r\n    svgs: [],\r\n    strokeWidth: 2,\r\n    contentInset: {},\r\n    numberOfTicks: 10,\r\n    showGrid: true,\r\n    xScale: scale.scaleLinear,\r\n    xAccessor: ({ index }) => index,\r\n}\r\n\r\nexport default AreaStack\r\n","import * as array from 'd3-array'\r\nimport * as scale from 'd3-scale'\r\nimport * as shape from 'd3-shape'\r\nimport PropTypes from 'prop-types'\r\nimport React, { PureComponent } from 'react'\r\nimport { View } from 'react-native'\r\nimport Svg from 'react-native-svg'\r\nimport Path from '../animated-path'\r\n\r\nclass BarChart extends PureComponent {\r\n    state = {\r\n        width: 0,\r\n        height: 0,\r\n    }\r\n\r\n    _onLayout(event) {\r\n        const {\r\n            nativeEvent: {\r\n                layout: { height, width },\r\n            },\r\n        } = event\r\n        this.setState({ height, width })\r\n    }\r\n\r\n    calcXScale(domain) {\r\n        const {\r\n            horizontal,\r\n            contentInset: { left = 0, right = 0 },\r\n            spacingInner,\r\n            spacingOuter,\r\n            clamp,\r\n        } = this.props\r\n\r\n        const { width } = this.state\r\n\r\n        if (horizontal) {\r\n            return scale\r\n                .scaleLinear()\r\n                .domain(domain)\r\n                .range([left, width - right])\r\n                .clamp(clamp)\r\n        }\r\n\r\n        return scale\r\n            .scaleBand()\r\n            .domain(domain)\r\n            .range([left, width - right])\r\n            .paddingInner([spacingInner])\r\n            .paddingOuter([spacingOuter])\r\n    }\r\n\r\n    calcYScale(domain) {\r\n        const {\r\n            horizontal,\r\n            contentInset: { top = 0, bottom = 0 },\r\n            spacingInner,\r\n            spacingOuter,\r\n            clamp,\r\n        } = this.props\r\n\r\n        const { height } = this.state\r\n\r\n        if (horizontal) {\r\n            return scale\r\n                .scaleBand()\r\n                .domain(domain)\r\n                .range([top, height - bottom])\r\n                .paddingInner([spacingInner])\r\n                .paddingOuter([spacingOuter])\r\n        }\r\n\r\n        return scale\r\n            .scaleLinear()\r\n            .domain(domain)\r\n            .range([height - bottom, top])\r\n            .clamp(clamp)\r\n    }\r\n\r\n    calcAreas(x, y) {\r\n        const { horizontal, data, yAccessor } = this.props\r\n\r\n        const values = data.map((item) => yAccessor({ item }))\r\n\r\n        if (horizontal) {\r\n            return data.map((bar, index) => ({\r\n                bar,\r\n                path: shape\r\n                    .area()\r\n                    .y((value, _index) => (_index === 0 ? y(index) : y(index) + y.bandwidth()))\r\n                    .x0(x(0))\r\n                    .x1((value) => x(value))\r\n                    .defined((value) => typeof value === 'number')([values[index], values[index]]),\r\n            }))\r\n        }\r\n\r\n        return data.map((bar, index) => ({\r\n            bar,\r\n            path: shape\r\n                .area()\r\n                .y0(y(0))\r\n                .y1((value) => y(value))\r\n                .x((value, _index) => (_index === 0 ? x(index) : x(index) + x.bandwidth()))\r\n                .defined((value) => typeof value === 'number')([values[index], values[index]]),\r\n        }))\r\n    }\r\n\r\n    calcExtent() {\r\n        const { data, gridMin, gridMax, yAccessor } = this.props\r\n        const values = data.map((obj) => yAccessor({ item: obj }))\r\n\r\n        const extent = array.extent([...values, gridMax, gridMin])\r\n\r\n        const { yMin = extent[0], yMax = extent[1] } = this.props\r\n\r\n        return [yMin, yMax]\r\n    }\r\n\r\n    calcIndexes() {\r\n        const { data } = this.props\r\n        return data.map((_, index) => index)\r\n    }\r\n\r\n    render() {\r\n        const { data, animate, animationDuration, style, numberOfTicks, svg, horizontal, children } = this.props\r\n\r\n        const { height, width } = this.state\r\n\r\n        if (data.length === 0) {\r\n            return <View style={style} />\r\n        }\r\n\r\n        const extent = this.calcExtent()\r\n        const indexes = this.calcIndexes()\r\n        const ticks = array.ticks(extent[0], extent[1], numberOfTicks)\r\n\r\n        const xDomain = horizontal ? extent : indexes\r\n        const yDomain = horizontal ? indexes : extent\r\n\r\n        const x = this.calcXScale(xDomain)\r\n        const y = this.calcYScale(yDomain)\r\n\r\n        const bandwidth = horizontal ? y.bandwidth() : x.bandwidth()\r\n\r\n        const areas = this.calcAreas(x, y).filter(\r\n            (area) => area.bar !== null && area.bar !== undefined && area.path !== null\r\n        )\r\n\r\n        const extraProps = {\r\n            x,\r\n            y,\r\n            width,\r\n            height,\r\n            bandwidth,\r\n            ticks,\r\n            data,\r\n        }\r\n\r\n        return (\r\n            <View style={style}>\r\n                <View style={{ flex: 1 }} onLayout={(event) => this._onLayout(event)}>\r\n                    {height > 0 && width > 0 && (\r\n                        <Svg style={{ height, width }}>\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                            })}\r\n                            {areas.map((area, index) => {\r\n                                const {\r\n                                    bar: { svg: barSvg = {} },\r\n                                    path,\r\n                                } = area\r\n\r\n                                return (\r\n                                    <Path\r\n                                        key={index}\r\n                                        {...svg}\r\n                                        {...barSvg}\r\n                                        d={path}\r\n                                        animate={animate}\r\n                                        animationDuration={animationDuration}\r\n                                    />\r\n                                )\r\n                            })}\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && !child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                            })}\r\n                        </Svg>\r\n                    )}\r\n                </View>\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nBarChart.propTypes = {\r\n    data: PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.number, PropTypes.object])).isRequired,\r\n    style: PropTypes.any,\r\n    spacingInner: PropTypes.number,\r\n    spacingOuter: PropTypes.number,\r\n    animate: PropTypes.bool,\r\n    animationDuration: PropTypes.number,\r\n    contentInset: PropTypes.shape({\r\n        top: PropTypes.number,\r\n        left: PropTypes.number,\r\n        right: PropTypes.number,\r\n        bottom: PropTypes.number,\r\n    }),\r\n    numberOfTicks: PropTypes.number,\r\n    gridMin: PropTypes.number,\r\n    gridMax: PropTypes.number,\r\n    svg: PropTypes.object,\r\n\r\n    yMin: PropTypes.any,\r\n    yMax: PropTypes.any,\r\n    clamp: PropTypes.bool,\r\n}\r\n\r\nBarChart.defaultProps = {\r\n    spacingInner: 0.05,\r\n    spacingOuter: 0.05,\r\n    contentInset: {},\r\n    numberOfTicks: 10,\r\n    svg: {},\r\n    yAccessor: ({ item }) => item,\r\n}\r\n\r\nexport default BarChart\r\n","import PropTypes from 'prop-types'\r\nimport * as array from 'd3-array'\r\nimport * as scale from 'd3-scale'\r\nimport * as shape from 'd3-shape'\r\nimport BarChart from './bar-chart'\r\n\r\nclass GroupedBarChart extends BarChart {\r\n    calcXScale(domain) {\r\n        const {\r\n            horizontal,\r\n            contentInset: { left = 0, right = 0 },\r\n            spacingInner,\r\n            spacingOuter,\r\n            clamp,\r\n        } = this.props\r\n\r\n        const { width } = this.state\r\n\r\n        if (horizontal) {\r\n            return scale\r\n                .scaleLinear()\r\n                .domain(domain)\r\n                .range([left, width - right])\r\n                .clamp(clamp)\r\n        }\r\n\r\n        return scale\r\n            .scaleBand()\r\n            .domain(domain)\r\n            .range([left, width - right])\r\n            .paddingInner([spacingInner])\r\n            .paddingOuter([spacingOuter])\r\n    }\r\n\r\n    calcYScale(domain) {\r\n        const {\r\n            horizontal,\r\n            spacingInner,\r\n            spacingOuter,\r\n            contentInset: { top = 0, bottom = 0 },\r\n            clamp,\r\n        } = this.props\r\n\r\n        const { height } = this.state\r\n\r\n        if (horizontal) {\r\n            return scale\r\n                .scaleBand()\r\n                .domain(domain)\r\n                .range([top, height - bottom])\r\n                .paddingInner([spacingInner])\r\n                .paddingOuter([spacingOuter])\r\n        }\r\n\r\n        return scale\r\n            .scaleLinear()\r\n            .domain(domain)\r\n            .range([height - bottom, top])\r\n            .clamp(clamp)\r\n    }\r\n\r\n    calcAreas(x, y) {\r\n        const { horizontal, data, yAccessor } = this.props\r\n\r\n        const _data = data.map((obj) => {\r\n            const { svg = {} } = obj\r\n            return {\r\n                ...obj,\r\n                data: obj.data.map((item) => {\r\n                    if (typeof item === 'number') {\r\n                        return {\r\n                            value: item,\r\n                            svg,\r\n                        }\r\n                    }\r\n\r\n                    return {\r\n                        ...item,\r\n                        svg: {\r\n                            ...svg,\r\n                            ...item.svg,\r\n                        },\r\n                        value: yAccessor({ item }),\r\n                    }\r\n                }),\r\n            }\r\n        })\r\n\r\n        const areas = []\r\n\r\n        if (horizontal) {\r\n            const barWidth = y.bandwidth() / data.length\r\n\r\n            _data.forEach((obj, collectionIndex) => {\r\n                obj.data.forEach((item, valueIndex) => {\r\n                    areas.push({\r\n                        bar: item,\r\n                        path: shape\r\n                            .area()\r\n                            .y((value, _index) =>\r\n                                _index === 0\r\n                                    ? y(valueIndex) + barWidth * collectionIndex\r\n                                    : y(valueIndex) + barWidth + barWidth * collectionIndex\r\n                            )\r\n                            .x0(x(0))\r\n                            .x1((value) => x(value))\r\n                            .defined((value) => typeof value === 'number')([item.value, item.value]),\r\n                    })\r\n                })\r\n            })\r\n        } else {\r\n            const barWidth = x.bandwidth() / data.length\r\n\r\n            _data.forEach((obj, collectionIndex) => {\r\n                obj.data.forEach((item, valueIndex) => {\r\n                    areas.push({\r\n                        bar: item,\r\n                        path: shape\r\n                            .area()\r\n                            .x((value, _index) =>\r\n                                _index === 0\r\n                                    ? x(valueIndex) + barWidth * collectionIndex\r\n                                    : x(valueIndex) + barWidth + barWidth * collectionIndex\r\n                            )\r\n                            .y0(y(0))\r\n                            .y1((value) => y(value))\r\n                            .defined((value) => typeof value === 'number')([item.value, item.value]),\r\n                    })\r\n                })\r\n            })\r\n        }\r\n\r\n        return areas\r\n    }\r\n\r\n    calcExtent() {\r\n        const { data, yAccessor, gridMin, gridMax } = this.props\r\n        const dataExtent = array.merge(data.map((obj) => obj.data.map((item) => yAccessor({ item }))))\r\n\r\n        const extent = array.extent([...dataExtent, gridMax, gridMin])\r\n\r\n        const { yMin = extent[0], yMax = extent[1] } = this.props\r\n\r\n        return [yMin, yMax]\r\n    }\r\n\r\n    calcIndexes() {\r\n        const { data } = this.props\r\n        return data[0].data.map((_, index) => index)\r\n    }\r\n}\r\n\r\nGroupedBarChart.propTypes = {\r\n    ...BarChart.propTypes,\r\n    data: PropTypes.arrayOf(\r\n        PropTypes.shape({\r\n            data: PropTypes.array.isRequired,\r\n            svg: PropTypes.object,\r\n        })\r\n    ).isRequired,\r\n}\r\n\r\nexport default GroupedBarChart\r\n","import * as array from 'd3-array'\r\nimport * as scale from 'd3-scale'\r\nimport * as shape from 'd3-shape'\r\nimport PropTypes from 'prop-types'\r\nimport React, { PureComponent } from 'react'\r\nimport { View } from 'react-native'\r\nimport Svg from 'react-native-svg'\r\nimport Path from '../animated-path'\r\n\r\nclass BarChart extends PureComponent {\r\n    static extractDataPoints(data, keys, order = shape.stackOrderNone, offset = shape.stackOffsetNone) {\r\n        const series = shape\r\n            .stack()\r\n            .keys(keys)\r\n            .order(order)\r\n            .offset(offset)(data)\r\n\r\n        //double merge arrays to extract just the values\r\n        return array.merge(array.merge(series))\r\n    }\r\n\r\n    state = {\r\n        width: 0,\r\n        height: 0,\r\n    }\r\n\r\n    _onLayout(event) {\r\n        const {\r\n            nativeEvent: {\r\n                layout: { height, width },\r\n            },\r\n        } = event\r\n        this.setState({ height, width })\r\n    }\r\n\r\n    calcXScale(domain) {\r\n        const { data } = this.props\r\n\r\n        const {\r\n            horizontal,\r\n            contentInset: { left = 0, right = 0 },\r\n            spacingInner,\r\n            spacingOuter,\r\n        } = this.props\r\n\r\n        const { width } = this.state\r\n\r\n        if (horizontal) {\r\n            return scale\r\n                .scaleLinear()\r\n                .domain(domain)\r\n                .range([left, width - right])\r\n        }\r\n\r\n        // use index as domain identifier instead of value since\r\n        // domain must be same length as number of bars\r\n        // same value can occur at several places in data\r\n        return scale\r\n            .scaleBand()\r\n            .domain(data.map((_, index) => index))\r\n            .range([left, width - right])\r\n            .paddingInner([spacingInner])\r\n            .paddingOuter([spacingOuter])\r\n    }\r\n\r\n    calcYScale(domain) {\r\n        const { data } = this.props\r\n\r\n        const {\r\n            horizontal,\r\n            contentInset: { top = 0, bottom = 0 },\r\n            spacingInner,\r\n            spacingOuter,\r\n        } = this.props\r\n\r\n        const { height } = this.state\r\n\r\n        if (horizontal) {\r\n            return scale\r\n                .scaleBand()\r\n                .domain(data.map((_, index) => index))\r\n                .range([top, height - bottom])\r\n                .paddingInner([spacingInner])\r\n                .paddingOuter([spacingOuter])\r\n        }\r\n\r\n        return scale\r\n            .scaleLinear()\r\n            .domain(domain)\r\n            .range([height - bottom, top])\r\n    }\r\n\r\n    calcAreas(x, y, series) {\r\n        const { horizontal, colors, keys } = this.props\r\n\r\n        if (horizontal) {\r\n            return array.merge(\r\n                series.map((serie, keyIndex) => {\r\n                    return serie.map((entry, entryIndex) => {\r\n                        const path = shape\r\n                            .area()\r\n                            .x0((d) => x(d[0]))\r\n                            .x1((d) => x(d[1]))\r\n                            .y((d, _index) => (_index === 0 ? y(entryIndex) : y(entryIndex) + y.bandwidth()))\r\n                            .defined((d) => !isNaN(d[0]) && !isNaN(d[1]))([entry, entry])\r\n\r\n                        return {\r\n                            path,\r\n                            color: colors[keyIndex],\r\n                            key: keys[keyIndex],\r\n                        }\r\n                    })\r\n                })\r\n            )\r\n        }\r\n\r\n        return array.merge(\r\n            series.map((serie, keyIndex) => {\r\n                return serie.map((entry, entryIndex) => {\r\n                    const path = shape\r\n                        .area()\r\n                        .y0((d) => y(d[0]))\r\n                        .y1((d) => y(d[1]))\r\n                        .x((d, _index) => (_index === 0 ? x(entryIndex) : x(entryIndex) + x.bandwidth()))\r\n                        .defined((d) => !isNaN(d[0]) && !isNaN(d[1]))([entry, entry])\r\n\r\n                    return {\r\n                        path,\r\n                        color: colors[keyIndex],\r\n                        key: keys[keyIndex],\r\n                    }\r\n                })\r\n            })\r\n        )\r\n    }\r\n\r\n    calcExtent(values) {\r\n        const { gridMax, gridMin } = this.props\r\n\r\n        return array.extent([...values, gridMin, gridMax])\r\n    }\r\n\r\n    calcIndexes(values) {\r\n        return values.map((_, index) => index)\r\n    }\r\n\r\n    getSeries() {\r\n        const { data, keys, offset, order, valueAccessor } = this.props\r\n\r\n        return shape\r\n            .stack()\r\n            .keys(keys)\r\n            .value((item, key) => valueAccessor({ item, key }))\r\n            .order(order)\r\n            .offset(offset)(data)\r\n    }\r\n\r\n    render() {\r\n        const { data, animate, animationDuration, style, numberOfTicks, children, horizontal } = this.props\r\n\r\n        const { height, width } = this.state\r\n\r\n        if (data.length === 0) {\r\n            return <View style={style} />\r\n        }\r\n\r\n        const series = this.getSeries()\r\n\r\n        //double merge arrays to extract just the values\r\n        const values = array.merge(array.merge(series))\r\n        const indexes = this.calcIndexes(values)\r\n\r\n        const extent = this.calcExtent(values)\r\n        const ticks = array.ticks(extent[0], extent[1], numberOfTicks)\r\n\r\n        const xDomain = horizontal ? extent : indexes\r\n        const yDomain = horizontal ? indexes : extent\r\n\r\n        const x = this.calcXScale(xDomain)\r\n        const y = this.calcYScale(yDomain)\r\n\r\n        const bandwidth = horizontal ? y.bandwidth() : x.bandwidth()\r\n\r\n        const areas = this.calcAreas(x, y, series)\r\n\r\n        const extraProps = {\r\n            x,\r\n            y,\r\n            width,\r\n            height,\r\n            ticks,\r\n            data,\r\n            bandwidth,\r\n        }\r\n\r\n        return (\r\n            <View style={style}>\r\n                <View style={{ flex: 1 }} onLayout={(event) => this._onLayout(event)}>\r\n                    {height > 0 && width > 0 && (\r\n                        <Svg style={{ height, width }}>\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                            {areas.map((bar, index) => {\r\n                                const keyIndex = index % data.length\r\n                                const key = `${keyIndex}-${bar.key}`\r\n                                const { svg } = data[keyIndex][bar.key]\r\n\r\n                                return (\r\n                                    <Path\r\n                                        key={key}\r\n                                        fill={bar.color}\r\n                                        {...svg}\r\n                                        d={bar.path}\r\n                                        animate={animate}\r\n                                        animationDuration={animationDuration}\r\n                                    />\r\n                                )\r\n                            })}\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && !child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                        </Svg>\r\n                    )}\r\n                </View>\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nBarChart.propTypes = {\r\n    data: PropTypes.arrayOf(PropTypes.object),\r\n    keys: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n    colors: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n    offset: PropTypes.func,\r\n    order: PropTypes.func,\r\n    style: PropTypes.any,\r\n    spacingInner: PropTypes.number,\r\n    spacingOuter: PropTypes.number,\r\n    animate: PropTypes.bool,\r\n    animationDuration: PropTypes.number,\r\n    contentInset: PropTypes.shape({\r\n        top: PropTypes.number,\r\n        left: PropTypes.number,\r\n        right: PropTypes.number,\r\n        bottom: PropTypes.number,\r\n    }),\r\n    gridMin: PropTypes.number,\r\n    gridMax: PropTypes.number,\r\n    valueAccessor: PropTypes.func,\r\n}\r\n\r\nBarChart.defaultProps = {\r\n    spacingInner: 0.05,\r\n    spacingOuter: 0.05,\r\n    offset: shape.stackOffsetNone,\r\n    order: shape.stackOrderNone,\r\n    width: 100,\r\n    height: 100,\r\n    showZeroAxis: true,\r\n    contentInset: {},\r\n    numberOfTicks: 10,\r\n    showGrid: true,\r\n    valueAccessor: ({ item, key }) => item[key],\r\n}\r\n\r\nexport default BarChart\r\n","import React, { PureComponent } from 'react'\r\nimport { View } from 'react-native'\r\nimport PropTypes from 'prop-types'\r\nimport Svg from 'react-native-svg'\r\nimport * as array from 'd3-array'\r\nimport * as scale from 'd3-scale'\r\nimport * as shape from 'd3-shape'\r\nimport Path from '../animated-path'\r\n\r\nclass StackedBarGrouped extends PureComponent {\r\n    state = {\r\n        width: 0,\r\n        height: 0,\r\n    }\r\n\r\n    _onLayout(event) {\r\n        const {\r\n            nativeEvent: {\r\n                layout: { height, width },\r\n            },\r\n        } = event\r\n        this.setState({ height, width })\r\n    }\r\n\r\n    calcXScale(domain) {\r\n        const {\r\n            horizontal,\r\n            contentInset: { left = 0, right = 0 },\r\n            spacingInner,\r\n            spacingOuter,\r\n        } = this.props\r\n\r\n        const { width } = this.state\r\n\r\n        if (horizontal) {\r\n            return scale\r\n                .scaleLinear()\r\n                .domain(domain)\r\n                .range([left, width - right])\r\n        }\r\n\r\n        return scale\r\n            .scaleBand()\r\n            .domain(domain)\r\n            .range([left, width - right])\r\n            .paddingInner([spacingInner])\r\n            .paddingOuter([spacingOuter])\r\n    }\r\n\r\n    calcYScale(domain) {\r\n        const {\r\n            horizontal,\r\n            contentInset: { top = 0, bottom = 0 },\r\n            spacingInner,\r\n            spacingOuter,\r\n        } = this.props\r\n\r\n        const { height } = this.state\r\n\r\n        if (horizontal) {\r\n            return scale\r\n                .scaleBand()\r\n                .domain(domain)\r\n                .range([top, height - bottom])\r\n                .paddingInner([spacingInner])\r\n                .paddingOuter([spacingOuter])\r\n        }\r\n\r\n        return scale\r\n            .scaleLinear()\r\n            .domain(domain)\r\n            .range([height - bottom, top])\r\n    }\r\n\r\n    calcAreas(x, y, series) {\r\n        const { horizontal, colors, keys, data, borderRadius: initialBorderRadius, innerBarSpace } = this.props\r\n        let areas\r\n        let barWidth\r\n\r\n        if (horizontal) {\r\n            barWidth = y.bandwidth() / data.length\r\n\r\n            areas = series.map((stack, stackIndex) => {\r\n                return stack.map((serie, keyIndex) => {\r\n                    return serie.map((entry, entryIndex) => {\r\n                        const leftMargin = series.length > 1 ? innerBarSpace / 2 : 0\r\n\r\n                        const path = shape\r\n                            .area()\r\n                            .x0((d) => x(d[0]))\r\n                            .x1((d) => x(d[1]))\r\n                            .y(\r\n                                (d, _index) =>\r\n                                    (_index === 0\r\n                                        ? y(entryIndex) + barWidth * stackIndex + leftMargin\r\n                                        : y(entryIndex) + barWidth + barWidth * stackIndex) - leftMargin\r\n                            )\r\n                            .defined((d) => !isNaN(d[0]) && !isNaN(d[1]))([entry, entry])\r\n\r\n                        return {\r\n                            path,\r\n                            color: colors[stackIndex][keyIndex],\r\n                            key: keys[stackIndex][keyIndex],\r\n                        }\r\n                    })\r\n                })\r\n            })\r\n        } else {\r\n            barWidth = x.bandwidth() / data.length\r\n\r\n            areas = series.map((stack, stackIndex) => {\r\n                return stack.map((serie, keyIndex) => {\r\n                    return serie.map((entry, entryIndex) => {\r\n                        const leftMargin = series.length > 1 ? innerBarSpace / 2 : 0\r\n                        const x0 = x(entryIndex) + barWidth * stackIndex + leftMargin\r\n                        const x1 = x(entryIndex) + barWidth + barWidth * stackIndex - leftMargin\r\n                        const y0 = y(entry[1])\r\n                        const y1 = y(entry[0])\r\n                        const barHeight = y1 - y0\r\n                        const borderRadius = initialBorderRadius * 2 > barHeight ? barHeight / 2 : initialBorderRadius\r\n                        const showTopBorder = keyIndex === stack.length - 1\r\n                        const showBottomBorder = keyIndex === 0\r\n                        const commands = this.coordinatesToPathCommands(\r\n                            x0,\r\n                            y0,\r\n                            x1,\r\n                            y1,\r\n                            borderRadius,\r\n                            showTopBorder,\r\n                            showBottomBorder\r\n                        )\r\n\r\n                        return {\r\n                            path: this.commandsToSvgPath(commands),\r\n                            color: colors[stackIndex][keyIndex],\r\n                            key: keys[stackIndex][keyIndex],\r\n                        }\r\n                    })\r\n                })\r\n            })\r\n        }\r\n\r\n        return array.merge(areas)\r\n    }\r\n\r\n    coordinatesToPathCommands = (x0, y0, x1, y1, borderRadius, showTopBorder, showBottomBorder) => {\r\n        const commands = []\r\n        commands.push({ marker: 'M', values: [x0, y0] })\r\n\r\n        if (showTopBorder) {\r\n            const topLeft1 = [x0 + borderRadius, y0]\r\n            const topLeft2 = [x0, y0 + borderRadius]\r\n            commands.push({ marker: 'L', values: topLeft1 })\r\n            commands.push({\r\n                marker: 'C',\r\n                values: [...topLeft1, x0, y0, ...topLeft2],\r\n            })\r\n            commands.push({ marker: 'L', values: topLeft2 })\r\n        } else {\r\n            commands.push({ marker: 'L', values: [x0, y0] })\r\n        }\r\n\r\n        if (showBottomBorder) {\r\n            const bottomLeft1 = [x0, y1 - borderRadius]\r\n            const bottomLeft2 = [x0 + borderRadius, y1]\r\n            commands.push({ marker: 'L', values: bottomLeft1 })\r\n            commands.push({\r\n                marker: 'C',\r\n                values: [...bottomLeft1, x0, y1, ...bottomLeft2],\r\n            })\r\n            commands.push({ marker: 'L', values: bottomLeft2 })\r\n            const bottomRight1 = [x1 - borderRadius, y1]\r\n            const bottomRight2 = [x1, y1 - borderRadius]\r\n            commands.push({ marker: 'L', values: bottomRight1 })\r\n            commands.push({\r\n                marker: 'C',\r\n                values: [...bottomRight1, x1, y1, ...bottomRight2],\r\n            })\r\n            commands.push({ marker: 'L', values: bottomRight2 })\r\n        } else {\r\n            commands.push({ marker: 'L', values: [x0, y1] })\r\n            commands.push({ marker: 'L', values: [x1, y1] })\r\n        }\r\n\r\n        if (showTopBorder) {\r\n            const topRight1 = [x1, y0 + borderRadius]\r\n            const topRight2 = [x1 - borderRadius, y0]\r\n\r\n            commands.push({ marker: 'L', values: topRight1 })\r\n            commands.push({\r\n                marker: 'C',\r\n                values: [...topRight1, x1, y0, ...topRight2],\r\n            })\r\n            commands.push({ marker: 'L', values: topRight2 })\r\n        } else {\r\n            commands.push({ marker: 'L', values: [x1, y0] })\r\n        }\r\n\r\n        commands.push({ marker: 'Z', values: [] })\r\n\r\n        return commands\r\n    }\r\n\r\n    commandsToSvgPath = (commands) =>\r\n        commands\r\n            .map((command) => `${command.marker} ${command.values.join(',')}`)\r\n            .join(' ')\r\n            .trim()\r\n\r\n    calcExtent(values) {\r\n        const { gridMax, gridMin } = this.props\r\n\r\n        // One more merge for stacked groups\r\n        const mergedValues = array.merge(values)\r\n\r\n        return array.extent([...mergedValues, gridMin, gridMax])\r\n    }\r\n\r\n    calcIndexes() {\r\n        const { data } = this.props\r\n\r\n        // Must return an array with indexes for the number of groups to be shown\r\n        return data[0].data.map((_, index) => index)\r\n    }\r\n\r\n    getSeries() {\r\n        const { data, keys, offset, order, valueAccessor } = this.props\r\n\r\n        return data.map((obj, index) =>\r\n            shape\r\n                .stack()\r\n                .keys(keys[index])\r\n                .value((item, key) => valueAccessor({ item, key }))\r\n                .order(order)\r\n                .offset(offset)(obj.data)\r\n        )\r\n    }\r\n\r\n    render() {\r\n        const { data, animate, animationDuration, style, numberOfTicks, children, horizontal } = this.props\r\n\r\n        const { height, width } = this.state\r\n\r\n        if (data.length === 0) {\r\n            return <View style={style} />\r\n        }\r\n\r\n        const series = this.getSeries()\r\n\r\n        //double merge arrays to extract just the values\r\n        const values = array.merge(array.merge(series))\r\n        const indexes = this.calcIndexes(values)\r\n\r\n        const extent = this.calcExtent(values)\r\n        const ticks = array.ticks(extent[0], extent[1], numberOfTicks)\r\n\r\n        const xDomain = horizontal ? extent : indexes\r\n        const yDomain = horizontal ? indexes : extent\r\n\r\n        const x = this.calcXScale(xDomain)\r\n        const y = this.calcYScale(yDomain)\r\n\r\n        const bandwidth = horizontal ? y.bandwidth() : x.bandwidth()\r\n\r\n        const stacks = this.calcAreas(x, y, series)\r\n\r\n        const extraProps = {\r\n            x,\r\n            y,\r\n            width,\r\n            height,\r\n            ticks,\r\n            data,\r\n            bandwidth,\r\n        }\r\n\r\n        return (\r\n            <View style={style}>\r\n                <View style={{ flex: 1 }} onLayout={(event) => this._onLayout(event)}>\r\n                    {height > 0 && width > 0 && (\r\n                        <Svg style={{ height, width }}>\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                            {stacks.map((areas, indexStack) => {\r\n                                const areaIndex = indexStack % data.length\r\n\r\n                                return areas.map((bar, indexArea) => {\r\n                                    const keyIndex = indexArea % data[areaIndex].data.length\r\n                                    const key = `${areaIndex}-${keyIndex}-${bar.key}`\r\n\r\n                                    const { svg } = data[areaIndex].data[keyIndex][bar.key]\r\n\r\n                                    return (\r\n                                        <Path\r\n                                            key={key}\r\n                                            fill={bar.color}\r\n                                            {...svg}\r\n                                            d={bar.path}\r\n                                            animate={animate}\r\n                                            animationDuration={animationDuration}\r\n                                        />\r\n                                    )\r\n                                })\r\n                            })}\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && !child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                        </Svg>\r\n                    )}\r\n                </View>\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nStackedBarGrouped.propTypes = {\r\n    data: PropTypes.arrayOf(PropTypes.object),\r\n    keys: PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.string)).isRequired,\r\n    colors: PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.string)).isRequired,\r\n    offset: PropTypes.func,\r\n    order: PropTypes.func,\r\n    style: PropTypes.any,\r\n    spacingInner: PropTypes.number,\r\n    spacingOuter: PropTypes.number,\r\n    animate: PropTypes.bool,\r\n    animationDuration: PropTypes.number,\r\n    contentInset: PropTypes.shape({\r\n        top: PropTypes.number,\r\n        left: PropTypes.number,\r\n        right: PropTypes.number,\r\n        bottom: PropTypes.number,\r\n    }),\r\n    gridMin: PropTypes.number,\r\n    gridMax: PropTypes.number,\r\n    valueAccessor: PropTypes.func,\r\n    borderRadius: PropTypes.number,\r\n    innerBarSpace: PropTypes.number,\r\n}\r\n\r\nStackedBarGrouped.defaultProps = {\r\n    spacingInner: 0.05,\r\n    spacingOuter: 0.05,\r\n    offset: shape.stackOffsetNone,\r\n    order: shape.stackOrderNone,\r\n    width: 100,\r\n    height: 100,\r\n    showZeroAxis: true,\r\n    contentInset: {},\r\n    numberOfTicks: 10,\r\n    showGrid: true,\r\n    valueAccessor: ({ item, key }) => item[key],\r\n    borderRadius: 0,\r\n    innerBarSpace: 0,\r\n}\r\n\r\nexport default StackedBarGrouped\r\n","import * as shape from 'd3-shape'\r\nimport Chart from '../chart/chart'\r\n\r\nclass LineChart extends Chart {\r\n    createPaths({ data, x, y }) {\r\n        const { curve } = this.props\r\n\r\n        const line = shape\r\n            .line()\r\n            .x((d) => x(d.x))\r\n            .y((d) => y(d.y))\r\n            .defined((item) => typeof item.y === 'number')\r\n            .curve(curve)(data)\r\n\r\n        return {\r\n            path: line,\r\n            line,\r\n        }\r\n    }\r\n}\r\n\r\nLineChart.propTypes = {\r\n    ...Chart.propTypes,\r\n}\r\n\r\nLineChart.defaultProps = {\r\n    ...Chart.defaultProps,\r\n}\r\n\r\nexport default LineChart\r\n","import * as array from 'd3-array'\r\nimport PropTypes from 'prop-types'\r\nimport React, { PureComponent } from 'react'\r\nimport { View } from 'react-native'\r\nimport Svg from 'react-native-svg'\r\nimport Path from '../animated-path'\r\nimport Chart from './chart'\r\n\r\nclass ChartGrouped extends PureComponent {\r\n    state = {\r\n        width: 0,\r\n        height: 0,\r\n    }\r\n\r\n    _onLayout(event) {\r\n        const {\r\n            nativeEvent: {\r\n                layout: { height, width },\r\n            },\r\n        } = event\r\n        this.setState({ height, width })\r\n    }\r\n\r\n    createPaths() {\r\n        throw 'Extending \"ChartGrouped\" requires you to override \"createPaths'\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            data,\r\n            xAccessor,\r\n            yAccessor,\r\n            yScale,\r\n            xScale,\r\n            style,\r\n            animate,\r\n            animationDuration,\r\n            numberOfTicks,\r\n            contentInset: { top = 0, bottom = 0, left = 0, right = 0 },\r\n            gridMax,\r\n            gridMin,\r\n            clampX,\r\n            clampY,\r\n            svg,\r\n            children,\r\n        } = this.props\r\n\r\n        const { width, height } = this.state\r\n\r\n        if (data.length === 0) {\r\n            return <View style={style} />\r\n        }\r\n\r\n        const mappedData = data.map((dataArray) =>\r\n            dataArray.data.map((item, index) => ({\r\n                y: yAccessor({ item, index }),\r\n                x: xAccessor({ item, index }),\r\n            }))\r\n        )\r\n\r\n        const yValues = array.merge(mappedData).map((item) => item.y)\r\n        const xValues = array.merge(mappedData).map((item) => item.x)\r\n\r\n        const yExtent = array.extent([...yValues, gridMin, gridMax])\r\n        const xExtent = array.extent([...xValues])\r\n\r\n        const { yMin = yExtent[0], yMax = yExtent[1], xMin = xExtent[0], xMax = xExtent[1] } = this.props\r\n\r\n        //invert range to support svg coordinate system\r\n        const y = yScale()\r\n            .domain([yMin, yMax])\r\n            .range([height - bottom, top])\r\n            .clamp(clampY)\r\n\r\n        const x = xScale()\r\n            .domain([xMin, xMax])\r\n            .range([left, width - right])\r\n            .clamp(clampX)\r\n\r\n        const paths = this.createPaths({\r\n            data: mappedData,\r\n            x,\r\n            y,\r\n        })\r\n\r\n        const ticks = y.ticks(numberOfTicks)\r\n\r\n        const extraProps = {\r\n            x,\r\n            y,\r\n            data,\r\n            ticks,\r\n            width,\r\n            height,\r\n            ...paths,\r\n        }\r\n\r\n        return (\r\n            <View style={style}>\r\n                <View style={{ flex: 1 }} onLayout={(event) => this._onLayout(event)}>\r\n                    {height > 0 && width > 0 && (\r\n                        <Svg style={{ height, width }}>\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                            {paths.path.map((path, index) => {\r\n                                const { svg: pathSvg } = data[index]\r\n                                const key = path + '-' + index\r\n                                return (\r\n                                    <Path\r\n                                        key={key}\r\n                                        fill={'none'}\r\n                                        {...svg}\r\n                                        {...pathSvg}\r\n                                        d={path}\r\n                                        animate={animate}\r\n                                        animationDuration={animationDuration}\r\n                                    />\r\n                                )\r\n                            })}\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && !child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                        </Svg>\r\n                    )}\r\n                </View>\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nChartGrouped.propTypes = {\r\n    ...Chart.propTypes,\r\n    data: PropTypes.arrayOf(\r\n        PropTypes.shape({\r\n            data: PropTypes.oneOfType([\r\n                PropTypes.arrayOf(PropTypes.object),\r\n                PropTypes.arrayOf(PropTypes.number),\r\n                PropTypes.arrayOf(PropTypes.array),\r\n            ]),\r\n            svg: PropTypes.object,\r\n        })\r\n    ).isRequired,\r\n}\r\n\r\nChartGrouped.defaultProps = {\r\n    ...Chart.defaultProps,\r\n}\r\n\r\nexport default ChartGrouped\r\n","import * as shape from 'd3-shape'\r\nimport ChartGrouped from '../chart/chart-grouped'\r\n\r\nclass LineChartGrouped extends ChartGrouped {\r\n    createPaths({ data, x, y }) {\r\n        const { curve } = this.props\r\n\r\n        const lines = data.map((line) =>\r\n            shape\r\n                .line()\r\n                .x((d) => x(d.x))\r\n                .y((d) => y(d.y))\r\n                .defined((item) => typeof item.y === 'number')\r\n                .curve(curve)(line)\r\n        )\r\n\r\n        return {\r\n            path: lines,\r\n            lines,\r\n        }\r\n    }\r\n}\r\n\r\nLineChartGrouped.propTypes = {\r\n    ...ChartGrouped.propTypes,\r\n}\r\n\r\nLineChartGrouped.defaultProps = {\r\n    ...ChartGrouped.defaultProps,\r\n}\r\n\r\nexport default LineChartGrouped\r\n","import React from 'react'\r\nimport LineChart from './line-chart'\r\nimport LineChartGrouped from './line-chart-grouped'\r\n\r\nconst LineChartGate = (props) => {\r\n    const { data } = props\r\n\r\n    if (data[0] && data[0].hasOwnProperty('data')) {\r\n        return <LineChartGrouped {...props} />\r\n    }\r\n\r\n    return <LineChart {...props} />\r\n}\r\n\r\nexport default LineChartGate\r\n","import React, { PureComponent } from 'react'\r\nimport { View } from 'react-native'\r\nimport PropTypes from 'prop-types'\r\nimport * as shape from 'd3-shape'\r\nimport Path from './animated-path'\r\nimport Svg, { G } from 'react-native-svg'\r\n\r\nclass ProgressCircle extends PureComponent {\r\n    state = {\r\n        height: 0,\r\n        width: 0,\r\n    }\r\n\r\n    _onLayout(event) {\r\n        const {\r\n            nativeEvent: {\r\n                layout: { height, width },\r\n            },\r\n        } = event\r\n        this.setState({ height, width })\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            style,\r\n            progressColor,\r\n            backgroundColor,\r\n            strokeWidth,\r\n            startAngle,\r\n            endAngle,\r\n            animate,\r\n            animateDuration,\r\n            children,\r\n            cornerRadius,\r\n        } = this.props\r\n\r\n        let { progress } = this.props\r\n\r\n        const { height, width } = this.state\r\n\r\n        const outerDiameter = Math.min(width, height)\r\n\r\n        if (!isFinite(progress) || isNaN(progress)) {\r\n            progress = 0\r\n        }\r\n\r\n        // important order to have progress render over \"rest\"\r\n        const data = [\r\n            {\r\n                key: 'rest',\r\n                value: 1 - progress,\r\n                color: backgroundColor,\r\n            },\r\n            {\r\n                key: 'progress',\r\n                value: progress,\r\n                color: progressColor,\r\n            },\r\n        ]\r\n\r\n        const pieSlices = shape\r\n            .pie()\r\n            .value((d) => d.value)\r\n            .sort((a) => (a.key === 'rest' ? 1 : -1))\r\n            .startAngle(startAngle)\r\n            .endAngle(endAngle)(data)\r\n\r\n        const arcs = pieSlices.map((slice, index) => ({\r\n            ...data[index],\r\n            ...slice,\r\n            path: shape\r\n                .arc()\r\n                .outerRadius(outerDiameter / 2) // Radius of the pie\r\n                .innerRadius(outerDiameter / 2 - strokeWidth) // Inner radius: to create a donut or pie\r\n                .startAngle(index === 0 ? startAngle : slice.startAngle)\r\n                .endAngle(index === 0 ? endAngle : slice.endAngle)\r\n                .cornerRadius(cornerRadius)(),\r\n        }))\r\n\r\n        const extraProps = {\r\n            width,\r\n            height,\r\n        }\r\n\r\n        return (\r\n            <View style={style} onLayout={(event) => this._onLayout(event)}>\r\n                {height > 0 && width > 0 && (\r\n                    <Svg style={{ height, width }}>\r\n                        {/* center the progress circle*/}\r\n                        <G x={width / 2} y={height / 2}>\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                            {arcs.map((shape, index) => {\r\n                                return (\r\n                                    <Path\r\n                                        key={index}\r\n                                        fill={shape.color}\r\n                                        d={shape.path}\r\n                                        animate={animate}\r\n                                        animationDuration={animateDuration}\r\n                                    />\r\n                                )\r\n                            })}\r\n                            {React.Children.map(children, (child) => {\r\n                                if (child && !child.props.belowChart) {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                }\r\n                                return null\r\n                            })}\r\n                        </G>\r\n                    </Svg>\r\n                )}\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nProgressCircle.propTypes = {\r\n    progress: PropTypes.number.isRequired,\r\n    style: PropTypes.any,\r\n    progressColor: PropTypes.any,\r\n    backgroundColor: PropTypes.any,\r\n    strokeWidth: PropTypes.number,\r\n    startAngle: PropTypes.number,\r\n    endAngle: PropTypes.number,\r\n    animate: PropTypes.bool,\r\n    cornerRadius: PropTypes.number,\r\n    animateDuration: PropTypes.number,\r\n}\r\n\r\nProgressCircle.defaultProps = {\r\n    progressColor: 'black',\r\n    backgroundColor: '#ECECEC',\r\n    strokeWidth: 5,\r\n    startAngle: 0,\r\n    endAngle: Math.PI * 2,\r\n    cornerRadius: 45,\r\n}\r\n\r\nexport default ProgressCircle\r\n","import React, { PureComponent } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Text, View } from 'react-native'\r\nimport * as d3Scale from 'd3-scale'\r\nimport * as array from 'd3-array'\r\nimport Svg, { G, Text as SVGText } from 'react-native-svg'\r\n\r\nclass XAxis extends PureComponent {\r\n    state = {\r\n        width: 0,\r\n        height: 0,\r\n    }\r\n\r\n    _onLayout(event) {\r\n        const {\r\n            nativeEvent: {\r\n                layout: { width, height },\r\n            },\r\n        } = event\r\n\r\n        if (width !== this.state.width) {\r\n            this.setState({ width, height })\r\n        }\r\n    }\r\n\r\n    _getX(domain) {\r\n        const {\r\n            scale,\r\n            spacingInner,\r\n            spacingOuter,\r\n            contentInset: { left = 0, right = 0 },\r\n        } = this.props\r\n\r\n        const { width } = this.state\r\n\r\n        const x = scale()\r\n            .domain(domain)\r\n            .range([left, width - right])\r\n\r\n        if (scale === d3Scale.scaleBand) {\r\n            x.paddingInner([spacingInner]).paddingOuter([spacingOuter])\r\n\r\n            //add half a bar to center label\r\n            return (value) => x(value) + x.bandwidth() / 2\r\n        }\r\n\r\n        return x\r\n    }\r\n\r\n    render() {\r\n        const { style, scale, data, xAccessor, formatLabel, numberOfTicks, svg, children, min, max } = this.props\r\n\r\n        const { height, width } = this.state\r\n\r\n        if (data.length === 0) {\r\n            return <View style={style} />\r\n        }\r\n\r\n        const values = data.map((item, index) => xAccessor({ item, index }))\r\n        const extent = array.extent(values)\r\n        const domain = scale === d3Scale.scaleBand ? values : [min || extent[0], max || extent[1]]\r\n\r\n        const x = this._getX(domain)\r\n        const ticks = numberOfTicks ? x.ticks(numberOfTicks) : values\r\n\r\n        const extraProps = {\r\n            x,\r\n            ticks,\r\n            width,\r\n            height,\r\n            formatLabel,\r\n        }\r\n\r\n        return (\r\n            <View style={style}>\r\n                <View style={{ flexGrow: 1 }} onLayout={(event) => this._onLayout(event)}>\r\n                    {/*invisible text to allow for parent resizing*/}\r\n                    <Text\r\n                        style={{\r\n                            opacity: 0,\r\n                            fontSize: svg.fontSize,\r\n                            fontFamily: svg.fontFamily,\r\n                            fontWeight: svg.fontWeight,\r\n                        }}\r\n                    >\r\n                        {formatLabel(ticks[0], 0)}\r\n                    </Text>\r\n                    {height > 0 && width > 0 && (\r\n                        <Svg\r\n                            style={{\r\n                                position: 'absolute',\r\n                                top: 0,\r\n                                left: 0,\r\n                                height: height,\r\n                                width: width,\r\n                            }}\r\n                        >\r\n                            <G>\r\n                                {React.Children.map(children, (child) => {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                })}\r\n                                {// don't render labels if width isn't measured yet,\r\n                                // causes rendering issues\r\n                                width > 0 &&\r\n                                    ticks.map((value, index) => {\r\n                                        const { svg: valueSvg = {} } = data[index] || {}\r\n\r\n                                        return (\r\n                                            <SVGText\r\n                                                textAnchor={'middle'}\r\n                                                originX={x(value)}\r\n                                                alignmentBaseline={'hanging'}\r\n                                                {...svg}\r\n                                                {...valueSvg}\r\n                                                key={index}\r\n                                                y={0}\r\n                                                x={x(value)}\r\n                                                \r\n                                            >\r\n                                                {formatLabel(value, index)}\r\n                                            </SVGText>\r\n                                        )\r\n                                    })}\r\n                            </G>\r\n                        </Svg>\r\n                    )}\r\n                </View>\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nXAxis.propTypes = {\r\n    data: PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.number, PropTypes.object])).isRequired,\r\n    spacingInner: PropTypes.number,\r\n    spacingOuter: PropTypes.number,\r\n    formatLabel: PropTypes.func,\r\n    contentInset: PropTypes.shape({\r\n        left: PropTypes.number,\r\n        right: PropTypes.number,\r\n    }),\r\n    scale: PropTypes.func,\r\n    numberOfTicks: PropTypes.number,\r\n    xAccessor: PropTypes.func,\r\n    svg: PropTypes.object,\r\n    min: PropTypes.any,\r\n    max: PropTypes.any,\r\n}\r\n\r\nXAxis.defaultProps = {\r\n    spacingInner: 0.05,\r\n    spacingOuter: 0.05,\r\n    contentInset: {},\r\n    svg: {},\r\n    xAccessor: ({ index }) => index,\r\n    scale: d3Scale.scaleLinear,\r\n    formatLabel: (value) => value,\r\n}\r\n\r\nexport default XAxis\r\n","import React, { PureComponent } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Text, View } from 'react-native'\r\nimport { Svg, G, Text as SVGText } from 'react-native-svg'\r\nimport * as d3Scale from 'd3-scale'\r\nimport * as array from 'd3-array'\r\n\r\nclass YAxis extends PureComponent {\r\n    state = {\r\n        height: 0,\r\n        width: 0,\r\n    }\r\n\r\n    _onLayout(event) {\r\n        const {\r\n            nativeEvent: {\r\n                layout: { height, width },\r\n            },\r\n        } = event\r\n        this.setState({ height, width })\r\n    }\r\n\r\n    getY(domain) {\r\n        const {\r\n            scale,\r\n            spacingInner,\r\n            spacingOuter,\r\n            contentInset: { top = 0, bottom = 0 },\r\n        } = this.props\r\n\r\n        const { height } = this.state\r\n\r\n        const y = scale()\r\n            .domain(domain)\r\n            .range([height - bottom, top])\r\n\r\n        if (scale === d3Scale.scaleBand) {\r\n            // use index as domain identifier instead of value since\r\n            // same value can occur at several places in dataPoints\r\n            y\r\n                // set range top to bottom - we are not sorting on values in scaleBand\r\n                .range([top, height - bottom])\r\n                .paddingInner([spacingInner])\r\n                .paddingOuter([spacingOuter])\r\n\r\n            //add half a bar to center label\r\n            return (value) => y(value) + y.bandwidth() / 2\r\n        }\r\n\r\n        return y\r\n    }\r\n\r\n    render() {\r\n        const { style, data, scale, yAccessor, numberOfTicks, formatLabel, svg, children } = this.props\r\n\r\n        const { height, width } = this.state\r\n\r\n        if (data.length === 0) {\r\n            return <View style={style} />\r\n        }\r\n\r\n        const values = data.map((item, index) => yAccessor({ item, index }))\r\n\r\n        const extent = array.extent(values)\r\n\r\n        const { min = extent[0], max = extent[1] } = this.props\r\n\r\n        const domain = scale === d3Scale.scaleBand ? values : [min, max]\r\n\r\n        //invert range to support svg coordinate system\r\n        const y = this.getY(domain)\r\n\r\n        const ticks = scale === d3Scale.scaleBand ? values : y.ticks(numberOfTicks)\r\n\r\n        const longestValue = ticks\r\n            .map((value, index) => formatLabel(value, index))\r\n            .reduce((prev, curr) => (prev.toString().length > curr.toString().length ? prev : curr), 0)\r\n\r\n        const extraProps = {\r\n            y,\r\n            ticks,\r\n            width,\r\n            height,\r\n            formatLabel,\r\n        }\r\n\r\n        return (\r\n            <View style={[style]}>\r\n                <View style={{ flexGrow: 1 }} onLayout={(event) => this._onLayout(event)}>\r\n                    {/*invisible text to allow for parent resizing*/}\r\n                    <Text\r\n                        style={{\r\n                            opacity: 0,\r\n                            fontSize: svg.fontSize,\r\n                            fontFamily: svg.fontFamily,\r\n                            fontWeight: svg.fontWeight,\r\n                        }}\r\n                    >\r\n                        {longestValue}\r\n                    </Text>\r\n                    {height > 0 && width > 0 && (\r\n                        <Svg\r\n                            style={{\r\n                                position: 'absolute',\r\n                                top:0,\r\n                                left: 0,\r\n                                height: height,\r\n                                width: width,\r\n                            }}\r\n                        >\r\n                            <G>\r\n                                {React.Children.map(children, (child) => {\r\n                                    return React.cloneElement(child, extraProps)\r\n                                })}\r\n                                {// don't render labels if width isn't measured yet,\r\n                                // causes rendering issues\r\n                                height > 0 &&\r\n                                    ticks.map((value, index) => {\r\n                                        return (\r\n                                            <SVGText\r\n                                                originY={y(value)}\r\n                                                textAnchor={'middle'}\r\n                                                x={'50%'}\r\n                                                alignmentBaseline={'middle'}\r\n                                                {...svg}\r\n                                                key={y(value)}\r\n                                                y={y(value)}\r\n                                                //opacity={index % 2 ? 0 : 1}\r\n                                            >\r\n                                                {formatLabel(value, index, ticks.length)}\r\n                                            </SVGText>\r\n                                        )\r\n                                    })}\r\n                            </G>\r\n                        </Svg>\r\n                    )}\r\n                </View>\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nYAxis.propTypes = {\r\n    data: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.object), PropTypes.arrayOf(PropTypes.number)]).isRequired,\r\n    svg: PropTypes.object,\r\n    style: PropTypes.any,\r\n    numberOfTicks: PropTypes.number,\r\n    formatLabel: PropTypes.func,\r\n    contentInset: PropTypes.shape({\r\n        top: PropTypes.number,\r\n        bottom: PropTypes.number,\r\n    }),\r\n    min: PropTypes.number,\r\n    max: PropTypes.number,\r\n    yAccessor: PropTypes.func,\r\n    scale: PropTypes.func,\r\n    spacingInner: PropTypes.number,\r\n    spacingOuter: PropTypes.number,\r\n}\r\n\r\nYAxis.defaultProps = {\r\n    numberOfTicks: 8,\r\n    spacingInner: 0.05,\r\n    spacingOuter: 0.05,\r\n    contentInset: {},\r\n    svg: {},\r\n    scale: d3Scale.scaleLinear,\r\n    formatLabel: (value) => value && value.toString(),\r\n    yAccessor: ({ item }) => item,\r\n}\r\n\r\nexport default YAxis\r\n","import React from 'react'\r\nimport { Line } from 'react-native-svg'\r\n\r\nclass HorizontalLine extends React.Component {\r\n    render() {\r\n        const { y, value, ...other } = this.props\r\n        return <Line x1={'0%'} x2={'100%'} y1={y(value)} y2={y(value)} {...other} />\r\n    }\r\n}\r\n\r\nHorizontalLine.defaultProps = {\r\n    stroke: 'black',\r\n}\r\n\r\nexport default HorizontalLine\r\n","import PropTypes from 'prop-types'\r\nimport React from 'react'\r\nimport { Circle } from 'react-native-svg'\r\n\r\nconst Point = ({ x, y, value, index, radius, color }) => {\r\n    if (isNaN(value)) {\r\n        return <Circle />\r\n    }\r\n\r\n    return <Circle cx={x(index)} cy={y(value)} r={radius} stroke={color} fill={'white'} />\r\n}\r\n\r\nPoint.propTypes = {\r\n    x: PropTypes.func.isRequired,\r\n    y: PropTypes.func.isRequired,\r\n    value: PropTypes.number,\r\n    radius: PropTypes.number,\r\n    index: PropTypes.number,\r\n    color: PropTypes.string,\r\n}\r\n\r\nPoint.defaultProps = {\r\n    radius: 4,\r\n    color: 'black',\r\n}\r\n\r\nexport default Point\r\n","import PropTypes from 'prop-types'\r\nimport React from 'react'\r\nimport { Circle, G, Line, Rect, Text } from 'react-native-svg'\r\n\r\nconst Tooltip = ({ x, y, value, index, height, text, stroke, pointStroke }) => {\r\n    return (\r\n        <G>\r\n            <Line x1={x(index)} y1={height} x2={x(index)} y2={20} stroke={stroke} />\r\n            <Circle cx={x(index)} cy={y(value)} r={4} stroke={pointStroke} strokeWidth={2} fill={'white'} />\r\n            <G x={x(index) < 40 ? 40 : x(index)} y={10}>\r\n                <Rect x={-40} y={1} width={80} height={20} fill={'rgba(0, 0, 0, 0.2)'} rx={2} ry={2} />\r\n                <Rect x={-40} y={0} width={80} height={20} fill={'white'} rx={2} ry={2} />\r\n                <Text fontSize='12' textAnchor='middle'>\r\n                    {text}\r\n                </Text>\r\n            </G>\r\n        </G>\r\n    )\r\n}\r\n\r\nTooltip.propTypes = {\r\n    x: PropTypes.func.isRequired,\r\n    y: PropTypes.func.isRequired,\r\n    value: PropTypes.number,\r\n    index: PropTypes.number,\r\n    height: PropTypes.number,\r\n    stroke: PropTypes.string,\r\n    pointStroke: PropTypes.string,\r\n    text: PropTypes.string,\r\n}\r\n\r\nexport default Tooltip\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { G, Line } from 'react-native-svg'\r\n \r\nconst Horizontal = ({ ticks = [], y, svg }) => {\r\n    return (\r\n        <G>\r\n            {ticks.map((tick) => (\r\n                <Line\r\n                    key={tick}\r\n                    x1={'0%'}\r\n                    x2={'100%'}\r\n                    y1={y(tick)}\r\n                    y2={y(tick)}\r\n                    strokeWidth={1}\r\n                    stroke={'rgba(0,0,0,0.2)'}\r\n                    {...svg}\r\n                />\r\n            ))}\r\n        </G>\r\n    )\r\n}\r\n\r\nconst Vertical = ({ ticks = [], x, svg }) => {\r\n    return (\r\n        <G>\r\n            {ticks.map((tick, index) => (\r\n                <Line\r\n                    key={index}\r\n                    y1={'0%'}\r\n                    y2={'100%'}\r\n                    x1={x(tick)}\r\n                    x2={x(tick)}\r\n                    strokeWidth={1}\r\n                    stroke={'rgba(0,0,0,0.2)'}\r\n                    {...svg}\r\n                />\r\n            ))}\r\n        </G>\r\n    )\r\n}\r\n\r\nconst Both = (props) => {\r\n    return (\r\n        <G>\r\n            <Horizontal {...props} />\r\n            <Vertical {...props} />\r\n        </G>\r\n    )\r\n}\r\n\r\nVertical.propTypes = {\r\n    x: PropTypes.func,\r\n    dataPoints: PropTypes.array,\r\n    svg: PropTypes.object,\r\n}\r\n\r\nHorizontal.propTypes = {\r\n    y: PropTypes.func,\r\n    ticks: PropTypes.array,\r\n}\r\n\r\nBoth.propTypes = {\r\n    ...Vertical.propTypes,\r\n    ...Horizontal.propTypes,\r\n}\r\n\r\nconst Direction = {\r\n    VERTICAL: 'VERTICAL',\r\n    HORIZONTAL: 'HORIZONTAL',\r\n    BOTH: 'BOTH',\r\n}\r\n\r\nconst Grid = ({ direction, ...props }) => {\r\n    if (direction === Direction.VERTICAL) {\r\n        return <Vertical {...props} />\r\n    } else if (direction === Direction.HORIZONTAL) {\r\n        return <Horizontal {...props} />\r\n    } else if (direction === Direction.BOTH) {\r\n        return <Both {...props} />\r\n    }\r\n\r\n    return null\r\n}\r\n\r\nGrid.Direction = Direction\r\n\r\nGrid.propTypes = {\r\n    direction: PropTypes.oneOf(Object.values(Direction)),\r\n    belowChart: PropTypes.bool,\r\n    svg: PropTypes.object,\r\n}\r\n\r\nGrid.defaultProps = {\r\n    direction: Direction.HORIZONTAL,\r\n    belowChart: true,\r\n}\r\n\r\nexport default Grid\r\n","import React, { useEffect, useRef, useState } from 'react';\r\n// import * as React from 'react'\r\n\r\nimport { chartColors, row, sizes } from \"../style\";\r\nimport {\r\n    PanResponder,\r\n    Dimensions,\r\n    Text,\r\n    TouchableOpacity,\r\n    View,\r\n} from 'react-native';\r\nimport { LineChart, XAxis, YAxis } from '../charts-js/';\r\nimport {\r\n    Circle,\r\n    Defs,\r\n    G,\r\n    Line,\r\n    LinearGradient,\r\n    Path,\r\n    Rect,\r\n    Stop,\r\n    Text as SvgText,\r\n} from 'react-native-svg';\r\nimport * as shape from 'd3-shape';\r\nimport { toDollarsAndCents, toDateMonthYear, toDateDayMonth } from '../utils/misc';\r\n\r\n\r\nexport default InteractiveChart;\r\n\r\nfunction InteractiveChart(props: any) {\r\n    const apx = (size = 0) => {\r\n        let width = Dimensions.get('window').width; //useDimensions\r\n        if (width > 680) width = 680\r\n        return (width / 750) * size;\r\n    };\r\n    \r\n    if (!props.data) {\r\n        props = {data: [{date: String(new Date()), return: 2}, {date: String(new Date(\"9/1/2022\")) , return: 1}]}\r\n    }\r\n    //console.log(props.data.map((a: any) => a.date));\r\n    const dateList = props.data.map((a: any) => a.x);\r\n    //const [dateList, setDateList] = useState([]);\r\n\r\n\r\n    const priceList = props.data.map((a: any) => a.y)\r\n    //const [priceList, setPriceList] = useState([]);\r\n    \r\n    const size = useRef(dateList.length);\r\n    size.current = dateList.length;\r\n    \r\n    \r\n    const [positionX, setPositionX] = useState(-1);// The currently selected X coordinate position\r\n\r\n    const panResponder = useRef(\r\n        PanResponder.create({\r\n            // \r\n            onStartShouldSetPanResponder: (evt, gestureState) => true,\r\n            onStartShouldSetPanResponderCapture: (evt, gestureState) => true,\r\n            onMoveShouldSetPanResponder: (evt, gestureState) => true,\r\n            onMoveShouldSetPanResponderCapture: (evt, gestureState) => true,\r\n            onPanResponderTerminationRequest: (evt, gestureState) => true,\r\n\r\n            onPanResponderGrant: (evt, gestureState) => {\r\n                updatePosition(evt.nativeEvent.locationX);\r\n                return true;\r\n            },\r\n            onPanResponderMove: (evt, gestureState) => {\r\n                updatePosition(evt.nativeEvent.locationX);\r\n                return true;\r\n            },\r\n            onPanResponderRelease: () => {\r\n                setPositionX(-1);\r\n            },\r\n        })\r\n    );\r\n\r\n    const updatePosition = (x: any) => {\r\n        const YAxisWidth = apx(130);\r\n        const x0 = apx(0);// x0 position\r\n        const chartWidth = apx(750) - YAxisWidth - x0;\r\n        const xN = x0 + chartWidth;//xN position\r\n        const xDistance = chartWidth / size.current;// The width of each coordinate point\r\n\r\n        \r\n        if (x <= x0) {\r\n            x = x0;\r\n        }\r\n        if (x >= xN) {\r\n            x = xN;\r\n        }\r\n\r\n        // console.log((x - x0) )\r\n\r\n        // The selected coordinate x :\r\n        // (x - x0)/ xDistance = value\r\n        let value = Number(((x - x0) / xDistance).toFixed(0));\r\n        if (value >= size.current - 1) {\r\n            value = size.current - 1; // Out of chart range, automatic correction\r\n        }\r\n\r\n        setPositionX(Number(value));\r\n    };\r\n\r\n    const CustomGrid = ( props: {x: any, y: any, ticks: any, performance: Boolean} ) => (\r\n\r\n        <G>\r\n            {\r\n                // Horizontal grid\r\n                props.ticks.map((tick: any) => (\r\n                    \r\n                    <Line\r\n                        key={tick}\r\n                        x1=\"0%\"\r\n                        x2=\"100%\"\r\n                        y1={props.y(1)}\r\n                        y2={props.y(1)}\r\n                        strokeWidth={props.performance ? 0.5 : 0}\r\n                        stroke=\"#35A265\"\r\n                        \r\n                    />\r\n                ))\r\n            }\r\n            {\r\n                // Vertical grid\r\n                /*\r\n                priceList.map((_, index) => (\r\n                    <Line\r\n                        key={index.toString()}\r\n                        y1=\"0%\"\r\n                        y2=\"0%\"\r\n                        x1={props.x(index)}\r\n                        x2={props.x(index)}\r\n                        stroke=\"#EEF3F6\"\r\n                    />\r\n                ))\r\n                */\r\n            }\r\n        </G>\r\n    );\r\n\r\n    const CustomLine = ( line: any ) => (\r\n        <Path\r\n            key=\"line\"\r\n            d={line}\r\n            stroke=\"#FEBE18\"\r\n            strokeWidth={apx(6)}\r\n            fill=\"none\"\r\n        />\r\n    );\r\n\r\n    const CustomGradient = () => (\r\n        <Defs key=\"gradient\">\r\n            <LinearGradient id=\"gradient\" x1=\"0\" x2=\"0%\" y2=\"100%\">\r\n                {/* <Stop offset=\"0%\" stopColor=\"rgb(134, 65, 244)\" /> */}\r\n                {/* <Stop offset=\"100%\" stopColor=\"rgb(66, 194, 244)\" /> */}\r\n\r\n                <Stop offset=\"0%\" stopColor=\"#FEBE18\" stopOpacity={0.25} />\r\n                <Stop offset=\"100%\" stopColor=\"#FEBE18\" stopOpacity={0} />\r\n            </LinearGradient>\r\n        </Defs>\r\n    );\r\n\r\n    const Tooltip = ( props: {x: any, y: any, ticks: any} ) => {\r\n        if (positionX < 0) {\r\n            return null;\r\n        }\r\n        const date = dateList[positionX];\r\n\r\n        return (\r\n            <G x={props.x(positionX)} key=\"tooltip\">\r\n                <G\r\n                    x={positionX > size.current / 2 ? -apx(300 + 10) : apx(10)}\r\n                    y={props.y(priceList[positionX]) - apx(10)}>\r\n                    <Rect\r\n                        y={-apx(24 + 24 + 20) / 2}\r\n                        rx={apx(12)} // borderRadius\r\n                        ry={apx(12)} // borderRadius\r\n                        width={apx(300)}\r\n                        height={apx(96)}\r\n                        stroke=\"rgba(254, 190, 24, 0.27)\"\r\n                        fill=\"rgba(255, 255, 255, 0.8)\"\r\n                    />\r\n\r\n                    <SvgText x={apx(20)} fill=\"#617485\" opacity={0.65} fontSize={apx(24)}>\r\n                        {(new Date(date)).toLocaleDateString()}\r\n                    </SvgText>\r\n                    <SvgText\r\n                        x={apx(20)}\r\n                        y={apx(24 + 20)}\r\n                        fontSize={apx(24)}\r\n                        fontWeight=\"bold\"\r\n                        fill=\"rgba(224, 188, 136, 1)\">\r\n                        {toDollarsAndCents(priceList[positionX])}\r\n                    </SvgText>\r\n                </G>\r\n\r\n                <G x={props.x}>\r\n                    <Line\r\n                        y1={props.ticks[0]}\r\n                        y2={props.ticks[Number(props.ticks.length)]}\r\n                        stroke=\"#FEBE18\"\r\n                        strokeWidth={apx(4)}\r\n                        strokeDasharray={[6, 3]}\r\n                    />\r\n\r\n                    <Circle\r\n                        cy={props.y(priceList[positionX])}\r\n                        r={apx(20 / 2)}\r\n                        stroke=\"#fff\"\r\n                        strokeWidth={apx(2)}\r\n                        fill=\"#FEBE18\"\r\n                    />\r\n                </G>\r\n            </G>\r\n        );\r\n    };\r\n\r\n    const verticalContentInset = { top: 10, bottom: 10 };\r\n\r\n    return (\r\n        <View\r\n            style={{\r\n                backgroundColor: '#fff',\r\n                alignItems: 'stretch',\r\n                borderWidth: 1, \r\n                borderRadius: sizes.rem0_5 / 2,\r\n                borderColor: \"#ccc\",\r\n                padding: sizes.rem0_5,\r\n                //aspectRatio: 16 / 9,\r\n            }}>\r\n            <View\r\n                style={{\r\n                    flexDirection: 'row',\r\n                    width: \"100%\",\r\n                    //height: apx(570),\r\n                    aspectRatio: 16 / 9,\r\n                    alignSelf: 'stretch',\r\n                    \r\n                }}>\r\n                <View style={{ flex: 1 }} {...panResponder.current.panHandlers}>\r\n                    <LineChart\r\n                        style={{ flex: 1 }}\r\n                        data={priceList}\r\n                        //curve={shape.curveNatural}\r\n                        curve={shape.curveMonotoneX}\r\n                        contentInset={{ ...verticalContentInset }}\r\n                        svg={{ stroke: \"#11146F\" }}>\r\n                        {/*<CustomLine />*/}\r\n                        <CustomGrid x={undefined} y={undefined} ticks={undefined} performance={props.performance} />\r\n                        <CustomGradient />\r\n                        <Tooltip x={undefined} y={undefined} ticks={undefined} />\r\n                    </LineChart>\r\n                </View>\r\n\r\n                <YAxis\r\n                    style={{ width: \"12%\" }}\r\n                    data={priceList}\r\n                    contentInset={verticalContentInset}\r\n                    svg={{ fontSize: apx(18), fill: '#617485',\r\n                }}\r\n                    numberOfTicks={5}\r\n                    \r\n                    formatLabel={(value: any, index: any) => `$${String(value).split('.')[0].length > 2 ? value.toFixed(1) : value.toFixed(2)}`}\r\n                />\r\n            </View>\r\n            <XAxis\r\n                style={{\r\n                    alignSelf: 'stretch',\r\n                    // marginTop: apx(57),\r\n                    width: \"100%\",\r\n                    height: apx(70),\r\n                }}\r\n                numberOfTicks={props.period === '1D' ? 1 : 5}\r\n                data={priceList}\r\n                formatLabel={(value: any, index: any) => ['1D', '1W', '1M'].includes(props.period) ? toDateDayMonth(dateList[value]) : toDateMonthYear(dateList[value])}\r\n                contentInset={{\r\n                    left: apx(46),\r\n                    right: apx(100),\r\n                }}\r\n                svg={{\r\n                    fontSize: apx(18),\r\n                    fill: '#617485',\r\n                    y: apx(20),\r\n                    rotation: 30,\r\n                    textAnchor:'start'\r\n                    // originY: 30,\r\n                }}\r\n            />\r\n        </View>\r\n    );\r\n}","import { Button, ButtonGroup as UI_ButtonGroup, ButtonGroupProps, ButtonProps, Text } from \"@ui-kitten/components\"\r\nimport React, { useState } from \"react\"\r\nimport { sizes } from \"../style\"\r\n\r\nexport const ButtonGroup = <T extends string>(props: {\r\n    value: T | undefined,\r\n    onValueChange: (value: T) => void\r\n    items: { label: string, value: T }[],\r\n    unselectedStyle?: ButtonProps[\"style\"],\r\n    style?: ButtonGroupProps[\"style\"]\r\n}) => {\r\n    return <UI_ButtonGroup style={[{ width: \"100%\", marginBottom: sizes.rem1 }, props.style]}>\r\n        {\r\n            props.items.map((v, idx, arr) => {\r\n                const isSelected = props.value === v.value;\r\n                const opacity = isSelected ? 1 : 0.5;\r\n                //console.log(`Button at idx ${idx} isSelected: ${isSelected} with opacity of ${opacity}`);\r\n\r\n                return <Button key={'button_' + idx + \"_\" + isSelected}\r\n                    style={[\r\n                        {\r\n                            backgroundColor: isSelected ? \"green\" : \"#777\",\r\n                            width: 100 / arr.length + \"%\",\r\n                            minWidth: 100 / arr.length + \"%\",\r\n                            opacity\r\n                        }, isSelected ? props.unselectedStyle : undefined]\r\n                    }\r\n                    onPress={() => props.onValueChange(v.value)}>\r\n                        {evaProps => \r\n                            <Text {...evaProps} style={{ color: 'white', fontSize: 14 }}>\r\n                                {v.label}\r\n                            </Text>}\r\n                    </Button>\r\n            })\r\n        }\r\n    </UI_ButtonGroup>\r\n\r\n}\r\n\r\n\r\n","import React, { PropsWithChildren, useEffect, useRef, useState, Component } from \"react\"\r\nimport { NavigationProp, useNavigation } from \"@react-navigation/native\"\r\nimport { Avatar, Icon } from \"@ui-kitten/components\"\r\nimport { View, Text, Pressable, ScrollView, useWindowDimensions, Animated, FlatList, NativeSyntheticEvent, NativeScrollEvent } from \"react-native\"\r\nimport { ElevatedSection, Section, Subsection } from \"./Section\"\r\nimport { NoteEditor, SecPressable } from \"../screens/WatchlistViewerScreen\"\r\nimport { fonts, sizes } from \"../style\"\r\nimport { AppColors } from \"../constants/Colors\"\r\nimport { toDollars, toDollarsAndCents, toNumber1, toPercent1 } from \"../utils/misc\"\r\n\r\nexport const HoldingRenderItem = (props: {item: any, byId: any, isOwner: boolean}) => {\r\n    const { item, byId } = props\r\n    const secId = item.item.security_id;\r\n    //const intradayChange = item.item.price ? item.item.price.price - item.item.price.open : 0\r\n    //const hideEmptyNote = watchlist?.user[0].id !== appUser?.id\r\n    return (\r\n        <ElevatedSection title=\"\" style={{flex: 1, marginBottom: sizes.rem1_5 / 2, marginHorizontal: sizes.rem1_5 / 4, paddingHorizontal: sizes.rem0_5, paddingVertical: sizes.rem0_5}}>\r\n        <View style={{flexDirection: 'row', justifyContent: 'center'}}>\r\n            <SecPressable securityId={byId[secId] ? (byId[secId].symbol === 'USD:CUR' ? -1 : secId) : -1}>                                        \r\n                <Avatar\r\n                    style={{borderWidth: 1, borderColor: '#ccc'}}\r\n                    resizeMode={'contain'}\r\n                    size=\"large\"\r\n                    shape=\"rounded\"\r\n                    source={\r\n                        (() => {\r\n                            let output: { uri: string } | undefined;\r\n                            output = byId[secId] ? { uri: byId[secId].logo_url  } : undefined\r\n                            return output;\r\n                        })()}\r\n                    />\r\n            </SecPressable>\r\n            <View style={{flex: 1, alignItems: 'center'}}>\r\n                <Text style={{flex: 1, fontWeight: '900', color: '#454545'}}>\r\n                            {byId[secId] ? (byId[secId].symbol === 'USD:CUR' ? 'Cash' : byId[secId].symbol) : ''}\r\n                </Text>\r\n                <Text style={[item.item.optionInfo ? {display: 'flex'} : {display: 'none'}, {fontSize: fonts.xSmall}]}>\r\n                        {item.item.optionInfo && `${String(item.item.optionInfo[0].type).toLowerCase() === 'call' ? 'C' : 'P'}${toNumber1(item.item.optionInfo[0].strike_price)} ${new Date(item.item.optionInfo[0].expiration).toLocaleDateString()}`}\r\n                    </Text>\r\n                <Text style={[{flex: 1, color: '#606060'}, byId[secId] ? (byId[secId].symbol === 'USD:CUR' ? {display: 'none'} : {display: 'flex'}) : {display: 'none'}]}>\r\n                    {toDollarsAndCents(item.item.price)}\r\n                </Text>\r\n            </View>\r\n\r\n        </View>\r\n        <View style={{flex: 1, alignContent: 'space-between', marginTop: sizes.rem0_5, flexDirection: 'row'}}>\r\n            <View style={{flex: 1, alignItems: 'center', flexDirection: 'row'}}>\r\n                <View style={{flex: 1, alignItems: 'center'}}>\r\n                    <Text style={{fontSize: fonts.medium / 2, color: '#9D9D9D'}}>\r\n                        {props.isOwner ? 'Market Value' : '% Portfolio'}\r\n                    </Text>\r\n                    <Text style={{fontSize: fonts.small, color: '#606060'}}>\r\n                        {props.isOwner ? `${toDollars(item.item.value)}` : `${toPercent1(item.item.value)}`}\r\n                    </Text>\r\n                </View>\r\n                <View style={[{flex: 1, alignItems: 'center'}, byId[secId] ? (byId[secId].symbol === 'USD:CUR' ? {display: 'none'} : {display: 'flex'}) : {display: 'none'}]}>\r\n                    <Text style={{fontSize: fonts.medium / 2, color: '#9D9D9D'}}>\r\n                        {'Cost'}\r\n                    </Text>\r\n                    <Text style={{fontSize: fonts.small, color: '#606060'}}>\r\n                        {`${toDollarsAndCents(item.item.cost_basis)}`}\r\n                    </Text>                                                    \r\n                </View>\r\n            </View>\r\n        </View>\r\n        <View style={[{flex: 1, flexDirection: 'row'}, props.isOwner ? {display: 'flex'} : {display: 'none'}]}>\r\n            <View style={[{flex: 1, alignItems: 'center'}, byId[secId] ? (byId[secId].symbol === 'USD:CUR' ? {display: 'none'} : {display: 'flex'}) : {display: 'none'}]}>\r\n                <Text style={{fontSize: fonts.medium / 2, color: '#9D9D9D'}}>\r\n                    {'Profit/Loss'}\r\n                </Text>\r\n                <Text style={[{fontSize: fonts.small}, \r\n                               item.item.pnl >= 0 ? (item.item.pnl === 0 ? {color: 'black'} : {color: 'green'}) : {color: 'red'}]}>\r\n                    {`${toDollars(item.item.pnl)}`}\r\n                </Text>\r\n            </View>\r\n\r\n        </View>\r\n    </ElevatedSection>\r\n    )\r\n}","import React, { PropsWithChildren, useEffect, useRef, useState, Component } from \"react\"\r\nimport { NavigationProp, useNavigation } from \"@react-navigation/native\"\r\nimport { Avatar, Icon } from \"@ui-kitten/components\"\r\nimport { View, Text, Pressable, ScrollView, useWindowDimensions, Animated, FlatList, NativeSyntheticEvent, NativeScrollEvent } from \"react-native\"\r\nimport { ElevatedSection, Section, Subsection } from \"./Section\"\r\nimport { NoteEditor, SecPressable } from \"../screens/WatchlistViewerScreen\"\r\nimport { fonts, sizes } from \"../style\"\r\nimport { AppColors } from \"../constants/Colors\"\r\nimport { toDollars, toDollarsAndCents, toFormatedDateTime, toNumber1 } from \"../utils/misc\"\r\n\r\nexport const TradeRenderItem = (props: {item: any, byId: any, isOwner: boolean}) => {\r\n    const { item, byId } = props\r\n    const secId = item.item.security_id || item.item.securityId;\r\n    //const intradayChange = item.item.price ? item.item.price.price - item.item.price.open : 0\r\n    //const hideEmptyNote = watchlist?.user[0].id !== appUser?.id\r\n    return (\r\n        <ElevatedSection title=\"\" style={{flex: 1, marginBottom: sizes.rem1_5 / 2, marginHorizontal: sizes.rem1_5 / 4, paddingHorizontal: sizes.rem0_5, paddingVertical: sizes.rem0_5}}>\r\n            <View style={{flexDirection: 'row', justifyContent: 'center'}}>\r\n                <SecPressable securityId={secId}>                                        \r\n                    <Avatar\r\n                        style={{borderWidth: 1, borderColor: '#ccc'}}\r\n                        resizeMode={'contain'}\r\n                        size=\"large\"\r\n                        shape=\"rounded\"\r\n                        source={\r\n                            (() => {\r\n                                let output: { uri: string } | undefined;\r\n                                output = byId[secId] ? { uri: byId[secId].logo_url  } : undefined\r\n                                return output;\r\n                            })()}\r\n                        />\r\n                </SecPressable>\r\n                <View style={{flex: 1, alignItems: 'center'}}>\r\n                    <Text style={{flex: 1, fontWeight: '900', color: '#454545'}}>\r\n                                {byId[secId] ? (byId[secId].symbol === 'USD:CUR' ? 'Cash' : `${item.item.type.slice(0,1).toUpperCase() + item.item.type.slice(1) } ${byId[secId].symbol}`) : ''}\r\n                    </Text>\r\n                    <Text style={[item.item.optionInfo ? {display: 'flex'} : {display: 'none'}, {fontSize: fonts.xSmall}]}>\r\n                        {item.item.optionInfo && `${String(item.item.optionInfo[0].type).toLowerCase() === 'call' ? 'C' : 'P'}${toNumber1(item.item.optionInfo[0].strike_price)} ${new Date(item.item.optionInfo[0].expiration).toLocaleDateString()}`}\r\n                    </Text>\r\n                    <Text style={{flex: 1, color: '#606060'}}>\r\n                        {`@ ${toDollarsAndCents(item.item.price)}`}\r\n                    </Text>\r\n                </View>\r\n            </View>\r\n            <View style={{flex: 1, alignContent: 'space-between', marginTop: sizes.rem0_5, flexDirection: 'row'}}>\r\n                <View style={[{flex: 1, alignItems: 'center', flexDirection: 'row'}, props.isOwner ? {display: 'flex'} : {display: 'none'}]}>\r\n                    <View style={{flex: 1, alignItems: 'center'}}>\r\n                        <Text style={{fontSize: fonts.medium / 2, color: '#9D9D9D'}}>\r\n                            {'Quantity'}\r\n                        </Text>\r\n                        <Text style={{fontSize: fonts.small, color: '#606060'}}>\r\n                            {`${item.item.quantity}`}\r\n                        </Text>\r\n                    </View>\r\n                    <View style={{flex: 1, alignItems: 'center'}}>\r\n                        <Text style={{fontSize: fonts.medium / 2, color: '#9D9D9D'}}>\r\n                            {'Market Value'}\r\n                        </Text>\r\n                        <Text style={{fontSize: fonts.small, color: '#606060'}}>\r\n                            {`${toDollars(item.item.amount)}`}\r\n                        </Text>                                                    \r\n                    </View>\r\n                </View>\r\n            </View>\r\n            <View style={{flex: 1, flexDirection: 'row'}}>\r\n            <View style={{flex: 1, alignItems: 'center'}}>\r\n                <Text style={{fontSize: fonts.medium / 2, color: '#9D9D9D'}}>\r\n                    {'Trade Date'}\r\n                </Text>\r\n                <Text style={[{fontSize: fonts.xSmall}]}>\r\n                    {`${(new Date(item.item.date)).getUTCHours() !== 12 ? toFormatedDateTime(String(item.item.date)) : (new Date(item.item.date)).toLocaleDateString()}`}\r\n                </Text>\r\n            </View>\r\n        </View>\r\n        </ElevatedSection>\r\n    )\r\n}","import React, {ReactElement, ReactNode, useEffect, useRef, useState} from \"react\";\r\nimport {Api} from '@tradingpost/common/api'\r\nimport {Tab, TabBar, TabView, Text} from \"@ui-kitten/components\";\r\n//import { ensureCurrentUser } from \"../apis/Authentication\";\r\nimport {ProfileBanner, profileImageSize, profileImageSmall, useProfileBannerSize} from \"../components/ProfileBanner\";\r\n//import { IAmiraUser } from \"../interfaces/IUser\";\r\n//import { DashboardScreen, DashProps, fullDashOptions, IDashboard } from \"../layouts/DashboardLayout\";\r\n//import { } from 'react-native-linear-gradient'\r\nimport {flex, fonts, paddView, row, sizes} from \"../style\";\r\nimport {\r\n    Animated,\r\n    View,\r\n    ScrollView,\r\n    NativeScrollEvent,\r\n    NativeSyntheticEvent,\r\n    useWindowDimensions,\r\n    Alert,\r\n    FlatList,\r\n    ViewStyle\r\n} from \"react-native\";\r\nimport {AwaitedReturn, DEV_ONLY, toPercent2, toDollarsAndCents, toThousands} from \"../utils/misc\";\r\nimport {SecondaryButton} from \"../components/SecondaryButton\";\r\nimport {ElevatedSection, Section, Subsection} from \"../components/Section\";\r\n//import { PostList, usePostLoader } from \"../components/PostList\";\r\n//import { getCompetitionsPast } from \"../apis/CompetitionApi\";\r\nimport {stringyDate, Table} from \"../components/Table\";\r\n//import { ChipPicker } from \"../components/ChipBar\";\r\nimport {PieHolder} from \"../components/PieHolder\";\r\nimport {WatchlistSection} from \"../components/WatchlistSection\";\r\n//import { TabScreenProps } from \"../navigation\";\r\nimport {IUserGet} from \"@tradingpost/common/api/entities/interfaces\";\r\nimport {useToast} from \"react-native-toast-notifications\";\r\nimport {FeedPart} from \"./FeedScreen\";\r\nimport {AppColors} from \"../constants/Colors\";\r\nimport {useMakeSecurityFields} from \"./WatchlistViewerScreen\";\r\nimport {PrimaryChip} from \"../components/PrimaryChip\";\r\nimport {useAppUser} from \"../Authentication\";\r\nimport InteractiveChart from \"../components/InteractiveGraph\";\r\nimport {ButtonGroup} from \"../components/ButtonGroup\";\r\nimport {RootStackScreenProps} from \"../navigation/pages\";\r\nimport { List } from \"../components/List\";\r\nimport { HoldingRenderItem } from \"../components/HoldingRenderItem\";\r\nimport { useSecuritiesList } from \"../SecurityList\";\r\nimport { TradeRenderItem } from \"../components/TradeRenderItem\";\r\n//import { screens } from \"../navigationComponents\";\r\n//import { getUser } from \"../apis/UserApi\";\r\n\r\n//May need to be changed for ios\r\nconst TabPanelSize = 48;\r\nconst StatusBarsize = 20;\r\nconst ButtonMargin = 8;\r\nconst ButtonBarsize = 43;\r\nconst titles = 27 + 17;\r\nconst tabBarMargin = sizes.rem1;\r\nconst clampBuffer = 4;\r\n\r\nconst collapseShift = 2 * ButtonMargin;\r\n\r\nconst periods: { [key: string]: number } = {\r\n    \"1D\": 1,\r\n    \"1W\": 5,\r\n    \"1M\": 20,\r\n    \"3M\": 60,\r\n    \"1Y\": 252,\r\n    \"2Y\": 504,\r\n    \"Max\": 1000\r\n}\r\n\r\nexport function ProfileScreen(props: RootStackScreenProps<'Profile'>) {\r\n    const userId = props.route?.params?.userId;\r\n\r\n    const [user, setUser] = useState<IUserGet>(),\r\n        [watchlists, setWatchlists] = useState<AwaitedReturn<typeof Api.User.extensions.getWatchlists>>(),\r\n        [summary, setSummary] = useState<AwaitedReturn<typeof Api.User.extensions.getPortfolio>>(),\r\n        [holdings, setHoldings] = useState<AwaitedReturn<typeof Api.User.extensions.getHoldings>>(),\r\n        [returns, setReturns] = useState<AwaitedReturn<typeof Api.User.extensions.getReturns>>(),\r\n        [twReturns, settwReturns] = useState<{ x: string, y: number }[]>(),\r\n        [portPeriod, setPortPeriod] = useState(\"1Y\"),\r\n        translateHeaderY = useRef(new Animated.Value(0)).current;\r\n\r\n    const dim = useWindowDimensions();\r\n    const scrollRef = useRef<FlatList>(null);\r\n    const bannerHeight = useProfileBannerSize(),\r\n        headerHeight = bannerHeight + TabPanelSize + ButtonBarsize + ButtonMargin * 2 + titles + tabBarMargin;\r\n\r\n    const clampMax = bannerHeight - profileImageSmall;\r\n    const minViewHeightCollapsed = dim.height - clampMax - StatusBarsize - headerHeight + bannerHeight + 2 * titles;\r\n    const minViewHeight = dim.height - headerHeight;\r\n    const [collapsed, setCollapsed] = useState(false);\r\n    const [isMaxed, setIsMaxed] = useState(false);\r\n    const translation = translateHeaderY.interpolate({\r\n        inputRange: [0, clampMax],\r\n        outputRange: [0, -clampMax],\r\n        extrapolate: 'clamp',\r\n    });\r\n    const manager = useRef<boolean[]>([]).current;\r\n    const {loginState} = useAppUser(),\r\n        appUser = loginState?.appUser\r\n\r\n\r\n    useEffect(() => {\r\n        translation.addListener((v: { value: number }) => {\r\n            const c = Math.abs(v.value + clampMax) < profileImageSize - profileImageSmall + 8;\r\n            const isMaxed = -v.value === clampMax;\r\n            setCollapsed(c);\r\n            setIsMaxed(isMaxed);\r\n        });\r\n        return () => translation.removeAllListeners();\r\n    }, [translation, clampMax]);\r\n\r\n    const [tab, setTab] = useState(0);\r\n    //const dashRef = useRef<any>()\r\n    const toast = useToast();\r\n\r\n    useEffect(() => {\r\n\r\n        if (userId && !user) {\r\n            (async () => {\r\n                try {\r\n                    const [user, holdingsP, watchlists] = await Promise.all([\r\n                        Api.User.get(userId),\r\n                        Api.User.extensions.getHoldings({userId: userId as string}),\r\n                        Api.User.extensions.getWatchlists({userId: userId as string})\r\n                    ]);\r\n                    setWatchlists(watchlists);\r\n                    setHoldings(holdingsP);\r\n                    setUser(user);\r\n                    let today = new Date();\r\n                    const summary = await Api.User.extensions.getPortfolio({userId: userId as string});\r\n                    setSummary(summary);\r\n                    const returns = await Api.User.extensions.getReturns({\r\n                        userId: userId as string,\r\n                        startDate: new Date(today.setDate(today.getDate() - 1001)),\r\n                        endDate: new Date()\r\n                    })\r\n                    setReturns(returns);\r\n                    if (returns.length) {\r\n                        let twr: { x: string, y: number }[] = [];\r\n                        const day = new Date(String(returns.slice(returns.length - periods[portPeriod])[0].date))\r\n                        twr.push({x: (new Date(day.setDate(day.getDate() - 1))).toUTCString(), y: 1})\r\n\r\n                        returns.slice(returns.length - periods[portPeriod]).forEach((r, i) => {\r\n                            twr.push({x: new Date(String(r.date)).toUTCString(), y: twr[i].y * (1 + r.return)})\r\n                        })\r\n                        settwReturns(twr);\r\n                    }\r\n                } catch (ex: any) {\r\n                    toast.show(ex.message);\r\n                }\r\n            })()\r\n        }\r\n    }, [userId, user])\r\n\r\n    useEffect(() => {\r\n        if (returns?.length) {\r\n            let twr: { x: string, y: number }[] = [];\r\n            const day = new Date(String(returns.slice(returns.length - periods[portPeriod])[0].date))\r\n            twr.push({x: (new Date(day.setDate(day.getDate() - 1))).toUTCString(), y: 1})\r\n\r\n            returns?.slice(returns.length - periods[portPeriod]).forEach((r, i) => {\r\n                twr.push({x: new Date(String(r.date)).toUTCString(), y: twr[i].y * (1 + r.return)})\r\n            })\r\n            settwReturns(twr);\r\n        }\r\n    }, [portPeriod])\r\n    const { securities: { bySymbol, byId } } = useSecuritiesList();\r\n    const displayHoldings = appUser?.id === user?.id || (user?.settings?.portfolio_display.holdings && user.subscription.is_subscribed)\r\n    const displayTrades = appUser?.id === user?.id || (user?.settings?.portfolio_display.trades && user.subscription.is_subscribed)\r\n    const displayPerformance = appUser?.id === user?.id || (user?.settings?.portfolio_display.performance && user.subscription.is_subscribed)\r\n    return <View style={[flex]}>\r\n        <Animated.FlatList\r\n            data={[\r\n                <ProfilePage key={'top_level_user_feed'} style={{paddingHorizontal: 0}} index={0}\r\n                             minViewHeight={minViewHeight} manager={manager} currentIndex={tab}>\r\n                    <FeedPart\r\n                        key={'user_feed'}\r\n                        userId={userId}\r\n                    />\r\n                </ProfilePage>,\r\n                <ProfilePage key={'top_level_performance_holdings'} index={1} minViewHeight={minViewHeight}\r\n                             manager={manager} currentIndex={tab}>\r\n                    <ElevatedSection title=\"Performance\">\r\n                        <View style={(appUser?.id === user?.id && !twReturns) ? {display: 'none'} : {display: 'flex'}}>\r\n                            <View style={displayPerformance ? {display: 'none'} : {\r\n                                justifyContent: \"center\",\r\n                                alignItems: 'center'\r\n                            }}>\r\n                                <Text style={{fontSize: fonts.medium, fontWeight: '500', color: '#ccc'}}>\r\n                                    {`@${user?.handle} does not display their investment performance.`}\r\n                                </Text>\r\n                            </View>\r\n                            <View style={displayPerformance ? {\r\n                                display: 'flex',\r\n                                marginBottom: sizes.rem1\r\n                            } : {display: 'none'}}>\r\n                                <View style={{marginBottom: sizes.rem1}}>\r\n                                    <InteractiveChart data={twReturns} period={portPeriod} performance={true}/>\r\n                                </View>\r\n                                <ButtonGroup key={\"period\"}\r\n                                             items={[\"1D\", \"1W\", \"1M\", \"3M\", \"1Y\", \"2Y\", \"Max\"].map(v => ({\r\n                                                 label: v,\r\n                                                 value: v\r\n                                             }))} onValueChange={(v) => setPortPeriod(v)} value={portPeriod}/>\r\n                            </View>\r\n                        </View>\r\n                        <Text\r\n                            style={[!(appUser?.id === user?.id && !twReturns) ? {display: 'none'} : {display: 'flex'}, {\r\n                                fontSize: fonts.medium,\r\n                                fontWeight: '500',\r\n                                color: '#ccc'\r\n                            }]}>\r\n                            {\"You haven't linked a brokerage to TradingPost. Go to your Account page in the Side Menu and Link one today!\"}\r\n                        </Text>\r\n                    </ElevatedSection>\r\n                    <Section title=\"Holdings\" style={{backgroundColor: AppColors.background}}>\r\n                        <View style={(appUser?.id === user?.id && !twReturns) ? {display: 'none'} : {display: 'flex'}}>\r\n                            <View style={displayHoldings ? {display: 'none'} : {\r\n                                justifyContent: \"center\",\r\n                                alignItems: 'center'\r\n                            }}>\r\n                                <Text style={{fontSize: fonts.medium, fontWeight: '500', color: '#ccc'}}>\r\n                                    {`@${user?.handle} does not display their investment holdings.`}\r\n                                </Text>\r\n                            </View>\r\n                            <View style={displayHoldings ? {\r\n                                display: 'flex',\r\n                                marginBottom: sizes.rem1\r\n                            } : {display: 'none'}}>\r\n                                <List\r\n                                    listKey=\"holdingsList\"\r\n                                    datasetKey={`holdings_id_${holdings?.length}`}\r\n                                    data={holdings}\r\n                                    loadingMessage={\" \"}\r\n                                    noDataMessage={\" \"}\r\n                                    loadingItem={undefined}\r\n                                    numColumns={2}\r\n                                    renderItem={(item) => {\r\n                                        return (\r\n                                            <HoldingRenderItem \r\n                                                item={item}\r\n                                                byId={byId}\r\n                                                isOwner={appUser?.id === user?.id}\r\n                                                />\r\n                                        )\r\n                                    }}\r\n                                />\r\n                            </View>\r\n                        </View>\r\n                        <Text\r\n                            style={[!(appUser?.id === user?.id && !twReturns) ? {display: 'none'} : {display: 'flex'}, {\r\n                                fontSize: fonts.medium,\r\n                                fontWeight: '500',\r\n                                color: '#ccc'\r\n                            }]}>\r\n                            {\"You haven't linked a brokerage to TradingPost. Go to your Account page in the Side Menu and Link one today!\"}\r\n                        </Text>\r\n                    </Section>\r\n                    <WatchlistSection title=\"Watchlists\" watchlists={watchlists}/>\r\n                </ProfilePage>,\r\n                <ProfilePage key={'top_level_trades'} index={2} minViewHeight={minViewHeight} manager={manager}\r\n                             currentIndex={tab}>\r\n                    <View style={displayTrades ? {display: 'none'} : {\r\n                        display: 'flex',\r\n                        height: '100%',\r\n                        justifyContent: \"center\",\r\n                        alignItems: 'center'\r\n                    }}>\r\n                        <Text style={{fontSize: fonts.medium, fontWeight: '500', color: '#ccc'}}>\r\n                            {`@${user?.handle} does not display their trades.`}\r\n                        </Text>\r\n                    </View>\r\n                    <Section title=\"\" style={[displayTrades ? {display: 'flex'} : {display: 'none'}, {backgroundColor: AppColors.background}]}>\r\n                        <List\r\n                            listKey={'trades_table'}\r\n                            loadingMessage={\" \"}\r\n                            noDataMessage={\" \"}\r\n                            loadingItem={undefined}\r\n                            numColumns={2}\r\n                            keyExtractor={(item, idx) => {\r\n                                return item ? \"trade_\" + idx : \"empty\";\r\n                            }}\r\n                            data={(async (a, $page) => {\r\n                                const newArr = a || [];\r\n                                newArr.push(...(await Api.User.extensions.getTrades({\r\n                                    $page,\r\n                                    $limit: 10,\r\n                                    settings: {userId: userId as string}\r\n                                })));\r\n                                //console.log(JSON.stringify(newArr))\r\n                                return newArr;\r\n                            })}\r\n                            renderItem={(item)=> {\r\n\r\n                                return (<TradeRenderItem \r\n                                    item={item}\r\n                                    byId={byId}\r\n                                    isOwner={appUser?.id === user?.id }\r\n                                />)\r\n                            }}\r\n                        />\r\n                    </Section>\r\n                </ProfilePage>,\r\n                <ProfilePage key={'top_level_about'} index={3} minViewHeight={minViewHeight} manager={manager}\r\n                             currentIndex={tab}>\r\n                    <ElevatedSection title=\"General\">\r\n                        <Subsection title=\"Biography\" alt={true}>\r\n                            <Text>{user?.bio}</Text>\r\n                        </Subsection>\r\n                        <View style={row}>\r\n                            <Subsection title=\"Strategy\" alt={true} style={flex}>\r\n                                <Text>{user?.analyst_profile?.investment_strategy}</Text>\r\n                            </Subsection>\r\n                            <Subsection title=\"Benchmark\" alt={true} style={flex}>\r\n                                <Text>{user?.analyst_profile?.benchmark}</Text>\r\n                            </Subsection>\r\n                        </View>\r\n                        <Subsection title=\"Interest &amp; Specialities\" alt={true} style={flex}>\r\n                            <View style={{flexDirection: \"row\"}}>\r\n                                {(user?.analyst_profile?.interests || [\"No\", \"Tags\", \"Here\"]).map((chip, i) =>\r\n                                    <PrimaryChip isAlt key={i} label={chip} style={{flex: 1}}/>)}\r\n                            </View>\r\n                        </Subsection>\r\n                    </ElevatedSection>\r\n                    <ElevatedSection title=\"Social Analytics\">\r\n                        <Text>\r\n                            Coming soon!\r\n                        </Text>\r\n                    </ElevatedSection>\r\n                </ProfilePage>\r\n            ]}\r\n            renderItem={(info) => {\r\n                return info.item;\r\n            }}\r\n            ref={scrollRef} contentContainerStyle={[{paddingTop: headerHeight}]} nestedScrollEnabled\r\n            onMomentumScrollEnd={(ev) => {\r\n                if (collapsed && !isMaxed) {\r\n                    scrollRef.current?.scrollToOffset({offset: clampMax, animated: true});\r\n                    setIsMaxed(true);\r\n                }\r\n            }}\r\n            onScroll={Animated.event<NativeSyntheticEvent<NativeScrollEvent>>([\r\n                {nativeEvent: {contentOffset: {y: translateHeaderY}}}\r\n            ], {useNativeDriver: true})}>\r\n        </Animated.FlatList>\r\n        <Animated.View style={{\r\n            position: \"absolute\",\r\n            top: 0,\r\n            backgroundColor: AppColors.background,\r\n            transform: [{translateY: translation}],\r\n            alignItems: \"stretch\",\r\n            width: \"100%\"\r\n        }}>\r\n            <ProfileBanner\r\n                subscriberCount={user?.subscription?.count}\r\n                navigator={props.navigation}\r\n                profilePic={user?.profile_url}\r\n                collapse={collapsed}\r\n                bannerPic={\"\"}\r\n                extraMarginTop={collapseShift}\r\n                platforms={user?.claims ? user?.claims.map(c => c.platform) : []}\r\n\r\n            />\r\n            <View style={[collapsed ? row : undefined, {width: \"100%\", alignItems: \"center\"}]}>\r\n                <View style={{marginHorizontal: collapsed ? sizes.rem1 : 0}}>\r\n                    <Text style={{\r\n                        color: \"black\",\r\n                        textAlign: !collapsed ? \"center\" : \"left\",\r\n                        fontSize: fonts.small\r\n                    }}>@{user?.handle || \"\"}</Text>\r\n                    <Text style={{\r\n                        color: \"black\",\r\n                        textAlign: !collapsed ? \"center\" : \"left\",\r\n                        fontSize: fonts.medium\r\n                    }}>{user?.display_name}</Text>\r\n                </View>\r\n                {appUser && user && <SecondaryButton\r\n                    {...(() => {\r\n                        let children: string;\r\n                        let onPress: () => void;\r\n                        let style;\r\n                        if (appUser && user && user?.id !== appUser?.id) {\r\n                            if (!user.subscription?.is_subscribed && !user.subscription?.is_pending) {\r\n                                children = `Subscribe ${(user.subscription?.cost as any) !== \"$0.00\" ? `${user.subscription.cost}/mo.` : \"(Free)\"}`\r\n                                onPress = async () => {\r\n                                    await Api.Subscriber.extensions.insertWithNotification({\r\n                                        subscription_id: user.subscription.id,\r\n                                        //TODO: this should be moved to the server side \r\n                                        start_date: new Date(),\r\n                                        user_id: user.id,\r\n                                        approved: !user.subscription.settings.approve_new\r\n                                    });\r\n                                    setUser(undefined);\r\n                                }\r\n                                style = {backgroundColor: \"#35A265\", borderColor: \"#35A265\"}\r\n                            } else {\r\n                                children = user.subscription.is_pending ? 'Pending' : 'Subscribed',\r\n                                    onPress = async () => {\r\n                                        await Api.Subscriber.extensions.removeSubscription({\r\n                                            subscriptionId: user.subscription?.id\r\n                                        });\r\n                                        setUser(undefined);\r\n                                    }\r\n                                style = user.subscription.is_pending ? {\r\n                                    backgroundColor: \"#FFCE31\",\r\n                                    borderColor: \"#FFCE31\"\r\n                                } : {backgroundColor: \"#EC5328\", borderColor: \"#EC5328\"}\r\n                            }\r\n                        } else {\r\n                            if (user?.subscription?.id) {\r\n                                children = 'Manage Subscriptions'\r\n                                onPress = () => props.navigation.navigate(\"Subscription\")\r\n                            } else {\r\n                                children = 'Become An Analyst'\r\n                                onPress = () => props.navigation.navigate(\"SubscriptionSettings\")\r\n                            }\r\n                        }\r\n                        return {\r\n                            children,\r\n                            onPress,\r\n                            style\r\n                        }\r\n                    })()}\r\n                />}\r\n            </View>\r\n            <ElevatedSection title=\"\" style={{marginHorizontal: sizes.rem1, marginTop: tabBarMargin}}>\r\n                <TabBar\r\n                    indicatorStyle={{\r\n                        marginTop: 26,\r\n                        marginHorizontal: 0\r\n                    }}\r\n                    style={{width: \"100%\", marginHorizontal: 0}}\r\n                    key={\"tabbar\"}\r\n                    selectedIndex={tab}\r\n                    onSelect={t => {\r\n                        if (collapsed)\r\n                            scrollRef.current?.scrollToOffset({offset: clampMax, animated: false});\r\n\r\n                        setTab(t);\r\n                    }}>\r\n                    {[\"Posts\", \"Portfolio\", \"Trades\", \"About\"].map(t => <Tab style={{marginTop: -4}} title={t}/>)}\r\n                </TabBar>\r\n            </ElevatedSection>\r\n        </Animated.View>\r\n    </View>\r\n}\r\n\r\nfunction ProfilePage(props: { manager: boolean[], index: number, currentIndex: number, minViewHeight: number, children?: ReactNode, style?: ViewStyle }) {\r\n    props.manager[props.currentIndex] = true;\r\n    return (props.index === props.currentIndex || props.manager[props.index]) ?\r\n        <View style={[paddView, {\r\n            minHeight: props.minViewHeight,\r\n            display: props.currentIndex === props.index ? \"flex\" : \"none\",\r\n\r\n        }, props.style]}>\r\n            {props.children}\r\n        </View> : null\r\n}","import { ButtonProps } from \"@ui-kitten/components\";\r\nimport React from \"react\";\r\nimport { Alert, View } from \"react-native\";\r\nimport Animated from \"react-native-reanimated\";\r\n//import { ButtonProps, View } from \"react-native-ui-lib\";\r\n//import AuthApi from \"../api/entities/apis/AuthApi\";\r\n\r\n//import { screens } from \"../layouts/BaseLayout\";\r\n//import CreateAccountScreen from \"../screens/CreateAccountScreen\";\r\nimport { PrimaryButton } from \"./PrimaryButton\";\r\nimport { SecondaryButton } from \"./SecondaryButton\";\r\n\r\nexport const LoginButtons = (props: { createAccountProps: Partial<ButtonProps>, loginProps: Partial<ButtonProps> }) => {\r\n    return <View style={{ flexDirection: \"row\", justifyContent: \"space-between\" }}>\r\n        <SecondaryButton style={{ alignSelf: \"center\", width: \"48%\" }} \r\n            {...props.createAccountProps}\r\n        //onPress={() => {\r\n        //  screens.push(componentId, \"CreateAccount\")\r\n\r\n        //}}\r\n        //disabled={loggingIn}\r\n        >Create Account</SecondaryButton>\r\n        <PrimaryButton\r\n         \r\n            //disabled={loggingIn}\r\n            // onPress={async () => {\r\n\r\n            //   //  setLoggingIn(true);\r\n            //     // try {\r\n            //     //     const val = userRef.current?.field.current?.validate();\r\n            //     //     const passVal = passRef.current?.field.current?.validate();\r\n            //     //     if (val && passVal) {\r\n            //     //         const user = await AuthApi.login(username, password);// signInWithPassword(username, password);\r\n\r\n            //     //         if (user.verified)\r\n            //     //             Alert.alert(\"VERIFIED\")\r\n            //     //         //SetDashboardLayout();\r\n            //     //         else\r\n            //     //             screens.push(componentId, \"CreateAccount\")\r\n\r\n\r\n\r\n\r\n            //     //         // Navigation.push(props.componentId, {\r\n            //     //         //     component: screens.getComponent(\"App\")\r\n            //     //         // });\r\n            //     //     }\r\n            //     //     else\r\n            //     //         throw new Error(userRef.current?.errorMessage)\r\n            //     // }\r\n            //     // catch (ex: any) {\r\n            //     //     passRef.current?.field.current?.clear();\r\n            //     //     dashboardRef.current?.toastMessage(ex.message);\r\n            //     // }\r\n            //     // finally {\r\n            //     //     setLoggingIn(false);\r\n            //     // }\r\n\r\n            // }}\r\n            style={{ alignSelf: \"center\", width: \"48%\" }}\r\n            {...props.loginProps}\r\n        >Sign In</PrimaryButton>\r\n    </View>\r\n}","import React, { Children, ReactElement, useEffect, useRef } from \"react\";\r\nimport { AppTitle, SplashWelcome } from \"../images\";\r\nimport { bannerText, fonts, paddView, sizes } from '../style'\r\nimport { G, GProps, Path, SvgProps } from \"react-native-svg\";\r\nimport { Link } from \"../components/Link\";\r\nimport { Animated, Platform, View, StyleSheet, Alert, Pressable } from \"react-native\";\r\nimport { LoginButtons } from \"../components/LoginButtons\";\r\nimport { useLinkTo } from \"@react-navigation/native\";\r\nimport { Text, TabView, Tab } from \"@ui-kitten/components\";\r\nimport { useState } from \"react\";\r\nimport { ITextField, TextField } from \"../components/TextField\";\r\nimport { Section } from \"../components/Section\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { useAppUser } from \"../Authentication\";\r\nimport { PrimaryButton } from \"../components/PrimaryButton\";\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { RootStackScreenProps } from \"../navigation/pages\";\r\nimport { useInitialRoute } from '../navigation/RootNavigator';\r\nimport { getCallBackUrl } from \"@tradingpost/common/api/entities/static/EntityApiBase\";\r\n\r\n\r\nexport type WelcomeScreenProps = { title: string }\r\n\r\nconst ensureG = (child: ReactElement): child is ReactElement<GProps> => {\r\n    return child.type === G;\r\n}\r\n\r\n//Test function will move out into helper later \r\nconst SvgMagic: React.FC<{ children: ReactElement<SvgProps> }> = (props) => {\r\n    const reportChildren = (children: ReactElement) => {\r\n        Children.forEach(children, (child) => {\r\n            if (ensureG(child))\r\n                console.log(\"FOUND G WITH ID:::::::\" + child.props.id);\r\n            else {\r\n                console.log(\"FOUND SOMETHING:::::::\" + (child.type as any).name);\r\n                console.log(\"FOUND SOMETHINGS CHIULDREN:::::::\" + (JSON.stringify(child.props)));\r\n            }\r\n            reportChildren(child.props.children);\r\n        })\r\n    };\r\n\r\n    reportChildren(props.children);\r\n\r\n    return props.children;\r\n}\r\n\r\n\r\nexport default ({ navigation }: RootStackScreenProps<\"Root\">) => {\r\n    const linkTo = useLinkTo();\r\n    const cleanUp = useRef<number>(),\r\n        [selectedIndex, setSelectedIndex] = useState(0);\r\n    const route = useInitialRoute();\r\n\r\n    useEffect(() => {\r\n        return () => clearInterval(cleanUp.current);\r\n    }, [])\r\n\r\n    const\r\n        userRef = useRef<ITextField>(null),\r\n        passRef = useRef<ITextField>(null),\r\n        [username, setUsername] = useState<string>(''),\r\n        [password, setPassword] = useState<string>(''),\r\n        intervalRef = useRef<any>(),\r\n        opacityAnim = useRef(new Animated.Value(0)).current,\r\n        toast = useToast(),\r\n        [isLoggingIn, setIsLoggingIn] = useState(false),\r\n        { signIn } = useAppUser();\r\n\r\n\r\n    useEffect(() => {\r\n        if (route !== \"Root\")\r\n            navigation.replace(route);\r\n    }, [route])\r\n\r\n    return <><View style={[...paddView, { justifyContent: \"center\", backgroundColor: \"white\" }]}>\r\n        <AppTitle style={{ marginVertical: sizes.rem1, alignSelf: \"center\", width: \"100%\", aspectRatio: 5 }} />\r\n\r\n        <TabView\r\n            selectedIndex={selectedIndex}\r\n            onSelect={index => setSelectedIndex(isNaN(index) ? 0 : index)}\r\n            style={{ width: \"100%\" }}\r\n            indicatorStyle={{ height: 0 }}\r\n            tabBarStyle={{ height: 0 }}\r\n        >\r\n            <Tab>\r\n                <WTF_View\r\n                    onReady={(item) => {\r\n                        if (Platform.OS === \"web\" && item instanceof HTMLDivElement) {\r\n                            const stonks = [\"fb\", \"tsla\", \"nvda\", \"btc\", \"ether\", \"doge\"].map((n) => item.querySelector<SVGGElement>(`[id=${n}]`));\r\n                            stonks.forEach((s) => {\r\n                                if (s)\r\n                                    s.style.opacity = \"0\";\r\n                            });\r\n\r\n                            let lastItem: SVGGElement | null = null;\r\n                            let lastItem2: SVGGElement | null = null;\r\n\r\n                            if (intervalRef.current)\r\n                                clearInterval(intervalRef.current);\r\n\r\n                            intervalRef.current = setInterval(() => {\r\n                                const index = Math.floor(Math.random() * (9));\r\n                                const index2 = Math.floor(Math.random() * (9));\r\n\r\n                                if (lastItem)\r\n                                    lastItem.style.opacity = \"0\";\r\n\r\n                                if (lastItem2)\r\n                                    lastItem2.style.opacity = \"0\";\r\n\r\n\r\n                                lastItem = stonks[index];\r\n                                lastItem2 = stonks[index2];\r\n                                if (lastItem)\r\n                                    lastItem.style.opacity = \"1\";\r\n                                if (lastItem2)\r\n                                    lastItem2.style.opacity = \"1\";\r\n                            }, 1000)\r\n                        }\r\n                    }}\r\n                />\r\n            </Tab>\r\n            <Tab>\r\n                <Section title=\"Login\">\r\n                    <TextField placeholder='Email Address' returnKeyType=\"next\"\r\n                        onChangeText={(name) => setUsername(name)}\r\n                        textInputRef={userRef}\r\n                        style={{ marginVertical: sizes.rem1 }}\r\n                    />\r\n                    <TextField\r\n                        onChangeText={(pass) => setPassword(pass)}\r\n                        placeholder='Password'\r\n                        style={{ marginVertical: sizes.rem1 }}\r\n                        secureTextEntry textInputRef={passRef} />\r\n                    <Link style={{ paddingTop: 4, paddingBottom: 16, alignSelf: \"flex-end\" }} onPress={() => {\r\n                        setSelectedIndex(2)\r\n                    }}>Forgot Password?</Link>\r\n                </Section>\r\n            </Tab>\r\n            <Tab>\r\n                <View>\r\n                    <Text>Please enter your email address to recover your password:</Text>\r\n                    <TextField style={{ marginVertical: sizes.rem1 }} value={username} placeholder=\"Email Address\"\r\n                        onChangeText={(t) => {\r\n                            setUsername(t);\r\n                        }} />\r\n                    <PrimaryButton onPress={async () => {\r\n                        if (username && /(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])/.test(username)) {\r\n                            Api.Auth.forgotPassword(username, getCallBackUrl());\r\n                            toast.show(\"Recovery Email has been sent\");\r\n                        } else {\r\n                            toast.show(\"Please enter a valid email address\");\r\n                        }\r\n                    }}>Recover Password</PrimaryButton>\r\n                </View>\r\n            </Tab>\r\n        </TabView>\r\n\r\n        <Animated.Text style={[bannerText, {\r\n            opacity: !selectedIndex ? 1 : opacityAnim\r\n        }]}> {!selectedIndex ? \"Welcome to the team!\" : \"Hey... Welcome Back!\"}</Animated.Text>\r\n        <LoginButtons\r\n            createAccountProps={{ onPress: () => { linkTo(\"/create/logininfo\"); } }}\r\n            loginProps={{\r\n                onPress: async () => {\r\n                    if (selectedIndex !== 1) {\r\n                        setSelectedIndex(1);\r\n                        Animated.timing(\r\n                            opacityAnim,\r\n                            {\r\n                                delay: 0.75,\r\n                                toValue: 1,\r\n                                duration: 2000,\r\n                                useNativeDriver: true\r\n                            }).start();\r\n                    } else {\r\n                        if (!isLoggingIn) {\r\n                            try {\r\n                                setIsLoggingIn(true);\r\n                                await signIn(username, password);\r\n                                toast.hideAll();\r\n                                setIsLoggingIn(false);\r\n\r\n                            } catch (ex: any) {\r\n                                setIsLoggingIn(false);\r\n                                toast.show(ex.message);\r\n                            }\r\n                        }\r\n                        else {\r\n                            toast.show(\"Still working on logging you in....\", {\r\n                                duration: 5000\r\n                            })\r\n                        }\r\n                    }\r\n                }\r\n            }}\r\n        />\r\n\r\n    </View>\r\n        {!selectedIndex && Platform.OS !== \"web\" && <Pressable\r\n            onPress={() => {\r\n                navigation.navigate('AppInformation')\r\n            }}>\r\n            <Text style={{\r\n                textAlign: \"right\",\r\n                position: \"absolute\",\r\n                bottom: sizes.rem1,\r\n                right: sizes.rem1,\r\n                fontSize: fonts.large,\r\n                lineHeight: fonts.large * 1.5\r\n            }}>\r\n                What is TradingPost{\">>\"}\r\n            </Text>\r\n        </Pressable>}\r\n    </>\r\n\r\n}\r\n\r\nconst WTF_View = (props: {\r\n    onReady: (item: any) => void\r\n}) => {\r\n    return <View style={{ width: \"100%\", aspectRatio: 1.5 }}>\r\n        <SplashWelcome\r\n            onReady={props.onReady}\r\n        />\r\n    </View>\r\n}","import React, { ReactChild, useLayoutEffect, useState } from \"react\";\r\nimport { Text } from \"@ui-kitten/components\";\r\nimport { View, Image, Pressable } from \"react-native\";\r\n//import { ensureCurrentUser, signOut, useCurrentUser } from \"../apis/Authentication\";\r\nimport { LogoImage } from \"./LogoImage\";\r\nimport { font, fonts, rounded, sizes } from \"../style\";\r\nimport { Link } from \"./Link\";\r\n//import { SetPublicLayout, screens } from \"../layouts/BaseLayout\";\r\nimport { SvgProps } from \"react-native-svg\";\r\nimport { sideMenu } from \"../images\";\r\n//import { parts, screens } from \"../navigationComponents\";\r\n//import { Navigation } from \"react-native-navigation\";\r\n//import { DashProps, fullDashOptions } from \"../layouts/DashboardLayout\";\r\nimport { TBI } from \"../utils/misc\";\r\n//import Clipboard from '@react-native-clipboard/clipboard'\r\n//import { openProfileScreen } from \"../screens/ProfileScreen\";\r\nimport { useData } from \"../lds\";\r\nimport { SvgExpo } from \"./SvgExpo\";\r\n//import { useEnsureUser } from \"./EnsureUser\";\r\nimport { useRef } from \"react\";\r\n\r\nimport { useAppUser } from '../Authentication';\r\nimport { NavigationProp } from \"@react-navigation/native\";\r\nimport { DrawerContentComponentProps, DrawerContentScrollView, DrawerItem } from \"@react-navigation/drawer\";\r\n\r\nimport { ProfileButton } from \"./ProfileButton\";\r\nimport { useLinkTo } from \"@react-navigation/native\";\r\nimport { versionCode } from \"@tradingpost/common/api/entities/static/EntityApiBase\";\r\n\r\n\r\n\r\nconst padSmall = { marginBottom: sizes.rem1 / 8 };\r\n\r\nexport function SideMenu(props: DrawerContentComponentProps) {\r\n    //const { value: currentUser } = useData(\"currentUser\");\r\n    //const { value: loginResult } = useData(\"loginResult\");\r\n    const [activeTabIndex, setActiveTab] = useState(2);\r\n\r\n    // useLayoutEffect(() => {\r\n    //     const sub1 = Navigation.events().registerBottomTabSelectedListener(({ selectedTabIndex, unselectedTabIndex }) => {\r\n    //         setActiveTab(selectedTabIndex);\r\n    //     })\r\n    //     return () => sub1.remove();\r\n    // }, [])\r\n    //const { setValue: setHasAuthed } = useData(\"hasAuthed\");\r\n    const activeTabId = `BottomTabs_${activeTabIndex}`\r\n    const { signOut, loginState } = useAppUser();\r\n    const linkTo = useLinkTo<any>();\r\n    //Not sure if the issue here but this seems to work for now.\r\n    //const { EnsureUser, appUser, signOut } = useEnsureUser(props.navigation as any as NavigationProp<any>);\r\n    const currentUser = loginState?.appUser;\r\n    if (!currentUser) return;\r\n\r\n    return <DrawerContentScrollView contentContainerStyle={{ flexGrow: 1 }} style={{ flexGrow: 1, backgroundColor: \"white\" }}>\r\n        <View style={{ alignSelf: \"center\", alignItems: \"center\", backgroundColor: \"transparent\" }}>\r\n            <Pressable\r\n                style={{ alignItems: \"center\" }}>\r\n                <View\r\n                    style={[{ marginTop: sizes.rem1 }, padSmall]}\r\n                >\r\n                    <ProfileButton size={80} profileUrl={currentUser?.profile_url || \"\"} userId={currentUser?.id} />\r\n                </View>\r\n                <Text style={[font(\"xSmall\", \"black\", true), padSmall]} >@{currentUser.handle}</Text>\r\n                <Text style={[font(\"medium\", \"black\", true), padSmall]} >{currentUser.display_name}</Text>\r\n            </Pressable>\r\n            <Text style={[font(\"xSmall\", \"darkgray\", true), padSmall]} >Subscribers: {currentUser.subscription?.count}</Text>\r\n            <Link onPress={() => {\r\n\r\n                props.navigation.navigate(\"Subscription\");\r\n\r\n            }} style={{ fontSize: fonts.xSmall, fontWeight: \"bold\" }}\r\n            // onPress={() =>\r\n            //      screens.push(activeTabId, \"ManageSubscriptions\", {\r\n            //     options: fullDashOptions,\r\n            //     passProps: { isFullscreen: true } as DashProps\r\n            // })}\r\n            >Manage Subscriptions</Link>\r\n        </View>\r\n        {([{\r\n            label: \"Profile\",\r\n            onPress: () => props.navigation.navigate(\"Profile\", {\r\n                userId: currentUser.id\r\n            }),\r\n            icon: sideMenu.Profile\r\n        },\r\n        {\r\n            label: \"Watchlists\",\r\n            onPress: () => props.navigation.navigate(\"Watchlist\"),\r\n            //onPress: () => linkTo('/create/watchlist'),\r\n            icon: sideMenu.Watchlist,\r\n        },\r\n        {\r\n            label: \"Bookmarks\",\r\n            onPress: () => props.navigation.navigate(\"Feed\", {\r\n                bookmarkedOnly: \"true\"\r\n            }),\r\n            icon: sideMenu.BookmarkActiveBlue,\r\n        },\r\n        {\r\n            label: \"App Features\",\r\n            onPress: () => props.navigation.navigate(\"AppInformation\"),\r\n\r\n            icon: sideMenu.Information,\r\n        },\r\n        {\r\n            label: \"Settings\",\r\n            //onPress: () => props.navigation.navigate(\"Create\"),\r\n            onPress: () => props.navigation.navigate(\"AccountInformation\"),\r\n            icon: sideMenu.Account,\r\n        },\r\n        {\r\n            label: \"Link Brokerage!\",\r\n            //onPress: () => props.navigation.navigate(\"Create\"),\r\n            onPress: () => props.navigation.navigate(\"BrokeragePicker\"),\r\n            icon: sideMenu.Bank_Link,\r\n        },\r\n        {\r\n            label: \"Logout\",\r\n            onPress: () => {\r\n                signOut();\r\n                //TODO: Investigate why this is needed and linkto doesn't seem to work.\r\n                //props.navigation.getParent()?.replace(\"Root\");\r\n\r\n            },\r\n            icon: sideMenu.LogOut\r\n        }] as { onPress?: () => void, label: string, icon: React.FC<SvgProps> }[]).map((item, index, array) => {\r\n            return <MenuItem\r\n                key={\"SM_\" + index}\r\n                icon={item.icon}\r\n                size={\"10%\"}\r\n                onPress={item.onPress || TBI}\r\n                navigation={props.navigation}\r\n                isLast={index === array.length - 1}\r\n            >{item.label}</MenuItem>\r\n        })}\r\n        <Text style={{ textAlign: \"center\" }}>Api Version: {versionCode}</Text>\r\n    </DrawerContentScrollView>\r\n}\r\n\r\nfunction MenuItem(props: { navigation: DrawerContentComponentProps[\"navigation\"], children: string, icon: React.FC<SvgProps>, onPress?: () => void, isLast?: boolean, size?: string | number }) {\r\n    const { icon: SvgElement } = props\r\n    return <DrawerItem\r\n        style={props.isLast ? { marginTop: \"auto\" } : undefined}\r\n        label={props.children}\r\n        icon={(props) => <SvgExpo height={props.size} width={props.size} style={{ height: props.size, width: props.size }}>\r\n            <SvgElement />\r\n        </SvgExpo>}\r\n        onPress={() => {\r\n            props.onPress?.call(undefined);\r\n            props.navigation.closeDrawer();\r\n        }\r\n        }\r\n        labelStyle={{ marginLeft: -16, }}\r\n\r\n    />\r\n    /* <Text style={{ fontSize: fonts.small, marginLeft: 16 }}>{}</Text> */\r\n}","import React, {useEffect, useState} from \"react\";\r\nimport {Pressable} from \"react-native\";\r\nimport {View} from \"react-native\";\r\nimport {Layout, Text} from '@ui-kitten/components';\r\nimport {List} from \"../components/List\";\r\nimport {flex, fonts, sizes} from \"../style\";\r\nimport {Api} from '@tradingpost/common/api';\r\nimport {ListAlertsResponse} from \"@tradingpost/common/api/entities/interfaces\";\r\nimport {ElevatedSection} from \"../components/Section\";\r\nimport {NavigationProp, useNavigation} from \"@react-navigation/native\";\r\nimport {SecondaryButton} from \"../components/SecondaryButton\";\r\n\r\nlet seen = false;\r\n\r\nexport const NotificationScreen = () => {\r\n    const [notifs, setNotifs] = useState([] as ListAlertsResponse[]);\r\n    useEffect(() => {\r\n        if (seen) {\r\n            const run = async () => {\r\n                const ids = notifs.filter(n => !n.seen).map(n => n.id);\r\n                const res = await Api.Notification.extensions.seenNotifications({notificationIds: ids});\r\n            }\r\n            run();\r\n            return\r\n        }\r\n\r\n        let timer = setTimeout(async () => {\r\n            const ids = notifs.filter(n => !n.seen).map(n => n.id);\r\n            await Api.Notification.extensions.seenNotifications({notificationIds: ids});\r\n        }, 1500)\r\n\r\n        seen = true;\r\n        return () => {\r\n            clearTimeout(timer)\r\n        };\r\n    }, [notifs])\r\n\r\n    return <View style={{flex: 1, backgroundColor: \"#F7f8f8\"}}>\r\n        <View>\r\n            <Layout style={{\r\n                backgroundColor: \"#ffffff\",\r\n                paddingBottom: '2%',\r\n                paddingTop: '2%',\r\n                borderBottomColor: '#11146F',\r\n                borderStyle: 'solid',\r\n                borderBottomWidth: 2,\r\n                marginBottom: 10\r\n            }}>\r\n                <Text style={{\r\n                    margin: 2,\r\n                    textAlign: 'center',\r\n                    fontSize: 20,\r\n                    fontWeight: '600',\r\n                    color: '#11146F',\r\n                }}>Notifications</Text>\r\n            </Layout>\r\n            <List\r\n                key={\"STATIC\"}\r\n                datasetKey={\"__________\"}\r\n                getItemLayout={(items, index, sizeCache) => {\r\n                    const curItem = items?.[index];\r\n                    return typeof curItem === 'object' ? sizeCache[index] : {\r\n                        index,\r\n                        offset: sizeCache[index - 1].offset + sizeCache[index - 1].length,\r\n                        length: 10\r\n                    };\r\n                }}\r\n                data={async (allItems: any, page: number, sizeCache: any[]): Promise<ListAlertsResponse[]> => {\r\n                    const notifications = (await Api.Notification.extensions.listAlerts({\r\n                        page,\r\n                    }));\r\n                    const newNotifications = [...(allItems || []), ...notifications];\r\n                    setNotifs(newNotifications);\r\n                    newNotifications.forEach((item, index) => {\r\n                        if (!sizeCache[index]) {\r\n                            sizeCache[index] = {\r\n                                index,\r\n                                offset: index ? sizeCache[index - 1].offset + sizeCache[index - 1].length : 0,\r\n                                length: 0,\r\n                            }\r\n                        }\r\n                    });\r\n                    return newNotifications;\r\n                }}\r\n                keyExtractor={(item: any, index) => typeof item === 'string' ? \"loadingtext\" : (index + \"_\" + item._id)}\r\n                preloadOffset={1}\r\n                renderItem={(item) => {\r\n                    if (typeof item.item === \"string\") {\r\n                        return <Text style={{textAlign: \"center\", fontSize: fonts.large}}>Loading More...</Text>\r\n                    }\r\n                    switch (item.item.type) {\r\n                        case \"NEW_USER_INTERACTION\":\r\n                            return <UserInteractionNotification response={item.item}/>;\r\n                        case \"NEW_TRADES\":\r\n                            return <NewTradeNotification response={item.item}/>\r\n                        case \"NEW_SUBSCRIPTION\":\r\n                            return <SubscriptionNotification response={item.item}/>\r\n                        default:\r\n                            console.error(`Follow Type: ${item.item.type} not registered`);\r\n                            return <DefaultNotification response={item.item}/>\r\n                    }\r\n                }}\r\n                noDataMessage={\"No Notifications Available\"}\r\n                loadingItem={\" \"}\r\n            />\r\n        </View>\r\n    </View>\r\n}\r\n\r\nconst NotificationTab: React.FC<any> = (props: any) => {\r\n    return <ElevatedSection title={\"\"} style={{marginHorizontal: sizes.rem2 / 2, marginBottom: sizes.rem1}}>\r\n        <View style={{marginBottom: -sizes.rem0_5, paddingVertical: 6}}>\r\n            <View style={{flexDirection: \"row\", width: \"100%\", marginBottom: sizes.rem0_5}}>\r\n                <View style={[flex, {marginLeft: sizes.rem0_5}]}>\r\n                    {props.children}\r\n                </View>\r\n            </View>\r\n        </View>\r\n    </ElevatedSection>\r\n}\r\n\r\nconst NewTradeNotification = (props: { response: ListAlertsResponse }): JSX.Element => {\r\n    const dt = new Date(props.response.dateTime);\r\n    const dtFmt = `${dt.getMonth()}/${dt.getDay()}/${dt.getFullYear() % 100}`\r\n\r\n    const nav = useNavigation<NavigationProp<any>>();\r\n    const openTrades = () => {\r\n        nav.navigate(\"NotificationTrade\")\r\n    }\r\n\r\n    return <NotificationTab>\r\n        <Pressable onPress={openTrades}>\r\n            <View style={{flex: 1, flexWrap: 'wrap'}}>\r\n                <View style={{flexDirection: 'row'}}>\r\n                    <Text style={{marginRight: 10, fontFamily: \"K2D\"}}>\r\n                        {dtFmt}\r\n                    </Text>\r\n                    <Text style={{flex: 1, flexWrap: 'wrap'}}>\r\n                        {props.response.data.message} <Text style={{fontWeight: 'bold'}}>Click to learn more.</Text>\r\n                    </Text>\r\n                </View>\r\n            </View>\r\n        </Pressable>\r\n    </NotificationTab>\r\n}\r\n\r\nconst UserInteractionNotification = (props: { response: ListAlertsResponse }): JSX.Element => {\r\n    const nav = useNavigation<NavigationProp<any>>();\r\n    const openProfile = () => {\r\n        if (props.response.data?.userId) {\r\n            nav.navigate(\"Profile\", {\r\n                userId: props.response.data?.userId\r\n            });\r\n        }\r\n    }\r\n\r\n    const dt = new Date(props.response.dateTime);\r\n    const dtFmt = `${dt.getMonth()}/${dt.getDay()}/${dt.getFullYear() % 100}`\r\n    return <NotificationTab>\r\n        <Pressable\r\n            onPress={openProfile}>\r\n            <View style={{flex: 1}}>\r\n                <View style={{flexDirection: 'row'}}>\r\n                    <Text style={{marginRight: 10}}>\r\n                        {dtFmt}\r\n                    </Text>\r\n                    <Text>\r\n                        <Text\r\n                            style={{fontWeight: \"bold\"}}>@{props.response.data.handle}</Text>{' '}{props.response.data.message}\r\n                    </Text>\r\n                </View>\r\n            </View>\r\n        </Pressable>\r\n    </NotificationTab>\r\n}\r\nconst SubscriptionNotification = (props: { response: ListAlertsResponse }): JSX.Element => {\r\n    const nav = useNavigation<NavigationProp<any>>();\r\n    const openProfile = () => {\r\n        if (props.response.data?.userId) {\r\n            nav.navigate(\"Profile\", {\r\n                userId: props.response.data?.userId\r\n            });\r\n        }\r\n    }\r\n    const [approval, setApproval] = useState(props.response.data.approved)\r\n\r\n    const dt = new Date(props.response.dateTime);\r\n    const dtFmt = `${dt.getMonth() + 1}/${dt.getDate()}/${dt.getFullYear() % 100}`\r\n    return <NotificationTab>\r\n        <Pressable\r\n            onPress={openProfile}>\r\n            <View style={{flex: 1}}>\r\n                <View style={{flexDirection: 'row'}}>\r\n                    <Text style={{marginRight: 10}}>\r\n                        {dtFmt}\r\n                    </Text>\r\n                    <Text style={{flex: 1, flexWrap: 'wrap'}}>\r\n                        <Text\r\n                            style={{fontWeight: \"bold\"}}>@{props.response.data.handle}</Text>{' '}{props.response.data.message}\r\n                    </Text>\r\n                    <SecondaryButton\r\n                        children={'Approve'}\r\n                        style={{\r\n                            display: approval ? 'none' : 'flex',\r\n                            backgroundColor: \"#35A265\", borderColor: \"#35A265\",\r\n                            minHeight: 26,\r\n                            height: 26,\r\n                            minWidth: 70,\r\n                            alignSelf: \"center\",\r\n                            paddingTop: 0,\r\n                            paddingBottom: 0,\r\n                            paddingLeft: 0,\r\n                            paddingRight: 0\r\n                        }}\r\n                        onPress={async () => {\r\n                            try {\r\n                                await Api.Subscriber.update(props.response.data.subscriber_id, {\r\n                                    approved: true,\r\n                                });\r\n                                console.log('past first call')\r\n                                await Api.Notification.extensions.updateNotification({\r\n                                    id: props.response.id,\r\n                                    dateTime: props.response.dateTime,\r\n                                    data: {\r\n                                        ...props.response.data,\r\n                                        approved: true\r\n                                    },\r\n                                    seen: true,\r\n                                    type: props.response.type\r\n                                });\r\n                                setApproval(true)\r\n                            } catch (e) {\r\n                                console.error(e)\r\n                            }\r\n                            \r\n                        }}\r\n                    />\r\n                </View>\r\n            </View>\r\n        </Pressable>\r\n    </NotificationTab>\r\n}\r\n\r\nconst DefaultNotification = (props: { response: ListAlertsResponse }): JSX.Element => {\r\n    return <NotificationTab>\r\n        <Text>\r\n            {props.response.data.message}\r\n        </Text>\r\n    </NotificationTab>\r\n}","import React from \"react\"\r\nimport { List } from \"../components/List\"\r\nimport { View } from 'react-native'\r\nimport { Text } from '@ui-kitten/components'\r\nimport { AllPages, TabScreenProps } from \"../navigation\"\r\nimport { NavigationProp, useNavigation } from \"@react-navigation/native\"\r\nimport { Link } from \"../components/Link\"\r\nimport { flex, paddView, paddViewWhite } from \"../style\"\r\nimport { ElevatedSection, Section } from \"../components/Section\"\r\nimport { Header } from \"../components/Headers\"\r\nimport { AppColors } from \"../constants/Colors\"\r\n\r\n\r\nexport function LimitedBlockList<T>(props: {\r\n    maxPage?: number,\r\n    \r\n    listKey: string,\r\n    title: string,\r\n    listProps: Omit<Parameters<typeof List>[0], \"maxPage\">\r\n}) {\r\n    const nav = useNavigation();\r\n    return <View style={[{}]}>\r\n        <View>\r\n            <List {...props.listProps} listKey={props.listKey} maxPage={props.maxPage} />\r\n        </View>\r\n        <Link\r\n            style={{\r\n                marginLeft: \"auto\"\r\n            }}\r\n            onPress={() => {\r\n                nav.navigate(\"BlockListModal\", {\r\n                    listProps: props.listProps as any,\r\n                    title: props.title\r\n                })\r\n            }}>View All</Link>\r\n    </View>\r\n}\r\n\r\nexport function BlockListModalScreen<T>(props: TabScreenProps<{ title: string, listProps: Parameters<typeof List>[0] }>) {\r\n    return (\r\n        props.route?.params?.listProps ? \r\n        <View style={paddView}>\r\n            <Section title={props.route.params.title} style={{backgroundColor: AppColors.background}}>\r\n                <List {...props.route?.params?.listProps} />\r\n            </Section>\r\n        </View> : \r\n        <Text>Error</Text>\r\n        )\r\n}","import { Api } from \"@tradingpost/common/api\";\r\nimport { AllWatchlists, IWatchlistGet, IWatchlistList } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Animated, ScrollView, TextStyle, View } from \"react-native\";\r\nimport { AddButton, EditButton } from \"../components/AddButton\";\r\nimport { Avatar, Icon, Text } from '@ui-kitten/components'\r\nimport { ElevatedSection, Section, Subsection } from \"../components/Section\";\r\nimport { Table } from \"../components/Table\";\r\nimport { DataOrQuery, List } from '../components/List'\r\n\r\nimport { flex, fonts, paddView, sizes } from \"../style\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { SecPressable, useMakeSecurityFields, useWatchlistItemColumns } from \"./WatchlistViewerScreen\";\r\nimport { AwaitedReturn, toPercent, toPercent2, toThousands, toDollarsAndCents, toDollars, toNumber2, toNumber1, toFormatedDateTime } from \"../utils/misc\";\r\nimport { WatchlistSection } from \"../components/WatchlistSection\";\r\nimport Theme from '../theme-light.json'\r\nimport { LimitedTable } from \"./TableModalScreen\";\r\nimport { ButtonGroup } from \"../components/ButtonGroup\";\r\nimport { LineHolder, PieHolder } from \"../components/PieHolder\";\r\nimport { AppColors } from \"../constants/Colors\";\r\nimport { LineChart } from \"../components/LineChart\";\r\nimport InteractiveChart from \"../components/InteractiveGraph\";\r\nimport { DashTabScreenProps, RootStackScreenProps } from \"../navigation/pages\";\r\nimport { TooltipComponent } from \"../components/ToolTip\";\r\nimport { useSecuritiesList } from \"../SecurityList\";\r\nimport { Header } from \"../components/Headers\";\r\nimport { WatchlistItemRenderItem } from \"../components/WatchlistItemRenderItem\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\nimport { HoldingRenderItem } from \"../components/HoldingRenderItem\";\r\nimport { TradeRenderItem } from \"../components/TradeRenderItem\";\r\nimport { LimitedBlockList } from \"./BlockListModalScreen\";\r\n\r\nconst styles = {\r\n    stateLabel: {\r\n        color: Theme[\"color-info-800\"],\r\n        textAlign: \"center\"\r\n    } as TextStyle,\r\n    stateValue: {\r\n        // color: AppColors.primary,\r\n        textAlign: \"center\",\r\n        marginBottom: sizes.rem0_5\r\n    } as TextStyle,\r\n}\r\ntype TradeReturnType = AwaitedReturn<typeof Api.User.extensions.getTrades>\r\n\r\nconst periods: { [key: string]: number } = {\r\n    \"1D\": 1,\r\n    \"1W\": 5,\r\n    \"1M\": 20,\r\n    \"3M\": 60,\r\n    \"1Y\": 252,\r\n    \"2Y\": 504,\r\n    \"Max\": 1000\r\n}\r\nexport const PortfolioScreen = (props: DashTabScreenProps<\"Portfolio\">) => {\r\n    const nav = useNavigation();\r\n    const [watchlists, setWatchlists] = useState<AllWatchlists>()\r\n    const [quickWatchlist, setQuickWatchlist] = useState<IWatchlistGet>()\r\n    const [shownMap, setShownMap] = useState<Record<string, boolean>>({})\r\n    const toast = useToast();//const [trades, setTrades] = useState<AwaitedReturn<typeof Api.User.extensions.getTrades>>();\r\n    const [holdings, setHoldings] = useState<AwaitedReturn<typeof Api.User.extensions.getHoldings>>();\r\n    const [trades, setTrades] = useState<AwaitedReturn<typeof Api.User.extensions.getTrades>>();\r\n    const [portfolio, setPortfolio] = useState<AwaitedReturn<typeof Api.User.extensions.getPortfolio>>();\r\n    const [returns, setReturns] = useState<AwaitedReturn<typeof Api.User.extensions.getReturns>>();\r\n    const [twReturns, settwReturns] = useState<{ x: string, y: number }[]>();\r\n    const [portPeriod, setPortPeriod] = useState(\"1Y\")\r\n    const [focus, setFocus] = useState(false);\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                const [lists, holdings] = await Promise.all([\r\n                    Api.Watchlist.extensions.getAllWatchlists(),\r\n                    Api.User.extensions.getHoldings({})\r\n                ]);\r\n                \r\n                //KEeping apart for now .. seems to have an error\r\n                try {\r\n                    const portfolio = await Api.User.extensions.getPortfolio({});\r\n                    setPortfolio(portfolio);\r\n                } catch (ex) {\r\n                    console.error(ex);\r\n                }\r\n\r\n                if (lists.quick.id) {\r\n                    setQuickWatchlist(await Api.Watchlist.get(lists.quick.id));\r\n                }\r\n                else {\r\n                    setQuickWatchlist({\r\n                        id: 0,\r\n                        items: [],\r\n                        name: \"\",\r\n                        saved_by_count: 0,\r\n                        type: \"primary\",\r\n                        user: [],\r\n                        is_saved: false\r\n                    })\r\n                }\r\n                setWatchlists(lists);\r\n                setHoldings(holdings);\r\n                setFocus((f) => !f)\r\n            }\r\n            catch (ex: any) {\r\n                toast.show(ex.message);\r\n            }\r\n        })()\r\n    }, [])\r\n\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                let today = new Date();\r\n                const returns = await Api.User.extensions.getReturns({\r\n                    startDate: new Date(today.setDate(today.getDate() - 1001)),\r\n                    endDate: new Date()\r\n                })\r\n                setReturns(returns);\r\n                if (!returns.length)\r\n                    return\r\n                let twr: { x: string, y: number }[] = [];\r\n                const day = new Date(String(returns.slice(returns.length - periods[portPeriod])[0].date))\r\n                twr.push({ x: (new Date(day.setDate(day.getDate() - 1))).toUTCString(), y: 1 })\r\n                //twr.push(JSON.parse(JSON.stringify(returns[returns.length - periods[portPeriod]])));\r\n                //twr[0].return = 1;\r\n                //const day = new Date(String(twr[0].date))\r\n                //twr[0].date = new Date(day.setDate(day.getDate() - 1));\r\n                returns?.slice(returns.length - periods[portPeriod]).forEach((r, i) => {\r\n                    twr.push({ x: new Date(String(r.date)).toUTCString(), y: twr[i].y * (1 + r.return) })\r\n                    //twr.push(JSON.parse(JSON.stringify(r)));\r\n                    //twr[i+1].return = twr[i].return * (1 + r.return);\r\n                })\r\n\r\n                settwReturns(twr);\r\n\r\n            } catch (err) {\r\n                console.error(err)\r\n            }\r\n        })()\r\n    }, [])\r\n    useEffect(() => {\r\n        if (!returns || !returns.length) {\r\n            return\r\n        }\r\n\r\n        let twr: { x: string, y: number }[] = [];\r\n        const day = new Date(String(returns.slice(returns.length - periods[portPeriod])[0].date))\r\n        twr.push({ x: (new Date(day.setDate(day.getDate() - 1))).toUTCString(), y: 1 })\r\n        //twr.push(JSON.parse(JSON.stringify(returns[returns.length - periods[portPeriod]])));\r\n        //twr[0].return = 1;\r\n        //const day = new Date(String(twr[0].date))\r\n        //twr[0].date = new Date(day.setDate(day.getDate() - 1));\r\n        returns?.slice(returns.length - periods[portPeriod]).forEach((r, i) => {\r\n            twr.push({ x: new Date(String(r.date)).toUTCString(), y: twr[i].y * (1 + r.return) })\r\n            //twr.push(JSON.parse(JSON.stringify(r)));\r\n            //twr[i+1].return = twr[i].return * (1 + r.return);\r\n        })\r\n        settwReturns(twr);\r\n\r\n    }, [portPeriod])\r\n\r\n    let cummReturn = 0;\r\n    const { securities: { bySymbol, byId } } = useSecuritiesList();\r\n\r\n    if (twReturns) cummReturn = twReturns[twReturns.length - 1].y - 1;\r\n    const { columns: watchlistItemColumns } = useWatchlistItemColumns(true)\r\n    return <View style={[paddView]}>\r\n        <Animated.FlatList\r\n            key={'top_level_portfolio_screen'}\r\n            data={[\r\n                <View key={\"portfolio_\"} >\r\n                    <Header text=\"Performance\"/>\r\n                    <ElevatedSection key={'pertformance_chart_section'} alt={true} title=\"\" style={(twReturns === undefined) ? { display: 'none' } : { display: 'flex' }}>\r\n                        <View key={'performance_chart'} style={{ marginBottom: sizes.rem1 }} >\r\n                            {/*<LineHolder data={twReturns} />*/}\r\n                            <InteractiveChart data={twReturns} period={portPeriod} performance={true} />\r\n                        </View>\r\n                        <ButtonGroup key={\"period\"} items={[\"1D\", \"1W\", \"1M\", \"3M\", \"1Y\", \"2Y\", \"Max\"].map(v => ({ label: v, value: v }))} onValueChange={(v) => setPortPeriod(v)} value={portPeriod} />\r\n                        <View key={'portfolio_stats'} style={[portfolio ? { display: 'flex' } : { display: 'none' }, { borderColor: \"#ccc\", borderWidth: 1, backgroundColor: \"#f5f5f5\", padding: sizes.rem0_5 / 2, borderRadius: 4, marginBottom: 12 }]}>\r\n                            \r\n                            <View key={\"returns\"} style={{ flexDirection: \"row\" }}>\r\n                                {[\r\n                                    { title: \"Total Return\", value: toPercent2(cummReturn) },\r\n                                    { title: \"Beta\", value: toNumber2(portfolio?.beta || 0) },\r\n                                    { title: \"Sharpe Ratio\", value: toPercent2(portfolio?.sharpe || 0) }]\r\n                                    .map((item, idx) => {\r\n                                        return <View key={\"key_\" + idx} style={flex}>\r\n                                            <Text style={styles.stateLabel} >{item.title}</Text>\r\n                                            <Text style={styles.stateValue}>{item.value}</Text>\r\n                                        </View>\r\n                                    })}\r\n                            </View>\r\n                            <View key=\"exposures\" style={{ flexDirection: \"row\" }}>\r\n                                {[\r\n                                    { title: \"Long\", value: portfolio?.exposure?.long || 0 },\r\n                                    { title: \"Short\", value: portfolio?.exposure?.short || 0 },\r\n                                    { title: \"Gross\", value: portfolio?.exposure?.gross || 0 },\r\n                                    { title: \"Net\", value: portfolio?.exposure?.net || 0 }]\r\n                                    .map((item, idx) => {\r\n                                        return <View key={\"key_\" + idx} style={flex}>\r\n                                            <Text style={styles.stateLabel} >{item.title}</Text>\r\n                                            <Text style={styles.stateValue}>{toPercent(item.value)}</Text>\r\n                                        </View>\r\n                                    })}\r\n                            </View>\r\n                            <View style={{flex: 1, paddingHorizontal: sizes.rem1}}>\r\n                                <Text style={{fontSize: fonts.xSmall}}>{\"Return calculations are in beta. The more feedback you can provide us, the better we can do!\"}</Text>\r\n                            </View>\r\n                        </View>\r\n                    </ElevatedSection>\r\n                    <Section key=\"holdings\" alt={true} title=\"Holdings\" style={[holdings && holdings.length > 0 ? { display: 'flex' } : { display: 'none' }, {backgroundColor: AppColors.background}]}>{\r\n                        <List\r\n                            listKey=\"holdingsList\"\r\n                            datasetKey={`holdings_id_${holdings?.length}`}\r\n                            data={holdings}\r\n                            loadingMessage={\" \"}\r\n                            noDataMessage={\" \"}\r\n                            loadingItem={undefined}\r\n                            numColumns={2}\r\n                            renderItem={(item) => {\r\n                                return (\r\n                                    <HoldingRenderItem \r\n                                        item={item}\r\n                                        byId={byId}\r\n                                        isOwner={true}\r\n                                        />\r\n                                )\r\n                            }}\r\n                        />\r\n                    }</Section>\r\n                    <Section key=\"trades\" alt={true} title=\"Trades\" style={[!(holdings && twReturns && portfolio) ? { display: 'none' } : { display: 'flex' }, {backgroundColor: AppColors.background}]}>\r\n                        <LimitedBlockList \r\n                            listKey=\"portfolio_trades_table\"\r\n                            key={'trades_table'}\r\n                            maxPage={0}\r\n                            title={'All Trades'}\r\n                            listProps={{\r\n                                keyExtractor: (item: any, idx) => {\r\n                                    return item ? \"trade_\" + item.securityId + item.date : \"empty\";\r\n                                },\r\n                                datasetKey: `trades_id_`,\r\n                                data: async (a, $page, $limit) => {\r\n                                    const newArr = a || [];\r\n                                    newArr.push(... (await Api.User.extensions.getTrades({ $page, settings: {} })))\r\n                                    return newArr;\r\n                                } ,\r\n                                loadingMessage: \" \",\r\n                                noDataMessage: \" \",\r\n                                loadingItem: undefined,\r\n                                numColumns: 2,\r\n                                renderItem: (item: any) => {\r\n                                    return (\r\n                                        <TradeRenderItem\r\n                                            item={item}\r\n                                            byId={byId}\r\n                                            isOwner={true}\r\n                                            />\r\n                                    )\r\n                                }}\r\n                                }\r\n                            \r\n                            />\r\n\r\n                    </Section>\r\n                    <Text style={[(holdings && twReturns && portfolio) ? { display: 'none' } : { display: 'flex' },\r\n                    { fontSize: fonts.medium, fontWeight: '500', color: '#ccc' }]}>\r\n                        {\"You haven't linked a brokerage to TradingPost. Go to your Account page in the Side Menu and Link one today!\"}\r\n                    </Text>\r\n                </View>,\r\n                <View>\r\n                    <View style={{flex: 1, flexDirection: 'row'}}>\r\n                        <Header key={\"quick_watch\"} text=\"Quick Watch\" style={{flex: 1}}/>\r\n                        <View style={{marginBottom: sizes.rem0_5 / 2, marginHorizontal: 6}}> \r\n                            {  \r\n                                watchlists?.quick.id ?\r\n                                    <EditButton\r\n                                        height={24}\r\n                                        width={24} \r\n                                        onPress={() => {\r\n                                            nav.navigate(\"WatchlistEditor\", {\r\n                                                watchlistId: watchlists?.quick.id\r\n                                            })\r\n                                    }} /> :\r\n                                    <AddButton\r\n                                        height={24}\r\n                                        width={24} \r\n                                        onPress={() => {\r\n                                            nav.navigate(\"WatchlistEditor\", {\r\n                                                watchlistId: -1\r\n                                            })\r\n                                    }} />\r\n                                }\r\n                        </View>\r\n                    </View>\r\n                    \r\n                    <List\r\n                        datasetKey={`quick_watch_${focus}`}\r\n                        listKey=\"quick_watch_list\"\r\n                        loadingMessage={\" \"}\r\n                        noDataMessage={\" \"}\r\n                        loadingItem={undefined}\r\n                        numColumns={2}\r\n                        data={quickWatchlist?.items}\r\n                        renderItem={(item) => {                   \r\n                            const hideEmptyNote = false\r\n                            return (\r\n                                <WatchlistItemRenderItem\r\n                                    item={item}\r\n                                    bySymbol={bySymbol}\r\n                                    byId={byId}\r\n                                    hideEmptyNote={hideEmptyNote}\r\n                                    setShownMap={setShownMap}\r\n                                    shownMap={shownMap}\r\n                                    watchlist={quickWatchlist}\r\n                                        />\r\n                            )\r\n                        }}\r\n                    />\r\n\r\n                </View>\r\n                ,\r\n                <WatchlistSection\r\n                    datasetKey={`my_watchlist_${focus}`}\r\n                    title=\"My Watchlists\"\r\n                    key={\"my_watchlist\"}\r\n                    watchlists={watchlists?.created}\r\n                    showAddButton\r\n                    hideNoteOnEmpty\r\n                />,\r\n                <WatchlistSection\r\n                    datasetKey={`shared_watch_${focus}`}\r\n                    title=\"Shared Watchlists\"\r\n                    key={\"shared_watchlist\"}\r\n                    watchlists={watchlists?.saved}\r\n                    shared\r\n                />\r\n            ]}\r\n            renderItem={(info) => {\r\n                return info.item;\r\n            }}\r\n        >\r\n        </Animated.FlatList>\r\n    </View >\r\n\r\n}","import { Icon, Input } from \"@ui-kitten/components\";\r\nimport React, { useRef } from \"react\";\r\nimport { ImageProps, ViewStyle, TextInputProps, Image, ViewProps, Pressable } from \"react-native\";\r\nimport { ITextField, TextField } from \"../components/TextField\";\r\nimport { navIcons } from \"../images\";\r\n\r\nexport const SearchBar = (props: { onTextChange: (text: string) => void, placeholder?: string } & Pick<ViewProps, \"onLayout\">) => {\r\n    const tfRef = useRef<ITextField>(null)\r\n\r\n    return <TextField\r\n        textInputRef={tfRef}\r\n        onLayout={props.onLayout}\r\n        //enableErrors={false}\r\n        //hideUnderline\r\n        accessoryLeft={\r\n            () => {\r\n                return <Image source={navIcons.Search.inactive} style={{\r\n                    height: 20,\r\n                    width: 20,\r\n                    padding: 8,\r\n                    marginHorizontal: 12,\r\n                    transform: [\r\n                        { scaleX: -1 }\r\n                    ]\r\n                }} />\r\n            }\r\n        }\r\n        accessoryRight={\r\n            () => {\r\n                return <Pressable onPress={() => {\r\n                    tfRef.current?.field.current?.clear();\r\n                    props.onTextChange(\"\");\r\n                }}><Icon name=\"close-outline\" style={{\r\n                    height: 20,\r\n                    width: 20,\r\n                    padding: 8,\r\n                    marginHorizontal: 12,\r\n                    transform: [\r\n                        { scaleX: -1 }\r\n                    ]\r\n                }} /></Pressable>\r\n            }\r\n        }\r\n        // style={{\r\n\r\n        // } as ViewStyle} containerStyle={{\r\n        //     marginBottom: 0,\r\n        //     borderBottomColor: \"#d5d5d5\",\r\n        //     borderBottomWidth: 1,\r\n        //     paddingVertical: 16\r\n        // } as ViewStyle}\r\n        {\r\n        ...{\r\n            placeholder: props.placeholder || \"Search...\",\r\n            clearButtonMode: \"while-editing\",\r\n            onChangeText: (text) => {\r\n                props.onTextChange(text);\r\n            }\r\n        } as TextInputProps} />\r\n}","import {createBottomTabNavigator} from \"@react-navigation/bottom-tabs\";\r\nimport {NavigationProp} from \"@react-navigation/native\";\r\nimport React, {useEffect, useState} from \"react\";\r\nimport {ImageBackground, ImageSourcePropType} from \"react-native\";\r\nimport {NavIconKeys, navIcons, NavIconTypeOverride} from \"../images\";\r\nimport {FeedScreen} from \"../screens/FeedScreen\";\r\nimport {NotificationScreen} from \"../screens/NotificationScreen\";\r\nimport {PortfolioScreen} from \"../screens/PortfolioScreen\";\r\nimport {SearchScreen} from \"../screens/SearchScreen\";\r\nimport {Api} from \"@tradingpost/common/api\";\r\n\r\nconst BottomTab = createBottomTabNavigator<any>();\r\nconst DashComponents: Record<keyof typeof navIcons, { c: React.ComponentType<any>, p?: any, headerRight?: (props: { navigation: NavigationProp<any>, route: any }) => React.ReactNode }> = {\r\n    Portfolio: {\r\n        c: PortfolioScreen\r\n    },\r\n    Feed: {\r\n        c: FeedScreen\r\n    },\r\n    Search: {\r\n        c: SearchScreen,\r\n    },\r\n    Notification: {\r\n        c: NotificationScreen,\r\n    }\r\n}\r\n\r\nexport function BottomTabNavigator() {\r\n    const [hasNotifications, setHasNotifications] = useState(false);\r\n    useEffect(() => {\r\n        const t = async () => {\r\n            const notificationCount = await Api.Notification.extensions.hasNotifications();\r\n            setHasNotifications(notificationCount.unseenCount > 0);\r\n        }\r\n\r\n        t();\r\n        //We should just use the notification networks... either a notification is received when the app is open...\r\n        // or when the app opens it checks for notifications \r\n            \r\n        const interval = setInterval(async () => {\r\n            const notificationCount = await Api.Notification.extensions.hasNotifications();\r\n            setHasNotifications(notificationCount.unseenCount > 0);\r\n        }, 5000);\r\n\r\n        return () => {\r\n            clearInterval(interval)\r\n        }\r\n    }, []);\r\n\r\n    return <BottomTab.Navigator\r\n        initialRouteName=\"Feed\"\r\n        screenOptions={{\r\n            //tabBarActiveTintColor: Colors[colorScheme].tint,\r\n            headerShown: false\r\n        }}>\r\n        {Object.keys(navIcons).map((n) =>\r\n            <BottomTab.Screen\r\n                key={n}\r\n                name={n}\r\n                options={({navigation, route}) => ({\r\n                    //TODO: this makes things a bit choppy .. shoudl change in the future\r\n                    unmountOnBlur: true,\r\n                    tabBarShowLabel: false,\r\n                    lazy: true,\r\n                    tabBarIcon: ({color, focused, size}) => {\r\n                        const activeType = focused ? \"active\" : \"inactive\";\r\n                        let navIcon: ImageSourcePropType = navIcons[n as keyof typeof navIcons][activeType];\r\n                        if (NavIconTypeOverride[n as keyof typeof navIcons]) {\r\n                            if (hasNotifications) {\r\n                                navIcon = NavIconTypeOverride[n as keyof typeof navIcons][\"has\"][activeType];\r\n                            }\r\n                        }\r\n\r\n                        return <ImageBackground\r\n                            source={navIcon}\r\n                            resizeMode=\"contain\" style={{height: size, width: size}}/>\r\n                    },\r\n                })}\r\n                component={DashComponents[n as keyof typeof navIcons].c}\r\n                initialParams={{...DashComponents[n as keyof typeof navIcons]?.p}}\r\n            />)}\r\n    </BottomTab.Navigator>\r\n}\r\n","import {NavigationProp} from \"@react-navigation/native\";\r\nimport { Api, Interface } from \"@tradingpost/common/api\";\r\nimport { Avatar, Text } from \"@ui-kitten/components\";\r\nimport { SecPressable } from './WatchlistViewerScreen'\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { View } from \"react-native\";\r\nimport { ButtonGroup } from \"../components/ButtonGroup\";\r\nimport { Header, Subheader } from \"../components/Headers\";\r\nimport { List } from \"../components/List\";\r\nimport { NoDataPanel } from \"../components/NoDataPanel\";\r\nimport { ProfileBar } from \"../components/ProfileBar\";\r\nimport { SearchBar } from \"../components/SearchBar\";\r\nimport { ElevatedSection } from \"../components/Section\";\r\nimport { useSecuritiesList } from \"../SecurityList\";\r\nimport { flex, fonts, sizes } from \"../style\";\r\nimport { FeedPart } from \"./FeedScreen\";\r\nimport { FlatList } from \"react-native-gesture-handler\";\r\n\r\n\r\nexport const SearchScreen = (props: { navigation: NavigationProp<any> } & { route: { params: {} } }) => {\r\n    const [searchText, setSearchText] = useState(\"\"),\r\n        [searchType, setSearchType] = useState<\"posts\" | \"people\">(\"posts\"),\r\n        [people, setPeople] = useState<Interface.IUserList[]>(),\r\n        [searchSecurities, setSearchSecurities] = useState<Interface.ISecurityList[]>(),\r\n        debounceRef = useRef<any>(),\r\n        { securities: { list: securities } } = useSecuritiesList();\r\n    useEffect(() => {\r\n        clearTimeout(debounceRef.current);\r\n            if (searchText.length >= 3) {\r\n                debounceRef.current = setTimeout(async () => {\r\n                    try {\r\n                        setPeople(await Api.User.extensions.search({\r\n                            term: searchText\r\n                        }));\r\n                    }\r\n                    catch (ex) {\r\n                        console.error(ex);\r\n                    }\r\n                    try {\r\n                        const output: Interface.ISecurityList[] = []\r\n                        \r\n                        const modSearch = searchText.slice(0,1) === '$' ? searchText.slice(1) : searchText;\r\n                        const regex = new RegExp(`^${modSearch}`, \"i\");\r\n                        securities.forEach((item) => {\r\n                            if ((regex.test(item.company_name) || regex.test(item.symbol ))) {\r\n                                output.push(item)\r\n                            }\r\n                                \r\n                        })\r\n                        setSearchSecurities(output)\r\n                    } catch (ex) {\r\n                        console.error(ex)\r\n                    }\r\n                }, 500)\r\n            }\r\n            else if (searchText.length > 0) {\r\n                try {\r\n                    setPeople(undefined);\r\n                    const output: Interface.ISecurityList[] = []\r\n                    const modSearch = searchText.slice(0,1) === '$' ? searchText.slice(1) : searchText;\r\n                    const regex = new RegExp(`^${modSearch}`, \"i\");\r\n                    securities.forEach((item) => {\r\n                        if ((regex.test(item.symbol ))) {\r\n                            output.push(item)\r\n                        }\r\n                    })\r\n                    setSearchSecurities(output)\r\n                } catch (ex) {\r\n                    console.error(ex)\r\n                }\r\n            }\r\n            else {\r\n                setPeople(undefined);\r\n                setSearchSecurities(undefined)\r\n            }\r\n        \r\n    }, [searchText, searchType])\r\n\r\n    return (\r\n        <View style={[flex, { backgroundColor: \"#F7f8f8\" }]}>\r\n            <View style={{width: '90%', alignSelf: 'center', marginBottom: sizes.rem0_5}}>\r\n                <SearchBar \r\n                    placeholder=\"Search... ($AAPL, Tim, Tesla, etc.)\"\r\n                    onTextChange={(v) => {\r\n                        setSearchText(v);\r\n                    }} \r\n                />\r\n            </View>\r\n            <FlatList\r\n                data={[\r\n                    <View key={`id_${(people?.length || 0) + (searchSecurities?.length || 0)}`} style={{ marginLeft: sizes.rem1}}>            \r\n                    <View style={[people?.length ? {display: 'flex'} : {display: 'none'}, ]}>\r\n                        <Header text=\"Analysts\" />\r\n                        <List\r\n                            listKey=\"people\"\r\n                            datasetKey={`people_id_${people?.length}`}\r\n                            horizontal\r\n                            data={people}\r\n                            loadingMessage={\" \"}\r\n                            noDataMessage={\" \"}\r\n                            loadingItem={undefined}\r\n                            renderItem={(item) => {\r\n                                return <ElevatedSection title=\"\" style={{flex: 1}}>\r\n                                    <ProfileBar user={item.item} style={{marginBottom:-sizes.rem0_5}} />\r\n                                </ElevatedSection>\r\n                            }}\r\n                        />\r\n                    </View>\r\n                    <View style={[searchSecurities?.length ? {display: 'flex'} : {display: 'none'}]}>\r\n                        <Header text=\"Companies\"/>\r\n                        <List\r\n                            listKey=\"companies\"\r\n                            datasetKey={`company_id_${searchSecurities?.length}`}\r\n                            horizontal\r\n                            data={searchSecurities}\r\n                            loadingMessage={\" \"}\r\n                            noDataMessage={\" \"}\r\n                            loadingItem={undefined}\r\n                            //numColumns={2}\r\n                            renderItem={(item) => {\r\n                                const regex = new RegExp('placeholder.png', \"i\");\r\n                                if (regex.test(item.item.logo_url)) {\r\n                                    return (\r\n                                        <ElevatedSection title=\"\" style={{flexShrink: 1, marginBottom: 6, paddingHorizontal: 2, paddingVertical: 2, justifyContent: 'center'}}>\r\n                                            <Text style={{textAlign: 'center', fontSize: 12}}>\r\n                                                {item.item.company_name}\r\n                                            </Text>\r\n                                        </ElevatedSection>\r\n                                    )\r\n                                }\r\n                                else {\r\n                                    return (\r\n                                    <ElevatedSection title=\"\" style={{flex: 1, marginBottom: 6, paddingHorizontal: sizes.rem0_5, paddingVertical: sizes.rem0_5}}>\r\n                                        <SecPressable securityId={item.item.id}>                            \r\n                                                <Avatar\r\n                                                    style={{ borderRadius: 5 }}\r\n                                                    shape={'square'}\r\n                                                    resizeMode={'cover'}\r\n                                                    source={ {uri: item.item.logo_url} }\r\n                                                    size=\"giant\"\r\n                                                />\r\n                                        </SecPressable>\r\n                                </ElevatedSection>)\r\n                                }\r\n                            }}\r\n                        />\r\n                    </View>\r\n                    <View style={[searchText !== \"\" ? {display: 'flex'} : {display: 'none'}]}>\r\n                        <Header text=\"Posts\" />\r\n                    </View>\r\n                    </View>,\r\n                    <View>\r\n                        {(searchText !== \"\") ? <FeedPart searchText={searchText} /> : <NoDataPanel message={'Search for Analysts, Posts, or Companies!'} />}\r\n                    </View>\r\n                \r\n                ]}\r\n                renderItem={(info) => {\r\n                    return info.item\r\n                }}\r\n                contentContainerStyle={[{ paddingTop: 10 }]} \r\n                nestedScrollEnabled\r\n                >\r\n            </FlatList>\r\n        </View>\r\n    );\r\n}\r\n","import { createDrawerNavigator } from \"@react-navigation/drawer\";\r\nimport { getFocusedRouteNameFromRoute, useNavigationState } from \"@react-navigation/native\";\r\nimport React from \"react\";\r\nimport { Keyboard, Pressable } from \"react-native\";\r\nimport { useAppUser } from \"../Authentication\";\r\nimport { IconButton } from \"../components/IconButton\";\r\nimport { IconifyIcon } from \"../components/IconfiyIcon\";\r\nimport { SideMenu } from \"../components/SideMenu\";\r\nimport { SvgExpo } from \"../components/SvgExpo\";\r\nimport { BookmarkActiveBlue, BookmarkIcons, LogoNoBg } from \"../images\";\r\nimport { sizes } from \"../style\";\r\nimport { useIsKeyboardVisible } from \"../utils/hooks\";\r\nimport { BottomTabNavigator } from \"./BottomTabNavigator\";\r\nimport KeyboardClose from '../assets/@iconify/keyboard-close'\r\n\r\nexport const Drawer = createDrawerNavigator();\r\n\r\n\r\nconst HeaderTp = () => {\r\n    return <SvgExpo style={{ height: \"100%\", aspectRatio: 1 }}>\r\n        <LogoNoBg />\r\n    </SvgExpo>\r\n}\r\n\r\nexport function DrawerPart() {\r\n    const { loginState } = useAppUser();\r\n\r\n    console.log(\"Running Drawer Navigation\")\r\n    return loginState?.appUser ? <Drawer.Navigator useLegacyImplementation={true} drawerContent={(props) => <SideMenu  {...props} />}\r\n        screenOptions={({ route, navigation }) => ({\r\n            headerTitleAlign: \"center\",\r\n            headerTitle: HeaderTp,\r\n            headerRight: (() => {\r\n                const routeName = getFocusedRouteNameFromRoute(route);\r\n                const state = useNavigationState((state) => {\r\n                    return (((state.routes[0]?.state?.routes as any[])?.find(r => r.name === \"Feed\").params as any)?.bookmarkedOnly || \"false\") as \"true\" | \"false\"\r\n                });\r\n\r\n                const { isKeyboardVisible } = useIsKeyboardVisible();\r\n\r\n                if (isKeyboardVisible) {\r\n                    return <Pressable\r\n                        onPress={() => {\r\n                            Keyboard.dismiss();\r\n                        }}\r\n                    ><IconifyIcon\r\n                            currentColor=\"black\"\r\n                            icon={KeyboardClose}\r\n                            svgProps={{\r\n                                height: 24,\r\n                                width: 24,\r\n                            }}\r\n                            style={{\r\n                                height: 24,\r\n                                width: 24,\r\n                                marginRight: sizes.rem1\r\n                            }}\r\n                        />\r\n                    </Pressable>\r\n                }\r\n\r\n                switch (routeName) {\r\n                    case \"Feed\":\r\n                        const isMarked = state === \"true\";\r\n                        return <Pressable onPress={() => {\r\n                            navigation.navigate(\"Feed\", {\r\n                                bookmarkedOnly: isMarked ? \"false\" : \"true\"\r\n                            })\r\n                        }}>\r\n                            {!isMarked ? <IconButton\r\n                                iconSource={isMarked ? BookmarkIcons.active : BookmarkIcons.inactive}\r\n                                style={{\r\n                                    height: 28,\r\n                                    width: 28,\r\n                                    marginRight: sizes.rem1\r\n                                }} />\r\n                                : <BookmarkActiveBlue style={{\r\n                                    height: 28,\r\n                                    width: 28,\r\n                                    marginLeft: \"auto\",\r\n                                    marginRight: (sizes.rem1_5 + sizes.rem1) / 2\r\n                                }} />\r\n                            }\r\n                        </Pressable>\r\n                    default:\r\n                        console.log(routeName);\r\n                        return undefined;\r\n                }\r\n            })\r\n        })}>\r\n        <Drawer.Screen name=\"Root\" component={BottomTabNavigator} />\r\n    </Drawer.Navigator> : null;\r\n}\r\n","import React, { useEffect, useState, useRef } from \"react\"\r\nimport { IconifyIcon } from \"../components/IconfiyIcon\"\r\nimport { Section, Subsection } from \"../components/Section\"\r\nimport { SwitchField } from \"../components/SwitchField\"\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { CreateAccountProps, sideMargin } from \"./create_account/shared\"\r\n//import { SetDashboardLayout } from \"../../layouts/DashboardLayout\"\r\n//import { deleteAccount, UpdateUserProfile } from \"../../apis/Authenticfation\"\r\nimport { /*bindSwitch,*/ useReadonlyEntity } from \"../utils/hooks\"\r\nimport { ScrollWithButtons } from \"../components/ScrollWithButtons\"\r\nimport { View, Animated } from \"react-native\"\r\nimport { useLinkTo } from \"@react-navigation/native\"\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { openBrowserAsync } from 'expo-web-browser';\r\nimport { Icon, Text } from \"@ui-kitten/components\";\r\nimport { AddButton, EditButton } from \"../components/AddButton\";\r\nimport { Table } from \"../components/Table\";\r\nimport { bannerText, flex, paddView, paddViewWhite, sizes, thinBannerText } from \"../style\";\r\nimport { PrimaryButton } from \"../components/PrimaryButton\"\r\nimport { useAppUser } from \"../Authentication\"\r\nimport { RootStackScreenProps } from \"../navigation/pages\";\r\n\r\n\r\nexport function AccountSettingsScreen(props: RootStackScreenProps<\"AccountSettings\">) {\r\n    const { loginState, signIn } = useAppUser();\r\n    const appUser = loginState?.appUser, authToken = loginState?.authToken\r\n    const [mentionCheck, setMentionCheck] = useState<boolean>(appUser?.settings?.push_notifications.mentions === undefined ? true : appUser?.settings?.push_notifications.mentions),\r\n        [upvotesCheck, setUpvotesCheck] = useState<boolean>(appUser?.settings?.push_notifications.upvotes === undefined ? true : appUser?.settings?.push_notifications.upvotes),\r\n        [watchlistChangeCheck, setWatchlistChangeCheck] = useState<boolean>(appUser?.settings?.push_notifications.watchlist_changes === undefined ? true : appUser?.settings?.push_notifications.watchlist_changes),\r\n        [performanceCheck, setPerformanceCheck] = useState<boolean>(appUser?.settings?.portfolio_display.performance === undefined ? false : appUser?.settings?.portfolio_display.performance),\r\n        [holdingsCheck, setHoldingsCheck] = useState<boolean>(appUser?.settings?.portfolio_display.holdings === undefined ? false : appUser?.settings?.portfolio_display.holdings),\r\n        [tradesCheck, setTradesCheck] = useState<boolean>(appUser?.settings?.portfolio_display.trades === undefined ? false : appUser?.settings?.portfolio_display.trades),\r\n        [analystCheck, setAnalystCheck] = useState<boolean>(appUser?.settings?.analyst === undefined ? false : appUser?.settings?.analyst),\r\n        linkTo = useLinkTo<any>()\r\n\r\n    const onMentionCheckChanged = (isMentionChecked: boolean) => {\r\n        setMentionCheck(isMentionChecked);\r\n    }\r\n    const onUpvoteCheckChanged = (isUpvoteChecked: boolean) => {\r\n        setUpvotesCheck(isUpvoteChecked);\r\n    }\r\n    const onWatchlistChangeCheckChanged = (isWatchlistChangeChecked: boolean) => {\r\n        setWatchlistChangeCheck(isWatchlistChangeChecked);\r\n    }\r\n    const onPerformanceCheckChanged = (isPerformanceChecked: boolean) => {\r\n        setPerformanceCheck(isPerformanceChecked);\r\n    }\r\n    const onHoldingsCheckChanged = (isHoldingsChecked: boolean) => {\r\n        setHoldingsCheck(isHoldingsChecked);\r\n    }\r\n    const onTradesCheckChanged = (isTradesChecked: boolean) => {\r\n        setTradesCheck(isTradesChecked);\r\n    }\r\n    const onAnalystCheckChanged = (isAnalystChecked: boolean) => {\r\n        setAnalystCheck(isAnalystChecked);\r\n    }\r\n\r\n    const opacityAnim = useRef(new Animated.Value(0)).current;\r\n    const [accounts, setAccounts] = useState<Awaited<ReturnType<typeof Api.User.extensions.getBrokerageAccounts>>>()\r\n    const intervalRef = useRef<any>();\r\n    const [needsRefresh, setNeedsRefresh] = useState<{}>();\r\n    const openLink = async () => {\r\n        const browserName = \"finicity_auth\";\r\n        await openBrowserAsync(brokerLink, { \"windowName\": browserName });\r\n        clearInterval(intervalRef.current);\r\n\r\n        intervalRef.current = setInterval(async () => {\r\n            console.log(\"WTF\");\r\n            if (await AsyncStorage.getItem(\"auth-finicity-code\")) {\r\n                console.log(\"CODE HAS BEEN FOUND\");\r\n                setAccounts(await Api.User.extensions.getBrokerageAccounts())\r\n            }\r\n        }, 5000)\r\n    }\r\n    //cleanup\r\n    useEffect(() => {\r\n        AsyncStorage.removeItem(\"auth-finicity-code\");\r\n        return () => {\r\n            clearInterval(intervalRef.current);\r\n            AsyncStorage.removeItem(\"auth-finicity-code\");\r\n        }\r\n    }, [])\r\n\r\n\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n    const [brokerLink, setLink] = useState(\"\");\r\n    useEffect(() => {\r\n        Api.User.extensions.generateBrokerageLink(undefined).then(({ link }) => {\r\n            setLink(link)\r\n        })\r\n    }, [needsRefresh])\r\n\r\n    useEffect(() => {\r\n        Api.User.extensions.getBrokerageAccounts()\r\n            .then((r: any) => {\r\n                setAccounts(r);\r\n            })\r\n    }, [])\r\n\r\n    return <ScrollWithButtons\r\n        buttons={{\r\n            left: {\r\n                text: 'Cancel',\r\n                onPress: async () => {\r\n                    try {\r\n                        //      await UpdateUserProfile({ status_setup: true });\r\n                        //    SetDashboardLayout();\r\n                        linkTo('/dash/feed')\r\n                    }\r\n                    catch (ex) {\r\n                    }\r\n                }\r\n            },\r\n            right: {\r\n                text: 'Save',\r\n                onPress: async () => {\r\n                    try {\r\n                        if (appUser?.id)\r\n                            await Api.User.update(appUser.id, {\r\n                                settings: {\r\n                                    analyst: analystCheck,\r\n                                    push_notifications: {\r\n                                        mentions: mentionCheck,\r\n                                        upvotes: upvotesCheck,\r\n                                        watchlist_changes: watchlistChangeCheck,\r\n                                    },\r\n                                    portfolio_display: {\r\n                                        performance: performanceCheck,\r\n                                        holdings: holdingsCheck,\r\n                                        trades: tradesCheck\r\n                                    }\r\n                                }\r\n                            })\r\n\r\n                        authToken ? await signIn(\"\", authToken) : {};\r\n\r\n                        linkTo('/dash/feed');\r\n\r\n                    }\r\n                    catch (ex) {\r\n                    }\r\n                }\r\n            }\r\n        }}>\r\n        <View style={{ margin: sideMargin }}>\r\n            <Section title=\"\" style={{ padding: 10 }}>\r\n                <SwitchField label='Analyst' checked={analystCheck} onChange={onAnalystCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n            </Section>\r\n            <Section title='Display' style={{ padding: 10 }}>\r\n                <SwitchField label='Performance' checked={performanceCheck} onChange={onPerformanceCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n                <SwitchField label='Portfolio' checked={holdingsCheck} onChange={onHoldingsCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n                <SwitchField label='Trades' checked={tradesCheck} onChange={onTradesCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n            </Section>\r\n            <Section style={{ padding: 10 }} title=\"Link Brokerage Accounts\" button={(props) => accounts?.length ? <EditButton\r\n                onPress={() => {\r\n                    openLink();\r\n                }}\r\n                height={35}\r\n                width={35}\r\n            /> : <AddButton\r\n                onPress={() => openLink()}\r\n                height={35}\r\n                width={35}\r\n            />} >\r\n                <Table datasetKey={accounts?.map(a => a.id).join(\",\") || \"none\"} columns={[{ alias: \"Brokerage\", field: \"broker_name\", align: \"left\" }, { alias: \"Account #\", field: \"account_number\", align: \"left\" }]} data={accounts} noDataMessage=\"You have no linked accounts\" />\r\n            </Section>\r\n            <Section title='Payment' style={{ padding: 10 }}>\r\n                <Text>\r\n                    Stripe\r\n                </Text>\r\n            </Section>\r\n            <Section title='Notifications' style={{ padding: 10 }}>\r\n                <Subsection title='Posts' alt={true}>\r\n                    <SwitchField label='Mentions' checked={mentionCheck} onChange={onMentionCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n                    <SwitchField label='Upvotes' checked={upvotesCheck} onChange={onUpvoteCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n                </Subsection>\r\n                <Subsection title='Watchlists' alt={true}>\r\n                    {/*<SwitchField label='Price Movement' checked={watchlistPxCheck} onChange={onWatchlistPxCheckChanged} viewStyle={{flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5}} toggleStyle={{}} textStyle={{fontSize: 14, alignSelf: 'center'}}/>*/}\r\n                    <SwitchField label='Changes' checked={watchlistChangeCheck} onChange={onWatchlistChangeCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n                </Subsection>\r\n            </Section>\r\n            <Section title='Management' style={{ padding: 10 }}>\r\n                <View style={{ flexDirection: 'row', justifyContent: 'space-between', marginVertical: 5 }}>\r\n                    <Text style={{ fontSize: 14, alignSelf: 'center' }}>\r\n                        Delete Account\r\n                    </Text>\r\n                    <PrimaryButton style={{ width: \"40%\", backgroundColor: \"#D81222\", borderColor: \"#D81222\" }} onPress={() => { }}>\r\n                        FOREVER\r\n                    </PrimaryButton>\r\n                </View>\r\n            </Section>\r\n        </View>\r\n    </ScrollWithButtons>\r\n}","import React, { useState, useMemo, useEffect } from \"react\"\r\nimport { ElevatedSection, Section, Subsection } from \"../components/Section\"\r\nimport { SwitchField } from \"../components/SwitchField\"\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { sideMargin } from \"./create_account/shared\"\r\nimport { ScrollWithButtons } from \"../components/ScrollWithButtons\"\r\nimport { View, Pressable, Alert, Platform } from \"react-native\"\r\nimport { useLinkTo, useNavigation } from \"@react-navigation/native\"\r\nimport { useSecuritiesList } from '../SecurityList'\r\nimport { Autocomplete, AutocompleteItem, Icon, IndexPath, Text, TabView, Tab } from \"@ui-kitten/components\";\r\nimport { AddButton, EditButton } from \"../components/AddButton\";\r\nimport { flex, sizes, fonts } from \"../style\";\r\nimport { PrimaryButton } from \"../components/PrimaryButton\"\r\nimport { useAppUser } from \"../Authentication\"\r\nimport { investmentStrats, questionStyle, gicsAC } from './create_account/InvestmentInterestSection'\r\nimport { KeyboardAvoidingInput } from \"../components/KeyboardAvoidingInput\";\r\nimport { Picker } from \"../components/Picker\";\r\nimport { ProfileButton } from \"../components/ProfileButton\";\r\nimport { Slider } from \"../components/Slider\";\r\nimport { AppColors } from \"../constants/Colors\";\r\nimport { YourContentComponent } from \"../components/YourContentComponent\";\r\nimport { IUserGet, IUserUpdate } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport { Log } from \"../utils/logger\";\r\nimport { LinkBrokerageComponent } from \"../components/LinkBrokerageComponent\";\r\n\r\nexport function AccountInfoScreen(props?: any) {\r\n    const { loginState, signIn, signOut } = useAppUser(),\r\n        [index, setIndex] = useState(0),\r\n        linkTo = useLinkTo<any>()\r\n\r\n    const definedOrValue = (test: boolean | undefined, d: boolean) => {\r\n        return test === undefined ? d : test\r\n    }\r\n    const appUser = loginState?.appUser;\r\n    const [accountUpdates, setAccountUpdates] = useState<IUserUpdate>({\r\n        bio: appUser?.bio,\r\n        analyst_profile: appUser?.analyst_profile || {\r\n            investment_strategy: \"\",\r\n            portfolio_concentration: 50,\r\n            benchmark: \"\",\r\n            interests: []\r\n        },\r\n        profile_url: appUser?.profile_url,\r\n        settings: {\r\n            analyst: appUser?.settings?.analyst || false,\r\n            portfolio_display: {\r\n                holdings: definedOrValue(appUser?.settings?.portfolio_display.holdings, false),\r\n                performance: definedOrValue(appUser?.settings?.portfolio_display.performance, false),\r\n                trades: definedOrValue(appUser?.settings?.portfolio_display.trades, false)\r\n            },\r\n            push_notifications: {\r\n                mentions: definedOrValue(appUser?.settings?.push_notifications.mentions, true),\r\n                upvotes: definedOrValue(appUser?.settings?.push_notifications.upvotes, true),\r\n                watchlist_changes: definedOrValue(appUser?.settings?.push_notifications.watchlist_changes, true)\r\n            }\r\n        },\r\n        is_deleted: appUser?.is_deleted\r\n    })\r\n    //HACK: think through a better way of doing this.\r\n    useEffect(() => {\r\n        setAccountUpdates((a) => {\r\n            const clone = { ...a };\r\n            clone.profile_url = appUser?.profile_url;\r\n            return clone;\r\n        });\r\n    }, [loginState?.updated.toString(), appUser?.profile_url])\r\n\r\n    return (\r\n        <ScrollWithButtons\r\n            buttons={{\r\n                left: {\r\n                    text: 'Cancel',\r\n                    onPress: async () => {\r\n                        try {\r\n                            linkTo('/dash/feed')\r\n                        }\r\n                        catch (ex) {\r\n                        }\r\n                    }\r\n                },\r\n                right: {\r\n                    text: 'Save',\r\n                    onPress: async () => {\r\n                        await Log.tryCatch(async () => {\r\n                            if (appUser?.id && loginState?.authToken) {\r\n                                await Api.User.update(appUser?.id || '', accountUpdates);\r\n                                await signIn(\"\", loginState?.authToken);\r\n                            }\r\n                        })\r\n\r\n                        try {\r\n                            linkTo('/dash/feed')\r\n                        }\r\n                        catch (ex) {\r\n                            console.error(ex);\r\n                        }\r\n                    }\r\n                }\r\n            }}>\r\n            <View style={[flex, { margin: sideMargin, marginTop: 12 }]} >\r\n                <TabView indicatorStyle={{ marginTop: 26 }}\r\n                    style={{ marginVertical: sizes.rem0_5 }}\r\n                    tabBarStyle={{ backgroundColor: AppColors.background, borderColor: AppColors.background }}\r\n                    selectedIndex={index}\r\n                    onSelect={(idx) => {\r\n                        console.log(\"Setting index \" + idx);\r\n                        setIndex(idx);\r\n                    }}>\r\n                    <Tab key={\"A\"} title={'Account Info'} style={{ backgroundColor: AppColors.background, borderColor: AppColors.background }} >\r\n                        <AccountInfoContent setUpdates={setAccountUpdates} updates={accountUpdates} />\r\n                    </Tab>\r\n                    <Tab key={\"B\"} title={'Your Content'} style={{ backgroundColor: AppColors.background, borderColor: AppColors.background }}>\r\n                        <YourContentComponent key={props?.route?.params?.newTwitterHandle} newTwitterhandle={props?.route?.params?.newTwitterHandle} />\r\n                    </Tab>\r\n                    <Tab key={\"C\"} title={'Advanced'} style={{ backgroundColor: AppColors.background, borderColor: AppColors.background }}>\r\n                        <AdvancedTabContent signOut={signOut} appUser={appUser} setUpdates={setAccountUpdates} updates={accountUpdates} />\r\n\r\n                    </Tab>\r\n                </TabView>\r\n\r\n            </View>\r\n        </ScrollWithButtons>\r\n    )\r\n}\r\nconst AccountInfoContent = (props: { updates: IUserUpdate, setUpdates: (updates: IUserUpdate) => void }) => {\r\n    const { updates, setUpdates } = props;\r\n    const [sliderWidth, setSliderWidth] = useState(10),\r\n        [acText, setAcText] = useState(\"\"),\r\n        { securities: { list: securities } } = useSecuritiesList();\r\n\r\n    const acValues = useMemo(() => {\r\n        const r = new RegExp(acText, \"i\");\r\n        return acText ? gicsAC.filter((g, i) => r.test(g)) : [];\r\n    }, [acText])\r\n    const addIfMissing = (value: string) => {\r\n        if (value && !updates.analyst_profile?.interests?.find((int: any) => int.toLowerCase() === value.toLowerCase())) {\r\n            const _updates = { ...updates }\r\n            _updates.analyst_profile!.interests = [..._updates.analyst_profile!.interests, value]\r\n            setUpdates(_updates);\r\n        }\r\n        setAcText(\"\");\r\n    }\r\n    const benches = securities.filter(s => s.is_benchmark).sort((a, b) => a.symbol.localeCompare(b.symbol)).map((value) => ({\r\n        label: `${value.symbol} - ${value.security_name}`,\r\n        value: value.symbol,\r\n        iconUrl: value.logo_url\r\n    }))\r\n    const { loginState } = useAppUser();\r\n\r\n    return <ElevatedSection\r\n        title=\"\">\r\n        <Text style={[questionStyle, { marginTop: sizes.rem0_5, textAlign: 'center' }]}>Tap to Modify Profile Picture</Text>\r\n        <ProfileButton key={loginState?.updated.toString()} userId={''} profileUrl={updates.profile_url || ''} size={sizes.rem8} editable />\r\n        <Text style={[questionStyle, { marginTop: sizes.rem0_5 }]}>Bio</Text>\r\n        <KeyboardAvoidingInput\r\n            value={updates.bio}\r\n            displayButton={false}\r\n            numLines={3}\r\n            placeholder={'Tell people about yourself'}\r\n            setValue={(text: string) => {\r\n                const _updates = { ...updates }\r\n                _updates.bio = text;\r\n                setUpdates(_updates);\r\n            }}\r\n        />\r\n        <Text style={questionStyle}>What is your investment strategy?</Text>\r\n        <Picker\r\n            placeholder='Select Strategy'\r\n            value={updates?.analyst_profile?.investment_strategy}\r\n            items={investmentStrats.map((value) => ({\r\n                label: value,\r\n                value\r\n            }))}\r\n            onSelect={(v) => {\r\n                if (v) {\r\n                    const _updates = { ...updates }\r\n                    _updates.analyst_profile!.investment_strategy = investmentStrats[v.row];\r\n                    setUpdates(_updates);\r\n                }\r\n            }}\r\n        />\r\n        <Text style={questionStyle}>How concentrated is your portfolio?</Text>\r\n        <Slider\r\n            containerStyle={{\r\n                //marginLeft: sliderWidth * 0.05\r\n            }}\r\n            min={0}\r\n            max={100}\r\n            step={25}\r\n            //sliderLength={sliderWidth * 0.9}\r\n            values={[updates.analyst_profile!.portfolio_concentration]}\r\n            onValuesChange={(v) => {\r\n                const _updates = { ...updates }\r\n                _updates.analyst_profile!.portfolio_concentration = v[0]\r\n                setUpdates(_updates);\r\n            }}\r\n        />\r\n        <View style={{ flexDirection: \"row\", justifyContent: \"space-between\", marginBottom: 16 }}>\r\n            <Text>Highly Diversified</Text>\r\n            <Text>Very Concentrated</Text>\r\n        </View>\r\n        <Text style={questionStyle}>What benchmark do you follow?</Text>\r\n        <Picker\r\n            value={updates.analyst_profile?.benchmark}\r\n            placeholder='Select Benchmark'\r\n            items={benches}\r\n            onSelect={(v) => {\r\n                if (v) {\r\n                    const _updates = { ...updates }\r\n                    _updates.analyst_profile!.benchmark = benches[v.row].value;\r\n                    setUpdates(_updates);\r\n                }\r\n            }}\r\n        />\r\n        <Text style={questionStyle}>Pick a few interest and specialties</Text>\r\n        <View>\r\n            <Autocomplete\r\n                value={acText || \"\"}\r\n                onChangeText={setAcText}\r\n                placeholder=\"Interest &amp; Specialties\"\r\n                placement=\"bottom\"\r\n                accessoryRight={\r\n                    (props) => <AddButton\r\n                        onPress={() => addIfMissing(acText)}\r\n                        height={(props?.style as any)?.height}\r\n                        width={(props?.style as any)?.width}\r\n\r\n                    />\r\n                }\r\n                onSelect={(idx) => addIfMissing(acValues[idx])}>{\r\n                    acValues.map((v, i) => <AutocompleteItem key={i} title={v} />)\r\n                }\r\n            </Autocomplete>\r\n        </View>\r\n        {\r\n            updates.analyst_profile?.interests.map((v, i) => <View style={{ padding: sizes.rem0_5, flexDirection: \"row\" }}>\r\n                <Text style={{ textAlign: \"left\", flex: 1 }}>{v}</Text><Pressable onPress={() => {\r\n                    const newInterest = [...updates.analyst_profile!.interests];\r\n                    newInterest.splice(i, 1);\r\n                    const _updates = { ...updates }\r\n                    _updates.analyst_profile!.interests = newInterest;\r\n                    setUpdates(_updates);\r\n                }}><Icon name=\"close-outline\" style={{ height: 24, aspectRatio: 1 }} /></Pressable>\r\n            </View>)\r\n        }\r\n    </ElevatedSection>\r\n\r\n}\r\n\r\nconst AdvancedTabContent = (props: { appUser: IUserGet | undefined, signOut: any, updates: IUserUpdate, setUpdates: (updates: IUserUpdate) => void }) => {\r\n\r\n    const nav = useNavigation();\r\n    const updates = props.updates;\r\n\r\n    const onMentionCheckChanged = (isMentionChecked: boolean) => {\r\n        const _updates = { ...updates }\r\n        _updates.settings!.push_notifications.mentions = isMentionChecked;\r\n        props.setUpdates(_updates)\r\n    }\r\n    const onUpvoteCheckChanged = (isUpvoteChecked: boolean) => {\r\n        const _updates = { ...updates }\r\n        _updates.settings!.push_notifications.upvotes = isUpvoteChecked\r\n        props.setUpdates(_updates)\r\n    }\r\n    const onWatchlistChangeCheckChanged = (isWatchlistChangeChecked: boolean) => {\r\n        const _updates = { ...updates }\r\n        _updates.settings!.push_notifications.watchlist_changes = isWatchlistChangeChecked\r\n        props.setUpdates(_updates)\r\n\r\n    }\r\n    const onPerformanceCheckChanged = (isPerformanceChecked: boolean) => {\r\n        const _updates = { ...updates }\r\n        _updates.settings!.portfolio_display.performance = isPerformanceChecked;\r\n        props.setUpdates(_updates)\r\n    }\r\n    const onHoldingsCheckChanged = (isHoldingsChecked: boolean) => {\r\n        const _updates = { ...updates }\r\n        _updates.settings!.portfolio_display.holdings = isHoldingsChecked\r\n        props.setUpdates(_updates)\r\n    }\r\n    const onTradesCheckChanged = (isTradesChecked: boolean) => {\r\n        const _updates = { ...updates }\r\n        _updates.settings!.portfolio_display.trades = isTradesChecked;\r\n        props.setUpdates(_updates)\r\n    }\r\n    const onAnalystCheckChanged = (isAnalystChecked: boolean) => {\r\n        const _updates = { ...updates }\r\n        _updates.settings!.analyst = isAnalystChecked;\r\n        props.setUpdates(_updates)\r\n    }\r\n    //@ts-ignore\r\n    const alertPolyfill = (title, description, options, extra) => {\r\n        const result = window.confirm([title, description].filter(Boolean).join('\\n'))\r\n\r\n        if (result) {\r\n            //@ts-ignore\r\n            const confirmOption = options.find(({ style }) => style !== 'cancel')\r\n            confirmOption && confirmOption.onPress()\r\n        } else {\r\n            //@ts-ignore\r\n            const cancelOption = options.find(({ style }) => style === 'cancel')\r\n            cancelOption && cancelOption.onPress()\r\n        }\r\n    }\r\n\r\n    const alert = Platform.OS === 'web' ? alertPolyfill : Alert.alert;\r\n\r\n\r\n    return <ElevatedSection title=\"\" style={{ padding: 5 }}>\r\n        <View>\r\n            <SwitchField label='Analyst'\r\n                toolTipText={`Becoming an analyst allows you to display your portfolio to subscribers, customize your profile and enable you to post premium content on TP.`}\r\n                toolTipStyle={{ alignItems: 'flex-start' }}\r\n                checked={props.updates.settings?.analyst}\r\n                onChange={onAnalystCheckChanged}\r\n                viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5, padding: 5 }}\r\n                toggleStyle={{}}\r\n                textStyle={{ fontSize: fonts.large, fontWeight: '500', alignSelf: 'center', color: AppColors.primary }}\r\n            />\r\n        </View>\r\n        <Section title='Display To Subscribers' style={{ padding: 5 }}>\r\n            <SwitchField label='Performance' checked={props.updates.settings?.portfolio_display.performance} onChange={onPerformanceCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n            <SwitchField label='Portfolio' checked={props.updates.settings?.portfolio_display.holdings} onChange={onHoldingsCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n            <SwitchField label='Trades' checked={props.updates.settings?.portfolio_display.trades} onChange={onTradesCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n            <View style={{ flexDirection: 'row', justifyContent: 'center', marginVertical: 15 }}>\r\n                <PrimaryButton style={{ width: \"60%\", paddingHorizontal: 4, backgroundColor: AppColors.secondary, borderColor: AppColors.secondary }} onPress={() => {\r\n                    nav.navigate('Subscription')\r\n                }}>\r\n                    {evaProps => <Text {...evaProps} style={{ textAlign: 'center', color: 'white', paddingHorizontal: 6 }}>Manage Subscriptions</Text>}\r\n\r\n                </PrimaryButton>\r\n            </View>\r\n        </Section>\r\n        <LinkBrokerageComponent />\r\n        <Section title='Payment' style={{ padding: 10 }}>\r\n            <Text>\r\n                Coming Soon!\r\n            </Text>\r\n        </Section>\r\n        <Section title='Notifications' style={{ padding: 10 }}>\r\n            <Subsection title='Posts' alt={true}>\r\n                <SwitchField label='Mentions' checked={props.updates.settings?.push_notifications.mentions} onChange={onMentionCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n                <SwitchField label='Upvotes' checked={props.updates.settings?.push_notifications.upvotes} onChange={onUpvoteCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n            </Subsection>\r\n            <Subsection title='Watchlists' alt={true}>\r\n                {/*<SwitchField label='Price Movement' checked={watchlistPxCheck} onChange={onWatchlistPxCheckChanged} viewStyle={{flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5}} toggleStyle={{}} textStyle={{fontSize: 14, alignSelf: 'center'}}/>*/}\r\n                <SwitchField label='Changes' checked={props.updates.settings?.push_notifications.watchlist_changes} onChange={onWatchlistChangeCheckChanged} viewStyle={{ flexDirection: 'row-reverse', justifyContent: 'space-between', marginVertical: 5 }} toggleStyle={{}} textStyle={{ fontSize: 14, alignSelf: 'center' }} />\r\n            </Subsection>\r\n        </Section>\r\n        <Section title='Management' style={{ padding: 10 }}>\r\n            <View style={{ flexDirection: 'row', justifyContent: 'space-between', marginVertical: 5 }}>\r\n                <Text style={{ fontSize: 14, alignSelf: 'center' }}>\r\n                    Delete Account\r\n                </Text>\r\n                <PrimaryButton style={{ width: \"40%\", backgroundColor: \"#D81222\", borderColor: \"#D81222\" }} onPress={async () => {\r\n                    return alert(\r\n                        `Are you sure you want to delete your account?`,\r\n                        '',\r\n                        [\r\n                            {\r\n                                text: \"Yes\",\r\n                                onPress: async () => {\r\n                                    const _updates = { ...updates }\r\n                                    _updates.is_deleted = true;\r\n                                    props.setUpdates(_updates)\r\n                                    await Api.User.update(props.appUser?.id || '', _updates);\r\n                                    props.signOut();\r\n                                }\r\n                            },\r\n                            {\r\n                                text: \"No\"\r\n                            }\r\n                        ]\r\n                    )\r\n                }}>\r\n                    FOREVER\r\n                </PrimaryButton>\r\n            </View>\r\n        </Section>\r\n    </ElevatedSection>\r\n\r\n}","import AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport { Text } from '@ui-kitten/components'\r\nimport { useEffect } from 'react';\r\nimport { View } from 'react-native';\r\nimport { RootStackScreenProps } from '../navigation/pages';\r\n\r\nexport const AuthScreen = (props: RootStackScreenProps<\"Auth\">) => {\r\n    const nav = useNavigation()\r\n    const platform = props.route?.params?.platform;\r\n    const code = props.route?.params?.code;\r\n    console.log(\"############################## LOADED THE AUTH SCREEN ########################################\");\r\n    useEffect(() => {\r\n        console.log(\"SETTING THE PLATFORM CODE\");\r\n        if (platform === \"twitter\" && code) {\r\n            AsyncStorage.setItem(`auth-${platform}-code`, code);\r\n        }\r\n        else if (platform === \"youtube\" && code) {\r\n            AsyncStorage.setItem(`auth-${platform}-code`, code);\r\n        }\r\n        //redundant but I may change this\r\n        else if (platform === \"finicity\") {\r\n            AsyncStorage.setItem(`auth-${platform}-code`, \"DONE!\");\r\n        }\r\n        if (nav.canGoBack())\r\n            nav.goBack()\r\n\r\n    }, [platform, code]);\r\n    return (\r\n        <View>\r\n            <Text>You have been authorized to {platform || \"Missing platform\"}</Text>\r\n        </View>\r\n        )\r\n}","import { Button } from \"@ui-kitten/components\";\r\nimport React, { useState } from \"react\";\r\nimport { View } from \"react-native\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { PrimaryButton } from \"../components/PrimaryButton\";\r\nimport { ElevatedSection } from \"../components/Section\";\r\nimport { TextField } from \"../components/TextField\";\r\nimport { Api } from '@tradingpost/common/api'\r\nimport { useAppUser } from \"../Authentication\";\r\nimport { RootStackScreenProps } from \"../navigation/pages\";\r\n\r\nexport const ChangePasswordScreen = (props: RootStackScreenProps<\"ResetPassword\">) => {\r\n    const\r\n        [oldPass, setOldPass] = useState<string>(),\r\n        [newPass, setNewPass] = useState<string>(),\r\n        [confirm, setConfirm] = useState<string>(),\r\n        toast = useToast(),\r\n        hasToken = Boolean(props.route.params.token),\r\n        { loginState } = useAppUser()\r\n\r\n    return <View>\r\n        <ElevatedSection title={\"Reset Password\"}>\r\n            {!hasToken && <TextField label=\"Old Pass\" value={oldPass} onChangeText={(t) => setOldPass(t)} />}\r\n            <TextField label=\"New Pass\" value={newPass} onChangeText={(t) => setNewPass(t)} />\r\n            <TextField label=\"Confirm Pass\" value={confirm} onChangeText={(t) => setConfirm(t)} />\r\n            <PrimaryButton\r\n                onPress={async () => {\r\n                    try {\r\n                        if (!hasToken && !oldPass)\r\n                            throw new Error(\"Please provide a value for your old password\");\r\n                        if (newPass && newPass !== confirm)\r\n                            throw new Error(\"Please make sure your new passwords match\")\r\n                        if ((newPass?.length || 0) < 8)\r\n                            throw new Error(\"Please make sure your password is at least 8 characters long\")\r\n\r\n\r\n                        await Api.Auth.resetPassword(\r\n                            loginState?.appUser?.email || \"\",\r\n                            props.route.params.token || oldPass || \"\",\r\n                            !hasToken,\r\n                            newPass || \"\")\r\n\r\n                        props.navigation.replace(\"Root\");\r\n\r\n                    }\r\n                    catch (ex: any) {\r\n                        toast.show(ex.message)\r\n                    }\r\n\r\n                }}\r\n            >Change Password</PrimaryButton>\r\n        </ElevatedSection>\r\n    </View>\r\n\r\n}","import { Api, Interface } from \"@tradingpost/common/api\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { Animated, FlatList, NativeSyntheticEvent, ScrollView, View, NativeScrollEvent, useWindowDimensions } from \"react-native\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { Avatar, Text } from '@ui-kitten/components'\r\nimport { elevated, flex, fonts, paddView, row, sizes } from \"../style\";\r\nimport { ElevatedSection } from \"../components/Section\";\r\nimport { Tab, TabBar } from \"@ui-kitten/components\";\r\nimport { FavButton } from \"../components/AddButton\";\r\nimport { toDollarsAndCents, toPercent2 } from \"../utils/misc\";\r\nimport InteractiveChart from \"../components/InteractiveGraph\";\r\nimport { ButtonGroup } from \"../components/ButtonGroup\";\r\nimport { FeedPart } from \"./FeedScreen\";\r\nimport { RootStackScreenProps } from \"../navigation/pages\";\r\nimport { AppColors } from \"../constants/Colors\";\r\n\r\nconst periods: { [key: string]: number } = {\r\n    \"1D\": 1,\r\n    \"1W\": 5,\r\n    \"1M\": 20,\r\n    \"3M\": 60,\r\n    \"1Y\": 252,\r\n    \"2Y\": 252 * 2,\r\n    \"5Y\": 252 * 5,\r\n    \"Max\": 252 * 10\r\n}\r\nconst tabBarMargin = sizes.rem1;\r\n\r\nexport const CompanyScreen = (props: RootStackScreenProps<\"Company\">) => {\r\n\r\n    const [security, setSecurity] = useState<Interface.ISecurityGet>();\r\n    const [securityPrices, setSecurityPrices] = useState<{ x: string, y: number }[]>();\r\n    const { securityId } = props.route.params\r\n    const toast = useToast();\r\n    const [isFav, setIsFav] = useState(false);\r\n    const [description, setDescription] = useState<string>();\r\n    const [portPeriod, setPortPeriod] = useState(\"1Y\")\r\n    const [tab, setTab] = useState(0);\r\n    const scrollRef = useRef<FlatList>(null);\r\n    const translateHeaderY = useRef(new Animated.Value(0)).current;\r\n    /*\r\n    \r\n    let headerHeight =  sizes.rem0_5 * 3 +  fonts.small * 2 + \r\n                        sizes.rem0_5 * 3 + sizes.rem1 * 2 + fonts.small * 2 + ((9 / 16) * windowWidth) + sizes.rem0_5 + sizes.rem1 + 42 +\r\n                        ( Number(elevated.paddingVertical) + Number(elevated.marginBottom) + sizes.rem1 + fonts.large ) + (description ? 100 : 0) + sizes.rem1 + sizes.rem0_5\r\n    //const headerHeight = 680;\r\n    const minViewHeight = windowHeight - headerHeight;\r\n    const [collapsed, setCollapsed] = useState(false);\r\n    const [isMaxed, setIsMaxed] = useState(false);\r\n    const clampMax = headerHeight //- ( Number(elevated.paddingVertical) + Number(elevated.marginBottom) + sizes.rem1 + fonts.large ) ; \r\n    //console.log(clampMax);\r\n    const translation = translateHeaderY.interpolate({\r\n        inputRange: [0, clampMax],\r\n        outputRange: [0, -clampMax],\r\n        extrapolate: 'clamp',\r\n    });\r\n    \r\n    useEffect(() => {\r\n        translation.addListener((v: { value: number }) => {\r\n            const c = Math.abs(v.value + clampMax) < 40;\r\n            const isMaxed = -v.value === clampMax;\r\n            setCollapsed(c);\r\n            setIsMaxed(isMaxed);\r\n        });\r\n        return () => translation.removeAllListeners();\r\n    }, [translation, clampMax]);\r\n    */\r\n    useEffect(() => {\r\n        Api.Security.get(securityId)\r\n            .then((s) => {\r\n                setSecurity(s)\r\n                s.description ? setDescription(s.description.substring(0, 300) + '...') : '';\r\n                setIsFav(s.isOnQuickWatch || false)\r\n            })\r\n            .catch((ex) => toast.show(ex.message))\r\n        Api.Security.extensions.getPrices({ securityId: securityId, includeIntraday: false, includeHistorical: true })\r\n            .then((p) => {\r\n                const prices = p.historical.slice(p.historical.length - periods[portPeriod]).map((a: any) => {\r\n                    return { x: a.date, y: a.close }\r\n                })\r\n                setSecurityPrices(prices);\r\n\r\n            })\r\n            .catch((ex) => toast.show(ex.message))\r\n\r\n    }, [securityId, portPeriod])\r\n    const pxChange =  security?.price?.price || security?.price?.open ? (security?.price?.price - security?.price?.open) / security?.price?.open : 0\r\n    return <View style={flex}>\r\n        <Animated.FlatList\r\n            data={[\r\n                <View style={{ paddingTop: sizes.rem0_5, backgroundColor: AppColors.background, \r\n                    //transform: [{ translateY: translation }], \r\n                    alignItems: \"stretch\", width: \"100%\" }}>\r\n                    <View style={[\r\n                        //collapsed ? {display: 'none'} : {display: 'flex'}, \r\n                        { paddingHorizontal: sizes.rem1, backgroundColor: AppColors.background }]}>\r\n                        <ElevatedSection key={\"Company\"} title=\"\">\r\n                            <View style={[row, { marginVertical: sizes.rem0_5 }]}>\r\n                                <Avatar source={{ uri: security?.logo_url }} style={{ marginRight: sizes.rem0_5, overflow: 'visible', borderRadius: 5 }} shape={'square'} resizeMode={'cover'}  />\r\n                                <View style={flex}>\r\n                                    <Text>{security?.symbol}</Text>\r\n                                    <Text>{security?.company_name}</Text>\r\n                                </View>\r\n                                <View>\r\n                                    <FavButton height={24} width={24} isSelected={isFav}  onPress={() => {\r\n                                    if (security) {\r\n                                        Api.Security.extensions.quickadd({\r\n                                            add: !isFav,\r\n                                            ticker: security?.symbol\r\n                                        })\r\n                                        setIsFav(!isFav);\r\n                                    }\r\n                                }} />\r\n                                <View style={{flexDirection: 'row'}}>\r\n                                    <Text style={[pxChange ? pxChange >= 0 ? { color: 'green'} : {color: 'red'} : {} ,{marginRight: sizes.rem0_5}]}>{toPercent2(pxChange)}</Text>\r\n                                    <Text>{toDollarsAndCents(security?.price?.price)}</Text>\r\n                                </View>\r\n                                </View>\r\n                            </View>\r\n                            <View style={[row, { marginVertical: sizes.rem0_5 }]}>\r\n                                <Text style={flex} category={\"label\"}>Open</Text>\r\n                                <Text style={flex} category={\"c1\"}>{toDollarsAndCents(security?.price?.open)}</Text>\r\n                                <Text style={flex} category={\"label\"}>52 Wk High</Text>\r\n                                <Text style={flex} category={\"c1\"}>{toDollarsAndCents(security?.week_52_high)}</Text>\r\n                            </View>\r\n                            <View style={[row, { marginBottom: sizes.rem1 }]}>\r\n                                <Text style={flex} category={\"label\"}>Close</Text>\r\n                                <Text style={flex} category={\"c1\"}>{toDollarsAndCents(security?.price?.price)}</Text>\r\n                                <Text style={flex} category={\"label\"}>52 Wk Low</Text>\r\n                                <Text style={flex} category={\"c1\"}>{toDollarsAndCents(security?.week_52_low)}</Text>\r\n                            </View>\r\n                            <View style={{ marginBottom: sizes.rem1 }} >\r\n                                <InteractiveChart data={securityPrices} performance={false} />\r\n                            </View>\r\n\r\n                            <ButtonGroup key={\"period\"} \r\n                                items={[\"1D\", \"1W\", \"1M\", \"3M\", \"1Y\", \"5Y\", \"Max\"].map(v => ({ label: v, value: v }))} \r\n                                onValueChange={(v) => setPortPeriod(v)} \r\n                                value={portPeriod} \r\n                            />\r\n                            <Text numberOfLines={5} style={{}}>{description}</Text>\r\n                        </ElevatedSection >\r\n                    </View>\r\n                    <View style={[\r\n                        //collapsed ? {display: 'flex'} : {display: 'flex'},\r\n                        { paddingHorizontal: sizes.rem1, backgroundColor: AppColors.background }]}>\r\n                        <ElevatedSection title=\"\" style={{marginBottom: sizes.rem0_5}} >\r\n                            <TabBar\r\n                                key={\"company_tabBar\"}\r\n                                indicatorStyle={{\r\n                                    marginTop: 26,\r\n                                    marginHorizontal: 10\r\n                                }}\r\n                                style={{width: \"100%\", marginHorizontal: 0 }}\r\n                                selectedIndex={tab}\r\n                                onSelect={t => {\r\n                                    //setTab(t);\r\n                                }}>\r\n                                {[\"Posts\", \"Analysts\"].map(t => <Tab key={\"tab_id\" + t} style={{ marginTop: -4 }} title={t} />)}\r\n                            </TabBar>\r\n                        </ ElevatedSection>\r\n                    </View>\r\n                </View>,\r\n                <View style={[{ paddingHorizontal: 0 }]}>\r\n                    {security && <FeedPart searchText={`$${security?.symbol}`} />}\r\n                </View>\r\n            ]}\r\n            renderItem={(info) => {\r\n                return info.item;\r\n            }}\r\n            ref={scrollRef} contentContainerStyle={[{ paddingTop: 0 }]} nestedScrollEnabled\r\n            /*\r\n            onMomentumScrollEnd={(ev) => {\r\n                if (collapsed && !isMaxed) {\r\n                    scrollRef.current?.scrollToOffset({ offset: clampMax, animated: true });\r\n                    setIsMaxed(true);\r\n                }\r\n            }}\r\n            </View>\r\n            */\r\n            onScroll={Animated.event<NativeSyntheticEvent<NativeScrollEvent>>([\r\n                { nativeEvent: { contentOffset: { y: translateHeaderY } } }\r\n            ], { useNativeDriver: true })}\r\n            >\r\n        </Animated.FlatList>\r\n        \r\n    </View >\r\n\r\n\r\n}","\r\nimport React, { useEffect, useLayoutEffect, useState } from \"react\";\r\nimport { Image, Text, Button, Animated, ImageBackground, useWindowDimensions, View, Alert, Platform } from \"react-native\";\r\nimport { TabScreenProps } from \"../navigation\";\r\nimport { ImageEditor } from 'expo-image-editor'\r\nimport { flex } from \"../style\";\r\nimport * as ImagePicker from 'expo-image-picker'\r\nimport { PrimaryButton } from \"../components/PrimaryButton\";\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { manipulateAsync, SaveFormat } from 'expo-image-manipulator'\r\nimport { useAppUser } from '../Authentication';\r\nimport { useData } from '../lds';\r\n\r\n//import { ImageManipulator } from 'expo-image-crop'\r\n//const imageCrop = require('expo-image-crop')\r\n//const ImageManipulator = imageCrop.ImageManipulator;\r\n\r\nconsole.log(\"Loading IMAGE PICKER\")\r\nexport const ImagePickerScreen = (props: TabScreenProps<{ onComplete: (data: any) => void }>) => {\r\n    const { loginState, updateState  } = useAppUser();\r\n    const appUser = loginState?.appUser;\r\n    console.log(\"Loading inside picker\")\r\n    const [imageUri, setImageUri] = useState<string>(),\r\n        [editorVisible, setEditorVisible] = useState(false),\r\n        [imageData, setImageData] = useState<{ uri: string }>();\r\n    // const pickImage = async () => {\r\n    //     // No permissions request is necessary for launching the image library\r\n    //     let result = await launchImageLibraryAsync({\r\n    //         mediaTypes: MediaTypeOptions.All,\r\n    //         allowsEditing: true,\r\n    //         aspect: [4, 3],\r\n    //         quality: 1,\r\n    //     });\r\n\r\n    //     console.log(result);\r\n\r\n    //     if (!result.cancelled) {\r\n    //         setImageUri(result.uri);\r\n    //     }\r\n    // };\r\n\r\n    const selectPhoto = async () => {\r\n        // Get the permission to access the camera roll\r\n        const response = await ImagePicker.requestMediaLibraryPermissionsAsync();\r\n        // If they said yes then launch the image picker\r\n        if (response.granted) {\r\n            const pickerResult = await ImagePicker.launchImageLibraryAsync({\r\n                base64: true\r\n            });\r\n            // Check they didn't cancel the picking\r\n            console.log(\"PHOTO HAS BEEN SELECTED\");\r\n            if (!pickerResult.cancelled) {\r\n                launchEditor(pickerResult.uri);\r\n            }\r\n        } else {\r\n            // If not then alert the user they need to enable it\r\n            Alert.alert(\r\n                \"Please enable camera roll permissions for this app in your settings.\"\r\n            );\r\n        }\r\n    };\r\n\r\n    const launchEditor = (uri: string) => {\r\n        console.log(\"WTF\")\r\n        // Then set the image uri\r\n        setImageUri(uri);\r\n        // And set the image editor to be visible\r\n        console.log(\"SHOWING EDITOR\");\r\n        setEditorVisible(true);\r\n    };\r\n\r\n    return <View style={flex}>\r\n        <Image\r\n            style={{ height: 300, width: 300 }}\r\n            source={{ uri: imageData?.uri }}\r\n        />\r\n        <Button title=\"Select Photo\" onPress={() => selectPhoto()} />\r\n\r\n        {imageData?.uri &&\r\n            <PrimaryButton onPress={async () => {\r\n                try {\r\n                    await Api.User.extensions.uploadProfilePic({\r\n                        image: imageData.uri\r\n                    })\r\n                    if (appUser)\r\n                        appUser.profile_url = imageData.uri;\r\n                    updateState();\r\n                    console.log(\"TRIGGERING\");\r\n                    props.navigation.goBack();\r\n                }\r\n                catch (ex) {\r\n                    console.error(ex);\r\n                }\r\n\r\n            }} >Upload Photo</PrimaryButton>}\r\n\r\n        <ImageEditor\r\n            //asView={Platform.OS === \"web\"}\r\n            visible={editorVisible}\r\n            onCloseEditor={() => {\r\n                setEditorVisible(false)\r\n            }}\r\n            imageUri={imageUri}\r\n            fixedCropAspectRatio={1}\r\n            lockAspectRatio={true}\r\n            minimumCropDimensions={{\r\n                width: 100,\r\n                height: 100,\r\n            }}\r\n            onEditingComplete={(result) => {\r\n                (async () => {\r\n                    console.log(\"DONE EDITTINGS\")\r\n                    const resizeResult = await manipulateAsync(result.uri, [{\r\n                        resize: {\r\n                            height: 512\r\n                        }\r\n                    }], {\r\n                        base64: true,\r\n                        format: SaveFormat.JPEG\r\n                    })\r\n\r\n\r\n                    setImageData({\r\n                        uri: \"data:image/jpeg;base64,\" + resizeResult.base64\r\n                    });\r\n                })()\r\n            }}\r\n            mode=\"crop-only\"\r\n        />\r\n    </View>\r\n\r\n    // const [imageUri, setImageUri] = useState(\"'https://i.pinimg.com/originals/39/42/a1/3942a180299d5b9587c2aa8e09d91ecf.jpg'\")\r\n    // // useLayoutEffect(() => {\r\n    // //     requestMediaLibraryPermissionsAsync().then(async (r) => {\r\n    // //         if (r.granted) {\r\n    // //             const img = await launchImageLibraryAsync();\r\n    // //             setImageUri((img as ImageInfo).uri);\r\n    // //         }\r\n    // //         else {\r\n    // //             props.navigation.goBack();\r\n    // //         }\r\n    // //     });\r\n    // // }, [])\r\n    // const [isVisible, setIsVisisble] = useState(false);\r\n    // const { width, height } = useWindowDimensions();\r\n    // return <ImageBackground\r\n    //     resizeMode=\"contain\"\r\n    //     style={[flex, {\r\n    //         justifyContent: 'center', padding: 20, alignItems: 'center', height, width, backgroundColor: 'black',\r\n    //     }]}\r\n    //     source={{ uri: imageUri }}\r\n    // >\r\n    //     <Button title=\"Open Image Editor\" onPress={() => setIsVisisble(true)} />\r\n    //     <ImageManipulator\r\n    //         photo={{ uri: imageUri }}\r\n    //         isVisible={isVisible}\r\n    //         onPictureChoosed={(p: { uri: string }) => setImageUri(p.uri)}\r\n    //         onToggleModal={() => setIsVisisble(v => !v)}\r\n    //     />\r\n    // </ImageBackground>\r\n}\r\n\r\n","import {View, Text, ScrollView, Pressable} from \"react-native\";\r\nimport {Api} from \"@tradingpost/common/api\";\r\nimport {ListTradesResponse} from \"@tradingpost/common/api/entities/interfaces\";\r\nimport {ElevatedSection} from \"../components/Section\";\r\nimport {NavigationProp, useNavigation} from \"@react-navigation/native\";\r\nimport {Avatar, Icon, Layout} from \"@ui-kitten/components\"\r\nimport {List} from \"../components/List\";\r\nimport {flex, fonts, sizes} from \"../style\";\r\nimport {AppColors} from \"../constants/Colors\";\r\nimport React from \"react\";\r\n\r\nexport const NotificationTradeScreen = (props: any) => {\r\n    return (\r\n        <View style={{flex: 1, backgroundColor: \"#F7f8f8\"}}>\r\n            <View>\r\n                <Layout style={{\r\n                    backgroundColor: \"#ffffff\",\r\n                    paddingBottom: '2%',\r\n                    paddingTop: '2%',\r\n                    borderBottomColor: '#11146F',\r\n                    borderStyle: 'solid',\r\n                    borderBottomWidth: 2,\r\n                    marginBottom: 10\r\n                }}>\r\n                    <Text style={{\r\n                        margin: 2,\r\n                        textAlign: 'center',\r\n                        fontSize: 20,\r\n                        fontWeight: '600',\r\n                        color: '#11146F',\r\n                    }}>Trade Alerts</Text>\r\n                </Layout>\r\n                <List\r\n                    style={{\r\n                        marginTop: '0.25rem'\r\n                    }}\r\n                    key={\"STATIC\"}\r\n                    datasetKey={\"__________\"}\r\n                    getItemLayout={(items, index, sizeCache) => {\r\n                        const curItem = items?.[index];\r\n                        return typeof curItem === 'object' ? sizeCache[index] : {\r\n                            index,\r\n                            offset: sizeCache[index - 1].offset + sizeCache[index - 1].length,\r\n                            length: 10\r\n                        };\r\n                    }}\r\n                    data={async (allItems: any, page: number, sizeCache: any[]): Promise<ListTradesResponse[]> => {\r\n                        const trades = (await Api.Notification.extensions.listTrades({\r\n                            page\r\n                        }));\r\n\r\n                        const newTrades = [...(allItems || []), ...trades];\r\n                        newTrades.forEach((item, index) => {\r\n                            if (!sizeCache[index]) {\r\n                                sizeCache[index] = {\r\n                                    index,\r\n                                    offset: index ? sizeCache[index - 1].offset + sizeCache[index - 1].length : 0,\r\n                                    length: 0,\r\n                                }\r\n                            }\r\n                        });\r\n                        return newTrades;\r\n                    }}\r\n                    keyExtractor={(item: any, index: number) => typeof item === 'string' ? 'loadingtext' : (index + \"_\" + item._id)}\r\n                    preloadOffset={1}\r\n                    renderItem={(item) => {\r\n                        if (typeof item.item === 'string') {\r\n                            return <Text style={{textAlign: \"center\", fontSize: fonts.large}}>Loading More...</Text>\r\n                        }\r\n\r\n                        const dt = new Date(item.item.dateTime);\r\n                        const dtFmt = `${dt.getMonth()+1}/${dt.getDay()}/${dt.getFullYear() % 100}`\r\n\r\n                        switch (item.item.type) {\r\n\r\n                            case \"sell\":\r\n                                return <ElevatedSection title={\"\"} style={{paddingTop: '0.5rem', paddingBottom: '0.5rem', marginHorizontal: sizes.rem2/2, marginVertical: sizes.rem1/2,}}>\r\n                                    <View style={{marginBottom: -sizes.rem0_5}}>\r\n                                        <View style={{flexDirection: \"row\", width: \"100%\", marginBottom: sizes.rem0_5}}>\r\n                                            <View style={[flex, {marginLeft: sizes.rem0_5}]}>\r\n                                                <Pressable onPress={() => {\r\n                                                }}>\r\n                                                    <View style={{flex: 1}}>\r\n                                                        <View style={{\r\n                                                            flexDirection: 'row',\r\n                                                            justifyContent: \"space-between\"\r\n                                                        }}>\r\n                                                            <Text style={{width: '15%'}}>\r\n                                                                {dtFmt}\r\n                                                            </Text>\r\n                                                            <Text style={{width: '30%'}}>\r\n                                                                @{item.item.handle}\r\n                                                            </Text>\r\n                                                            <Text style={{color: \"#22DDAA\", fontWeight: \"bold\", width: '20%'}}>\r\n                                                                Bought\r\n                                                            </Text>\r\n                                                            <Text style={{width: '12%'}}>\r\n                                                                {item.item.symbol}\r\n                                                            </Text>\r\n                                                            <Text style={{width: '20%'}}>\r\n                                                                ${toTwoDecimals(item.item.price)}\r\n                                                            </Text>\r\n                                                            <View style={{width: '8%'}}>\r\n                                                                <Icon style={{ opacity: 1, height: 16, width: 32 }} name={\"file-text-outline\"}\r\n                                                                      fill={AppColors.primary}\r\n                                                                />\r\n                                                            </View>\r\n                                                        </View>\r\n                                                    </View>\r\n                                                </Pressable>\r\n                                            </View>\r\n                                        </View>\r\n                                    </View>\r\n                                </ElevatedSection>\r\n                            case \"buy\":\r\n                                return <ElevatedSection title={\"\"} style={{paddingTop: '0.5rem', paddingBottom: '0.5rem', marginHorizontal: sizes.rem2/2, marginVertical: sizes.rem1/2,}}>\r\n                                    <View style={{marginBottom: -sizes.rem0_5}}>\r\n                                        <View style={{flexDirection: \"row\", width: \"100%\", marginBottom: sizes.rem0_5}}>\r\n                                            <View style={[flex, {marginLeft: sizes.rem0_5}]}>\r\n                                                <Pressable onPress={() => {\r\n                                                }}>\r\n                                                    <View style={{flex: 1}}>\r\n                                                        <View style={{\r\n                                                            flexDirection: 'row',\r\n                                                            justifyContent: \"space-between\"\r\n                                                        }}>\r\n                                                            <Text style={{width: '15%'}}>\r\n                                                                {dtFmt}\r\n                                                            </Text>\r\n                                                            <Text style={{width: '30%'}}>\r\n                                                                @{item.item.handle}\r\n                                                            </Text>\r\n                                                            <Text style={{color: \"#F4452D\", fontWeight: \"bold\", width: '20%'}}>\r\n                                                                Closed\r\n                                                            </Text>\r\n                                                            <Text style={{width: '12%'}}>\r\n                                                                {item.item.symbol}\r\n                                                            </Text>\r\n                                                            <Text style={{width: '20%'}}>\r\n                                                                ${toTwoDecimals(item.item.price)}\r\n                                                            </Text>\r\n                                                            <View style={{width: '8%'}}>\r\n                                                                <Icon style={{ opacity: 1, height: 16, width: 32 }} name={\"file-text-outline\"}\r\n                                                                      fill={AppColors.primary}\r\n                                                                />\r\n                                                            </View>\r\n                                                        </View>\r\n                                                    </View>\r\n                                                </Pressable>\r\n                                            </View>\r\n                                        </View>\r\n                                    </View>\r\n                                </ElevatedSection>\r\n                            default:\r\n                                return <ElevatedSection title={\"\"} style={{marginHorizontal: sizes.rem2/2, marginVertical: sizes.rem1/2, paddingTop: '0.5rem', paddingBottom: '0.5rem'}}>\r\n                                    <View style={{marginBottom: -sizes.rem0_5}}>\r\n                                        <View style={{flexDirection: \"row\", width: \"100%\", marginBottom: sizes.rem0_5}}>\r\n                                            <View style={[flex, {marginLeft: sizes.rem0_5}]}>\r\n                                                <Pressable onPress={() => {\r\n                                                }}>\r\n                                                    <View style={{flex: 1}}>\r\n                                                        <View style={{\r\n                                                            flexDirection: 'row',\r\n                                                            justifyContent: \"space-between\"\r\n                                                        }}>\r\n                                                            <Text style={{width: '15%'}}>\r\n                                                                {dtFmt}\r\n                                                            </Text>\r\n                                                            <Text style={{width: '30%'}}>\r\n                                                                @{item.item.handle}\r\n                                                            </Text>\r\n                                                            <Text style={{fontWeight: \"bold\", width: '20%'}}>\r\n                                                                {toUpperCase(item.item.type)}\r\n                                                            </Text>\r\n                                                            <Text style={{width: '12%'}}>\r\n                                                                {item.item.symbol}\r\n                                                            </Text>\r\n                                                            <Text style={{width: '20%'}}>\r\n                                                                ${toTwoDecimals(item.item.price)}\r\n                                                            </Text>\r\n                                                            <View style={{width: '8%'}}>\r\n                                                                <Icon style={{ opacity: 1, height: 16, width: 32 }} name={\"file-text-outline\"}\r\n                                                                      fill={AppColors.primary}\r\n                                                                />\r\n                                                            </View>\r\n                                                        </View>\r\n                                                    </View>\r\n                                                </Pressable>\r\n                                            </View>\r\n                                        </View>\r\n                                    </View>\r\n                                </ElevatedSection>\r\n                        }\r\n                    }}\r\n                    noDataMessage={\"No Trades Available\"}\r\n                    loadingItem={\" \"}\r\n                />\r\n            </View>\r\n        </View>\r\n    )\r\n}\r\n\r\nconst toUpperCase = (ss: string) => {\r\n    const s = ss.trim().toLowerCase();\r\n    return s.charAt(0).toUpperCase() + s.slice(1);\r\n}\r\n\r\nconst toTwoDecimals = (ss: string): string => {\r\n    const f = parseFloat(ss);\r\n    return f.toFixed(2);\r\n}","//react-native-pell-rich-editor\r\nimport pell, { exec } from 'pell'\r\nimport React from 'react'\r\nimport { useRef } from 'react'\r\nimport { useEffect } from 'react'\r\nimport { MutableRefObject, PropsWithRef, useState } from 'react'\r\nimport './TextEditor.css'\r\n//import \"../css/pell.css\"\r\n// export const TextEditor = (props: {\r\n//     editorRef: MutableRefObject<any>\r\n// }) => {\r\n//     return <div ref={props.editorRef} />\r\n// }\r\n\r\n\r\n\r\n\r\nexport const TextEditor = (props: PropsWithRef<{\r\n    editorRef: MutableRefObject<any>,\r\n    html: string,\r\n    onChangeHtml: (text: string) => void\r\n}>) => {\r\n    const [html, setHtml] = useState(props.html)\r\n    const divRef = useRef<HTMLDivElement>(null);\r\n    useEffect(() => {\r\n        if (divRef.current) {\r\n            const editor = pell.init({\r\n                element: divRef.current,\r\n                onChange: (html: string) => {\r\n                    //(props.editorRef.current as HTMLDivElement).innerHTML = html;\r\n                    props.onChangeHtml(html);\r\n                    setHtml(html);\r\n\r\n                },\r\n                actions: ['bold',\r\n                    'underline',\r\n                    'olist',\r\n                    'ulist',\r\n                    'italic',\r\n                    {\r\n                        name: 'backColor',\r\n                        icon: '<div style=\"background-color:yellow;\">A</div>',\r\n                        title: 'Highlight Color',\r\n                        result: () => exec('backColor', 'pink')\r\n                    },\r\n                    // {\r\n                    //     name: 'image',\r\n                    //     result: () => {\r\n                    //         const url = window.prompt('Enter the image URL')\r\n                    //         if (url) exec('insertImage', url)\r\n                    //     }\r\n                    // },\r\n                    {\r\n                        name: 'link',\r\n                        result: () => {\r\n                            const url = window.prompt('Enter the link URL')\r\n                            if (url) exec('createLink', url)\r\n                        }\r\n                    }]\r\n            })\r\n            editor.content.innerHTML = html\r\n        }\r\n    }, []);\r\n\r\n\r\n    return <div placeholder='Test' style={{\r\n        backgroundColor: \"#fefefe\",\r\n        display: \"flex\",\r\n        flexGrow: 1,\r\n        flexDirection: \"column\"\r\n    }} className='pell-holder' ref={divRef}></div>\r\n}","import { Api } from \"@tradingpost/common/api\";\r\nimport React, { useRef, useState } from \"react\";\r\nimport { KeyboardAvoidingView, Platform, ScrollView, View } from \"react-native\";\r\nimport { RichEditor, RichToolbar } from \"react-native-pell-rich-editor\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { Header } from \"../components/Headers\";\r\nimport { Label } from \"../components/Label\";\r\nimport { ButtonPanel } from \"../components/ScrollWithButtons\";\r\nimport { TextEditor } from \"../components/TextEditor\";\r\nimport { TextField } from \"../components/TextField\";\r\nimport { Text } from \"@ui-kitten/components\";\r\nimport { ButtonGroup } from \"../components/ButtonGroup\";\r\n//import Navigation, {DashScreenProps, TabScreenProps} from \"../navigation\";\r\nimport { sizes, flex, fonts } from \"../style\";\r\nimport { bindTextInput, bindTextInputBase, useReadonlyEntity } from \"../utils/hooks\";\r\n\r\nexport const PostEditorScreen = (props: any) => {\r\n    const [subLevel, setSubLevel] = useState('standard')\r\n    const postEntity = useReadonlyEntity({\r\n        content: \"\",\r\n        title: \"\",\r\n        subscription_level: \"standard\",\r\n        height: 0,\r\n        width: 0,\r\n        photos: []\r\n    }),\r\n        [locked, setLocked] = useState(false),\r\n        editorRef = useRef<any>(null),\r\n        toast = useToast(),\r\n        [contentFocused, setContentFocused] = useState(false)\r\n\r\n    return <View style={{ backgroundColor: \"white\", flexGrow: 1 }}>\r\n        <Header text='+ New Post' style={{ marginBottom: 0, marginTop: 4, marginLeft: sizes.rem1, color: \"black\" }} />\r\n        <View style={{ width: '90%' }}>\r\n            <ButtonGroup\r\n                style={{ margin: sizes.rem1 }}\r\n                unselectedStyle={{\r\n                    backgroundColor: \"#35A265\",\r\n                }}\r\n                value={subLevel}\r\n                onValueChange={(value) => {\r\n                    setSubLevel(value);\r\n                    postEntity.update({ subscription_level: value })\r\n\r\n                }}\r\n                items={[{ label: \"Free\", value: \"standard\" }, { label: \"Premium\", value: \"premium\" }]} />\r\n        </View>\r\n        <View style={{ marginHorizontal: sizes.rem1, marginTop: sizes.rem1 }}>\r\n            <TextField\r\n                label='Post Title' placeholder='Add a title to your post'  {...bindTextInput(postEntity, \"title\", null)}\r\n                markRequired />\r\n        </View>\r\n        <View style={{ flex: 1, marginHorizontal: sizes.rem1 / 5 }}>\r\n            <ScrollView\r\n                onTouchEnd={(ev) => {\r\n                    if (!contentFocused) {\r\n                        editorRef.current?.focusContentEditor();\r\n                    }\r\n                }}\r\n                style={[flex, {}]}\r\n                contentContainerStyle={{ minHeight: \"100%\", maxHeight: \"100%\", height: \"100%\" }}>\r\n                <Text style={{ fontSize: fonts.medium, marginHorizontal: sizes.rem1, marginVertical: sizes.rem1 }}>Post</Text>\r\n                {Platform.OS === 'web' && <TextEditor html={postEntity.data.content} onChangeHtml={function (text: string): void {\r\n                    postEntity.update({\r\n                        \"content\": text\r\n                    })\r\n                }} />\r\n                }\r\n                {Platform.OS !== 'web' && <RichEditor\r\n                    onLayout={(event) => {\r\n                        postEntity.update({ height: event.nativeEvent.layout.width / event.nativeEvent.layout.height, width: event.nativeEvent.layout.width })\r\n                    }}\r\n                    onFocus={() => {\r\n                        setContentFocused(true)\r\n                    }} onBlur={() =>\r\n                        setContentFocused(false)} containerStyle={{ minHeight: 1 }}\r\n                    initialContentHTML={postEntity.data.content} ref={editorRef}\r\n                    placeholder={\"Add content to your post\"}\r\n                    {...bindTextInputBase(postEntity, \"content\", null, { \"onChangeTextKey\": \"onChange\" })} />}\r\n            </ScrollView>\r\n        </View>\r\n\r\n        {/* //TODO: add are you sure if dirty  */}\r\n        <KeyboardAvoidingView style={{ flex: 1 }} behavior={Platform.OS === \"ios\" ? \"padding\" : \"height\"}>\r\n            {Platform.OS !== \"web\" && <RichToolbar editor={editorRef} />}\r\n            <ButtonPanel\r\n\r\n                locked={locked}\r\n                left={{\r\n                    onPress: () => {\r\n                        props.navigation.goBack();\r\n                    },\r\n                    \"text\": \"Cancel\"\r\n                }}\r\n                right={{\r\n                    onPress: async () => {\r\n\r\n\r\n                        setLocked(true);\r\n                        if (!postEntity.data.content || !postEntity.data.title) {\r\n                            toast.show(\"Please provide a title and content for your post\");\r\n                            setLocked(false);\r\n                        } else {\r\n                            try {\r\n                                //const { id: postId } = \r\n                                await Api.Post.extensions.create(postEntity.data);\r\n                                // Navigation.pop(props.componentId);\r\n                                // const posts = await getPosts([postId]);\r\n                                // screens.push(props.componentId, \"Post\",\r\n                                //     { passProps: { post: posts[0] } });\r\n                                props.navigation.goBack();\r\n\r\n                            } catch (ex: any) {\r\n                                toast.show(ex.message);\r\n                                setLocked(false);\r\n                            }\r\n                        }\r\n                    }\r\n                    ,\r\n                    \"text\": \"Create\"\r\n                }}\r\n            />\r\n        </KeyboardAvoidingView>\r\n\r\n    </View>\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { RootStackParamList } from '../navigation/pages'\r\nimport { NavigationProp, useNavigation } from \"@react-navigation/native\"\r\nimport { Alert, Image, ImageBackground, Linking, PixelRatio, Platform, Pressable, ScrollView, StyleSheet, Text, TouchableOpacity, View } from 'react-native'\r\nimport { flex, fonts, paddView, row, shadow, sizes } from '../style'\r\nimport { Api, Interface } from '@tradingpost/common/api'\r\nimport { Header, Subheader } from './Headers'\r\nimport { useWindowDimensions } from 'react-native'\r\nimport { useAppUser } from '../Authentication'\r\nimport { toFormatedDateTime } from '../utils/misc'\r\nimport { ProfileButton } from './ProfileButton'\r\n\r\nconst commentTotalVerticalMargin = sizes.rem1;\r\nconst commentTotalHorizontalMargin = sizes.rem2;\r\nconst commentSidePad = sizes.rem2;\r\nconst commentTotalBorder = 2;\r\nconst spaceOnSide = commentTotalHorizontalMargin + commentTotalBorder + commentSidePad\r\n\r\nexport function CommentView(props: {comment: Interface.ICommentPlus}) {\r\n    const { comment } = props;\r\n    const { loginState } = useAppUser()\r\n    \r\n    const nav = useNavigation<NavigationProp<RootStackParamList>>();\r\n    \r\n    return <View style={[{marginVertical: sizes.rem0_5 / 2}, ]}>\r\n                <View style={[{alignItems: 'center'}, props.comment.user_id === loginState?.appUser?.id ? { flexDirection: 'row'} : { flexDirection: 'row-reverse'}]}>\r\n                    <Pressable\r\n                        onPress={() => {\r\n                            if (props.comment.user_id)\r\n                                nav.navigate(\"Profile\", {\r\n                                    userId: props.comment.user_id\r\n                                } as any);\r\n                        }} style={[row, {\r\n                            alignItems: \"center\",\r\n                            overflow: \"hidden\",\r\n                            //borderBottomColor: \"#ccc\",\r\n                            //borderBottomWidth: 1,\r\n                            padding: sizes.rem1 / 2\r\n                        }]}>\r\n                        {\r\n                            <ProfileButton userId={comment.user_id}\r\n                                profileUrl={comment.profile_url || \"\"} size={48} />\r\n                        }\r\n                    </Pressable>\r\n                    <View style={{width: '80%', paddingBottom: 6}}>\r\n                        <View style={[shadow, { backgroundColor: \"white\", borderRadius: sizes.borderRadius * 4, borderColor: \"#ccc\", borderWidth: commentTotalBorder / 2, justifyContent: 'center', minHeight: 48 }]}>\r\n                            {/*<View style={[flex, { borderBottomWidth: 1, borderBottomColor: \"#ccc\", padding: sizes.rem0_5 }]}>\r\n                            </View>*/}\r\n                            {/*<Text style={{fontWeight: '500',padding: sizes.rem0_5, borderBottomWidth: 1, borderBottomColor: '#ccc'}}>\r\n                                {`@${comment.handle}`}\r\n                            </Text>*/}\r\n                            <Text style={{padding: sizes.rem0_5, fontSize: 14}}>\r\n                                {comment.comment}\r\n                            </Text>\r\n                        </View>\r\n                    </View>\r\n                </View>\r\n                <Text style={[{fontSize: fonts.medium / 2 , paddingHorizontal: sizes.rem1, color: '#9D9D9D'},  props.comment.user_id === loginState?.appUser?.id ? {} : {textAlign: 'right'}]}>\r\n                    {`@${comment.handle}   ${toFormatedDateTime(String(comment.created_at))}`}\r\n                </Text>\r\n           </View>\r\n}","import { Interface } from \"@tradingpost/common/api\";\r\nimport { useState } from \"react\";\r\nimport { Text } from 'react-native'\r\nimport { DataOrQuery, List } from \"./List\";\r\nimport { fonts, sizes } from \"../style\";\r\nimport { CommentView } from \"./CommentView\";\r\nimport { Section } from \"./Section\";\r\nimport React from \"react\";\r\n\r\nexport function CommentsList(props: {comments: Interface.ICommentPlus[]}) {\r\n    \r\n    return (\r\n    <Section title=\"Comments\" style={{flex: 1, backgroundColor: 'transparent',marginHorizontal: sizes.rem1 }}>\r\n        <List \r\n            getItemLayout={(items, index, sizeCache) => {\r\n                const curItem = items?.[index];\r\n                const length = 20;\r\n                const output = typeof curItem === \"object\" ? \r\n                        (sizeCache[index] ? \r\n                            sizeCache[index] : \r\n                            {index, \r\n                            offset: length * index, \r\n                            length: length }) : \r\n                    {index, \r\n                    offset: sizeCache[index - 1].offset + sizeCache[index - 1].length, \r\n                    length: 40 };\r\n                return output;\r\n            }}\r\n            key={\"id\" + String(props.comments.length)}\r\n            datasetKey={\"___\"}\r\n            data={props.comments}\r\n            keyExtractor={(item, index) => typeof item === \"string\" ? \"loadingtext\" : (index + \"_\" + item.id)}\r\n            preloadOffset={2}\r\n            renderItem={(item) => {\r\n                \r\n                if (typeof item.item === \"string\") {\r\n                    return <Text style={{ textAlign: \"center\", fontSize: fonts.large }}>Loading More...</Text>\r\n                }\r\n                else {\r\n                    return <CommentView key={item.index + \"_\" + item.item.id} comment={item.item} />\r\n                }\r\n            }}\r\n            noDataMessage={\"No Comments Available\"}\r\n            loadingItem={\"  \"}\r\n            />\r\n    </Section>)\r\n}","import React, { useEffect, useState } from \"react\";\r\nimport { Keyboard, View } from \"react-native\";\r\n//import { DashProps } from \"../layouts/DashboardLayout\";\r\nimport { flex } from \"../style\";\r\nimport { CommentIcon, SendIcon } from \"../images\";\r\nimport { Input } from \"@ui-kitten/components\";\r\nimport { PostView } from \"../components/PostView\";\r\nimport { Api, Interface } from \"@tradingpost/common/api\";\r\nimport { CommentsList } from \"../components/CommentList\";\r\nimport { KeyboardAvoidingInput } from \"../components/KeyboardAvoidingInput\";\r\nimport { AwaitedReturn } from \"../utils/misc\";\r\nimport { RootStackScreenProps } from \"../navigation/pages\";\r\n\r\nexport function PostScreen(props: RootStackScreenProps<\"PostScreen\">) {\r\n    //https://m.tradingpostapp.com/post?\r\n\r\n\r\n    const [post, setPost] = useState(props.route.params.post);\r\n\r\n    useEffect(() => {\r\n        if (!post) {\r\n            //lookup posts \r\n            Api.Post.extensions.feed({\r\n                page: 0,\r\n                postId: props.route.params.id\r\n            }).then((r) => {\r\n                setPost(r[0]);\r\n            }).catch(ex => {\r\n                console.error(ex);\r\n            })\r\n\r\n        }\r\n    }, [props.route.params.id, post])\r\n\r\n\r\n    const [postCommments, setPostComments] = useState<AwaitedReturn<typeof Api.Comment.extensions.postList>>([]);\r\n    const [newComment, setNewComment] = useState('');\r\n    const [commentAdded, setCommentAdded] = useState(0);\r\n    useEffect(() => {\r\n        if (post) {\r\n            Api.Comment.extensions.postList({ type: \"post\", id: post._source.id })\r\n                .then((r) => {\r\n                    const data = r.sort((a, b) => {\r\n                        const diff = (new Date(String(a.created_at))).valueOf() - (new Date(String(b.created_at))).valueOf()\r\n                        return diff\r\n                    })\r\n                    setPostComments(data);\r\n                })\r\n        }\r\n    }, [post])\r\n    useEffect(() => {\r\n        if (post)\r\n            Api.Comment.extensions.postList({ type: \"post\", id: post._source.id })\r\n                .then((r) => {\r\n                    const data = r.sort((a, b) => {\r\n                        const diff = (new Date(String(a.created_at))).valueOf() - (new Date(String(b.created_at))).valueOf()\r\n                        return diff\r\n                    })\r\n                    setPostComments(data);\r\n                })\r\n    }, [commentAdded, post])\r\n\r\n    return (<View style={{ height: \"100%\" }}>\r\n        {post && <PostView\r\n            post={post} />}\r\n        <CommentsList\r\n            comments={postCommments ? postCommments : []} />\r\n        <KeyboardAvoidingInput\r\n            value={newComment}\r\n            placeholder={'Leave your comment'}\r\n            rightIcon={(props: any) => <SendIcon height={24}\r\n                width={24}\r\n                style={{ height: 24, width: 24, alignContent: 'center' }}\r\n            />\r\n            }\r\n            setValue={setNewComment}\r\n            displayButton={true}\r\n            numLines={1}\r\n            item_id={post?._source.id}\r\n            clicked={[commentAdded, setCommentAdded]}\r\n            onClick={(r: any, s: any, t: any) => {\r\n\r\n                if (r.length && post)\r\n                    Api.Comment.insert({ user_id: post._source.user.id, related_type: 'post', comment: r, related_id: t })\r\n                Keyboard.dismiss()\r\n                s('')\r\n            }}\r\n        />\r\n    </View>)\r\n\r\n}","import React from \"react\"\r\nimport { Table } from \"../components/Table\"\r\nimport { View } from 'react-native'\r\nimport { Text } from '@ui-kitten/components'\r\nimport { AllPages, TabScreenProps } from \"../navigation\"\r\nimport { NavigationProp, useNavigation } from \"@react-navigation/native\"\r\nimport { Link } from \"../components/Link\"\r\nimport { flex, paddView, paddViewWhite } from \"../style\"\r\nimport { ElevatedSection } from \"../components/Section\"\r\n\r\n\r\nexport function LimitedTable<T>(props: {\r\n    maxPage: number,\r\n    listKey: string,\r\n    title: string,\r\n    tableProps: Omit<Parameters<typeof Table<T>>[0], \"maxPage\">\r\n}) {\r\n    const nav = useNavigation();\r\n    return <View style={[{}]}>\r\n        <View>\r\n            <Table {...props.tableProps} listKey={props.listKey} maxPage={props.maxPage} />\r\n        </View>\r\n        <Link\r\n            style={{\r\n                marginLeft: \"auto\"\r\n            }}\r\n            onPress={() => {\r\n                nav.navigate(\"TableModal\", {\r\n                    tableProps: props.tableProps as any,\r\n                    title: props.title\r\n                })\r\n            }}>View All</Link>\r\n    </View>\r\n}\r\n\r\nexport function TableModalScreen<T>(props: TabScreenProps<{ title: string, tableProps: Parameters<typeof Table<T>>[0] }>) {\r\n    return (\r\n        props.route?.params?.tableProps ? \r\n        <View style={paddView}>\r\n            <ElevatedSection title={props.route.params.title} >\r\n                <Table {...props.route?.params?.tableProps} />\r\n            </ElevatedSection>\r\n        </View> : \r\n        <Text>Error</Text>\r\n        )\r\n}","import React, { useEffect, useState } from \"react\"\r\nimport { View } from \"react-native\"\r\nimport { useAppUser } from \"../Authentication\"\r\nimport { ElevatedSection } from \"../components/Section\"\r\nimport { Text } from '@ui-kitten/components'\r\nimport { RootStackScreenProps } from \"../navigation/pages\"\r\nimport { Link } from \"../components/Link\"\r\nimport { Api } from '@tradingpost/common/api'\r\nimport { ButtonPanel } from \"../components/ScrollWithButtons\"\r\nimport { paddView, sizes } from \"../style\"\r\nimport { useToast } from \"react-native-toast-notifications\"\r\nimport { useLinkTo } from \"@react-navigation/native\"\r\n\r\n\r\nexport const VerificationScreen = (props: RootStackScreenProps<\"VerifyAccount\">) => {\r\n    const { loginState, signIn } = useAppUser();\r\n    const verificationToken = props.route.params?.token;\r\n    const toast = useToast();\r\n    const linkTo = useLinkTo();\r\n    console.log(\"I'm on the verification screennnn....\")\r\n    const [imVerified, setImVerified] = useState(false);\r\n    useEffect(() => {\r\n        if (imVerified) {\r\n            if (loginState?.loginResult?.verified)\r\n                linkTo(\"/dash/feed\");\r\n            else {\r\n                toast.show(\"You account is still unverified. Please check your email for details.\")\r\n                setImVerified(false);\r\n            }\r\n        }\r\n    }, [imVerified, loginState?.loginResult])\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            if (verificationToken && !loginState?.appUser) {\r\n                if (loginState?.authToken) {\r\n                    try {\r\n                        console.log(\"SIGNING IN.....\");\r\n                        await signIn(\"\", loginState.authToken);\r\n                        setImVerified(true);\r\n\r\n                    } catch (ex: any) {\r\n                        console.log(ex.message);\r\n                    }\r\n                } else {\r\n                    console.log(\"I CANT FIND THE TOKEN.....\");\r\n                    props.navigation.replace(\"Root\", {});\r\n                }\r\n            }\r\n        })()\r\n    }, [\r\n        loginState?.authToken,\r\n        verificationToken, loginState?.appUser\r\n    ])\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n\r\n            if (verificationToken && loginState?.appUser) {\r\n                try {\r\n\r\n                    await Api.User.extensions.validateUser({\r\n                        verificationToken\r\n                    })\r\n                    if (loginState?.authToken)\r\n                        await signIn(\"\", loginState?.authToken);\r\n\r\n\r\n                } catch (ex: any) {\r\n                    toast.show(ex.message);\r\n                }\r\n            }\r\n        })()\r\n    }, [verificationToken, toast, loginState?.authToken, loginState?.appUser, imVerified])\r\n    return <View style={paddView}>\r\n        <ElevatedSection title=\"Verify Your Email\">\r\n            <Text style={{ textAlign: \"center\", paddingVertical: sizes.rem1 }}>{loginState?.appUser?.email}</Text>\r\n            <ButtonPanel\r\n                left={{\r\n                    onPress: async () => {\r\n                        if (loginState?.authToken)\r\n                            await signIn(\"\", loginState?.authToken);\r\n                        linkTo(\"/dash/feed\")\r\n                        //props.navigation.navigate(\"Dash\");\r\n                    },\r\n                    text: \"Skip\"\r\n                }}\r\n                right={{\r\n                    onPress: async () => {\r\n                        //try auth signin\r\n                        if (loginState?.authToken)\r\n                            await signIn(\"\", loginState?.authToken);\r\n                        setImVerified(true);\r\n                    },\r\n                    text: \"I'm Verified\"\r\n                }}\r\n            />\r\n            <Link\r\n                style={{ textAlign: \"center\", paddingVertical: sizes.rem1 }}\r\n                onPress={async () => {\r\n                    try {\r\n                        await Api.User.extensions.sendEmailValidation();\r\n                        toast.show(\"Verification Email has been sent\")\r\n                    } catch (ex: any) {\r\n                        console.log(ex.message);\r\n                    }\r\n                }}>[Resend Verification Email]</Link>\r\n            <Text>{props.route.params?.token}</Text>\r\n        </ElevatedSection>\r\n    </View>\r\n}","import React, { ReactNode } from \"react\";\r\nimport { View, ScrollView, FlatList } from \"react-native\";\r\nimport { AppColors } from \"../constants/Colors\";\r\n\r\nimport { flex } from \"../style\";\r\nimport { useIsKeyboardVisible } from \"../utils/hooks\";\r\nimport { PrimaryButton } from \"./PrimaryButton\";\r\nimport { SecondaryButton } from \"./SecondaryButton\";\r\n\r\nexport function VirtualListWithButtons(props: { children?: ReactNode, buttons?: ButtonPanelProps, fillHeight?: boolean }) {\r\n    const { isKeyboardVisible } = useIsKeyboardVisible();\r\n    const listChildren = props.children;\r\n    return <View style={[flex,]} >\r\n        <View style={[flex, { backgroundColor: AppColors.background }]} >\r\n            <FlatList nestedScrollEnabled contentContainerStyle={props.fillHeight ? { maxHeight: \"100%\", height: \"100%\"} : {}}\r\n                data={[\r\n                    <View style={[!isKeyboardVisible ? {display: 'flex'} : {display: 'none'}, { height: 0 }]} ></View>,\r\n                    <View>{listChildren}</View>\r\n                ]}\r\n                renderItem={(info) => {\r\n                    return info.item;\r\n                }}\r\n            >\r\n                {/* This is here to force layout of the content. Seems like a but with enxted scrollview content */}\r\n                \r\n                \r\n            </FlatList>\r\n        </View>\r\n        {props.buttons && <ButtonPanel {...props.buttons} />}\r\n    </View>\r\n}\r\n\r\nexport type ButtonPanelProps = {\r\n    locked?: boolean,\r\n    left?: {\r\n        text: string,\r\n        onPress: () => void\r\n    },\r\n    right: {\r\n        text: string,\r\n        onPress: () => void\r\n    }\r\n}\r\nexport function ButtonPanel(props: ButtonPanelProps) {\r\n    return <View style={[{ borderTopColor: \"#ccc\", borderTopWidth: 1, flexDirection: \"row\", \r\n    paddingTop: 8,\r\n     paddingBottom: 8, \r\n     \r\n     justifyContent: \"space-evenly\", zIndex: 1000 }]}>\r\n        {props.left && <SecondaryButton style={{ width: \"48%\" }} onPress={props.left.onPress} disabled={props.locked} >{props.left.text}</SecondaryButton>}\r\n        <PrimaryButton style={{ width: props.left ? \"48%\" : \"96%\" }} onPress={props.right.onPress} disabled={props.locked} >{props.right.text}</PrimaryButton>\r\n    </View>\r\n}\r\n","import { useNavigation } from \"@react-navigation/native\";\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { sleep } from \"@tradingpost/common/utils/sleep\";\r\nimport { Button, } from \"@ui-kitten/components\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { View, Text } from \"react-native\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { ButtonGroup } from \"../components/ButtonGroup\";\r\nimport { ScrollWithButtons } from \"../components/ScrollWithButtons\";\r\nimport { ElevatedSection, Section } from \"../components/Section\";\r\nimport { SwitchField } from \"../components/SwitchField\";\r\nimport { TextField } from \"../components/TextField\";\r\nimport { VirtualListWithButtons } from \"../components/VirtualListWithButtons\";\r\nimport { useWatchlistPicker, WatchlistPicker } from \"../components/WatchlistPicker\";\r\nimport { setValue } from \"../lds\";\r\nimport { DashScreenProps, TabScreenProps } from \"../navigation\";\r\nimport { flex, paddView, paddViewWhite, sizes } from \"../style\";\r\ntype WLTypes = \"public\" | \"primary\" | \"private\";\r\n\r\nexport const WatchlistEditorScreen = (props: TabScreenProps<{ watchlistId?: number }>) => {\r\n    const pickerProps = useWatchlistPicker();\r\n    const [name, setName] = useState(\"\");\r\n    const [note, setNote] = useState<string>();\r\n    const [type, setWatchlistType] = useState<WLTypes>(\"public\");\r\n\r\n    const watchlistId = props.route?.params?.watchlistId;\r\n    //TODO: HACK need to clean this u\r\n    const nav = useNavigation()\r\n    const [magic, setMagic] = useState(true);\r\n    const toast = useToast();\r\n    useEffect(() => {\r\n        (async ()=> {\r\n            const converter = pickerProps.symbolConverter.current;\r\n            if (watchlistId && converter){\r\n                if (watchlistId > 0) {\r\n                    Api.Watchlist.get(watchlistId).then((watchlist) => {\r\n                        //TODO: need to deal with settings for primary watchlist\r\n                        setName(watchlist.name);\r\n                        setWatchlistType(watchlist.type as WLTypes);\r\n                        setNote(watchlist.note);\r\n                        const selectedItems = converter(watchlist.items.map((s) => s.symbol));\r\n                        pickerProps.onSelectedItemschanged(selectedItems);\r\n    \r\n                        //TODO:: need to cache items notes since this is an delete and insert style update\r\n    \r\n                    }).catch((ex) => {\r\n                        toast.show(ex.message);\r\n                    })\r\n                }\r\n                else {\r\n                    setName(\"Primary Watchlists\")\r\n                    setWatchlistType(\"primary\");\r\n                }\r\n            }\r\n        })()\r\n        \r\n    }, [watchlistId, Boolean(pickerProps.symbolConverter.current)])\r\n\r\n\r\n    return <View style={paddView}>\r\n        <VirtualListWithButtons\r\n            buttons={{\r\n                right: {\r\n                    text: props.route?.params?.watchlistId ? \"Update Watchlist\" : \"Create Watchlist\",\r\n                    onPress: async () => {\r\n                        if (name && pickerProps.selectionConverter.current) {\r\n                            const items = pickerProps.selectionConverter.current(pickerProps.selectedItems);\r\n                            if (items.length < 2)\r\n                                toast.show(\"Please select at least 2 securities\");\r\n                            else {\r\n                                const watchlistData = {\r\n                                    items: items.map(i => ({\r\n                                        symbol: i.symbol,\r\n                                        date_added: new Date()\r\n                                    })),\r\n                                    name: name,\r\n                                    note,\r\n                                    type: type\r\n                                }\r\n\r\n                                if (props.route?.params?.watchlistId && props.route.params.watchlistId > 0) await Api.Watchlist.update(props.route.params.watchlistId, watchlistData)\r\n                                else await Api.Watchlist.insert(watchlistData)\r\n\r\n                                nav.goBack()\r\n                            }\r\n                        }\r\n                        else {\r\n                            toast.show(\"Please name your watchlist\");\r\n                        }\r\n                    }\r\n                }\r\n            }}>\r\n            <View>\r\n                {type !== \"primary\" &&\r\n                    <ElevatedSection title={(props.route?.params?.watchlistId ? \"Edit\" : \"Create\") + \" Watchlist\"} >\r\n                        <View style={{ flexDirection: \"column\", margin: sizes.rem0_5 }}>\r\n                            <ButtonGroup value={type} onValueChange={(value) => {\r\n                                setWatchlistType(value);\r\n                            }}\r\n                                items={[{ label: \"Public\", value: \"public\" }, { label: \"Private\", value: \"private\" }]}\r\n                            />\r\n                            <TextField value={name} onChangeText={(v) => setName(v || \"\")} placeholder=\"Watchlist Name\" style={{ marginBottom: sizes.rem0_5 }} />\r\n                            <TextField value={note} onChangeText={(v) => setNote(v || \"\")} placeholder=\"Watchlist Note\" style={{}} />\r\n                        </View>\r\n                    </ElevatedSection>\r\n                }\r\n                <ElevatedSection style={{ height: \"100%\" }} title={type === \"primary\" ? \"Quick Watchlist\" : \"Watchlist Securities\"}>\r\n                    <WatchlistPicker {...pickerProps} securitiesLoaded={() => {\r\n                        console.log(\"Securities are available...\");\r\n                        setMagic(m => !m)\r\n                    }} />\r\n                </ElevatedSection>\r\n            </View>\r\n        </VirtualListWithButtons>\r\n    </View >\r\n\r\n}\r\n","import { Api } from \"@tradingpost/common/api\";\r\nimport { AllWatchlists, IWatchlistGet, IWatchlistList } from \"@tradingpost/common/api/entities/interfaces\";\r\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport { Pressable, ScrollView, TextStyle, View } from \"react-native\";\r\nimport { AddButton, EditButton } from \"../components/AddButton\";\r\nimport { Avatar, Icon, Text } from '@ui-kitten/components'\r\nimport { ElevatedSection, Section, Subsection } from \"../components/Section\";\r\nimport { WatchlistItemRenderItem } from '../components/WatchlistItemRenderItem'\r\nimport { Table } from \"../components/Table\";\r\nimport { DataOrQuery } from '../components/List'\r\n//import { DashScreenProps, TabScreenProps } from \"../navigation\";\r\nimport { flex, fonts, paddView, sizes } from \"../style\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { NoteEditor, SecPressable, useMakeSecurityFields, useWatchlistItemColumns } from \"./WatchlistViewerScreen\";\r\nimport { AwaitedReturn, toDollarsAndCents, toPercent, toPercent2, toThousands } from \"../utils/misc\";\r\nimport { WatchlistSection } from \"../components/WatchlistSection\";\r\nimport Theme from '../theme-light.json'\r\nimport { FlatList } from \"react-native-gesture-handler\";\r\nimport { List } from \"../components/List\"\r\nimport { useFocusEffect, useNavigation } from \"@react-navigation/native\";\r\nimport { useSecuritiesList } from \"../SecurityList\";\r\nimport { Header } from \"../components/Headers\";\r\nimport { AppColors } from \"../constants/Colors\";\r\n\r\nexport const WatchlistScreen = (props: any) => {\r\n    const nav = useNavigation();\r\n    const [watchlists, setWatchlists] = useState<AllWatchlists>()\r\n    const [shownMap, setShownMap] = useState<Record<string, boolean>>({})\r\n    const [quickWatchlist, setQuickWatchlist] = useState<IWatchlistGet>()\r\n    const toast = useToast();//const [trades, setTrades] = useState<AwaitedReturn<typeof Api.User.extensions.getTrades>>();\r\n    const [focus, setFocus] = useState(false);\r\n    const scrollRef = useRef<FlatList>(null);\r\n    useFocusEffect(useCallback(()=> {\r\n        \r\n        (async () => {\r\n            try {\r\n                const lists = await Api.Watchlist.extensions.getAllWatchlists();\r\n\r\n                if (lists.quick.id) {\r\n                    setQuickWatchlist(await Api.Watchlist.get(lists.quick.id));\r\n                }\r\n                else {\r\n                    setQuickWatchlist({\r\n                        id: 0,\r\n                        items: [],\r\n                        name: \"\",\r\n                        saved_by_count: 0,\r\n                        type: \"primary\",\r\n                        user: [],\r\n                        is_saved: false\r\n                    })\r\n                }\r\n                setFocus((f) => !f)\r\n                setWatchlists(lists);\r\n\r\n            }\r\n            catch (ex: any) {\r\n                toast.show(ex.message);\r\n            }\r\n        })()\r\n        \r\n    },[]))\r\n\r\n    const { columns: watchlistItemColumns } = useWatchlistItemColumns(true)\r\n    const { securities: { bySymbol, byId } } = useSecuritiesList();\r\n    const hideEmptyNote = false;\r\n    return <View style={[paddView]}>\r\n        <FlatList\r\n            listKey=\"top_level_watchlist\"\r\n            data={[\r\n                <View>\r\n                    <View style={{flex: 1, flexDirection: 'row'}}>\r\n                        <Header key={\"quick_watch\"} text=\"Quick Watch\" style={{flex: 1}}/>\r\n                        <View style={{marginHorizontal: 6}}> \r\n                            {  \r\n                                watchlists?.quick.id ?\r\n                                    <EditButton\r\n                                        height={24}\r\n                                        width={24} \r\n                                        onPress={() => {\r\n                                            nav.navigate(\"WatchlistEditor\", {\r\n                                                watchlistId: watchlists?.quick.id\r\n                                            })\r\n                                    }} /> :\r\n                                    <AddButton\r\n                                        height={24}\r\n                                        width={24} \r\n                                        onPress={() => {\r\n                                            nav.navigate(\"WatchlistEditor\", {\r\n                                                watchlistId: -1\r\n                                            })\r\n                                    }} />\r\n                                }\r\n                        </View>\r\n                    </View>\r\n                \r\n                <List\r\n                    datasetKey={`${focus}`}\r\n                    listKey={`quick_watch_list${focus}`}\r\n                    loadingMessage={\" \"}\r\n                    noDataMessage={\" \"}\r\n                    loadingItem={undefined}\r\n                    numColumns={2}\r\n                    data={quickWatchlist?.items}\r\n                    renderItem={(item) => {                        \r\n                        return (\r\n                            <WatchlistItemRenderItem\r\n                                item={item}\r\n                                bySymbol={bySymbol}\r\n                                byId={byId}\r\n                                hideEmptyNote={hideEmptyNote}\r\n                                setShownMap={setShownMap}\r\n                                shownMap={shownMap}\r\n                                watchlist={quickWatchlist}\r\n                                    />\r\n                        )\r\n                    }}\r\n                />\r\n            </View>,\r\n            <WatchlistSection\r\n                datasetKey={`my_watchlist_${focus}`}\r\n                title=\"My Watchlists\"\r\n                key={`my_watchlist${focus}`}\r\n                watchlists={watchlists?.created}\r\n                showAddButton\r\n                hideNoteOnEmpty\r\n            />,\r\n            <WatchlistSection\r\n                datasetKey={`shared_watchlist_${focus}`}\r\n                title=\"Shared Watchlists\"\r\n                key={`shared_watchlist${focus}`}\r\n                watchlists={watchlists?.saved}\r\n                shared\r\n            />\r\n            ]}\r\n            renderItem={(info) => {\r\n                return info.item;\r\n            }}\r\n            ref={scrollRef} contentContainerStyle={[{ paddingTop: 0}]} nestedScrollEnabled         \r\n\r\n            >\r\n        </FlatList>\r\n    </View >\r\n\r\n}","import React, { useEffect, useState } from \"react\";\r\nimport { ScrollView, useWindowDimensions, View, Text } from \"react-native\";\r\nimport { Api, Interface } from \"@tradingpost/common/api\";\r\nimport { elevated, flex, fonts, sizes } from \"../style\";\r\nimport { ClimbingMountain, Studying, Debate, Analyze } from \"../images\";\r\nimport { AppColors } from \"../constants/Colors\";\r\nimport { ExitButton } from \"../components/AddButton\";\r\nimport { useLinkTo } from \"@react-navigation/native\";\r\nimport { useData } from \"../lds\";\r\nimport { SecondaryButton } from \"../components/SecondaryButton\";\r\n\r\nexport function AppInformationScreen(props: any) {\r\n    const [sliderState, setSliderState] = useState({ currentPage: 0 });\r\n    let { width: widthOg, height } = useWindowDimensions();\r\n    let width = Math.min(widthOg, 680);\r\n    const { value: result, setValue: setResult } = useData('loginResult')\r\n    const linkTo = useLinkTo<any>();\r\n    const setSliderPage = (event: any) => {\r\n        const { currentPage } = sliderState;\r\n        const { x } = event.nativeEvent.contentOffset;\r\n        const indexOfNextScreen = Math.floor(x / width);\r\n        if (indexOfNextScreen !== currentPage) {\r\n            setSliderState({\r\n                ...sliderState,\r\n                currentPage: indexOfNextScreen,\r\n            });\r\n        }\r\n    };\r\n    const paragraphSize = height >= 760 ? fonts.medium : fonts.small\r\n    const { currentPage: pageIndex } = sliderState;\r\n\r\n    return <View style={flex}>\r\n        <View style={{ zIndex: 1, position: 'absolute', top: 30, left: 10, flexDirection: 'row', alignItems: 'center' }}>\r\n            <ExitButton height={36} width={36} color={'#708090'} style={{ height: 36, width: 36, }}\r\n                onPress={() => {\r\n                    if (result) {\r\n                        if (result.verified)\r\n                            linkTo('/dash/feed')\r\n                        else\r\n                            linkTo('/verifyaccount');\r\n                    }\r\n                    else {\r\n                        linkTo('/login')\r\n                    }\r\n                }} />\r\n            <Text style={{ color: '#708090', marginLeft: 10 }}>{\"Exit Introduction\"}</Text>\r\n        </View>\r\n        <ScrollView\r\n            style={flex}\r\n            horizontal={true}\r\n            scrollEventThrottle={16}\r\n            pagingEnabled={true}\r\n            showsHorizontalScrollIndicator={false}\r\n            onScroll={(event: any) => {\r\n                setSliderPage(event);\r\n            }}\r\n        >\r\n            <View style={{ width, height, justifyContent: 'space-between' }}>\r\n                <ClimbingMountain height={'45%'} width={'98%'} style={{ marginTop: '5%', marginHorizontal: '1%', height: '45%', width: '100%' }} />\r\n                <View style={[elevated, {\r\n                    marginHorizontal: sizes.rem1_5,\r\n                    height: '50%',\r\n                    justifyContent: 'flex-start',\r\n                    alignItems: 'center',\r\n                    paddingVertical: sizes.rem1\r\n                    //marginVertical: 30,\r\n                }]}>\r\n                    <View style={{ justifyContent: 'center', alignItems: 'center', height: 65, }}>\r\n                        <Text style={{ fontSize: fonts.large, fontFamily: 'K2D', textAlign: 'center', color: AppColors.primary }}>\r\n                            {\"Customized Feed\"}\r\n                        </Text>\r\n                    </View>\r\n\r\n                    <Text style={{ padding: sizes.rem1, fontSize: paragraphSize, fontFamily: 'K2D', textAlign: 'center', }}>\r\n                        {\"Stock market research from every corner of the internet, all in one place.\\n\\nContent from Twitter, Substack, Spotify and more curated for you based on stocks you own and are interested in.\"}\r\n                    </Text>\r\n                </View>\r\n            </View>\r\n            <View style={{ width, height, justifyContent: 'space-between' }}>\r\n                <Studying height={'37%'} width={'98%'} style={{ marginTop: '15%', marginHorizontal: '1%', height: '37%', width: '100%' }} />\r\n                <View style={[elevated, {\r\n                    marginHorizontal: sizes.rem1_5,\r\n                    height: '50%',\r\n                    justifyContent: 'flex-start',\r\n                    alignItems: 'center',\r\n                    paddingVertical: sizes.rem1\r\n                    //marginVertical: 30,\r\n                }]}>\r\n                    <View style={{ justifyContent: 'center', alignItems: 'center', height: 65, }}>\r\n                        <Text style={{ fontSize: fonts.large, fontFamily: 'K2D', textAlign: 'center', color: AppColors.primary }}>\r\n                            {\"Follow Expert\\nTraders and Investors\"}\r\n                        </Text>\r\n                    </View>\r\n                    <Text style={{ padding: sizes.rem1, fontSize: paragraphSize, fontFamily: 'K2D', textAlign: 'center', }}>\r\n                        {\"Subscribe to experts on the platform to learn how they invest and trade.\\n\\nGain access to articles, charts, trades, and watchlists so you can grow your skills and your wealth.\"}\r\n                    </Text>\r\n                </View>\r\n            </View>\r\n            <View style={{ width, height, justifyContent: 'space-between' }}>\r\n                <Debate height={'45%'} width={'98%'} style={{ marginTop: '0%', marginHorizontal: '1%', height: '45%', width: '100%' }} />\r\n                <View style={[elevated, {\r\n                    marginHorizontal: sizes.rem1_5,\r\n                    height: '50%',\r\n                    justifyContent: 'flex-start',\r\n                    alignItems: 'center',\r\n                    paddingVertical: sizes.rem1\r\n                    //marginVertical: 30,\r\n                }]}>\r\n                    <View style={{ justifyContent: 'center', alignItems: 'center', height: 65, }}>\r\n                        <Text style={{ fontSize: fonts.large, fontFamily: 'K2D', textAlign: 'center', color: AppColors.primary }}>\r\n                            {\"Connect Your\\nInvestment Accounts\"}\r\n                        </Text>\r\n                    </View>\r\n                    <Text style={{ padding: sizes.rem1, fontSize: paragraphSize, fontFamily: 'K2D', textAlign: 'center', }}>\r\n                        {\"Connect your portfolio to TradingPost and control who can view your articles, charts, trades, and watchlists.\\n\\nMake it public, share with friends and family, or build a paying subscriber base.\"}\r\n                    </Text>\r\n                </View>\r\n            </View>\r\n            <View style={{ width, height, justifyContent: 'space-between' }}>\r\n                <Analyze height={'45%'} width={'100%'} style={{ marginTop: '5%', marginHorizontal: 2, height: '45%', width: '100%' }} />\r\n                <View style={[elevated, {\r\n                    marginHorizontal: sizes.rem1_5,\r\n                    height: '50%',\r\n                    justifyContent: 'flex-start',\r\n                    alignItems: 'center',\r\n                    paddingVertical: sizes.rem1\r\n                    //marginVertical: 30,\r\n                }]}>\r\n                    <View style={{ justifyContent: 'center', alignItems: 'center', height: 65, }}>\r\n                        <Text style={{ fontSize: fonts.large, fontFamily: 'K2D', textAlign: 'center', color: AppColors.primary }}>\r\n                            {\"Search for Content\\nthat Matters to You\"}\r\n                        </Text>\r\n                    </View>\r\n                    <Text style={{ padding: sizes.rem1, fontSize: paragraphSize, fontFamily: 'K2D', textAlign: 'center', }}>\r\n                        {\"Explore TradingPost's powerful search tool that utilizes cutting edge tech from industry leader ElasticSearch.\"}\r\n                    </Text>\r\n                    <SecondaryButton style={[result ? { display: 'none' } : { display: 'flex' }, { alignSelf: \"center\", width: \"65%\", height: '15%', marginTop: '8%' }]}\r\n                        onPress={() => {\r\n                            linkTo(\"/create/logininfo\");\r\n                        }}>\r\n                        {\"Create an Account\"}\r\n                    </SecondaryButton>\r\n                </View>\r\n            </View>\r\n        </ScrollView>\r\n        <View style={{\r\n            position: 'relative',\r\n            bottom: '10%',\r\n            left: 0,\r\n            right: 0,\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n            flexDirection: 'row',\r\n        }}\r\n        >\r\n            {Array.from(Array(4).keys()).map((key, index) => (\r\n                <View style={[{\r\n                    height: 10,\r\n                    width: 10,\r\n                    borderRadius: 10 / 2,\r\n                    backgroundColor: AppColors.secondary,\r\n                    marginLeft: 10,\r\n                    opacity: pageIndex === index ? 1 : 0.3\r\n                }]}\r\n                    key={index}\r\n                />\r\n            ))}\r\n        </View>\r\n    </View>\r\n}","import React, { useEffect, useState, useMemo, useRef } from \"react\"\r\nimport { View, Text, Animated, Pressable, Image } from \"react-native\"\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { openBrowserAsync } from 'expo-web-browser';\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { elevated, flex, fonts, paddView, paddViewWhite, row, sizes } from \"../style\"\r\nimport { ElevatedSection, Section, Subsection } from \"../components/Section\"\r\nimport { Bank, IBKR, RobinhoodLogo } from '../images'; \r\nimport { Header, Subheader } from \"../components/Headers\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\n\r\n\r\nexport function BrokeragePickerScreen() {\r\n    const nav = useNavigation();\r\n    const opacityAnim = useRef(new Animated.Value(0)).current;\r\n    const [accounts, setAccounts] = useState<Awaited<ReturnType<typeof Api.User.extensions.getBrokerageAccounts>>>()\r\n    const intervalRef = useRef<any>();\r\n\r\n    const openLink = async () => {\r\n        await Api.User.extensions.generateBrokerageLink(undefined).then(({ link }) => {\r\n            setLink(link)\r\n        })\r\n        const browserName = \"finicity_auth\";\r\n        await openBrowserAsync(brokerLink, { \"windowName\": browserName });\r\n        clearInterval(intervalRef.current);\r\n\r\n        intervalRef.current = setInterval(async () => {\r\n            console.log(\"WTF\");\r\n            if (await AsyncStorage.getItem(\"auth-finicity-code\")) {\r\n                console.log(\"CODE HAS BEEN FOUND\");\r\n                setAccounts(await Api.User.extensions.getBrokerageAccounts())\r\n            }\r\n        }, 5000)\r\n    }\r\n    //cleanup\r\n    useEffect(() => {\r\n        AsyncStorage.removeItem(\"auth-finicity-code\");\r\n        return () => {\r\n            clearInterval(intervalRef.current);\r\n            AsyncStorage.removeItem(\"auth-finicity-code\");\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        Animated.timing(\r\n            opacityAnim,\r\n            {\r\n                delay: 0.75,\r\n                toValue: 1,\r\n                duration: 2000,\r\n                useNativeDriver: true\r\n            }).start();\r\n    }, [])\r\n    const [brokerLink, setLink] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        Api.User.extensions.getBrokerageAccounts().then((r) => {\r\n            setAccounts(r);\r\n        })\r\n    }, [])\r\n\r\n\r\n    return (<View style={flex}>\r\n    <View style={[flex, {margin: sizes.rem1, justifyContent: 'center'}]}>\r\n        <View style={{marginBottom: 10}}>\r\n            <Header text=\"Choose your Brokerage\" />\r\n        </View>\r\n        <View style={{flex: 0.3, flexDirection: 'row'}}>\r\n            <Pressable style={{flex: 1}} onPress={()=> {\r\n               nav.navigate(\"IbkrInfo\")\r\n                }}>\r\n                <ElevatedSection style={{justifyContent: 'center', flex: 1, marginRight: sizes.rem1 / 2}} title=\"\">\r\n                    <Subheader text='Interactive Brokers' style={{ textAlign: 'center', marginBottom: 10, color: 'black'}} />\r\n                    <View style={{borderRadius: 20, overflow: 'hidden', aspectRatio: 1, height: '75%', justifyContent: 'center', alignSelf: 'center'}}>\r\n                        <IBKR style={{}}  height={\"100%\"} width={'100%'}/>\r\n                    </View>\r\n                </ElevatedSection>\r\n            </Pressable>\r\n            <Pressable style={{flex: 1 }} onPress={()=> {\r\n                nav.navigate(\"RobinhoodLogin\")\r\n            }}>\r\n                <ElevatedSection style={{justifyContent: 'center', flex: 1, marginLeft: sizes.rem1 / 2}} title=\"\">\r\n                    <Subheader text='Robinhood' style={{ textAlign: 'center', marginBottom: 10, color: 'black'}} />\r\n                    <View style={{borderRadius: 20, overflow: 'hidden', aspectRatio: 1, height: '75%', justifyContent: 'center', alignSelf: 'center'}}>\r\n                        <RobinhoodLogo style={{}}  height={\"100%\"} width={'100%'}/>\r\n                    </View>\r\n                </ElevatedSection>\r\n            </Pressable>\r\n        </View>\r\n        <View style={{ flex: 0.5}}>\r\n            <Pressable style={{flex: 1}} onPress={()=> {\r\n                openLink();\r\n            }}>\r\n                <ElevatedSection style={{justifyContent: 'center', flex: 0.5}} title=\"\">\r\n                    <Subheader text='All other brokerages' style={{ textAlign: 'center',marginBottom: 0,  color: 'black'}} />\r\n                    <Text style={{ textAlign: 'center', marginBottom: 10}}>\r\n                        {\"(Finicity, a Mastercard Company)\"}\r\n                    </Text>\r\n                    <Bank height={\"70%\"} />\r\n                </ElevatedSection>\r\n            </Pressable>\r\n        </View>\r\n        </View>\r\n    </View>)\r\n\r\n}","import React, {useEffect, useState, useMemo, useRef} from \"react\"\r\nimport {View, Animated, Pressable, Linking} from \"react-native\"\r\nimport {Api, Interface} from \"@tradingpost/common/api\"\r\n//import { LinkBrokerageComponent } from \"../components/LinkBrokerageComponent\";\r\nimport {elevated, flex, fonts, paddView, paddViewWhite, row, sizes} from \"../style\"\r\nimport {ElevatedSection, Section, Subsection} from \"../components/Section\"\r\nimport {Autocomplete, AutocompleteItem, Button, Icon, IndexPath, Text, Layout} from \"@ui-kitten/components\"\r\nimport {AddButton} from \"../components/AddButton\";\r\nimport {useIsKeyboardVisible, useReadonlyEntity} from \"../utils/hooks\";\r\nimport {ButtonPanel, ScrollWithButtons} from \"../components/ScrollWithButtons\";\r\nimport {getHivePool} from \"@tradingpost/common/db\";\r\nimport {IBKR} from \"../images\"\r\nimport {useNavigation} from \"@react-navigation/native\"\r\nimport {ScrollView} from \"react-native-gesture-handler\"\r\n\r\n\r\nexport function IbkrInfoScreen(props: any) {\r\n    const nav = useNavigation();\r\n    const [acText, setAcText] = useState('')\r\n    let [submittedText, setSubmittedText] = useState('')\r\n    //const [accountIds, setAccountIds] = useState<string[]>([]);\r\n\r\n    const accountIds = useReadonlyEntity<{ ids: string[] }>({\r\n        ids: []\r\n    })\r\n    useEffect(() => {\r\n        (async () => {\r\n            if (submittedText === '') {\r\n                return\r\n            }\r\n\r\n            accountIds.update({ids: [...accountIds.data.ids, submittedText]});\r\n            console.log('use effect')\r\n            console.log(accountIds)\r\n            setSubmittedText('')\r\n        })()\r\n\r\n    }, [submittedText])\r\n    const {isKeyboardVisible} = useIsKeyboardVisible();\r\n    return (\r\n\r\n        <View style={[flex, {margin: sizes.rem1}]}>\r\n            <View style={{\r\n                borderRadius: 20,\r\n                overflow: 'hidden',\r\n                aspectRatio: 1,\r\n                height: '15%',\r\n                justifyContent: 'center',\r\n                alignSelf: 'center'\r\n            }}>\r\n                <IBKR height={\"100%\"} width={'100%'}/>\r\n            </View>\r\n            <View style={{marginVertical: 20}}>\r\n                <Text>\r\n                    {instructions}\r\n                </Text>\r\n            </View>\r\n            <View>\r\n                <Autocomplete\r\n                    value={acText || \"\"}\r\n                    onChangeText={setAcText}\r\n                    placeholder=\"Account Ids\"\r\n                    placement=\"bottom\"\r\n                    onSubmitEditing={() => {\r\n                        console.log('button press')\r\n                        setSubmittedText(acText)\r\n                        setAcText('')\r\n\r\n                    }}\r\n\r\n                    accessoryRight={\r\n                        (props) => <AddButton\r\n                            onPress={() => {\r\n                                console.log('button press')\r\n                                setSubmittedText(acText)\r\n                                setAcText('')\r\n\r\n                            }}\r\n\r\n                            height={(props?.style as any)?.height * 1.5}\r\n                            width={(props?.style as any)?.width * 1.5}\r\n\r\n                        />\r\n                    }\r\n                >\r\n\r\n                </Autocomplete>\r\n            </View>\r\n            <View style={{\r\n                height: '20%',\r\n                borderWidth: 1,\r\n                borderColor: '#ccc',\r\n                marginVertical: sizes.rem0_5,\r\n                borderRadius: sizes.rem0_5\r\n            }}>\r\n                <ScrollView key={`view_id_${accountIds.data.ids.length}`}>\r\n                    {\r\n                        accountIds.data.ids.map((v, i) => <View key={`id_${i}`} style={{\r\n                            padding: sizes.rem0_5,\r\n                            flexDirection: \"row\"\r\n                        }}><Text style={{textAlign: \"left\", flex: 1}}>{v}</Text></View>)\r\n                    }\r\n                </ScrollView>\r\n            </View>\r\n\r\n            <View key='1' style={[isKeyboardVisible ? {height: 0} : {}, {position: 'absolute', bottom: 0}]}>\r\n                <Text style={{textAlign: 'left', fontSize: fonts.xSmall}}>\r\n                    {note}\r\n                </Text>\r\n                <Text style={{color: '#0000EE', marginVertical: 10, fontSize: fonts.xSmall}}\r\n                      onPress={() =>\r\n                          Linking.openURL('https://guides.interactivebrokers.com/ibrit/topics/reporting_integration_process.htm')}>\r\n                    {'IBKR Reporting Integration Process'}\r\n                </Text>\r\n                <ButtonPanel\r\n                    viewProps={{\r\n                        borderTopWidth: 0,\r\n                        flexDirection: \"row\",\r\n                        paddingTop: sizes.rem1,\r\n                        paddingBottom: 0,\r\n                        justifyContent: \"space-evenly\",\r\n                        zIndex: 1000\r\n                    }}\r\n                    left={{\r\n                        text: 'Go back',\r\n                        onPress: async () => {\r\n                            nav.goBack();\r\n                        }\r\n                    }}\r\n                    right={{\r\n                        text: 'Continue',\r\n                        onPress: async () => {\r\n                            try {\r\n                                if (!accountIds.data.ids.length) {\r\n                                    return\r\n                                }\r\n                                await Api.Brokerage.extensions.createIbkrAccounts({account_ids: accountIds.data.ids});\r\n                                const body = emailBody(accountIds.data.ids);\r\n                                Linking.openURL(`mailto:reportingintegration@interactivebrokers.com?subject=IBKR/TradingPost Reporting Integration&body=${body}`)\r\n                            } catch (e) {\r\n                                console.error(e);\r\n                            }\r\n                        }\r\n                    }}\r\n                />\r\n            </View>\r\n        </View>\r\n    )\r\n\r\n}\r\n\r\nconst emailBody = (accountIds: string[]) => {\r\n    return `To Whom It May Concern,\r\n\r\nI would like to integrate my Interactive Brokers reporting data with the TradingPost feed.\r\n\r\nI would like to include a historical position and transactions file.\r\n\r\nI would like to include the accounts under the below advisory account #:\r\n${accountIds.join('\\n')}\r\n\r\nBest,\r\n\r\n[Enter your legal name here]`\r\n}\r\n\r\nconst instructions = `In order to link your IBKR account to TradingPost, we need you to send an email to IBKR indicating that you would give TradingPost permission to reports on your historical positions and trades.\\n\\nPlease enter the Account IDs that you would like to link to TradingPost below. \\n\\nAfter entering them in, when you click \"Continue\" we will generate the necessary email for you to send to IBKR's Reporting Integration Team.`\r\n\r\nconst note = `Note:\r\nGranting us this access in no way gives us any authority over your account.\r\n\r\nYou can check out the below IBKR link if you have any concerns:`","import React, { useEffect, useState, useMemo, useRef } from \"react\"\r\nimport { View, Animated, Pressable, Linking } from \"react-native\"\r\nimport { ITextField, TextField } from '../components/TextField';\r\nimport { Api, Interface } from \"@tradingpost/common/api\"\r\nimport { sleep } from \"@tradingpost/common/utils/sleep\"\r\n//import { LinkBrokerageComponent } from \"../components/LinkBrokerageComponent\";\r\nimport { elevated, flex, fonts, paddView, paddViewWhite, row, sizes } from \"../style\"\r\nimport { ElevatedSection, Section, Subsection } from \"../components/Section\"\r\nimport { Autocomplete, AutocompleteItem, Button, Icon, IndexPath, Text, Layout, TabView, Tab } from \"@ui-kitten/components\"\r\nimport { AddButton } from \"../components/AddButton\";\r\nimport { useIsKeyboardVisible, useReadonlyEntity } from \"../utils/hooks\";\r\nimport { ButtonPanel, ScrollWithButtons } from \"../components/ScrollWithButtons\";\r\nimport { getHivePool } from \"@tradingpost/common/db\";\r\nimport { PrimaryButton } from \"../components/PrimaryButton\";\r\nimport { RobinhoodLogo } from '../images'; \r\nimport { Header, Subheader } from \"../components/Headers\";\r\nimport { SecondaryButton } from \"../components/SecondaryButton\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\nimport { RobinhoodLoginResponse, RobinhoodLoginStatus } from \"@tradingpost/common/api/entities/extensions/Brokerage\";\r\nimport { useToast } from \"react-native-toast-notifications\";\r\nimport { AppColors } from \"../constants/Colors\";\r\n\r\nexport function RobhinhoodLoginScreen(props: any) {\r\n    const nav = useNavigation();\r\n    const [username, setUsername] = useState<string>(''),\r\n        [password, setPassword] = useState<string>(''),\r\n        [multifactor, setMultifactor] = useState<string>(''),\r\n        [selectedIndex, setSelectedIndex] = useState(0),\r\n        [deviceToken, setDeviceToken] = useState<string>(''),\r\n        [challengeResponseId, setChallengeResponseId] = useState<string>(''),\r\n        toast = useToast();\r\n    useEffect(()=> {\r\n        if (selectedIndex === 2) {\r\n            (async () => {\r\n                console.log(challengeResponseId);\r\n                let counter = 0;\r\n                let response = await Api.Brokerage.extensions.hoodPing({requestId: challengeResponseId});\r\n                console.log(`initial response - ${response}`);\r\n                console.log(`logic check - ${response.challengeStatus !== 'redeemed' && response.challengeStatus !== 'validated' && counter < 24}`)\r\n                while (response.challengeStatus !== 'redeemed' && response.challengeStatus !== 'validated' && counter < 24) {\r\n                    response = await Api.Brokerage.extensions.hoodPing({requestId: challengeResponseId});\r\n                    counter += 1;\r\n                    await sleep(5000)\r\n                }\r\n                if (response.challengeStatus === 'redeemed' || response.challengeStatus === 'validated') {\r\n                    await Api.Brokerage.extensions.robinhoodLogin({username: username, password: password, mfaCode: null, challengeResponseId: challengeResponseId})\r\n                    toast.show(\"You've successfully linked your Robinhood account to TradingPost!\")\r\n                    nav.navigate('BrokeragePicker');\r\n                    \r\n                }\r\n                else {\r\n                    setSelectedIndex(0)\r\n                    toast.show(\"Login failed, please login again and make sure to go to the Robinhood app complete your multifactor authentication.\")\r\n                }\r\n                \r\n            })()\r\n        }\r\n\r\n    }, [selectedIndex])\r\n\r\n    \r\n    return (\r\n        <View style={paddView}>\r\n            <TabView\r\n                \r\n                selectedIndex={selectedIndex}\r\n                onSelect={index => setSelectedIndex(isNaN(index) ? 0 : index)}\r\n                style={{ width: \"100%\" }}\r\n                indicatorStyle={{ height: 0 }}\r\n                tabBarStyle={{ height: 0 }}\r\n            >\r\n                <Tab>\r\n                    <ElevatedSection title=\"\" style={{padding: sizes.rem1}}>\r\n                        <View style={{padding: sizes.rem1, borderRadius: 20, overflow: 'hidden', aspectRatio: 1, height: '40%', justifyContent: 'center', alignSelf: 'center'}}>\r\n                            <RobinhoodLogo style={{}}  height={\"100%\"} width={'100%'}/>\r\n                        </View>\r\n                        <View>\r\n                            <Header text=\"Robinhood Login\"/>\r\n                            <TextField\r\n                                //label=\"Robhinhood Username\" \r\n                                value={username}\r\n                                placeholder=\"Robinhood Username\"\r\n                                onChangeText={(name: string) => setUsername(name)}\r\n                                />\r\n                            <TextField\r\n                                //label=\"Robhinhood Password\" \r\n                                value={password}\r\n                                secureTextEntry\r\n                                placeholder=\"Robinhood Password\"\r\n                                onChangeText={(pass: string) => setPassword(pass)}\r\n                                />\r\n                        </View>\r\n                            <ButtonPanel\r\n                                viewProps={{borderTopWidth: 0,\r\n                                            flexDirection: \"row\", \r\n                                            paddingTop: sizes.rem1,\r\n                                            paddingBottom: 0,\r\n                                            justifyContent: \"space-evenly\", \r\n                                            zIndex: 1000\r\n                                        }}\r\n                                left={{\r\n                                    text: 'Go back',\r\n                                    onPress: async () => {\r\n                                        nav.goBack();\r\n                                    }\r\n                                }}\r\n                                right={{\r\n                                    text: 'Login',\r\n                                    onPress: async () => {\r\n                                        //Api call, on success go on to the MFA page\r\n                                        let initialLogin = {} as RobinhoodLoginResponse\r\n                                        if (!username || !password) {\r\n                                            toast.show('Please enter username and password')\r\n                                            return\r\n                                        }\r\n                                        else {\r\n                                            initialLogin = await Api.Brokerage.extensions.robinhoodLogin({username: username, password: password, mfaCode: null, challengeResponseId: null})\r\n                                            \r\n                                        }\r\n                                        if (initialLogin.status === 'MFA' as RobinhoodLoginStatus) {\r\n                                            setSelectedIndex(1);\r\n                                        }\r\n                                        else if (initialLogin.status === 'DEVICE_APPROVAL' as RobinhoodLoginStatus) {\r\n                                            setChallengeResponseId(initialLogin.challengeResponseId || '');\r\n                                            setSelectedIndex(2);\r\n                                        }\r\n                                        else if (initialLogin.status === 'ERROR' as RobinhoodLoginStatus) {\r\n                                            toast.show('Login failed, please re-enter username and password!')\r\n                                            setPassword('')\r\n                                            console.log('failed login!')\r\n                                        }\r\n                                        else if (initialLogin.status === 'SUCCESS' as RobinhoodLoginStatus) {\r\n                                            toast.show(`This Robinhood account is already connected to TradingPost!`)\r\n                                            setPassword('')\r\n                                        }\r\n                                    }\r\n                                }}\r\n                                />\r\n                    </ElevatedSection>\r\n                </Tab>\r\n                <Tab>\r\n                    <ElevatedSection title=\"\" style={{padding: sizes.rem1}}>\r\n                        <View style={{padding: sizes.rem1, borderRadius: 20, overflow: 'hidden', aspectRatio: 1, height: '40%', justifyContent: 'center', alignSelf: 'center'}}>\r\n                            <RobinhoodLogo style={{}}  height={\"100%\"} width={'100%'}/>\r\n                        </View>\r\n                        <Header text=\"Robinhood Multifactor Authentication\"/>\r\n                        <TextField\r\n                            //label=\"Robhinhood Password\" \r\n                            placeholder=\"Robinhood Multifactor Auth Code\"\r\n                            onChangeText={(mfa: string) => setMultifactor(mfa)}\r\n                        />\r\n                        <View style={{paddingVertical: sizes.rem1, alignItems: 'center'}}>\r\n                            <PrimaryButton \r\n                                style={{width: '50%'}}\r\n                                onPress={async () => {\r\n                                    //Api call, on success go on to the MFA page\r\n                                    const mfaLogin = await Api.Brokerage.extensions.robinhoodLogin({username: username, password: password, mfaCode: multifactor, challengeResponseId: null})\r\n                                    if (mfaLogin.status === 'SUCCESS' as RobinhoodLoginStatus) {\r\n                                        toast.show(\"You've successfully linked your Robinhood account to TradingPost!\")\r\n                                        nav.navigate('BrokeragePicker')\r\n                                    }\r\n                                    else if (mfaLogin.status === 'ERROR' as RobinhoodLoginStatus) {\r\n                                        toast.show(\"An error has occurred in connecting your Robinhood account to Tradingpost. Please try again!\")\r\n                                        setSelectedIndex(0)\r\n                                    }\r\n                                }}\r\n                            >\r\n                                Submit\r\n                            </PrimaryButton>\r\n                        </View>\r\n                       \r\n                    </ElevatedSection>\r\n                </Tab>\r\n                <Tab>\r\n                    <ElevatedSection title=\"Robinhood Multifactor Authentication\" style={{padding: sizes.rem1}}>\r\n                        <View>\r\n                            <Subheader text={'Please go to the Robinhood app and confirm that it is you logging into your account. Once you have done this, please click \"Confirmed\" below.'} \r\n                                       style={{color: 'black'}}\r\n                            />\r\n                            <PrimaryButton\r\n                                onPress={async ()=> {\r\n                                    let response = await Api.Brokerage.extensions.hoodPing({requestId: challengeResponseId});\r\n                                    if (response.challengeStatus === 'redeemed' || response.challengeStatus === 'validated') {\r\n                                        await Api.Brokerage.extensions.robinhoodLogin({username: username, password: password, mfaCode: null, challengeResponseId: challengeResponseId})\r\n                                        toast.show(\"You've successfully linked your Robinhood account to TradingPost!\")\r\n                                        nav.navigate('BrokeragePicker');\r\n                                        \r\n                                    }\r\n                                    else if (response.challengeStatus === 'issued') {\r\n                                        toast.show(\"Confirmation has not been received. Please go to the Robinhood app complete your multifactor authentication.\")\r\n                                    }\r\n                                    else {\r\n                                        setSelectedIndex(0)\r\n                                        toast.show(\"Login failed, please login again and make sure to go to the Robinhood app complete your multifactor authentication.\")\r\n                                    }\r\n                                }}>\r\n                                Confirmed\r\n                            </PrimaryButton>\r\n                        </View>\r\n                    </ElevatedSection>\r\n                </Tab>\r\n            </TabView>\r\n        </View>\r\n    )\r\n\r\n\r\n}","import React, { useEffect, useState, useRef, useCallback } from \"react\"\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { View } from \"react-native\"\r\nimport { useAppUser } from \"../Authentication\"\r\nimport { ElevatedSection } from \"../components/Section\"\r\nimport { Text } from '@ui-kitten/components'\r\nimport { RootStackScreenProps } from \"../navigation/pages\"\r\nimport { Link } from \"../components/Link\"\r\nimport { Api } from '@tradingpost/common/api'\r\nimport { ButtonPanel } from \"../components/ScrollWithButtons\"\r\nimport { paddView, sizes } from \"../style\"\r\nimport { useToast } from \"react-native-toast-notifications\"\r\nimport { useLinkTo, useNavigation } from \"@react-navigation/native\"\r\nimport { useTwitterAuth } from \"../utils/third-party/twitter\";\r\nimport { getCallBackUrl } from \"@tradingpost/common/api/entities/static/EntityApiBase\";\r\nimport { HtmlView } from \"../components/HtmlView\"\r\nimport * as tURL from \"url\";\r\nimport uuid from 'react-native-uuid';\r\n\r\nconst clientId = \"cm9mUHBhbVUxZzcyVGJNX0xrc2E6MTpjaQ\";\r\nconst platform = \"twitter\",\r\n    redirectUriText = `${getCallBackUrl()}/auth/${platform}`,\r\n    redirectUri = new URL(redirectUriText),\r\n    authUrlText = \"https://twitter.com/i/oauth2/authorize\"\r\n\r\nexport const TwitterAuthWebViewScreen = (props?: any) => {\r\n    let intervalHandler = useRef<any>()\r\n    const { loginState, signIn, signOut } = useAppUser()\r\n    const toast = useToast();\r\n    const nav = useNavigation()\r\n    const linkTo = useLinkTo<any>();\r\n    const state = useRef<string>(uuid.v4() as string);\r\n\r\n    \r\n    const _challenge = Math.random().toString().substring(2, 10);\r\n    const authUrl = new URL(authUrlText);\r\n    authUrl.searchParams.append(\"response_type\", \"code\");\r\n    authUrl.searchParams.append(\"client_id\", clientId);\r\n    authUrl.searchParams.append(\"redirect_uri\", redirectUriText);\r\n    authUrl.searchParams.append(\"state\", state.current);\r\n    authUrl.searchParams.append(\"scope\", \"users.read tweet.read offline.access\");\r\n    authUrl.searchParams.append(\"code_challenge\", _challenge);\r\n    authUrl.searchParams.append(\"code_challenge_method\", \"plain\");\r\n\r\n    \r\n    return <View style={paddView}>\r\n        <HtmlView isUrl={true} allowFileAccess={true} \r\n            onNavigationStateChange={(e: any) => {\r\n                if (e.url !== undefined) {\r\n                    const url = tURL.parse(e.url, true);\r\n                    const baseURL = 'https://' + (url.hostname || '') + (url.pathname || '') \r\n                    if (baseURL === redirectUriText && url.path) {\r\n                        //AsyncStorage.setItem(`auth-${platform}-code`, String(url.query.code));\r\n                        const code = String(url.query.code);\r\n                        Api.User.extensions.linkSocialAccount({ callbackUrl: getCallBackUrl(), platform, code, challenge: _challenge})\r\n                            .then((handle) => {\r\n                                if (props?.route?.params) {\r\n                                    toast.show(`You've successfully claimed your Twitter account!`)\r\n                                    linkTo('/create/addclaims')\r\n                                } else nav.navigate('AccountInformation', {newTwitterHandle: handle})\r\n                            })\r\n                            .catch((err) => {\r\n                                toast.show('This Twitter account has already been claimed! If you think this is a mistake, please reach out to help@tradingpostapp.com.')\r\n                                if (props?.route?.params) linkTo('/create/addclaims')\r\n                                else nav.navigate('AccountInformation')\r\n                            })\r\n                    }\r\n                }\r\n            }} \r\n        >\r\n            {String(authUrl)}\r\n        </HtmlView>\r\n    </View>\r\n}","import { createNativeStackNavigator } from \"@react-navigation/native-stack\";\r\nimport React from \"react\";\r\nimport { Button, Keyboard, Pressable, View } from \"react-native\";\r\nimport { AppTitle } from \"../images\";\r\nimport CreateAccountScreen from \"../screens/CreateAccountScreen\";\r\nimport NotFoundScreen from \"../screens/NotFoundScreen\";\r\nimport { ProfileScreen } from \"../screens/ProfileScreen\";\r\nimport WelcomeScreen from \"../screens/WelcomeScreen\";\r\nimport { sizes } from \"../style\";\r\nimport { DrawerPart } from \"./DrawerNavigator\";\r\nimport { RootStackParamList } from \"./pages\";\r\nimport { AccountSettingsScreen } from \"../screens/AccountSettingsScreen\"\r\nimport { AccountInfoScreen } from \"../screens/AccountInfoScreen\";\r\nimport { AuthScreen } from \"../screens/AuthScreen\"\r\nimport { ChangePasswordScreen } from \"../screens/ChangePasswordScreen\"\r\nimport { CompanyScreen } from \"../screens/CompanyScreen\"\r\nimport { ImagePickerScreen } from \"../screens/ImagePicker\"\r\nimport { NotificationTradeScreen } from \"../screens/NotificationTradeScreen\"\r\nimport { PostEditorScreen } from \"../screens/PostEditorScreen\"\r\nimport { PostScreen } from \"../screens/PostScreen\"\r\nimport { SubscriptionScreen, SubscriptionSettingsScreen } from \"../screens/SubscriptionScreen\"\r\nimport { TableModalScreen } from \"../screens/TableModalScreen\"\r\nimport { BlockListModalScreen } from \"../screens/BlockListModalScreen\";\r\nimport { VerificationScreen } from \"../screens/VerificationScreen\"\r\nimport { WatchlistEditorScreen } from \"../screens/WatchlistEditorScreen\"\r\nimport { WatchlistScreen } from \"../screens/WatchlistScreen\"\r\nimport { WatchlistViewerScreen } from \"../screens/WatchlistViewerScreen\"\r\nimport { AppInformationScreen } from \"../screens/AppInformationScreen\";\r\nimport * as Notifications from 'expo-notifications';\r\nimport { useIsKeyboardVisible } from \"../utils/hooks\";\r\nimport { IconifyIcon } from \"../components/IconfiyIcon\";\r\nimport KeyboardClose from '../assets/@iconify/keyboard-close'\r\nimport { useAppUser } from \"../Authentication\";\r\nimport { Log } from \"../utils/logger\";\r\nimport { BrokeragePickerScreen } from \"../screens/BrokeragePickerScreen\";\r\nimport { IbkrInfoScreen } from \"../screens/IbkrInfoScreen\";\r\nimport { RobhinhoodLoginScreen } from \"../screens/RobinhoodLoginScreen\";\r\nimport { ShareButton } from \"../components/ShareButton\";\r\nimport linking from \"./LinkingConfiguration\";\r\nimport { useLinkBuilder, useRoute } from \"@react-navigation/native\";\r\nimport { TwitterAuthWebViewScreen } from \"../screens/TwitterAuthSceen\";\r\n\r\n\r\nNotifications.setNotificationHandler({\r\n    handleNotification: async () => ({\r\n        shouldShowAlert: true,\r\n        shouldPlaySound: false,\r\n        shouldSetBadge: false\r\n    }),\r\n});\r\n\r\nexport const Stack = createNativeStackNavigator<RootStackParamList>();\r\n\r\nexport const useInitialRoute = () => {\r\n    let { loginState } = useAppUser();\r\n    let initialRoute: keyof RootStackParamList;\r\n    if (loginState?.appUser)\r\n        //TODO: Should refactor this so that it is more related... settings + settings.analyst + analyst_profile\r\n        if (loginState.setupStatus?.needsAnalystSettings || loginState.setupStatus?.needsSettings)\r\n            initialRoute = \"Create\"\r\n        else if (!loginState.loginResult?.verified)\r\n            initialRoute = \"VerifyAccount\"\r\n        else\r\n            initialRoute = \"Dash\"\r\n    else if (loginState?.loginResult)\r\n        initialRoute = \"Create\"\r\n\r\n    else\r\n        initialRoute = \"Root\"\r\n\r\n    Log.verbose(`Initial Route Is : '${initialRoute}'`);\r\n    return initialRoute;\r\n}\r\n\r\nexport function RootNavigator() {\r\n    console.log(\"Running Root Navigation\");\r\n    return <Stack.Navigator\r\n        initialRouteName={useInitialRoute()}\r\n        screenOptions={{\r\n            headerTitle: () => <AppTitle height={\"100%\"}\r\n                style={{ marginTop: sizes.rem0_5, height: sizes.rem2, aspectRatio: 5.77 }}\r\n            />,\r\n            headerTitleAlign: \"center\",\r\n            headerBackVisible: false,\r\n            headerRight: () => {\r\n                const { isKeyboardVisible } = useIsKeyboardVisible();\r\n                if (isKeyboardVisible) {\r\n                    return <Pressable\r\n                        onPress={() => {\r\n                            Keyboard.dismiss();\r\n                        }}\r\n                    ><IconifyIcon\r\n                            currentColor=\"black\"\r\n                            icon={KeyboardClose}\r\n                            svgProps={{\r\n                                height: 24,\r\n                                width: 24,\r\n                            }}\r\n                            style={{\r\n                                height: 24,\r\n                                width: 24,\r\n                                marginRight: sizes.rem1\r\n                            }} />\r\n                    </Pressable>\r\n                }\r\n                // else if () {\r\n\r\n                // }\r\n                else return undefined;\r\n            }\r\n        }}>\r\n        <Stack.Screen name=\"Root\" component={WelcomeScreen} options={{ headerShown: false }} />\r\n        <Stack.Screen name=\"Create\" component={CreateAccountScreen}\r\n            options={{ headerShown: false, headerBackVisible: false }} />\r\n        <Stack.Screen name=\"Dash\" component={DrawerPart} options={{\r\n            headerShown: false,\r\n        }} />\r\n        <Stack.Screen name=\"NotFound\" component={NotFoundScreen} options={{ title: 'Oops!' }} />\r\n        <Stack.Group screenOptions={{\r\n            headerBackVisible: true,\r\n        }}>\r\n            <Stack.Screen name=\"ResetPassword\" component={ChangePasswordScreen} />\r\n            <Stack.Screen name=\"VerifyAccount\" component={VerificationScreen} />\r\n            <Stack.Screen name=\"Auth\" component={AuthScreen} />\r\n            <Stack.Screen name=\"Subscription\" component={SubscriptionScreen} />\r\n            <Stack.Screen name=\"AccountSettings\" component={AccountSettingsScreen} />\r\n            <Stack.Screen name=\"AccountInformation\" component={AccountInfoScreen} />\r\n            <Stack.Screen name=\"AppInformation\" component={AppInformationScreen} options={{ headerShown: false }} />\r\n            <Stack.Screen name=\"SubscriptionSettings\" component={SubscriptionSettingsScreen} />\r\n            <Stack.Screen name=\"WatchlistEditor\" component={WatchlistEditorScreen} />\r\n            <Stack.Screen name=\"PostScreen\" component={PostScreen} />\r\n            <Stack.Screen name=\"PostEditor\" component={PostEditorScreen} />\r\n            <Stack.Screen name=\"WatchlistViewer\" component={WatchlistViewerScreen} />\r\n            <Stack.Screen name=\"Watchlist\" component={WatchlistScreen} />\r\n            <Stack.Screen name=\"ImagePicker\" component={ImagePickerScreen} />\r\n            <Stack.Screen name=\"Company\" component={CompanyScreen} />\r\n            <Stack.Screen name=\"TableModal\" component={TableModalScreen} />\r\n            <Stack.Screen name=\"BlockListModal\" component={BlockListModalScreen} />\r\n            <Stack.Screen name=\"NotificationTrade\" component={NotificationTradeScreen} />\r\n            <Stack.Screen name=\"BrokeragePicker\" component={BrokeragePickerScreen} />\r\n            <Stack.Screen name=\"IbkrInfo\" component={IbkrInfoScreen} />\r\n            <Stack.Screen name=\"RobinhoodLogin\" component={RobhinhoodLoginScreen} />\r\n            <Stack.Screen name=\"TwitterAuthWebView\" component={TwitterAuthWebViewScreen} options={{ headerShown: false }}/>\r\n        </Stack.Group>\r\n        <Stack.Group screenOptions={{\r\n            headerStyle: {\r\n                backgroundColor: \"transparent\"\r\n            },\r\n            headerBackVisible: true,\r\n            headerTintColor: \"white\",\r\n            headerBackground: () => <View></View>,\r\n            headerTitle: \"\",\r\n            contentStyle: {\r\n                marginTop: -64\r\n            }\r\n        }}>\r\n            <Stack.Screen options={{\r\n                headerRight: () => {\r\n                    const route = useRoute();\r\n                    const buildLink = useLinkBuilder()\r\n                    const url = buildLink(route.name, route.params);\r\n                    return <ShareButton style={{ marginRight: 8, height: 32, width: 32 }} url={\"https://m.tradingpostapp.com\" + url || \"\"} title={\"https://m.tradingpostapp.com\" + url || \"\"} color=\"white\" />\r\n                }\r\n            }} name=\"Profile\" component={ProfileScreen} />\r\n        </Stack.Group>\r\n    </Stack.Navigator>\r\n}\r\n\r\n\r\n\r\n\r\n","/**\r\n * If you are not familiar with React Navigation, refer to the \"Fundamentals\" guide:\r\n * https://reactnavigation.org/docs/getting-started\r\n *\r\n */\r\nimport { createBottomTabNavigator } from '@react-navigation/bottom-tabs';\r\nimport {\r\n  getFocusedRouteNameFromRoute,\r\n  NavigationContainer,\r\n  DefaultTheme,\r\n  DarkTheme,\r\n  NavigationProp,\r\n  useNavigationState\r\n} from '@react-navigation/native';\r\nimport { createNativeStackNavigator } from '@react-navigation/native-stack';\r\n\r\nimport { createDrawerNavigator } from '@react-navigation/drawer';\r\nimport { SideMenu } from '../components/SideMenu';\r\n\r\nimport * as React from 'react';\r\n\r\nimport { ColorSchemeName } from 'react-native';\r\n//import { RootStackParamList, RootTabParamList, RootTabScreenProps } from '../types';\r\nimport LinkingConfiguration from './LinkingConfiguration';\r\nimport { SafeAreaProvider } from 'react-native-safe-area-context';\r\nimport { RootNavigator } from './RootNavigator';\r\n\r\nexport default function Navigation({ colorScheme }: { colorScheme: ColorSchemeName }) {\r\n  return (\r\n    <SafeAreaProvider>\r\n      <NavigationContainer\r\n        linking={LinkingConfiguration}\r\n        theme={colorScheme === 'dark' ? DarkTheme : DefaultTheme}\r\n      ><RootNavigator />\r\n      </NavigationContainer>\r\n    </SafeAreaProvider>\r\n  );\r\n}","import {configApi} from '@tradingpost/common/api/entities/static/EntityApiBase'\r\nimport Constants, {AppOwnership} from 'expo-constants'\r\nimport {useURL} from 'expo-linking'\r\nimport {parse} from 'url'\r\n\r\nif (!__DEV__) {\r\n    configApi({\r\n        apiBaseUrl: \"https://api.tradingpostapp.com\"\r\n    })\r\n} else if (__DEV__ && (AppOwnership.Expo === Constants.appOwnership || AppOwnership.Standalone === Constants.appOwnership || !Constants.appOwnership)) {\r\n\r\n    if (Constants.manifest?.hostUri) {\r\n        configApi({\r\n            apiBaseUrl: `http://${Constants.manifest?.hostUri?.split(\":\")[0]}:8082`\r\n        })\r\n    } else {\r\n\r\n        //manual ip for api server... have been trying to find a way to avoid this...\r\n        configApi({\r\n            apiBaseUrl: `http://${Constants.expoConfig?.extra?.localIp || \"localhost\"}:8082`\r\n        })\r\n    }\r\n}\r\n\r\nif (__DEV__ && Platform.OS === \"web\")\r\n    configApi({\r\n        callbackUrl: \"http://localhost:19006\"\r\n    })\r\n\r\n\r\nimport {StatusBar} from 'expo-status-bar';\r\nimport useCachedResources from './hooks/useCachedResources';\r\nimport useColorScheme from './hooks/useColorScheme';\r\nimport Navigation from './navigation';\r\nimport * as eva from '@eva-design/eva';\r\nimport {ApplicationProvider, Layout, Button, IconRegistry} from '@ui-kitten/components';\r\nimport theme from \"./theme-light.json\"; // <-- Import app theme\r\nimport {ToastProvider} from 'react-native-toast-notifications';\r\nimport React, {useEffect,} from 'react';\r\n\r\n\r\nimport {EvaIconsPack} from '@ui-kitten/eva-icons';\r\n\r\nimport {getSecurityList} from './SecurityList'\r\nimport {Platform} from 'react-native'\r\n\r\nexport default function App() {\r\n    const {isLoadingComplete} = useCachedResources();\r\n    //const colorScheme = useColorScheme();\r\n    const colorScheme = 'light';\r\n    useEffect(() => {\r\n        if (isLoadingComplete) {\r\n            getSecurityList();\r\n        }\r\n    }, [isLoadingComplete])\r\n    const url = useURL();\r\n    if (__DEV__ && url) {\r\n\r\n        const urlParsed = parse(url, true);\r\n\r\n        //com.tradingpostapp://expo-development-client/?url=http%3A%2F%2F10.0.0.94%3A8081 need to parse and set the api url the first run through\r\n        if (urlParsed.hostname === \"expo-development-client\") {\r\n            configApi({\r\n                apiBaseUrl: \"http://\" + (urlParsed.query[\"url\"] as string)?.split(\":\")[1] + \":8082\"\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    return !isLoadingComplete ? null : <ApplicationProvider {...eva} theme={{...eva.light, ...theme}}>\r\n        <IconRegistry icons={EvaIconsPack}/>\r\n        <ToastProvider>\r\n            <Navigation colorScheme={colorScheme}/>\r\n            <StatusBar/>\r\n        </ToastProvider>\r\n    </ApplicationProvider>\r\n}\r\n\r\n\r\n\r\n","import { registerRootComponent } from 'expo';\r\n\r\nimport App from './App';\r\n\r\n// registerRootComponent calls AppRegistry.registerComponent('main', () => App);\r\n// It also ensures that whether you load the app in Expo Go or in a native build,\r\n// the environment is set up appropriately\r\nregisterRootComponent(App);\r\n","import { FontAwesome } from '@expo/vector-icons';\r\nimport * as Font from 'expo-font';\r\nimport * as SplashScreen from 'expo-splash-screen';\r\nimport { useEffect, useState } from 'react';\r\nimport { initLds, setValue } from '../lds';\r\nimport { Authentication } from '../Authentication';\r\nimport { Api } from \"@tradingpost/common/api\";\r\nimport { registerDeviceForNotifications } from \"../utils/notifications\";\r\n\r\nimport '../SecurityList'\r\nimport { Log } from '../utils/logger';\r\n\r\nexport default function useCachedResources() {\r\n    const [isLoadingComplete, setLoadingComplete] = useState(false);\r\n\r\n    // Load any resources or data that we need prior to rendering the app\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n\r\n                SplashScreen.preventAutoHideAsync();\r\n                // Load fonts\r\n                await Font.loadAsync({\r\n                    ...FontAwesome.font,\r\n                    'space-mono': require('../assets/fonts/SpaceMono-Regular.ttf'),\r\n                    'K2D': require('../assets/fonts/K2D-Regular.ttf'),\r\n                });\r\n\r\n                const lds = await initLds();\r\n                if (lds.authToken) {\r\n                    Log.verbose(\"There IS AN AUTH TOKEN\");\r\n                    try {\r\n                        const results = await Authentication.signIn(\"\", lds.authToken);\r\n                        lds.loginResult = results.loginResult;\r\n                        lds.currentUser = results.currentUser;\r\n                        Log.verbose(`CU: ${JSON.stringify(lds.currentUser)} LR: ${JSON.stringify(lds.loginResult)}`);\r\n                        setValue(\"loginResult\", results.loginResult);\r\n                        setValue(\"currentUser\", results.currentUser);\r\n\r\n                        if (results.currentUser?.email)\r\n                            await registerDeviceForNotifications();\r\n\r\n                    } catch (ex) {\r\n                        //TODO: make this remove the authtoken if the exception actually is related to the auth token being invalid \r\n                        setValue(\"authToken\", undefined);\r\n                        console.error(ex);\r\n                    }\r\n                }\r\n                else\r\n                    Log.verbose(\"There is no auth token.\");\r\n\r\n\r\n            } catch (e) {\r\n                // We might want to provide this error information to an error reporting service\r\n                console.error(e);\r\n            } finally {\r\n                setLoadingComplete(true);\r\n                SplashScreen.hideAsync();\r\n            }\r\n        })()\r\n    }, []);\r\n\r\n\r\n    return {\r\n        isLoadingComplete,\r\n    }\r\n}\r\n","const data = {\r\n\t\"width\": 24,\r\n\t\"height\": 24,\r\n\t\"body\": \"<path fill=\\\"currentColor\\\" d=\\\"m12 23l4-4H8M19 8h-2V6h2m0 5h-2V9h2m-3-1h-2V6h2m0 5h-2V9h2m0 6H8v-2h8M7 8H5V6h2m0 5H5V9h2m1 0h2v2H8m0-5h2v2H8m3 1h2v2h-2m0-5h2v2h-2m9-5H4c-1.11 0-2 .89-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2Z\\\"/>\"\r\n};\r\nexports.__esModule = true;\r\nexports.default = data;\r\n","module.exports = __webpack_public_path__ + \"static/media/bookmark-active.d96ac9da.svg\";","module.exports = __webpack_public_path__ + \"static/media/bookmark-active-blue.fdca270d.svg\";","module.exports = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cGF0aCBkPSJNNjQgOEMzMy4wNzUgOCA4IDMzLjA3NSA4IDY0QzggOTQuOTI1IDMzLjA3NSAxMjAgNjQgMTIwQzk0LjkyNSAxMjAgMTIwIDk0LjkyNSAxMjAgNjRDMTIwIDMzLjA3NSA5NC45MjUgOCA2NCA4Wk02NCAxMTAuNUMzOC4zMjUgMTEwLjUgMTcuNSA4OS42NzUgMTcuNSA2NEMxNy41IDM4LjMyNSAzOC4zMjUgMTcuNSA2NCAxNy41Qzg5LjY3NSAxNy41IDExMC41IDM4LjMyNSAxMTAuNSA2NEMxMTAuNSA4OS42NzUgODkuNjc1IDExMC41IDY0IDExMC41WiIgZmlsbD0iYmxhY2siLz4NCjxwYXRoIGQ9Ik01OCA0MkM1OCA0My41OTEzIDU4LjYzMjEgNDUuMTE3NCA1OS43NTc0IDQ2LjI0MjZDNjAuODgyNiA0Ny4zNjc5IDYyLjQwODcgNDggNjQgNDhDNjUuNTkxMyA0OCA2Ny4xMTc0IDQ3LjM2NzkgNjguMjQyNiA0Ni4yNDI2QzY5LjM2NzkgNDUuMTE3NCA3MCA0My41OTEzIDcwIDQyQzcwIDQwLjQwODcgNjkuMzY3OSAzOC44ODI2IDY4LjI0MjYgMzcuNzU3NEM2Ny4xMTc0IDM2LjYzMjEgNjUuNTkxMyAzNiA2NCAzNkM2Mi40MDg3IDM2IDYwLjg4MjYgMzYuNjMyMSA1OS43NTc0IDM3Ljc1NzRDNTguNjMyMSAzOC44ODI2IDU4IDQwLjQwODcgNTggNDJWNDJaTTY3IDU2SDYxQzYwLjQ1IDU2IDYwIDU2LjQ1IDYwIDU3VjkxQzYwIDkxLjU1IDYwLjQ1IDkyIDYxIDkySDY3QzY3LjU1IDkyIDY4IDkxLjU1IDY4IDkxVjU3QzY4IDU2LjQ1IDY3LjU1IDU2IDY3IDU2WiIgZmlsbD0iYmxhY2siLz4NCjwvc3ZnPg0K\"","module.exports = __webpack_public_path__ + \"static/media/logo.9bb3fb31.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo-no-bg.9cd8c523.svg\";","module.exports = __webpack_public_path__ + \"static/media/notification-active.ead2911b.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAoCAYAAACSN4jeAAAACXBIWXMAAAsTAAALEwEAmpwYAAACr0lEQVRYhe2Ye28SQRTFf6C1+KSliliMtVZqrNpUjI9qfVSjprSk+ABbFhb6/b+EGXPGjBtcFthH/+hJboDduTOH+5o7A9PjMrAK1IEPwFfJJ+AFsA4skDByzvcysAP8AHrAABiOkD7QEdG7/5krFlIF4DVwDPiSLvBNlnoPvAM+A4fAkTOup+eluEndAFqyglmkDbwCloH5EVaYk86W9HqSX0AtLlIVTehJjFWKE8wzrzg8lr4huDErqUXFiaeJNwJjxsWL+74K/JT7Dbl7I8ZEQh7Y0yRdZRlTTuaGRFt/tD2h5f9O8tiJqfqUhFxY3RX90b7KzEQoKNuMckPWiwOW3Lbm7iqG3XehiutS9FRExypOiKJc6asERcauCmdTqZ8E3mqNljw0FgUNHqhWxW2tnD7XHHeWo6xTUtXuO5kYJzGL6846tbB17MObTiGshinMiKvab41nNqMQW3aq/K0whRlxSZlviD2NQqyaIrGWiNWjEjNuPCPGmcUSjLFTFfx5p1ykEfwXHWK2XIQ2C7czsNizsIErapsPtFV42jaSwpyIefo0jcPDoNW21IIMJCcimTSeOGta2bXkKk773NKZ0fT250gHq2ocG/LUQN0zz/XDbKhLAaUkYivsNLUnz31BbIeKrayxIyPtmx+PxPJIabugnmwxJSmp1a7peOfb+LYdq68M6agfT1M6znnTU0/4ByUFn6eO0s9AesB3la1/kFdBNe30gwzkjhLg1CIX9mKU2IpcVtYcOFtWPjDW4IrSvukcaoLjgjITlhSoJ6rcdkEC3yuK1+G4U1BcyDmXLYfajEfho3OXdi1JQpaUwX3nRrEh65zXNlbU7WJXY+yhOTVsq0r3dHfWVOx19MyXZS+QATblKhtLRuwu8ibr9DfZZ+qQaQZeqjOYuY/7DbN2cxBGpVy8AAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/store-front-logo2-alt.7ad935b2.svg\";","module.exports = __webpack_public_path__ + \"static/media/store-front.5d28ee3a.svg\";","module.exports = __webpack_public_path__ + \"static/media/app-title.a87bb585.svg\";","module.exports = __webpack_public_path__ + \"static/media/splash-welcome.0edc3aee.svg\";","module.exports = __webpack_public_path__ + \"static/media/ClimbingMountain.4dedba75.svg\";","module.exports = __webpack_public_path__ + \"static/media/Debate.d0700537.svg\";","module.exports = __webpack_public_path__ + \"static/media/Studying.63530cae.svg\";","module.exports = __webpack_public_path__ + \"static/media/analyze.13c5c9ae.svg\";","module.exports = __webpack_public_path__ + \"static/media/bank.76a3b142.svg\";","module.exports = __webpack_public_path__ + \"static/media/IBKR.cfa56b4d.svg\";","module.exports = __webpack_public_path__ + \"static/media/robinhood_logo.d70982fc.svg\";","module.exports = __webpack_public_path__ + \"static/media/robinhood_logo_long.a5900aa8.svg\";","module.exports = __webpack_public_path__ + \"static/media/plus.cdc95c1f.svg\";","module.exports = __webpack_public_path__ + \"static/media/upvote.d5439e23.svg\";","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgODIgODIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cGF0aCBkPSJNNDguMjYxMiAyOS4yMDY0TDQyLjUyNTMgMjMuNDc0NkwyNi42NjI0IDM5LjMxN1Y0NS4wNDg4SDMyLjM5NDJMNDguMjYxMiAyOS4yMDY0WiIgZmlsbD0iI0Y0NDUyRCIvPg0KPHBhdGggZD0iTTQ5LjYwMTcgMTYuMzk5NEw1NS4zMzM2IDIyLjEzMTJMNTAuOTU4OCAyNi41MDU5TDQ1LjIyNzEgMjAuNzc0MUw0OS42MDE3IDE2LjM5OTRaIiBmaWxsPSIjRjQ0NTJEIi8+DQo8cGF0aCBkPSJNNzMuOCAwSDguMkMzLjY3NzcgMCAwIDMuNjc3NyAwIDguMlY4MkwyMS44NjUzIDY1LjZINzMuOEM3OC4zMjIzIDY1LjYgODIgNjEuOTIyMyA4MiA1Ny40VjguMkM4MiAzLjY3NzcgNzguMzIyMyAwIDczLjggMFpNNzMuOCA1Ny40SDE5LjEzNDdMOC4yIDY1LjZWOC4ySDczLjhWNTcuNFoiIGZpbGw9IiNGNDQ1MkQiLz4NCjwvc3ZnPg0K\"","module.exports = __webpack_public_path__ + \"static/media/bookmark.1ebaa1ce.svg\";","module.exports = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCA1MCA1MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0zOCAzNUgzNlYxN0MzNiAxNi40IDM1LjYgMTYgMzUgMTZIMThWMTRIMzVDMzYuNyAxNCAzOCAxNS4zIDM4IDE3VjM1WiIgZmlsbD0iYmxhY2siLz4NCjxwYXRoIGQ9Ik0zNyAzNi41TDMwLjIgMjguN0wzMS44IDI3LjNMMzcgMzMuNUw0Mi4yIDI3LjNMNDMuOCAyOC43TDM3IDM2LjVaTTMyIDM2SDE1QzEzLjMgMzYgMTIgMzQuNyAxMiAzM1YxNUgxNFYzM0MxNCAzMy42IDE0LjQgMzQgMTUgMzRIMzJWMzZaIiBmaWxsPSJibGFjayIvPg0KPHBhdGggZD0iTTE4LjIwMDIgMjIuN0wxMy4wMDAyIDE2LjVMNy44MDAyIDIyLjdMNi4yMDAyIDIxLjNMMTMuMDAwMiAxMy41TDE5LjgwMDIgMjEuM0wxOC4yMDAyIDIyLjdaIiBmaWxsPSJibGFjayIvPg0KPC9zdmc+DQo=\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQyIDI0MiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF8yNzkyXzI0NSkiPg0KPHBhdGggZD0iTTEyMSAwQzU0LjE3MzUgMCAwIDU0LjE3MzUgMCAxMjFDMCAxODcuODI2IDU0LjE3MzUgMjQyIDEyMSAyNDJDMTg3LjgyNiAyNDIgMjQyIDE4Ny44MjYgMjQyIDEyMUMyNDIgNTQuMTczNSAxODcuODI2IDAgMTIxIDBaTTEyMS43OTggNDIuMzMyM0wxNDAuODY2IDEwMS44NzJMMjAzLjM2MSAxMDMuMjc1TDE1Mi42MjQgMTM5Ljc4OEwxNzAuNiAxOTkuNjY4TDEyMC4xODggMTYyLjY5N0w2OC44MDEgMTk4LjMwOUw4OC4zODY3IDEzOC45MzFMMzguNjM5NSAxMDEuMDZMMTAxLjE2MyAxMDEuMzQxTDEyMS43OTggNDIuMzMyM1Y0Mi4zMzIzWiIgZmlsbD0iIzM1QTI2NSIvPg0KPC9nPg0KPGRlZnM+DQo8Y2xpcFBhdGggaWQ9ImNsaXAwXzI3OTJfMjQ1Ij4NCjxyZWN0IHdpZHRoPSIyNDIiIGhlaWdodD0iMjQyIiBmaWxsPSJ3aGl0ZSIvPg0KPC9jbGlwUGF0aD4NCjwvZGVmcz4NCjwvc3ZnPg0K\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjUiIGhlaWdodD0iNjIiIHZpZXdCb3g9IjAgMCA2NSA2MiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik02Mi40MTk1IDI3Ljk4MzZMNS43NTI4NyAxLjMxNjk4QzUuMTgyMzEgMS4wNDcwMyA0LjU0Njc5IDAuOTQ0ODAzIDMuOTIwMzYgMS4wMjIyQzMuMjkzOTMgMS4wOTk2MSAyLjcwMjQgMS4zNTM0NSAyLjIxNDcxIDEuNzU0MTVDMS43MjcwMiAyLjE1NDg1IDEuMzYzMjYgMi42ODU5MSAxLjE2NTgxIDMuMjg1NDNDMC45NjgzNzQgMy44ODQ5NSAwLjk0NTM4NyA0LjUyODIzIDEuMDk5NTMgNS4xNDAzMUw3LjU2Mjg3IDMxLjAwMDNMMS4wOTk1MyA1Ni44NjAzQzAuOTQzOTQ1IDU3LjQ3MjYgMC45NjU5MjYgNTguMTE2NiAxLjE2MjkxIDU4LjcxNjhDMS4zNTk4OSA1OS4zMTcxIDEuNzIzNzMgNTkuODQ4OSAyLjIxMTg2IDYwLjI0OTlDMi42OTk5OSA2MC42NTEgMy4yOTIyMyA2MC45MDQ4IDMuOTE5MzEgNjAuOTgxNkM0LjU0NjM5IDYxLjA1ODQgNS4xODIzNyA2MC45NTUxIDUuNzUyODcgNjAuNjgzNkw2Mi40MTk1IDM0LjAxN0M2Mi45OTIyIDMzLjc0NzggNjMuNDc2NCAzMy4zMjEyIDYzLjgxNTYgMzIuNzg3QzY0LjE1NDcgMzIuMjUyOCA2NC4zMzQ4IDMxLjYzMzEgNjQuMzM0OCAzMS4wMDAzQzY0LjMzNDggMzAuMzY3NSA2NC4xNTQ3IDI5Ljc0NzggNjMuODE1NiAyOS4yMTM3QzYzLjQ3NjQgMjguNjc5NSA2Mi45OTIyIDI4LjI1MjggNjIuNDE5NSAyNy45ODM2VjI3Ljk4MzZaTTkuMjY5NTMgNTEuNjU3TDEyLjA2NjIgNDAuNDY3TDMwLjk5OTUgMzEuMDAwM0wxMi4wNjYyIDIxLjUzMzZMOS4yNjk1MyAxMC4zNDM2TDUzLjE2OTUgMzEuMDAwM0w5LjI2OTUzIDUxLjY1N1oiIGZpbGw9IiMzNUEyNjUiLz4NCjwvc3ZnPg0K\"","module.exports = __webpack_public_path__ + \"static/media/Account.9d5b65c9.svg\";","module.exports = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAxIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDEwMSAxMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cGF0aCBkPSJNNS45NDExOCAwLjIzNTI5MVYxMDcuMTc2SDBWMTE5LjA1OUgyMy43NjQ3VjEwNy4xNzZIMTcuODIzNVY3Ny40NzA2SDk1LjA1ODhDOTYuNjM0NSA3Ny40NzA2IDk4LjE0NTcgNzYuODQ0NiA5OS4yNTk5IDc1LjczMDRDMTAwLjM3NCA3NC42MTYzIDEwMSA3My4xMDUxIDEwMSA3MS41Mjk0VjEyLjExNzZDMTAxIDEwLjU0MTkgMTAwLjM3NCA5LjAzMDc4IDk5LjI1OTkgNy45MTY2Qzk4LjE0NTcgNi44MDI0MSA5Ni42MzQ1IDYuMTc2NDcgOTUuMDU4OCA2LjE3NjQ3SDE3LjgyMzVWMC4yMzUyOTFINS45NDExOFpNMjkuNzA1OSAxOC4wNTg4VjI5Ljk0MTJINDEuNTg4MlYxOC4wNTg4SDUzLjQ3MDZWMjkuOTQxMkg2NS4zNTI5VjE4LjA1ODhINzcuMjM1M1YyOS45NDEySDg5LjExNzZWNDEuODIzNUg3Ny4yMzUzVjUzLjcwNTlIODkuMTE3NlY2NS41ODgySDc3LjIzNTNWNTMuNzA1OUg2NS4zNTI5VjY1LjU4ODJINTMuNDcwNlY1My43MDU5SDQxLjU4ODJWNjUuNTg4MkgyOS43MDU5VjUzLjcwNTlIMTcuODIzNVY0MS44MjM1SDI5LjcwNTlWMjkuOTQxMkgxNy44MjM1VjE4LjA1ODhIMjkuNzA1OVoiIGZpbGw9ImJsYWNrIi8+DQo8cGF0aCBkPSJNMjkuNzA1NiA0MS44MjMySDQxLjU4NzlWNTMuNzA1NkgyOS43MDU2VjQxLjgyMzJaTTUzLjQ3MDMgNDEuODIzMkg2NS4zNTI2VjUzLjcwNTZINTMuNDcwM1Y0MS44MjMyWk00MS41ODc5IDI5Ljk0MDlINTMuNDcwM1Y0MS44MjMySDQxLjU4NzlWMjkuOTQwOVpNNjUuMzUyNiAyOS45NDA5SDc3LjIzNVY0MS44MjMySDY1LjM1MjZWMjkuOTQwOVoiIGZpbGw9ImJsYWNrIi8+DQo8L3N2Zz4NCg==\"","module.exports = __webpack_public_path__ + \"static/media/Feedback.22ef3824.svg\";","module.exports = __webpack_public_path__ + \"static/media/Help.6a3a2895.svg\";","module.exports = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI5IiBoZWlnaHQ9IjEwNiIgdmlld0JveD0iMCAwIDEyOSAxMDYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cGF0aCBkPSJNNS4yNSAxNy42NzVDNS4yNSAxNy42NzUgMTQuMTU2MiA1LjggMzQuOTM3NSA1LjhDNTUuNzE4OCA1LjggNjQuNjI1IDE3LjY3NSA2NC42MjUgMTcuNjc1VjEwMC44QzY0LjYyNSAxMDAuOCA1NS43MTg4IDk0Ljg2MjUgMzQuOTM3NSA5NC44NjI1QzE0LjE1NjIgOTQuODYyNSA1LjI1IDEwMC44IDUuMjUgMTAwLjhWMTcuNjc1WiIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIxMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+DQo8cGF0aCBkPSJNNjQuNjI1IDE3LjY3NUM2NC42MjUgMTcuNjc1IDczLjUzMTIgNS44IDk0LjMxMjUgNS44QzExNS4wOTQgNS44IDEyNCAxNy42NzUgMTI0IDE3LjY3NVYxMDAuOEMxMjQgMTAwLjggMTE1LjA5NCA5NC44NjI1IDk0LjMxMjUgOTQuODYyNUM3My41MzEyIDk0Ljg2MjUgNjQuNjI1IDEwMC44IDY0LjYyNSAxMDAuOFYxNy42NzVaIiBzdHJva2U9ImJsYWNrIiBzdHJva2Utd2lkdGg9IjEwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4NCjwvc3ZnPg0K\"","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyNi4zLjEsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHZpZXdCb3g9IjAgMCAxNjQgMTkyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxNjQgMTkyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8cGF0aCBmaWxsPSJibGFjayIgZD0iTTE1MC4zLDAuOWgtODJjLTMuNiwwLTcuMSwxLjQtOS43LDRjLTIuNiwyLjYtNCw2LTQsOS42djIwLjRoMTMuN1YxNC41aDgydjE2My4zaC04MnYtMjAuNEg1NC43djIwLjRjMCwzLjYsMS40LDcuMSw0LDkuNg0KCWMyLjYsMi42LDYsNCw5LjcsNGg4MmMzLjYsMCw3LjEtMS40LDkuNy00YzIuNi0yLjYsNC02LDQtOS42VjE0LjVjMC0zLjYtMS40LTcuMS00LTkuNkMxNTcuNCwyLjMsMTU0LDAuOSwxNTAuMywwLjl6Ii8+DQo8cGF0aCBmaWxsPSJibGFjayIgIGQ9Ik01MC43LDY0LjlMMjYuMiw4OS4zSDEyM3YxMy42SDI2LjJsMjQuNSwyNC40bC05LjcsOS42TDAsOTYuMWw0MS00MC44TDUwLjcsNjQuOXoiLz4NCjwvc3ZnPg0K\"","module.exports = __webpack_public_path__ + \"static/media/Profile.39f7f989.svg\";","module.exports = __webpack_public_path__ + \"static/media/Watchlist.e35b45e7.svg\";","module.exports = __webpack_public_path__ + \"static/media/bank-link-icon.73f705c3.svg\";","const data = {\r\n\t\"width\": 256,\r\n\t\"height\": 180,\r\n\t\"body\": \"<path fill=\\\"red\\\" d=\\\"M250.346 28.075A32.18 32.18 0 0 0 227.69 5.418C207.824 0 127.87 0 127.87 0S47.912.164 28.046 5.582A32.18 32.18 0 0 0 5.39 28.24c-6.009 35.298-8.34 89.084.165 122.97a32.18 32.18 0 0 0 22.656 22.657c19.866 5.418 99.822 5.418 99.822 5.418s79.955 0 99.82-5.418a32.18 32.18 0 0 0 22.657-22.657c6.338-35.348 8.291-89.1-.164-123.134Z\\\"/><path fill=\\\"#FFF\\\" d=\\\"m102.421 128.06l66.328-38.418l-66.328-38.418z\\\"/>\"\r\n};\r\nexports.__esModule = true;\r\nexports.default = data;\r\n","const data = {\r\n\t\"width\": 256,\r\n\t\"height\": 256,\r\n\t\"body\": \"<path fill=\\\"#1ED760\\\" d=\\\"M128 0C57.308 0 0 57.309 0 128c0 70.696 57.309 128 128 128c70.697 0 128-57.304 128-128C256 57.314 198.697.007 127.998.007l.001-.006Zm58.699 184.614c-2.293 3.76-7.215 4.952-10.975 2.644c-30.053-18.357-67.885-22.515-112.44-12.335a7.981 7.981 0 0 1-9.552-6.007a7.968 7.968 0 0 1 6-9.553c48.76-11.14 90.583-6.344 124.323 14.276c3.76 2.308 4.952 7.215 2.644 10.975Zm15.667-34.853c-2.89 4.695-9.034 6.178-13.726 3.289c-34.406-21.148-86.853-27.273-127.548-14.92c-5.278 1.594-10.852-1.38-12.454-6.649c-1.59-5.278 1.386-10.842 6.655-12.446c46.485-14.106 104.275-7.273 143.787 17.007c4.692 2.89 6.175 9.034 3.286 13.72v-.001Zm1.345-36.293C162.457 88.964 94.394 86.71 55.007 98.666c-6.325 1.918-13.014-1.653-14.93-7.978c-1.917-6.328 1.65-13.012 7.98-14.935C93.27 62.027 168.434 64.68 215.929 92.876c5.702 3.376 7.566 10.724 4.188 16.405c-3.362 5.69-10.73 7.565-16.4 4.187h-.006Z\\\"/>\"\r\n};\r\nexports.__esModule = true;\r\nexports.default = data;\r\n","const data = {\r\n\t\"width\": 256,\r\n\t\"height\": 209,\r\n\t\"body\": \"<path fill=\\\"#55acee\\\" d=\\\"M256 25.45a105.04 105.04 0 0 1-30.166 8.27c10.845-6.5 19.172-16.793 23.093-29.057a105.183 105.183 0 0 1-33.351 12.745C205.995 7.201 192.346.822 177.239.822c-29.006 0-52.523 23.516-52.523 52.52c0 4.117.465 8.125 1.36 11.97c-43.65-2.191-82.35-23.1-108.255-54.876c-4.52 7.757-7.11 16.78-7.11 26.404c0 18.222 9.273 34.297 23.365 43.716a52.312 52.312 0 0 1-23.79-6.57c-.003.22-.003.44-.003.661c0 25.447 18.104 46.675 42.13 51.5a52.592 52.592 0 0 1-23.718.9c6.683 20.866 26.08 36.05 49.062 36.475c-17.975 14.086-40.622 22.483-65.228 22.483c-4.24 0-8.42-.249-12.529-.734c23.243 14.902 50.85 23.597 80.51 23.597c96.607 0 149.434-80.031 149.434-149.435c0-2.278-.05-4.543-.152-6.795A106.748 106.748 0 0 0 256 25.45\\\"/>\"\r\n};\r\nexports.__esModule = true;\r\nexports.default = data;\r\n","const data = {\r\n\t\"width\": 256,\r\n\t\"height\": 256,\r\n\t\"body\": \"<path fill=\\\"#0A66C2\\\" d=\\\"M218.123 218.127h-37.931v-59.403c0-14.165-.253-32.4-19.728-32.4c-19.756 0-22.779 15.434-22.779 31.369v60.43h-37.93V95.967h36.413v16.694h.51a39.907 39.907 0 0 1 35.928-19.733c38.445 0 45.533 25.288 45.533 58.186l-.016 67.013ZM56.955 79.27c-12.157.002-22.014-9.852-22.016-22.009c-.002-12.157 9.851-22.014 22.008-22.016c12.157-.003 22.014 9.851 22.016 22.008A22.013 22.013 0 0 1 56.955 79.27m18.966 138.858H37.95V95.967h37.97v122.16ZM237.033.018H18.89C8.58-.098.125 8.161-.001 18.471v219.053c.122 10.315 8.576 18.582 18.89 18.474h218.144c10.336.128 18.823-8.139 18.966-18.474V18.454c-.147-10.33-8.635-18.588-18.966-18.453\\\"/>\"\r\n};\r\nexports.__esModule = true;\r\nexports.default = data;\r\n","const data = {\r\n\t\"width\": 24,\r\n\t\"height\": 24,\r\n\t\"body\": \"<path fill=\\\"currentColor\\\" d=\\\"M22.539 8.242H1.46V5.406h21.08v2.836zM1.46 10.812V24L12 18.11L22.54 24V10.812H1.46zM22.54 0H1.46v2.836h21.08V0z\\\"/>\"\r\n};\r\nexports.__esModule = true;\r\nexports.default = data;\r\n","module.exports = __webpack_public_path__ + \"static/media/analyze2.def492bc.svg\";","module.exports = __webpack_public_path__ + \"static/media/analytics.96f2c1d2.svg\";","const data = {\r\n\t\"width\": 24,\r\n\t\"height\": 24,\r\n\t\"body\": \"<path fill=\\\"currentColor\\\" d=\\\"M12 4a4 4 0 0 1 4 4a4 4 0 0 1-4 4a4 4 0 0 1-4-4a4 4 0 0 1 4-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4Z\\\"/>\"\r\n};\r\nexports.__esModule = true;\r\nexports.default = data;\r\n","const data = {\n\t\"width\": 24,\n\t\"height\": 24,\n\t\"body\": \"<path fill=\\\"currentColor\\\" d=\\\"M18 22q-1.25 0-2.125-.875T15 19q0-.175.025-.363q.025-.187.075-.337l-7.05-4.1q-.425.375-.95.587Q6.575 15 6 15q-1.25 0-2.125-.875T3 12q0-1.25.875-2.125T6 9q.575 0 1.1.212q.525.213.95.588l7.05-4.1q-.05-.15-.075-.337Q15 5.175 15 5q0-1.25.875-2.125T18 2q1.25 0 2.125.875T21 5q0 1.25-.875 2.125T18 8q-.575 0-1.1-.213q-.525-.212-.95-.587L8.9 11.3q.05.15.075.337Q9 11.825 9 12t-.025.362q-.025.188-.075.338l7.05 4.1q.425-.375.95-.588Q17.425 16 18 16q1.25 0 2.125.875T21 19q0 1.25-.875 2.125T18 22Z\\\"/>\"\n};\nexports.__esModule = true;\nexports.default = data;\n","const data = {\r\n\t\"width\": 24,\r\n\t\"height\": 24,\r\n\t\"body\": \"<path fill=\\\"currentColor\\\" d=\\\"M17 13h-4v4h-2v-4H7v-2h4V7h2v4h4m-5-9A10 10 0 0 0 2 12a10 10 0 0 0 10 10a10 10 0 0 0 10-10A10 10 0 0 0 12 2Z\\\"/>\"\r\n};\r\nexports.__esModule = true;\r\nexports.default = data;\r\n","module.exports = __webpack_public_path__ + \"./fonts/SpaceMono-Regular.ttf\";","module.exports = __webpack_public_path__ + \"./fonts/K2D-Regular.ttf\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAIBAMAAAA7P9P/AAAAFVBMVEUAAAAAAAAAAABHcEwAAAAAAAAAAAAsXusGAAAABnRSTlPUFhUAxLV788luAAAAQ0lEQVQI12MIUTY2NjZyZXBjAtIKKQwCCcrGRmyMDIZsTMYKCcIMxgIJSmyMxgzGhmwMCcJA2lggjdEYRBu5CBsbAwA6HgmSu7c8IwAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADfSURBVHgB3ZVhDYMwEIVfMDAkzMEszMEqoRJwAA6oA+ZgszAFzEEzBZuDrc1oUkjbO0p/8SXvz+XuHeXKAeyd2qgxuhlpo++kcYpJbEAYvT3TmHROo55hvFTLNW8zzJ16ylwSBsroSuSIVANNFDtSOXZudc7TcxtYNS6x8oouKMc51OCIcpxCweUxB/BRiLzOKlH0AZ8DJ4m6QWuGPLpE/wRPlOMVavBAOe6hoP04qOXmoJZfFEEUD6AXoQSBAj3EmDow6TLMFVYiwbu6dm4CG5D4/x5HzAdpY3ap1dg1PyNVyJlgDEwbAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAAAcklEQVRIDWNgGAWjIYAcAgqGtltBGFmMEJuFkAIU+f//vVD4RHCYiFBDkZJRCwgGHyM2FeCUQmqEMjJue3D+sDe6eVSLA8b/DP/RDSeZr2Bg8x+ESdFINR/gsnTUAlwhAxcnrSwCJkWqpBa49aOMYRECANa7E7ZM1CXvAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/has-notification-active.b9317cb3.png\";","module.exports = __webpack_public_path__ + \"static/media/has-notification.76af1056.png\";","module.exports = __webpack_public_path__ + \"static/media/portfolio-active.efe3924c.png\";","module.exports = __webpack_public_path__ + \"static/media/portfolio.e8bf12f0.png\";","module.exports = __webpack_public_path__ + \"static/media/feed-active.7796425f.png\";","module.exports = __webpack_public_path__ + \"static/media/feed.31fac6f4.png\";","module.exports = __webpack_public_path__ + \"static/media/search-active.cc2d6f99.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAoCAYAAAB99ePgAAAACXBIWXMAAAsTAAALEwEAmpwYAAADFklEQVRYhc2YC08TQRSFv4IgCGhriIGqIIKCD/CBAopgwkOpgFAUKC3bxP//J8wkZ/RmAu3udDfhJJNtd/feOXPv3Mcs9IZS8H8QuA9MAbMa7ncZGOgiWwj6gWlgAzgGzoEmcKnR1L0j4DPwGOgrioxd8QywD7QMmQRo62rHpRk/ZNGrdPZM7DawaSzT0jgBtoBlYBFYAj4A28Cv4H33e924uyeCXngM+ClrNDTJN+ApMNRBfhiYA2qSaUiHs+JIHgRHtK9assAp8OyahdgRPnupfXghoociHw23ifeMa46ASjBpN9h3xoG6IbgbYzkv8E4b3Smry71pSV2ns6x9eiHdb2J0lo0b3JjogVhIsGr0ujnuZVW0atLBSg7EQoIfTRpyc6XGHaUBFwS/gVHyx6iCqyk3D6dd1ROTPNcKIFbS9ZOZZyat0Ipx6XTwLA94XdPyTibXbkngLEgdRbk2UVLvilvK4Imqgus6isKgkrGb6yBNczBoStVhkd0E/5N8Wwm+qyEGtIpEAs6SRaFfdbctg4T935XYFbmTgtKIx5DqdqI2LFUUrUvA5aDJ4FmeqJhOxQVhR3gCCyZ7LwXP8oDXNW/meZtlRefKQfvaG0Vgx3Q83kOpsC3BlprKvGvrpOmQ99NmBS88ZVZl811eBL9Lt3Ppixjd3npubF6xgFgsm4UfxKarssqL71xXIgnad1/JlX5PVyP0/cOCyDVEcEMnMTvxdYrt/T6dyjyxtskEUVhVQXbtelMkW9qDsynd4Qg+Ck5gbRGNxqKUtVX/5uView51++W9Jh9Txh/SiW1COvbMyc3LufuZ4d0wJxLnunrzV0xu8mkmkUVPdQiqm32amMO3L1HVXog91Ap9WXGRFWJKkezJJx3GhVz6PDaZl8y58swQczW2EyoKmDU1CzUNl8O+AK+BB0FgZIpK//Jdc568VCFOE4VERG7mjzQHZn/UMnxsKUU+S4U+ucRH4XFeH1nywNcg4io3hdiq+azVyOmTQy5YEjFf49xB+kYQWzDEoluWojCubP1HdfPGYazXrqAI/AWJsGc6P11vXQAAAABJRU5ErkJggg==\"","module.exports = __webpack_public_path__ + \"static/media/bookmark-active.a74f9155.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAoCAYAAAAPOoFWAAAACXBIWXMAAAsTAAALEwEAmpwYAAABbklEQVRYhe2XTU8CMRRFT1E3LiWRja4QBFyqgAqGOLIxEfnQ//9XzCO3SR0HKcwMcTEveXlhBu55vW1JC9AEJsC4xJyIwxRYKj9LyKXSOCTAB3AHdIGbArMrXdN/8TAj1ykn6tL/AWvopSsI4lQbh4SdZ8HsYQWLCada2ZgrnGplY65wqpWNucKpVjbmCqda2fg/bDw9FKwHzIB22bAesBDM6nVZsBA0VZ3/McK9YV0JL3TCPQJu9Xm+ARgFS0dHgpb91Lt7Ae143drw++iRtYMRDTK6TgOvdh2Z/1JLAiY03LJw+gGwGQPzx2/UoQc9RO69QQZw61k/BD0CtQgQamiYAfwFWwFnwGUwR08BKPay4eSEB15Id+Vhr9oztqTf1MVIy3sXkI+aHFlKz18GkxD2ro7GOUAuBVxId+ZhiR6Yfc/A8Z4gMoA2FaZr+muY/fV8FQRKA80hmxLTX1/gbdXYPjkpCJQG2gBs43e+AWheWzD4nGQdAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAoCAYAAAC4h3lxAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB6UlEQVRYhe2YPS8EURSGn5lllyg0QkFBKCQ+ExoKwg/wFa3KPxBaBYVGo9ZR6UQiVin+gZVoSUQnQmR9zO5cmTizublGrEJyRvYkT+7s3Fu8Z+45956z8GmejA1APzAMDClkEGjGsVj8MnALlIBARk0EMt4D664TS4BJGRv2DlzJy3cgVE4gWh+BtsiBdvlhnIVGIaHDRORAE3AnC0rOQm3CDVCW5yhaeuMw2pbJQCY08yZaj+wkzgIHCr60qZJzoNU9RiObBlaAVcXMWJor2j3HkTSYl/TSB+qAjFLqZKxZzf4qKTKCr5SM8CWBo8m0me8+tACbwAlwCuRl1EDe0rMD9LhOdALXCm5YUyXPwLi9HYcy8SL1kGZeRWshzoUW6XLsSk9bNWoSSulI6wjSFDwkLDLKHQiBsTiEzqwQKinnTbTeAI2xA6NAUcFXNr9g0T1G+6UnuJAEibhUREE4BqZEs5d0kUUVX06aHE3kgPqki8x+kYZS1U9p5VCz9JXUGaX434lPU2J43zX13cAcsKCYAceRim1Z17RmQmBP7oWKrVkLSsopi87dWHzWamYCBX+fhz8QO1CURowO4MkpWTWHT2gx+S92ICkHysoxdg7Yp9C7gjAxVbDvnkKxdQGzct7OK6XP0ut9AF3v9ga2MivCAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/flatgrad.0b9cb975.png\";","var api = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../node_modules/css-loader/dist/cjs.js!./TextEditor.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".pell-content {\\r\\n    flex: 1;\\r\\n    margin:8px;\\r\\n    border:1px solid #ccc;\\r\\n    padding:8px;\\r\\n}\\r\\n\\r\\n.pell-holder{\\r\\n    margin: 0 16px;\\r\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n"],"sourceRoot":""}